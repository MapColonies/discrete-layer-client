diff --git a/node_modules/chonky/dist/chonky.cjs.development.js b/node_modules/chonky/dist/chonky.cjs.development.js
index 0662ee3..6851b39 100644
--- a/node_modules/chonky/dist/chonky.cjs.development.js
+++ b/node_modules/chonky/dist/chonky.cjs.development.js
@@ -37,6 +37,7 @@ var TextField = _interopDefault(require('@material-ui/core/TextField'));
 var AutoSizer = _interopDefault(require('react-virtualized-auto-sizer'));
 var reactWindow = require('react-window');
 var ListSubheader = _interopDefault(require('@material-ui/core/ListSubheader'));
+var core = require('@material-ui/core');
 
 function _extends() {
   _extends = Object.assign || function (target) {
@@ -5043,13 +5044,20 @@ var useStyles$m = /*#__PURE__*/makeGlobalChonkyStyles(function () {
  * @copyright 2020
  * @license MIT
  */
+var muiJSSClassNameGenerator = /*#__PURE__*/core.createGenerateClassName({
+  // Seed property is used for prefix jss classes generated by material ui.
+  // Added to prevent style collisions
+  seed: 'chonky-generated'
+});
 var FullFileBrowser = /*#__PURE__*/React__default.memo( /*#__PURE__*/React__default.forwardRef(function (props, ref) {
   var onScroll = props.onScroll;
-  return React__default.createElement(FileBrowser, Object.assign({
+  return React__default.createElement(core.StylesProvider, {
+    generateClassName: muiJSSClassNameGenerator
+  }, React__default.createElement(FileBrowser, Object.assign({
     ref: ref
   }, props), React__default.createElement(FileNavbar, null), React__default.createElement(FileToolbar, null), React__default.createElement(FileList, {
     onScroll: onScroll
-  }), React__default.createElement(FileContextMenu, null));
+  }), React__default.createElement(FileContextMenu, null)));
 }));
 FullFileBrowser.displayName = 'FullFileBrowser';
 
diff --git a/node_modules/chonky/dist/chonky.cjs.development.js.map b/node_modules/chonky/dist/chonky.cjs.development.js.map
index d362595..ae97efe 100644
--- a/node_modules/chonky/dist/chonky.cjs.development.js.map
+++ b/node_modules/chonky/dist/chonky.cjs.development.js.map
@@ -1 +1 @@
-{"version":3,"file":"chonky.cjs.development.js","sources":["../src/util/hooks-helpers.ts","../src/util/logger.ts","../src/util/file-helper.ts","../src/redux/files-transforms.ts","../src/action-definitions/option-ids.ts","../src/types/sort.types.ts","../src/redux/selectors.ts","../src/redux/thunks/file-actions.thunks.ts","../src/redux/thunks/dispatchers.thunks.ts","../src/types/file-view.types.ts","../src/types/icons.types.ts","../src/util/helpers.ts","../src/redux/thunks/index.ts","../src/action-definitions/essential.ts","../src/action-definitions/default.ts","../src/action-definitions/extra.ts","../src/action-definitions/index.ts","../src/redux/state.ts","../src/redux/reducers.ts","../src/redux/watchers.ts","../src/redux/store.ts","../src/components/internal/ChonkyIconPlaceholder.tsx","../src/util/default-config.ts","../src/util/i18n.ts","../src/util/icon-helper.ts","../src/util/styles.ts","../src/util/file-browser-handle.ts","../src/components/internal/ChonkyBusinessLogic.tsx","../src/util/dnd-fallback.ts","../src/components/external/FileContextMenu-hooks.ts","../src/types/dnd.types.ts","../src/components/file-list/DnDFileListDragLayer.tsx","../src/components/internal/HotkeyListener.tsx","../src/components/internal/ChonkyPresentationLayer.tsx","../src/components/external/FileBrowser.tsx","../src/components/external/FileNavbar-hooks.ts","../src/util/dnd.ts","../src/components/external/TextPlaceholder.tsx","../src/components/file-list/FileEntry-hooks.tsx","../src/types/action.types.ts","../src/util/file-actions.ts","../src/components/external/ToolbarButton.tsx","../src/components/external/FolderChainButton.tsx","../src/components/external/FileNavbar.tsx","../src/components/external/ToolbarDropdownButton.tsx","../src/components/external/ToolbarDropdown.tsx","../src/components/external/ToolbarInfo.tsx","../src/components/external/ToolbarSearch.tsx","../src/components/external/FileToolbar.tsx","../src/components/file-list/FileListEmpty.tsx","../src/components/internal/ClickableWrapper-hooks.tsx","../src/components/internal/ClickableWrapper.tsx","../src/components/file-list/FileEntryName.tsx","../src/components/file-list/CompactEntry.tsx","../src/components/file-list/DnDFileEntry.tsx","../src/components/file-list/FileThumbnail.tsx","../src/components/file-list/GridEntryDndIndicator.tsx","../src/components/file-list/GridEntryPreview.tsx","../src/components/file-list/GridEntry.tsx","../src/components/file-list/ListEntry.tsx","../src/components/file-list/FileEntry.tsx","../src/components/file-list/GridContainer.tsx","../src/components/file-list/ListContainer.tsx","../src/components/file-list/FileList.tsx","../src/components/external/FileContextMenu.tsx","../src/components/external/FullFileBrowser.tsx","../src/extensions/file-map.ts"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nexport const useDebounce = <T>(\n    value: T,\n    delay: number\n): [T, React.Dispatch<React.SetStateAction<T>>] => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(() => {\n        const handler = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [value, delay]);\n\n    return [debouncedValue, setDebouncedValue];\n};\n\nconst UNINITIALIZED_SENTINEL = {};\nexport const useStaticValue = <T>(factory: () => T): T => {\n    const valueRef = useRef<T>(UNINITIALIZED_SENTINEL as T);\n    if (valueRef.current === UNINITIALIZED_SENTINEL) valueRef.current = factory();\n    return valueRef.current;\n};\n\nexport const useInstanceVariable = <T>(value: T) => {\n    const ref = useRef(value);\n    useEffect(() => {\n        ref.current = value;\n    }, [ref, value]);\n    return ref;\n};\n","export class Logger {\n    public static error(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.error('[Chonky runtime error]', ...args);\n    }\n\n    public static warn(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.warn('[Chonky runtime warning]', ...args);\n    }\n\n    public static debug(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.debug('[Chonky runtime debug]', ...args);\n    }\n\n    public static formatBullets(bullets: string[]): string {\n        return `\\n- ${bullets.join('\\n- ')}`;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from '../types/file.types';\nimport { Logger } from './logger';\n\nexport class FileHelper {\n    public static isDirectory(file: Nullable<FileData>): file is FileData {\n        // Not a directory by default\n        return !!file && file.isDir === true;\n    }\n\n    public static isHidden(file: Nullable<FileData>): file is FileData {\n        // Not hidden by default\n        return !!file && file.isHidden === true;\n    }\n\n    public static isSymlink(file: Nullable<FileData>): file is FileData {\n        // Not a symlink by default\n        return !!file && file.isSymlink === true;\n    }\n\n    public static isEncrypted(file: Nullable<FileData>): file is FileData {\n        // Not encrypted by default\n        return !!file && file.isEncrypted === true;\n    }\n\n    public static isClickable(file: Nullable<FileData>): file is FileData {\n        // Clickable by default\n        return !!file;\n    }\n\n    public static isOpenable(file: Nullable<FileData>): file is FileData {\n        // Openable by default\n        return !!file && file.openable !== false;\n    }\n\n    public static isSelectable(file: Nullable<FileData>): file is FileData {\n        // Selectable by default\n        return !!file && file.selectable !== false;\n    }\n\n    public static isDraggable(file: Nullable<FileData>): file is FileData {\n        // File & folders are draggable by default, `null` is not\n        return !!file && file.draggable !== false;\n    }\n\n    public static isDroppable(file: Nullable<FileData>): file is FileData {\n        // Folders are droppable by default, files are not\n        if (!file) return false;\n        if (file.isDir && file.droppable !== false) return true;\n        return file.droppable === true;\n    }\n\n    public static isDndOpenable(file: Nullable<FileData>): file is FileData {\n        // Folders are DnD openable by default, files are not\n        if (!FileHelper.isOpenable(file)) return false;\n        if (file.isDir && file.dndOpenable !== false) return true;\n        return file.dndOpenable === true;\n    }\n\n    public static getModDate(file: Nullable<FileData>): Nullable<Date> {\n        if (!file || file.modDate === null || file.modDate === undefined) return null;\n        return FileHelper.parseDate(file.modDate);\n    }\n\n    public static parseDate(maybeDate: Date | string | any): Nullable<Date> {\n        if (typeof maybeDate === 'string' || typeof maybeDate === 'number') {\n            // We allow users to provide string and numerical representations of dates.\n            try {\n                return new Date(maybeDate);\n            } catch (error) {\n                Logger.error(\n                    `Could not convert provided string/number into a date: ${error.message} `,\n                    'Invalid value:',\n                    maybeDate\n                );\n            }\n        }\n        if (maybeDate instanceof Date && !isNaN(maybeDate.getTime())) {\n            // We only allow valid dates objects\n            return maybeDate;\n        }\n\n        // If we have an invalid date representation, we just return null.\n        Logger.warn('Unsupported date representation:', maybeDate);\n        return null;\n    }\n\n    public static getChildrenCount(file: Nullable<FileData>): Nullable<number> {\n        if (!file || typeof file.childrenCount !== 'number') return null;\n\n        return file.childrenCount;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileArray } from '../types/file.types';\nimport { Logger } from '../util/logger';\n\ninterface SanitizeFiles {\n    (mode: 'files', rawArray: FileArray | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'folderChain', rawArray: Nullable<FileArray> | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'fileActions', rawArray: FileAction[] | any): {\n        sanitizedArray: FileAction[];\n        errorMessages: string[];\n    };\n}\n\nexport const sanitizeInputArray: SanitizeFiles = (mode: string, rawArray: any[]) => {\n    const sanitizedFiles = [];\n    const errorMessages: string[] = [];\n\n    if ((mode === 'folderChain' || mode === 'fileActions') && !rawArray) {\n        // Do nothing, we allow folder chain to be null.\n    } else if (!Array.isArray(rawArray)) {\n        errorMessages.push(\n            `Expected \"${mode}\" prop to be an array, got \"${typeof rawArray}\" instead.`\n        );\n    } else {\n        let nonObjectFileCount = 0;\n        let missingFieldFileCount = 0;\n        const seenIds = new Set<string>();\n        const duplicateIds = new Set<string>();\n\n        for (let i = 0; i < rawArray.length; ++i) {\n            const item = rawArray[i];\n            if (!item) {\n                if (mode === 'fileActions') nonObjectFileCount++;\n                else sanitizedFiles.push(null);\n            } else if (typeof item !== 'object') {\n                nonObjectFileCount++;\n            } else {\n                if (!item.id || (mode !== 'fileActions' && !item.name)) {\n                    missingFieldFileCount++;\n                } else if (seenIds.has(item.id)) {\n                    duplicateIds.add(item.id);\n                } else {\n                    seenIds.add(item.id);\n                    sanitizedFiles.push(item);\n                }\n            }\n        }\n\n        if (nonObjectFileCount) {\n            errorMessages.push(\n                `Detected ${nonObjectFileCount} file(s) of invalid type. Remember ` +\n                    `that \"files\" array should contain either objects or nulls.`\n            );\n        }\n        if (missingFieldFileCount) {\n            errorMessages.push(\n                `Detected ${missingFieldFileCount} file(s) that are missing the ` +\n                    `required fields. Remember that file object should define an ` +\n                    `\"id\" and a \"name\".`\n            );\n        }\n        if (duplicateIds.size > 0) {\n            const repeatedIdsString = '\"' + Array.from(duplicateIds).join('\", \"') + '\"';\n            errorMessages.push(\n                `Detected ${duplicateIds.size} file IDs that are used multiple ` +\n                    `times. Remember that each file should have a unique IDs. The ` +\n                    `following IDs were seen multiple times: ${repeatedIdsString}`\n            );\n        }\n    }\n\n    if (errorMessages.length > 0) {\n        const errorMessageString = '\\n- ' + errorMessages.join('\\n- ');\n        let arrayString: string;\n        let itemString: string;\n        if (mode === 'folderChain') {\n            arrayString = 'folder chain';\n            itemString = 'files';\n        } else if (mode === 'fileActions') {\n            arrayString = 'file actions';\n            itemString = 'file actions';\n        } else {\n            // mode === 'files'\n            arrayString = 'files';\n            itemString = 'files';\n        }\n\n        Logger.error(\n            `Errors were detected when sanitizing the ${arrayString} array. ` +\n                `Offending ${itemString} were removed from the array. Summary of ` +\n                `validation errors: ${errorMessageString}`\n        );\n    }\n\n    return {\n        sanitizedArray: sanitizedFiles,\n        errorMessages,\n    };\n};\n","/**\n * We have option IDs in a separate file to avoid circular deps...\n */\nexport const OptionIds = {\n    ShowHiddenFiles: 'show_hidden_files',\n    ShowFoldersFirst: 'show_folders_first',\n    DarkMode: 'dark_mode',\n};\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from './file.types';\n\nexport type FileSortKeySelector = (file: Nullable<FileData>) => any;\n\nexport enum SortOrder {\n    ASC = 'asc',\n    DESC = 'desc',\n}\n","import sort from 'fast-sort';\nimport FuzzySearch from 'fuzzy-search';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { createSelector } from '@reduxjs/toolkit';\n\nimport { OptionIds } from '../action-definitions/option-ids';\nimport { FileArray, FileData, FileFilter } from '../types/file.types';\nimport { RootState } from '../types/redux.types';\nimport { FileSortKeySelector, SortOrder } from '../types/sort.types';\nimport { FileHelper } from '../util/file-helper';\n\n// Raw selectors\nexport const selectInstanceId = (state: RootState) => state.instanceId;\nexport const selectExternalFileActionHandler = (state: RootState) => state.externalFileActionHandler;\n\nexport const selectFileActionMap = (state: RootState) => state.fileActionMap;\nexport const selectFileActionIds = (state: RootState) => state.fileActionIds;\nexport const selectFileActionData = (fileActionId: string) => (state: RootState) =>\n    selectFileActionMap(state)[fileActionId];\nexport const selectToolbarItems = (state: RootState) => state.toolbarItems;\nexport const selectContextMenuItems = (state: RootState) => state.contextMenuItems;\n\nexport const selectFolderChain = (state: RootState) => state.folderChain;\nexport const selectCurrentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const currentFolder = folderChain.length > 0 ? folderChain[folderChain.length - 1] : null;\n    return currentFolder;\n};\nexport const selectParentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const parentFolder = folderChain.length > 1 ? folderChain[folderChain.length - 2] : null;\n    return parentFolder;\n};\n\nexport const selectRawFiles = (state: RootState) => state.rawFiles;\nexport const selectFileMap = (state: RootState) => state.fileMap;\nexport const selectCleanFileIds = (state: RootState) => state.cleanFileIds;\nexport const selectFileData = (fileId: Nullable<string>) => (state: RootState) =>\n    fileId ? selectFileMap(state)[fileId] : null;\n\nexport const selectHiddenFileIdMap = (state: RootState) => state.hiddenFileIdMap;\nexport const selectHiddenFileCount = (state: RootState) => Object.keys(selectHiddenFileIdMap(state)).length;\n\nexport const selectFocusSearchInput = (state: RootState) => state.focusSearchInput;\nexport const selectSearchString = (state: RootState) => state.searchString;\n\nexport const selectSelectionMap = (state: RootState) => state.selectionMap;\nexport const selectSelectedFileIds = (state: RootState) => Object.keys(selectSelectionMap(state));\nexport const selectSelectionSize = (state: RootState) => selectSelectedFileIds(state).length;\nexport const selectIsFileSelected = (fileId: Nullable<string>) => (state: RootState) =>\n    !!fileId && !!selectSelectionMap(state)[fileId];\nexport const selectSelectedFiles = (state: RootState) => {\n    const fileMap = selectFileMap(state);\n    return Object.keys(selectSelectionMap(state)).map(id => fileMap[id]);\n};\nexport const selectSelectedFilesForAction = (fileActionId: string) => (state: RootState) => {\n    const { fileActionMap } = state;\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.requiresSelection) return undefined;\n\n    return getSelectedFiles(state, action.fileFilter);\n};\nexport const selectSelectedFilesForActionCount = (fileActionId: string) => (state: RootState) =>\n    getSelectedFilesForAction(state, fileActionId)?.length;\nexport const selectDisableSelection = (state: RootState) => state.disableSelection;\n\nexport const selectFileViewConfig = (state: RootState) => state.fileViewConfig;\n\nexport const selectSortActionId = (state: RootState) => state.sortActionId;\nexport const selectSortOrder = (state: RootState) => state.sortOrder;\n\nexport const selectOptionMap = (state: RootState) => state.optionMap;\nexport const selectOptionValue = (optionId: string) => (state: RootState) => selectOptionMap(state)[optionId];\n\nexport const selectThumbnailGenerator = (state: RootState) => state.thumbnailGenerator;\nexport const selectDoubleClickDelay = (state: RootState) => state.doubleClickDelay;\nexport const selectIsDnDDisabled = (state: RootState) => state.disableDragAndDrop;\nexport const selectClearSelectionOnOutsideClick = (state: RootState) => state.clearSelectionOnOutsideClick;\n\nexport const selectContextMenuMounted = (state: RootState) => state.contextMenuMounted;\nexport const selectContextMenuConfig = (state: RootState) => state.contextMenuConfig;\nexport const selectContextMenuTriggerFile = (state: RootState) => {\n    const config = selectContextMenuConfig(state);\n    if (!config || !config.triggerFileId) return null;\n    const fileMap = selectFileMap(state);\n    return fileMap[config.triggerFileId] ?? null;\n};\n\n// Raw selectors\nconst getFileActionMap = (state: RootState) => state.fileActionMap;\nconst getOptionMap = (state: RootState) => state.optionMap;\nconst getFileMap = (state: RootState) => state.fileMap;\nconst getFileIds = (state: RootState) => state.fileIds;\nconst getCleanFileIds = (state: RootState) => state.cleanFileIds;\nconst getSortActionId = (state: RootState) => state.sortActionId;\nconst getSortOrder = (state: RootState) => state.sortOrder;\nconst getSearchString = (state: RootState) => state.searchString;\nconst _getLastClick = (state: RootState) => state.lastClick;\n\n// Memoized selectors\nconst makeGetAction = (fileActionSelector: (state: RootState) => Nullable<string>) =>\n    createSelector([getFileActionMap, fileActionSelector], (fileActionMap, fileActionId) =>\n        fileActionId && fileActionMap[fileActionId] ? fileActionMap[fileActionId] : null\n    );\nconst makeGetOptionValue = (optionId: string, defaultValue: any = undefined) =>\n    createSelector([getOptionMap], optionMap => {\n        const value = optionMap[optionId];\n        if (value === undefined) {\n            return defaultValue;\n        }\n        return value;\n    });\nconst makeGetFiles = (fileIdsSelector: (state: RootState) => Nullable<string>[]) =>\n    createSelector(\n        [getFileMap, fileIdsSelector],\n        (fileMap, fileIds): FileArray => fileIds.map(fileId => (fileId && fileMap[fileId] ? fileMap[fileId] : null))\n    );\nconst getSortedFileIds = createSelector(\n    [\n        getFileIds,\n        getSortOrder,\n        makeGetFiles(getFileIds),\n        makeGetAction(getSortActionId),\n        makeGetOptionValue(OptionIds.ShowFoldersFirst, false),\n    ],\n    (fileIds, sortOrder, files, sortAction, showFolderFirst) => {\n        if (!sortAction) {\n            // We allow users to set the sort action ID to `null` if they want to use their\n            // own sorting mechanisms instead of relying on Chonky built-in sort.\n            return fileIds;\n        }\n\n        const prepareSortKeySelector = (selector: FileSortKeySelector) => (file: Nullable<FileData>) => selector(file);\n\n        const sortFunctions: {\n            asc?: (file: FileData) => any;\n            desc?: (file: FileData) => any;\n        }[] = [];\n\n        if (showFolderFirst) {\n            // If option is undefined (relevant actions is not enabled), we don't show\n            // folders first.\n            sortFunctions.push({\n                desc: prepareSortKeySelector(FileHelper.isDirectory),\n            });\n        }\n        if (sortAction.sortKeySelector) {\n            const configKeyName = sortOrder === SortOrder.ASC ? 'asc' : 'desc';\n            sortFunctions.push({\n                [configKeyName]: prepareSortKeySelector(sortAction.sortKeySelector),\n            });\n        }\n        if (sortFunctions.length === 0) return fileIds;\n\n        // We copy the array because `fast-sort` mutates it\n        const sortedFileIds = sort([...files])\n            .by(sortFunctions as any)\n            .map(file => (file ? file.id : null));\n        return sortedFileIds;\n    }\n);\nconst getSearcher = createSelector(\n    [makeGetFiles(getCleanFileIds)],\n    cleanFiles => new FuzzySearch(cleanFiles as FileData[], ['name'], { caseSensitive: false })\n);\nconst getSearchFilteredFileIds = createSelector(\n    [getCleanFileIds, getSearchString, getSearcher],\n    (cleanFileIds, searchString, searcher) =>\n        searchString ? searcher.search(searchString).map(f => f.id) : cleanFileIds\n);\nconst getHiddenFileIdMap = createSelector(\n    [getSearchFilteredFileIds, makeGetFiles(getCleanFileIds), makeGetOptionValue(OptionIds.ShowHiddenFiles)],\n    (searchFilteredFileIds, cleanFiles, showHiddenFiles) => {\n        const searchFilteredFileIdsSet = new Set(searchFilteredFileIds);\n        const hiddenFileIdMap: any = {};\n        cleanFiles.forEach(file => {\n            if (!file) return;\n            else if (!searchFilteredFileIdsSet.has(file.id)) {\n                // Hidden by seach\n                hiddenFileIdMap[file.id] = true;\n            } else if (!showHiddenFiles && FileHelper.isHidden(file)) {\n                // Hidden by options\n                hiddenFileIdMap[file.id] = true;\n            }\n        });\n        return hiddenFileIdMap;\n    }\n);\nconst getDisplayFileIds = createSelector(\n    [getSortedFileIds, getHiddenFileIdMap],\n    /** Returns files that will actually be shown to the user. */\n    (sortedFileIds, hiddenFileIdMap) => sortedFileIds.filter(id => !id || !hiddenFileIdMap[id])\n);\nconst getLastClickIndex = createSelector(\n    [_getLastClick, getSortedFileIds],\n    /** Returns the last click index after ensuring it is actually still valid. */\n    (lastClick, displayFileIds) => {\n        if (\n            !lastClick ||\n            lastClick.index > displayFileIds.length - 1 ||\n            lastClick.fileId != displayFileIds[lastClick.index]\n        ) {\n            return null;\n        }\n        return lastClick.index;\n    }\n);\n\nexport const selectors = {\n    // Raw selectors\n    getFileActionMap,\n    getOptionMap,\n    getFileMap,\n    getFileIds,\n    getCleanFileIds,\n    getSortActionId,\n    getSortOrder,\n    getSearchString,\n    _getLastClick,\n\n    // Memoized selectors\n    getSortedFileIds,\n    getSearcher,\n    getSearchFilteredFileIds,\n    getHiddenFileIdMap,\n    getDisplayFileIds,\n    getLastClickIndex,\n\n    // Parametrized selectors\n    makeGetAction,\n    makeGetOptionValue,\n    makeGetFiles,\n};\n\n// Selectors meant to be used outside of Redux code\nexport const getFileData = (state: RootState, fileId: Nullable<string>) =>\n    fileId ? selectFileMap(state)[fileId] : null;\nexport const getIsFileSelected = (state: RootState, file: FileData) => {\n    // !!! We deliberately don't use `FileHelper.isSelectable` here as we want to\n    //     reflect the state of Redux store accurately.\n    return !!selectSelectionMap(state)[file.id];\n};\nexport const getSelectedFiles = (state: RootState, ...filters: Nilable<FileFilter>[]) => {\n    const { fileMap, selectionMap } = state;\n\n    const selectedFiles = Object.keys(selectionMap).map(id => fileMap[id]);\n    const filteredSelectedFiles = filters.reduce(\n        (prevFiles, filter) => (filter ? prevFiles.filter(filter) : prevFiles),\n        selectedFiles\n    );\n    return filteredSelectedFiles;\n};\nexport const getSelectedFilesForAction = (state: RootState, fileActionId: string) =>\n    selectSelectedFilesForAction(fileActionId)(state);\n","import { Nilable } from 'tsdef';\n\nimport { ChonkyActions, DefaultFileActions, EssentialFileActions } from '../../action-definitions/index';\nimport { FileActionGroup, FileActionMenuItem } from '../../types/action-menus.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyThunk } from '../../types/redux.types';\nimport { SortOrder } from '../../types/sort.types';\nimport { sanitizeInputArray } from '../files-transforms';\nimport { reduxActions } from '../reducers';\nimport { selectCleanFileIds, selectFileMap, selectHiddenFileIdMap, selectSelectionMap } from '../selectors';\n\n/**\n * Merges multiple file action arrays into one while removing duplicates\n */\nconst mergeFileActionsArrays = (...fileActionArrays: FileAction[][]): FileAction[] => {\n    const seenActionIds = new Set<string>();\n    const addToSeen = (a: FileAction) => !!seenActionIds.add(a.id);\n    const wasNotSeen = (a: FileAction) => !seenActionIds.has(a.id);\n\n    const duplicateFreeArrays = fileActionArrays.map(arr => {\n        const duplicateFreeArray = arr.filter(wasNotSeen);\n        duplicateFreeArray.map(addToSeen);\n        return duplicateFreeArray;\n    });\n    return new Array<FileAction>().concat(...duplicateFreeArrays);\n};\n\nexport const thunkUpdateRawFileActions = (\n    rawFileActions: FileAction[] | any,\n    disableDefaultFileActions: Nilable<boolean | string[]>\n): ChonkyThunk => dispatch => {\n    const { sanitizedArray, errorMessages } = sanitizeInputArray('fileActions', rawFileActions);\n\n    // Add default actions unless user disabled them\n    let defaultActionsToAdd: FileAction[];\n    if (Array.isArray(disableDefaultFileActions)) {\n        const disabledActionIds = new Set(disableDefaultFileActions);\n        defaultActionsToAdd = DefaultFileActions.filter(action => !disabledActionIds.has(action.id));\n    } else if (disableDefaultFileActions) {\n        defaultActionsToAdd = [];\n    } else {\n        defaultActionsToAdd = DefaultFileActions;\n    }\n\n    const fileActions = mergeFileActionsArrays(sanitizedArray, EssentialFileActions, defaultActionsToAdd);\n    const optionDefaults: any = {};\n    fileActions.map(a => (a.option ? (optionDefaults[a.option.id] = a.option.defaultValue) : null));\n\n    dispatch(reduxActions.setRawFileActions(rawFileActions));\n    dispatch(reduxActions.setFileActionsErrorMessages(errorMessages));\n    dispatch(reduxActions.setFileActions(fileActions));\n    dispatch(reduxActions.setOptionDefaults(optionDefaults));\n    dispatch(thunkUpdateToolbarNContextMenuItems(fileActions));\n};\n\nexport const thunkUpdateToolbarNContextMenuItems = (fileActions: FileAction[]): ChonkyThunk => dispatch => {\n    const excludedToolbarFileActionIds = new Set<string>([\n        // TODO: Move decision to exclude actions somewhere else, as users' custom\n        //  components might not give these actions special treatment like Chonky does.\n        ChonkyActions.OpenParentFolder.id,\n    ]);\n\n    type SeenGroupMap = { [groupName: string]: FileActionGroup };\n\n    const toolbarItems: FileActionMenuItem[] = [];\n    const seenToolbarGroups: SeenGroupMap = {};\n\n    const contextMenuItems: FileActionMenuItem[] = [];\n    const seenContextMenuGroups: SeenGroupMap = {};\n\n    const getGroup = (itemArray: FileActionMenuItem[], seenMap: SeenGroupMap, groupName: string): FileActionGroup => {\n        if (seenMap[groupName]) return seenMap[groupName];\n        const group: FileActionGroup = { name: groupName, fileActionIds: [] };\n        itemArray.push(group);\n        seenMap[groupName] = group;\n        return group;\n    };\n\n    for (const action of fileActions) {\n        const button = action.button;\n        if (!button) continue;\n\n        if (button.toolbar && !excludedToolbarFileActionIds.has(action.id)) {\n            if (button.group) {\n                const group = getGroup(toolbarItems, seenToolbarGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                toolbarItems.push(action.id);\n            }\n        }\n\n        if (button.contextMenu) {\n            if (button.group) {\n                const group = getGroup(contextMenuItems, seenContextMenuGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                contextMenuItems.push(action.id);\n            }\n        }\n    }\n\n    dispatch(reduxActions.updateFileActionMenuItems([toolbarItems, contextMenuItems]));\n};\n\nexport const thunkUpdateDefaultFileViewActionId = (fileActionId: Nilable<string>): ChonkyThunk => (\n    dispatch,\n    getState\n) => {\n    const { fileActionMap } = getState();\n    const action = fileActionId ? fileActionMap[fileActionId] : null;\n    if (action && action.fileViewConfig) {\n        dispatch(reduxActions.setFileViewConfig(action.fileViewConfig));\n    }\n};\n\nexport const thunkActivateSortAction = (fileActionId: Nilable<string>): ChonkyThunk => (dispatch, getState) => {\n    if (!fileActionId) return;\n\n    const { sortActionId: oldActionId, sortOrder: oldOrder, fileActionMap } = getState();\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.sortKeySelector) return;\n\n    let order = oldOrder === SortOrder.ASC ? SortOrder.DESC : SortOrder.ASC;\n    if (oldActionId !== fileActionId) {\n        order = SortOrder.ASC;\n    }\n\n    dispatch(reduxActions.setSort({ actionId: fileActionId, order: order }));\n};\n\nexport const thunkApplySelectionTransform = (action: FileAction): ChonkyThunk => (dispatch, getState) => {\n    const selectionTransform = action.selectionTransform;\n    if (!selectionTransform) return;\n\n    const state = getState();\n    const prevSelection = new Set<string>(Object.keys(selectSelectionMap(state)));\n    const hiddenFileIds = new Set<string>(Object.keys(selectHiddenFileIdMap(state)));\n\n    const newSelection = selectionTransform({\n        prevSelection,\n        fileIds: selectCleanFileIds(state),\n        fileMap: selectFileMap(state),\n        hiddenFileIds,\n    });\n    if (!newSelection) return;\n\n    if (newSelection.size === 0) {\n        dispatch(reduxActions.clearSelection());\n    } else {\n        dispatch(reduxActions.selectFiles({ fileIds: Array.from(newSelection), reset: true }));\n    }\n};\n","import { MaybePromise, Undefinable } from 'tsdef';\n\nimport { FileActionData, FileActionState } from '../../types/action-handler.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyDispatch, ChonkyThunk } from '../../types/redux.types';\nimport { Logger } from '../../util/logger';\nimport { reduxActions } from '../reducers';\nimport {\n    selectContextMenuTriggerFile, selectExternalFileActionHandler, selectFileActionMap,\n    selectInstanceId, selectSelectedFiles\n} from '../selectors';\nimport { thunkActivateSortAction, thunkApplySelectionTransform } from './file-actions.thunks';\n\n/**\n * Thunk that dispatches actions to the external (user-provided) action handler.\n */\nexport const thunkDispatchFileAction = (data: FileActionData<FileAction>): ChonkyThunk => (_dispatch, getState) => {\n    Logger.debug(`FILE ACTION DISPATCH: [${data.id}]`, 'data:', data);\n    const state = getState();\n    const action = selectFileActionMap(state)[data.id];\n    const externalFileActionHandler = selectExternalFileActionHandler(state);\n    if (action) {\n        if (externalFileActionHandler) {\n            Promise.resolve(externalFileActionHandler(data)).catch(error =>\n                Logger.error(`User-defined file action handler threw an error: ${error.message}`)\n            );\n        }\n    } else {\n        Logger.warn(\n            `Internal components dispatched the \"${data.id}\" file action, but such ` + `action was not registered.`\n        );\n    }\n};\n\n/**\n * Thunk that is used by internal components (and potentially the user) to \"request\"\n * actions. When action is requested, Chonky \"prepares\" the action data by extracting it\n * from Redux state. Once action data is ready, Chonky executes some side effect and/or\n * dispatches the action to the external action handler.\n */\nexport const thunkRequestFileAction = <Action extends FileAction>(\n    action: Action,\n    payload: Action['__payloadType']\n): ChonkyThunk => (dispatch, getState) => {\n    Logger.debug(`FILE ACTION REQUEST: [${action.id}]`, 'action:', action, 'payload:', payload);\n    const state = getState();\n    const instanceId = selectInstanceId(state);\n\n    if (!selectFileActionMap(state)[action.id]) {\n        Logger.warn(\n            `The action \"${action.id}\" was requested, but it is not registered. The ` +\n                `action will still be dispatched, but this might indicate a bug in ` +\n                `the code. Please register your actions by passing them to ` +\n                `\"fileActions\" prop.`\n        );\n    }\n\n    // Determine files for the action if action requires selection\n    const selectedFiles = selectSelectedFiles(state);\n    const selectedFilesForAction = action.fileFilter ? selectedFiles.filter(action.fileFilter) : selectedFiles;\n    if (action.requiresSelection && selectedFilesForAction.length === 0) {\n        Logger.warn(\n            `Internal components requested the \"${action.id}\" file ` +\n                `action, but the selection for this action was empty. This ` +\n                `might a bug in the code of the presentational components.`\n        );\n        return;\n    }\n\n    const contextMenuTriggerFile = selectContextMenuTriggerFile(state);\n    const actionState: FileActionState<{}> = {\n        instanceId,\n        selectedFiles,\n        selectedFilesForAction,\n        contextMenuTriggerFile,\n    };\n\n    // === Update sort state if necessary\n    const sortKeySelector = action.sortKeySelector;\n    if (sortKeySelector) dispatch(thunkActivateSortAction(action.id));\n\n    // === Update file view state if necessary\n    const fileViewConfig = action.fileViewConfig;\n    if (fileViewConfig) dispatch(reduxActions.setFileViewConfig(fileViewConfig));\n\n    // === Update option state if necessary\n    const option = action.option;\n    if (option) dispatch(reduxActions.toggleOption(option.id));\n\n    // === Apply selection transform if necessary\n    const selectionTransform = action.selectionTransform;\n    if (selectionTransform) dispatch(thunkApplySelectionTransform(action));\n\n    // Apply the effect\n    const effect = action.effect;\n    let maybeEffectPromise: MaybePromise<boolean | undefined> = undefined;\n    if (effect) {\n        try {\n            maybeEffectPromise = effect({\n                action,\n                payload,\n                state: actionState,\n                reduxDispatch: dispatch,\n                getReduxState: getState,\n            }) as MaybePromise<boolean | undefined>;\n        } catch (error) {\n            Logger.error(`User-defined effect function for action ${action.id} threw an ` + `error: ${error.message}`);\n        }\n    }\n\n    // Dispatch the action to user code. Deliberately call it after all other\n    // operations are over.\n    return Promise.resolve(maybeEffectPromise)\n        .then(effectResult => {\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, effectResult);\n        })\n        .catch(error => {\n            Logger.error(\n                `User-defined effect function for action ${action.id} returned a ` +\n                    `promise that was rejected: ${error.message}`\n            );\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, undefined);\n        });\n};\n\nexport const triggerDispatchAfterEffect = <Action extends FileAction>(\n    dispatch: ChonkyDispatch,\n    data: FileActionData<Action>,\n    effectResult: Undefinable<boolean>\n) => {\n    const preventDispatch = effectResult === true;\n    if (!preventDispatch) dispatch(thunkDispatchFileAction(data));\n};\n","export enum FileViewMode {\n    List = 'list',\n    Compact = 'compact',\n    Grid = 'grid',\n}\n\nexport type FileViewConfigList = {\n    mode: FileViewMode.List;\n    entryHeight: number;\n};\n\nexport type FileViewConfigGrid = {\n    mode: FileViewMode.Compact | FileViewMode.Grid;\n    entryWidth: number;\n    entryHeight: number;\n};\n\nexport type FileViewConfig = FileViewConfigList | FileViewConfigGrid;\n","import React from 'react';\n\nexport enum ChonkyIconName {\n    // Misc\n    loading = 'loading',\n    dropdown = 'dropdown',\n    placeholder = 'placeholder',\n\n    // File Actions: Drag & drop\n    dndDragging = 'dndDragging',\n    dndCanDrop = 'dndCanDrop',\n    dndCannotDrop = 'dndCannotDrop',\n\n    // File Actions: File operations\n    openFiles = 'openFiles',\n    openParentFolder = 'openParentFolder',\n    copy = 'copy',\n    paste = 'paste',\n    share = 'share',\n    search = 'search',\n    selectAllFiles = 'selectAllFiles',\n    clearSelection = 'clearSelection',\n\n    // File Actions: Sorting & options\n    sortAsc = 'sortAsc',\n    sortDesc = 'sortDesc',\n    toggleOn = 'toggleOn',\n    toggleOff = 'toggleOff',\n\n    // File Actions: File Views\n    list = 'list',\n    compact = 'compact',\n    smallThumbnail = 'smallThumbnail',\n    largeThumbnail = 'largeThumbnail',\n\n    // File Actions: Unsorted\n    folder = 'folder',\n    folderCreate = 'folderCreate',\n    folderOpen = 'folderOpen',\n    folderChainSeparator = 'folderChainSeparator',\n    download = 'download',\n    upload = 'upload',\n    trash = 'trash',\n    fallbackIcon = 'fallbackIcon',\n\n    // File modifiers\n    symlink = 'symlink',\n    hidden = 'hidden',\n\n    // Generic file types\n    file = 'file',\n    license = 'license',\n    code = 'code',\n    config = 'config',\n    model = 'model',\n    database = 'database',\n    text = 'text',\n    archive = 'archive',\n    image = 'image',\n    video = 'video',\n    info = 'info',\n    key = 'key',\n    lock = 'lock',\n    music = 'music',\n    terminal = 'terminal',\n    users = 'users',\n\n    // OS file types\n    linux = 'linux',\n    ubuntu = 'ubuntu',\n    windows = 'windows',\n\n    // Programming language file types\n    rust = 'rust',\n    python = 'python',\n    nodejs = 'nodejs',\n    php = 'php',\n\n    // Development tools file types\n    git = 'git',\n\n    // Brands file types\n    adobe = 'adobe',\n\n    // Other program file types\n    pdf = 'pdf',\n    excel = 'excel',\n    word = 'word',\n    flash = 'flash',\n}\n\nexport interface FileIconData {\n    icon: ChonkyIconName | string;\n    colorCode: number;\n}\n\nexport interface ChonkyIconProps {\n    icon: ChonkyIconName | string;\n    spin?: boolean;\n    className?: string;\n    fixedWidth?: boolean;\n    style?: React.CSSProperties;\n}\n","// Used in React hooks to indicate empty deps are intentional.\nimport { MaybePromise, Nullable, WritableProps } from 'tsdef';\n\nimport { FileAction, FileActionEffect } from '../types/action.types';\nimport { Logger } from './logger';\n\n// Used in contexts that need to provide some default value for a function.\n// eslint-disable-next-line no-unused-vars,@typescript-eslint/no-unused-vars\nexport const NOOP_FUNCTION = (...args: any[]) => {\n    Logger.warn(\n        `The \"NOOP_FUNCTION\" from the constants module was called. ` +\n            `This can indicate a bug in one of the components. Supplied args:`,\n        args\n    );\n};\n\nexport const isPromise = <T>(value: MaybePromise<T> | any): value is Promise<T> => {\n    if (typeof value !== 'object' || !value) return false;\n    const then = (value as Promise<T>).then;\n    return then && typeof then === 'function';\n};\n\nexport const defineFileAction = <Action extends FileAction>(\n    action: Action,\n    effect?: FileActionEffect<FileAction>\n): WritableProps<Action> => {\n    if (action.__payloadType !== undefined && (action.hotkeys || action.button)) {\n        const errorMessage =\n            `Invalid definition was provided for file action \"${action.id}\". Actions ` +\n            `that specify hotkeys or buttons cannot define a payload type. If ` +\n            `your application requires this functionality, define two actions ` +\n            `and chain them using effects.`;\n        Logger.error(errorMessage);\n        throw new Error(errorMessage);\n    }\n\n    action.effect = effect;\n    return action;\n};\n\n/**\n * Recursively check the current element and the parent elements, going bottom-up.\n * Returns the first element to match the predicate, otherwise returns null if such\n * element is not found.\n */\nexport const findElementAmongAncestors = (\n    maybeElement: HTMLElement | any,\n    predicate: (maybeElement: HTMLElement | any) => boolean\n): Nullable<HTMLElement> => {\n    if (!maybeElement) return maybeElement;\n\n    if (predicate(maybeElement)) return maybeElement;\n\n    if (maybeElement.parentElement) {\n        return findElementAmongAncestors(maybeElement.parentElement, predicate);\n    }\n\n    return null;\n};\n\nexport const elementIsInsideButton = (buttonCandidate: HTMLElement | any): boolean => {\n    return !!findElementAmongAncestors(\n        buttonCandidate,\n        (element: any) => element.tagName && element.tagName.toLowerCase() === 'button'\n    );\n};\n\nexport const getValueOrFallback = <T extends any>(\n    value: T | undefined,\n    fallback: T,\n    desiredType?: 'boolean' | 'string' | 'number'\n): NonNullable<T> => {\n    if (desiredType) {\n        return (typeof value === desiredType ? value : fallback) as NonNullable<T>;\n    }\n    return (value !== undefined ? value : fallback) as NonNullable<T>;\n};\n","import { ChonkyThunk } from '../../types/redux.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { reduxActions } from '../reducers';\nimport { selectors } from '../selectors';\n\nexport const reduxThunks = {\n    selectRange: (params: {\n        rangeStart: number;\n        rangeEnd: number;\n        reset?: boolean;\n    }): ChonkyThunk => (dispatch, getState) => {\n        const state = getState();\n        if (state.disableSelection) return;\n        const displayFileIds = selectors.getDisplayFileIds(state);\n        const fileIdsToSelect = displayFileIds\n            .slice(params.rangeStart, params.rangeEnd + 1)\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id])) as string[];\n        dispatch(\n            reduxActions.selectFiles({\n                fileIds: fileIdsToSelect,\n                reset: !!params.reset,\n            })\n        );\n    },\n};\n","import { reduxActions } from '../redux/reducers';\nimport {\n    getFileData, getIsFileSelected, selectDisableSelection, selectors, selectParentFolder,\n    selectSelectionSize\n} from '../redux/selectors';\nimport { reduxThunks } from '../redux/thunks';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport {\n    ChangeSelectionPayload, EndDragNDropPayload, KeyboardClickFilePayload, MouseClickFilePayload,\n    MoveFilesPayload, OpenFileContextMenuPayload, OpenFilesPayload, StartDragNDropPayload\n} from '../types/action-payloads.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { Logger } from '../util/logger';\nimport { ChonkyActions } from './index';\n\nexport const EssentialActions = {\n    /**\n     * Action that is dispatched when the user clicks on a file entry using their mouse.\n     * Both single clicks and double clicks trigger this action.\n     */\n    MouseClickFile: defineFileAction(\n        {\n            id: 'mouse_click_file',\n            __payloadType: {} as MouseClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (payload.clickType === 'double') {\n                if (FileHelper.isOpenable(payload.file)) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n\n                            // To simulate Windows Explorer and Nautilus behaviour,\n                            // a double click on a file only opens that file even if\n                            // there is a selection.\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else {\n                // We're dealing with a single click\n\n                const disableSelection = selectDisableSelection(getReduxState());\n                if (FileHelper.isSelectable(payload.file) && !disableSelection) {\n                    if (payload.ctrlKey) {\n                        // Multiple selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: false,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    } else if (payload.shiftKey) {\n                        // Range selection\n                        const lastClickIndex = selectors.getLastClickIndex(getReduxState());\n                        if (typeof lastClickIndex === 'number') {\n                            // We have the index of the previous click\n                            let rangeStart = lastClickIndex;\n                            let rangeEnd = payload.fileDisplayIndex;\n                            if (rangeStart > rangeEnd) {\n                                [rangeStart, rangeEnd] = [rangeEnd, rangeStart];\n                            }\n\n                            reduxDispatch(reduxThunks.selectRange({ rangeStart, rangeEnd }));\n                        } else {\n                            // Since we can't do a range selection, do a\n                            // multiple selection\n                            reduxDispatch(\n                                reduxActions.toggleSelection({\n                                    fileId: payload.file.id,\n                                    exclusive: false,\n                                })\n                            );\n                            reduxDispatch(\n                                reduxActions.setLastClickIndex({\n                                    index: payload.fileDisplayIndex,\n                                    fileId: payload.file.id,\n                                })\n                            );\n                        }\n                    } else {\n                        // Exclusive selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: true,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    }\n                } else {\n                    if (!payload.ctrlKey && !disableSelection) {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                    reduxDispatch(\n                        reduxActions.setLastClickIndex({\n                            index: payload.fileDisplayIndex,\n                            fileId: payload.file.id,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when the user \"clicks\" on a file using their keyboard.\n     * Using Space and Enter keys counts as clicking.\n     */\n    KeyboardClickFile: defineFileAction(\n        {\n            id: 'keyboard_click_file',\n            __payloadType: {} as KeyboardClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            reduxDispatch(\n                reduxActions.setLastClickIndex({\n                    index: payload.fileDisplayIndex,\n                    fileId: payload.file.id,\n                })\n            );\n            if (payload.enterKey) {\n                // We only dispatch the Open Files action here when the selection is\n                // empty. Otherwise, `Enter` key presses are handled by the\n                // hotkey manager for the Open Files action.\n                if (selectSelectionSize(getReduxState()) === 0) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else if (payload.spaceKey && FileHelper.isSelectable(payload.file)) {\n                reduxDispatch(\n                    reduxActions.toggleSelection({\n                        fileId: payload.file.id,\n                        exclusive: payload.ctrlKey,\n                    })\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user starts dragging some file.\n     */\n    StartDragNDrop: defineFileAction(\n        {\n            id: 'start_drag_n_drop',\n            __payloadType: {} as StartDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            const file = payload.draggedFile;\n            if (!getIsFileSelected(getReduxState(), file)) {\n                if (FileHelper.isSelectable(file)) {\n                    reduxDispatch(\n                        reduxActions.selectFiles({\n                            fileIds: [file.id],\n                            reset: true,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user either cancels the drag & drop interaction,\n     * or drops a file somewhere.\n     */\n    EndDragNDrop: defineFileAction(\n        {\n            id: 'end_drag_n_drop',\n            __payloadType: {} as EndDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (getIsFileSelected(getReduxState(), payload.destination)) {\n                // Can't drop a selection into itself\n                return;\n            }\n\n            const { draggedFile, selectedFiles } = payload as EndDragNDropPayload;\n            const droppedFiles = selectedFiles.length > 0 ? selectedFiles : [draggedFile];\n            reduxDispatch(\n                thunkRequestFileAction(ChonkyActions.MoveFiles, {\n                    ...payload,\n                    files: droppedFiles,\n                })\n            );\n        }\n    ),\n    /**\n     * Action that is dispatched when user moves files from one folder to another,\n     * usually by dragging & dropping some files into the folder.\n     */\n    MoveFiles: defineFileAction({\n        id: 'move_files',\n        __payloadType: {} as MoveFilesPayload,\n    } as const),\n    /**\n     * Action that is dispatched when the selection changes for any reason.\n     */\n    ChangeSelection: defineFileAction({\n        id: 'change_selection',\n        __payloadType: {} as ChangeSelectionPayload,\n    } as const),\n    /**\n     * Action that is dispatched when user wants to open some files. This action is\n     * often triggered by other actions.\n     */\n    OpenFiles: defineFileAction({\n        id: 'open_files',\n        __payloadType: {} as OpenFilesPayload,\n    } as const),\n    /**\n     * Action that is triggered when user wants to go up a directory.\n     */\n    OpenParentFolder: defineFileAction(\n        {\n            id: 'open_parent_folder',\n            hotkeys: ['backspace'],\n            button: {\n                name: 'Go up a directory',\n                toolbar: true,\n                contextMenu: false,\n                icon: ChonkyIconName.openParentFolder,\n                iconOnly: true,\n            },\n        } as const,\n        ({ reduxDispatch, getReduxState }) => {\n            const parentFolder = selectParentFolder(getReduxState());\n            if (FileHelper.isOpenable(parentFolder)) {\n                reduxDispatch(\n                    thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                        targetFile: parentFolder,\n                        files: [parentFolder],\n                    })\n                );\n            } else {\n                Logger.warn(\n                    'Open parent folder effect was triggered  even though the parent folder' +\n                        ' is not openable. This indicates a bug in presentation components.'\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user opens the context menu, either by right click\n     * on something or using the context menu button on their keyboard.\n     */\n    OpenFileContextMenu: defineFileAction(\n        {\n            id: 'open_file_context_menu',\n            __payloadType: {} as OpenFileContextMenuPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            // TODO: Check if the context menu component is actually enabled. There is a\n            //  chance it doesn't matter if it is enabled or not - if it is not mounted,\n            //  the action will simply have no effect. It also allows users to provide\n            //  their own components - however, users could also flip the \"context menu\n            //  component mounted\" switch...\n            const triggerFile = getFileData(getReduxState(), payload.triggerFileId);\n            if (triggerFile) {\n                const fileSelected = getIsFileSelected(getReduxState(), triggerFile);\n                if (!fileSelected) {\n                    // If file is selected, we leave the selection as is. If it is not\n                    // selected, it means user right clicked the file with no selection.\n                    // We simulate the Windows Explorer/Nautilus behaviour of moving\n                    // selection to this file.\n                    if (FileHelper.isSelectable(triggerFile)) {\n                        reduxDispatch(\n                            reduxActions.selectFiles({\n                                fileIds: [payload.triggerFileId],\n                                reset: true,\n                            })\n                        );\n                    } else {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                }\n            }\n\n            reduxDispatch(\n                reduxActions.showContextMenu({\n                    triggerFileId: payload.triggerFileId,\n                    mouseX: payload.clientX - 2,\n                    mouseY: payload.clientY - 4,\n                })\n            );\n        }\n    ),\n};\n","import { Nullable } from 'tsdef';\n\nimport { selectFocusSearchInput } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileSelectionTransform } from '../types/action.types';\nimport { FileViewMode } from '../types/file-view.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { EssentialActions } from './essential';\nimport { OptionIds } from './option-ids';\n\nexport const DefaultActions = {\n    /**\n     * Action that can be used to open currently selected files.\n     */\n    OpenSelection: defineFileAction(\n        {\n            id: 'open_selection',\n            hotkeys: ['enter'],\n            requiresSelection: true,\n            fileFilter: FileHelper.isOpenable,\n            button: {\n                name: 'Open selection',\n                toolbar: true,\n                contextMenu: true,\n                group: 'Actions',\n                icon: ChonkyIconName.openFiles,\n            },\n        } as const,\n        ({ state, reduxDispatch }) => {\n            reduxDispatch(\n                thunkRequestFileAction(EssentialActions.OpenFiles, {\n                    files: state.selectedFilesForAction!,\n                })\n            );\n            return undefined;\n        }\n    ),\n    /**\n     * Action that selects all files.\n     */\n    SelectAllFiles: defineFileAction({\n        id: 'select_all_files',\n        hotkeys: ['ctrl+a'],\n        button: {\n            name: 'Select all files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.selectAllFiles,\n        },\n        selectionTransform: (({ fileIds, hiddenFileIds }) => {\n            const newSelection = new Set<string>();\n            fileIds.map(fileId => {\n                // We don't need to check if file is selectable because Chonky does\n                // it own checks internally.\n                if (!hiddenFileIds.has(fileId)) newSelection.add(fileId);\n            });\n            return newSelection;\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that clear the file selection.\n     */\n    ClearSelection: defineFileAction({\n        id: 'clear_selection',\n        hotkeys: ['escape'],\n        button: {\n            name: 'Clear selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.clearSelection,\n        },\n        selectionTransform: (({ prevSelection }) => {\n            if (prevSelection.size === 0) return null;\n            return new Set<string>();\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that enables List view.\n     */\n    EnableListView: defineFileAction({\n        id: 'enable_list_view',\n        fileViewConfig: {\n            mode: FileViewMode.List,\n            entryHeight: 30,\n        },\n        button: {\n            name: 'Switch to List view',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Compact view. Note that compact view is still\n     * experimental and should not be used in production.\n     */\n    EnableCompactView: defineFileAction({\n        // TODO: Don't enable until compact view is fully supported\n        id: 'enable_compact_view',\n        fileViewConfig: {\n            mode: FileViewMode.Compact,\n            entryHeight: 40,\n            entryWidth: 220,\n        },\n        button: {\n            name: 'Switch to Compact view',\n            toolbar: true,\n            icon: ChonkyIconName.compact,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Grid view.\n     */\n    EnableGridView: defineFileAction({\n        id: 'enable_grid_view',\n        fileViewConfig: { mode: FileViewMode.Grid, entryWidth: 165, entryHeight: 130 },\n        button: {\n            name: 'Switch to Grid view',\n            toolbar: true,\n            icon: ChonkyIconName.smallThumbnail,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.name`.\n     */\n    SortFilesByName: defineFileAction({\n        id: 'sort_files_by_name',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.name.toLowerCase() : undefined),\n        button: {\n            name: 'Sort by name',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.size`.\n     */\n    SortFilesBySize: defineFileAction({\n        id: 'sort_files_by_size',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.size : undefined),\n        button: {\n            name: 'Sort by size',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.modDate`.\n     */\n    SortFilesByDate: defineFileAction({\n        id: 'sort_files_by_date',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.modDate : undefined),\n        button: {\n            name: 'Sort by date',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether hidden files are shown to the user or not.\n     */\n    ToggleHiddenFiles: defineFileAction({\n        id: 'toggle_hidden_files',\n        hotkeys: ['ctrl+h'],\n        option: {\n            id: OptionIds.ShowHiddenFiles,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show hidden files',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether folders should appear before files regardless of\n     * current sort function.\n     */\n    ToggleShowFoldersFirst: defineFileAction({\n        id: 'toggle_show_folders_first',\n        option: {\n            id: OptionIds.ShowFoldersFirst,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show folders first',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that focuses the search input when it is dispatched.\n     */\n    FocusSearchInput: defineFileAction(\n        {\n            id: 'focus_search_input',\n            hotkeys: ['ctrl+f'],\n        } as const,\n        ({ getReduxState }) => {\n            const focusSearchInput = selectFocusSearchInput(getReduxState());\n            if (focusSearchInput) focusSearchInput();\n        }\n    ),\n    /**\n     * Action that enables List view.\n     */\n    ToggleDarkMode: defineFileAction({\n        id: 'enable_dark_mode',\n        option: {\n            id: OptionIds.DarkMode,\n            defaultValue: false,\n        },\n        button: {\n            name: 'Enable dark mode',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n};\n","import { ChonkyIconName } from '../types/icons.types';\nimport { defineFileAction } from '../util/helpers';\n\nexport const ExtraActions = {\n    /**\n     * Action that adds a button and shortcut to copy files.\n     */\n    CopyFiles: defineFileAction({\n        id: 'copy_files',\n        requiresSelection: true,\n        hotkeys: ['ctrl+c'],\n        button: {\n            name: 'Copy selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.copy,\n        },\n    } as const),\n    /**\n     * Action that adds a button to create a new folder.\n     */\n    CreateFolder: defineFileAction({\n        id: 'create_folder',\n        button: {\n            name: 'Create folder',\n            toolbar: true,\n            tooltip: 'Create a folder',\n            icon: ChonkyIconName.folderCreate,\n        },\n    } as const),\n    /**\n     * Action that adds a button to upload files.\n     */\n    UploadFiles: defineFileAction({\n        id: 'upload_files',\n        button: {\n            name: 'Upload files',\n            toolbar: true,\n            tooltip: 'Upload files',\n            icon: ChonkyIconName.upload,\n        },\n    } as const),\n    /**\n     * Action that adds a button to download files.\n     */\n    DownloadFiles: defineFileAction({\n        id: 'download_files',\n        requiresSelection: true,\n        button: {\n            name: 'Download files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.download,\n        },\n    } as const),\n    /**\n     * Action that adds a button and shortcut to delete files.\n     */\n    DeleteFiles: defineFileAction({\n        id: 'delete_files',\n        requiresSelection: true,\n        hotkeys: ['delete'],\n        button: {\n            name: 'Delete files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.trash,\n        },\n    } as const),\n};\n","import { DefaultActions } from './default';\nimport { EssentialActions } from './essential';\nimport { ExtraActions } from './extra';\n\nexport { OptionIds } from './option-ids';\n\nexport const ChonkyActions = {\n    ...EssentialActions,\n    ...DefaultActions,\n    ...ExtraActions,\n};\n\nexport const EssentialFileActions = [\n    ChonkyActions.MouseClickFile,\n    ChonkyActions.KeyboardClickFile,\n    ChonkyActions.StartDragNDrop,\n    ChonkyActions.EndDragNDrop,\n    ChonkyActions.MoveFiles,\n    ChonkyActions.ChangeSelection,\n    ChonkyActions.OpenFiles,\n    ChonkyActions.OpenParentFolder,\n    ChonkyActions.OpenFileContextMenu,\n];\n\nexport const DefaultFileActions = [\n    ChonkyActions.OpenSelection,\n    ChonkyActions.SelectAllFiles,\n    ChonkyActions.ClearSelection,\n    ChonkyActions.EnableListView,\n    // TODO: Don't enable until compact view is fully supported\n    // ChonkyActions.EnableCompactView,\n    ChonkyActions.EnableGridView,\n    ChonkyActions.SortFilesByName,\n    ChonkyActions.SortFilesBySize,\n    ChonkyActions.SortFilesByDate,\n    ChonkyActions.ToggleHiddenFiles,\n    ChonkyActions.ToggleShowFoldersFirst,\n    ChonkyActions.FocusSearchInput,\n];\n","import { ChonkyActions } from '../action-definitions/index';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\n\nexport const initialRootState: RootState = {\n    instanceId: 'CHONKY_INVALID_ID', // should be overwritten by preloaded state\n\n    externalFileActionHandler: null,\n\n    rawFileActions: [],\n    fileActionsErrorMessages: [],\n    fileActionMap: {},\n    fileActionIds: [],\n    toolbarItems: [],\n    contextMenuItems: [],\n\n    rawFolderChain: null,\n    folderChainErrorMessages: [],\n    folderChain: [],\n\n    rawFiles: [],\n    filesErrorMessages: [],\n    fileMap: {},\n    fileIds: [],\n    cleanFileIds: [],\n\n    sortedFileIds: [],\n    hiddenFileIdMap: {},\n\n    focusSearchInput: null,\n    searchString: '',\n    searchMode: 'currentFolder',\n\n    selectionMap: {},\n    disableSelection: false,\n\n    fileViewConfig: ChonkyActions.EnableGridView.fileViewConfig,\n\n    sortActionId: null,\n    sortOrder: SortOrder.ASC,\n\n    optionMap: {},\n\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableDragAndDrop: false,\n    clearSelectionOnOutsideClick: true,\n\n    lastClick: null,\n\n    contextMenuMounted: false,\n    contextMenuConfig: null,\n};\n","import { Nilable, Nullable } from 'tsdef';\n\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nimport { GenericFileActionHandler } from '../types/action-handler.types';\nimport { FileActionMenuItem } from '../types/action-menus.types';\nimport { FileAction, FileActionMap } from '../types/action.types';\nimport { ContextMenuConfig } from '../types/context-menu.types';\nimport { FileViewConfig } from '../types/file-view.types';\nimport { FileArray, FileIdTrueMap, FileMap } from '../types/file.types';\nimport { OptionMap } from '../types/options.types';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\nimport { ThumbnailGenerator } from '../types/thumbnails.types';\nimport { FileHelper } from '../util/file-helper';\nimport { sanitizeInputArray } from './files-transforms';\nimport { initialRootState } from './state';\n\nconst reducers = {\n    setExternalFileActionHandler(\n        state: RootState,\n        action: PayloadAction<Nilable<GenericFileActionHandler<FileAction>>>\n    ) {\n        state.externalFileActionHandler = action.payload ?? null;\n    },\n    setRawFileActions(state: RootState, action: PayloadAction<FileAction[] | any>) {\n        state.rawFileActions = action.payload;\n    },\n    setFileActionsErrorMessages(state: RootState, action: PayloadAction<string[]>) {\n        state.fileActionsErrorMessages = action.payload;\n    },\n    setFileActions(state: RootState, action: PayloadAction<FileAction[]>) {\n        const fileActionMap: FileActionMap = {};\n        action.payload.map(a => (fileActionMap[a.id] = a));\n        const fileIds = action.payload.map(a => a.id);\n\n        state.fileActionMap = fileActionMap as FileMap;\n        state.fileActionIds = fileIds;\n    },\n    updateFileActionMenuItems(state: RootState, action: PayloadAction<[FileActionMenuItem[], FileActionMenuItem[]]>) {\n        [state.toolbarItems, state.contextMenuItems] = action.payload;\n    },\n    setRawFolderChain(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFolderChain = action.payload;\n        const { sanitizedArray: folderChain, errorMessages } = sanitizeInputArray('folderChain', rawFolderChain);\n        state.rawFolderChain = rawFolderChain;\n        state.folderChain = folderChain;\n        state.folderChainErrorMessages = errorMessages;\n    },\n    setRawFiles(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFiles = action.payload;\n        const { sanitizedArray: files, errorMessages } = sanitizeInputArray('files', rawFiles);\n        state.rawFiles = rawFiles;\n        state.filesErrorMessages = errorMessages;\n\n        const fileMap: FileMap = {};\n        files.forEach(f => {\n            if (f) fileMap[f.id] = f;\n        });\n        const fileIds = files.map(f => (f ? f.id : null));\n        const cleanFileIds = fileIds.filter(f => !!f) as string[];\n\n        state.fileMap = fileMap;\n        state.fileIds = fileIds;\n        state.cleanFileIds = cleanFileIds;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (!fileMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setSortedFileIds(state: RootState, action: PayloadAction<Nullable<string>[]>) {\n        state.sortedFileIds = action.payload;\n    },\n    setHiddenFileIds(state: RootState, action: PayloadAction<FileIdTrueMap>) {\n        state.hiddenFileIdMap = action.payload;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (state.hiddenFileIdMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setFocusSearchInput(state: RootState, action: PayloadAction<Nullable<() => void>>) {\n        state.focusSearchInput = action.payload;\n    },\n    setSearchString(state: RootState, action: PayloadAction<string>) {\n        state.searchString = action.payload;\n    },\n    selectAllFiles(state: RootState) {\n        state.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (id ? (state.selectionMap[id] = true) : null));\n    },\n    selectFiles(state: RootState, action: PayloadAction<{ fileIds: string[]; reset: boolean }>) {\n        if (state.disableSelection) return;\n        if (action.payload.reset) state.selectionMap = {};\n        action.payload.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (state.selectionMap[id] = true));\n    },\n    toggleSelection(state: RootState, action: PayloadAction<{ fileId: string; exclusive: boolean }>) {\n        if (state.disableSelection) return;\n        const oldValue = !!state.selectionMap[action.payload.fileId];\n        if (action.payload.exclusive) state.selectionMap = {};\n        if (oldValue) delete state.selectionMap[action.payload.fileId];\n        else if (FileHelper.isSelectable(state.fileMap[action.payload.fileId])) {\n            state.selectionMap[action.payload.fileId] = true;\n        }\n    },\n    clearSelection(state: RootState) {\n        if (state.disableSelection) return;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setSelectionDisabled(state: RootState, action: PayloadAction<boolean>) {\n        state.disableSelection = action.payload;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setFileViewConfig(state: RootState, action: PayloadAction<FileViewConfig>) {\n        state.fileViewConfig = action.payload;\n    },\n    setSort(state: RootState, action: PayloadAction<{ actionId: string; order: SortOrder }>) {\n        state.sortActionId = action.payload.actionId;\n        state.sortOrder = action.payload.order;\n    },\n    setOptionDefaults(state: RootState, action: PayloadAction<OptionMap>) {\n        for (const optionId of Object.keys(action.payload)) {\n            if (optionId in state.optionMap) continue;\n            state.optionMap[optionId] = action.payload[optionId];\n        }\n    },\n    toggleOption(state: RootState, action: PayloadAction<string>) {\n        state.optionMap[action.payload] = !state.optionMap[action.payload];\n    },\n    setThumbnailGenerator(state: RootState, action: PayloadAction<Nullable<ThumbnailGenerator>>) {\n        state.thumbnailGenerator = action.payload;\n    },\n    setDoubleClickDelay(state: RootState, action: PayloadAction<number>) {\n        state.doubleClickDelay = action.payload;\n    },\n    setDisableDragAndDrop(state: RootState, action: PayloadAction<boolean>) {\n        state.disableDragAndDrop = action.payload;\n    },\n    setClearSelectionOnOutsideClick(state: RootState, action: PayloadAction<boolean>) {\n        state.clearSelectionOnOutsideClick = action.payload;\n    },\n    setLastClickIndex(state: RootState, action: PayloadAction<Nullable<{ index: number; fileId: string }>>) {\n        state.lastClick = action.payload;\n    },\n    setContextMenuMounted(state: RootState, action: PayloadAction<boolean>) {\n        state.contextMenuMounted = action.payload;\n    },\n    showContextMenu(state: RootState, action: PayloadAction<ContextMenuConfig>) {\n        state.contextMenuConfig = action.payload;\n    },\n    hideContextMenu(state: RootState) {\n        if (!state.contextMenuConfig) return;\n        state.contextMenuConfig = null;\n    },\n};\n\nexport const { actions: reduxActions, reducer: rootReducer } = createSlice({\n    name: 'root',\n    initialState: initialRootState,\n    reducers,\n});\n","import { useEffect } from 'react';\nimport watch from 'redux-watch';\n\nimport { Store } from '@reduxjs/toolkit';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { RootState } from '../types/redux.types';\nimport { FileSelection } from '../types/selection.types';\nimport { selectSelectedFileIds, selectSelectionMap } from './selectors';\nimport { thunkRequestFileAction } from './thunks/dispatchers.thunks';\n\nexport const useStoreWatchers = (store: Store<RootState>) => {\n    useEffect(() => {\n        const selectionWatcher = watch(() => selectSelectionMap(store.getState()));\n        const onSelectionChange = (\n            newSelection: FileSelection,\n            oldSelection: FileSelection\n        ) => {\n            // We don't check for deep equality here as we expect the\n            // reducers to prevent all unnecessary updates.\n            if (newSelection === oldSelection) return;\n\n            // Notify users the selection has changed.\n            const selectedFilesIds = selectSelectedFileIds(store.getState());\n            const selection = new Set<string>(selectedFilesIds);\n            store.dispatch(\n                thunkRequestFileAction(ChonkyActions.ChangeSelection, {\n                    selection,\n                }) as any\n            );\n        };\n\n        const unsubscribeCallbacks = [\n            store.subscribe(selectionWatcher(onSelectionChange)),\n        ];\n        return () => {\n            for (const unsubscribe of unsubscribeCallbacks) unsubscribe();\n        };\n    }, [store]);\n};\n","import { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { configureStore } from '@reduxjs/toolkit';\n\nimport { RootState } from '../types/redux.types';\nimport { useStaticValue } from '../util/hooks-helpers';\nimport { rootReducer } from './reducers';\nimport { initialRootState } from './state';\nimport { useStoreWatchers } from './watchers';\n\nexport const useChonkyStore = (chonkyInstanceId: string) => {\n    const store = useStaticValue(() => {\n        const preloadedState: RootState = {\n            ...initialRootState,\n            instanceId: chonkyInstanceId,\n        };\n\n        return configureStore({\n            preloadedState: preloadedState as any,\n            reducer: rootReducer,\n            middleware: getDefaultMiddleware =>\n                getDefaultMiddleware({\n                    serializableCheck: false,\n                }),\n            devTools: { name: `chonky_${chonkyInstanceId}` },\n        });\n    });\n    useStoreWatchers(store);\n    return store;\n};\n\n/**\n * Hook that can be used with parametrized selectors.\n */\nexport const useParamSelector = <Args extends Array<any>, Value>(\n    parametrizedSelector: (...args: Args) => (state: RootState) => Value,\n    ...selectorParams: Args\n) => {\n    const selector = useCallback(\n        (state: RootState) => parametrizedSelector(...selectorParams)(state),\n        // eslint-disable-next-line\n        [parametrizedSelector, ...selectorParams]\n    );\n    return useSelector(selector);\n};\n\n/**\n * DTE - DispatchThunkEffect. This method is used to decrease code duplication in\n * main Chonky method.\n */\nexport const useDTE = <Args extends Array<any>>(actionCreator: (...args: Args) => any, ...selectorParams: Args) => {\n    const dispatch = useDispatch();\n    useEffect(\n        () => {\n            dispatch(actionCreator(...selectorParams));\n        },\n        // eslint-disable-next-line\n        [dispatch, actionCreator, ...selectorParams]\n    );\n};\n\nexport const usePropReduxUpdate = <Payload extends any>(actionCreator: (payload: Payload) => any, payload: Payload) => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(actionCreator(payload));\n    }, [dispatch, actionCreator, payload]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { ChonkyIconProps } from '../../types/icons.types';\n\nexport const ChonkyIconPlaceholder: React.FC<ChonkyIconProps> = () => {\n    // This component should not be rendered unless the user has misconfigured Chonky\n    const title =\n        'No icon component found. Please follow Chonky installation instructions to ' +\n        'provide a pre-made icon component (or a custom icon).';\n    return <span title={title}></span>;\n};\n","import { ChonkyActions } from '../action-definitions/index';\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileBrowserProps } from '../types/file-browser.types';\n\nexport type ChonkyConfig = Pick<\n    FileBrowserProps,\n    | 'fileActions'\n    | 'onFileAction'\n    | 'thumbnailGenerator'\n    | 'doubleClickDelay'\n    | 'disableSelection'\n    | 'disableDefaultFileActions'\n    | 'disableDragAndDrop'\n    | 'disableDragAndDropProvider'\n    | 'defaultSortActionId'\n    | 'defaultFileViewActionId'\n    | 'clearSelectionOnOutsideClick'\n    | 'iconComponent'\n    | 'darkMode'\n    | 'i18n'\n>;\n\nexport const defaultConfig: ChonkyConfig = {\n    fileActions: null,\n    onFileAction: null,\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableSelection: false,\n    disableDefaultFileActions: false,\n    disableDragAndDrop: false,\n    disableDragAndDropProvider: false,\n    defaultSortActionId: ChonkyActions.SortFilesByName.id,\n    defaultFileViewActionId: ChonkyActions.EnableGridView.id,\n    clearSelectionOnOutsideClick: true,\n    iconComponent: ChonkyIconPlaceholder,\n    darkMode: false,\n    i18n: {},\n};\n\nexport const setChonkyDefaults = (config: Partial<ChonkyConfig>) => {\n    for (const key of Object.keys(defaultConfig)) {\n        if (key in config) {\n            defaultConfig[key as keyof ChonkyConfig] = config[\n                key as keyof ChonkyConfig\n            ] as any;\n        }\n    }\n};\n","import filesize from 'filesize';\nimport { createContext, useContext, useMemo } from 'react';\nimport { IntlShape, useIntl } from 'react-intl';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyFormatters } from '../types/i18n.types';\nimport { FileHelper } from './file-helper';\n\nexport enum I18nNamespace {\n    Toolbar = 'toolbar',\n    FileList = 'fileList',\n    FileEntry = 'fileEntry',\n    FileContextMenu = 'contextMenu',\n\n    FileActions = 'actions',\n    FileActionGroups = 'actionGroups',\n}\n\nexport const getI18nId = (namespace: I18nNamespace, stringId: string): string =>\n    `chonky.${namespace}.${stringId}`;\n\nexport const getActionI18nId = (actionId: string, stringId: string): string =>\n    `chonky.${I18nNamespace.FileActions}.${actionId}.${stringId}`;\n\nexport const useLocalizedFileActionGroup = (groupName: string) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        return intl.formatMessage({\n            id: getI18nId(I18nNamespace.FileActionGroups, groupName),\n            defaultMessage: groupName,\n        });\n    }, [groupName, intl]);\n};\n\nexport const useLocalizedFileActionStrings = (action: Nullable<FileAction>) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        if (!action) {\n            return {\n                buttonName: '',\n                buttonTooltip: undefined,\n            };\n        }\n\n        const buttonName = intl.formatMessage({\n            id: getActionI18nId(action.id, 'button.name'),\n            defaultMessage: action.button?.name,\n        });\n\n        let buttonTooltip: Undefinable<string> = undefined;\n        if (action.button?.tooltip) {\n            // We only translate the tooltip if the original action has a tooltip.\n            buttonTooltip = intl.formatMessage({\n                id: getActionI18nId(action.id, 'button.tooltip'),\n                defaultMessage: action.button?.tooltip,\n            });\n        }\n\n        return {\n            buttonName,\n            buttonTooltip,\n        };\n    }, [action, intl]);\n};\n\nexport const useLocalizedFileEntryStrings = (file: Nullable<FileData>) => {\n    const intl = useIntl();\n    const formatters = useContext(ChonkyFormattersContext);\n    return useMemo(() => {\n        return {\n            fileModDateString: formatters.formatFileModDate(intl, file),\n            fileSizeString: formatters.formatFileSize(intl, file),\n        };\n    }, [file, formatters, intl]);\n};\n\nexport const defaultFormatters: ChonkyFormatters = {\n    formatFileModDate: (\n        intl: IntlShape,\n        file: Nullable<FileData>\n    ): Nullable<string> => {\n        const safeModDate = FileHelper.getModDate(file);\n        if (safeModDate) {\n            return intl.formatDate(safeModDate, {\n                dateStyle: 'medium',\n                timeStyle: 'short',\n            });\n        } else {\n            return null;\n        }\n    },\n    formatFileSize: (_intl: IntlShape, file: Nullable<FileData>): Nullable<string> => {\n        if (!file || typeof file.size !== 'number') return null;\n\n        const size = file.size;\n        const sizeData = filesize(size, { bits: false, output: 'object' }) as any;\n        if (sizeData.symbol === 'B') {\n            return `${Math.round(sizeData.value / 10) / 100.0} KB`;\n        } else if (sizeData.symbol === 'KB') {\n            return `${Math.round(sizeData.value)} ${sizeData.symbol}`;\n        }\n        return `${sizeData.value} ${sizeData.symbol}`;\n    },\n};\n\nexport const ChonkyFormattersContext = createContext(defaultFormatters);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2019\n * @license MIT\n */\n\nimport { createContext, ElementType, useMemo } from 'react';\n\nimport ExactTrie from 'exact-trie';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName, ChonkyIconProps, FileIconData } from '../types/icons.types';\n\nexport const ChonkyIconContext = createContext<ElementType<ChonkyIconProps>>(ChonkyIconPlaceholder);\n\nexport const VideoExtensions: string[] = [\n    '3g2',\n    '3gp',\n    '3gpp',\n    'asf',\n    'asx',\n    'avi',\n    'dvb',\n    'f4v',\n    'fli',\n    'flv',\n    'fvt',\n    'h261',\n    'h263',\n    'h264',\n    'jpgm',\n    'jpgv',\n    'jpm',\n    'm1v',\n    'm2v',\n    'm4u',\n    'm4v',\n    'mj2',\n    'mjp2',\n    'mk3d',\n    'mks',\n    'mkv',\n    'mng',\n    'mov',\n    'movie',\n    'mp4',\n    'mp4v',\n    'mpe',\n    'mpeg',\n    'mpg',\n    'mpg4',\n    'mxu',\n    'ogv',\n    'pyv',\n    'qt',\n    'smv',\n    'ts',\n    'uvh',\n    'uvm',\n    'uvp',\n    'uvs',\n    'uvu',\n    'uvv',\n    'uvvh',\n    'uvvm',\n    'uvvp',\n    'uvvs',\n    'uvvu',\n    'uvvv',\n    'viv',\n    'vob',\n    'webm',\n    'wm',\n    'wmv',\n    'wmx',\n    'wvx',\n];\nexport const ImageExtensions: string[] = [\n    '3ds',\n    'apng',\n    'azv',\n    'bmp',\n    'bmp',\n    'btif',\n    'cgm',\n    'cmx',\n    'djv',\n    'djvu',\n    'drle',\n    'dwg',\n    'dxf',\n    'emf',\n    'exr',\n    'fbs',\n    'fh',\n    'fh4',\n    'fh5',\n    'fh7',\n    'fhc',\n    'fits',\n    'fpx',\n    'fst',\n    'g3',\n    'gif',\n    'heic',\n    'heics',\n    'heif',\n    'heifs',\n    'ico',\n    'ico',\n    'ief',\n    'jls',\n    'jng',\n    'jp2',\n    'jpe',\n    'jpeg',\n    'jpf',\n    'jpg',\n    'jpg2',\n    'jpm',\n    'jpx',\n    'jxr',\n    'ktx',\n    'mdi',\n    'mmr',\n    'npx',\n    'pbm',\n    'pct',\n    'pcx',\n    'pcx',\n    'pgm',\n    'pic',\n    'png',\n    'pnm',\n    'ppm',\n    'psd',\n    'pti',\n    'ras',\n    'rgb',\n    'rlc',\n    'sgi',\n    'sid',\n    'sub',\n    'svg',\n    'svgz',\n    't38',\n    'tap',\n    'tfx',\n    'tga',\n    'tif',\n    'tiff',\n    'uvg',\n    'uvi',\n    'uvvg',\n    'uvvi',\n    'vtf',\n    'wbmp',\n    'wdp',\n    'webp',\n    'wmf',\n    'xbm',\n    'xif',\n    'xpm',\n    'xwd',\n];\nexport const AudioExtensions: string[] = [\n    '3gpp',\n    'aac',\n    'adp',\n    'aif',\n    'aifc',\n    'aiff',\n    'au',\n    'caf',\n    'dra',\n    'dts',\n    'dtshd',\n    'ecelp4800',\n    'ecelp7470',\n    'ecelp9600',\n    'eol',\n    'flac',\n    'kar',\n    'lvp',\n    'm2a',\n    'm3a',\n    'm3u',\n    'm4a',\n    'm4a',\n    'mid',\n    'midi',\n    'mka',\n    'mp2',\n    'mp2a',\n    'mp3',\n    'mp3',\n    'mp4a',\n    'mpga',\n    'oga',\n    'ogg',\n    'pya',\n    'ra',\n    'ra',\n    'ram',\n    'rip',\n    'rmi',\n    'rmp',\n    's3m',\n    'sil',\n    'snd',\n    'spx',\n    'uva',\n    'uvva',\n    'wav',\n    'wav',\n    'wav',\n    'wax',\n    'weba',\n    'wma',\n    'xm',\n];\nexport const ColorsLight: string[] = [\n    '#bbbbbb',\n    '#d65c5c',\n    '#d6665c',\n    '#d6705c',\n    '#d67a5c',\n    '#d6855c',\n    '#d68f5c',\n    '#d6995c',\n    '#d6a35c',\n    '#d6ad5c',\n    '#d6b85c',\n    '#d6c25c',\n    '#d6cc5c',\n    '#d6d65c',\n    '#ccd65c',\n    '#c2d65c',\n    '#b8d65c',\n    '#add65c',\n    '#a3d65c',\n    '#99d65c',\n    '#8fd65c',\n    '#85d65c',\n    '#7ad65c',\n    '#70d65c',\n    '#66d65c',\n    '#5cd65c',\n    '#5cd666',\n    '#5cd670',\n    '#5cd67a',\n    '#5cd685',\n    '#5cd68f',\n    '#5cd699',\n    '#5cd6a3',\n    '#5cd6ad',\n    '#5cd6b8',\n    '#5cd6c2',\n    '#5cd6cc',\n    '#5cd6d6',\n    '#5cccd6',\n    '#5cc2d6',\n    '#5cb8d6',\n    '#5cadd6',\n    '#5ca3d6',\n    '#5c99d6',\n    '#5c8fd6',\n    '#5c85d6',\n    '#5c7ad6',\n    '#5c70d6',\n    '#5c66d6',\n    '#5c5cd6',\n    '#665cd6',\n    '#705cd6',\n    '#7a5cd6',\n    '#855cd6',\n    '#8f5cd6',\n    '#995cd6',\n    '#a35cd6',\n    '#ad5cd6',\n    '#b85cd6',\n    '#c25cd6',\n    '#cc5cd6',\n    '#d65cd6',\n    '#d65ccc',\n    '#d65cc2',\n    '#d65cb8',\n    '#d65cad',\n    '#d65ca3',\n    '#d65c99',\n    '#d65c8f',\n    '#d65c85',\n    '#d65c7a',\n    '#d65c70',\n    '#d65c66',\n];\nexport const ColorsDark: string[] = [\n    '#777',\n    '#8f3d3d',\n    '#8f443d',\n    '#8f4b3d',\n    '#8f523d',\n    '#8f583d',\n    '#8f5f3d',\n    '#8f663d',\n    '#8f6d3d',\n    '#8f743d',\n    '#8f7a3d',\n    '#8f813d',\n    '#8f883d',\n    '#8f8f3d',\n    '#888f3d',\n    '#818f3d',\n    '#7a8f3d',\n    '#748f3d',\n    '#6d8f3d',\n    '#668f3d',\n    '#5f8f3d',\n    '#588f3d',\n    '#528f3d',\n    '#4b8f3d',\n    '#448f3d',\n    '#3d8f3d',\n    '#3d8f44',\n    '#3d8f4b',\n    '#3d8f52',\n    '#3d8f58',\n    '#3d8f5f',\n    '#3d8f66',\n    '#3d8f6d',\n    '#3d8f74',\n    '#3d8f7a',\n    '#3d8f81',\n    '#3d8f88',\n    '#3d8f8f',\n    '#3d888f',\n    '#3d818f',\n    '#3d7a8f',\n    '#3d748f',\n    '#3d6d8f',\n    '#3d668f',\n    '#3d5f8f',\n    '#3d588f',\n    '#3d528f',\n    '#3d4b8f',\n    '#3d448f',\n    '#3d3d8f',\n    '#443d8f',\n    '#4b3d8f',\n    '#523d8f',\n    '#583d8f',\n    '#5f3d8f',\n    '#663d8f',\n    '#6d3d8f',\n    '#743d8f',\n    '#7a3d8f',\n    '#813d8f',\n    '#883d8f',\n    '#8f3d8f',\n    '#8f3d88',\n    '#8f3d81',\n    '#8f3d7a',\n    '#8f3d74',\n    '#8f3d6d',\n    '#8f3d66',\n    '#8f3d5f',\n    '#8f3d58',\n    '#8f3d52',\n    '#8f3d4b',\n    '#8f3d44',\n];\n\nconst getIconTrie = () => {\n    let colourIndex = 0;\n    const step = 5;\n\n    const IconsToExtensions = [\n        // Generic file types\n        [ChonkyIconName.license, ['license']],\n        [ChonkyIconName.config, ['sfk', 'ini', 'yml', 'toml', 'iml']],\n        [ChonkyIconName.model, ['3ds', 'obj', 'ply', 'fbx']],\n        [ChonkyIconName.database, ['csv', 'json', 'sql', 'sqlite', 'sqlite3', 'npy', 'npz', 'rec', 'idx', 'hdf5']],\n        [ChonkyIconName.text, ['txt', 'md', 'mdx']],\n        [ChonkyIconName.archive, ['zip', 'rar', 'tar', 'tar.gz', '7z']],\n        [ChonkyIconName.image, ImageExtensions],\n        [ChonkyIconName.video, VideoExtensions],\n        [ChonkyIconName.code, ['html', 'php', 'css', 'sass', 'scss', 'less', 'cpp', 'h', 'hpp', 'c', 'xml']],\n        [ChonkyIconName.info, ['bib', 'readme', 'nfo']],\n        [ChonkyIconName.key, ['pem', 'pub']],\n        [ChonkyIconName.lock, ['lock', 'lock.json', 'shrinkwrap.json']],\n        [ChonkyIconName.music, AudioExtensions],\n        [ChonkyIconName.terminal, ['run', 'sh']],\n        [ChonkyIconName.trash, ['.Trashes']],\n        [ChonkyIconName.users, ['authors', 'contributors']],\n\n        // OS file types\n        [ChonkyIconName.linux, ['AppImage']],\n        [ChonkyIconName.ubuntu, ['deb']],\n        [ChonkyIconName.windows, ['exe']],\n\n        // Programming language file types\n        [ChonkyIconName.rust, ['rs', 'rlib']],\n        [ChonkyIconName.python, ['py', 'ipynb']],\n        [ChonkyIconName.nodejs, ['js', 'jsx', 'ts', 'tsx', 'd.ts']],\n        [ChonkyIconName.php, ['php']],\n\n        // Development tools file types\n        [ChonkyIconName.git, ['.gitignore']],\n\n        // Brands file types\n        [ChonkyIconName.adobe, ['psd']],\n\n        // Other program file types\n        [ChonkyIconName.pdf, ['pdf']],\n        [ChonkyIconName.excel, ['xls', 'xlsx']],\n        [ChonkyIconName.word, ['doc', 'docx', 'odt']],\n        [ChonkyIconName.flash, ['swf']],\n    ] as const;\n\n    const exactTrie = new ExactTrie({ ignoreCase: true });\n    for (const pair of IconsToExtensions) {\n        const [icon, extensions] = pair;\n\n        for (let i = 0; i < extensions.length; ++i) {\n            colourIndex += step;\n            const colorCode = (colourIndex % (ColorsLight.length - 1)) + 1;\n            const iconData: FileIconData = {\n                icon,\n                colorCode,\n            };\n            exactTrie.put(extensions[i], iconData, true);\n        }\n    }\n\n    return exactTrie;\n};\n\nconst iconTrie = getIconTrie();\n\nexport const useIconData = (file: Nullable<FileData>): FileIconData => {\n    return useMemo(() => {\n        if (!file) return { icon: ChonkyIconName.loading, colorCode: 0 };\n        if (file.isDir === true) return { icon: ChonkyIconName.folder, colorCode: 0 };\n\n        const match = iconTrie.getWithCheckpoints(file.name, '.', true);\n        return match ? match : { icon: ChonkyIconName.file, colorCode: 32 };\n    }, [file]);\n};\n","import { Theme as MuiTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\nimport { createUseStyles } from 'react-jss';\nimport { DeepPartial } from 'tsdef';\n\nexport const lightTheme = {\n    colors: {\n        debugRed: '#fabdbd',\n        debugBlue: '#bdd8fa',\n        debugGreen: '#d2fabd',\n        debugPurple: '#d2bdfa',\n        debugYellow: '#fae9bd',\n\n        textActive: '#09f',\n    },\n\n    fontSizes: {\n        rootPrimary: 15,\n    },\n\n    margins: {\n        rootLayoutMargin: 8,\n    },\n\n    toolbar: {\n        size: 30,\n        lineHeight: '30px', // `px` suffix is required for `line-height` fields to work\n        fontSize: 15,\n        buttonRadius: 4,\n    },\n\n    dnd: {\n        canDropColor: 'green',\n        cannotDropColor: 'red',\n        canDropMask: 'rgba(180, 235, 180, 0.75)',\n        cannotDropMask: 'rgba(235, 180, 180, 0.75)',\n        fileListCanDropMaskOne: 'rgba(180, 235, 180, 0.1)',\n        fileListCanDropMaskTwo: 'rgba(180, 235, 180, 0.2)',\n        fileListCannotDropMaskOne: 'rgba(235, 180, 180, 0.1)',\n        fileListCannotDropMaskTwo: 'rgba(235, 180, 180, 0.2)',\n    },\n\n    dragLayer: {\n        border: 'solid 2px #09f',\n        padding: '7px 10px',\n        borderRadius: 2,\n    },\n\n    fileList: {\n        desktopGridGutter: 8,\n        mobileGridGutter: 5,\n    },\n\n    gridFileEntry: {\n        childrenCountSize: '1.6em',\n        iconColorFocused: '#000',\n        iconSize: '2.4em',\n        iconColor: '#fff',\n        borderRadius: 5,\n        fontSize: 14,\n\n        fileColorTint: 'rgba(255, 255, 255, 0.4)',\n        folderBackColorTint: 'rgba(255, 255, 255, 0.1)',\n        folderFrontColorTint: 'rgba(255, 255, 255, 0.4)',\n    },\n\n    listFileEntry: {\n        propertyFontSize: 14,\n        iconFontSize: '1.1em',\n        iconBorderRadius: 5,\n        fontSize: 14,\n    },\n};\n\nexport type ChonkyTheme = typeof lightTheme;\n\nexport const darkThemeOverride: DeepPartial<ChonkyTheme> = {\n    gridFileEntry: {\n        fileColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderBackColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderFrontColorTint: 'rgba(50, 50, 50, 0.15)',\n    },\n};\n\nexport const mobileThemeOverride: DeepPartial<ChonkyTheme> = {\n    fontSizes: {\n        rootPrimary: 13,\n    },\n    margins: {\n        rootLayoutMargin: 4,\n    },\n    toolbar: {\n        size: 28,\n        lineHeight: '28px',\n        fontSize: 13,\n    },\n    gridFileEntry: {\n        fontSize: 13,\n    },\n    listFileEntry: {\n        propertyFontSize: 12,\n        iconFontSize: '1em',\n        fontSize: 13,\n    },\n};\n\nexport const useIsMobileBreakpoint = () => {\n    return useMediaQuery('(max-width:480px)');\n};\n\nexport const getStripeGradient = (colorOne: string, colorTwo: string) =>\n    'repeating-linear-gradient(' +\n    '45deg,' +\n    `${colorOne},` +\n    `${colorOne} 10px,` +\n    `${colorTwo} 0,` +\n    `${colorTwo} 20px` +\n    ')';\n\nexport const makeLocalChonkyStyles = <C extends string = string>(\n    styles: (theme: ChonkyTheme & MuiTheme) => any\n    // @ts-ignore\n): any => createUseStyles<ChonkyTheme, C>(styles);\n\nexport const makeGlobalChonkyStyles = <C extends string = string>(\n    makeStyles: (theme: ChonkyTheme & MuiTheme) => any\n) => {\n    const selectorMapping = {};\n    const makeGlobalStyles = (theme: ChonkyTheme) => {\n        const localStyles = makeStyles(theme as any);\n        const globalStyles = {};\n        const localSelectors = Object.keys(localStyles);\n        localSelectors.map(localSelector => {\n            const globalSelector = `chonky-${localSelector}`;\n            const jssSelector = `@global .${globalSelector}`;\n            // @ts-ignore\n            globalStyles[jssSelector] = localStyles[localSelector];\n            // @ts-ignore\n            selectorMapping[localSelector] = globalSelector;\n        });\n        return globalStyles;\n    };\n\n    // @ts-ignore\n    const useStyles = createUseStyles<ChonkyTheme, C>(makeGlobalStyles as any);\n    return (...args: any[]): any => {\n        const styles = useStyles(...args);\n        const classes = {};\n        Object.keys(selectorMapping).map(localSelector => {\n            // @ts-ignore\n            classes[localSelector] = selectorMapping[localSelector];\n        });\n        return { ...classes, ...styles };\n    };\n};\n\nexport const important = <T>(value: T) => [value, '!important'];\n\nexport const c = classnames;\n","import React, { useImperativeHandle } from 'react';\nimport { useDispatch, useStore } from 'react-redux';\n\nimport { reduxActions } from '../redux/reducers';\nimport { selectSelectionMap } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileAction } from '../types/action.types';\nimport { FileBrowserHandle } from '../types/file-browser.types';\nimport { RootState } from '../types/redux.types';\n\nexport const useFileBrowserHandle = (ref: React.Ref<FileBrowserHandle>) => {\n    const store = useStore<RootState>();\n    const dispatch = useDispatch();\n\n    useImperativeHandle(\n        ref,\n        () => ({\n            getFileSelection(): Set<string> {\n                const selectionMap = selectSelectionMap(store.getState());\n                const selectionSet = new Set(Object.keys(selectionMap));\n                return selectionSet;\n            },\n            setFileSelection(selection, reset = true): void {\n                const fileIds = Array.from(selection);\n                dispatch(reduxActions.selectFiles({ fileIds, reset }));\n            },\n            requestFileAction<Action extends FileAction>(\n                action: Action,\n                payload: Action['__payloadType']\n            ): Promise<void> {\n                return Promise.resolve(\n                    dispatch(thunkRequestFileAction(action, payload))\n                ).then();\n            },\n        }),\n        [store, dispatch]\n    );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { initialRootState } from '../../redux/state';\nimport { useDTE, usePropReduxUpdate } from '../../redux/store';\nimport {\n    thunkActivateSortAction, thunkUpdateDefaultFileViewActionId, thunkUpdateRawFileActions\n} from '../../redux/thunks/file-actions.thunks';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { useFileBrowserHandle } from '../../util/file-browser-handle';\nimport { getValueOrFallback } from '../../util/helpers';\n\nexport const ChonkyBusinessLogicInner = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        // ==== Update Redux state\n        usePropReduxUpdate(reduxActions.setRawFiles, props.files ?? initialRootState.rawFiles);\n        usePropReduxUpdate(reduxActions.setRawFolderChain, props.folderChain);\n        useDTE(\n            thunkUpdateRawFileActions,\n            getValueOrFallback(props.fileActions, defaultConfig.fileActions),\n            getValueOrFallback(props.disableDefaultFileActions, defaultConfig.disableDefaultFileActions)\n        );\n        useDTE(\n            reduxActions.setExternalFileActionHandler,\n            getValueOrFallback(props.onFileAction, defaultConfig.onFileAction) as any\n        );\n        useDTE(\n            reduxActions.setSelectionDisabled,\n            getValueOrFallback(props.disableSelection, defaultConfig.disableSelection, 'boolean')\n        );\n        useDTE(\n            thunkActivateSortAction,\n            getValueOrFallback(props.defaultSortActionId, defaultConfig.defaultSortActionId)\n        );\n        useDTE(\n            thunkUpdateDefaultFileViewActionId,\n            getValueOrFallback(props.defaultFileViewActionId, defaultConfig.defaultFileViewActionId, 'string')\n        );\n\n        useDTE(\n            reduxActions.setThumbnailGenerator,\n            getValueOrFallback(props.thumbnailGenerator, defaultConfig.thumbnailGenerator)\n        );\n        useDTE(\n            reduxActions.setDoubleClickDelay,\n            getValueOrFallback(props.doubleClickDelay, defaultConfig.doubleClickDelay, 'number')\n        );\n        useDTE(\n            reduxActions.setDisableDragAndDrop,\n            getValueOrFallback(props.disableDragAndDrop, defaultConfig.disableDragAndDrop, 'boolean')\n        );\n        useDTE(\n            reduxActions.setClearSelectionOnOutsideClick,\n            getValueOrFallback(\n                props.clearSelectionOnOutsideClick,\n                defaultConfig.clearSelectionOnOutsideClick,\n                'boolean'\n            )\n        );\n\n        // ==== Setup the imperative handle for external use\n        useFileBrowserHandle(ref);\n\n        return null;\n    })\n);\nChonkyBusinessLogicInner.displayName = 'ChonkyBusinessLogicInner';\n\nexport const ChonkyBusinessLogic = React.memo(ChonkyBusinessLogicInner);\nChonkyBusinessLogic.displayName = 'ChonkyBusinessLogic';\n","import { useCallback, useContext } from 'react';\nimport { DndContext, useDrag, useDrop } from 'react-dnd';\n\nexport const useDndContextAvailable = () => {\n    const dndContext = useContext(DndContext);\n    const { dragDropManager } = dndContext;\n    return !!dragDropManager;\n};\n\nexport const useDragIfAvailable: typeof useDrag = (...args) => {\n    // This is an ugly hack to make `useDrag` not throw if a `DndContext` is not available.\n    // See: https://github.com/react-dnd/react-dnd/issues/2212\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrag = dndContextAvailable ? useDrag : mockHook;\n    return useHook(...args);\n};\n\nexport const useDropIfAvailable: typeof useDrop = (...args) => {\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrop = dndContextAvailable ? useDrop : mockHook;\n    return useHook(...args);\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuMounted } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { findElementAmongAncestors } from '../../util/helpers';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\n\nexport const findClosestChonkyFileId = (\n    element: HTMLElement | any\n): Nullable<string> => {\n    const fileEntryWrapperDiv = findElementAmongAncestors(\n        element,\n        (element: any) =>\n            element.tagName &&\n            element.tagName.toLowerCase() === 'div' &&\n            element.dataset &&\n            element.dataset.chonkyFileId\n    );\n    return fileEntryWrapperDiv ? fileEntryWrapperDiv.dataset.chonkyFileId! : null;\n};\n\nexport const useContextMenuTrigger = () => {\n    const dispatch = useDispatch();\n    const contextMenuMountedRef = useInstanceVariable(\n        useSelector(selectContextMenuMounted)\n    );\n    return useCallback(\n        (event: React.MouseEvent<HTMLDivElement>) => {\n            // Use default browser context menu when Chonky context menu component\n            // is not mounted.\n            if (!contextMenuMountedRef.current) return;\n            // Users can use Alt+Right Click to bring up browser's default\n            // context menu instead of Chonky's context menu.\n            if (event.altKey) return;\n\n            event.preventDefault();\n\n            const triggerFileId = findClosestChonkyFileId(event.target);\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.OpenFileContextMenu, {\n                    clientX: event.clientX,\n                    clientY: event.clientY,\n                    triggerFileId,\n                })\n            );\n        },\n        [contextMenuMountedRef, dispatch]\n    );\n};\n\nexport const useContextMenuDismisser = () => {\n    const dispatch = useDispatch();\n    return useCallback(() => dispatch(reduxActions.hideContextMenu()), [dispatch]);\n};\n","import { DragObjectWithType } from 'react-dnd';\nimport { Nilable } from 'tsdef';\n\nimport { StartDragNDropPayload } from './action-payloads.types';\nimport { FileData } from './file.types';\n\nexport interface ChonkyDndDropResult {\n    dropTarget: Nilable<FileData> | any;\n    dropEffect: 'move' | 'copy';\n}\n\nexport type ChonkyDndFileEntryItem = DragObjectWithType & {\n    payload: StartDragNDropPayload;\n};\nexport const ChonkyDndFileEntryType = 'dnd-chonky-file-entry';\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useDragLayer } from 'react-dnd';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyDndFileEntryItem, ChonkyDndFileEntryType } from '../../types/dnd.types';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileListDragLayerProps {}\n\nconst layerStyles: React.CSSProperties = {\n    position: 'fixed',\n    pointerEvents: 'none',\n    zIndex: 100,\n    left: 0,\n    top: 0,\n    width: '100%',\n    height: '100%',\n};\nconst getItemStyles = (\n    initialCursorOffset: Nullable<{ x: number; y: number }>,\n    initialFileOffset: Nullable<{ x: number; y: number }>,\n    currentFileOffset: Nullable<{ x: number; y: number }>\n) => {\n    if (!initialCursorOffset || !initialFileOffset || !currentFileOffset) {\n        return {\n            display: 'none',\n        };\n    }\n    const x = initialCursorOffset.x + (currentFileOffset.x - initialFileOffset.x);\n    const y = initialCursorOffset.y + (currentFileOffset.y - initialFileOffset.y);\n    const transform = `translate(${x}px, ${y}px)`;\n    return {\n        transform,\n        WebkitTransform: transform,\n    };\n};\n\nexport const DnDFileListDragLayer: React.FC<DnDFileListDragLayerProps> = () => {\n    const classes = useStyles();\n\n    const {\n        itemType,\n        item,\n        initialCursorOffset,\n        initialFileOffset,\n        currentFileOffset,\n        isDragging,\n    } = useDragLayer(monitor => ({\n        item: monitor.getItem() as ChonkyDndFileEntryItem,\n        itemType: monitor.getItemType(),\n        initialCursorOffset: monitor.getInitialClientOffset(),\n        initialFileOffset: monitor.getInitialSourceClientOffset(),\n        currentFileOffset: monitor.getSourceClientOffset(),\n        isDragging: monitor.isDragging(),\n    }));\n    if (!isDragging || itemType !== ChonkyDndFileEntryType || !item.payload) {\n        return null;\n    }\n\n    const selectionSize = item.payload.selectedFiles.length;\n    return (\n        <div style={layerStyles}>\n            <div\n                style={getItemStyles(\n                    initialCursorOffset,\n                    initialFileOffset,\n                    currentFileOffset\n                )}\n            >\n                <div className={classes.fileDragPreview}>\n                    <b>{item.payload.draggedFile.name}</b>\n                    {selectionSize > 1 && (\n                        <>\n                            {' and '}\n                            <strong>\n                                {selectionSize - 1} other file\n                                {selectionSize - 1 !== 1 ? 's' : ''}\n                            </strong>\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileDragPreview: {\n        boxShadow: `2px 2px 5px ${theme.palette.divider}`,\n        backgroundColor: theme.palette.background.default,\n        borderRadius: theme.dragLayer.borderRadius,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        padding: theme.dragLayer.padding,\n        border: theme.dragLayer.border,\n        display: 'inline-block',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport hotkeys from 'hotkeys-js';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\n\nexport interface HotkeyListenerProps {\n    fileActionId: string;\n}\n\nexport const HotkeyListener: React.FC<HotkeyListenerProps> = React.memo(props => {\n    const { fileActionId } = props;\n\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n\n    useEffect(() => {\n        if (!fileAction || !fileAction.hotkeys || fileAction.hotkeys.length === 0) {\n            return;\n        }\n\n        const hotkeysStr = fileAction.hotkeys.join(',');\n        const hotkeyCallback = (event: KeyboardEvent) => {\n            event.preventDefault();\n            dispatch(thunkRequestFileAction(fileAction, undefined));\n        };\n        hotkeys(hotkeysStr, hotkeyCallback);\n        return () => hotkeys.unbind(hotkeysStr, hotkeyCallback);\n    }, [dispatch, fileAction]);\n\n    return null;\n});\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { reduxActions } from '../../redux/reducers';\nimport {\n    selectClearSelectionOnOutsideClick,\n    selectFileActionIds,\n    selectIsDnDDisabled,\n} from '../../redux/selectors';\nimport { useDndContextAvailable } from '../../util/dnd-fallback';\nimport { elementIsInsideButton } from '../../util/helpers';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuTrigger } from '../external/FileContextMenu-hooks';\nimport { DnDFileListDragLayer } from '../file-list/DnDFileListDragLayer';\nimport { HotkeyListener } from './HotkeyListener';\n\nexport interface ChonkyPresentationLayerProps {}\n\nexport const ChonkyPresentationLayer: React.FC<ChonkyPresentationLayerProps> = ({\n    children,\n}) => {\n    const dispatch = useDispatch();\n    const fileActionIds = useSelector(selectFileActionIds);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n    const clearSelectionOnOutsideClick = useSelector(\n        selectClearSelectionOnOutsideClick\n    );\n\n    // Deal with clicks outside of Chonky\n    const handleClickAway = useCallback(\n        (event: React.MouseEvent<Document>) => {\n            if (!clearSelectionOnOutsideClick || elementIsInsideButton(event.target)) {\n                // We only clear out the selection on outside click if the click target\n                // was not a button. We don't want to clear out the selection when a\n                // button is clicked because Chonky users might want to trigger some\n                // selection-related action on that button click.\n                return;\n            }\n            dispatch(reduxActions.clearSelection());\n        },\n        [dispatch, clearSelectionOnOutsideClick]\n    );\n\n    // Generate necessary components\n    const hotkeyListenerComponents = useMemo(\n        () =>\n            fileActionIds.map(actionId => (\n                <HotkeyListener\n                    key={`file-action-listener-${actionId}`}\n                    fileActionId={actionId}\n                />\n            )),\n        [fileActionIds]\n    );\n\n    const dndContextAvailable = useDndContextAvailable();\n    const showContextMenu = useContextMenuTrigger();\n\n    const classes = useStyles();\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n            <Box className={classes.chonkyRoot} onContextMenu={showContextMenu}>\n                {!dndDisabled && dndContextAvailable && <DnDFileListDragLayer />}\n                {hotkeyListenerComponents}\n                {children ? children : null}\n            </Box>\n        </ClickAwayListener>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    chonkyRoot: {\n        backgroundColor: theme.palette.background.paper,\n        border: `solid 1px ${theme.palette.divider}`,\n        padding: theme.margins.rootLayoutMargin,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        touchAction: 'manipulation', // Disabling zoom on double tap\n        fontFamily: 'sans-serif',\n        flexDirection: 'column',\n        boxSizing: 'border-box',\n        textAlign: 'left',\n        borderRadius: 4,\n        display: 'flex',\n        height: '100%',\n\n        // Disabling select\n        webkitTouchCallout: 'none',\n        webkitUserSelect: 'none',\n        mozUserSelect: 'none',\n        msUserSelect: 'none',\n        userSelect: 'none',\n    },\n}));\n","import {\n    createMuiTheme,\n    ThemeProvider as MuiThemeProvider,\n} from '@material-ui/core/styles';\nimport merge from 'deepmerge';\nimport React, { ReactNode, useMemo } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { IntlProvider } from 'react-intl';\nimport { ThemeProvider } from 'react-jss';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport shortid from 'shortid';\n\nimport { useChonkyStore } from '../../redux/store';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { getValueOrFallback } from '../../util/helpers';\nimport { useStaticValue } from '../../util/hooks-helpers';\nimport { ChonkyFormattersContext, defaultFormatters } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    darkThemeOverride,\n    lightTheme,\n    mobileThemeOverride,\n    useIsMobileBreakpoint,\n} from '../../util/styles';\nimport { ChonkyBusinessLogic } from '../internal/ChonkyBusinessLogic';\nimport { ChonkyIconPlaceholder } from '../internal/ChonkyIconPlaceholder';\nimport { ChonkyPresentationLayer } from '../internal/ChonkyPresentationLayer';\n\n// if (process.env.NODE_ENV === 'development') {\n//     const whyDidYouRender = require('@welldone-software/why-did-you-render');\n//     whyDidYouRender(React, {\n//         trackAllPureComponents: true,\n//     });\n// }\n\nexport const FileBrowser = React.forwardRef<\n    FileBrowserHandle,\n    FileBrowserProps & { children?: ReactNode }\n>((props, ref) => {\n    const { instanceId, iconComponent, children } = props;\n    const disableDragAndDrop = getValueOrFallback(\n        props.disableDragAndDrop,\n        defaultConfig.disableDragAndDrop,\n        'boolean'\n    );\n    const disableDragAndDropProvider = getValueOrFallback(\n        props.disableDragAndDropProvider,\n        defaultConfig.disableDragAndDropProvider,\n        'boolean'\n    );\n    const darkMode = getValueOrFallback(\n        props.darkMode,\n        defaultConfig.darkMode,\n        'boolean'\n    );\n    const i18n = getValueOrFallback(props.i18n, defaultConfig.i18n);\n    const formatters = useMemo(() => ({ ...defaultFormatters, ...i18n?.formatters }), [\n        i18n,\n    ]);\n\n    const chonkyInstanceId = useStaticValue(() => instanceId ?? shortid.generate());\n    const store = useChonkyStore(chonkyInstanceId);\n\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n    const theme = useMemo(() => {\n        const muiTheme = createMuiTheme({\n            palette: { type: darkMode ? 'dark' : 'light' },\n        });\n        const combinedTheme = merge(\n            muiTheme,\n            merge(lightTheme, darkMode ? darkThemeOverride : {})\n        );\n        return isMobileBreakpoint\n            ? merge(combinedTheme, mobileThemeOverride)\n            : combinedTheme;\n    }, [darkMode, isMobileBreakpoint]);\n\n    const chonkyComps = (\n        <>\n            <ChonkyBusinessLogic ref={ref} {...props} />\n            <ChonkyPresentationLayer>{children}</ChonkyPresentationLayer>\n        </>\n    );\n\n    return (\n        <IntlProvider locale=\"en\" defaultLocale=\"en\" {...i18n}>\n            <ChonkyFormattersContext.Provider value={formatters}>\n                <ReduxProvider store={store}>\n                    <ThemeProvider theme={theme}>\n                        <MuiThemeProvider theme={theme}>\n                            <ChonkyIconContext.Provider\n                                value={\n                                    iconComponent ??\n                                    defaultConfig.iconComponent ??\n                                    ChonkyIconPlaceholder\n                                }\n                            >\n                                {disableDragAndDrop || disableDragAndDropProvider ? (\n                                    chonkyComps\n                                ) : (\n                                    <DndProvider backend={HTML5Backend}>\n                                        {chonkyComps}\n                                    </DndProvider>\n                                )}\n                            </ChonkyIconContext.Provider>\n                        </MuiThemeProvider>\n                    </ThemeProvider>\n                </ReduxProvider>\n            </ChonkyFormattersContext.Provider>\n        </IntlProvider>\n    );\n});\nFileBrowser.displayName = 'FileBrowser';\n","import { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectFolderChain } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { FileData } from '../../types/file.types';\nimport { FileHelper } from '../../util/file-helper';\n\nexport interface FolderChainItem {\n    file: Nullable<FileData>;\n    disabled: boolean;\n    onClick?: () => void;\n}\n\nexport const useFolderChainItems = (): FolderChainItem[] => {\n    const folderChain = useSelector(selectFolderChain);\n    const dispatch = useDispatch();\n\n    const folderChainItems = useMemo(() => {\n        const items: FolderChainItem[] = [];\n        if (!folderChain) return items;\n\n        for (let i = 0; i < folderChain.length; ++i) {\n            const file = folderChain[i];\n            items.push({\n                file,\n                disabled: !file,\n                onClick:\n                    !FileHelper.isOpenable(file) || i === folderChain.length - 1\n                        ? undefined\n                        : () =>\n                              dispatch(\n                                  thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                                      targetFile: file,\n                                      files: [file],\n                                  })\n                              ),\n            });\n        }\n        return items;\n    }, [dispatch, folderChain]);\n    return folderChainItems;\n};\n","import { useCallback, useEffect, useMemo } from 'react';\nimport { DragSourceMonitor, DropTargetMonitor } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useDispatch, useSelector, useStore } from 'react-redux';\nimport { ExcludeKeys, Nullable } from 'tsdef';\n\nimport { EssentialActions } from '../action-definitions/essential';\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectCurrentFolder,\n    selectFolderChain,\n    selectInstanceId,\n    selectSelectedFiles,\n} from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { StartDragNDropPayload } from '../types/action-payloads.types';\nimport {\n    ChonkyDndDropResult,\n    ChonkyDndFileEntryItem,\n    ChonkyDndFileEntryType,\n} from '../types/dnd.types';\nimport { DndEntryState } from '../types/file-list.types';\nimport { FileData } from '../types/file.types';\nimport { useDragIfAvailable, useDropIfAvailable } from './dnd-fallback';\nimport { FileHelper } from './file-helper';\nimport { useInstanceVariable } from './hooks-helpers';\n\nexport const useFileDrag = (file: Nullable<FileData>) => {\n    // Prepare the dnd payload\n    const store = useStore();\n    const fileRef = useInstanceVariable(file);\n    const getDndStartPayload = useCallback<() => StartDragNDropPayload>(() => {\n        const reduxState = store.getState();\n        return {\n            sourceInstanceId: selectInstanceId(reduxState),\n            source: selectCurrentFolder(reduxState),\n            // We force non-null type below because by convention, if drag & drop for\n            // this file was possible, it must have been non-null.\n            draggedFile: fileRef.current!,\n            selectedFiles: selectSelectedFiles(reduxState),\n        };\n    }, [store, fileRef]);\n\n    // For drag source\n    const dispatch = useDispatch();\n    const canDrag = useCallback(() => FileHelper.isDraggable(fileRef.current), [\n        fileRef,\n    ]);\n    const onDragStart = useCallback((): ChonkyDndFileEntryItem => {\n        const item: ChonkyDndFileEntryItem = {\n            type: ChonkyDndFileEntryType,\n            payload: getDndStartPayload(),\n        };\n        dispatch(thunkRequestFileAction(ChonkyActions.StartDragNDrop, item.payload));\n        return item;\n    }, [dispatch, getDndStartPayload]);\n    const onDragEnd = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DragSourceMonitor) => {\n            const dropResult = monitor.getDropResult() as ChonkyDndDropResult;\n            if (\n                !FileHelper.isDraggable(item.payload.draggedFile) ||\n                !dropResult ||\n                !dropResult.dropTarget\n            ) {\n                return;\n            }\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.EndDragNDrop, {\n                    ...item.payload,\n                    destination: dropResult.dropTarget,\n                    copy: dropResult.dropEffect === 'copy',\n                })\n            );\n        },\n        [dispatch]\n    );\n\n    // Create refs for react-dnd hooks\n    const item = useMemo<ChonkyDndFileEntryItem>(\n        () => ({\n            type: ChonkyDndFileEntryType,\n            // Payload is actually added in `onDragStart`\n            payload: {} as StartDragNDropPayload,\n        }),\n        []\n    );\n    const collect = useCallback(monitor => ({ isDragging: monitor.isDragging() }), []);\n    const [{ isDragging: dndIsDragging }, drag, preview] = useDragIfAvailable({\n        item,\n        canDrag,\n        begin: onDragStart,\n        // @ts-ignore\n        end: onDragEnd,\n        collect,\n    });\n\n    useEffect(() => {\n        // Set drag preview to an empty image because `DnDFileListDragLayer` will\n        // provide its own preview.\n        preview(getEmptyImage(), { captureDraggingState: true });\n    }, [preview]);\n\n    return { dndIsDragging, drag };\n};\n\ninterface UseFileDropParams {\n    file: Nullable<FileData>;\n    forceDisableDrop?: boolean;\n    includeChildrenDrops?: boolean;\n}\n\nexport const useFileDrop = ({\n    file,\n    forceDisableDrop,\n    includeChildrenDrops,\n}: UseFileDropParams) => {\n    const folderChainRef = useInstanceVariable(useSelector(selectFolderChain));\n    const onDrop = useCallback(\n        (_item: ChonkyDndFileEntryItem, monitor) => {\n            if (!monitor.canDrop()) return;\n            const customDropResult: ExcludeKeys<ChonkyDndDropResult, 'dropEffect'> = {\n                dropTarget: file,\n            };\n            return customDropResult;\n        },\n        [file]\n    );\n    const canDrop = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DropTargetMonitor) => {\n            if (\n                forceDisableDrop ||\n                !FileHelper.isDroppable(file) ||\n                (!monitor.isOver({ shallow: true }) && !includeChildrenDrops)\n            ) {\n                return false;\n            }\n            const { source, draggedFile, selectedFiles } = item.payload;\n\n            // We prevent folders from being dropped into themselves. We also prevent\n            // any folder from current folder chain being moved - we can't move the\n            // folder that we are currently in.\n            const prohibitedFileIds = new Set<string>();\n            prohibitedFileIds.add(file.id);\n            folderChainRef.current.map(folder => {\n                if (folder) prohibitedFileIds.add(folder.id);\n            });\n            const movedFiles: FileData[] = [draggedFile, ...selectedFiles];\n            for (const currFile of movedFiles) {\n                if (prohibitedFileIds.has(currFile.id)) return false;\n            }\n\n            // Finally, prohibit files from being moved into their parent folder\n            // (which is a no-op).\n            return file.id !== source?.id;\n        },\n        [forceDisableDrop, file, includeChildrenDrops, folderChainRef]\n    );\n    const collect = useCallback(\n        monitor => ({\n            isOver: monitor.isOver(),\n            isOverCurrent: monitor.isOver({ shallow: true }),\n            canDrop: monitor.canDrop(),\n        }),\n        []\n    );\n    const [\n        { isOver: dndIsOver, isOverCurrent: dndIsOverCurrent, canDrop: dndCanDrop },\n        drop,\n    ] = useDropIfAvailable({\n        accept: ChonkyDndFileEntryType,\n        drop: onDrop,\n        canDrop,\n        collect,\n    });\n    return { dndIsOver, dndIsOverCurrent, dndCanDrop, drop };\n};\n\nexport const useFileEntryDnD = (file: Nullable<FileData>) => {\n    const { dndIsDragging, drag } = useFileDrag(file);\n    const { dndIsOver, dndCanDrop, drop } = useFileDrop({ file });\n    const dndState = useMemo<DndEntryState>(\n        () => ({\n            dndIsDragging,\n            dndIsOver,\n            dndCanDrop,\n        }),\n        [dndCanDrop, dndIsDragging, dndIsOver]\n    );\n    return {\n        drop,\n        drag,\n        dndState,\n    };\n};\n\nexport const useDndHoverOpen = (file: Nullable<FileData>, dndState: DndEntryState) => {\n    const dispatch = useDispatch();\n    const currentFolderRef = useInstanceVariable(useSelector(selectCurrentFolder));\n    useEffect(() => {\n        let timeout: Nullable<any> = null;\n        if (\n            dndState.dndIsOver &&\n            FileHelper.isDndOpenable(file) &&\n            file.id !== currentFolderRef.current?.id\n        ) {\n            timeout = setTimeout(\n                () =>\n                    dispatch(\n                        thunkRequestFileAction(EssentialActions.OpenFiles, {\n                            targetFile: file,\n                            files: [file],\n                        })\n                    ),\n                // TODO: Make this timeout configurable\n                1500\n            );\n        }\n        return () => {\n            if (timeout) clearTimeout(timeout);\n        };\n    }, [dispatch, file, dndState.dndIsOver, currentFolderRef]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface TextPlaceholderProps {\n    minLength: number;\n    maxLength: number;\n}\n\nconst getRandomInt = (min: number, max: number) => {\n    return min + Math.floor(Math.random() * Math.floor(max - min));\n};\nexport const TextPlaceholder: React.FC<TextPlaceholderProps> = React.memo(props => {\n    const { minLength, maxLength } = props;\n\n    const placeholderLength = getRandomInt(minLength, maxLength);\n    const whitespace = '&nbsp;'.repeat(placeholderLength);\n\n    const classes = useStyles();\n    return (\n        <span\n            className={classes.textPlaceholder}\n            dangerouslySetInnerHTML={{ __html: whitespace }}\n        />\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(() => ({\n    '@keyframes loading-placeholder': {\n        '0%': { opacity: 0.2 },\n        '50%': { opacity: 0.4 },\n        '100%': { opacity: 0.2 },\n    },\n    textPlaceholder: {\n        animationName: '$loading-placeholder',\n        animationIterationCount: 'infinite',\n        animationTimingFunction: 'linear',\n        animationDuration: '1.5s',\n        backgroundColor: '#ccc',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        borderRadius: 4,\n        maxWidth: '40%',\n        minWidth: 20,\n    },\n}));\n","import React, {\n    HTMLProps, useCallback, useContext, useEffect, useMemo, useRef, useState\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectThumbnailGenerator } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { ChonkyIconContext, ColorsDark, ColorsLight, useIconData } from '../../util/icon-helper';\nimport { Logger } from '../../util/logger';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { KeyboardClickEvent, MouseClickEvent } from '../internal/ClickableWrapper';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const useFileEntryHtmlProps = (file: Nullable<FileData>): HTMLProps<HTMLDivElement> => {\n    return useMemo(() => {\n        const dataProps: { [prop: string]: Undefinable<string> } = {\n            'data-test-id': 'file-entry',\n            'data-chonky-file-id': file ? file.id : undefined,\n        };\n\n        return {\n            role: 'listitem',\n            ...dataProps,\n        };\n    }, [file]);\n};\n\nexport const useFileEntryState = (file: Nullable<FileData>, selected: boolean, focused: boolean) => {\n    const iconData = useIconData(file);\n    const { thumbnailUrl, thumbnailLoading } = useThumbnailUrl(file);\n\n    return useMemo<FileEntryState>(() => {\n        const fileColor = thumbnailUrl ? ColorsDark[iconData.colorCode] : ColorsLight[iconData.colorCode];\n        const iconSpin = thumbnailLoading || !file;\n        const icon = thumbnailLoading ? ChonkyIconName.loading : iconData.icon;\n\n        return {\n            childrenCount: FileHelper.getChildrenCount(file),\n            icon: file && file.icon !== undefined ? file.icon : icon,\n            iconSpin: iconSpin,\n            thumbnailUrl: thumbnailUrl,\n            color: file && file.color !== undefined ? file.color : fileColor,\n            selected: selected,\n            focused: !!focused,\n        };\n    }, [file, focused, iconData, selected, thumbnailLoading, thumbnailUrl]);\n};\n\nexport const useDndIcon = (dndState: DndEntryState) => {\n    let dndIconName: Nullable<ChonkyIconName> = null;\n    if (dndState.dndIsOver) {\n        const showDropIcon = dndState.dndCanDrop;\n        dndIconName = showDropIcon ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop;\n    } else if (dndState.dndIsDragging) {\n        dndIconName = ChonkyIconName.dndDragging;\n    }\n\n    return dndIconName;\n};\n\nexport const useModifierIconComponents = (file: Nullable<FileData>) => {\n    const modifierIcons: ChonkyIconName[] = useMemo(() => {\n        const modifierIcons: ChonkyIconName[] = [];\n        if (FileHelper.isHidden(file)) modifierIcons.push(ChonkyIconName.hidden);\n        if (FileHelper.isSymlink(file)) modifierIcons.push(ChonkyIconName.symlink);\n        if (FileHelper.isEncrypted(file)) modifierIcons.push(ChonkyIconName.lock);\n        return modifierIcons;\n    }, [file]);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const modifierIconComponents = useMemo(\n        () => modifierIcons.map((icon, index) => <ChonkyIcon key={`file-modifier-${index}`} icon={icon} />),\n        // For some reason ESLint marks `ChonkyIcon` as an unnecessary dependency,\n        // but we expect it can change at runtime so we disable the check.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [ChonkyIcon, modifierIcons]\n    );\n    return modifierIconComponents;\n};\n\nconst _extname = (fileName: string) => {\n    const parts = fileName.split('.');\n    if (parts.length) {\n        return `.${parts[parts.length - 1]}`;\n    }\n    return '';\n};\n\nexport const useFileNameComponent = (file: Nullable<FileData>) => {\n    return useMemo(() => {\n        if (!file) return <TextPlaceholder minLength={15} maxLength={20} />;\n\n        let name;\n        let extension = null;\n\n        const isDir = FileHelper.isDirectory(file);\n        if (isDir) {\n            name = file.name;\n        } else {\n            extension = file.ext ?? _extname(file.name);\n            name = file.name.substr(0, file.name.length - extension.length);\n        }\n\n        return (\n            <>\n                {name}\n                {extension && <span className=\"chonky-file-entry-description-title-extension\">{extension}</span>}\n            </>\n        );\n    }, [file]);\n};\n\nexport const useThumbnailUrl = (file: Nullable<FileData>) => {\n    const thumbnailGenerator = useSelector(selectThumbnailGenerator);\n    const [thumbnailUrl, setThumbnailUrl] = useState<Nullable<string>>(null);\n    const [thumbnailLoading, setThumbnailLoading] = useState<boolean>(false);\n    const loadingAttempts = useRef(0);\n\n    useEffect(() => {\n        let loadingCancelled = false;\n\n        if (file) {\n            if (thumbnailGenerator) {\n                if (loadingAttempts.current === 0) {\n                    setThumbnailLoading(true);\n                }\n                loadingAttempts.current++;\n                Promise.resolve()\n                    .then(() => thumbnailGenerator(file))\n                    .then((thumbnailUrl: any) => {\n                        if (loadingCancelled) return;\n                        setThumbnailLoading(false);\n\n                        if (thumbnailUrl && typeof thumbnailUrl === 'string') {\n                            setThumbnailUrl(thumbnailUrl);\n                        }\n                    })\n                    .catch(error => {\n                        if (!loadingCancelled) setThumbnailLoading(false);\n                        Logger.error(`User-defined \"thumbnailGenerator\" handler threw an error: ${error.message}`);\n                    });\n            } else if (file.thumbnailUrl) {\n                setThumbnailUrl(file.thumbnailUrl);\n            }\n        }\n\n        return () => {\n            loadingCancelled = true;\n        };\n    }, [file, setThumbnailUrl, setThumbnailLoading, thumbnailGenerator]);\n\n    return { thumbnailUrl, thumbnailLoading };\n};\n\nexport const useFileClickHandlers = (file: Nullable<FileData>, displayIndex: number) => {\n    const dispatch = useDispatch();\n\n    // Prepare base handlers\n    const onMouseClick = useCallback(\n        (event: MouseClickEvent, clickType: 'single' | 'double') => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.MouseClickFile, {\n                    clickType,\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n    const onKeyboardClick = useCallback(\n        (event: KeyboardClickEvent) => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.KeyboardClickFile, {\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    enterKey: event.enterKey,\n                    spaceKey: event.spaceKey,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n\n    // Prepare single/double click handlers\n    const onSingleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'single'), [onMouseClick]);\n    const onDoubleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'double'), [onMouseClick]);\n\n    return {\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n    };\n};\n","import { MaybePromise, Nullable } from 'tsdef';\n\nimport { FileActionState } from './action-handler.types';\nimport { FileViewConfig } from './file-view.types';\nimport { FileFilter, FileMap } from './file.types';\nimport { ChonkyIconName } from './icons.types';\nimport { ChonkyDispatch, RootState } from './redux.types';\nimport { FileSortKeySelector } from './sort.types';\n\nexport interface FileAction {\n    /**\n     * Unique file action ID. If you set the action ID to one of the built-in Chonky\n     * action action IDs, you custom action definition will override the built-in\n     * definition.\n     */\n    id: string;\n    /**\n     * When set to `true`, the action will only be active (dispatchable) when user\n     * selects one or more files. If `fileFilter` is defined, it will be applied to\n     * selection before checking if its empty.\n     */\n    requiresSelection?: boolean; // Requires selection of 1+ files\n    /**\n     * A predicate that determines whether a file should be included in the selection\n     * for this action.\n     */\n    fileFilter?: FileFilter;\n    /**\n     * List of hotkeys that should trigger this action, defined using `hotkey-js`\n     * notation.\n     * @see https://www.npmjs.com/package/hotkeys-js\n     */\n    hotkeys?: string[] | readonly string[];\n    /**\n     * When button is defined and `toolbar` or `contextMenu` is set to `true`, a\n     * button will be added to the relevant UI component. Clicking on this button\n     * will active this action. The appearance of the button will change based on\n     * the action definition and the current Chonky state.\n     */\n    button?: FileActionButton;\n    /**\n     * When `sortKeySelector` is specified, the action becomes a sorting toggle. When\n     * this action is activated, it will sort files using the key selector, toggling\n     * between Ascending and Descending orders.\n     */\n    sortKeySelector?: FileSortKeySelector;\n    /**\n     * When `fileViewConfig` is specified, triggering this action will apply the\n     * provided config to Chonky's file view.\n     */\n    fileViewConfig?: FileViewConfig;\n    /**\n     * When `option` is specified, the action becomes an option toggle. When the action\n     * is activated, the boolean value of the option will be toggled.\n     */\n    option?: FileActionOption;\n    /**\n     * When selection transform is defined, activating this action will update the file\n     * selection. If the transform function returns `null`, selection will be left\n     * untouched.\n     */\n    selectionTransform?: FileSelectionTransform;\n    /**\n     * When effect is defined, it will be called right before dispatching the action to\n     * the user defined action handler. If the effect function returns a promise, Chonky\n     * will wait for the promise to resolve or fail before dispatching the action to the\n     * handler. If this function returns `true`, the file action will NOT be dispatched\n     * the the handler.\n     */\n    effect?: FileActionEffect;\n    /**\n     * When customVisibility is defined, it will change the display state of the file action\n     * The function must return the visibility as one of the CustomVisibilityState values:\n     *  - Hidden\n     *  - Disabled\n     *  - Default\n     *  - Active\n     */\n    customVisibility?: () => CustomVisibilityState;\n    /**\n     * Field used to infer the type of action payload. It is used solely for Typescript\n     * type inference and action validation.\n     */\n    __payloadType?: any;\n    /**\n     * Field used to infer the type of extra state for this action. It is used solely\n     * for Typescript type inference and action validation.\n     */\n    __extraStateType?: any;\n}\n\nexport interface FileActionButton {\n    name: string; // Button name\n    toolbar?: boolean; // Whether to show the button in the toolbar\n    contextMenu?: boolean; // Whether to show the button in the context menu\n    group?: string; // Button group (dropdown in toolbar or section in context menu)\n    tooltip?: string; // Help tooltip text\n    icon?: ChonkyIconName | string | any; // Icon name\n    iconOnly?: boolean; // Whether to only display the icon\n}\n\nexport interface FileActionOption {\n    id: string; // Unique option ID\n    defaultValue: boolean; // Whether the option is enabled by default (required)\n}\n\nexport type FileSelectionTransform = (data: {\n    prevSelection: Set<string>;\n    fileIds: ReadonlyArray<string>;\n    fileMap: Readonly<FileMap>;\n    hiddenFileIds: Set<string>;\n}) => Nullable<Set<string>>;\n\nexport type FileActionEffect<Action extends FileAction = any> = (data: {\n    action: Action;\n    payload: Action['__payloadType'];\n    state: FileActionState<{}>; // extra state is empty on purpose\n    reduxDispatch: ChonkyDispatch;\n    getReduxState: () => RootState;\n}) => MaybePromise<undefined | boolean | void>;\n\nexport type FileActionMap = { [actonId: string]: FileAction };\n\nexport enum CustomVisibilityState {\n    Hidden, \n    Disabled, \n    Default,\n    Active\n};\n","import { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectFileActionData,\n    selectFileViewConfig,\n    selectOptionValue,\n    selectParentFolder,\n    selectSelectedFilesForActionCount,\n    selectSortActionId,\n    selectSortOrder,\n} from '../redux/selectors';\nimport { useParamSelector } from '../redux/store';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { CustomVisibilityState } from '../types/action.types';\nimport { SortOrder } from '../types/sort.types';\nimport { FileHelper } from './file-helper';\n\nexport const useFileActionTrigger = (fileActionId: string) => {\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n    return useCallback(() => dispatch(thunkRequestFileAction(fileAction, undefined)), [\n        dispatch,\n        fileAction,\n    ]);\n};\n\nexport const useFileActionProps = (\n    fileActionId: string\n): { icon: Nullable<ChonkyIconName | string>; active: boolean; disabled: boolean } => {\n    const parentFolder = useSelector(selectParentFolder);\n    const fileViewConfig = useSelector(selectFileViewConfig);\n\n    const sortActionId = useSelector(selectSortActionId);\n    const sortOrder = useSelector(selectSortOrder);\n\n    const action = useParamSelector(selectFileActionData, fileActionId);\n    // @ts-ignore\n    const optionValue = useParamSelector(selectOptionValue, action?.option?.id);\n\n    const actionSelectionSize = useParamSelector(\n        selectSelectedFilesForActionCount,\n        fileActionId\n    );\n\n    const actionSelectionEmpty = actionSelectionSize === 0;\n\n    return useMemo(() => {\n        if (!action) return { icon: null, active: false, disabled: true };\n\n        let icon = action.button?.icon ?? null;\n        if (action.sortKeySelector) {\n            if (sortActionId === action.id) {\n                if (sortOrder === SortOrder.ASC) {\n                    icon = ChonkyIconName.sortAsc;\n                } else {\n                    icon = ChonkyIconName.sortDesc;\n                }\n            } else {\n                icon = ChonkyIconName.placeholder;\n            }\n        } else if (action.option) {\n            if (optionValue) {\n                icon = ChonkyIconName.toggleOn;\n            } else {\n                icon = ChonkyIconName.toggleOff;\n            }\n        }\n\n        const isSortButtonAndCurrentSort = action.id === sortActionId;\n        const isFileViewButtonAndCurrentView = action.fileViewConfig === fileViewConfig;\n        const isOptionAndEnabled = action.option ? !!optionValue : false;\n\n        let customDisabled = false;\n        let customActive = false;\n        if (action.customVisibility !== undefined) {\n            customDisabled = action.customVisibility() === CustomVisibilityState.Disabled;\n            customActive = action.customVisibility() === CustomVisibilityState.Active;\n        }\n        const active =\n            isSortButtonAndCurrentSort ||\n            isFileViewButtonAndCurrentView ||\n            isOptionAndEnabled ||\n            customActive;\n        \n        let disabled: boolean = (!!action.requiresSelection && actionSelectionEmpty) || customDisabled;\n\n        if (action.id === ChonkyActions.OpenParentFolder.id) {\n            // We treat `open_parent_folder` file action as a special case as it\n            // requires the parent folder to be present to work...\n            disabled = disabled || !FileHelper.isOpenable(parentFolder);\n        }\n\n        return { icon, active, disabled };\n    }, [\n        parentFolder,\n        fileViewConfig,\n        sortActionId,\n        sortOrder,\n        action,\n        optionValue,\n        actionSelectionEmpty,\n    ]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Button from '@material-ui/core/Button';\nimport React, { useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarButtonProps {\n    className?: string;\n    text: string;\n    tooltip?: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    iconOnly?: boolean;\n    onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n    disabled?: boolean;\n    dropdown?: boolean;\n}\n\nexport const ToolbarButton: React.FC<ToolbarButtonProps> = React.memo(props => {\n    const {\n        className: externalClassName,\n        text,\n        tooltip,\n        active,\n        icon,\n        iconOnly,\n        onClick,\n        disabled,\n        dropdown,\n    } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const iconComponent =\n        icon || iconOnly ? (\n            <div className={iconOnly ? '' : classes.iconWithText}>\n                <ChonkyIcon\n                    icon={icon ? icon : ChonkyIconName.fallbackIcon}\n                    fixedWidth={true}\n                />\n            </div>\n        ) : null;\n\n    const className = c({\n        [externalClassName ?? '']: true,\n        [classes.baseButton]: true,\n        [classes.iconOnlyButton]: iconOnly,\n        [classes.activeButton]: !!active,\n    });\n    return (\n        <Button\n            className={className}\n            onClick={onClick}\n            title={tooltip ? tooltip : text}\n            disabled={disabled || !onClick}\n        >\n            {iconComponent}\n            {text && !iconOnly && <span>{text}</span>}\n            {dropdown && (\n                <div className={classes.iconDropdown}>\n                    <ChonkyIcon\n                        icon={icon ? icon : ChonkyIconName.dropdown}\n                        fixedWidth={true}\n                    />\n                </div>\n            )}\n        </Button>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        textTransform: important('none'),\n        letterSpacing: important(0),\n        minWidth: important('auto'),\n        lineHeight: theme.toolbar.lineHeight,\n        height: theme.toolbar.size,\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    iconWithText: {\n        marginRight: 8,\n    },\n    iconOnlyButton: {\n        width: theme.toolbar.size,\n        textAlign: 'center',\n    },\n    iconDropdown: {\n        fontSize: '0.7em',\n        marginLeft: 2,\n        marginTop: 1,\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarButtonProps {\n    fileActionId: string;\n}\n\nexport const SmartToolbarButton: React.FC<SmartToolbarButtonProps> = React.memo(\n    props => {\n        const { fileActionId } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName, buttonTooltip } = useLocalizedFileActionStrings(action);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarButton\n                text={buttonName}\n                tooltip={buttonTooltip}\n                icon={icon}\n                iconOnly={button.iconOnly}\n                active={active}\n                onClick={triggerAction}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDndHoverOpen, useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from '../file-list/FileEntry-hooks';\nimport { FolderChainItem } from './FileNavbar-hooks';\nimport { ToolbarButton } from './ToolbarButton';\n\nexport interface FolderChainButtonProps {\n    first: boolean;\n    current: boolean;\n    item: FolderChainItem;\n}\n\nexport const FolderChainButton: React.FC<FolderChainButtonProps> = React.memo(\n    ({ first, current, item }) => {\n        const { file, disabled, onClick } = item;\n        const { dndIsOver, dndCanDrop, drop } = useFileDrop({\n            file,\n            forceDisableDrop: !file || current,\n        });\n        const dndState = useMemo<DndEntryState>(\n            () => ({\n                dndIsOver,\n                dndCanDrop,\n                dndIsDragging: false,\n            }),\n            [dndCanDrop, dndIsOver]\n        );\n        useDndHoverOpen(file, dndState);\n        const dndIconName = useDndIcon(dndState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const classes = useStyles(dndState);\n        const className = c({\n            [classes.baseBreadcrumb]: true,\n            [classes.disabledBreadcrumb]: disabled,\n            [classes.currentBreadcrumb]: current,\n        });\n        const text = file ? file.name : 'Loading...';\n        const icon =\n            first && file?.folderChainIcon === undefined\n                ? ChonkyIconName.folder\n                : file?.folderChainIcon;\n\n        return (\n            <div className={classes.buttonContainer} ref={file ? drop : null}>\n                {file && dndIconName && (\n                    <div className={classes.dndIndicator}>\n                        <ChonkyIcon icon={dndIconName} fixedWidth={true} />\n                    </div>\n                )}\n                <ToolbarButton\n                    icon={icon}\n                    className={className}\n                    text={text}\n                    disabled={disabled}\n                    onClick={onClick}\n                />\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    buttonContainer: {\n        position: 'relative',\n    },\n    baseBreadcrumb: {\n        color: (dndState: DndEntryState) => {\n            let color = theme.palette.text.primary;\n            if (dndState.dndIsOver) {\n                color = dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor;\n            }\n            return important(color);\n        },\n    },\n    disabledBreadcrumb: {\n        // Constant function here is on purpose. Without the function, the color here\n        // does not override the `baseBreadcrumb` color from above.\n        color: () => important(theme.palette.text.disabled),\n    },\n    currentBreadcrumb: {\n        textDecoration: important('underline'),\n    },\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor,\n        backgroundColor: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask,\n        lineHeight: `calc(${theme.toolbar.lineHeight} - 6px)`,\n        transform: 'translateX(-50%) translateY(-50%)',\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 6,\n        width: theme.toolbar.size - 6,\n        boxSizing: 'border-box',\n        position: 'absolute',\n        textAlign: 'center',\n        left: '50%',\n        top: '50%',\n        zIndex: 5,\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useFolderChainItems } from './FileNavbar-hooks';\nimport { FolderChainButton } from './FolderChainButton';\nimport { SmartToolbarButton } from './ToolbarButton';\n\nexport interface FileNavbarProps {}\n\nexport const FileNavbar: React.FC<FileNavbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const folderChainItems = useFolderChainItems();\n\n    const folderChainComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < folderChainItems.length; ++i) {\n            const key = `folder-chain-${i}`;\n            const component = (\n                <FolderChainButton\n                    key={key}\n                    first={i === 0}\n                    current={i === folderChainItems.length - 1}\n                    item={folderChainItems[i]}\n                />\n            );\n            components.push(component);\n        }\n        return components;\n    }, [folderChainItems]);\n\n    return (\n        <Box className={classes.navbarWrapper}>\n            <Box className={classes.navbarContainer}>\n                <SmartToolbarButton fileActionId={ChonkyActions.OpenParentFolder.id} />\n                <Breadcrumbs\n                    className={classes.navbarBreadcrumbs}\n                    classes={{ separator: classes.separator }}\n                >\n                    {folderChainComponents}\n                </Breadcrumbs>\n            </Box>\n        </Box>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    navbarWrapper: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n    },\n    navbarContainer: {\n        display: 'flex',\n    },\n    upDirectoryButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        height: theme.toolbar.size,\n        width: theme.toolbar.size,\n        padding: '0px !important',\n    },\n    navbarBreadcrumbs: {\n        fontSize: important(theme.toolbar.fontSize),\n        flexGrow: 100,\n    },\n    separator: {\n        marginRight: important(4),\n        marginLeft: important(4),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport React, { useCallback, useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarDropdownButtonProps {\n    text: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    onClick?: () => void;\n    disabled?: boolean;\n}\n\nexport const ToolbarDropdownButton = React.forwardRef(\n    (props: ToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { text, active, icon, onClick, disabled } = props;\n        const classes = useStyles();\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const className = c({\n            [classes.baseButton]: true,\n            [classes.activeButton]: active,\n        });\n        return (\n            <MenuItem\n                ref={ref}\n                className={className}\n                onClick={onClick}\n                disabled={disabled}\n            >\n                {icon && (\n                    <ListItemIcon className={classes.icon}>\n                        <ChonkyIcon icon={icon} fixedWidth={true} />\n                    </ListItemIcon>\n                )}\n                <ListItemText primaryTypographyProps={{ className: classes.text }}>\n                    {text}\n                </ListItemText>\n            </MenuItem>\n        );\n    }\n);\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        height: important(theme.toolbar.size),\n        minHeight: important('auto'),\n        minWidth: important('auto'),\n        padding: important(20),\n    },\n    icon: {\n        fontSize: important(theme.toolbar.fontSize),\n        minWidth: important('auto'),\n        color: important('inherit'),\n        marginRight: 8,\n    },\n    text: {\n        fontSize: important(theme.toolbar.fontSize),\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarDropdownButtonProps {\n    fileActionId: string;\n    onClickFollowUp?: () => void;\n}\n\nexport const SmartToolbarDropdownButton = React.forwardRef(\n    (props: SmartToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { fileActionId, onClickFollowUp } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName } = useLocalizedFileActionStrings(action);\n\n        // Combine external click handler with internal one\n        const handleClick = useCallback(() => {\n            triggerAction();\n            if (onClickFollowUp) onClickFollowUp();\n        }, [onClickFollowUp, triggerAction]);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarDropdownButton\n                ref={ref}\n                text={buttonName}\n                icon={icon}\n                onClick={handleClick}\n                active={active}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Menu from '@material-ui/core/Menu';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { FileActionGroup } from '../../types/action-menus.types';\nimport { useLocalizedFileActionGroup } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { ToolbarButton } from './ToolbarButton';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport type ToolbarDropdownProps = FileActionGroup;\n\nexport const ToolbarDropdown: React.FC<ToolbarDropdownProps> = React.memo(props => {\n    const { name, fileActionIds } = props;\n    const [anchor, setAnchor] = React.useState<null | HTMLElement>(null);\n\n    const handleClick = useCallback(\n        (event: React.MouseEvent<HTMLButtonElement>) => setAnchor(event.currentTarget),\n        [setAnchor]\n    );\n    const handleClose = useCallback(() => setAnchor(null), [setAnchor]);\n\n    const menuItemComponents = useMemo(\n        () =>\n            fileActionIds.map(id => (\n                <SmartToolbarDropdownButton\n                    key={`menu-item-${id}`}\n                    fileActionId={id}\n                    onClickFollowUp={handleClose}\n                />\n            )),\n        [fileActionIds, handleClose]\n    );\n\n    const localizedName = useLocalizedFileActionGroup(name);\n    const classes = useStyles();\n    return (\n        <>\n            <ToolbarButton text={localizedName} onClick={handleClick} dropdown={true} />\n            <Menu\n                autoFocus\n                keepMounted\n                elevation={2}\n                anchorEl={anchor}\n                onClose={handleClose}\n                open={Boolean(anchor)}\n                transitionDuration={150}\n                classes={{ list: classes.dropdownList }}\n            >\n                {menuItemComponents}\n            </Menu>\n        </>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    dropdownList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport Typography from '@material-ui/core/Typography';\n\nimport { selectHiddenFileCount, selectors, selectSelectionSize } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarInfoProps {}\n\nexport const ToolbarInfo: React.FC<ToolbarInfoProps> = React.memo(() => {\n    const classes = useStyles();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const selectionSize = useSelector(selectSelectionSize);\n    const hiddenCount = useSelector(selectHiddenFileCount);\n\n    const intl = useIntl();\n    const fileCountString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'visibleFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {# items}\n                one {# item}\n                other {# items}\n            }`,\n        },\n        { fileCount: displayFileIds.length }\n    );\n    const selectedString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'selectedFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# selected}\n            }`,\n        },\n        { fileCount: selectionSize }\n    );\n    const hiddenString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'hiddenFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# hidden}\n            }`,\n        },\n        { fileCount: hiddenCount }\n    );\n\n    return (\n        <div className={classes.infoContainer}>\n            <Typography className={classes.infoText} variant=\"body1\">\n                {fileCountString}\n                {(selectedString || hiddenString) && (\n                    <span className={classes.extraInfoSpan}>\n                        (\n                        <span className={classes.selectionSizeText}>\n                            {selectedString}\n                        </span>\n                        {selectedString && hiddenString && ', '}\n                        <span className={classes.hiddenCountText}>{hiddenString}</span>)\n                    </span>\n                )}\n            </Typography>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    infoContainer: {\n        height: theme.toolbar.size,\n        display: 'flex',\n    },\n    infoText: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        fontSize: important(theme.toolbar.fontSize),\n        marginLeft: important(12),\n        height: theme.toolbar.size,\n    },\n    extraInfoSpan: {\n        marginRight: important(8),\n        marginLeft: important(8),\n        opacity: 0.8,\n    },\n    selectionSizeText: {\n        color: theme.colors.textActive,\n    },\n    hiddenCountText: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectSearchString } from '../../redux/selectors';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDebounce } from '../../util/hooks-helpers';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarSearchProps {}\n\nexport const ToolbarSearch: React.FC<ToolbarSearchProps> = React.memo(() => {\n    const intl = useIntl();\n    const searchPlaceholderString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.Toolbar, 'searchPlaceholder'),\n        defaultMessage: 'Search',\n    });\n\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const searchInputRef = useRef<HTMLInputElement>();\n\n    const dispatch = useDispatch();\n    const reduxSearchString = useSelector(selectSearchString);\n\n    const [localSearchString, setLocalSearchString] = useState(reduxSearchString);\n    const [debouncedLocalSearchString] = useDebounce(localSearchString, 300);\n    const [showLoadingIndicator, setShowLoadingIndicator] = useState(false);\n\n    useEffect(() => {\n        dispatch(\n            reduxActions.setFocusSearchInput(() => {\n                if (searchInputRef.current) searchInputRef.current.focus();\n            })\n        );\n        return () => {\n            dispatch(reduxActions.setFocusSearchInput(null));\n        };\n    }, [dispatch]);\n\n    useEffect(() => {\n        setShowLoadingIndicator(false);\n        dispatch(reduxActions.setSearchString(debouncedLocalSearchString));\n    }, [debouncedLocalSearchString, dispatch]);\n\n    const handleChange = useCallback((event: React.FormEvent<HTMLInputElement>) => {\n        setShowLoadingIndicator(true);\n        setLocalSearchString(event.currentTarget.value);\n    }, []);\n    const handleKeyUp = useCallback(\n        (event: React.KeyboardEvent<HTMLInputElement>) => {\n            // Remove focus from the search input field when user presses escape.\n            // Note: We use KeyUp instead of KeyPress because some browser plugins can\n            //       intercept KeyPress events with Escape key.\n            //       @see https://stackoverflow.com/a/37461974\n            if (event.key === 'Escape') {\n                setLocalSearchString('');\n                dispatch(reduxActions.setSearchString(''));\n                if (searchInputRef.current) searchInputRef.current.blur();\n            }\n        },\n        [dispatch]\n    );\n\n    return (\n        <TextField\n            className={classes.searchFieldContainer}\n            size=\"small\"\n            variant=\"outlined\"\n            value={localSearchString}\n            placeholder={searchPlaceholderString}\n            onChange={handleChange as any}\n            inputRef={searchInputRef}\n            InputProps={{\n                onKeyUp: handleKeyUp,\n                startAdornment: (\n                    <InputAdornment className={classes.searchIcon} position=\"start\">\n                        <ChonkyIcon\n                            icon={showLoadingIndicator ? ChonkyIconName.loading : ChonkyIconName.search}\n                            spin={showLoadingIndicator}\n                        />\n                    </InputAdornment>\n                ),\n                className: classes.searchFieldInput,\n            }}\n            inputProps={{ className: classes.searchFieldInputInner }}\n        />\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    searchFieldContainer: {\n        height: theme.toolbar.size,\n        width: 150,\n    },\n    searchIcon: {\n        fontSize: '0.9em',\n        opacity: 0.75,\n    },\n    searchFieldInput: {\n        lineHeight: important(0),\n        padding: important(0),\n        margin: important(0),\n        fontSize: important(theme.toolbar.fontSize),\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 4,\n        paddingLeft: important(8),\n        marginTop: 2,\n    },\n    searchFieldInputInner: {\n        lineHeight: important(`${theme.toolbar.size - 4}px`),\n        fontSize: important(theme.toolbar.fontSize),\n        height: important(theme.toolbar.size - 4),\n        padding: important([0, 8, 0, 0]),\n        margin: important(0),\n        '-webkit-appearance': 'none',\n    },\n}));\n","import React, { ReactElement, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectToolbarItems } from '../../redux/selectors';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { SmartToolbarButton } from './ToolbarButton';\nimport { ToolbarDropdown } from './ToolbarDropdown';\nimport { ToolbarInfo } from './ToolbarInfo';\nimport { ToolbarSearch } from './ToolbarSearch';\n\nexport interface FileToolbarProps {}\n\nexport const FileToolbar: React.FC<FileToolbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const toolbarItems = useSelector(selectToolbarItems);\n\n    const toolbarItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < toolbarItems.length; ++i) {\n            const item = toolbarItems[i];\n\n            const key = `toolbar-item-${typeof item === 'string' ? item : item.name}`;\n            const component =\n                typeof item === 'string' ? (\n                    <SmartToolbarButton key={key} fileActionId={item} />\n                ) : (\n                    <ToolbarDropdown\n                        key={key}\n                        name={item.name}\n                        fileActionIds={item.fileActionIds}\n                    />\n                );\n            components.push(component);\n        }\n        return components;\n    }, [toolbarItems]);\n\n    return (\n        <div className={classes.toolbarWrapper}>\n            <div className={classes.toolbarContainer}>\n                <div className={classes.toolbarLeft}>\n                    <ToolbarSearch />\n                    <ToolbarInfo />\n                </div>\n                <div className={classes.toolbarRight}>{toolbarItemComponents}</div>\n            </div>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    toolbarWrapper: {},\n    toolbarContainer: {\n        flexWrap: 'wrap-reverse',\n        display: 'flex',\n    },\n    toolbarLeft: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        flexGrow: 10000,\n        display: 'flex',\n    },\n    toolbarLeftFiller: {\n        flexGrow: 10000,\n    },\n    toolbarRight: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        display: 'flex',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useContext } from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileListEmptyProps {\n    width: number;\n    height: number;\n}\n\nexport const FileListEmpty: React.FC<FileListEmptyProps> = props => {\n    const { width, height } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const style: CSSProperties = {\n        width,\n        height,\n    };\n\n    const intl = useIntl();\n    const emptyString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.FileList, 'nothingToShow'),\n        defaultMessage: 'Nothing to show',\n    });\n\n    return (\n        <div className={classes.fileListEmpty} style={style}>\n            <div className={classes.fileListEmptyContent}>\n                <ChonkyIcon icon={ChonkyIconName.folderOpen} />\n                &nbsp; {emptyString}\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileListEmpty: {\n        color: theme.palette.text.disabled,\n        position: 'relative',\n        textAlign: 'center',\n        fontSize: '1.2em',\n    },\n    fileListEmptyContent: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        left: '50%',\n        top: '50%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { selectDoubleClickDelay } from '../../redux/selectors';\nimport {\n    KeyboardClickEvent,\n    KeyboardClickEventHandler,\n    MouseClickEvent,\n    MouseClickEventHandler,\n} from './ClickableWrapper';\n\nexport const useClickHandler = (\n    onSingleClick: Nilable<MouseClickEventHandler>,\n    onDoubleClick: Nilable<MouseClickEventHandler>\n) => {\n    const doubleClickDelay = useSelector(selectDoubleClickDelay);\n\n    const counter = useRef({\n        clickCount: 0,\n        clickTimeout: null as Nullable<number>,\n    });\n\n    return useCallback(\n        (event: React.MouseEvent) => {\n            const mouseClickEvent: MouseClickEvent = {\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey || event.metaKey,\n                shiftKey: event.shiftKey,\n\n            };\n\n            counter.current.clickCount++;\n            if (counter.current.clickCount === 1) {\n                if (onSingleClick) {\n                    event.preventDefault();\n                    onSingleClick(mouseClickEvent);\n                }\n                counter.current.clickCount = 1;\n                // @ts-ignore\n                counter.current.clickTimeout = setTimeout(\n                    () => (counter.current.clickCount = 0),\n                    doubleClickDelay\n                );\n            } else if (counter.current.clickCount === 2) {\n                if (onDoubleClick) {\n                    event.preventDefault();\n                    onDoubleClick(mouseClickEvent);\n                }\n                if (typeof counter.current.clickTimeout === 'number') {\n                    clearTimeout(counter.current.clickTimeout);\n                    counter.current.clickTimeout = null;\n                    counter.current.clickCount = 0;\n                }\n            }\n        },\n        [doubleClickDelay, onSingleClick, onDoubleClick, counter]\n    );\n};\n\nexport const useKeyDownHandler = (onKeyboardClick?: KeyboardClickEventHandler) => {\n    return useCallback(\n        (event: React.KeyboardEvent) => {\n            if (!onKeyboardClick) return;\n\n            const keyboardClickEvent: KeyboardClickEvent = {\n                enterKey: event.nativeEvent.code === 'Enter',\n                spaceKey: event.nativeEvent.code === 'Space',\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey,\n                shiftKey: event.shiftKey,\n            };\n\n            if (keyboardClickEvent.spaceKey || keyboardClickEvent.enterKey) {\n                event.preventDefault();\n                event.stopPropagation();\n                onKeyboardClick(keyboardClickEvent);\n            }\n        },\n        [onKeyboardClick]\n    );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback } from 'react';\nimport { AnyObjectWithStringKeys } from 'tsdef';\n\nimport { useClickHandler, useKeyDownHandler } from './ClickableWrapper-hooks';\n\nexport interface MouseClickEvent {\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type MouseClickEventHandler = (event: MouseClickEvent) => void;\n\nexport interface KeyboardClickEvent {\n    enterKey: boolean;\n    spaceKey: boolean;\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type KeyboardClickEventHandler = (event: KeyboardClickEvent) => void;\n\nexport interface ClickableWrapperProps {\n    wrapperTag: any;\n    passthroughProps?: any;\n\n    onSingleClick?: MouseClickEventHandler;\n    onDoubleClick?: MouseClickEventHandler;\n    onKeyboardClick?: KeyboardClickEventHandler;\n    setFocused?: (focused: boolean) => void;\n}\n\nexport const ClickableWrapper: React.FC<ClickableWrapperProps> = props => {\n    const {\n        children,\n        wrapperTag: WrapperTag,\n        passthroughProps,\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n        setFocused,\n    } = props;\n\n    const handleClick = useClickHandler(onSingleClick, onDoubleClick);\n    const handleKeyDown = useKeyDownHandler(onKeyboardClick);\n\n    const compProps: AnyObjectWithStringKeys = {\n        onFocus: useCallback(() => setFocused && setFocused(true), [setFocused]),\n        onBlur: useCallback(() => setFocused && setFocused(false), [setFocused]),\n    };\n\n    if (onSingleClick || onDoubleClick || onKeyboardClick) {\n        compProps.onClick = handleClick;\n        compProps.onKeyDown = handleKeyDown;\n        compProps.tabIndex = 0;\n    }\n\n    const mergedProps = { ...compProps, ...passthroughProps };\n    return <WrapperTag {...mergedProps}>{children}</WrapperTag>;\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { FileData } from '../../types/file.types';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileNameComponent, useModifierIconComponents } from './FileEntry-hooks';\n\nexport interface FileEntryNameProps {\n    file: Nullable<FileData>;\n    className?: string;\n}\n\nexport const FileEntryName: React.FC<FileEntryNameProps> = React.memo(({ file, className }) => {\n    const modifierIconComponents = useModifierIconComponents(file);\n    const fileNameComponent = useFileNameComponent(file);\n\n    const classes = useStyles();\n    return (\n        <span className={className} title={file ? file.name : undefined}>\n            {modifierIconComponents.length > 0 && (\n                <span className={classes.modifierIcons}>{modifierIconComponents}</span>\n            )}\n            {fileNameComponent}\n        </span>\n    );\n});\nFileEntryName.displayName = 'FileEntryName';\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    modifierIcons: {\n        color: theme.palette.text.hint,\n        position: 'relative',\n        fontSize: '0.775em',\n        paddingRight: 5,\n    },\n}));\n","import React, { useContext } from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const CompactEntry: React.FC<FileEntryProps> = React.memo(\n    // @ts-ignore\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n\n        const classes = useStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={entryState.icon}\n                        spin={entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div className={classes.listFileEntryDescription}>\n                    <div\n                        className={classes.listFileEntryName}\n                        title={file ? file.name : undefined}\n                    >\n                        <FileEntryName file={file} />\n                    </div>\n                    <div className={classes.listFileEntryProperties}>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileModDateString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={5} maxLength={15} />\n                            )}\n                        </div>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileSizeString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={10} maxLength={20} />\n                            )}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"chonky-file-entry-outline\"></div>\n                <div className=\"chonky-file-entry-selection\"></div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        fontSize: theme.listFileEntry.fontSize,\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntryIcon: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: 'inset rgba(255, 255, 255, 0.5) 0 0 0 999px',\n        borderRadius: theme.listFileEntry.iconBorderRadius,\n        fontSize: theme.listFileEntry.iconFontSize,\n        color: '#fff',\n        padding: 8,\n    },\n    listFileEntryDescription: {\n        flexDirection: 'column',\n        display: 'flex',\n        flexGrow: 1,\n    },\n    listFileEntryName: {\n        padding: [0, 8, 4, 8],\n    },\n    listFileEntryProperties: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        flexDirection: 'row',\n        display: 'flex',\n    },\n    listFileEntryProperty: {\n        padding: [0, 8],\n        opacity: 0.4,\n    },\n}));\n","import React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { useDndHoverOpen, useFileEntryDnD } from '../../util/dnd';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileEntryProps {\n    file: Nullable<FileData>;\n    children: (dndState: DndEntryState) => React.ReactElement;\n}\n\nexport const DnDFileEntry = React.memo(({ file, children }: DnDFileEntryProps) => {\n    const { drop, drag, dndState } = useFileEntryDnD(file);\n\n    useDndHoverOpen(file, dndState);\n    const classes = useStyles();\n    return (\n        <div ref={drop} className={classes.fillParent}>\n            <div\n                ref={FileHelper.isDraggable(file) ? drag : null}\n                className={classes.fillParent}\n            >\n                {children(dndState)}\n            </div>\n        </div>\n    );\n});\n\nexport const useStyles = makeLocalChonkyStyles(() => ({\n    fillParent: {\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport c from 'classnames';\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileThumbnailProps {\n    className: string;\n    thumbnailUrl: Nullable<string>;\n}\n\nexport const FileThumbnail: React.FC<FileThumbnailProps> = React.memo(props => {\n    const { className, thumbnailUrl } = props;\n\n    const thumbnailStyle: React.CSSProperties = thumbnailUrl ? { backgroundImage: `url('${thumbnailUrl}')` } : {};\n\n    const classes = useStyles();\n    return <div className={c([className, classes.fileThumbnail])} style={thumbnailStyle} />;\n});\nFileThumbnail.displayName = 'FileThumbnail';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileThumbnail: {\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n        backgroundSize: 'contain',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from './FileEntry-hooks';\n\nexport interface DnDIndicatorProps {\n    className: string;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryDndIndicator: React.FC<DnDIndicatorProps> = React.memo(props => {\n    const { className: externalClassName, dndState } = props;\n    const dndIconName = useDndIcon(dndState);\n    const classes = useStyles(dndState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    if (!dndIconName) return null;\n    const className = c({\n        [classes.dndIndicator]: true,\n        [externalClassName]: true,\n    });\n    return (\n        <div className={className}>\n            <ChonkyIcon icon={dndIconName} />\n        </div>\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : '#000',\n        boxSizing: 'border-box',\n        position: 'absolute',\n        fontSize: '1.2em',\n        opacity: 0.6,\n        padding: 6,\n        '&:before': {\n            borderBottom: '50px solid transparent',\n            borderLeft: '50px solid #fff',\n            position: 'absolute',\n            content: '\"\"',\n            zIndex: -1,\n            left: 0,\n            top: 0,\n        },\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useEffect } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { FileThumbnail } from './FileThumbnail';\nimport { GridEntryDndIndicator } from './GridEntryDndIndicator';\n\nexport type FileEntryState = {\n    childrenCount: Nullable<number>;\n    color: string;\n    icon: ChonkyIconName | string;\n    thumbnailUrl: Nullable<string>;\n    iconSpin: boolean;\n    selected: boolean;\n    focused: boolean;\n};\n\nexport interface FileEntryPreviewProps {\n    className?: string;\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryPreviewFolder: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const folderClasses = useFolderStyles(entryState);\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const className = c({\n        [folderClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <div className={folderClasses.folderBackSideMid}>\n                <div className={folderClasses.folderBackSideTop} />\n                <div className={folderClasses.folderFrontSide}>\n                    <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n                    <div className={c([fileClasses.fileIcon, folderClasses.fileIcon])}>{entryState.childrenCount}</div>\n                    <div className={commonClasses.selectionIndicator}></div>\n                    <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n                </div>\n            </div>\n        </div>\n    );\n});\nGridEntryPreviewFolder.displayName = 'GridEntryPreviewFolder';\n\nconst useFolderStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    folderBackSideTop: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopLeftRadius: theme.gridFileEntry.borderRadius,\n        borderTopRightRadius: 10,\n        position: 'absolute',\n        right: '60%',\n        height: 13,\n        top: -10,\n        left: 0,\n        '&:after': {\n            borderRightColor: theme.palette.background.paper,\n            borderTopColor: theme.palette.background.paper,\n            borderBottomColor: 'transparent',\n            borderLeftColor: 'transparent',\n            borderWidth: [0, 15, 10, 0],\n            borderStyle: 'solid',\n            position: 'absolute',\n            display: 'block',\n            content: '\"\"',\n            right: 0,\n            top: 0,\n        },\n    },\n    folderBackSideMid: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopRightRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    folderFrontSide: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            if (state.selected) shadows.push('inset rgba(0, 153, 255, .65) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.folderFrontColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        overflow: 'hidden',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    fileIcon: {\n        fontSize: important(theme.gridFileEntry.childrenCountSize),\n    },\n}));\n\nexport const GridEntryPreviewFile: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const className = c({\n        [fileClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n            <div className={fileClasses.fileIcon}>\n                <ChonkyIcon icon={entryState.icon} spin={entryState.iconSpin} />\n            </div>\n            <div className={commonClasses.selectionIndicator}></div>\n            <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n        </div>\n    );\n});\nGridEntryPreviewFile.displayName = 'GridEntryPreviewFile';\n\nconst useFileStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.selected) shadows.push('inset rgba(0,153,255, .65) 0 0 0 3px');\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.fileColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    dndIndicator: {\n        zIndex: 14,\n    },\n    fileIcon: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        fontSize: theme.gridFileEntry.iconSize,\n        opacity: (state: FileEntryState) => (state.thumbnailUrl && !state.focused ? 0 : 1),\n        color: (state: FileEntryState) =>\n            state.focused ? theme.gridFileEntry.iconColorFocused : theme.gridFileEntry.iconColor,\n        position: 'absolute',\n        left: '50%',\n        zIndex: 12,\n        top: '50%',\n    },\n    thumbnail: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        zIndex: 6,\n        bottom: 5,\n        right: 5,\n        left: 5,\n        top: 5,\n    },\n}));\n\nexport const useCommonEntryStyles = makeLocalChonkyStyles(() => ({\n    selectionIndicator: {\n        display: (state: FileEntryState) => (state.selected ? 'block' : 'none'),\n        background:\n            'repeating-linear-gradient(' +\n            '45deg,' +\n            'rgba(0,153,255,.14),' +\n            'rgba(0,153,255,.14) 10px,' +\n            'rgba(0,153,255,.25) 0,' +\n            'rgba(0,153,255,.25) 20px' +\n            ')',\n        backgroundColor: 'rgba(0, 153, 255, .14)',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 10,\n    },\n    focusIndicator: {\n        display: (state: FileEntryState) => (state.focused ? 'block' : 'none'),\n        boxShadow: 'inset rgba(0, 0, 0, 1) 0 0 0 2px',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 11,\n    },\n}));\n","import React from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, GridEntryPreviewFile, GridEntryPreviewFolder } from './GridEntryPreview';\n\nexport const GridEntry: React.FC<FileEntryProps> = React.memo(({ file, selected, focused, dndState }) => {\n    const isDirectory = FileHelper.isDirectory(file);\n    const entryState = useFileEntryState(file, selected, focused);\n\n    const classes = useFileEntryStyles(entryState);\n    const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n    const entryClassName = c({\n        [classes.gridFileEntry]: true,\n    });\n    return (\n        <div className={entryClassName} {...fileEntryHtmlProps}>\n            {isDirectory ? (\n                <GridEntryPreviewFolder\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            ) : (\n                <GridEntryPreviewFile\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            )}\n            <div className={classes.gridFileEntryNameContainer}>\n                <FileEntryName className={classes.gridFileEntryName} file={file} />\n            </div>\n        </div>\n    );\n});\nGridEntry.displayName = 'GridEntry';\n\nconst useFileEntryStyles = makeLocalChonkyStyles(theme => ({\n    gridFileEntry: {\n        flexDirection: 'column',\n        display: 'flex',\n        height: '100%',\n    },\n    gridFileEntryPreview: {\n        flexGrow: 1,\n    },\n    gridFileEntryNameContainer: {\n        fontSize: theme.gridFileEntry.fontSize,\n        wordBreak: 'break-word',\n        textAlign: 'center',\n        paddingTop: 5,\n    },\n    gridFileEntryName: {\n        backgroundColor: (state: FileEntryState) => (state.selected ? 'rgba(0,153,255, .25)' : 'transparent'),\n        textDecoration: (state: FileEntryState) => (state.focused ? 'underline' : 'none'),\n        borderRadius: 3,\n        padding: [2, 4],\n    },\n}));\n","import React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport {\n    useDndIcon,\n    useFileEntryHtmlProps,\n    useFileEntryState,\n} from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, useCommonEntryStyles } from './GridEntryPreview';\n\ninterface StyleState {\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const ListEntry: React.FC<FileEntryProps> = React.memo(\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n        const dndIconName = useDndIcon(dndState);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n        const styleState = useMemo<StyleState>(\n            () => ({\n                entryState,\n                dndState,\n            }),\n            [dndState, entryState]\n        );\n        const classes = useStyles(styleState);\n        const commonClasses = useCommonEntryStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={commonClasses.focusIndicator}></div>\n                <div\n                    className={c([\n                        commonClasses.selectionIndicator,\n                        classes.listFileEntrySelection,\n                    ])}\n                ></div>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={dndIconName ?? entryState.icon}\n                        spin={dndIconName ? false : entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div\n                    className={classes.listFileEntryName}\n                    title={file ? file.name : undefined}\n                >\n                    <FileEntryName file={file} />\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileModDateString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={5} maxLength={15} />\n                    )}\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileSizeString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={10} maxLength={20} />\n                    )}\n                </div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        boxShadow: `inset ${theme.palette.divider} 0 -1px 0`,\n        fontSize: theme.listFileEntry.fontSize,\n        color: ({ dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : 'inherit',\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntrySelection: {\n        opacity: 0.6,\n    },\n    listFileEntryIcon: {\n        color: ({ entryState, dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : entryState.color,\n        fontSize: theme.listFileEntry.iconFontSize,\n        boxSizing: 'border-box',\n        padding: [2, 4],\n        zIndex: 20,\n    },\n    listFileEntryName: {\n        textOverflow: 'ellipsis',\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '1 1 300px',\n        paddingLeft: 8,\n        zIndex: 20,\n    },\n    listFileEntryProperty: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '0 1 150px',\n        padding: [2, 8],\n        zIndex: 20,\n    },\n}));\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileData, selectIsDnDDisabled, selectIsFileSelected } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { ClickableWrapper, ClickableWrapperProps } from '../internal/ClickableWrapper';\nimport { CompactEntry } from './CompactEntry';\nimport { DnDFileEntry } from './DnDFileEntry';\nimport { useFileClickHandlers } from './FileEntry-hooks';\nimport { GridEntry } from './GridEntry';\nimport { ListEntry } from './ListEntry';\n\nexport interface SmartFileEntryProps {\n    fileId: Nullable<string>;\n    displayIndex: number;\n    fileViewMode: FileViewMode;\n}\n\nconst disabledDndState: DndEntryState = {\n    dndIsDragging: false,\n    dndIsOver: false,\n    dndCanDrop: false,\n};\n\nexport const SmartFileEntry: React.FC<SmartFileEntryProps> = React.memo(({ fileId, displayIndex, fileViewMode }) => {\n    const classes = useStyles();\n\n    // Basic properties\n    const file = useParamSelector(selectFileData, fileId);\n    const selected = useParamSelector(selectIsFileSelected, fileId);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n\n    // Clickable wrapper properties\n    const fileClickHandlers = useFileClickHandlers(file, displayIndex);\n    const [focused, setFocused] = useState(false);\n    const clickableWrapperProps: ClickableWrapperProps = {\n        wrapperTag: 'div',\n        passthroughProps: { className: classes.fileEntryClickableWrapper },\n        ...(FileHelper.isClickable(file) ? fileClickHandlers : undefined),\n        setFocused,\n    };\n\n    // File entry properties\n    const fileEntryProps: Omit<FileEntryProps, 'dndState'> = {\n        file,\n        selected,\n        focused,\n    };\n\n    let EntryComponent: React.FC<FileEntryProps>;\n    if (fileViewMode === FileViewMode.List) EntryComponent = ListEntry;\n    else if (fileViewMode === FileViewMode.Compact) EntryComponent = CompactEntry;\n    else EntryComponent = GridEntry;\n\n    return dndDisabled ? (\n        <ClickableWrapper {...clickableWrapperProps}>\n            <EntryComponent {...fileEntryProps} dndState={disabledDndState} />\n        </ClickableWrapper>\n    ) : (\n        <DnDFileEntry file={file}>\n            {dndState => (\n                <ClickableWrapper {...clickableWrapperProps}>\n                    <EntryComponent {...fileEntryProps} dndState={dndState} />\n                </ClickableWrapper>\n            )}\n        </DnDFileEntry>\n    );\n});\nSmartFileEntry.displayName = 'SmartFileEntry';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileEntryClickableWrapper: {\n        // We disable default browser outline because Chonky provides its own outline\n        // (which doesn't compromise accessibility, hopefully)\n        outline: 'none !important',\n        position: 'relative',\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { VariableSizeGrid } from 'react-window';\n\nimport { ChonkyActions } from '../../action-definitions';\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewConfigGrid } from '../../types/file-view.types';\nimport { RootState } from '../../types/redux.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeGlobalChonkyStyles, useIsMobileBreakpoint } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListGridProps {\n    width: number;\n    height: number;\n}\n\ninterface GridConfig {\n    rowCount: number;\n    columnCount: number;\n    gutter: number;\n    rowHeight: number;\n    columnWidth: number;\n}\n\nexport const isMobileDevice = () => {\n    // noinspection JSDeprecatedSymbols\n    return typeof window.orientation !== 'undefined' || navigator.userAgent.indexOf('IEMobile') !== -1;\n};\n\nexport const getGridConfig = (\n    width: number,\n    fileCount: number,\n    viewConfig: FileViewConfigGrid,\n    isMobileBreakpoint: boolean\n): GridConfig => {\n    const gutter = isMobileBreakpoint ? 5 : 8;\n    const scrollbar = isMobileDevice() ? 0 : 18;\n\n    let columnCount: number;\n    let columnWidth: number;\n    if (isMobileBreakpoint) {\n        columnCount = 2;\n        columnWidth = (width - gutter - scrollbar) / columnCount;\n    } else {\n        columnWidth = viewConfig.entryWidth;\n        columnCount = Math.max(1, Math.floor((width - scrollbar) / (columnWidth + gutter)));\n    }\n\n    const rowCount = Math.ceil(fileCount / columnCount);\n\n    return {\n        rowCount,\n        columnCount,\n        gutter,\n        rowHeight: viewConfig.entryHeight,\n        columnWidth,\n    };\n};\n\nexport const GridContainer: React.FC<FileListGridProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig) as FileViewConfigGrid;\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const fileCount = useMemo(() => displayFileIds.length, [displayFileIds]);\n\n    const gridRef = useRef<VariableSizeGrid>();\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n\n    // Whenever the grid config changes at runtime, we call a method on the\n    // `VariableSizeGrid` handle to reset column width/row height cache.\n    // !!! Note that we deliberately update the `gridRef` firsts and update the React\n    //     state AFTER that. This is needed to avoid file entries jumping up/down.\n    const [gridConfig, setGridConfig] = useState(getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint));\n    const gridConfigRef = useRef(gridConfig);\n    useEffect(() => {\n        const oldConf = gridConfigRef.current;\n        const newConf = getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint);\n\n        gridConfigRef.current = newConf;\n        if (gridRef.current) {\n            if (oldConf.rowCount !== newConf.rowCount) {\n                gridRef.current.resetAfterRowIndex(Math.min(oldConf.rowCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnCount !== newConf.columnCount) {\n                gridRef.current.resetAfterColumnIndex(Math.min(oldConf.columnCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnWidth !== newConf.columnWidth) {\n                gridRef.current.resetAfterIndices({ columnIndex: 0, rowIndex: 0 });\n            }\n        }\n\n        setGridConfig(newConf);\n    }, [setGridConfig, gridConfigRef, isMobileBreakpoint, width, viewConfig, fileCount]);\n\n    const sizers = useMemo(() => {\n        const gc = gridConfigRef;\n        return {\n            getColumnWidth: (index: number) =>\n                gc.current.columnWidth! + (index === gc.current.columnCount - 1 ? 0 : gc.current.gutter),\n            getRowHeight: (index: number) =>\n                gc.current.rowHeight + (index === gc.current.rowCount - 1 ? 0 : gc.current.gutter),\n        };\n    }, [gridConfigRef]);\n\n    const displayFileIdsRef = useInstanceVariable(useSelector(selectors.getDisplayFileIds));\n    const getItemKey = useCallback(\n        (data: { columnIndex: number; rowIndex: number; data: any }) => {\n            const index = data.rowIndex * gridConfigRef.current.columnCount + data.columnIndex;\n\n            return displayFileIdsRef.current[index] ?? `loading-file-${index}`;\n        },\n        [gridConfigRef, displayFileIdsRef]\n    );\n\n    const cellRenderer = useCallback(\n        (data: { rowIndex: number; columnIndex: number; style: CSSProperties }) => {\n            const gc = gridConfigRef;\n            const index = data.rowIndex * gc.current.columnCount + data.columnIndex;\n            const fileId = displayFileIds[index];\n            if (displayFileIds[index] === undefined) return null;\n\n            const styleWithGutter: CSSProperties = {\n                ...data.style,\n                paddingRight: data.columnIndex === gc.current.columnCount - 1 ? 0 : gc.current.gutter,\n                paddingBottom: data.rowIndex === gc.current.rowCount - 1 ? 0 : gc.current.gutter,\n                boxSizing: 'border-box',\n            };\n\n            return (\n                <div style={styleWithGutter}>\n                    <SmartFileEntry fileId={fileId ?? null} displayIndex={index} fileViewMode={viewConfig.mode} />\n                </div>\n            );\n        },\n        [displayFileIds, viewConfig.mode]\n    );\n\n    const classes = useStyles();\n    const gridComponent = useMemo(() => {\n        return (\n            <VariableSizeGrid\n                ref={gridRef as any}\n                className={classes.gridContainer}\n                estimatedRowHeight={gridConfig.rowHeight + gridConfig.gutter}\n                rowHeight={sizers.getRowHeight}\n                estimatedColumnWidth={gridConfig.columnWidth + gridConfig.gutter}\n                columnWidth={sizers.getColumnWidth}\n                columnCount={gridConfig.columnCount}\n                height={height}\n                rowCount={gridConfig.rowCount}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {cellRenderer}\n            </VariableSizeGrid>\n        );\n    }, [\n        classes.gridContainer,\n        gridConfig.rowHeight,\n        gridConfig.gutter,\n        gridConfig.columnWidth,\n        gridConfig.columnCount,\n        gridConfig.rowCount,\n        sizers.getRowHeight,\n        sizers.getColumnWidth,\n        height,\n        width,\n        getItemKey,\n        cellRenderer,\n    ]);\n\n    return gridComponent;\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    gridContainer: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useMemo, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FixedSizeList } from 'react-window';\n\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListListProps {\n    width: number;\n    height: number;\n}\n\nexport const ListContainer: React.FC<FileListListProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const listRef = useRef<FixedSizeList>();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const displayFileIdsRef = useInstanceVariable(displayFileIds);\n    const getItemKey = useCallback(\n        (index: number) => displayFileIdsRef.current[index] ?? `loading-file-${index}`,\n        [displayFileIdsRef]\n    );\n\n    const classes = useStyles();\n    const listComponent = useMemo(() => {\n        // When entry size is null, we use List view\n        const rowRenderer = (data: { index: number; style: CSSProperties }) => {\n            return (\n                <div style={data.style}>\n                    <SmartFileEntry\n                        fileId={displayFileIds[data.index] ?? null}\n                        displayIndex={data.index}\n                        fileViewMode={FileViewMode.List}\n                    />\n                </div>\n            );\n        };\n\n        return (\n            <FixedSizeList\n                ref={listRef as any}\n                className={classes.listContainer}\n                itemSize={viewConfig.entryHeight}\n                height={height}\n                itemCount={displayFileIds.length}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {rowRenderer}\n            </FixedSizeList>\n        );\n    }, [\n        classes.listContainer,\n        viewConfig.entryHeight,\n        height,\n        displayFileIds,\n        width,\n        getItemKey,\n    ]);\n\n    return listComponent;\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listContainer: {\n        borderTop: `solid 1px ${theme.palette.divider}`,\n    },\n}));\n","import React, { UIEvent, useCallback, useContext, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectCurrentFolder, selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    c, getStripeGradient, makeGlobalChonkyStyles, makeLocalChonkyStyles\n} from '../../util/styles';\nimport { FileListEmpty } from './FileListEmpty';\nimport { GridContainer } from './GridContainer';\nimport { ListContainer } from './ListContainer';\n\nexport interface FileListProps {\n    onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n}\n\ninterface StyleState {\n    dndCanDrop: boolean;\n    dndIsOverCurrent: boolean;\n}\n\nexport const FileList: React.FC<FileListProps> = React.memo((props: FileListProps) => {\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const currentFolder = useSelector(selectCurrentFolder);\n    const { drop, dndCanDrop, dndIsOverCurrent } = useFileDrop({ file: currentFolder });\n    const styleState = useMemo<StyleState>(() => ({ dndCanDrop, dndIsOverCurrent }), [dndCanDrop, dndIsOverCurrent]);\n\n    const localClasses = useLocalStyles(styleState);\n    const classes = useStyles(viewConfig);\n    const { onScroll } = props;\n\n    // In Chonky v0.x, this field was user-configurable. In Chonky v1.x+, we hardcode\n    // this to `true` to simplify configuration. Users can just wrap Chonky in their\n    // own `div` if they want to have finer control over the height.\n    const fillParentContainer = true;\n\n    const listRenderer = useCallback(\n        ({ width, height }: { width: number; height: number }) => {\n            if (displayFileIds.length === 0) {\n                return <FileListEmpty width={width} height={viewConfig.entryHeight} />;\n            } else if (viewConfig.mode === FileViewMode.List) {\n                return <ListContainer width={width} height={height} />;\n            } else {\n                return <GridContainer width={width} height={height} />;\n            }\n        },\n        [displayFileIds, viewConfig]\n    );\n\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    return (\n        <div onScroll={onScroll} ref={drop} className={c([classes.fileListWrapper, localClasses.fileListWrapper])} role=\"list\">\n            <div className={localClasses.dndDropZone}>\n                <div className={localClasses.dndDropZoneIcon}>\n                    <ChonkyIcon icon={dndCanDrop ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop} />\n                </div>\n            </div>\n            <AutoSizer disableHeight={!fillParentContainer}>{listRenderer}</AutoSizer>\n        </div>\n    );\n});\nFileList.displayName = 'FileList';\n\nconst useLocalStyles = makeLocalChonkyStyles(theme => ({\n    fileListWrapper: {\n        minHeight: ChonkyActions.EnableGridView.fileViewConfig.entryHeight + 2,\n        background: (state: StyleState) =>\n            state.dndIsOverCurrent && state.dndCanDrop\n                ? state.dndCanDrop\n                    ? getStripeGradient(theme.dnd.fileListCanDropMaskOne, theme.dnd.fileListCanDropMaskTwo)\n                    : getStripeGradient(theme.dnd.fileListCannotDropMaskOne, theme.dnd.fileListCannotDropMaskTwo)\n                : 'none',\n    },\n    dndDropZone: {\n        display: (state: StyleState) =>\n            // When we cannot drop, we don't show an indicator at all\n            state.dndIsOverCurrent && state.dndCanDrop ? 'block' : 'none',\n        borderRadius: theme.gridFileEntry.borderRadius,\n        pointerEvents: 'none',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 2,\n    },\n    dndDropZoneIcon: {\n        backgroundColor: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask),\n        color: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor),\n        borderRadius: theme.gridFileEntry.borderRadius,\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        textAlign: 'center',\n        lineHeight: '60px',\n        fontSize: '2em',\n        left: '50%',\n        height: 60,\n        top: '50%',\n        width: 60,\n    },\n}));\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileListWrapper: {\n        height: '100%',\n        maxHeight: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { ReactElement, useEffect, useMemo } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Menu from '@material-ui/core/Menu';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuConfig, selectContextMenuItems } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuDismisser } from './FileContextMenu-hooks';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport interface FileContextMenuProps {}\n\nexport const FileContextMenu: React.FC<FileContextMenuProps> = React.memo(() => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(reduxActions.setContextMenuMounted(true));\n        return () => {\n            dispatch(reduxActions.setContextMenuMounted(false));\n        };\n    }, [dispatch]);\n\n    const intl = useIntl();\n    const browserMenuShortcutString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.FileContextMenu, 'browserMenuShortcut'),\n            defaultMessage: 'Browser menu: {shortcut}',\n        },\n        { shortcut: <strong>Alt + Right Click</strong> }\n    );\n\n    const contextMenuConfig = useSelector(selectContextMenuConfig);\n    const contextMenuItems = useSelector(selectContextMenuItems);\n\n    const hideContextMenu = useContextMenuDismisser();\n    const contextMenuItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < contextMenuItems.length; ++i) {\n            const item = contextMenuItems[i];\n\n            if (typeof item === 'string') {\n                components.push(\n                    <SmartToolbarDropdownButton\n                        key={`context-menu-item-${item}`}\n                        fileActionId={item}\n                        onClickFollowUp={hideContextMenu}\n                    />\n                );\n            } else {\n                item.fileActionIds.map(id =>\n                    components.push(\n                        <SmartToolbarDropdownButton\n                            key={`context-menu-item-${item.name}-${id}`}\n                            fileActionId={id}\n                            onClickFollowUp={hideContextMenu}\n                        />\n                    )\n                );\n            }\n        }\n        return components;\n    }, [contextMenuItems, hideContextMenu]);\n\n    const anchorPosition = useMemo(\n        () => (contextMenuConfig ? { top: contextMenuConfig.mouseY, left: contextMenuConfig.mouseX } : undefined),\n        [contextMenuConfig]\n    );\n\n    const classes = useStyles();\n    return (\n        <Menu\n            elevation={2}\n            disablePortal\n            onClose={hideContextMenu}\n            transitionDuration={150}\n            open={!!contextMenuConfig}\n            anchorPosition={anchorPosition}\n            anchorReference=\"anchorPosition\"\n            classes={{ list: classes.contextMenuList }}\n        >\n            {contextMenuItemComponents}\n            <ListSubheader component=\"div\" className={classes.browserMenuTooltip}>\n                {browserMenuShortcutString}\n            </ListSubheader>\n        </Menu>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    contextMenuList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    browserMenuTooltip: {\n        lineHeight: important('30px'),\n        fontSize: important('0.7em'),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { FileList } from '../file-list/FileList';\nimport { FileBrowser } from './FileBrowser';\nimport { FileContextMenu } from './FileContextMenu';\nimport { FileNavbar } from './FileNavbar';\nimport { FileToolbar } from './FileToolbar';\n\nexport const FullFileBrowser = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        const { onScroll } = props\n        return (\n            <FileBrowser ref={ref} {...props}>\n                <FileNavbar />\n                <FileToolbar />\n                <FileList onScroll={onScroll}/>\n                <FileContextMenu/>\n            </FileBrowser>\n        );\n    })\n);\nFullFileBrowser.displayName = 'FullFileBrowser';\n","/**\n *\n */\n\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { FileActionData } from '../types/action-handler.types';\nimport { FileAction } from '../types/action.types';\nimport { FileArray, FileData } from '../types/file.types';\nimport { FileHelper } from '../util/file-helper';\n\nexport interface CustomFileData extends FileData {\n    parentId?: string;\n    childrenIds?: string[];\n}\nexport interface CustomFileMap<FT extends CustomFileData> {\n    [fileId: string]: FT;\n}\nexport interface FileMapParams<FT extends CustomFileData> {\n    baseFileMap: CustomFileMap<FT>;\n    initialFolderId: string;\n}\n\nexport const useFolderChain = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n\n        const folderChain = [currentFolder];\n\n        let parentId = currentFolder.parentId;\n        while (parentId) {\n            const parentFile = fileMap[parentId];\n            if (parentFile) {\n                folderChain.unshift(parentFile);\n                parentId = parentFile.parentId;\n            } else {\n                break;\n            }\n        }\n\n        return folderChain;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFiles = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n        const childrenIds = currentFolder.childrenIds!;\n        const files = childrenIds.map((fileId: string) => fileMap[fileId]);\n        return files;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFileMapMethods = <FT extends CustomFileData>(\n    baseFileMap: CustomFileMap<FT>,\n    initialFolderId: string\n) => {\n    const [fileMap, setFileMap] = useState(baseFileMap);\n    const [currentFolderId, setCurrentFolderId] = useState(initialFolderId);\n    const resetFileMap = useCallback(() => {\n        setFileMap(baseFileMap);\n        setCurrentFolderId(initialFolderId);\n    }, [baseFileMap, initialFolderId]);\n    const moveFiles = useCallback(\n        (files: FT[], source: FT, destination: FT) =>\n            setFileMap(currentFileMap => {\n                const newFileMap = { ...currentFileMap };\n                const moveFileIds = new Set(files.map(f => f.id));\n\n                // Delete files from their source folder.\n                const newSourceChildrenIds = source.childrenIds!.filter(id => !moveFileIds.has(id));\n                newFileMap[source.id] = {\n                    ...source,\n                    childrenIds: newSourceChildrenIds,\n                    childrenCount: newSourceChildrenIds.length,\n                };\n\n                // Add the files to their destination folder.\n                const newDestinationChildrenIds = [...destination.childrenIds!, ...files.map(f => f.id)];\n                newFileMap[destination.id] = {\n                    ...destination,\n                    childrenIds: newDestinationChildrenIds,\n                    childrenCount: newDestinationChildrenIds.length,\n                };\n\n                // Finally, update the parent folder ID on the files from source folder\n                // ID to the destination folder ID.\n                files.forEach(file => {\n                    newFileMap[file.id] = {\n                        ...file,\n                        parentId: destination.id,\n                    };\n                });\n\n                return newFileMap;\n            }),\n        []\n    );\n\n    const methods = useMemo(\n        () => ({\n            setFileMap,\n            setCurrentFolderId,\n            resetFileMap,\n            moveFiles,\n        }),\n        [setFileMap, setCurrentFolderId, resetFileMap, moveFiles]\n    );\n    return {\n        fileMap,\n        currentFolderId,\n        methods,\n    };\n};\nexport type FileMethods = ReturnType<typeof useFileMapMethods>['methods'];\n\nexport const useFileActionHandler = (methods: FileMethods) => {\n    return useCallback(\n        (data: FileActionData<FileAction>) => {\n            if (data.id === ChonkyActions.OpenFiles.id) {\n                const { targetFile, files } = data.payload;\n                const fileToOpen = targetFile ?? files[0];\n                if (fileToOpen && FileHelper.isDirectory(fileToOpen)) {\n                    methods.setCurrentFolderId(fileToOpen.id);\n                }\n            } else if (data.id === ChonkyActions.MoveFiles.id) {\n                methods.moveFiles(data.payload.files, data.payload.source!, data.payload.destination);\n            }\n        },\n        [methods]\n    );\n};\n\nexport const useFileMap = <FT extends CustomFileData = CustomFileData>({\n    baseFileMap,\n    initialFolderId,\n}: FileMapParams<FT>) => {\n    const { fileMap, currentFolderId, methods } = useFileMapMethods(baseFileMap, initialFolderId);\n    const folderChain = useFolderChain(fileMap, currentFolderId);\n    const files = useFiles(fileMap, currentFolderId);\n    const fileActionHandler = useFileActionHandler(methods as FileMethods);\n\n    const data = {\n        fileMap,\n        currentFolderId,\n        folderChain,\n        files,\n    };\n    return { data, methods, fileActionHandler };\n};\n"],"names":["useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","UNINITIALIZED_SENTINEL","useStaticValue","factory","valueRef","useRef","current","useInstanceVariable","ref","Logger","error","args","console","warn","debug","formatBullets","bullets","join","FileHelper","isDirectory","file","isDir","isHidden","isSymlink","isEncrypted","isClickable","isOpenable","openable","isSelectable","selectable","isDraggable","draggable","isDroppable","droppable","isDndOpenable","dndOpenable","getModDate","modDate","undefined","parseDate","maybeDate","Date","message","isNaN","getTime","getChildrenCount","childrenCount","sanitizeInputArray","mode","rawArray","sanitizedFiles","errorMessages","Array","isArray","push","nonObjectFileCount","missingFieldFileCount","seenIds","Set","duplicateIds","i","length","item","id","name","has","add","size","repeatedIdsString","from","errorMessageString","arrayString","itemString","sanitizedArray","OptionIds","ShowHiddenFiles","ShowFoldersFirst","DarkMode","SortOrder","selectInstanceId","state","instanceId","selectExternalFileActionHandler","externalFileActionHandler","selectFileActionMap","fileActionMap","selectFileActionIds","fileActionIds","selectFileActionData","fileActionId","selectToolbarItems","toolbarItems","selectContextMenuItems","contextMenuItems","selectFolderChain","folderChain","selectCurrentFolder","currentFolder","selectParentFolder","parentFolder","selectRawFiles","rawFiles","selectFileMap","fileMap","selectCleanFileIds","cleanFileIds","selectFileData","fileId","selectHiddenFileIdMap","hiddenFileIdMap","selectHiddenFileCount","Object","keys","selectFocusSearchInput","focusSearchInput","selectSearchString","searchString","selectSelectionMap","selectionMap","selectSelectedFileIds","selectSelectionSize","selectIsFileSelected","selectSelectedFiles","map","selectSelectedFilesForAction","action","requiresSelection","getSelectedFiles","fileFilter","selectSelectedFilesForActionCount","getSelectedFilesForAction","selectDisableSelection","disableSelection","selectFileViewConfig","fileViewConfig","selectSortActionId","sortActionId","selectSortOrder","sortOrder","selectOptionMap","optionMap","selectOptionValue","optionId","selectThumbnailGenerator","thumbnailGenerator","selectDoubleClickDelay","doubleClickDelay","selectIsDnDDisabled","disableDragAndDrop","selectClearSelectionOnOutsideClick","clearSelectionOnOutsideClick","selectContextMenuMounted","contextMenuMounted","selectContextMenuConfig","contextMenuConfig","selectContextMenuTriggerFile","config","triggerFileId","getFileActionMap","getOptionMap","getFileMap","getFileIds","fileIds","getCleanFileIds","getSortActionId","getSortOrder","getSearchString","_getLastClick","lastClick","makeGetAction","fileActionSelector","createSelector","makeGetOptionValue","defaultValue","makeGetFiles","fileIdsSelector","getSortedFileIds","files","sortAction","showFolderFirst","prepareSortKeySelector","selector","sortFunctions","desc","sortKeySelector","configKeyName","ASC","sortedFileIds","sort","by","getSearcher","cleanFiles","FuzzySearch","caseSensitive","getSearchFilteredFileIds","searcher","search","f","getHiddenFileIdMap","searchFilteredFileIds","showHiddenFiles","searchFilteredFileIdsSet","forEach","getDisplayFileIds","filter","getLastClickIndex","displayFileIds","index","selectors","getFileData","getIsFileSelected","selectedFiles","filters","filteredSelectedFiles","reduce","prevFiles","mergeFileActionsArrays","seenActionIds","addToSeen","a","wasNotSeen","fileActionArrays","duplicateFreeArrays","arr","duplicateFreeArray","concat","thunkUpdateRawFileActions","rawFileActions","disableDefaultFileActions","dispatch","defaultActionsToAdd","disabledActionIds","DefaultFileActions","fileActions","EssentialFileActions","optionDefaults","option","reduxActions","setRawFileActions","setFileActionsErrorMessages","setFileActions","setOptionDefaults","thunkUpdateToolbarNContextMenuItems","excludedToolbarFileActionIds","ChonkyActions","OpenParentFolder","seenToolbarGroups","seenContextMenuGroups","getGroup","itemArray","seenMap","groupName","group","button","toolbar","contextMenu","updateFileActionMenuItems","thunkUpdateDefaultFileViewActionId","getState","setFileViewConfig","thunkActivateSortAction","oldActionId","oldOrder","order","DESC","setSort","actionId","thunkApplySelectionTransform","selectionTransform","prevSelection","hiddenFileIds","newSelection","clearSelection","selectFiles","reset","thunkDispatchFileAction","data","_dispatch","Promise","resolve","thunkRequestFileAction","payload","selectedFilesForAction","contextMenuTriggerFile","actionState","toggleOption","effect","maybeEffectPromise","reduxDispatch","getReduxState","then","effectResult","triggerDispatchAfterEffect","preventDispatch","FileViewMode","ChonkyIconName","defineFileAction","__payloadType","hotkeys","errorMessage","Error","findElementAmongAncestors","maybeElement","predicate","parentElement","elementIsInsideButton","buttonCandidate","element","tagName","toLowerCase","getValueOrFallback","fallback","desiredType","reduxThunks","selectRange","params","fileIdsToSelect","slice","rangeStart","rangeEnd","EssentialActions","MouseClickFile","clickType","OpenFiles","targetFile","ctrlKey","toggleSelection","exclusive","setLastClickIndex","fileDisplayIndex","shiftKey","lastClickIndex","KeyboardClickFile","enterKey","spaceKey","StartDragNDrop","draggedFile","EndDragNDrop","destination","droppedFiles","MoveFiles","ChangeSelection","icon","openParentFolder","iconOnly","OpenFileContextMenu","triggerFile","fileSelected","showContextMenu","mouseX","clientX","mouseY","clientY","DefaultActions","OpenSelection","openFiles","SelectAllFiles","selectAllFiles","ClearSelection","EnableListView","List","entryHeight","list","EnableCompactView","Compact","entryWidth","compact","EnableGridView","Grid","smallThumbnail","SortFilesByName","SortFilesBySize","SortFilesByDate","ToggleHiddenFiles","ToggleShowFoldersFirst","FocusSearchInput","ToggleDarkMode","ExtraActions","CopyFiles","copy","CreateFolder","tooltip","folderCreate","UploadFiles","upload","DownloadFiles","download","DeleteFiles","trash","initialRootState","fileActionsErrorMessages","rawFolderChain","folderChainErrorMessages","filesErrorMessages","searchMode","reducers","setExternalFileActionHandler","setRawFolderChain","setRawFiles","selectedFileId","setSortedFileIds","setHiddenFileIds","setFocusSearchInput","setSearchString","oldValue","setSelectionDisabled","setThumbnailGenerator","setDoubleClickDelay","setDisableDragAndDrop","setClearSelectionOnOutsideClick","setContextMenuMounted","hideContextMenu","createSlice","initialState","actions","rootReducer","reducer","useStoreWatchers","store","selectionWatcher","watch","onSelectionChange","oldSelection","selectedFilesIds","selection","unsubscribeCallbacks","subscribe","unsubscribe","useChonkyStore","chonkyInstanceId","preloadedState","configureStore","middleware","getDefaultMiddleware","serializableCheck","devTools","useParamSelector","parametrizedSelector","selectorParams","useCallback","useSelector","useDTE","actionCreator","useDispatch","usePropReduxUpdate","ChonkyIconPlaceholder","title","React","defaultConfig","onFileAction","disableDragAndDropProvider","defaultSortActionId","defaultFileViewActionId","iconComponent","darkMode","i18n","setChonkyDefaults","key","I18nNamespace","getI18nId","namespace","stringId","getActionI18nId","FileActions","useLocalizedFileActionGroup","intl","useIntl","useMemo","formatMessage","FileActionGroups","defaultMessage","useLocalizedFileActionStrings","buttonName","buttonTooltip","useLocalizedFileEntryStrings","formatters","useContext","ChonkyFormattersContext","fileModDateString","formatFileModDate","fileSizeString","formatFileSize","defaultFormatters","safeModDate","formatDate","dateStyle","timeStyle","_intl","sizeData","filesize","bits","output","symbol","Math","round","createContext","ChonkyIconContext","VideoExtensions","ImageExtensions","AudioExtensions","ColorsLight","ColorsDark","getIconTrie","colourIndex","step","IconsToExtensions","license","model","database","text","archive","image","video","code","info","lock","music","terminal","users","linux","ubuntu","windows","rust","python","nodejs","php","git","adobe","pdf","excel","word","flash","exactTrie","ExactTrie","ignoreCase","pair","extensions","colorCode","iconData","put","iconTrie","useIconData","loading","folder","match","getWithCheckpoints","lightTheme","colors","debugRed","debugBlue","debugGreen","debugPurple","debugYellow","textActive","fontSizes","rootPrimary","margins","rootLayoutMargin","lineHeight","fontSize","buttonRadius","dnd","canDropColor","cannotDropColor","canDropMask","cannotDropMask","fileListCanDropMaskOne","fileListCanDropMaskTwo","fileListCannotDropMaskOne","fileListCannotDropMaskTwo","dragLayer","border","padding","borderRadius","fileList","desktopGridGutter","mobileGridGutter","gridFileEntry","childrenCountSize","iconColorFocused","iconSize","iconColor","fileColorTint","folderBackColorTint","folderFrontColorTint","listFileEntry","propertyFontSize","iconFontSize","iconBorderRadius","darkThemeOverride","mobileThemeOverride","useIsMobileBreakpoint","useMediaQuery","getStripeGradient","colorOne","colorTwo","makeLocalChonkyStyles","styles","createUseStyles","makeGlobalChonkyStyles","makeStyles","selectorMapping","makeGlobalStyles","theme","localStyles","globalStyles","localSelectors","localSelector","globalSelector","jssSelector","useStyles","classes","important","c","classnames","useFileBrowserHandle","useStore","useImperativeHandle","getFileSelection","selectionSet","setFileSelection","requestFileAction","ChonkyBusinessLogicInner","memo","forwardRef","props","displayName","ChonkyBusinessLogic","useDndContextAvailable","dndContext","DndContext","dragDropManager","useDragIfAvailable","dndContextAvailable","mockHook","useHook","useDrag","useDropIfAvailable","useDrop","findClosestChonkyFileId","fileEntryWrapperDiv","dataset","chonkyFileId","useContextMenuTrigger","contextMenuMountedRef","event","altKey","preventDefault","target","useContextMenuDismisser","ChonkyDndFileEntryType","layerStyles","position","pointerEvents","zIndex","left","top","width","height","getItemStyles","initialCursorOffset","initialFileOffset","currentFileOffset","display","x","y","transform","WebkitTransform","DnDFileListDragLayer","useDragLayer","monitor","getItem","itemType","getItemType","getInitialClientOffset","getInitialSourceClientOffset","getSourceClientOffset","isDragging","selectionSize","style","className","fileDragPreview","boxShadow","palette","divider","backgroundColor","background","color","primary","HotkeyListener","fileAction","hotkeysStr","hotkeyCallback","unbind","ChonkyPresentationLayer","children","dndDisabled","handleClickAway","hotkeyListenerComponents","ClickAwayListener","onClickAway","Box","chonkyRoot","onContextMenu","paper","touchAction","fontFamily","flexDirection","boxSizing","textAlign","webkitTouchCallout","webkitUserSelect","mozUserSelect","msUserSelect","userSelect","FileBrowser","shortid","generate","isMobileBreakpoint","muiTheme","createMuiTheme","type","combinedTheme","merge","chonkyComps","IntlProvider","locale","defaultLocale","Provider","ReduxProvider","ThemeProvider","MuiThemeProvider","DndProvider","backend","HTML5Backend","useFolderChainItems","folderChainItems","items","disabled","onClick","useFileDrag","fileRef","getDndStartPayload","reduxState","sourceInstanceId","source","canDrag","onDragStart","onDragEnd","dropResult","getDropResult","dropTarget","dropEffect","collect","begin","end","dndIsDragging","drag","preview","getEmptyImage","captureDraggingState","useFileDrop","forceDisableDrop","includeChildrenDrops","folderChainRef","onDrop","_item","canDrop","customDropResult","isOver","shallow","prohibitedFileIds","movedFiles","currFile","isOverCurrent","accept","drop","dndIsOver","dndIsOverCurrent","dndCanDrop","useFileEntryDnD","dndState","useDndHoverOpen","currentFolderRef","timeout","getRandomInt","min","max","floor","random","TextPlaceholder","minLength","maxLength","placeholderLength","whitespace","repeat","textPlaceholder","dangerouslySetInnerHTML","__html","opacity","animationName","animationIterationCount","animationTimingFunction","animationDuration","whiteSpace","overflow","maxWidth","minWidth","useFileEntryHtmlProps","dataProps","role","useFileEntryState","selected","focused","useThumbnailUrl","thumbnailUrl","thumbnailLoading","fileColor","iconSpin","useDndIcon","dndIconName","showDropIcon","dndCannotDrop","dndDragging","useModifierIconComponents","modifierIcons","hidden","symlink","ChonkyIcon","modifierIconComponents","_extname","fileName","parts","split","useFileNameComponent","extension","ext","substr","setThumbnailUrl","setThumbnailLoading","loadingAttempts","loadingCancelled","useFileClickHandlers","displayIndex","onMouseClick","onKeyboardClick","onSingleClick","onDoubleClick","CustomVisibilityState","useFileActionTrigger","useFileActionProps","optionValue","actionSelectionSize","actionSelectionEmpty","active","sortAsc","sortDesc","placeholder","toggleOn","toggleOff","isSortButtonAndCurrentSort","isFileViewButtonAndCurrentView","isOptionAndEnabled","customDisabled","customActive","customVisibility","Disabled","Active","ToolbarButton","externalClassName","dropdown","iconWithText","fallbackIcon","fixedWidth","baseButton","iconOnlyButton","activeButton","Button","iconDropdown","textTransform","letterSpacing","paddingBottom","paddingTop","marginRight","marginLeft","marginTop","SmartToolbarButton","triggerAction","Hidden","FolderChainButton","first","baseBreadcrumb","disabledBreadcrumb","currentBreadcrumb","folderChainIcon","buttonContainer","dndIndicator","textDecoration","FileNavbar","folderChainComponents","components","component","navbarWrapper","navbarContainer","Breadcrumbs","navbarBreadcrumbs","separator","upDirectoryButton","flexGrow","ToolbarDropdownButton","MenuItem","ListItemIcon","ListItemText","primaryTypographyProps","minHeight","SmartToolbarDropdownButton","onClickFollowUp","handleClick","ToolbarDropdown","anchor","setAnchor","currentTarget","handleClose","menuItemComponents","localizedName","Menu","autoFocus","keepMounted","elevation","anchorEl","onClose","open","Boolean","transitionDuration","dropdownList","ToolbarInfo","hiddenCount","fileCountString","Toolbar","fileCount","selectedString","hiddenString","infoContainer","Typography","infoText","variant","extraInfoSpan","selectionSizeText","hiddenCountText","ToolbarSearch","searchPlaceholderString","searchInputRef","reduxSearchString","localSearchString","setLocalSearchString","debouncedLocalSearchString","showLoadingIndicator","setShowLoadingIndicator","focus","handleChange","handleKeyUp","blur","TextField","searchFieldContainer","onChange","inputRef","InputProps","onKeyUp","startAdornment","InputAdornment","searchIcon","spin","searchFieldInput","inputProps","searchFieldInputInner","margin","paddingLeft","FileToolbar","toolbarItemComponents","toolbarWrapper","toolbarContainer","toolbarLeft","toolbarRight","flexWrap","toolbarLeftFiller","FileListEmpty","emptyString","FileList","fileListEmpty","fileListEmptyContent","folderOpen","useClickHandler","counter","clickCount","clickTimeout","mouseClickEvent","metaKey","useKeyDownHandler","keyboardClickEvent","nativeEvent","stopPropagation","ClickableWrapper","WrapperTag","wrapperTag","passthroughProps","setFocused","handleKeyDown","compProps","onFocus","onBlur","onKeyDown","tabIndex","mergedProps","FileEntryName","fileNameComponent","hint","paddingRight","CompactEntry","entryState","fileEntryHtmlProps","listFileEntryIcon","listFileEntryDescription","listFileEntryName","listFileEntryProperties","listFileEntryProperty","alignItems","DnDFileEntry","fillParent","FileThumbnail","thumbnailStyle","backgroundImage","fileThumbnail","backgroundRepeat","backgroundPosition","backgroundSize","GridEntryDndIndicator","borderBottom","borderLeft","content","GridEntryPreviewFolder","folderClasses","useFolderStyles","fileClasses","useFileStyles","commonClasses","useCommonEntryStyles","previewFile","folderBackSideMid","folderBackSideTop","folderFrontSide","fileIcon","selectionIndicator","thumbnail","borderTopLeftRadius","borderTopRightRadius","right","borderRightColor","borderTopColor","borderBottomColor","borderLeftColor","borderWidth","borderStyle","bottom","shadows","GridEntryPreviewFile","focusIndicator","GridEntry","useFileEntryStyles","entryClassName","gridFileEntryPreview","gridFileEntryNameContainer","gridFileEntryName","wordBreak","ListEntry","styleState","listFileEntrySelection","textOverflow","flex","disabledDndState","SmartFileEntry","fileViewMode","fileClickHandlers","clickableWrapperProps","fileEntryClickableWrapper","fileEntryProps","EntryComponent","outline","isMobileDevice","window","orientation","navigator","userAgent","indexOf","getGridConfig","viewConfig","gutter","scrollbar","columnCount","columnWidth","rowCount","ceil","rowHeight","GridContainer","gridRef","gridConfig","setGridConfig","gridConfigRef","oldConf","newConf","resetAfterRowIndex","resetAfterColumnIndex","resetAfterIndices","columnIndex","rowIndex","sizers","gc","getColumnWidth","getRowHeight","displayFileIdsRef","getItemKey","cellRenderer","styleWithGutter","gridComponent","VariableSizeGrid","gridContainer","estimatedRowHeight","estimatedColumnWidth","itemKey","ListContainer","listRef","listComponent","rowRenderer","FixedSizeList","listContainer","itemSize","itemCount","borderTop","localClasses","useLocalStyles","onScroll","fillParentContainer","listRenderer","fileListWrapper","dndDropZone","dndDropZoneIcon","AutoSizer","disableHeight","maxHeight","FileContextMenu","browserMenuShortcutString","shortcut","contextMenuItemComponents","anchorPosition","disablePortal","anchorReference","contextMenuList","ListSubheader","browserMenuTooltip","FullFileBrowser","useFolderChain","currentFolderId","parentId","parentFile","unshift","useFiles","childrenIds","useFileMapMethods","baseFileMap","initialFolderId","setFileMap","setCurrentFolderId","resetFileMap","moveFiles","currentFileMap","newFileMap","moveFileIds","newSourceChildrenIds","newDestinationChildrenIds","methods","useFileActionHandler","fileToOpen","useFileMap","fileActionHandler"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEO,IAAMA,WAAW,GAAG,SAAdA,WAAc,CACvBC,KADuB,EAEvBC,KAFuB;AAIvB,kBAA4CC,cAAQ,CAACF,KAAD,CAApD;AAAA,MAAOG,cAAP;AAAA,MAAuBC,iBAAvB;;AAEAC,EAAAA,eAAS,CAAC;AACN,QAAMC,OAAO,GAAGC,UAAU,CAAC;AACvBH,MAAAA,iBAAiB,CAACJ,KAAD,CAAjB;AACH,KAFyB,EAEvBC,KAFuB,CAA1B;AAIA,WAAO;AACHO,MAAAA,YAAY,CAACF,OAAD,CAAZ;AACH,KAFD;AAGH,GARQ,EAQN,CAACN,KAAD,EAAQC,KAAR,CARM,CAAT;AAUA,SAAO,CAACE,cAAD,EAAiBC,iBAAjB,CAAP;AACH,CAjBM;AAmBP,IAAMK,sBAAsB,GAAG,EAA/B;AACO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAIC,OAAJ;AAC1B,MAAMC,QAAQ,GAAGC,YAAM,CAAIJ,sBAAJ,CAAvB;AACA,MAAIG,QAAQ,CAACE,OAAT,KAAqBL,sBAAzB,EAAiDG,QAAQ,CAACE,OAAT,GAAmBH,OAAO,EAA1B;AACjD,SAAOC,QAAQ,CAACE,OAAhB;AACH,CAJM;AAMA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAIf,KAAJ;AAC/B,MAAMgB,GAAG,GAAGH,YAAM,CAACb,KAAD,CAAlB;AACAK,EAAAA,eAAS,CAAC;AACNW,IAAAA,GAAG,CAACF,OAAJ,GAAcd,KAAd;AACH,GAFQ,EAEN,CAACgB,GAAD,EAAMhB,KAAN,CAFM,CAAT;AAGA,SAAOgB,GAAP;AACH,CANM;;IC5BMC,MAAb;AAAA;;AAAA,SACkBC,KADlB,GACW;;;sCAAgBC;AAAAA,MAAAA;;;AACnB;AACA,gBAAAC,OAAO,EAACF,KAAR,kBAAc,wBAAd,SAA2CC,IAA3C;AACH,GAJL;;AAAA,SAMkBE,IANlB,GAMW;;;uCAAeF;AAAAA,MAAAA;;;AAClB;AACA,iBAAAC,OAAO,EAACC,IAAR,mBAAa,0BAAb,SAA4CF,IAA5C;AACH,GATL;;AAAA,SAWkBG,KAXlB,GAWW;;;uCAAgBH;AAAAA,MAAAA;;;AACnB;AACA,iBAAAC,OAAO,EAACE,KAAR,mBAAc,wBAAd,SAA2CH,IAA3C;AACH,GAdL;;AAAA,SAgBkBI,aAhBlB,GAgBW,uBAAqBC,OAArB;AACH,oBAAcA,OAAO,CAACC,IAAR,CAAa,MAAb,CAAd;AACH,GAlBL;;AAAA;AAAA;;ICKaC,UAAb;AAAA;;AAAA,aACkBC,WADlB,GACW,qBAAmBC,IAAnB;AACH;AACA,WAAO,CAAC,CAACA,IAAF,IAAUA,IAAI,CAACC,KAAL,KAAe,IAAhC;AACH,GAJL;;AAAA,aAMkBC,QANlB,GAMW,kBAAgBF,IAAhB;AACH;AACA,WAAO,CAAC,CAACA,IAAF,IAAUA,IAAI,CAACE,QAAL,KAAkB,IAAnC;AACH,GATL;;AAAA,aAWkBC,SAXlB,GAWW,mBAAiBH,IAAjB;AACH;AACA,WAAO,CAAC,CAACA,IAAF,IAAUA,IAAI,CAACG,SAAL,KAAmB,IAApC;AACH,GAdL;;AAAA,aAgBkBC,WAhBlB,GAgBW,qBAAmBJ,IAAnB;AACH;AACA,WAAO,CAAC,CAACA,IAAF,IAAUA,IAAI,CAACI,WAAL,KAAqB,IAAtC;AACH,GAnBL;;AAAA,aAqBkBC,WArBlB,GAqBW,qBAAmBL,IAAnB;AACH;AACA,WAAO,CAAC,CAACA,IAAT;AACH,GAxBL;;AAAA,aA0BkBM,UA1BlB,GA0BW,oBAAkBN,IAAlB;AACH;AACA,WAAO,CAAC,CAACA,IAAF,IAAUA,IAAI,CAACO,QAAL,KAAkB,KAAnC;AACH,GA7BL;;AAAA,aA+BkBC,YA/BlB,GA+BW,sBAAoBR,IAApB;AACH;AACA,WAAO,CAAC,CAACA,IAAF,IAAUA,IAAI,CAACS,UAAL,KAAoB,KAArC;AACH,GAlCL;;AAAA,aAoCkBC,WApClB,GAoCW,qBAAmBV,IAAnB;AACH;AACA,WAAO,CAAC,CAACA,IAAF,IAAUA,IAAI,CAACW,SAAL,KAAmB,KAApC;AACH,GAvCL;;AAAA,aAyCkBC,WAzClB,GAyCW,qBAAmBZ,IAAnB;AACH;AACA,QAAI,CAACA,IAAL,EAAW,OAAO,KAAP;AACX,QAAIA,IAAI,CAACC,KAAL,IAAcD,IAAI,CAACa,SAAL,KAAmB,KAArC,EAA4C,OAAO,IAAP;AAC5C,WAAOb,IAAI,CAACa,SAAL,KAAmB,IAA1B;AACH,GA9CL;;AAAA,aAgDkBC,aAhDlB,GAgDW,uBAAqBd,IAArB;AACH;AACA,QAAI,CAACF,UAAU,CAACQ,UAAX,CAAsBN,IAAtB,CAAL,EAAkC,OAAO,KAAP;AAClC,QAAIA,IAAI,CAACC,KAAL,IAAcD,IAAI,CAACe,WAAL,KAAqB,KAAvC,EAA8C,OAAO,IAAP;AAC9C,WAAOf,IAAI,CAACe,WAAL,KAAqB,IAA5B;AACH,GArDL;;AAAA,aAuDkBC,UAvDlB,GAuDW,oBAAkBhB,IAAlB;AACH,QAAI,CAACA,IAAD,IAASA,IAAI,CAACiB,OAAL,KAAiB,IAA1B,IAAkCjB,IAAI,CAACiB,OAAL,KAAiBC,SAAvD,EAAkE,OAAO,IAAP;AAClE,WAAOpB,UAAU,CAACqB,SAAX,CAAqBnB,IAAI,CAACiB,OAA1B,CAAP;AACH,GA1DL;;AAAA,aA4DkBE,SA5DlB,GA4DW,mBAAiBC,SAAjB;AACH,QAAI,OAAOA,SAAP,KAAqB,QAArB,IAAiC,OAAOA,SAAP,KAAqB,QAA1D,EAAoE;AAChE;AACA,UAAI;AACA,eAAO,IAAIC,IAAJ,CAASD,SAAT,CAAP;AACH,OAFD,CAEE,OAAO9B,KAAP,EAAc;AACZD,QAAAA,MAAM,CAACC,KAAP,4DAC6DA,KAAK,CAACgC,OADnE,QAEI,gBAFJ,EAGIF,SAHJ;AAKH;AACJ;;AACD,QAAIA,SAAS,YAAYC,IAArB,IAA6B,CAACE,KAAK,CAACH,SAAS,CAACI,OAAV,EAAD,CAAvC,EAA8D;AAC1D;AACA,aAAOJ,SAAP;AACH;;;AAGD/B,IAAAA,MAAM,CAACI,IAAP,CAAY,kCAAZ,EAAgD2B,SAAhD;AACA,WAAO,IAAP;AACH,GAjFL;;AAAA,aAmFkBK,gBAnFlB,GAmFW,0BAAwBzB,IAAxB;AACH,QAAI,CAACA,IAAD,IAAS,OAAOA,IAAI,CAAC0B,aAAZ,KAA8B,QAA3C,EAAqD,OAAO,IAAP;AAErD,WAAO1B,IAAI,CAAC0B,aAAZ;AACH,GAvFL;;AAAA;AAAA;;ACgBO,IAAMC,kBAAkB,GAAkB,SAApCA,kBAAoC,CAACC,IAAD,EAAeC,QAAf;AAC7C,MAAMC,cAAc,GAAG,EAAvB;AACA,MAAMC,aAAa,GAAa,EAAhC;;AAEA,MAAI,CAACH,IAAI,KAAK,aAAT,IAA0BA,IAAI,KAAK,aAApC,KAAsD,CAACC,QAA3D,EAAqE,CAArE,MAEO,IAAI,CAACG,KAAK,CAACC,OAAN,CAAcJ,QAAd,CAAL,EAA8B;AACjCE,IAAAA,aAAa,CAACG,IAAd,iBACiBN,IADjB,sCACoD,OAAOC,QAD3D;AAGH,GAJM,MAIA;AACH,QAAIM,kBAAkB,GAAG,CAAzB;AACA,QAAIC,qBAAqB,GAAG,CAA5B;AACA,QAAMC,OAAO,GAAG,IAAIC,GAAJ,EAAhB;AACA,QAAMC,YAAY,GAAG,IAAID,GAAJ,EAArB;;AAEA,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,QAAQ,CAACY,MAA7B,EAAqC,EAAED,CAAvC,EAA0C;AACtC,UAAME,IAAI,GAAGb,QAAQ,CAACW,CAAD,CAArB;;AACA,UAAI,CAACE,IAAL,EAAW;AACP,YAAId,IAAI,KAAK,aAAb,EAA4BO,kBAAkB,GAA9C,KACKL,cAAc,CAACI,IAAf,CAAoB,IAApB;AACR,OAHD,MAGO,IAAI,OAAOQ,IAAP,KAAgB,QAApB,EAA8B;AACjCP,QAAAA,kBAAkB;AACrB,OAFM,MAEA;AACH,YAAI,CAACO,IAAI,CAACC,EAAN,IAAaf,IAAI,KAAK,aAAT,IAA0B,CAACc,IAAI,CAACE,IAAjD,EAAwD;AACpDR,UAAAA,qBAAqB;AACxB,SAFD,MAEO,IAAIC,OAAO,CAACQ,GAAR,CAAYH,IAAI,CAACC,EAAjB,CAAJ,EAA0B;AAC7BJ,UAAAA,YAAY,CAACO,GAAb,CAAiBJ,IAAI,CAACC,EAAtB;AACH,SAFM,MAEA;AACHN,UAAAA,OAAO,CAACS,GAAR,CAAYJ,IAAI,CAACC,EAAjB;AACAb,UAAAA,cAAc,CAACI,IAAf,CAAoBQ,IAApB;AACH;AACJ;AACJ;;AAED,QAAIP,kBAAJ,EAAwB;AACpBJ,MAAAA,aAAa,CAACG,IAAd,CACI,cAAYC,kBAAZ,yGADJ;AAIH;;AACD,QAAIC,qBAAJ,EAA2B;AACvBL,MAAAA,aAAa,CAACG,IAAd,CACI,cAAYE,qBAAZ,+HADJ;AAKH;;AACD,QAAIG,YAAY,CAACQ,IAAb,GAAoB,CAAxB,EAA2B;AACvB,UAAMC,iBAAiB,GAAG,MAAMhB,KAAK,CAACiB,IAAN,CAAWV,YAAX,EAAyB1C,IAAzB,CAA8B,MAA9B,CAAN,GAA8C,GAAxE;AACAkC,MAAAA,aAAa,CAACG,IAAd,CACI,cAAYK,YAAY,CAACQ,IAAzB,yJAE+CC,iBAF/C,CADJ;AAKH;AACJ;;AAED,MAAIjB,aAAa,CAACU,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,QAAMS,kBAAkB,GAAG,SAASnB,aAAa,CAAClC,IAAd,CAAmB,MAAnB,CAApC;AACA,QAAIsD,WAAJ;AACA,QAAIC,UAAJ;;AACA,QAAIxB,IAAI,KAAK,aAAb,EAA4B;AACxBuB,MAAAA,WAAW,GAAG,cAAd;AACAC,MAAAA,UAAU,GAAG,OAAb;AACH,KAHD,MAGO,IAAIxB,IAAI,KAAK,aAAb,EAA4B;AAC/BuB,MAAAA,WAAW,GAAG,cAAd;AACAC,MAAAA,UAAU,GAAG,cAAb;AACH,KAHM,MAGA;AACH;AACAD,MAAAA,WAAW,GAAG,OAAd;AACAC,MAAAA,UAAU,GAAG,OAAb;AACH;;AAED/D,IAAAA,MAAM,CAACC,KAAP,CACI,8CAA4C6D,WAA5C,gCACiBC,UADjB,2EAE0BF,kBAF1B,CADJ;AAKH;;AAED,SAAO;AACHG,IAAAA,cAAc,EAAEvB,cADb;AAEHC,IAAAA,aAAa,EAAbA;AAFG,GAAP;AAIH,CArFM;;ACrBP;;;AAGA,IAAauB,SAAS,GAAG;AACrBC,EAAAA,eAAe,EAAE,mBADI;AAErBC,EAAAA,gBAAgB,EAAE,oBAFG;AAGrBC,EAAAA,QAAQ,EAAE;AAHW,CAAlB;;ACGP,IAAYC,SAAZ;;AAAA,WAAYA;AACRA,EAAAA,gBAAA,QAAA;AACAA,EAAAA,iBAAA,SAAA;AACH,CAHD,EAAYA,SAAS,KAATA,SAAS,KAAA,CAArB;;ICOaC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD;AAAA,SAAsBA,KAAK,CAACC,UAA5B;AAAA,CAAzB;AACP,IAAaC,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACF,KAAD;AAAA,SAAsBA,KAAK,CAACG,yBAA5B;AAAA,CAAxC;AAEP,IAAaC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACJ,KAAD;AAAA,SAAsBA,KAAK,CAACK,aAA5B;AAAA,CAA5B;AACP,IAAaC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACN,KAAD;AAAA,SAAsBA,KAAK,CAACO,aAA5B;AAAA,CAA5B;AACP,IAAaC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,YAAD;AAAA,SAA0B,UAACT,KAAD;AAAA,WAC1DI,mBAAmB,CAACJ,KAAD,CAAnB,CAA2BS,YAA3B,CAD0D;AAAA,GAA1B;AAAA,CAA7B;AAEP,IAAaC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACV,KAAD;AAAA,SAAsBA,KAAK,CAACW,YAA5B;AAAA,CAA3B;AACP,IAAaC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACZ,KAAD;AAAA,SAAsBA,KAAK,CAACa,gBAA5B;AAAA,CAA/B;AAEP,IAAaC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACd,KAAD;AAAA,SAAsBA,KAAK,CAACe,WAA5B;AAAA,CAA1B;AACP,IAAaC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAChB,KAAD;AAC/B,MAAMe,WAAW,GAAGD,iBAAiB,CAACd,KAAD,CAArC;AACA,MAAMiB,aAAa,GAAGF,WAAW,CAAClC,MAAZ,GAAqB,CAArB,GAAyBkC,WAAW,CAACA,WAAW,CAAClC,MAAZ,GAAqB,CAAtB,CAApC,GAA+D,IAArF;AACA,SAAOoC,aAAP;AACH,CAJM;AAKP,IAAaC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAClB,KAAD;AAC9B,MAAMe,WAAW,GAAGD,iBAAiB,CAACd,KAAD,CAArC;AACA,MAAMmB,YAAY,GAAGJ,WAAW,CAAClC,MAAZ,GAAqB,CAArB,GAAyBkC,WAAW,CAACA,WAAW,CAAClC,MAAZ,GAAqB,CAAtB,CAApC,GAA+D,IAApF;AACA,SAAOsC,YAAP;AACH,CAJM;AAMP,IAAaC,cAAc,GAAG,SAAjBA,cAAiB,CAACpB,KAAD;AAAA,SAAsBA,KAAK,CAACqB,QAA5B;AAAA,CAAvB;AACP,IAAaC,aAAa,GAAG,SAAhBA,aAAgB,CAACtB,KAAD;AAAA,SAAsBA,KAAK,CAACuB,OAA5B;AAAA,CAAtB;AACP,IAAaC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACxB,KAAD;AAAA,SAAsBA,KAAK,CAACyB,YAA5B;AAAA,CAA3B;AACP,IAAaC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,MAAD;AAAA,SAA8B,UAAC3B,KAAD;AAAA,WACxD2B,MAAM,GAAGL,aAAa,CAACtB,KAAD,CAAb,CAAqB2B,MAArB,CAAH,GAAkC,IADgB;AAAA,GAA9B;AAAA,CAAvB;AAGP,IAAaC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC5B,KAAD;AAAA,SAAsBA,KAAK,CAAC6B,eAA5B;AAAA,CAA9B;AACP,IAAaC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC9B,KAAD;AAAA,SAAsB+B,MAAM,CAACC,IAAP,CAAYJ,qBAAqB,CAAC5B,KAAD,CAAjC,EAA0CnB,MAAhE;AAAA,CAA9B;AAEP,IAAaoD,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACjC,KAAD;AAAA,SAAsBA,KAAK,CAACkC,gBAA5B;AAAA,CAA/B;AACP,IAAaC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACnC,KAAD;AAAA,SAAsBA,KAAK,CAACoC,YAA5B;AAAA,CAA3B;AAEP,IAAaC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACrC,KAAD;AAAA,SAAsBA,KAAK,CAACsC,YAA5B;AAAA,CAA3B;AACP,IAAaC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACvC,KAAD;AAAA,SAAsB+B,MAAM,CAACC,IAAP,CAAYK,kBAAkB,CAACrC,KAAD,CAA9B,CAAtB;AAAA,CAA9B;AACP,IAAawC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACxC,KAAD;AAAA,SAAsBuC,qBAAqB,CAACvC,KAAD,CAArB,CAA6BnB,MAAnD;AAAA,CAA5B;AACP,IAAa4D,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACd,MAAD;AAAA,SAA8B,UAAC3B,KAAD;AAAA,WAC9D,CAAC,CAAC2B,MAAF,IAAY,CAAC,CAACU,kBAAkB,CAACrC,KAAD,CAAlB,CAA0B2B,MAA1B,CADgD;AAAA,GAA9B;AAAA,CAA7B;AAEP,IAAae,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAC1C,KAAD;AAC/B,MAAMuB,OAAO,GAAGD,aAAa,CAACtB,KAAD,CAA7B;AACA,SAAO+B,MAAM,CAACC,IAAP,CAAYK,kBAAkB,CAACrC,KAAD,CAA9B,EAAuC2C,GAAvC,CAA2C,UAAA5D,EAAE;AAAA,WAAIwC,OAAO,CAACxC,EAAD,CAAX;AAAA,GAA7C,CAAP;AACH,CAHM;AAIP,IAAa6D,4BAA4B,GAAG,SAA/BA,4BAA+B,CAACnC,YAAD;AAAA,SAA0B,UAACT,KAAD;AAClE,QAAQK,aAAR,GAA0BL,KAA1B,CAAQK,aAAR;AACA,QAAMwC,MAAM,GAAGxC,aAAa,CAACI,YAAD,CAA5B;AACA,QAAI,CAACoC,MAAD,IAAW,CAACA,MAAM,CAACC,iBAAvB,EAA0C,OAAOxF,SAAP;AAE1C,WAAOyF,gBAAgB,CAAC/C,KAAD,EAAQ6C,MAAM,CAACG,UAAf,CAAvB;AACH,GAN2C;AAAA,CAArC;AAOP,IAAaC,iCAAiC,GAAG,SAApCA,iCAAoC,CAACxC,YAAD;AAAA,SAA0B,UAACT,KAAD;AAAA;;AAAA,oCACvEkD,yBAAyB,CAAClD,KAAD,EAAQS,YAAR,CAD8C,qBACvE,sBAAgD5B,MADuB;AAAA,GAA1B;AAAA,CAA1C;AAEP,IAAasE,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACnD,KAAD;AAAA,SAAsBA,KAAK,CAACoD,gBAA5B;AAAA,CAA/B;AAEP,IAAaC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACrD,KAAD;AAAA,SAAsBA,KAAK,CAACsD,cAA5B;AAAA,CAA7B;AAEP,IAAaC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACvD,KAAD;AAAA,SAAsBA,KAAK,CAACwD,YAA5B;AAAA,CAA3B;AACP,IAAaC,eAAe,GAAG,SAAlBA,eAAkB,CAACzD,KAAD;AAAA,SAAsBA,KAAK,CAAC0D,SAA5B;AAAA,CAAxB;AAEP,IAAaC,eAAe,GAAG,SAAlBA,eAAkB,CAAC3D,KAAD;AAAA,SAAsBA,KAAK,CAAC4D,SAA5B;AAAA,CAAxB;AACP,IAAaC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,QAAD;AAAA,SAAsB,UAAC9D,KAAD;AAAA,WAAsB2D,eAAe,CAAC3D,KAAD,CAAf,CAAuB8D,QAAvB,CAAtB;AAAA,GAAtB;AAAA,CAA1B;AAEP,IAAaC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAC/D,KAAD;AAAA,SAAsBA,KAAK,CAACgE,kBAA5B;AAAA,CAAjC;AACP,IAAaC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACjE,KAAD;AAAA,SAAsBA,KAAK,CAACkE,gBAA5B;AAAA,CAA/B;AACP,IAAaC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACnE,KAAD;AAAA,SAAsBA,KAAK,CAACoE,kBAA5B;AAAA,CAA5B;AACP,IAAaC,kCAAkC,GAAG,SAArCA,kCAAqC,CAACrE,KAAD;AAAA,SAAsBA,KAAK,CAACsE,4BAA5B;AAAA,CAA3C;AAEP,IAAaC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACvE,KAAD;AAAA,SAAsBA,KAAK,CAACwE,kBAA5B;AAAA,CAAjC;AACP,IAAaC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACzE,KAAD;AAAA,SAAsBA,KAAK,CAAC0E,iBAA5B;AAAA,CAAhC;AACP,IAAaC,4BAA4B,GAAG,SAA/BA,4BAA+B,CAAC3E,KAAD;;;AACxC,MAAM4E,MAAM,GAAGH,uBAAuB,CAACzE,KAAD,CAAtC;AACA,MAAI,CAAC4E,MAAD,IAAW,CAACA,MAAM,CAACC,aAAvB,EAAsC,OAAO,IAAP;AACtC,MAAMtD,OAAO,GAAGD,aAAa,CAACtB,KAAD,CAA7B;AACA,kCAAOuB,OAAO,CAACqD,MAAM,CAACC,aAAR,CAAd,oCAAwC,IAAxC;AACH,CALM;;AAQP,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC9E,KAAD;AAAA,SAAsBA,KAAK,CAACK,aAA5B;AAAA,CAAzB;;AACA,IAAM0E,YAAY,GAAG,SAAfA,YAAe,CAAC/E,KAAD;AAAA,SAAsBA,KAAK,CAAC4D,SAA5B;AAAA,CAArB;;AACA,IAAMoB,UAAU,GAAG,SAAbA,UAAa,CAAChF,KAAD;AAAA,SAAsBA,KAAK,CAACuB,OAA5B;AAAA,CAAnB;;AACA,IAAM0D,UAAU,GAAG,SAAbA,UAAa,CAACjF,KAAD;AAAA,SAAsBA,KAAK,CAACkF,OAA5B;AAAA,CAAnB;;AACA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACnF,KAAD;AAAA,SAAsBA,KAAK,CAACyB,YAA5B;AAAA,CAAxB;;AACA,IAAM2D,eAAe,GAAG,SAAlBA,eAAkB,CAACpF,KAAD;AAAA,SAAsBA,KAAK,CAACwD,YAA5B;AAAA,CAAxB;;AACA,IAAM6B,YAAY,GAAG,SAAfA,YAAe,CAACrF,KAAD;AAAA,SAAsBA,KAAK,CAAC0D,SAA5B;AAAA,CAArB;;AACA,IAAM4B,eAAe,GAAG,SAAlBA,eAAkB,CAACtF,KAAD;AAAA,SAAsBA,KAAK,CAACoC,YAA5B;AAAA,CAAxB;;AACA,IAAMmD,aAAa,GAAG,SAAhBA,aAAgB,CAACvF,KAAD;AAAA,SAAsBA,KAAK,CAACwF,SAA5B;AAAA,CAAtB;;;AAGA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,kBAAD;AAAA,SAClBC,sBAAc,CAAC,CAACb,gBAAD,EAAmBY,kBAAnB,CAAD,EAAyC,UAACrF,aAAD,EAAgBI,YAAhB;AAAA,WACnDA,YAAY,IAAIJ,aAAa,CAACI,YAAD,CAA7B,GAA8CJ,aAAa,CAACI,YAAD,CAA3D,GAA4E,IADzB;AAAA,GAAzC,CADI;AAAA,CAAtB;;AAIA,IAAMmF,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC9B,QAAD,EAAmB+B,YAAnB;AAAA,MAAmBA,YAAnB;AAAmBA,IAAAA,YAAnB,GAAuCvI,SAAvC;AAAA;;AAAA,SACvBqI,sBAAc,CAAC,CAACZ,YAAD,CAAD,EAAiB,UAAAnB,SAAS;AACpC,QAAMpJ,KAAK,GAAGoJ,SAAS,CAACE,QAAD,CAAvB;;AACA,QAAItJ,KAAK,KAAK8C,SAAd,EAAyB;AACrB,aAAOuI,YAAP;AACH;;AACD,WAAOrL,KAAP;AACH,GANa,CADS;AAAA,CAA3B;;AAQA,IAAMsL,YAAY,GAAG,SAAfA,YAAe,CAACC,eAAD;AAAA,SACjBJ,sBAAc,CACV,CAACX,UAAD,EAAae,eAAb,CADU,EAEV,UAACxE,OAAD,EAAU2D,OAAV;AAAA,WAAiCA,OAAO,CAACvC,GAAR,CAAY,UAAAhB,MAAM;AAAA,aAAKA,MAAM,IAAIJ,OAAO,CAACI,MAAD,CAAjB,GAA4BJ,OAAO,CAACI,MAAD,CAAnC,GAA8C,IAAnD;AAAA,KAAlB,CAAjC;AAAA,GAFU,CADG;AAAA,CAArB;;AAKA,IAAMqE,gBAAgB,gBAAGL,sBAAc,CACnC,CACIV,UADJ,EAEII,YAFJ,eAGIS,YAAY,CAACb,UAAD,CAHhB,eAIIQ,aAAa,CAACL,eAAD,CAJjB,eAKIQ,kBAAkB,CAAClG,SAAS,CAACE,gBAAX,EAA6B,KAA7B,CALtB,CADmC,EAQnC,UAACsF,OAAD,EAAUxB,SAAV,EAAqBuC,KAArB,EAA4BC,UAA5B,EAAwCC,eAAxC;AACI,MAAI,CAACD,UAAL,EAAiB;AACb;AACA;AACA,WAAOhB,OAAP;AACH;;AAED,MAAMkB,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,QAAD;AAAA,WAAmC,UAACjK,IAAD;AAAA,aAA8BiK,QAAQ,CAACjK,IAAD,CAAtC;AAAA,KAAnC;AAAA,GAA/B;;AAEA,MAAMkK,aAAa,GAGb,EAHN;;AAKA,MAAIH,eAAJ,EAAqB;AACjB;AACA;AACAG,IAAAA,aAAa,CAAChI,IAAd,CAAmB;AACfiI,MAAAA,IAAI,EAAEH,sBAAsB,CAAClK,UAAU,CAACC,WAAZ;AADb,KAAnB;AAGH;;AACD,MAAI+J,UAAU,CAACM,eAAf,EAAgC;AAAA;;AAC5B,QAAMC,aAAa,GAAG/C,SAAS,KAAK5D,SAAS,CAAC4G,GAAxB,GAA8B,KAA9B,GAAsC,MAA5D;AACAJ,IAAAA,aAAa,CAAChI,IAAd,gDACKmI,aADL,IACqBL,sBAAsB,CAACF,UAAU,CAACM,eAAZ,CAD3C;AAGH;;AACD,MAAIF,aAAa,CAACzH,MAAd,KAAyB,CAA7B,EAAgC,OAAOqG,OAAP;;AAGhC,MAAMyB,aAAa,GAAGC,IAAI,WAAKX,KAAL,EAAJ,CACjBY,EADiB,CACdP,aADc,EAEjB3D,GAFiB,CAEb,UAAAvG,IAAI;AAAA,WAAKA,IAAI,GAAGA,IAAI,CAAC2C,EAAR,GAAa,IAAtB;AAAA,GAFS,CAAtB;AAGA,SAAO4H,aAAP;AACH,CA1CkC,CAAvC;AA4CA,IAAMG,WAAW,gBAAGnB,sBAAc,CAC9B,cAACG,YAAY,CAACX,eAAD,CAAb,CAD8B,EAE9B,UAAA4B,UAAU;AAAA,SAAI,IAAIC,WAAJ,CAAgBD,UAAhB,EAA0C,CAAC,MAAD,CAA1C,EAAoD;AAAEE,IAAAA,aAAa,EAAE;AAAjB,GAApD,CAAJ;AAAA,CAFoB,CAAlC;AAIA,IAAMC,wBAAwB,gBAAGvB,sBAAc,CAC3C,CAACR,eAAD,EAAkBG,eAAlB,EAAmCwB,WAAnC,CAD2C,EAE3C,UAACrF,YAAD,EAAeW,YAAf,EAA6B+E,QAA7B;AAAA,SACI/E,YAAY,GAAG+E,QAAQ,CAACC,MAAT,CAAgBhF,YAAhB,EAA8BO,GAA9B,CAAkC,UAAA0E,CAAC;AAAA,WAAIA,CAAC,CAACtI,EAAN;AAAA,GAAnC,CAAH,GAAkD0C,YADlE;AAAA,CAF2C,CAA/C;AAKA,IAAM6F,kBAAkB,gBAAG3B,sBAAc,CACrC,CAACuB,wBAAD,eAA2BpB,YAAY,CAACX,eAAD,CAAvC,eAA0DS,kBAAkB,CAAClG,SAAS,CAACC,eAAX,CAA5E,CADqC,EAErC,UAAC4H,qBAAD,EAAwBR,UAAxB,EAAoCS,eAApC;AACI,MAAMC,wBAAwB,GAAG,IAAI/I,GAAJ,CAAQ6I,qBAAR,CAAjC;AACA,MAAM1F,eAAe,GAAQ,EAA7B;AACAkF,EAAAA,UAAU,CAACW,OAAX,CAAmB,UAAAtL,IAAI;AACnB,QAAI,CAACA,IAAL,EAAW,OAAX,KACK,IAAI,CAACqL,wBAAwB,CAACxI,GAAzB,CAA6B7C,IAAI,CAAC2C,EAAlC,CAAL,EAA4C;AAC7C;AACA8C,MAAAA,eAAe,CAACzF,IAAI,CAAC2C,EAAN,CAAf,GAA2B,IAA3B;AACH,KAHI,MAGE,IAAI,CAACyI,eAAD,IAAoBtL,UAAU,CAACI,QAAX,CAAoBF,IAApB,CAAxB,EAAmD;AACtD;AACAyF,MAAAA,eAAe,CAACzF,IAAI,CAAC2C,EAAN,CAAf,GAA2B,IAA3B;AACH;AACJ,GATD;AAUA,SAAO8C,eAAP;AACH,CAhBoC,CAAzC;AAkBA,IAAM8F,iBAAiB,gBAAGhC,sBAAc,CACpC,CAACK,gBAAD,EAAmBsB,kBAAnB,CADoC;AAEpC;AACA,UAACX,aAAD,EAAgB9E,eAAhB;AAAA,SAAoC8E,aAAa,CAACiB,MAAd,CAAqB,UAAA7I,EAAE;AAAA,WAAI,CAACA,EAAD,IAAO,CAAC8C,eAAe,CAAC9C,EAAD,CAA3B;AAAA,GAAvB,CAApC;AAAA,CAHoC,CAAxC;AAKA,IAAM8I,iBAAiB,gBAAGlC,sBAAc,CACpC,CAACJ,aAAD,EAAgBS,gBAAhB,CADoC;AAEpC;AACA,UAACR,SAAD,EAAYsC,cAAZ;AACI,MACI,CAACtC,SAAD,IACAA,SAAS,CAACuC,KAAV,GAAkBD,cAAc,CAACjJ,MAAf,GAAwB,CAD1C,IAEA2G,SAAS,CAAC7D,MAAV,IAAoBmG,cAAc,CAACtC,SAAS,CAACuC,KAAX,CAHtC,EAIE;AACE,WAAO,IAAP;AACH;;AACD,SAAOvC,SAAS,CAACuC,KAAjB;AACH,CAZmC,CAAxC;AAeA,IAAaC,SAAS,GAAG;AACrB;AACAlD,EAAAA,gBAAgB,EAAhBA,gBAFqB;AAGrBC,EAAAA,YAAY,EAAZA,YAHqB;AAIrBC,EAAAA,UAAU,EAAVA,UAJqB;AAKrBC,EAAAA,UAAU,EAAVA,UALqB;AAMrBE,EAAAA,eAAe,EAAfA,eANqB;AAOrBC,EAAAA,eAAe,EAAfA,eAPqB;AAQrBC,EAAAA,YAAY,EAAZA,YARqB;AASrBC,EAAAA,eAAe,EAAfA,eATqB;AAUrBC,EAAAA,aAAa,EAAbA,aAVqB;AAYrB;AACAS,EAAAA,gBAAgB,EAAhBA,gBAbqB;AAcrBc,EAAAA,WAAW,EAAXA,WAdqB;AAerBI,EAAAA,wBAAwB,EAAxBA,wBAfqB;AAgBrBI,EAAAA,kBAAkB,EAAlBA,kBAhBqB;AAiBrBK,EAAAA,iBAAiB,EAAjBA,iBAjBqB;AAkBrBE,EAAAA,iBAAiB,EAAjBA,iBAlBqB;AAoBrB;AACApC,EAAAA,aAAa,EAAbA,aArBqB;AAsBrBG,EAAAA,kBAAkB,EAAlBA,kBAtBqB;AAuBrBE,EAAAA,YAAY,EAAZA;AAvBqB,CAAlB;;AA2BP,IAAamC,WAAW,GAAG,SAAdA,WAAc,CAACjI,KAAD,EAAmB2B,MAAnB;AAAA,SACvBA,MAAM,GAAGL,aAAa,CAACtB,KAAD,CAAb,CAAqB2B,MAArB,CAAH,GAAkC,IADjB;AAAA,CAApB;AAEP,IAAauG,iBAAiB,GAAG,SAApBA,iBAAoB,CAAClI,KAAD,EAAmB5D,IAAnB;AAC7B;AACA;AACA,SAAO,CAAC,CAACiG,kBAAkB,CAACrC,KAAD,CAAlB,CAA0B5D,IAAI,CAAC2C,EAA/B,CAAT;AACH,CAJM;AAKP,IAAagE,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC/C,KAAD;AAC5B,MAAQuB,OAAR,GAAkCvB,KAAlC,CAAQuB,OAAR;AAAA,MAAiBe,YAAjB,GAAkCtC,KAAlC,CAAiBsC,YAAjB;AAEA,MAAM6F,aAAa,GAAGpG,MAAM,CAACC,IAAP,CAAYM,YAAZ,EAA0BK,GAA1B,CAA8B,UAAA5D,EAAE;AAAA,WAAIwC,OAAO,CAACxC,EAAD,CAAX;AAAA,GAAhC,CAAtB;;oCAHkDqJ;AAAAA,IAAAA;;;AAIlD,MAAMC,qBAAqB,GAAGD,OAAO,CAACE,MAAR,CAC1B,UAACC,SAAD,EAAYX,MAAZ;AAAA,WAAwBA,MAAM,GAAGW,SAAS,CAACX,MAAV,CAAiBA,MAAjB,CAAH,GAA8BW,SAA5D;AAAA,GAD0B,EAE1BJ,aAF0B,CAA9B;AAIA,SAAOE,qBAAP;AACH,CATM;AAUP,IAAanF,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAClD,KAAD,EAAmBS,YAAnB;AAAA,SACrCmC,4BAA4B,CAACnC,YAAD,CAA5B,CAA2CT,KAA3C,CADqC;AAAA,CAAlC;;AClPP;;;;AAGA,IAAMwI,sBAAsB,GAAG,SAAzBA,sBAAyB;;;AAC3B,MAAMC,aAAa,GAAG,IAAI/J,GAAJ,EAAtB;;AACA,MAAMgK,SAAS,GAAG,SAAZA,SAAY,CAACC,CAAD;AAAA,WAAmB,CAAC,CAACF,aAAa,CAACvJ,GAAd,CAAkByJ,CAAC,CAAC5J,EAApB,CAArB;AAAA,GAAlB;;AACA,MAAM6J,UAAU,GAAG,SAAbA,UAAa,CAACD,CAAD;AAAA,WAAmB,CAACF,aAAa,CAACxJ,GAAd,CAAkB0J,CAAC,CAAC5J,EAApB,CAApB;AAAA,GAAnB;;oCAH+B8J;AAAAA,IAAAA;;;AAK/B,MAAMC,mBAAmB,GAAGD,gBAAgB,CAAClG,GAAjB,CAAqB,UAAAoG,GAAG;AAChD,QAAMC,kBAAkB,GAAGD,GAAG,CAACnB,MAAJ,CAAWgB,UAAX,CAA3B;AACAI,IAAAA,kBAAkB,CAACrG,GAAnB,CAAuB+F,SAAvB;AACA,WAAOM,kBAAP;AACH,GAJ2B,CAA5B;AAKA,SAAO,cAAI5K,KAAJ,IAAwB6K,MAAxB,eAAkCH,mBAAlC,CAAP;AACH,CAXD;;AAaA,AAAO,IAAMI,yBAAyB,GAAG,SAA5BA,yBAA4B,CACrCC,cADqC,EAErCC,yBAFqC;AAAA,SAGvB,UAAAC,QAAQ;AACtB,8BAA0CtL,kBAAkB,CAAC,aAAD,EAAgBoL,cAAhB,CAA5D;AAAA,QAAQ1J,cAAR,uBAAQA,cAAR;AAAA,QAAwBtB,aAAxB,uBAAwBA,aAAxB;;;AAGA,QAAImL,mBAAJ;;AACA,QAAIlL,KAAK,CAACC,OAAN,CAAc+K,yBAAd,CAAJ,EAA8C;AAC1C,UAAMG,iBAAiB,GAAG,IAAI7K,GAAJ,CAAQ0K,yBAAR,CAA1B;AACAE,MAAAA,mBAAmB,GAAGE,kBAAkB,CAAC5B,MAAnB,CAA0B,UAAA/E,MAAM;AAAA,eAAI,CAAC0G,iBAAiB,CAACtK,GAAlB,CAAsB4D,MAAM,CAAC9D,EAA7B,CAAL;AAAA,OAAhC,CAAtB;AACH,KAHD,MAGO,IAAIqK,yBAAJ,EAA+B;AAClCE,MAAAA,mBAAmB,GAAG,EAAtB;AACH,KAFM,MAEA;AACHA,MAAAA,mBAAmB,GAAGE,kBAAtB;AACH;;AAED,QAAMC,WAAW,GAAGjB,sBAAsB,CAAC/I,cAAD,EAAiBiK,oBAAjB,EAAuCJ,mBAAvC,CAA1C;AACA,QAAMK,cAAc,GAAQ,EAA5B;AACAF,IAAAA,WAAW,CAAC9G,GAAZ,CAAgB,UAAAgG,CAAC;AAAA,aAAKA,CAAC,CAACiB,MAAF,GAAYD,cAAc,CAAChB,CAAC,CAACiB,MAAF,CAAS7K,EAAV,CAAd,GAA8B4J,CAAC,CAACiB,MAAF,CAAS/D,YAAnD,GAAmE,IAAxE;AAAA,KAAjB;AAEAwD,IAAAA,QAAQ,CAACQ,YAAY,CAACC,iBAAb,CAA+BX,cAA/B,CAAD,CAAR;AACAE,IAAAA,QAAQ,CAACQ,YAAY,CAACE,2BAAb,CAAyC5L,aAAzC,CAAD,CAAR;AACAkL,IAAAA,QAAQ,CAACQ,YAAY,CAACG,cAAb,CAA4BP,WAA5B,CAAD,CAAR;AACAJ,IAAAA,QAAQ,CAACQ,YAAY,CAACI,iBAAb,CAA+BN,cAA/B,CAAD,CAAR;AACAN,IAAAA,QAAQ,CAACa,mCAAmC,CAACT,WAAD,CAApC,CAAR;AACH,GA1BwC;AAAA,CAAlC;AA4BP,AAAO,IAAMS,mCAAmC,GAAG,SAAtCA,mCAAsC,CAACT,WAAD;AAAA,SAA4C,UAAAJ,QAAQ;AACnG,QAAMc,4BAA4B,GAAG,IAAIzL,GAAJ,CAAgB;AAEjD;AACA0L,IAAAA,aAAa,CAACC,gBAAd,CAA+BtL,EAHkB,CAAhB,CAArC;AAQA,QAAM4B,YAAY,GAAyB,EAA3C;AACA,QAAM2J,iBAAiB,GAAiB,EAAxC;AAEA,QAAMzJ,gBAAgB,GAAyB,EAA/C;AACA,QAAM0J,qBAAqB,GAAiB,EAA5C;;AAEA,QAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,SAAD,EAAkCC,OAAlC,EAAyDC,SAAzD;AACb,UAAID,OAAO,CAACC,SAAD,CAAX,EAAwB,OAAOD,OAAO,CAACC,SAAD,CAAd;AACxB,UAAMC,KAAK,GAAoB;AAAE5L,QAAAA,IAAI,EAAE2L,SAAR;AAAmBpK,QAAAA,aAAa,EAAE;AAAlC,OAA/B;AACAkK,MAAAA,SAAS,CAACnM,IAAV,CAAesM,KAAf;AACAF,MAAAA,OAAO,CAACC,SAAD,CAAP,GAAqBC,KAArB;AACA,aAAOA,KAAP;AACH,KAND;;AAQA,yDAAqBnB,WAArB,wCAAkC;AAAA,UAAvB5G,MAAuB;AAC9B,UAAMgI,MAAM,GAAGhI,MAAM,CAACgI,MAAtB;AACA,UAAI,CAACA,MAAL,EAAa;;AAEb,UAAIA,MAAM,CAACC,OAAP,IAAkB,CAACX,4BAA4B,CAAClL,GAA7B,CAAiC4D,MAAM,CAAC9D,EAAxC,CAAvB,EAAoE;AAChE,YAAI8L,MAAM,CAACD,KAAX,EAAkB;AACd,cAAMA,KAAK,GAAGJ,QAAQ,CAAC7J,YAAD,EAAe2J,iBAAf,EAAkCO,MAAM,CAACD,KAAzC,CAAtB;AACAA,UAAAA,KAAK,CAACrK,aAAN,CAAoBjC,IAApB,CAAyBuE,MAAM,CAAC9D,EAAhC;AACH,SAHD,MAGO;AACH4B,UAAAA,YAAY,CAACrC,IAAb,CAAkBuE,MAAM,CAAC9D,EAAzB;AACH;AACJ;;AAED,UAAI8L,MAAM,CAACE,WAAX,EAAwB;AACpB,YAAIF,MAAM,CAACD,KAAX,EAAkB;AACd,cAAMA,MAAK,GAAGJ,QAAQ,CAAC3J,gBAAD,EAAmB0J,qBAAnB,EAA0CM,MAAM,CAACD,KAAjD,CAAtB;;AACAA,UAAAA,MAAK,CAACrK,aAAN,CAAoBjC,IAApB,CAAyBuE,MAAM,CAAC9D,EAAhC;AACH,SAHD,MAGO;AACH8B,UAAAA,gBAAgB,CAACvC,IAAjB,CAAsBuE,MAAM,CAAC9D,EAA7B;AACH;AACJ;AACJ;;AAEDsK,IAAAA,QAAQ,CAACQ,YAAY,CAACmB,yBAAb,CAAuC,CAACrK,YAAD,EAAeE,gBAAf,CAAvC,CAAD,CAAR;AACH,GA/CkD;AAAA,CAA5C;AAiDP,AAAO,IAAMoK,kCAAkC,GAAG,SAArCA,kCAAqC,CAACxK,YAAD;AAAA,SAAgD,UAC9F4I,QAD8F,EAE9F6B,QAF8F;AAI9F,oBAA0BA,QAAQ,EAAlC;AAAA,QAAQ7K,aAAR,aAAQA,aAAR;;AACA,QAAMwC,MAAM,GAAGpC,YAAY,GAAGJ,aAAa,CAACI,YAAD,CAAhB,GAAiC,IAA5D;;AACA,QAAIoC,MAAM,IAAIA,MAAM,CAACS,cAArB,EAAqC;AACjC+F,MAAAA,QAAQ,CAACQ,YAAY,CAACsB,iBAAb,CAA+BtI,MAAM,CAACS,cAAtC,CAAD,CAAR;AACH;AACJ,GATiD;AAAA,CAA3C;AAWP,AAAO,IAAM8H,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAC3K,YAAD;AAAA,SAAgD,UAAC4I,QAAD,EAAW6B,QAAX;AACnF,QAAI,CAACzK,YAAL,EAAmB;;AAEnB,qBAA0EyK,QAAQ,EAAlF;AAAA,QAAsBG,WAAtB,cAAQ7H,YAAR;AAAA,QAA8C8H,QAA9C,cAAmC5H,SAAnC;AAAA,QAAwDrD,aAAxD,cAAwDA,aAAxD;;AACA,QAAMwC,MAAM,GAAGxC,aAAa,CAACI,YAAD,CAA5B;AACA,QAAI,CAACoC,MAAD,IAAW,CAACA,MAAM,CAAC2D,eAAvB,EAAwC;AAExC,QAAI+E,KAAK,GAAGD,QAAQ,KAAKxL,SAAS,CAAC4G,GAAvB,GAA6B5G,SAAS,CAAC0L,IAAvC,GAA8C1L,SAAS,CAAC4G,GAApE;;AACA,QAAI2E,WAAW,KAAK5K,YAApB,EAAkC;AAC9B8K,MAAAA,KAAK,GAAGzL,SAAS,CAAC4G,GAAlB;AACH;;AAED2C,IAAAA,QAAQ,CAACQ,YAAY,CAAC4B,OAAb,CAAqB;AAAEC,MAAAA,QAAQ,EAAEjL,YAAZ;AAA0B8K,MAAAA,KAAK,EAAEA;AAAjC,KAArB,CAAD,CAAR;AACH,GAbsC;AAAA,CAAhC;AAeP,AAAO,IAAMI,4BAA4B,GAAG,SAA/BA,4BAA+B,CAAC9I,MAAD;AAAA,SAAqC,UAACwG,QAAD,EAAW6B,QAAX;AAC7E,QAAMU,kBAAkB,GAAG/I,MAAM,CAAC+I,kBAAlC;AACA,QAAI,CAACA,kBAAL,EAAyB;AAEzB,QAAM5L,KAAK,GAAGkL,QAAQ,EAAtB;AACA,QAAMW,aAAa,GAAG,IAAInN,GAAJ,CAAgBqD,MAAM,CAACC,IAAP,CAAYK,kBAAkB,CAACrC,KAAD,CAA9B,CAAhB,CAAtB;AACA,QAAM8L,aAAa,GAAG,IAAIpN,GAAJ,CAAgBqD,MAAM,CAACC,IAAP,CAAYJ,qBAAqB,CAAC5B,KAAD,CAAjC,CAAhB,CAAtB;AAEA,QAAM+L,YAAY,GAAGH,kBAAkB,CAAC;AACpCC,MAAAA,aAAa,EAAbA,aADoC;AAEpC3G,MAAAA,OAAO,EAAE1D,kBAAkB,CAACxB,KAAD,CAFS;AAGpCuB,MAAAA,OAAO,EAAED,aAAa,CAACtB,KAAD,CAHc;AAIpC8L,MAAAA,aAAa,EAAbA;AAJoC,KAAD,CAAvC;AAMA,QAAI,CAACC,YAAL,EAAmB;;AAEnB,QAAIA,YAAY,CAAC5M,IAAb,KAAsB,CAA1B,EAA6B;AACzBkK,MAAAA,QAAQ,CAACQ,YAAY,CAACmC,cAAb,EAAD,CAAR;AACH,KAFD,MAEO;AACH3C,MAAAA,QAAQ,CAACQ,YAAY,CAACoC,WAAb,CAAyB;AAAE/G,QAAAA,OAAO,EAAE9G,KAAK,CAACiB,IAAN,CAAW0M,YAAX,CAAX;AAAqCG,QAAAA,KAAK,EAAE;AAA5C,OAAzB,CAAD,CAAR;AACH;AACJ,GArB2C;AAAA,CAArC;;ACrHP;;;;AAGA,IAAaC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACC,IAAD;AAAA,SAAmD,UAACC,SAAD,EAAYnB,QAAZ;AACtFzP,IAAAA,MAAM,CAACK,KAAP,6BAAuCsQ,IAAI,CAACrN,EAA5C,QAAmD,OAAnD,EAA4DqN,IAA5D;AACA,QAAMpM,KAAK,GAAGkL,QAAQ,EAAtB;AACA,QAAMrI,MAAM,GAAGzC,mBAAmB,CAACJ,KAAD,CAAnB,CAA2BoM,IAAI,CAACrN,EAAhC,CAAf;AACA,QAAMoB,yBAAyB,GAAGD,+BAA+B,CAACF,KAAD,CAAjE;;AACA,QAAI6C,MAAJ,EAAY;AACR,UAAI1C,yBAAJ,EAA+B;AAC3BmM,QAAAA,OAAO,CAACC,OAAR,CAAgBpM,yBAAyB,CAACiM,IAAD,CAAzC,WAAuD,UAAA1Q,KAAK;AAAA,iBACxDD,MAAM,CAACC,KAAP,uDAAiEA,KAAK,CAACgC,OAAvE,CADwD;AAAA,SAA5D;AAGH;AACJ,KAND,MAMO;AACHjC,MAAAA,MAAM,CAACI,IAAP,CACI,0CAAuCuQ,IAAI,CAACrN,EAA5C,6DADJ;AAGH;AACJ,GAhBsC;AAAA,CAAhC;AAkBP;;;;;;;AAMA,IAAayN,sBAAsB,GAAG,SAAzBA,sBAAyB,CAClC3J,MADkC,EAElC4J,OAFkC;AAAA,SAGpB,UAACpD,QAAD,EAAW6B,QAAX;AACdzP,IAAAA,MAAM,CAACK,KAAP,4BAAsC+G,MAAM,CAAC9D,EAA7C,QAAoD,SAApD,EAA+D8D,MAA/D,EAAuE,UAAvE,EAAmF4J,OAAnF;AACA,QAAMzM,KAAK,GAAGkL,QAAQ,EAAtB;AACA,QAAMjL,UAAU,GAAGF,gBAAgB,CAACC,KAAD,CAAnC;;AAEA,QAAI,CAACI,mBAAmB,CAACJ,KAAD,CAAnB,CAA2B6C,MAAM,CAAC9D,EAAlC,CAAL,EAA4C;AACxCtD,MAAAA,MAAM,CAACI,IAAP,CACI,kBAAegH,MAAM,CAAC9D,EAAtB,qNADJ;AAMH;;;AAGD,QAAMoJ,aAAa,GAAGzF,mBAAmB,CAAC1C,KAAD,CAAzC;AACA,QAAM0M,sBAAsB,GAAG7J,MAAM,CAACG,UAAP,GAAoBmF,aAAa,CAACP,MAAd,CAAqB/E,MAAM,CAACG,UAA5B,CAApB,GAA8DmF,aAA7F;;AACA,QAAItF,MAAM,CAACC,iBAAP,IAA4B4J,sBAAsB,CAAC7N,MAAvB,KAAkC,CAAlE,EAAqE;AACjEpD,MAAAA,MAAM,CAACI,IAAP,CACI,yCAAsCgH,MAAM,CAAC9D,EAA7C,0IADJ;AAKA;AACH;;AAED,QAAM4N,sBAAsB,GAAGhI,4BAA4B,CAAC3E,KAAD,CAA3D;AACA,QAAM4M,WAAW,GAAwB;AACrC3M,MAAAA,UAAU,EAAVA,UADqC;AAErCkI,MAAAA,aAAa,EAAbA,aAFqC;AAGrCuE,MAAAA,sBAAsB,EAAtBA,sBAHqC;AAIrCC,MAAAA,sBAAsB,EAAtBA;AAJqC,KAAzC;;AAQA,QAAMnG,eAAe,GAAG3D,MAAM,CAAC2D,eAA/B;AACA,QAAIA,eAAJ,EAAqB6C,QAAQ,CAAC+B,uBAAuB,CAACvI,MAAM,CAAC9D,EAAR,CAAxB,CAAR;;AAGrB,QAAMuE,cAAc,GAAGT,MAAM,CAACS,cAA9B;AACA,QAAIA,cAAJ,EAAoB+F,QAAQ,CAACQ,YAAY,CAACsB,iBAAb,CAA+B7H,cAA/B,CAAD,CAAR;;AAGpB,QAAMsG,MAAM,GAAG/G,MAAM,CAAC+G,MAAtB;AACA,QAAIA,MAAJ,EAAYP,QAAQ,CAACQ,YAAY,CAACgD,YAAb,CAA0BjD,MAAM,CAAC7K,EAAjC,CAAD,CAAR;;AAGZ,QAAM6M,kBAAkB,GAAG/I,MAAM,CAAC+I,kBAAlC;AACA,QAAIA,kBAAJ,EAAwBvC,QAAQ,CAACsC,4BAA4B,CAAC9I,MAAD,CAA7B,CAAR;;AAGxB,QAAMiK,MAAM,GAAGjK,MAAM,CAACiK,MAAtB;AACA,QAAIC,kBAAkB,GAAsCzP,SAA5D;;AACA,QAAIwP,MAAJ,EAAY;AACR,UAAI;AACAC,QAAAA,kBAAkB,GAAGD,MAAM,CAAC;AACxBjK,UAAAA,MAAM,EAANA,MADwB;AAExB4J,UAAAA,OAAO,EAAPA,OAFwB;AAGxBzM,UAAAA,KAAK,EAAE4M,WAHiB;AAIxBI,UAAAA,aAAa,EAAE3D,QAJS;AAKxB4D,UAAAA,aAAa,EAAE/B;AALS,SAAD,CAA3B;AAOH,OARD,CAQE,OAAOxP,KAAP,EAAc;AACZD,QAAAA,MAAM,CAACC,KAAP,CAAa,6CAA2CmH,MAAM,CAAC9D,EAAlD,+BAA6ErD,KAAK,CAACgC,OAAnF,CAAb;AACH;AACJ;AAGD;;;AACA,WAAO4O,OAAO,CAACC,OAAR,CAAgBQ,kBAAhB,EACFG,IADE,CACG,UAAAC,YAAY;AACd,UAAMf,IAAI,GAA2B;AACjCrN,QAAAA,EAAE,EAAE8D,MAAM,CAAC9D,EADsB;AAEjC8D,QAAAA,MAAM,EAANA,MAFiC;AAGjC4J,QAAAA,OAAO,EAAPA,OAHiC;AAIjCzM,QAAAA,KAAK,EAAE4M;AAJ0B,OAArC;AAMAQ,MAAAA,0BAA0B,CAAC/D,QAAD,EAAW+C,IAAX,EAAiBe,YAAjB,CAA1B;AACH,KATE,WAUI,UAAAzR,KAAK;AACRD,MAAAA,MAAM,CAACC,KAAP,CACI,6CAA2CmH,MAAM,CAAC9D,EAAlD,qDACkCrD,KAAK,CAACgC,OADxC,CADJ;AAIA,UAAM0O,IAAI,GAA2B;AACjCrN,QAAAA,EAAE,EAAE8D,MAAM,CAAC9D,EADsB;AAEjC8D,QAAAA,MAAM,EAANA,MAFiC;AAGjC4J,QAAAA,OAAO,EAAPA,OAHiC;AAIjCzM,QAAAA,KAAK,EAAE4M;AAJ0B,OAArC;AAMAQ,MAAAA,0BAA0B,CAAC/D,QAAD,EAAW+C,IAAX,EAAiB9O,SAAjB,CAA1B;AACH,KAtBE,CAAP;AAuBH,GA/FqC;AAAA,CAA/B;AAiGP,AAAO,IAAM8P,0BAA0B,GAAG,SAA7BA,0BAA6B,CACtC/D,QADsC,EAEtC+C,IAFsC,EAGtCe,YAHsC;AAKtC,MAAME,eAAe,GAAGF,YAAY,KAAK,IAAzC;AACA,MAAI,CAACE,eAAL,EAAsBhE,QAAQ,CAAC8C,uBAAuB,CAACC,IAAD,CAAxB,CAAR;AACzB,CAPM;;ACzIP,WAAYkB;AACRA,EAAAA,oBAAA,SAAA;AACAA,EAAAA,uBAAA,YAAA;AACAA,EAAAA,oBAAA,SAAA;AACH,CAJD,EAAYA,oBAAY,KAAZA,oBAAY,KAAA,CAAxB;;ACEA,WAAYC;AACR;AACAA,EAAAA,yBAAA,YAAA;AACAA,EAAAA,0BAAA,aAAA;AACAA,EAAAA,6BAAA,gBAAA;;AAGAA,EAAAA,6BAAA,gBAAA;AACAA,EAAAA,4BAAA,eAAA;AACAA,EAAAA,+BAAA,kBAAA;;AAGAA,EAAAA,2BAAA,cAAA;AACAA,EAAAA,kCAAA,qBAAA;AACAA,EAAAA,sBAAA,SAAA;AACAA,EAAAA,uBAAA,UAAA;AACAA,EAAAA,uBAAA,UAAA;AACAA,EAAAA,wBAAA,WAAA;AACAA,EAAAA,gCAAA,mBAAA;AACAA,EAAAA,gCAAA,mBAAA;;AAGAA,EAAAA,yBAAA,YAAA;AACAA,EAAAA,0BAAA,aAAA;AACAA,EAAAA,0BAAA,aAAA;AACAA,EAAAA,2BAAA,cAAA;;AAGAA,EAAAA,sBAAA,SAAA;AACAA,EAAAA,yBAAA,YAAA;AACAA,EAAAA,gCAAA,mBAAA;AACAA,EAAAA,gCAAA,mBAAA;;AAGAA,EAAAA,wBAAA,WAAA;AACAA,EAAAA,8BAAA,iBAAA;AACAA,EAAAA,4BAAA,eAAA;AACAA,EAAAA,sCAAA,yBAAA;AACAA,EAAAA,0BAAA,aAAA;AACAA,EAAAA,wBAAA,WAAA;AACAA,EAAAA,uBAAA,UAAA;AACAA,EAAAA,8BAAA,iBAAA;;AAGAA,EAAAA,yBAAA,YAAA;AACAA,EAAAA,wBAAA,WAAA;;AAGAA,EAAAA,sBAAA,SAAA;AACAA,EAAAA,yBAAA,YAAA;AACAA,EAAAA,sBAAA,SAAA;AACAA,EAAAA,wBAAA,WAAA;AACAA,EAAAA,uBAAA,UAAA;AACAA,EAAAA,0BAAA,aAAA;AACAA,EAAAA,sBAAA,SAAA;AACAA,EAAAA,yBAAA,YAAA;AACAA,EAAAA,uBAAA,UAAA;AACAA,EAAAA,uBAAA,UAAA;AACAA,EAAAA,sBAAA,SAAA;AACAA,EAAAA,qBAAA,QAAA;AACAA,EAAAA,sBAAA,SAAA;AACAA,EAAAA,uBAAA,UAAA;AACAA,EAAAA,0BAAA,aAAA;AACAA,EAAAA,uBAAA,UAAA;;AAGAA,EAAAA,uBAAA,UAAA;AACAA,EAAAA,wBAAA,WAAA;AACAA,EAAAA,yBAAA,YAAA;;AAGAA,EAAAA,sBAAA,SAAA;AACAA,EAAAA,wBAAA,WAAA;AACAA,EAAAA,wBAAA,WAAA;AACAA,EAAAA,qBAAA,QAAA;;AAGAA,EAAAA,qBAAA,QAAA;;AAGAA,EAAAA,uBAAA,UAAA;;AAGAA,EAAAA,qBAAA,QAAA;AACAA,EAAAA,uBAAA,UAAA;AACAA,EAAAA,sBAAA,SAAA;AACAA,EAAAA,uBAAA,UAAA;AACH,CAvFD,EAAYA,sBAAc,KAAdA,sBAAc,KAAA,CAA1B;;ICoBaC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAC5B3K,MAD4B,EAE5BiK,MAF4B;AAI5B,MAAIjK,MAAM,CAAC4K,aAAP,KAAyBnQ,SAAzB,KAAuCuF,MAAM,CAAC6K,OAAP,IAAkB7K,MAAM,CAACgI,MAAhE,CAAJ,EAA6E;AACzE,QAAM8C,YAAY,GACd,uDAAoD9K,MAAM,CAAC9D,EAA3D,+LADJ;AAKAtD,IAAAA,MAAM,CAACC,KAAP,CAAaiS,YAAb;AACA,UAAM,IAAIC,KAAJ,CAAUD,YAAV,CAAN;AACH;;AAED9K,EAAAA,MAAM,CAACiK,MAAP,GAAgBA,MAAhB;AACA,SAAOjK,MAAP;AACH,CAhBM;AAkBP;;;;;;AAKA,AAAO,IAAMgL,yBAAyB,GAAG,SAA5BA,yBAA4B,CACrCC,YADqC,EAErCC,SAFqC;AAIrC,MAAI,CAACD,YAAL,EAAmB,OAAOA,YAAP;AAEnB,MAAIC,SAAS,CAACD,YAAD,CAAb,EAA6B,OAAOA,YAAP;;AAE7B,MAAIA,YAAY,CAACE,aAAjB,EAAgC;AAC5B,WAAOH,yBAAyB,CAACC,YAAY,CAACE,aAAd,EAA6BD,SAA7B,CAAhC;AACH;;AAED,SAAO,IAAP;AACH,CAbM;AAeP,AAAO,IAAME,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACC,eAAD;AACjC,SAAO,CAAC,CAACL,yBAAyB,CAC9BK,eAD8B,EAE9B,UAACC,OAAD;AAAA,WAAkBA,OAAO,CAACC,OAAR,IAAmBD,OAAO,CAACC,OAAR,CAAgBC,WAAhB,OAAkC,QAAvE;AAAA,GAF8B,CAAlC;AAIH,CALM;AAOP,AAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAC9B9T,KAD8B,EAE9B+T,QAF8B,EAG9BC,WAH8B;AAK9B,MAAIA,WAAJ,EAAiB;AACb,WAAQ,OAAOhU,KAAP,KAAiBgU,WAAjB,GAA+BhU,KAA/B,GAAuC+T,QAA/C;AACH;;AACD,SAAQ/T,KAAK,KAAK8C,SAAV,GAAsB9C,KAAtB,GAA8B+T,QAAtC;AACH,CATM;;AC9DA,IAAME,WAAW,GAAG;AACvBC,EAAAA,WAAW,EAAE,qBAACC,MAAD;AAAA,WAIM,UAACtF,QAAD,EAAW6B,QAAX;AACf,UAAMlL,KAAK,GAAGkL,QAAQ,EAAtB;AACA,UAAIlL,KAAK,CAACoD,gBAAV,EAA4B;AAC5B,UAAM0E,cAAc,GAAGE,SAAS,CAACL,iBAAV,CAA4B3H,KAA5B,CAAvB;AACA,UAAM4O,eAAe,GAAG9G,cAAc,CACjC+G,KADmB,CACbF,MAAM,CAACG,UADM,EACMH,MAAM,CAACI,QAAP,GAAkB,CADxB,EAEnBnH,MAFmB,CAEZ,UAAA7I,EAAE;AAAA,eAAIA,EAAE,IAAI7C,UAAU,CAACU,YAAX,CAAwBoD,KAAK,CAACuB,OAAN,CAAcxC,EAAd,CAAxB,CAAV;AAAA,OAFU,CAAxB;AAGAsK,MAAAA,QAAQ,CACJQ,YAAY,CAACoC,WAAb,CAAyB;AACrB/G,QAAAA,OAAO,EAAE0J,eADY;AAErB1C,QAAAA,KAAK,EAAE,CAAC,CAACyC,MAAM,CAACzC;AAFK,OAAzB,CADI,CAAR;AAMH,KAjBY;AAAA;AADU,CAApB;;ACYA,IAAM8C,gBAAgB,GAAG;AAC5B;;;;AAIAC,EAAAA,cAAc,eAAEzB,gBAAgB,CAC5B;AACIzO,IAAAA,EAAE,EAAE,kBADR;AAEI0O,IAAAA,aAAa,EAAE;AAFnB,GAD4B,EAK5B;QAAGhB,eAAAA;QAASO,qBAAAA;QAAeC,qBAAAA;;AACvB,QAAIR,OAAO,CAACyC,SAAR,KAAsB,QAA1B,EAAoC;AAChC,UAAIhT,UAAU,CAACQ,UAAX,CAAsB+P,OAAO,CAACrQ,IAA9B,CAAJ,EAAyC;AACrC4Q,QAAAA,aAAa,CACTR,sBAAsB,CAACpC,aAAa,CAAC+E,SAAf,EAA0B;AAC5CC,UAAAA,UAAU,EAAE3C,OAAO,CAACrQ,IADwB;AAG5C;AACA;AACA;AACA6J,UAAAA,KAAK,EAAE,CAACwG,OAAO,CAACrQ,IAAT;AANqC,SAA1B,CADb,CAAb;AAUH;AACJ,KAbD,MAaO;AACH;AAEA,UAAMgH,gBAAgB,GAAGD,sBAAsB,CAAC8J,aAAa,EAAd,CAA/C;;AACA,UAAI/Q,UAAU,CAACU,YAAX,CAAwB6P,OAAO,CAACrQ,IAAhC,KAAyC,CAACgH,gBAA9C,EAAgE;AAC5D,YAAIqJ,OAAO,CAAC4C,OAAZ,EAAqB;AACjB;AACArC,UAAAA,aAAa,CACTnD,YAAY,CAACyF,eAAb,CAA6B;AACzB3N,YAAAA,MAAM,EAAE8K,OAAO,CAACrQ,IAAR,CAAa2C,EADI;AAEzBwQ,YAAAA,SAAS,EAAE;AAFc,WAA7B,CADS,CAAb;AAMAvC,UAAAA,aAAa,CACTnD,YAAY,CAAC2F,iBAAb,CAA+B;AAC3BzH,YAAAA,KAAK,EAAE0E,OAAO,CAACgD,gBADY;AAE3B9N,YAAAA,MAAM,EAAE8K,OAAO,CAACrQ,IAAR,CAAa2C;AAFM,WAA/B,CADS,CAAb;AAMH,SAdD,MAcO,IAAI0N,OAAO,CAACiD,QAAZ,EAAsB;AACzB;AACA,cAAMC,cAAc,GAAG3H,SAAS,CAACH,iBAAV,CAA4BoF,aAAa,EAAzC,CAAvB;;AACA,cAAI,OAAO0C,cAAP,KAA0B,QAA9B,EAAwC;AACpC;AACA,gBAAIb,UAAU,GAAGa,cAAjB;AACA,gBAAIZ,QAAQ,GAAGtC,OAAO,CAACgD,gBAAvB;;AACA,gBAAIX,UAAU,GAAGC,QAAjB,EAA2B;AAAA,0BACE,CAACA,QAAD,EAAWD,UAAX,CADF;AACtBA,cAAAA,UADsB;AACVC,cAAAA,QADU;AAE1B;;AAED/B,YAAAA,aAAa,CAACyB,WAAW,CAACC,WAAZ,CAAwB;AAAEI,cAAAA,UAAU,EAAVA,UAAF;AAAcC,cAAAA,QAAQ,EAARA;AAAd,aAAxB,CAAD,CAAb;AACH,WATD,MASO;AACH;AACA;AACA/B,YAAAA,aAAa,CACTnD,YAAY,CAACyF,eAAb,CAA6B;AACzB3N,cAAAA,MAAM,EAAE8K,OAAO,CAACrQ,IAAR,CAAa2C,EADI;AAEzBwQ,cAAAA,SAAS,EAAE;AAFc,aAA7B,CADS,CAAb;AAMAvC,YAAAA,aAAa,CACTnD,YAAY,CAAC2F,iBAAb,CAA+B;AAC3BzH,cAAAA,KAAK,EAAE0E,OAAO,CAACgD,gBADY;AAE3B9N,cAAAA,MAAM,EAAE8K,OAAO,CAACrQ,IAAR,CAAa2C;AAFM,aAA/B,CADS,CAAb;AAMH;AACJ,SA5BM,MA4BA;AACH;AACAiO,UAAAA,aAAa,CACTnD,YAAY,CAACyF,eAAb,CAA6B;AACzB3N,YAAAA,MAAM,EAAE8K,OAAO,CAACrQ,IAAR,CAAa2C,EADI;AAEzBwQ,YAAAA,SAAS,EAAE;AAFc,WAA7B,CADS,CAAb;AAMAvC,UAAAA,aAAa,CACTnD,YAAY,CAAC2F,iBAAb,CAA+B;AAC3BzH,YAAAA,KAAK,EAAE0E,OAAO,CAACgD,gBADY;AAE3B9N,YAAAA,MAAM,EAAE8K,OAAO,CAACrQ,IAAR,CAAa2C;AAFM,WAA/B,CADS,CAAb;AAMH;AACJ,OA1DD,MA0DO;AACH,YAAI,CAAC0N,OAAO,CAAC4C,OAAT,IAAoB,CAACjM,gBAAzB,EAA2C;AACvC4J,UAAAA,aAAa,CAACnD,YAAY,CAACmC,cAAb,EAAD,CAAb;AACH;;AACDgB,QAAAA,aAAa,CACTnD,YAAY,CAAC2F,iBAAb,CAA+B;AAC3BzH,UAAAA,KAAK,EAAE0E,OAAO,CAACgD,gBADY;AAE3B9N,UAAAA,MAAM,EAAE8K,OAAO,CAACrQ,IAAR,CAAa2C;AAFM,SAA/B,CADS,CAAb;AAMH;AACJ;AACJ,GA7F2B,CALJ;;AAoG5B;;;;AAIA6Q,EAAAA,iBAAiB,eAAEpC,gBAAgB,CAC/B;AACIzO,IAAAA,EAAE,EAAE,qBADR;AAEI0O,IAAAA,aAAa,EAAE;AAFnB,GAD+B,EAK/B;QAAGhB,gBAAAA;QAASO,sBAAAA;QAAeC,sBAAAA;AACvBD,IAAAA,aAAa,CACTnD,YAAY,CAAC2F,iBAAb,CAA+B;AAC3BzH,MAAAA,KAAK,EAAE0E,OAAO,CAACgD,gBADY;AAE3B9N,MAAAA,MAAM,EAAE8K,OAAO,CAACrQ,IAAR,CAAa2C;AAFM,KAA/B,CADS,CAAb;;AAMA,QAAI0N,OAAO,CAACoD,QAAZ,EAAsB;AAClB;AACA;AACA;AACA,UAAIrN,mBAAmB,CAACyK,aAAa,EAAd,CAAnB,KAAyC,CAA7C,EAAgD;AAC5CD,QAAAA,aAAa,CACTR,sBAAsB,CAACpC,aAAa,CAAC+E,SAAf,EAA0B;AAC5CC,UAAAA,UAAU,EAAE3C,OAAO,CAACrQ,IADwB;AAE5C6J,UAAAA,KAAK,EAAE,CAACwG,OAAO,CAACrQ,IAAT;AAFqC,SAA1B,CADb,CAAb;AAMH;AACJ,KAZD,MAYO,IAAIqQ,OAAO,CAACqD,QAAR,IAAoB5T,UAAU,CAACU,YAAX,CAAwB6P,OAAO,CAACrQ,IAAhC,CAAxB,EAA+D;AAClE4Q,MAAAA,aAAa,CACTnD,YAAY,CAACyF,eAAb,CAA6B;AACzB3N,QAAAA,MAAM,EAAE8K,OAAO,CAACrQ,IAAR,CAAa2C,EADI;AAEzBwQ,QAAAA,SAAS,EAAE9C,OAAO,CAAC4C;AAFM,OAA7B,CADS,CAAb;AAMH;AACJ,GAhC8B,CAxGP;;AA0I5B;;;AAGAU,EAAAA,cAAc,eAAEvC,gBAAgB,CAC5B;AACIzO,IAAAA,EAAE,EAAE,mBADR;AAEI0O,IAAAA,aAAa,EAAE;AAFnB,GAD4B,EAK5B;QAAGhB,gBAAAA;QAASO,sBAAAA;QAAeC,sBAAAA;AACvB,QAAM7Q,IAAI,GAAGqQ,OAAO,CAACuD,WAArB;;AACA,QAAI,CAAC9H,iBAAiB,CAAC+E,aAAa,EAAd,EAAkB7Q,IAAlB,CAAtB,EAA+C;AAC3C,UAAIF,UAAU,CAACU,YAAX,CAAwBR,IAAxB,CAAJ,EAAmC;AAC/B4Q,QAAAA,aAAa,CACTnD,YAAY,CAACoC,WAAb,CAAyB;AACrB/G,UAAAA,OAAO,EAAE,CAAC9I,IAAI,CAAC2C,EAAN,CADY;AAErBmN,UAAAA,KAAK,EAAE;AAFc,SAAzB,CADS,CAAb;AAMH;AACJ;AACJ,GAjB2B,CA7IJ;;AAgK5B;;;;AAIA+D,EAAAA,YAAY,eAAEzC,gBAAgB,CAC1B;AACIzO,IAAAA,EAAE,EAAE,iBADR;AAEI0O,IAAAA,aAAa,EAAE;AAFnB,GAD0B,EAK1B;QAAGhB,gBAAAA;QAASO,sBAAAA;QAAeC,sBAAAA;;AACvB,QAAI/E,iBAAiB,CAAC+E,aAAa,EAAd,EAAkBR,OAAO,CAACyD,WAA1B,CAArB,EAA6D;AACzD;AACA;AACH;;AAED,QAAQF,WAAR,GAAuCvD,OAAvC,CAAQuD,WAAR;AAAA,QAAqB7H,aAArB,GAAuCsE,OAAvC,CAAqBtE,aAArB;AACA,QAAMgI,YAAY,GAAGhI,aAAa,CAACtJ,MAAd,GAAuB,CAAvB,GAA2BsJ,aAA3B,GAA2C,CAAC6H,WAAD,CAAhE;AACAhD,IAAAA,aAAa,CACTR,sBAAsB,CAACpC,aAAa,CAACgG,SAAf,eACf3D,OADe;AAElBxG,MAAAA,KAAK,EAAEkK;AAFW,OADb,CAAb;AAMH,GAnByB,CApKF;;AAyL5B;;;;AAIAC,EAAAA,SAAS,eAAE5C,gBAAgB,CAAC;AACxBzO,IAAAA,EAAE,EAAE,YADoB;AAExB0O,IAAAA,aAAa,EAAE;AAFS,GAAD,CA7LC;;AAiM5B;;;AAGA4C,EAAAA,eAAe,eAAE7C,gBAAgB,CAAC;AAC9BzO,IAAAA,EAAE,EAAE,kBAD0B;AAE9B0O,IAAAA,aAAa,EAAE;AAFe,GAAD,CApML;;AAwM5B;;;;AAIA0B,EAAAA,SAAS,eAAE3B,gBAAgB,CAAC;AACxBzO,IAAAA,EAAE,EAAE,YADoB;AAExB0O,IAAAA,aAAa,EAAE;AAFS,GAAD,CA5MC;;AAgN5B;;;AAGApD,EAAAA,gBAAgB,eAAEmD,gBAAgB,CAC9B;AACIzO,IAAAA,EAAE,EAAE,oBADR;AAEI2O,IAAAA,OAAO,EAAE,CAAC,WAAD,CAFb;AAGI7C,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,mBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJC,MAAAA,WAAW,EAAE,KAHT;AAIJuF,MAAAA,IAAI,EAAE/C,sBAAc,CAACgD,gBAJjB;AAKJC,MAAAA,QAAQ,EAAE;AALN;AAHZ,GAD8B,EAY9B;QAAGxD,sBAAAA;QAAeC,sBAAAA;AACd,QAAM9L,YAAY,GAAGD,kBAAkB,CAAC+L,aAAa,EAAd,CAAvC;;AACA,QAAI/Q,UAAU,CAACQ,UAAX,CAAsByE,YAAtB,CAAJ,EAAyC;AACrC6L,MAAAA,aAAa,CACTR,sBAAsB,CAACpC,aAAa,CAAC+E,SAAf,EAA0B;AAC5CC,QAAAA,UAAU,EAAEjO,YADgC;AAE5C8E,QAAAA,KAAK,EAAE,CAAC9E,YAAD;AAFqC,OAA1B,CADb,CAAb;AAMH,KAPD,MAOO;AACH1F,MAAAA,MAAM,CAACI,IAAP,CACI,2EACI,oEAFR;AAIH;AACJ,GA3B6B,CAnNN;;AAgP5B;;;;AAIA4U,EAAAA,mBAAmB,eAAEjD,gBAAgB,CACjC;AACIzO,IAAAA,EAAE,EAAE,wBADR;AAEI0O,IAAAA,aAAa,EAAE;AAFnB,GADiC,EAKjC;QAAGhB,gBAAAA;QAASO,sBAAAA;QAAeC,sBAAAA;AACvB;AACA;AACA;AACA;AACA;AACA,QAAMyD,WAAW,GAAGzI,WAAW,CAACgF,aAAa,EAAd,EAAkBR,OAAO,CAAC5H,aAA1B,CAA/B;;AACA,QAAI6L,WAAJ,EAAiB;AACb,UAAMC,YAAY,GAAGzI,iBAAiB,CAAC+E,aAAa,EAAd,EAAkByD,WAAlB,CAAtC;;AACA,UAAI,CAACC,YAAL,EAAmB;AACf;AACA;AACA;AACA;AACA,YAAIzU,UAAU,CAACU,YAAX,CAAwB8T,WAAxB,CAAJ,EAA0C;AACtC1D,UAAAA,aAAa,CACTnD,YAAY,CAACoC,WAAb,CAAyB;AACrB/G,YAAAA,OAAO,EAAE,CAACuH,OAAO,CAAC5H,aAAT,CADY;AAErBqH,YAAAA,KAAK,EAAE;AAFc,WAAzB,CADS,CAAb;AAMH,SAPD,MAOO;AACHc,UAAAA,aAAa,CAACnD,YAAY,CAACmC,cAAb,EAAD,CAAb;AACH;AACJ;AACJ;;AAEDgB,IAAAA,aAAa,CACTnD,YAAY,CAAC+G,eAAb,CAA6B;AACzB/L,MAAAA,aAAa,EAAE4H,OAAO,CAAC5H,aADE;AAEzBgM,MAAAA,MAAM,EAAEpE,OAAO,CAACqE,OAAR,GAAkB,CAFD;AAGzBC,MAAAA,MAAM,EAAEtE,OAAO,CAACuE,OAAR,GAAkB;AAHD,KAA7B,CADS,CAAb;AAOH,GAvCgC;AApPT,CAAzB;;ACJA,IAAMC,cAAc,GAAG;AAC1B;;;AAGAC,EAAAA,aAAa,eAAE1D,gBAAgB,CAC3B;AACIzO,IAAAA,EAAE,EAAE,gBADR;AAEI2O,IAAAA,OAAO,EAAE,CAAC,OAAD,CAFb;AAGI5K,IAAAA,iBAAiB,EAAE,IAHvB;AAIIE,IAAAA,UAAU,EAAE9G,UAAU,CAACQ,UAJ3B;AAKImO,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,gBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJC,MAAAA,WAAW,EAAE,IAHT;AAIJH,MAAAA,KAAK,EAAE,SAJH;AAKJ0F,MAAAA,IAAI,EAAE/C,sBAAc,CAAC4D;AALjB;AALZ,GAD2B,EAc3B;QAAGnR,aAAAA;QAAOgN,qBAAAA;AACNA,IAAAA,aAAa,CACTR,sBAAsB,CAACwC,gBAAgB,CAACG,SAAlB,EAA6B;AAC/ClJ,MAAAA,KAAK,EAAEjG,KAAK,CAAC0M;AADkC,KAA7B,CADb,CAAb;AAKA,WAAOpP,SAAP;AACH,GArB0B,CAJL;;AA2B1B;;;AAGA8T,EAAAA,cAAc,eAAE5D,gBAAgB,CAAC;AAC7BzO,IAAAA,EAAE,EAAE,kBADyB;AAE7B2O,IAAAA,OAAO,EAAE,CAAC,QAAD,CAFoB;AAG7B7C,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,kBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJC,MAAAA,WAAW,EAAE,IAHT;AAIJH,MAAAA,KAAK,EAAE,SAJH;AAKJ0F,MAAAA,IAAI,EAAE/C,sBAAc,CAAC8D;AALjB,KAHqB;AAU7BzF,IAAAA,kBAAkB,EAAG;UAAG1G,gBAAAA;UAAS4G,sBAAAA;AAC7B,UAAMC,YAAY,GAAG,IAAIrN,GAAJ,EAArB;AACAwG,MAAAA,OAAO,CAACvC,GAAR,CAAY,UAAAhB,MAAM;AACd;AACA;AACA,YAAI,CAACmK,aAAa,CAAC7M,GAAd,CAAkB0C,MAAlB,CAAL,EAAgCoK,YAAY,CAAC7M,GAAb,CAAiByC,MAAjB;AACnC,OAJD;AAKA,aAAOoK,YAAP;AACH;AAlB4B,GAAD,CA9BN;;AAkD1B;;;AAGAuF,EAAAA,cAAc,eAAE9D,gBAAgB,CAAC;AAC7BzO,IAAAA,EAAE,EAAE,iBADyB;AAE7B2O,IAAAA,OAAO,EAAE,CAAC,QAAD,CAFoB;AAG7B7C,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,iBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJC,MAAAA,WAAW,EAAE,IAHT;AAIJH,MAAAA,KAAK,EAAE,SAJH;AAKJ0F,MAAAA,IAAI,EAAE/C,sBAAc,CAACvB;AALjB,KAHqB;AAU7BJ,IAAAA,kBAAkB,EAAG;UAAGC,sBAAAA;AACpB,UAAIA,aAAa,CAAC1M,IAAd,KAAuB,CAA3B,EAA8B,OAAO,IAAP;AAC9B,aAAO,IAAIT,GAAJ,EAAP;AACH;AAb4B,GAAD,CArDN;;AAoE1B;;;AAGA6S,EAAAA,cAAc,eAAE/D,gBAAgB,CAAC;AAC7BzO,IAAAA,EAAE,EAAE,kBADyB;AAE7BuE,IAAAA,cAAc,EAAE;AACZtF,MAAAA,IAAI,EAAEsP,oBAAY,CAACkE,IADP;AAEZC,MAAAA,WAAW,EAAE;AAFD,KAFa;AAM7B5G,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,qBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJwF,MAAAA,IAAI,EAAE/C,sBAAc,CAACmE,IAHjB;AAIJlB,MAAAA,QAAQ,EAAE;AAJN;AANqB,GAAD,CAvEN;;AAoF1B;;;;AAIAmB,EAAAA,iBAAiB,eAAEnE,gBAAgB,CAAC;AAChC;AACAzO,IAAAA,EAAE,EAAE,qBAF4B;AAGhCuE,IAAAA,cAAc,EAAE;AACZtF,MAAAA,IAAI,EAAEsP,oBAAY,CAACsE,OADP;AAEZH,MAAAA,WAAW,EAAE,EAFD;AAGZI,MAAAA,UAAU,EAAE;AAHA,KAHgB;AAQhChH,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,wBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJwF,MAAAA,IAAI,EAAE/C,sBAAc,CAACuE,OAHjB;AAIJtB,MAAAA,QAAQ,EAAE;AAJN;AARwB,GAAD,CAxFT;;AAuG1B;;;AAGAuB,EAAAA,cAAc,eAAEvE,gBAAgB,CAAC;AAC7BzO,IAAAA,EAAE,EAAE,kBADyB;AAE7BuE,IAAAA,cAAc,EAAE;AAAEtF,MAAAA,IAAI,EAAEsP,oBAAY,CAAC0E,IAArB;AAA2BH,MAAAA,UAAU,EAAE,GAAvC;AAA4CJ,MAAAA,WAAW,EAAE;AAAzD,KAFa;AAG7B5G,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,qBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJwF,MAAAA,IAAI,EAAE/C,sBAAc,CAAC0E,cAHjB;AAIJzB,MAAAA,QAAQ,EAAE;AAJN;AAHqB,GAAD,CA1GN;;AAoH1B;;;AAGA0B,EAAAA,eAAe,eAAE1E,gBAAgB,CAAC;AAC9BzO,IAAAA,EAAE,EAAE,oBAD0B;AAE9ByH,IAAAA,eAAe,EAAE,yBAACpK,IAAD;AAAA,aAA+BA,IAAI,GAAGA,IAAI,CAAC4C,IAAL,CAAUqP,WAAV,EAAH,GAA6B/Q,SAAhE;AAAA,KAFa;AAG9BuN,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,cADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJF,MAAAA,KAAK,EAAE;AAHH;AAHsB,GAAD,CAvHP;;AAgI1B;;;AAGAuH,EAAAA,eAAe,eAAE3E,gBAAgB,CAAC;AAC9BzO,IAAAA,EAAE,EAAE,oBAD0B;AAE9ByH,IAAAA,eAAe,EAAE,yBAACpK,IAAD;AAAA,aAA+BA,IAAI,GAAGA,IAAI,CAAC+C,IAAR,GAAe7B,SAAlD;AAAA,KAFa;AAG9BuN,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,cADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJF,MAAAA,KAAK,EAAE;AAHH;AAHsB,GAAD,CAnIP;;AA4I1B;;;AAGAwH,EAAAA,eAAe,eAAE5E,gBAAgB,CAAC;AAC9BzO,IAAAA,EAAE,EAAE,oBAD0B;AAE9ByH,IAAAA,eAAe,EAAE,yBAACpK,IAAD;AAAA,aAA+BA,IAAI,GAAGA,IAAI,CAACiB,OAAR,GAAkBC,SAArD;AAAA,KAFa;AAG9BuN,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,cADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJF,MAAAA,KAAK,EAAE;AAHH;AAHsB,GAAD,CA/IP;;AAwJ1B;;;AAGAyH,EAAAA,iBAAiB,eAAE7E,gBAAgB,CAAC;AAChCzO,IAAAA,EAAE,EAAE,qBAD4B;AAEhC2O,IAAAA,OAAO,EAAE,CAAC,QAAD,CAFuB;AAGhC9D,IAAAA,MAAM,EAAE;AACJ7K,MAAAA,EAAE,EAAEW,SAAS,CAACC,eADV;AAEJkG,MAAAA,YAAY,EAAE;AAFV,KAHwB;AAOhCgF,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,mBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJF,MAAAA,KAAK,EAAE;AAHH;AAPwB,GAAD,CA3JT;;AAwK1B;;;;AAIA0H,EAAAA,sBAAsB,eAAE9E,gBAAgB,CAAC;AACrCzO,IAAAA,EAAE,EAAE,2BADiC;AAErC6K,IAAAA,MAAM,EAAE;AACJ7K,MAAAA,EAAE,EAAEW,SAAS,CAACE,gBADV;AAEJiG,MAAAA,YAAY,EAAE;AAFV,KAF6B;AAMrCgF,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,oBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJF,MAAAA,KAAK,EAAE;AAHH;AAN6B,GAAD,CA5Kd;;AAwL1B;;;AAGA2H,EAAAA,gBAAgB,eAAE/E,gBAAgB,CAC9B;AACIzO,IAAAA,EAAE,EAAE,oBADR;AAEI2O,IAAAA,OAAO,EAAE,CAAC,QAAD;AAFb,GAD8B,EAK9B;QAAGT,sBAAAA;AACC,QAAM/K,gBAAgB,GAAGD,sBAAsB,CAACgL,aAAa,EAAd,CAA/C;AACA,QAAI/K,gBAAJ,EAAsBA,gBAAgB;AACzC,GAR6B,CA3LR;;AAqM1B;;;AAGAsQ,EAAAA,cAAc,eAAEhF,gBAAgB,CAAC;AAC7BzO,IAAAA,EAAE,EAAE,kBADyB;AAE7B6K,IAAAA,MAAM,EAAE;AACJ7K,MAAAA,EAAE,EAAEW,SAAS,CAACG,QADV;AAEJgG,MAAAA,YAAY,EAAE;AAFV,KAFqB;AAM7BgF,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,kBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJwF,MAAAA,IAAI,EAAE/C,sBAAc,CAACmE,IAHjB;AAIJlB,MAAAA,QAAQ,EAAE;AAJN;AANqB,GAAD;AAxMN,CAAvB;;ACVA,IAAMiC,YAAY,GAAG;AACxB;;;AAGAC,EAAAA,SAAS,eAAElF,gBAAgB,CAAC;AACxBzO,IAAAA,EAAE,EAAE,YADoB;AAExB+D,IAAAA,iBAAiB,EAAE,IAFK;AAGxB4K,IAAAA,OAAO,EAAE,CAAC,QAAD,CAHe;AAIxB7C,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,gBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJC,MAAAA,WAAW,EAAE,IAHT;AAIJH,MAAAA,KAAK,EAAE,SAJH;AAKJ0F,MAAAA,IAAI,EAAE/C,sBAAc,CAACoF;AALjB;AAJgB,GAAD,CAJH;;AAgBxB;;;AAGAC,EAAAA,YAAY,eAAEpF,gBAAgB,CAAC;AAC3BzO,IAAAA,EAAE,EAAE,eADuB;AAE3B8L,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,eADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJ+H,MAAAA,OAAO,EAAE,iBAHL;AAIJvC,MAAAA,IAAI,EAAE/C,sBAAc,CAACuF;AAJjB;AAFmB,GAAD,CAnBN;;AA4BxB;;;AAGAC,EAAAA,WAAW,eAAEvF,gBAAgB,CAAC;AAC1BzO,IAAAA,EAAE,EAAE,cADsB;AAE1B8L,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,cADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJ+H,MAAAA,OAAO,EAAE,cAHL;AAIJvC,MAAAA,IAAI,EAAE/C,sBAAc,CAACyF;AAJjB;AAFkB,GAAD,CA/BL;;AAwCxB;;;AAGAC,EAAAA,aAAa,eAAEzF,gBAAgB,CAAC;AAC5BzO,IAAAA,EAAE,EAAE,gBADwB;AAE5B+D,IAAAA,iBAAiB,EAAE,IAFS;AAG5B+H,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,gBADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJC,MAAAA,WAAW,EAAE,IAHT;AAIJH,MAAAA,KAAK,EAAE,SAJH;AAKJ0F,MAAAA,IAAI,EAAE/C,sBAAc,CAAC2F;AALjB;AAHoB,GAAD,CA3CP;;AAsDxB;;;AAGAC,EAAAA,WAAW,eAAE3F,gBAAgB,CAAC;AAC1BzO,IAAAA,EAAE,EAAE,cADsB;AAE1B+D,IAAAA,iBAAiB,EAAE,IAFO;AAG1B4K,IAAAA,OAAO,EAAE,CAAC,QAAD,CAHiB;AAI1B7C,IAAAA,MAAM,EAAE;AACJ7L,MAAAA,IAAI,EAAE,cADF;AAEJ8L,MAAAA,OAAO,EAAE,IAFL;AAGJC,MAAAA,WAAW,EAAE,IAHT;AAIJH,MAAAA,KAAK,EAAE,SAJH;AAKJ0F,MAAAA,IAAI,EAAE/C,sBAAc,CAAC6F;AALjB;AAJkB,GAAD;AAzDL,CAArB;;ICGMhJ,aAAa,6BACnB4E,gBADmB,EAEnBiC,cAFmB,EAGnBwB,YAHmB,CAAnB;AAMP,AAAO,IAAM/I,oBAAoB,GAAG,CAChCU,aAAa,CAAC6E,cADkB,EAEhC7E,aAAa,CAACwF,iBAFkB,EAGhCxF,aAAa,CAAC2F,cAHkB,EAIhC3F,aAAa,CAAC6F,YAJkB,EAKhC7F,aAAa,CAACgG,SALkB,EAMhChG,aAAa,CAACiG,eANkB,EAOhCjG,aAAa,CAAC+E,SAPkB,EAQhC/E,aAAa,CAACC,gBARkB,EAShCD,aAAa,CAACqG,mBATkB,CAA7B;AAYP,IAAajH,kBAAkB,GAAG,CAC9BY,aAAa,CAAC8G,aADgB,EAE9B9G,aAAa,CAACgH,cAFgB,EAG9BhH,aAAa,CAACkH,cAHgB,EAI9BlH,aAAa,CAACmH,cAJgB;AAM9B;AACAnH,aAAa,CAAC2H,cAPgB,EAQ9B3H,aAAa,CAAC8H,eARgB,EAS9B9H,aAAa,CAAC+H,eATgB,EAU9B/H,aAAa,CAACgI,eAVgB,EAW9BhI,aAAa,CAACiI,iBAXgB,EAY9BjI,aAAa,CAACkI,sBAZgB,EAa9BlI,aAAa,CAACmI,gBAbgB,CAA3B;;ACpBA,IAAMc,gBAAgB,GAAc;AACvCpT,EAAAA,UAAU,EAAE,mBAD2B;AAGvCE,EAAAA,yBAAyB,EAAE,IAHY;AAKvCgJ,EAAAA,cAAc,EAAE,EALuB;AAMvCmK,EAAAA,wBAAwB,EAAE,EANa;AAOvCjT,EAAAA,aAAa,EAAE,EAPwB;AAQvCE,EAAAA,aAAa,EAAE,EARwB;AASvCI,EAAAA,YAAY,EAAE,EATyB;AAUvCE,EAAAA,gBAAgB,EAAE,EAVqB;AAYvC0S,EAAAA,cAAc,EAAE,IAZuB;AAavCC,EAAAA,wBAAwB,EAAE,EAba;AAcvCzS,EAAAA,WAAW,EAAE,EAd0B;AAgBvCM,EAAAA,QAAQ,EAAE,EAhB6B;AAiBvCoS,EAAAA,kBAAkB,EAAE,EAjBmB;AAkBvClS,EAAAA,OAAO,EAAE,EAlB8B;AAmBvC2D,EAAAA,OAAO,EAAE,EAnB8B;AAoBvCzD,EAAAA,YAAY,EAAE,EApByB;AAsBvCkF,EAAAA,aAAa,EAAE,EAtBwB;AAuBvC9E,EAAAA,eAAe,EAAE,EAvBsB;AAyBvCK,EAAAA,gBAAgB,EAAE,IAzBqB;AA0BvCE,EAAAA,YAAY,EAAE,EA1ByB;AA2BvCsR,EAAAA,UAAU,EAAE,eA3B2B;AA6BvCpR,EAAAA,YAAY,EAAE,EA7ByB;AA8BvCc,EAAAA,gBAAgB,EAAE,KA9BqB;AAgCvCE,EAAAA,cAAc,EAAE8G,aAAa,CAAC2H,cAAd,CAA6BzO,cAhCN;AAkCvCE,EAAAA,YAAY,EAAE,IAlCyB;AAmCvCE,EAAAA,SAAS,EAAE5D,SAAS,CAAC4G,GAnCkB;AAqCvC9C,EAAAA,SAAS,EAAE,EArC4B;AAuCvCI,EAAAA,kBAAkB,EAAE,IAvCmB;AAwCvCE,EAAAA,gBAAgB,EAAE,GAxCqB;AAyCvCE,EAAAA,kBAAkB,EAAE,KAzCmB;AA0CvCE,EAAAA,4BAA4B,EAAE,IA1CS;AA4CvCkB,EAAAA,SAAS,EAAE,IA5C4B;AA8CvChB,EAAAA,kBAAkB,EAAE,KA9CmB;AA+CvCE,EAAAA,iBAAiB,EAAE;AA/CoB,CAApC;;ACcP,IAAMiP,QAAQ,GAAG;AACbC,EAAAA,4BADa,wCAET5T,KAFS,EAGT6C,MAHS;;;AAKT7C,IAAAA,KAAK,CAACG,yBAAN,sBAAkC0C,MAAM,CAAC4J,OAAzC,8BAAoD,IAApD;AACH,GANY;AAOb3C,EAAAA,iBAPa,6BAOK9J,KAPL,EAOuB6C,MAPvB;AAQT7C,IAAAA,KAAK,CAACmJ,cAAN,GAAuBtG,MAAM,CAAC4J,OAA9B;AACH,GATY;AAUb1C,EAAAA,2BAVa,uCAUe/J,KAVf,EAUiC6C,MAVjC;AAWT7C,IAAAA,KAAK,CAACsT,wBAAN,GAAiCzQ,MAAM,CAAC4J,OAAxC;AACH,GAZY;AAabzC,EAAAA,cAba,0BAaEhK,KAbF,EAaoB6C,MAbpB;AAcT,QAAMxC,aAAa,GAAkB,EAArC;AACAwC,IAAAA,MAAM,CAAC4J,OAAP,CAAe9J,GAAf,CAAmB,UAAAgG,CAAC;AAAA,aAAKtI,aAAa,CAACsI,CAAC,CAAC5J,EAAH,CAAb,GAAsB4J,CAA3B;AAAA,KAApB;AACA,QAAMzD,OAAO,GAAGrC,MAAM,CAAC4J,OAAP,CAAe9J,GAAf,CAAmB,UAAAgG,CAAC;AAAA,aAAIA,CAAC,CAAC5J,EAAN;AAAA,KAApB,CAAhB;AAEAiB,IAAAA,KAAK,CAACK,aAAN,GAAsBA,aAAtB;AACAL,IAAAA,KAAK,CAACO,aAAN,GAAsB2E,OAAtB;AACH,GApBY;AAqBb8F,EAAAA,yBArBa,qCAqBahL,KArBb,EAqB+B6C,MArB/B;2BAsBsCA,MAAM,CAAC4J;AAArDzM,IAAAA,KAAK,CAACW;AAAcX,IAAAA,KAAK,CAACa;AAC9B,GAvBY;AAwBbgT,EAAAA,iBAxBa,6BAwBK7T,KAxBL,EAwBuB6C,MAxBvB;AAyBT,QAAM0Q,cAAc,GAAG1Q,MAAM,CAAC4J,OAA9B;;AACA,8BAAuD1O,kBAAkB,CAAC,aAAD,EAAgBwV,cAAhB,CAAzE;AAAA,QAAwBxS,WAAxB,uBAAQtB,cAAR;AAAA,QAAqCtB,aAArC,uBAAqCA,aAArC;;AACA6B,IAAAA,KAAK,CAACuT,cAAN,GAAuBA,cAAvB;AACAvT,IAAAA,KAAK,CAACe,WAAN,GAAoBA,WAApB;AACAf,IAAAA,KAAK,CAACwT,wBAAN,GAAiCrV,aAAjC;AACH,GA9BY;AA+Bb2V,EAAAA,WA/Ba,uBA+BD9T,KA/BC,EA+BiB6C,MA/BjB;AAgCT,QAAMxB,QAAQ,GAAGwB,MAAM,CAAC4J,OAAxB;;AACA,+BAAiD1O,kBAAkB,CAAC,OAAD,EAAUsD,QAAV,CAAnE;AAAA,QAAwB4E,KAAxB,wBAAQxG,cAAR;AAAA,QAA+BtB,aAA/B,wBAA+BA,aAA/B;;AACA6B,IAAAA,KAAK,CAACqB,QAAN,GAAiBA,QAAjB;AACArB,IAAAA,KAAK,CAACyT,kBAAN,GAA2BtV,aAA3B;AAEA,QAAMoD,OAAO,GAAY,EAAzB;AACA0E,IAAAA,KAAK,CAACyB,OAAN,CAAc,UAAAL,CAAC;AACX,UAAIA,CAAJ,EAAO9F,OAAO,CAAC8F,CAAC,CAACtI,EAAH,CAAP,GAAgBsI,CAAhB;AACV,KAFD;AAGA,QAAMnC,OAAO,GAAGe,KAAK,CAACtD,GAAN,CAAU,UAAA0E,CAAC;AAAA,aAAKA,CAAC,GAAGA,CAAC,CAACtI,EAAL,GAAU,IAAhB;AAAA,KAAX,CAAhB;AACA,QAAM0C,YAAY,GAAGyD,OAAO,CAAC0C,MAAR,CAAe,UAAAP,CAAC;AAAA,aAAI,CAAC,CAACA,CAAN;AAAA,KAAhB,CAArB;AAEArH,IAAAA,KAAK,CAACuB,OAAN,GAAgBA,OAAhB;AACAvB,IAAAA,KAAK,CAACkF,OAAN,GAAgBA,OAAhB;AACAlF,IAAAA,KAAK,CAACyB,YAAN,GAAqBA,YAArB;;AAGA,oCAA6BM,MAAM,CAACC,IAAP,CAAYhC,KAAK,CAACsC,YAAlB,CAA7B,kCAA8D;AAAzD,UAAMyR,cAAc,mBAApB;;AACD,UAAI,CAACxS,OAAO,CAACwS,cAAD,CAAZ,EAA8B;AAC1B,eAAO/T,KAAK,CAACsC,YAAN,CAAmByR,cAAnB,CAAP;AACH;AACJ;AACJ,GAtDY;AAuDbC,EAAAA,gBAvDa,4BAuDIhU,KAvDJ,EAuDsB6C,MAvDtB;AAwDT7C,IAAAA,KAAK,CAAC2G,aAAN,GAAsB9D,MAAM,CAAC4J,OAA7B;AACH,GAzDY;AA0DbwH,EAAAA,gBA1Da,4BA0DIjU,KA1DJ,EA0DsB6C,MA1DtB;AA2DT7C,IAAAA,KAAK,CAAC6B,eAAN,GAAwBgB,MAAM,CAAC4J,OAA/B;;AAGA,sCAA6B1K,MAAM,CAACC,IAAP,CAAYhC,KAAK,CAACsC,YAAlB,CAA7B,qCAA8D;AAAzD,UAAMyR,cAAc,qBAApB;;AACD,UAAI/T,KAAK,CAAC6B,eAAN,CAAsBkS,cAAtB,CAAJ,EAA2C;AACvC,eAAO/T,KAAK,CAACsC,YAAN,CAAmByR,cAAnB,CAAP;AACH;AACJ;AACJ,GAnEY;AAoEbG,EAAAA,mBApEa,+BAoEOlU,KApEP,EAoEyB6C,MApEzB;AAqET7C,IAAAA,KAAK,CAACkC,gBAAN,GAAyBW,MAAM,CAAC4J,OAAhC;AACH,GAtEY;AAuEb0H,EAAAA,eAvEa,2BAuEGnU,KAvEH,EAuEqB6C,MAvErB;AAwET7C,IAAAA,KAAK,CAACoC,YAAN,GAAqBS,MAAM,CAAC4J,OAA5B;AACH,GAzEY;AA0Eb4E,EAAAA,cA1Ea,0BA0EErR,KA1EF;AA2ETA,IAAAA,KAAK,CAACkF,OAAN,CACK0C,MADL,CACY,UAAA7I,EAAE;AAAA,aAAIA,EAAE,IAAI7C,UAAU,CAACU,YAAX,CAAwBoD,KAAK,CAACuB,OAAN,CAAcxC,EAAd,CAAxB,CAAV;AAAA,KADd,EAEK4D,GAFL,CAES,UAAA5D,EAAE;AAAA,aAAKA,EAAE,GAAIiB,KAAK,CAACsC,YAAN,CAAmBvD,EAAnB,IAAyB,IAA7B,GAAqC,IAA5C;AAAA,KAFX;AAGH,GA9EY;AA+EbkN,EAAAA,WA/Ea,uBA+EDjM,KA/EC,EA+EiB6C,MA/EjB;AAgFT,QAAI7C,KAAK,CAACoD,gBAAV,EAA4B;AAC5B,QAAIP,MAAM,CAAC4J,OAAP,CAAeP,KAAnB,EAA0BlM,KAAK,CAACsC,YAAN,GAAqB,EAArB;AAC1BO,IAAAA,MAAM,CAAC4J,OAAP,CAAevH,OAAf,CACK0C,MADL,CACY,UAAA7I,EAAE;AAAA,aAAIA,EAAE,IAAI7C,UAAU,CAACU,YAAX,CAAwBoD,KAAK,CAACuB,OAAN,CAAcxC,EAAd,CAAxB,CAAV;AAAA,KADd,EAEK4D,GAFL,CAES,UAAA5D,EAAE;AAAA,aAAKiB,KAAK,CAACsC,YAAN,CAAmBvD,EAAnB,IAAyB,IAA9B;AAAA,KAFX;AAGH,GArFY;AAsFbuQ,EAAAA,eAtFa,2BAsFGtP,KAtFH,EAsFqB6C,MAtFrB;AAuFT,QAAI7C,KAAK,CAACoD,gBAAV,EAA4B;AAC5B,QAAMgR,QAAQ,GAAG,CAAC,CAACpU,KAAK,CAACsC,YAAN,CAAmBO,MAAM,CAAC4J,OAAP,CAAe9K,MAAlC,CAAnB;AACA,QAAIkB,MAAM,CAAC4J,OAAP,CAAe8C,SAAnB,EAA8BvP,KAAK,CAACsC,YAAN,GAAqB,EAArB;AAC9B,QAAI8R,QAAJ,EAAc,OAAOpU,KAAK,CAACsC,YAAN,CAAmBO,MAAM,CAAC4J,OAAP,CAAe9K,MAAlC,CAAP,CAAd,KACK,IAAIzF,UAAU,CAACU,YAAX,CAAwBoD,KAAK,CAACuB,OAAN,CAAcsB,MAAM,CAAC4J,OAAP,CAAe9K,MAA7B,CAAxB,CAAJ,EAAmE;AACpE3B,MAAAA,KAAK,CAACsC,YAAN,CAAmBO,MAAM,CAAC4J,OAAP,CAAe9K,MAAlC,IAA4C,IAA5C;AACH;AACJ,GA9FY;AA+FbqK,EAAAA,cA/Fa,0BA+FEhM,KA/FF;AAgGT,QAAIA,KAAK,CAACoD,gBAAV,EAA4B;AAC5B,QAAIrB,MAAM,CAACC,IAAP,CAAYhC,KAAK,CAACsC,YAAlB,EAAgCzD,MAAhC,KAA2C,CAA/C,EAAkDmB,KAAK,CAACsC,YAAN,GAAqB,EAArB;AACrD,GAlGY;AAmGb+R,EAAAA,oBAnGa,gCAmGQrU,KAnGR,EAmG0B6C,MAnG1B;AAoGT7C,IAAAA,KAAK,CAACoD,gBAAN,GAAyBP,MAAM,CAAC4J,OAAhC;AACA,QAAI1K,MAAM,CAACC,IAAP,CAAYhC,KAAK,CAACsC,YAAlB,EAAgCzD,MAAhC,KAA2C,CAA/C,EAAkDmB,KAAK,CAACsC,YAAN,GAAqB,EAArB;AACrD,GAtGY;AAuGb6I,EAAAA,iBAvGa,6BAuGKnL,KAvGL,EAuGuB6C,MAvGvB;AAwGT7C,IAAAA,KAAK,CAACsD,cAAN,GAAuBT,MAAM,CAAC4J,OAA9B;AACH,GAzGY;AA0GbhB,EAAAA,OA1Ga,mBA0GLzL,KA1GK,EA0Ga6C,MA1Gb;AA2GT7C,IAAAA,KAAK,CAACwD,YAAN,GAAqBX,MAAM,CAAC4J,OAAP,CAAef,QAApC;AACA1L,IAAAA,KAAK,CAAC0D,SAAN,GAAkBb,MAAM,CAAC4J,OAAP,CAAelB,KAAjC;AACH,GA7GY;AA8GbtB,EAAAA,iBA9Ga,6BA8GKjK,KA9GL,EA8GuB6C,MA9GvB;AA+GT,sCAAuBd,MAAM,CAACC,IAAP,CAAYa,MAAM,CAAC4J,OAAnB,CAAvB,qCAAoD;AAA/C,UAAM3I,QAAQ,qBAAd;AACD,UAAIA,QAAQ,IAAI9D,KAAK,CAAC4D,SAAtB,EAAiC;AACjC5D,MAAAA,KAAK,CAAC4D,SAAN,CAAgBE,QAAhB,IAA4BjB,MAAM,CAAC4J,OAAP,CAAe3I,QAAf,CAA5B;AACH;AACJ,GAnHY;AAoHb+I,EAAAA,YApHa,wBAoHA7M,KApHA,EAoHkB6C,MApHlB;AAqHT7C,IAAAA,KAAK,CAAC4D,SAAN,CAAgBf,MAAM,CAAC4J,OAAvB,IAAkC,CAACzM,KAAK,CAAC4D,SAAN,CAAgBf,MAAM,CAAC4J,OAAvB,CAAnC;AACH,GAtHY;AAuHb6H,EAAAA,qBAvHa,iCAuHStU,KAvHT,EAuH2B6C,MAvH3B;AAwHT7C,IAAAA,KAAK,CAACgE,kBAAN,GAA2BnB,MAAM,CAAC4J,OAAlC;AACH,GAzHY;AA0Hb8H,EAAAA,mBA1Ha,+BA0HOvU,KA1HP,EA0HyB6C,MA1HzB;AA2HT7C,IAAAA,KAAK,CAACkE,gBAAN,GAAyBrB,MAAM,CAAC4J,OAAhC;AACH,GA5HY;AA6Hb+H,EAAAA,qBA7Ha,iCA6HSxU,KA7HT,EA6H2B6C,MA7H3B;AA8HT7C,IAAAA,KAAK,CAACoE,kBAAN,GAA2BvB,MAAM,CAAC4J,OAAlC;AACH,GA/HY;AAgIbgI,EAAAA,+BAhIa,2CAgImBzU,KAhInB,EAgIqC6C,MAhIrC;AAiIT7C,IAAAA,KAAK,CAACsE,4BAAN,GAAqCzB,MAAM,CAAC4J,OAA5C;AACH,GAlIY;AAmIb+C,EAAAA,iBAnIa,6BAmIKxP,KAnIL,EAmIuB6C,MAnIvB;AAoIT7C,IAAAA,KAAK,CAACwF,SAAN,GAAkB3C,MAAM,CAAC4J,OAAzB;AACH,GArIY;AAsIbiI,EAAAA,qBAtIa,iCAsIS1U,KAtIT,EAsI2B6C,MAtI3B;AAuIT7C,IAAAA,KAAK,CAACwE,kBAAN,GAA2B3B,MAAM,CAAC4J,OAAlC;AACH,GAxIY;AAyIbmE,EAAAA,eAzIa,2BAyIG5Q,KAzIH,EAyIqB6C,MAzIrB;AA0IT7C,IAAAA,KAAK,CAAC0E,iBAAN,GAA0B7B,MAAM,CAAC4J,OAAjC;AACH,GA3IY;AA4IbkI,EAAAA,eA5Ia,2BA4IG3U,KA5IH;AA6IT,QAAI,CAACA,KAAK,CAAC0E,iBAAX,EAA8B;AAC9B1E,IAAAA,KAAK,CAAC0E,iBAAN,GAA0B,IAA1B;AACH;AA/IY,CAAjB;;AAkJO,gCAAwDkQ,mBAAW,CAAC;AACvE5V,EAAAA,IAAI,EAAE,MADiE;AAEvE6V,EAAAA,YAAY,EAAExB,gBAFyD;AAGvEM,EAAAA,QAAQ,EAARA;AAHuE,CAAD,CAAnE;AAAA,IAAiB9J,YAAjB,gBAAQiL,OAAR;AAAA,IAAwCC,WAAxC,gBAA+BC,OAA/B;;ACzJA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD;AAC5Bra,EAAAA,eAAS,CAAC;AACN,QAAMsa,gBAAgB,GAAGC,KAAK,CAAC;AAAA,aAAM/S,kBAAkB,CAAC6S,KAAK,CAAChK,QAAN,EAAD,CAAxB;AAAA,KAAD,CAA9B;;AACA,QAAMmK,iBAAiB,GAAG,SAApBA,iBAAoB,CACtBtJ,YADsB,EAEtBuJ,YAFsB;AAItB;AACA;AACA,UAAIvJ,YAAY,KAAKuJ,YAArB,EAAmC;;AAGnC,UAAMC,gBAAgB,GAAGhT,qBAAqB,CAAC2S,KAAK,CAAChK,QAAN,EAAD,CAA9C;AACA,UAAMsK,SAAS,GAAG,IAAI9W,GAAJ,CAAgB6W,gBAAhB,CAAlB;AACAL,MAAAA,KAAK,CAAC7L,QAAN,CACImD,sBAAsB,CAACpC,aAAa,CAACiG,eAAf,EAAgC;AAClDmF,QAAAA,SAAS,EAATA;AADkD,OAAhC,CAD1B;AAKH,KAhBD;;AAkBA,QAAMC,oBAAoB,GAAG,CACzBP,KAAK,CAACQ,SAAN,CAAgBP,gBAAgB,CAACE,iBAAD,CAAhC,CADyB,CAA7B;AAGA,WAAO;AACH,2DAA0BI,oBAA1B;AAAA,YAAWE,WAAX;AAAgDA,QAAAA,WAAW;AAA3D;AACH,KAFD;AAGH,GA1BQ,EA0BN,CAACT,KAAD,CA1BM,CAAT;AA2BH,CA5BM;;ICAMU,cAAc,GAAG,SAAjBA,cAAiB,CAACC,gBAAD;AAC1B,MAAMX,KAAK,GAAGha,cAAc,CAAC;AACzB,QAAM4a,cAAc,gBACbzC,gBADa;AAEhBpT,MAAAA,UAAU,EAAE4V;AAFI,MAApB;;AAKA,WAAOE,sBAAc,CAAC;AAClBD,MAAAA,cAAc,EAAEA,cADE;AAElBd,MAAAA,OAAO,EAAED,WAFS;AAGlBiB,MAAAA,UAAU,EAAE,oBAAAC,oBAAoB;AAAA,eAC5BA,oBAAoB,CAAC;AACjBC,UAAAA,iBAAiB,EAAE;AADF,SAAD,CADQ;AAAA,OAHd;AAOlBC,MAAAA,QAAQ,EAAE;AAAEnX,QAAAA,IAAI,cAAY6W;AAAlB;AAPQ,KAAD,CAArB;AASH,GAf2B,CAA5B;AAgBAZ,EAAAA,gBAAgB,CAACC,KAAD,CAAhB;AACA,SAAOA,KAAP;AACH,CAnBM;AAqBP;;;;AAGA,IAAakB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAC5BC,oBAD4B;oCAEzBC;AAAAA,IAAAA;;;AAEH,MAAMjQ,QAAQ,GAAGkQ,iBAAW,CACxB,UAACvW,KAAD;AAAA,WAAsBqW,oBAAoB,MAApB,SAAwBC,cAAxB,EAAwCtW,KAAxC,CAAtB;AAAA,GADwB;AAAA,GAGvBqW,oBAHuB,SAGEC,cAHF,EAA5B;AAKA,SAAOE,sBAAW,CAACnQ,QAAD,CAAlB;AACH,CAVM;AAYP;;;;;AAIA,IAAaoQ,MAAM,GAAG,SAATA,MAAS,CAA0BC,aAA1B;qCAAoEJ;AAAAA,IAAAA;;;AACtF,MAAMjN,QAAQ,GAAGsN,sBAAW,EAA5B;AACA9b,EAAAA,eAAS,CACL;AACIwO,IAAAA,QAAQ,CAACqN,aAAa,MAAb,SAAiBJ,cAAjB,CAAD,CAAR;AACH,GAHI;AAAA,GAKJjN,QALI,EAKMqN,aALN,SAKwBJ,cALxB,EAAT;AAOH,CATM;AAWP,IAAaM,kBAAkB,GAAG,SAArBA,kBAAqB,CAAsBF,aAAtB,EAAgEjK,OAAhE;AAC9B,MAAMpD,QAAQ,GAAGsN,sBAAW,EAA5B;AACA9b,EAAAA,eAAS,CAAC;AACNwO,IAAAA,QAAQ,CAACqN,aAAa,CAACjK,OAAD,CAAd,CAAR;AACH,GAFQ,EAEN,CAACpD,QAAD,EAAWqN,aAAX,EAA0BjK,OAA1B,CAFM,CAAT;AAGH,CALM;;AC9DP;;;;;AAMA,AAIO,IAAMoK,qBAAqB,GAA8B,SAAnDA,qBAAmD;AAC5D;AACA,MAAMC,KAAK,GACP,gFACA,uDAFJ;AAGA,SAAOC,4BAAA,OAAA;AAAMD,IAAAA,KAAK,EAAEA;GAAb,gBAAA,CAAP;AACH,CANM;;ACYA,IAAME,aAAa,GAAiB;AACvCvN,EAAAA,WAAW,EAAE,IAD0B;AAEvCwN,EAAAA,YAAY,EAAE,IAFyB;AAGvCjT,EAAAA,kBAAkB,EAAE,IAHmB;AAIvCE,EAAAA,gBAAgB,EAAE,GAJqB;AAKvCd,EAAAA,gBAAgB,EAAE,KALqB;AAMvCgG,EAAAA,yBAAyB,EAAE,KANY;AAOvChF,EAAAA,kBAAkB,EAAE,KAPmB;AAQvC8S,EAAAA,0BAA0B,EAAE,KARW;AASvCC,EAAAA,mBAAmB,EAAE/M,aAAa,CAAC8H,eAAd,CAA8BnT,EATZ;AAUvCqY,EAAAA,uBAAuB,EAAEhN,aAAa,CAAC2H,cAAd,CAA6BhT,EAVf;AAWvCuF,EAAAA,4BAA4B,EAAE,IAXS;AAYvC+S,EAAAA,aAAa,EAAER,qBAZwB;AAavCS,EAAAA,QAAQ,EAAE,KAb6B;AAcvCC,EAAAA,IAAI,EAAE;AAdiC,CAApC;AAiBP,IAAaC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAC5S,MAAD;AAC7B,kCAAkB7C,MAAM,CAACC,IAAP,CAAYgV,aAAZ,CAAlB,kCAA8C;AAAzC,QAAMS,GAAG,mBAAT;;AACD,QAAIA,GAAG,IAAI7S,MAAX,EAAmB;AACfoS,MAAAA,aAAa,CAACS,GAAD,CAAb,GAA2C7S,MAAM,CAC7C6S,GAD6C,CAAjD;AAGH;AACJ;AACJ,CARM;;AC7BP,WAAYC;AACRA,EAAAA,wBAAA,YAAA;AACAA,EAAAA,yBAAA,aAAA;AACAA,EAAAA,0BAAA,cAAA;AACAA,EAAAA,gCAAA,gBAAA;AAEAA,EAAAA,4BAAA,YAAA;AACAA,EAAAA,iCAAA,iBAAA;AACH,CARD,EAAYA,qBAAa,KAAbA,qBAAa,KAAA,CAAzB;;AAUA,IAAaC,SAAS,GAAG,SAAZA,SAAY,CAACC,SAAD,EAA2BC,QAA3B;AAAA,qBACXD,SADW,SACEC,QADF;AAAA,CAAlB;AAGP,IAAaC,eAAe,GAAG,SAAlBA,eAAkB,CAACpM,QAAD,EAAmBmM,QAAnB;AAAA,qBACjBH,qBAAa,CAACK,WADG,SACYrM,QADZ,SACwBmM,QADxB;AAAA,CAAxB;AAGP,AAAO,IAAMG,2BAA2B,GAAG,SAA9BA,2BAA8B,CAACrN,SAAD;AACvC,MAAMsN,IAAI,GAAGC,iBAAO,EAApB;AACA,SAAOC,aAAO,CAAC;AACX,WAAOF,IAAI,CAACG,aAAL,CAAmB;AACtBrZ,MAAAA,EAAE,EAAE4Y,SAAS,CAACD,qBAAa,CAACW,gBAAf,EAAiC1N,SAAjC,CADS;AAEtB2N,MAAAA,cAAc,EAAE3N;AAFM,KAAnB,CAAP;AAIH,GALa,EAKX,CAACA,SAAD,EAAYsN,IAAZ,CALW,CAAd;AAMH,CARM;AAUP,AAAO,IAAMM,6BAA6B,GAAG,SAAhCA,6BAAgC,CAAC1V,MAAD;AACzC,MAAMoV,IAAI,GAAGC,iBAAO,EAApB;AACA,SAAOC,aAAO,CAAC;;;AACX,QAAI,CAACtV,MAAL,EAAa;AACT,aAAO;AACH2V,QAAAA,UAAU,EAAE,EADT;AAEHC,QAAAA,aAAa,EAAEnb;AAFZ,OAAP;AAIH;;AAED,QAAMkb,UAAU,GAAGP,IAAI,CAACG,aAAL,CAAmB;AAClCrZ,MAAAA,EAAE,EAAE+Y,eAAe,CAACjV,MAAM,CAAC9D,EAAR,EAAY,aAAZ,CADe;AAElCuZ,MAAAA,cAAc,oBAAEzV,MAAM,CAACgI,MAAT,qBAAE,eAAe7L;AAFG,KAAnB,CAAnB;AAKA,QAAIyZ,aAAa,GAAwBnb,SAAzC;;AACA,2BAAIuF,MAAM,CAACgI,MAAX,aAAI,gBAAegI,OAAnB,EAA4B;AAAA;;AACxB;AACA4F,MAAAA,aAAa,GAAGR,IAAI,CAACG,aAAL,CAAmB;AAC/BrZ,QAAAA,EAAE,EAAE+Y,eAAe,CAACjV,MAAM,CAAC9D,EAAR,EAAY,gBAAZ,CADY;AAE/BuZ,QAAAA,cAAc,qBAAEzV,MAAM,CAACgI,MAAT,qBAAE,gBAAegI;AAFA,OAAnB,CAAhB;AAIH;;AAED,WAAO;AACH2F,MAAAA,UAAU,EAAVA,UADG;AAEHC,MAAAA,aAAa,EAAbA;AAFG,KAAP;AAIH,GA1Ba,EA0BX,CAAC5V,MAAD,EAASoV,IAAT,CA1BW,CAAd;AA2BH,CA7BM;AA+BP,AAAO,IAAMS,4BAA4B,GAAG,SAA/BA,4BAA+B,CAACtc,IAAD;AACxC,MAAM6b,IAAI,GAAGC,iBAAO,EAApB;AACA,MAAMS,UAAU,GAAGC,gBAAU,CAACC,uBAAD,CAA7B;AACA,SAAOV,aAAO,CAAC;AACX,WAAO;AACHW,MAAAA,iBAAiB,EAAEH,UAAU,CAACI,iBAAX,CAA6Bd,IAA7B,EAAmC7b,IAAnC,CADhB;AAEH4c,MAAAA,cAAc,EAAEL,UAAU,CAACM,cAAX,CAA0BhB,IAA1B,EAAgC7b,IAAhC;AAFb,KAAP;AAIH,GALa,EAKX,CAACA,IAAD,EAAOuc,UAAP,EAAmBV,IAAnB,CALW,CAAd;AAMH,CATM;AAWP,IAAaiB,iBAAiB,GAAqB;AAC/CH,EAAAA,iBAAiB,EAAE,2BACfd,IADe,EAEf7b,IAFe;AAIf,QAAM+c,WAAW,GAAGjd,UAAU,CAACkB,UAAX,CAAsBhB,IAAtB,CAApB;;AACA,QAAI+c,WAAJ,EAAiB;AACb,aAAOlB,IAAI,CAACmB,UAAL,CAAgBD,WAAhB,EAA6B;AAChCE,QAAAA,SAAS,EAAE,QADqB;AAEhCC,QAAAA,SAAS,EAAE;AAFqB,OAA7B,CAAP;AAIH,KALD,MAKO;AACH,aAAO,IAAP;AACH;AACJ,GAd8C;AAe/CL,EAAAA,cAAc,EAAE,wBAACM,KAAD,EAAmBnd,IAAnB;AACZ,QAAI,CAACA,IAAD,IAAS,OAAOA,IAAI,CAAC+C,IAAZ,KAAqB,QAAlC,EAA4C,OAAO,IAAP;AAE5C,QAAMA,IAAI,GAAG/C,IAAI,CAAC+C,IAAlB;AACA,QAAMqa,QAAQ,GAAGC,QAAQ,CAACta,IAAD,EAAO;AAAEua,MAAAA,IAAI,EAAE,KAAR;AAAeC,MAAAA,MAAM,EAAE;AAAvB,KAAP,CAAzB;;AACA,QAAIH,QAAQ,CAACI,MAAT,KAAoB,GAAxB,EAA6B;AACzB,aAAUC,IAAI,CAACC,KAAL,CAAWN,QAAQ,CAAChf,KAAT,GAAiB,EAA5B,IAAkC,KAA5C;AACH,KAFD,MAEO,IAAIgf,QAAQ,CAACI,MAAT,KAAoB,IAAxB,EAA8B;AACjC,aAAUC,IAAI,CAACC,KAAL,CAAWN,QAAQ,CAAChf,KAApB,CAAV,SAAwCgf,QAAQ,CAACI,MAAjD;AACH;;AACD,WAAUJ,QAAQ,CAAChf,KAAnB,SAA4Bgf,QAAQ,CAACI,MAArC;AACH;AA1B8C,CAA5C;AA6BP,AAAO,IAAMf,uBAAuB,gBAAGkB,mBAAa,CAACb,iBAAD,CAA7C;;AC3GP;;;;;AAMA,AASO,IAAMc,iBAAiB,gBAAGD,mBAAa,CAA+BlD,qBAA/B,CAAvC;AAEP,AAAO,IAAMoD,eAAe,GAAa,CACrC,KADqC,EAErC,KAFqC,EAGrC,MAHqC,EAIrC,KAJqC,EAKrC,KALqC,EAMrC,KANqC,EAOrC,KAPqC,EAQrC,KARqC,EASrC,KATqC,EAUrC,KAVqC,EAWrC,KAXqC,EAYrC,MAZqC,EAarC,MAbqC,EAcrC,MAdqC,EAerC,MAfqC,EAgBrC,MAhBqC,EAiBrC,KAjBqC,EAkBrC,KAlBqC,EAmBrC,KAnBqC,EAoBrC,KApBqC,EAqBrC,KArBqC,EAsBrC,KAtBqC,EAuBrC,MAvBqC,EAwBrC,MAxBqC,EAyBrC,KAzBqC,EA0BrC,KA1BqC,EA2BrC,KA3BqC,EA4BrC,KA5BqC,EA6BrC,OA7BqC,EA8BrC,KA9BqC,EA+BrC,MA/BqC,EAgCrC,KAhCqC,EAiCrC,MAjCqC,EAkCrC,KAlCqC,EAmCrC,MAnCqC,EAoCrC,KApCqC,EAqCrC,KArCqC,EAsCrC,KAtCqC,EAuCrC,IAvCqC,EAwCrC,KAxCqC,EAyCrC,IAzCqC,EA0CrC,KA1CqC,EA2CrC,KA3CqC,EA4CrC,KA5CqC,EA6CrC,KA7CqC,EA8CrC,KA9CqC,EA+CrC,KA/CqC,EAgDrC,MAhDqC,EAiDrC,MAjDqC,EAkDrC,MAlDqC,EAmDrC,MAnDqC,EAoDrC,MApDqC,EAqDrC,MArDqC,EAsDrC,KAtDqC,EAuDrC,KAvDqC,EAwDrC,MAxDqC,EAyDrC,IAzDqC,EA0DrC,KA1DqC,EA2DrC,KA3DqC,EA4DrC,KA5DqC,CAAlC;AA8DP,AAAO,IAAMC,eAAe,GAAa,CACrC,KADqC,EAErC,MAFqC,EAGrC,KAHqC,EAIrC,KAJqC,EAKrC,KALqC,EAMrC,MANqC,EAOrC,KAPqC,EAQrC,KARqC,EASrC,KATqC,EAUrC,MAVqC,EAWrC,MAXqC,EAYrC,KAZqC,EAarC,KAbqC,EAcrC,KAdqC,EAerC,KAfqC,EAgBrC,KAhBqC,EAiBrC,IAjBqC,EAkBrC,KAlBqC,EAmBrC,KAnBqC,EAoBrC,KApBqC,EAqBrC,KArBqC,EAsBrC,MAtBqC,EAuBrC,KAvBqC,EAwBrC,KAxBqC,EAyBrC,IAzBqC,EA0BrC,KA1BqC,EA2BrC,MA3BqC,EA4BrC,OA5BqC,EA6BrC,MA7BqC,EA8BrC,OA9BqC,EA+BrC,KA/BqC,EAgCrC,KAhCqC,EAiCrC,KAjCqC,EAkCrC,KAlCqC,EAmCrC,KAnCqC,EAoCrC,KApCqC,EAqCrC,KArCqC,EAsCrC,MAtCqC,EAuCrC,KAvCqC,EAwCrC,KAxCqC,EAyCrC,MAzCqC,EA0CrC,KA1CqC,EA2CrC,KA3CqC,EA4CrC,KA5CqC,EA6CrC,KA7CqC,EA8CrC,KA9CqC,EA+CrC,KA/CqC,EAgDrC,KAhDqC,EAiDrC,KAjDqC,EAkDrC,KAlDqC,EAmDrC,KAnDqC,EAoDrC,KApDqC,EAqDrC,KArDqC,EAsDrC,KAtDqC,EAuDrC,KAvDqC,EAwDrC,KAxDqC,EAyDrC,KAzDqC,EA0DrC,KA1DqC,EA2DrC,KA3DqC,EA4DrC,KA5DqC,EA6DrC,KA7DqC,EA8DrC,KA9DqC,EA+DrC,KA/DqC,EAgErC,KAhEqC,EAiErC,KAjEqC,EAkErC,KAlEqC,EAmErC,MAnEqC,EAoErC,KApEqC,EAqErC,KArEqC,EAsErC,KAtEqC,EAuErC,KAvEqC,EAwErC,KAxEqC,EAyErC,MAzEqC,EA0ErC,KA1EqC,EA2ErC,KA3EqC,EA4ErC,MA5EqC,EA6ErC,MA7EqC,EA8ErC,KA9EqC,EA+ErC,MA/EqC,EAgFrC,KAhFqC,EAiFrC,MAjFqC,EAkFrC,KAlFqC,EAmFrC,KAnFqC,EAoFrC,KApFqC,EAqFrC,KArFqC,EAsFrC,KAtFqC,CAAlC;AAwFP,AAAO,IAAMC,eAAe,GAAa,CACrC,MADqC,EAErC,KAFqC,EAGrC,KAHqC,EAIrC,KAJqC,EAKrC,MALqC,EAMrC,MANqC,EAOrC,IAPqC,EAQrC,KARqC,EASrC,KATqC,EAUrC,KAVqC,EAWrC,OAXqC,EAYrC,WAZqC,EAarC,WAbqC,EAcrC,WAdqC,EAerC,KAfqC,EAgBrC,MAhBqC,EAiBrC,KAjBqC,EAkBrC,KAlBqC,EAmBrC,KAnBqC,EAoBrC,KApBqC,EAqBrC,KArBqC,EAsBrC,KAtBqC,EAuBrC,KAvBqC,EAwBrC,KAxBqC,EAyBrC,MAzBqC,EA0BrC,KA1BqC,EA2BrC,KA3BqC,EA4BrC,MA5BqC,EA6BrC,KA7BqC,EA8BrC,KA9BqC,EA+BrC,MA/BqC,EAgCrC,MAhCqC,EAiCrC,KAjCqC,EAkCrC,KAlCqC,EAmCrC,KAnCqC,EAoCrC,IApCqC,EAqCrC,IArCqC,EAsCrC,KAtCqC,EAuCrC,KAvCqC,EAwCrC,KAxCqC,EAyCrC,KAzCqC,EA0CrC,KA1CqC,EA2CrC,KA3CqC,EA4CrC,KA5CqC,EA6CrC,KA7CqC,EA8CrC,KA9CqC,EA+CrC,MA/CqC,EAgDrC,KAhDqC,EAiDrC,KAjDqC,EAkDrC,KAlDqC,EAmDrC,KAnDqC,EAoDrC,MApDqC,EAqDrC,KArDqC,EAsDrC,IAtDqC,CAAlC;AAwDP,AAAO,IAAMC,WAAW,GAAa,CACjC,SADiC,EAEjC,SAFiC,EAGjC,SAHiC,EAIjC,SAJiC,EAKjC,SALiC,EAMjC,SANiC,EAOjC,SAPiC,EAQjC,SARiC,EASjC,SATiC,EAUjC,SAViC,EAWjC,SAXiC,EAYjC,SAZiC,EAajC,SAbiC,EAcjC,SAdiC,EAejC,SAfiC,EAgBjC,SAhBiC,EAiBjC,SAjBiC,EAkBjC,SAlBiC,EAmBjC,SAnBiC,EAoBjC,SApBiC,EAqBjC,SArBiC,EAsBjC,SAtBiC,EAuBjC,SAvBiC,EAwBjC,SAxBiC,EAyBjC,SAzBiC,EA0BjC,SA1BiC,EA2BjC,SA3BiC,EA4BjC,SA5BiC,EA6BjC,SA7BiC,EA8BjC,SA9BiC,EA+BjC,SA/BiC,EAgCjC,SAhCiC,EAiCjC,SAjCiC,EAkCjC,SAlCiC,EAmCjC,SAnCiC,EAoCjC,SApCiC,EAqCjC,SArCiC,EAsCjC,SAtCiC,EAuCjC,SAvCiC,EAwCjC,SAxCiC,EAyCjC,SAzCiC,EA0CjC,SA1CiC,EA2CjC,SA3CiC,EA4CjC,SA5CiC,EA6CjC,SA7CiC,EA8CjC,SA9CiC,EA+CjC,SA/CiC,EAgDjC,SAhDiC,EAiDjC,SAjDiC,EAkDjC,SAlDiC,EAmDjC,SAnDiC,EAoDjC,SApDiC,EAqDjC,SArDiC,EAsDjC,SAtDiC,EAuDjC,SAvDiC,EAwDjC,SAxDiC,EAyDjC,SAzDiC,EA0DjC,SA1DiC,EA2DjC,SA3DiC,EA4DjC,SA5DiC,EA6DjC,SA7DiC,EA8DjC,SA9DiC,EA+DjC,SA/DiC,EAgEjC,SAhEiC,EAiEjC,SAjEiC,EAkEjC,SAlEiC,EAmEjC,SAnEiC,EAoEjC,SApEiC,EAqEjC,SArEiC,EAsEjC,SAtEiC,EAuEjC,SAvEiC,EAwEjC,SAxEiC,EAyEjC,SAzEiC,CAA9B;AA2EP,AAAO,IAAMC,UAAU,GAAa,CAChC,MADgC,EAEhC,SAFgC,EAGhC,SAHgC,EAIhC,SAJgC,EAKhC,SALgC,EAMhC,SANgC,EAOhC,SAPgC,EAQhC,SARgC,EAShC,SATgC,EAUhC,SAVgC,EAWhC,SAXgC,EAYhC,SAZgC,EAahC,SAbgC,EAchC,SAdgC,EAehC,SAfgC,EAgBhC,SAhBgC,EAiBhC,SAjBgC,EAkBhC,SAlBgC,EAmBhC,SAnBgC,EAoBhC,SApBgC,EAqBhC,SArBgC,EAsBhC,SAtBgC,EAuBhC,SAvBgC,EAwBhC,SAxBgC,EAyBhC,SAzBgC,EA0BhC,SA1BgC,EA2BhC,SA3BgC,EA4BhC,SA5BgC,EA6BhC,SA7BgC,EA8BhC,SA9BgC,EA+BhC,SA/BgC,EAgChC,SAhCgC,EAiChC,SAjCgC,EAkChC,SAlCgC,EAmChC,SAnCgC,EAoChC,SApCgC,EAqChC,SArCgC,EAsChC,SAtCgC,EAuChC,SAvCgC,EAwChC,SAxCgC,EAyChC,SAzCgC,EA0ChC,SA1CgC,EA2ChC,SA3CgC,EA4ChC,SA5CgC,EA6ChC,SA7CgC,EA8ChC,SA9CgC,EA+ChC,SA/CgC,EAgDhC,SAhDgC,EAiDhC,SAjDgC,EAkDhC,SAlDgC,EAmDhC,SAnDgC,EAoDhC,SApDgC,EAqDhC,SArDgC,EAsDhC,SAtDgC,EAuDhC,SAvDgC,EAwDhC,SAxDgC,EAyDhC,SAzDgC,EA0DhC,SA1DgC,EA2DhC,SA3DgC,EA4DhC,SA5DgC,EA6DhC,SA7DgC,EA8DhC,SA9DgC,EA+DhC,SA/DgC,EAgEhC,SAhEgC,EAiEhC,SAjEgC,EAkEhC,SAlEgC,EAmEhC,SAnEgC,EAoEhC,SApEgC,EAqEhC,SArEgC,EAsEhC,SAtEgC,EAuEhC,SAvEgC,EAwEhC,SAxEgC,EAyEhC,SAzEgC,CAA7B;;AA4EP,IAAMC,WAAW,GAAG,SAAdA,WAAc;AAChB,MAAIC,WAAW,GAAG,CAAlB;AACA,MAAMC,IAAI,GAAG,CAAb;AAEA,MAAMC,iBAAiB,GAAG;AAEtB,GAAClN,sBAAc,CAACmN,OAAhB,EAAyB,CAAC,SAAD,CAAzB,CAFsB,EAGtB,CAACnN,sBAAc,CAAC3I,MAAhB,EAAwB,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,MAAtB,EAA8B,KAA9B,CAAxB,CAHsB,EAItB,CAAC2I,sBAAc,CAACoN,KAAhB,EAAuB,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,CAAvB,CAJsB,EAKtB,CAACpN,sBAAc,CAACqN,QAAhB,EAA0B,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,QAAvB,EAAiC,SAAjC,EAA4C,KAA5C,EAAmD,KAAnD,EAA0D,KAA1D,EAAiE,KAAjE,EAAwE,MAAxE,CAA1B,CALsB,EAMtB,CAACrN,sBAAc,CAACsN,IAAhB,EAAsB,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,CAAtB,CANsB,EAOtB,CAACtN,sBAAc,CAACuN,OAAhB,EAAyB,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,QAAtB,EAAgC,IAAhC,CAAzB,CAPsB,EAQtB,CAACvN,sBAAc,CAACwN,KAAhB,EAAuBb,eAAvB,CARsB,EAStB,CAAC3M,sBAAc,CAACyN,KAAhB,EAAuBf,eAAvB,CATsB,EAUtB,CAAC1M,sBAAc,CAAC0N,IAAhB,EAAsB,CAAC,MAAD,EAAS,KAAT,EAAgB,KAAhB,EAAuB,MAAvB,EAA+B,MAA/B,EAAuC,MAAvC,EAA+C,KAA/C,EAAsD,GAAtD,EAA2D,KAA3D,EAAkE,GAAlE,EAAuE,KAAvE,CAAtB,CAVsB,EAWtB,CAAC1N,sBAAc,CAAC2N,IAAhB,EAAsB,CAAC,KAAD,EAAQ,QAAR,EAAkB,KAAlB,CAAtB,CAXsB,EAYtB,CAAC3N,sBAAc,CAACkK,GAAhB,EAAqB,CAAC,KAAD,EAAQ,KAAR,CAArB,CAZsB,EAatB,CAAClK,sBAAc,CAAC4N,IAAhB,EAAsB,CAAC,MAAD,EAAS,WAAT,EAAsB,iBAAtB,CAAtB,CAbsB,EActB,CAAC5N,sBAAc,CAAC6N,KAAhB,EAAuBjB,eAAvB,CAdsB,EAetB,CAAC5M,sBAAc,CAAC8N,QAAhB,EAA0B,CAAC,KAAD,EAAQ,IAAR,CAA1B,CAfsB,EAgBtB,CAAC9N,sBAAc,CAAC6F,KAAhB,EAAuB,CAAC,UAAD,CAAvB,CAhBsB,EAiBtB,CAAC7F,sBAAc,CAAC+N,KAAhB,EAAuB,CAAC,SAAD,EAAY,cAAZ,CAAvB,CAjBsB;AAoBtB,GAAC/N,sBAAc,CAACgO,KAAhB,EAAuB,CAAC,UAAD,CAAvB,CApBsB,EAqBtB,CAAChO,sBAAc,CAACiO,MAAhB,EAAwB,CAAC,KAAD,CAAxB,CArBsB,EAsBtB,CAACjO,sBAAc,CAACkO,OAAhB,EAAyB,CAAC,KAAD,CAAzB,CAtBsB;AAyBtB,GAAClO,sBAAc,CAACmO,IAAhB,EAAsB,CAAC,IAAD,EAAO,MAAP,CAAtB,CAzBsB,EA0BtB,CAACnO,sBAAc,CAACoO,MAAhB,EAAwB,CAAC,IAAD,EAAO,OAAP,CAAxB,CA1BsB,EA2BtB,CAACpO,sBAAc,CAACqO,MAAhB,EAAwB,CAAC,IAAD,EAAO,KAAP,EAAc,IAAd,EAAoB,KAApB,EAA2B,MAA3B,CAAxB,CA3BsB,EA4BtB,CAACrO,sBAAc,CAACsO,GAAhB,EAAqB,CAAC,KAAD,CAArB,CA5BsB;AA+BtB,GAACtO,sBAAc,CAACuO,GAAhB,EAAqB,CAAC,YAAD,CAArB,CA/BsB;AAkCtB,GAACvO,sBAAc,CAACwO,KAAhB,EAAuB,CAAC,KAAD,CAAvB,CAlCsB;AAqCtB,GAACxO,sBAAc,CAACyO,GAAhB,EAAqB,CAAC,KAAD,CAArB,CArCsB,EAsCtB,CAACzO,sBAAc,CAAC0O,KAAhB,EAAuB,CAAC,KAAD,EAAQ,MAAR,CAAvB,CAtCsB,EAuCtB,CAAC1O,sBAAc,CAAC2O,IAAhB,EAAsB,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,CAAtB,CAvCsB,EAwCtB,CAAC3O,sBAAc,CAAC4O,KAAhB,EAAuB,CAAC,KAAD,CAAvB,CAxCsB,CAA1B;AA2CA,MAAMC,SAAS,GAAG,IAAIC,SAAJ,CAAc;AAAEC,IAAAA,UAAU,EAAE;AAAd,GAAd,CAAlB;;AACA,wCAAmB7B,iBAAnB,wCAAsC;AAAjC,QAAM8B,IAAI,yBAAV;AACD,QAAOjM,IAAP,GAA2BiM,IAA3B;AAAA,QAAaC,UAAb,GAA2BD,IAA3B;;AAEA,SAAK,IAAI3d,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4d,UAAU,CAAC3d,MAA/B,EAAuC,EAAED,CAAzC,EAA4C;AACxC2b,MAAAA,WAAW,IAAIC,IAAf;AACA,UAAMiC,SAAS,GAAIlC,WAAW,IAAIH,WAAW,CAACvb,MAAZ,GAAqB,CAAzB,CAAZ,GAA2C,CAA7D;AACA,UAAM6d,QAAQ,GAAiB;AAC3BpM,QAAAA,IAAI,EAAJA,IAD2B;AAE3BmM,QAAAA,SAAS,EAATA;AAF2B,OAA/B;AAIAL,MAAAA,SAAS,CAACO,GAAV,CAAcH,UAAU,CAAC5d,CAAD,CAAxB,EAA6B8d,QAA7B,EAAuC,IAAvC;AACH;AACJ;;AAED,SAAON,SAAP;AACH,CA/DD;;AAiEA,IAAMQ,QAAQ,gBAAGtC,WAAW,EAA5B;AAEA,AAAO,IAAMuC,WAAW,GAAG,SAAdA,WAAc,CAACzgB,IAAD;AACvB,SAAO+b,aAAO,CAAC;AACX,QAAI,CAAC/b,IAAL,EAAW,OAAO;AAAEkU,MAAAA,IAAI,EAAE/C,sBAAc,CAACuP,OAAvB;AAAgCL,MAAAA,SAAS,EAAE;AAA3C,KAAP;AACX,QAAIrgB,IAAI,CAACC,KAAL,KAAe,IAAnB,EAAyB,OAAO;AAAEiU,MAAAA,IAAI,EAAE/C,sBAAc,CAACwP,MAAvB;AAA+BN,MAAAA,SAAS,EAAE;AAA1C,KAAP;AAEzB,QAAMO,KAAK,GAAGJ,QAAQ,CAACK,kBAAT,CAA4B7gB,IAAI,CAAC4C,IAAjC,EAAuC,GAAvC,EAA4C,IAA5C,CAAd;AACA,WAAOge,KAAK,GAAGA,KAAH,GAAW;AAAE1M,MAAAA,IAAI,EAAE/C,sBAAc,CAACnR,IAAvB;AAA6BqgB,MAAAA,SAAS,EAAE;AAAxC,KAAvB;AACH,GANa,EAMX,CAACrgB,IAAD,CANW,CAAd;AAOH,CARM;;ACnbA,IAAM8gB,UAAU,GAAG;AACtBC,EAAAA,MAAM,EAAE;AACJC,IAAAA,QAAQ,EAAE,SADN;AAEJC,IAAAA,SAAS,EAAE,SAFP;AAGJC,IAAAA,UAAU,EAAE,SAHR;AAIJC,IAAAA,WAAW,EAAE,SAJT;AAKJC,IAAAA,WAAW,EAAE,SALT;AAOJC,IAAAA,UAAU,EAAE;AAPR,GADc;AAWtBC,EAAAA,SAAS,EAAE;AACPC,IAAAA,WAAW,EAAE;AADN,GAXW;AAetBC,EAAAA,OAAO,EAAE;AACLC,IAAAA,gBAAgB,EAAE;AADb,GAfa;AAmBtB/S,EAAAA,OAAO,EAAE;AACL3L,IAAAA,IAAI,EAAE,EADD;AAEL2e,IAAAA,UAAU,EAAE,MAFP;AAGLC,IAAAA,QAAQ,EAAE,EAHL;AAILC,IAAAA,YAAY,EAAE;AAJT,GAnBa;AA0BtBC,EAAAA,GAAG,EAAE;AACDC,IAAAA,YAAY,EAAE,OADb;AAEDC,IAAAA,eAAe,EAAE,KAFhB;AAGDC,IAAAA,WAAW,EAAE,2BAHZ;AAIDC,IAAAA,cAAc,EAAE,2BAJf;AAKDC,IAAAA,sBAAsB,EAAE,0BALvB;AAMDC,IAAAA,sBAAsB,EAAE,0BANvB;AAODC,IAAAA,yBAAyB,EAAE,0BAP1B;AAQDC,IAAAA,yBAAyB,EAAE;AAR1B,GA1BiB;AAqCtBC,EAAAA,SAAS,EAAE;AACPC,IAAAA,MAAM,EAAE,gBADD;AAEPC,IAAAA,OAAO,EAAE,UAFF;AAGPC,IAAAA,YAAY,EAAE;AAHP,GArCW;AA2CtBC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,iBAAiB,EAAE,CADb;AAENC,IAAAA,gBAAgB,EAAE;AAFZ,GA3CY;AAgDtBC,EAAAA,aAAa,EAAE;AACXC,IAAAA,iBAAiB,EAAE,OADR;AAEXC,IAAAA,gBAAgB,EAAE,MAFP;AAGXC,IAAAA,QAAQ,EAAE,OAHC;AAIXC,IAAAA,SAAS,EAAE,MAJA;AAKXR,IAAAA,YAAY,EAAE,CALH;AAMXd,IAAAA,QAAQ,EAAE,EANC;AAQXuB,IAAAA,aAAa,EAAE,0BARJ;AASXC,IAAAA,mBAAmB,EAAE,0BATV;AAUXC,IAAAA,oBAAoB,EAAE;AAVX,GAhDO;AA6DtBC,EAAAA,aAAa,EAAE;AACXC,IAAAA,gBAAgB,EAAE,EADP;AAEXC,IAAAA,YAAY,EAAE,OAFH;AAGXC,IAAAA,gBAAgB,EAAE,CAHP;AAIX7B,IAAAA,QAAQ,EAAE;AAJC;AA7DO,CAAnB;AAuEP,AAAO,IAAM8B,iBAAiB,GAA6B;AACvDZ,EAAAA,aAAa,EAAE;AACXK,IAAAA,aAAa,EAAE,uBADJ;AAEXC,IAAAA,mBAAmB,EAAE,uBAFV;AAGXC,IAAAA,oBAAoB,EAAE;AAHX;AADwC,CAApD;AAQP,AAAO,IAAMM,mBAAmB,GAA6B;AACzDpC,EAAAA,SAAS,EAAE;AACPC,IAAAA,WAAW,EAAE;AADN,GAD8C;AAIzDC,EAAAA,OAAO,EAAE;AACLC,IAAAA,gBAAgB,EAAE;AADb,GAJgD;AAOzD/S,EAAAA,OAAO,EAAE;AACL3L,IAAAA,IAAI,EAAE,EADD;AAEL2e,IAAAA,UAAU,EAAE,MAFP;AAGLC,IAAAA,QAAQ,EAAE;AAHL,GAPgD;AAYzDkB,EAAAA,aAAa,EAAE;AACXlB,IAAAA,QAAQ,EAAE;AADC,GAZ0C;AAezD0B,EAAAA,aAAa,EAAE;AACXC,IAAAA,gBAAgB,EAAE,EADP;AAEXC,IAAAA,YAAY,EAAE,KAFH;AAGX5B,IAAAA,QAAQ,EAAE;AAHC;AAf0C,CAAtD;AAsBP,AAAO,IAAMgC,qBAAqB,GAAG,SAAxBA,qBAAwB;AACjC,SAAOC,aAAa,CAAC,mBAAD,CAApB;AACH,CAFM;AAIP,AAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,QAAD,EAAmBC,QAAnB;AAAA,SAC7B,+BACA,QADA,IAEGD,QAFH,WAGGA,QAHH,gBAIGC,QAJH,aAKGA,QALH,cAMA,GAP6B;AAAA,CAA1B;AASP,AAAO,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,CACjCC,MADiC;AAAA;AAAA,SAG3BC,wBAAe,CAAiBD,MAAjB,CAHY;AAAA,CAA9B;AAKP,AAAO,IAAME,sBAAsB,GAAG,SAAzBA,sBAAyB,CAClCC,UADkC;AAGlC,MAAMC,eAAe,GAAG,EAAxB;;AACA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD;AACrB,QAAMC,WAAW,GAAGJ,UAAU,CAACG,KAAD,CAA9B;AACA,QAAME,YAAY,GAAG,EAArB;AACA,QAAMC,cAAc,GAAG/e,MAAM,CAACC,IAAP,CAAY4e,WAAZ,CAAvB;AACAE,IAAAA,cAAc,CAACne,GAAf,CAAmB,UAAAoe,aAAa;AAC5B,UAAMC,cAAc,eAAaD,aAAjC;AACA,UAAME,WAAW,iBAAeD,cAAhC;;AAEAH,MAAAA,YAAY,CAACI,WAAD,CAAZ,GAA4BL,WAAW,CAACG,aAAD,CAAvC;;AAEAN,MAAAA,eAAe,CAACM,aAAD,CAAf,GAAiCC,cAAjC;AACH,KAPD;AAQA,WAAOH,YAAP;AACH,GAbD;;;AAgBA,MAAMK,SAAS,GAAGZ,wBAAe,CAAiBI,gBAAjB,CAAjC;AACA,SAAO;AACH,QAAML,MAAM,GAAGa,SAAS,MAAT,mBAAf;AACA,QAAMC,OAAO,GAAG,EAAhB;AACApf,IAAAA,MAAM,CAACC,IAAP,CAAYye,eAAZ,EAA6B9d,GAA7B,CAAiC,UAAAoe,aAAa;AAC1C;AACAI,MAAAA,OAAO,CAACJ,aAAD,CAAP,GAAyBN,eAAe,CAACM,aAAD,CAAxC;AACH,KAHD;AAIA,wBAAYI,OAAZ,EAAwBd,MAAxB;AACH,GARD;AASH,CA9BM;AAgCP,AAAO,IAAMe,SAAS,GAAG,SAAZA,SAAY,CAAI5mB,KAAJ;AAAA,SAAiB,CAACA,KAAD,EAAQ,YAAR,CAAjB;AAAA,CAAlB;AAEP,AAAO,IAAM6mB,CAAC,GAAGC,UAAV;;ACrJA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAC/lB,GAAD;AAChC,MAAM0Z,KAAK,GAAGsM,mBAAQ,EAAtB;AACA,MAAMnY,QAAQ,GAAGsN,sBAAW,EAA5B;AAEA8K,EAAAA,yBAAmB,CACfjmB,GADe,EAEf;AAAA,WAAO;AACHkmB,MAAAA,gBADG;AAEC,YAAMpf,YAAY,GAAGD,kBAAkB,CAAC6S,KAAK,CAAChK,QAAN,EAAD,CAAvC;AACA,YAAMyW,YAAY,GAAG,IAAIjjB,GAAJ,CAAQqD,MAAM,CAACC,IAAP,CAAYM,YAAZ,CAAR,CAArB;AACA,eAAOqf,YAAP;AACH,OALE;AAMHC,MAAAA,gBANG,4BAMcpM,SANd,EAMyBtJ,KANzB;YAMyBA;AAAAA,UAAAA,QAAQ;;;AAChC,YAAMhH,OAAO,GAAG9G,KAAK,CAACiB,IAAN,CAAWmW,SAAX,CAAhB;AACAnM,QAAAA,QAAQ,CAACQ,YAAY,CAACoC,WAAb,CAAyB;AAAE/G,UAAAA,OAAO,EAAPA,OAAF;AAAWgH,UAAAA,KAAK,EAALA;AAAX,SAAzB,CAAD,CAAR;AACH,OATE;AAUH2V,MAAAA,iBAVG,6BAWChf,MAXD,EAYC4J,OAZD;AAcC,eAAOH,OAAO,CAACC,OAAR,CACHlD,QAAQ,CAACmD,sBAAsB,CAAC3J,MAAD,EAAS4J,OAAT,CAAvB,CADL,EAELS,IAFK,EAAP;AAGH;AAjBE,KAAP;AAAA,GAFe,EAqBf,CAACgI,KAAD,EAAQ7L,QAAR,CArBe,CAAnB;AAuBH,CA3BM;;ACVP;;;;;AAMA,AAaO,IAAMyY,wBAAwB,gBAAG/K,cAAK,CAACgL,IAAN,eACpChL,cAAK,CAACiL,UAAN,CAAsD,UAACC,KAAD,EAAQzmB,GAAR;;;AAClD;AACAob,EAAAA,kBAAkB,CAAC/M,YAAY,CAACiK,WAAd,kBAA2BmO,KAAK,CAAChc,KAAjC,2BAA0CoN,gBAAgB,CAAChS,QAA3D,CAAlB;AACAuV,EAAAA,kBAAkB,CAAC/M,YAAY,CAACgK,iBAAd,EAAiCoO,KAAK,CAAClhB,WAAvC,CAAlB;AACA0V,EAAAA,MAAM,CACFvN,yBADE,EAEFoF,kBAAkB,CAAC2T,KAAK,CAACxY,WAAP,EAAoBuN,aAAa,CAACvN,WAAlC,CAFhB,EAGF6E,kBAAkB,CAAC2T,KAAK,CAAC7Y,yBAAP,EAAkC4N,aAAa,CAAC5N,yBAAhD,CAHhB,CAAN;AAKAqN,EAAAA,MAAM,CACF5M,YAAY,CAAC+J,4BADX,EAEFtF,kBAAkB,CAAC2T,KAAK,CAAChL,YAAP,EAAqBD,aAAa,CAACC,YAAnC,CAFhB,CAAN;AAIAR,EAAAA,MAAM,CACF5M,YAAY,CAACwK,oBADX,EAEF/F,kBAAkB,CAAC2T,KAAK,CAAC7e,gBAAP,EAAyB4T,aAAa,CAAC5T,gBAAvC,EAAyD,SAAzD,CAFhB,CAAN;AAIAqT,EAAAA,MAAM,CACFrL,uBADE,EAEFkD,kBAAkB,CAAC2T,KAAK,CAAC9K,mBAAP,EAA4BH,aAAa,CAACG,mBAA1C,CAFhB,CAAN;AAIAV,EAAAA,MAAM,CACFxL,kCADE,EAEFqD,kBAAkB,CAAC2T,KAAK,CAAC7K,uBAAP,EAAgCJ,aAAa,CAACI,uBAA9C,EAAuE,QAAvE,CAFhB,CAAN;AAKAX,EAAAA,MAAM,CACF5M,YAAY,CAACyK,qBADX,EAEFhG,kBAAkB,CAAC2T,KAAK,CAACje,kBAAP,EAA2BgT,aAAa,CAAChT,kBAAzC,CAFhB,CAAN;AAIAyS,EAAAA,MAAM,CACF5M,YAAY,CAAC0K,mBADX,EAEFjG,kBAAkB,CAAC2T,KAAK,CAAC/d,gBAAP,EAAyB8S,aAAa,CAAC9S,gBAAvC,EAAyD,QAAzD,CAFhB,CAAN;AAIAuS,EAAAA,MAAM,CACF5M,YAAY,CAAC2K,qBADX,EAEFlG,kBAAkB,CAAC2T,KAAK,CAAC7d,kBAAP,EAA2B4S,aAAa,CAAC5S,kBAAzC,EAA6D,SAA7D,CAFhB,CAAN;AAIAqS,EAAAA,MAAM,CACF5M,YAAY,CAAC4K,+BADX,EAEFnG,kBAAkB,CACd2T,KAAK,CAAC3d,4BADQ,EAEd0S,aAAa,CAAC1S,4BAFA,EAGd,SAHc,CAFhB,CAAN;;AAUAid,EAAAA,oBAAoB,CAAC/lB,GAAD,CAApB;AAEA,SAAO,IAAP;AACH,CAnDD,CADoC,CAAjC;AAsDPsmB,wBAAwB,CAACI,WAAzB,GAAuC,0BAAvC;AAEA,AAAO,IAAMC,mBAAmB,gBAAGpL,cAAK,CAACgL,IAAN,CAAWD,wBAAX,CAA5B;AACPK,mBAAmB,CAACD,WAApB,GAAkC,qBAAlC;;ACzEO,IAAME,sBAAsB,GAAG,SAAzBA,sBAAyB;AAClC,MAAMC,UAAU,GAAGzJ,gBAAU,CAAC0J,mBAAD,CAA7B;AACA,MAAQC,eAAR,GAA4BF,UAA5B,CAAQE,eAAR;AACA,SAAO,CAAC,CAACA,eAAT;AACH,CAJM;AAMP,AAAO,IAAMC,kBAAkB,GAAmB,SAArCA,kBAAqC;AAC9C;AACA;AACA,MAAMC,mBAAmB,GAAGL,sBAAsB,EAAlD;AACA,MAAMM,QAAQ,GAAGnM,iBAAW,CAAC;AAAA,WAAM,CAAC,EAAD,EAAY;AAAA,aAAM,IAAN;AAAA,KAAZ,EAAwB;AAAA,aAAM,IAAN;AAAA,KAAxB,CAAN;AAAA,GAAD,EAA4C,EAA5C,CAA5B;;AAEA,MAAMoM,OAAO,GAAmBF,mBAAmB,GAAGG,gBAAH,GAAaF,QAAhE;AACA,SAAOC,OAAO,MAAP,mBAAP;AACH,CARM;AAUP,AAAO,IAAME,kBAAkB,GAAmB,SAArCA,kBAAqC;AAC9C,MAAMJ,mBAAmB,GAAGL,sBAAsB,EAAlD;AACA,MAAMM,QAAQ,GAAGnM,iBAAW,CAAC;AAAA,WAAM,CAAC,EAAD,EAAY;AAAA,aAAM,IAAN;AAAA,KAAZ,CAAN;AAAA,GAAD,EAAgC,EAAhC,CAA5B;;AAEA,MAAMoM,OAAO,GAAmBF,mBAAmB,GAAGK,gBAAH,GAAaJ,QAAhE;AACA,SAAOC,OAAO,MAAP,mBAAP;AACH,CANM;;ACRA,IAAMI,uBAAuB,GAAG,SAA1BA,uBAA0B,CACnC5U,OADmC;AAGnC,MAAM6U,mBAAmB,GAAGnV,yBAAyB,CACjDM,OADiD,EAEjD,UAACA,OAAD;AAAA,WACIA,OAAO,CAACC,OAAR,IACAD,OAAO,CAACC,OAAR,CAAgBC,WAAhB,OAAkC,KADlC,IAEAF,OAAO,CAAC8U,OAFR,IAGA9U,OAAO,CAAC8U,OAAR,CAAgBC,YAJpB;AAAA,GAFiD,CAArD;AAQA,SAAOF,mBAAmB,GAAGA,mBAAmB,CAACC,OAApB,CAA4BC,YAA/B,GAA+C,IAAzE;AACH,CAZM;AAcP,AAAO,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB;AACjC,MAAM9Z,QAAQ,GAAGsN,sBAAW,EAA5B;AACA,MAAMyM,qBAAqB,GAAG7nB,mBAAmB,CAC7Cib,sBAAW,CAACjS,wBAAD,CADkC,CAAjD;AAGA,SAAOgS,iBAAW,CACd,UAAC8M,KAAD;AACI;AACA;AACA,QAAI,CAACD,qBAAqB,CAAC9nB,OAA3B,EAAoC;AAEpC;;AACA,QAAI+nB,KAAK,CAACC,MAAV,EAAkB;AAElBD,IAAAA,KAAK,CAACE,cAAN;AAEA,QAAM1e,aAAa,GAAGke,uBAAuB,CAACM,KAAK,CAACG,MAAP,CAA7C;AACAna,IAAAA,QAAQ,CACJmD,sBAAsB,CAACpC,aAAa,CAACqG,mBAAf,EAAoC;AACtDK,MAAAA,OAAO,EAAEuS,KAAK,CAACvS,OADuC;AAEtDE,MAAAA,OAAO,EAAEqS,KAAK,CAACrS,OAFuC;AAGtDnM,MAAAA,aAAa,EAAbA;AAHsD,KAApC,CADlB,CAAR;AAOH,GAnBa,EAoBd,CAACue,qBAAD,EAAwB/Z,QAAxB,CApBc,CAAlB;AAsBH,CA3BM;AA6BP,AAAO,IAAMoa,uBAAuB,GAAG,SAA1BA,uBAA0B;AACnC,MAAMpa,QAAQ,GAAGsN,sBAAW,EAA5B;AACA,SAAOJ,iBAAW,CAAC;AAAA,WAAMlN,QAAQ,CAACQ,YAAY,CAAC8K,eAAb,EAAD,CAAd;AAAA,GAAD,EAAiD,CAACtL,QAAD,CAAjD,CAAlB;AACH,CAHM;;ICxCMqa,sBAAsB,GAAG,uBAA/B;;ACdP;;;;;AAMA,AASA,IAAMC,WAAW,GAAwB;AACrCC,EAAAA,QAAQ,EAAE,OAD2B;AAErCC,EAAAA,aAAa,EAAE,MAFsB;AAGrCC,EAAAA,MAAM,EAAE,GAH6B;AAIrCC,EAAAA,IAAI,EAAE,CAJ+B;AAKrCC,EAAAA,GAAG,EAAE,CALgC;AAMrCC,EAAAA,KAAK,EAAE,MAN8B;AAOrCC,EAAAA,MAAM,EAAE;AAP6B,CAAzC;;AASA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAClBC,mBADkB,EAElBC,iBAFkB,EAGlBC,iBAHkB;AAKlB,MAAI,CAACF,mBAAD,IAAwB,CAACC,iBAAzB,IAA8C,CAACC,iBAAnD,EAAsE;AAClE,WAAO;AACHC,MAAAA,OAAO,EAAE;AADN,KAAP;AAGH;;AACD,MAAMC,CAAC,GAAGJ,mBAAmB,CAACI,CAApB,IAAyBF,iBAAiB,CAACE,CAAlB,GAAsBH,iBAAiB,CAACG,CAAjE,CAAV;AACA,MAAMC,CAAC,GAAGL,mBAAmB,CAACK,CAApB,IAAyBH,iBAAiB,CAACG,CAAlB,GAAsBJ,iBAAiB,CAACI,CAAjE,CAAV;AACA,MAAMC,SAAS,kBAAgBF,CAAhB,YAAwBC,CAAxB,QAAf;AACA,SAAO;AACHC,IAAAA,SAAS,EAATA,SADG;AAEHC,IAAAA,eAAe,EAAED;AAFd,GAAP;AAIH,CAjBD;;AAmBA,AAAO,IAAME,oBAAoB,GAAwC,SAA5DA,oBAA4D;AACrE,MAAMzD,OAAO,GAAGD,SAAS,EAAzB;;AAEA,sBAOI2D,qBAAY,CAAC,UAAAC,OAAO;AAAA,WAAK;AACzBhmB,MAAAA,IAAI,EAAEgmB,OAAO,CAACC,OAAR,EADmB;AAEzBC,MAAAA,QAAQ,EAAEF,OAAO,CAACG,WAAR,EAFe;AAGzBb,MAAAA,mBAAmB,EAAEU,OAAO,CAACI,sBAAR,EAHI;AAIzBb,MAAAA,iBAAiB,EAAES,OAAO,CAACK,4BAAR,EAJM;AAKzBb,MAAAA,iBAAiB,EAAEQ,OAAO,CAACM,qBAAR,EALM;AAMzBC,MAAAA,UAAU,EAAEP,OAAO,CAACO,UAAR;AANa,KAAL;AAAA,GAAR,CAPhB;AAAA,MACIL,QADJ,iBACIA,QADJ;AAAA,MAEIlmB,IAFJ,iBAEIA,IAFJ;AAAA,MAGIslB,mBAHJ,iBAGIA,mBAHJ;AAAA,MAIIC,iBAJJ,iBAIIA,iBAJJ;AAAA,MAKIC,iBALJ,iBAKIA,iBALJ;AAAA,MAMIe,UANJ,iBAMIA,UANJ;;AAeA,MAAI,CAACA,UAAD,IAAeL,QAAQ,KAAKtB,sBAA5B,IAAsD,CAAC5kB,IAAI,CAAC2N,OAAhE,EAAyE;AACrE,WAAO,IAAP;AACH;;AAED,MAAM6Y,aAAa,GAAGxmB,IAAI,CAAC2N,OAAL,CAAatE,aAAb,CAA2BtJ,MAAjD;AACA,SACIkY,4BAAA,MAAA;AAAKwO,IAAAA,KAAK,EAAE5B;GAAZ,EACI5M,4BAAA,MAAA;AACIwO,IAAAA,KAAK,EAAEpB,aAAa,CAChBC,mBADgB,EAEhBC,iBAFgB,EAGhBC,iBAHgB;GADxB,EAOIvN,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAACsE;GAAxB,EACI1O,4BAAA,IAAA,MAAA,EAAIjY,IAAI,CAAC2N,OAAL,CAAauD,WAAb,CAAyBhR,IAA7B,CADJ,EAEKsmB,aAAa,GAAG,CAAhB,IACGvO,4BAAA,wBAAA,MAAA,EACK,OADL,EAEIA,4BAAA,SAAA,MAAA,EACKuO,aAAa,GAAG,CADrB,eAAA,EAEKA,aAAa,GAAG,CAAhB,KAAsB,CAAtB,GAA0B,GAA1B,GAAgC,EAFrC,CAFJ,CAHR,CAPJ,CADJ,CADJ;AAwBH,CA/CM;AAiDP,IAAMpE,SAAS,gBAAGX,sBAAsB,CAAC,UAAAI,KAAK;AAAA,SAAK;AAC/C8E,IAAAA,eAAe,EAAE;AACbC,MAAAA,SAAS,mBAAiB/E,KAAK,CAACgF,OAAN,CAAcC,OAD3B;AAEbC,MAAAA,eAAe,EAAElF,KAAK,CAACgF,OAAN,CAAcG,UAAd,WAFJ;AAGbjH,MAAAA,YAAY,EAAE8B,KAAK,CAACjC,SAAN,CAAgBG,YAHjB;AAIbd,MAAAA,QAAQ,EAAE4C,KAAK,CAACjD,SAAN,CAAgBC,WAJb;AAKboI,MAAAA,KAAK,EAAEpF,KAAK,CAACgF,OAAN,CAAc9K,IAAd,CAAmBmL,OALb;AAMbpH,MAAAA,OAAO,EAAE+B,KAAK,CAACjC,SAAN,CAAgBE,OANZ;AAObD,MAAAA,MAAM,EAAEgC,KAAK,CAACjC,SAAN,CAAgBC,MAPX;AAQb4F,MAAAA,OAAO,EAAE;AARI;AAD8B,GAAL;AAAA,CAAN,CAAxC;;AC5FA;;;;;AAMA,AAYO,IAAM0B,cAAc,gBAAkClP,cAAK,CAACgL,IAAN,CAAW,UAAAE,KAAK;AACzE,MAAQxhB,YAAR,GAAyBwhB,KAAzB,CAAQxhB,YAAR;AAEA,MAAM4I,QAAQ,GAAGsN,sBAAW,EAA5B;AACA,MAAMuP,UAAU,GAAG9P,gBAAgB,CAAC5V,oBAAD,EAAuBC,YAAvB,CAAnC;AAEA5F,EAAAA,eAAS,CAAC;AACN,QAAI,CAACqrB,UAAD,IAAe,CAACA,UAAU,CAACxY,OAA3B,IAAsCwY,UAAU,CAACxY,OAAX,CAAmB7O,MAAnB,KAA8B,CAAxE,EAA2E;AACvE;AACH;;AAED,QAAMsnB,UAAU,GAAGD,UAAU,CAACxY,OAAX,CAAmBzR,IAAnB,CAAwB,GAAxB,CAAnB;;AACA,QAAMmqB,cAAc,GAAG,SAAjBA,cAAiB,CAAC/C,KAAD;AACnBA,MAAAA,KAAK,CAACE,cAAN;AACAla,MAAAA,QAAQ,CAACmD,sBAAsB,CAAC0Z,UAAD,EAAa5oB,SAAb,CAAvB,CAAR;AACH,KAHD;;AAIAoQ,IAAAA,OAAO,CAACyY,UAAD,EAAaC,cAAb,CAAP;AACA,WAAO;AAAA,aAAM1Y,OAAO,CAAC2Y,MAAR,CAAeF,UAAf,EAA2BC,cAA3B,CAAN;AAAA,KAAP;AACH,GAZQ,EAYN,CAAC/c,QAAD,EAAW6c,UAAX,CAZM,CAAT;AAcA,SAAO,IAAP;AACH,CArB4D,CAAtD;;AClBP;;;;;AAMA,AAoBO,IAAMI,uBAAuB,GAA2C,SAAlEA,uBAAkE;MAC3EC,gBAAAA;AAEA,MAAMld,QAAQ,GAAGsN,sBAAW,EAA5B;AACA,MAAMpW,aAAa,GAAGiW,sBAAW,CAAClW,mBAAD,CAAjC;AACA,MAAMkmB,WAAW,GAAGhQ,sBAAW,CAACrS,mBAAD,CAA/B;AACA,MAAMG,4BAA4B,GAAGkS,sBAAW,CAC5CnS,kCAD4C,CAAhD;;AAKA,MAAMoiB,eAAe,GAAGlQ,iBAAW,CAC/B,UAAC8M,KAAD;AACI,QAAI,CAAC/e,4BAAD,IAAiC2J,qBAAqB,CAACoV,KAAK,CAACG,MAAP,CAA1D,EAA0E;AACtE;AACA;AACA;AACA;AACA;AACH;;AACDna,IAAAA,QAAQ,CAACQ,YAAY,CAACmC,cAAb,EAAD,CAAR;AACH,GAV8B,EAW/B,CAAC3C,QAAD,EAAW/E,4BAAX,CAX+B,CAAnC;;AAeA,MAAMoiB,wBAAwB,GAAGvO,aAAO,CACpC;AAAA,WACI5X,aAAa,CAACoC,GAAd,CAAkB,UAAA+I,QAAQ;AAAA,aACtBqL,4BAAA,CAACkP,cAAD;AACIxO,QAAAA,GAAG,4BAA0B/L;AAC7BjL,QAAAA,YAAY,EAAEiL;OAFlB,CADsB;AAAA,KAA1B,CADJ;AAAA,GADoC,EAQpC,CAACnL,aAAD,CARoC,CAAxC;AAWA,MAAMkiB,mBAAmB,GAAGL,sBAAsB,EAAlD;AACA,MAAMxR,eAAe,GAAGuS,qBAAqB,EAA7C;AAEA,MAAMhC,OAAO,GAAGD,WAAS,EAAzB;AACA,SACInK,4BAAA,CAAC4P,iBAAD;AAAmBC,IAAAA,WAAW,EAAEH;GAAhC,EACI1P,4BAAA,CAAC8P,GAAD;AAAKrB,IAAAA,SAAS,EAAErE,OAAO,CAAC2F;AAAYC,IAAAA,aAAa,EAAEnW;GAAnD,EACK,CAAC4V,WAAD,IAAgB/D,mBAAhB,IAAuC1L,4BAAA,CAAC6N,oBAAD,MAAA,CAD5C,EAEK8B,wBAFL,EAGKH,QAAQ,GAAGA,QAAH,GAAc,IAH3B,CADJ,CADJ;AASH,CAlDM;AAoDP,IAAMrF,WAAS,gBAAGX,sBAAsB,CAAC,UAAAI,KAAK;AAAA,SAAK;AAC/CmG,IAAAA,UAAU,EAAE;AACRjB,MAAAA,eAAe,EAAElF,KAAK,CAACgF,OAAN,CAAcG,UAAd,CAAyBkB,KADlC;AAERrI,MAAAA,MAAM,iBAAegC,KAAK,CAACgF,OAAN,CAAcC,OAF3B;AAGRhH,MAAAA,OAAO,EAAE+B,KAAK,CAAC/C,OAAN,CAAcC,gBAHf;AAIRE,MAAAA,QAAQ,EAAE4C,KAAK,CAACjD,SAAN,CAAgBC,WAJlB;AAKRoI,MAAAA,KAAK,EAAEpF,KAAK,CAACgF,OAAN,CAAc9K,IAAd,CAAmBmL,OALlB;AAMRiB,MAAAA,WAAW,EAAE,cANL;AAORC,MAAAA,UAAU,EAAE,YAPJ;AAQRC,MAAAA,aAAa,EAAE,QARP;AASRC,MAAAA,SAAS,EAAE,YATH;AAURC,MAAAA,SAAS,EAAE,MAVH;AAWRxI,MAAAA,YAAY,EAAE,CAXN;AAYR0F,MAAAA,OAAO,EAAE,MAZD;AAaRL,MAAAA,MAAM,EAAE,MAbA;AAeR;AACAoD,MAAAA,kBAAkB,EAAE,MAhBZ;AAiBRC,MAAAA,gBAAgB,EAAE,MAjBV;AAkBRC,MAAAA,aAAa,EAAE,MAlBP;AAmBRC,MAAAA,YAAY,EAAE,MAnBN;AAoBRC,MAAAA,UAAU,EAAE;AApBJ;AADmC,GAAL;AAAA,CAAN,CAAxC;;AC/CA;AACA;AACA;AACA;AACA;;AAEA,IAAaC,WAAW,gBAAG5Q,cAAK,CAACiL,UAAN,CAGzB,UAACC,KAAD,EAAQzmB,GAAR;;;AACE,MAAQyE,UAAR,GAAgDgiB,KAAhD,CAAQhiB,UAAR;AAAA,MAAoBoX,aAApB,GAAgD4K,KAAhD,CAAoB5K,aAApB;AAAA,MAAmCkP,QAAnC,GAAgDtE,KAAhD,CAAmCsE,QAAnC;AACA,MAAMniB,kBAAkB,GAAGkK,kBAAkB,CACzC2T,KAAK,CAAC7d,kBADmC,EAEzC4S,aAAa,CAAC5S,kBAF2B,EAGzC,SAHyC,CAA7C;AAKA,MAAM8S,0BAA0B,GAAG5I,kBAAkB,CACjD2T,KAAK,CAAC/K,0BAD2C,EAEjDF,aAAa,CAACE,0BAFmC,EAGjD,SAHiD,CAArD;AAKA,MAAMI,QAAQ,GAAGhJ,kBAAkB,CAC/B2T,KAAK,CAAC3K,QADyB,EAE/BN,aAAa,CAACM,QAFiB,EAG/B,SAH+B,CAAnC;AAKA,MAAMC,IAAI,GAAGjJ,kBAAkB,CAAC2T,KAAK,CAAC1K,IAAP,EAAaP,aAAa,CAACO,IAA3B,CAA/B;AACA,MAAMoB,UAAU,GAAGR,aAAO,CAAC;AAAA,wBAAYe,iBAAZ,EAAkC3B,IAAlC,oBAAkCA,IAAI,CAAEoB,UAAxC;AAAA,GAAD,EAAwD,CAC9EpB,IAD8E,CAAxD,CAA1B;AAIA,MAAM1B,gBAAgB,GAAG3a,cAAc,CAAC;AAAA,WAAM+E,UAAN,WAAMA,UAAN,GAAoB2nB,OAAO,CAACC,QAAR,EAApB;AAAA,GAAD,CAAvC;AACA,MAAM3S,KAAK,GAAGU,cAAc,CAACC,gBAAD,CAA5B;AAEA,MAAMiS,kBAAkB,GAAG/H,qBAAqB,EAAhD;AACA,MAAMY,KAAK,GAAGxI,aAAO,CAAC;AAClB,QAAM4P,QAAQ,GAAGC,qBAAc,CAAC;AAC5BrC,MAAAA,OAAO,EAAE;AAAEsC,QAAAA,IAAI,EAAE3Q,QAAQ,GAAG,MAAH,GAAY;AAA5B;AADmB,KAAD,CAA/B;AAGA,QAAM4Q,aAAa,GAAGC,KAAK,CACvBJ,QADuB,EAEvBI,KAAK,CAACjL,UAAD,EAAa5F,QAAQ,GAAGuI,iBAAH,GAAuB,EAA5C,CAFkB,CAA3B;AAIA,WAAOiI,kBAAkB,GACnBK,KAAK,CAACD,aAAD,EAAgBpI,mBAAhB,CADc,GAEnBoI,aAFN;AAGH,GAXoB,EAWlB,CAAC5Q,QAAD,EAAWwQ,kBAAX,CAXkB,CAArB;AAaA,MAAMM,WAAW,GACbrR,4BAAA,wBAAA,MAAA,EACIA,4BAAA,CAACoL,mBAAD;AAAqB3mB,IAAAA,GAAG,EAAEA;KAASymB,MAAnC,CADJ,EAEIlL,4BAAA,CAACuP,uBAAD,MAAA,EAA0BC,QAA1B,CAFJ,CADJ;AAOA,SACIxP,4BAAA,CAACsR,sBAAD;AAAcC,IAAAA,MAAM,EAAC;AAAKC,IAAAA,aAAa,EAAC;KAAShR,KAAjD,EACIR,4BAAA,CAAC8B,uBAAuB,CAAC2P,QAAzB;AAAkChuB,IAAAA,KAAK,EAAEme;GAAzC,EACI5B,4BAAA,CAAC0R,mBAAD;AAAevT,IAAAA,KAAK,EAAEA;GAAtB,EACI6B,4BAAA,CAAC2R,sBAAD;AAAe/H,IAAAA,KAAK,EAAEA;GAAtB,EACI5J,4BAAA,CAAC4R,oBAAD;AAAkBhI,IAAAA,KAAK,EAAEA;GAAzB,EACI5J,4BAAA,CAACiD,iBAAiB,CAACwO,QAAnB;AACIhuB,IAAAA,KAAK,UACD6c,aADC,WACDA,aADC,GAEDL,aAAa,CAACK,aAFb,mBAGDR;GAJR,EAOKzS,kBAAkB,IAAI8S,0BAAtB,GACGkR,WADH,GAGGrR,4BAAA,CAAC6R,oBAAD;AAAaC,IAAAA,OAAO,EAAEC;GAAtB,EACKV,WADL,CAVR,CADJ,CADJ,CADJ,CADJ,CADJ,CADJ;AA2BH,CA5E0B,CAApB;AA6EPT,WAAW,CAACzF,WAAZ,GAA0B,aAA1B;;AClGO,IAAM6G,mBAAmB,GAAG,SAAtBA,mBAAsB;AAC/B,MAAMhoB,WAAW,GAAGyV,sBAAW,CAAC1V,iBAAD,CAA/B;AACA,MAAMuI,QAAQ,GAAGsN,sBAAW,EAA5B;AAEA,MAAMqS,gBAAgB,GAAG7Q,aAAO,CAAC;AAC7B,QAAM8Q,KAAK,GAAsB,EAAjC;AACA,QAAI,CAACloB,WAAL,EAAkB,OAAOkoB,KAAP;;+BAETrqB;AACL,UAAMxC,IAAI,GAAG2E,WAAW,CAACnC,CAAD,CAAxB;AACAqqB,MAAAA,KAAK,CAAC3qB,IAAN,CAAW;AACPlC,QAAAA,IAAI,EAAJA,IADO;AAEP8sB,QAAAA,QAAQ,EAAE,CAAC9sB,IAFJ;AAGP+sB,QAAAA,OAAO,EACH,CAACjtB,UAAU,CAACQ,UAAX,CAAsBN,IAAtB,CAAD,IAAgCwC,CAAC,KAAKmC,WAAW,CAAClC,MAAZ,GAAqB,CAA3D,GACMvB,SADN,GAEM;AAAA,iBACI+L,QAAQ,CACJmD,sBAAsB,CAACpC,aAAa,CAAC+E,SAAf,EAA0B;AAC5CC,YAAAA,UAAU,EAAEhT,IADgC;AAE5C6J,YAAAA,KAAK,EAAE,CAAC7J,IAAD;AAFqC,WAA1B,CADlB,CADZ;AAAA;AANH,OAAX;;;AAFJ,SAAK,IAAIwC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmC,WAAW,CAAClC,MAAhC,EAAwC,EAAED,CAA1C,EAA6C;AAAA,YAApCA,CAAoC;AAgB5C;;AACD,WAAOqqB,KAAP;AACH,GAtB+B,EAsB7B,CAAC5f,QAAD,EAAWtI,WAAX,CAtB6B,CAAhC;AAuBA,SAAOioB,gBAAP;AACH,CA5BM;;ACWA,IAAMI,WAAW,GAAG,SAAdA,WAAc,CAAChtB,IAAD;AACvB;AACA,MAAM8Y,KAAK,GAAGsM,mBAAQ,EAAtB;AACA,MAAM6H,OAAO,GAAG9tB,mBAAmB,CAACa,IAAD,CAAnC;AACA,MAAMktB,kBAAkB,GAAG/S,iBAAW,CAA8B;AAChE,QAAMgT,UAAU,GAAGrU,KAAK,CAAChK,QAAN,EAAnB;AACA,WAAO;AACHse,MAAAA,gBAAgB,EAAEzpB,gBAAgB,CAACwpB,UAAD,CAD/B;AAEHE,MAAAA,MAAM,EAAEzoB,mBAAmB,CAACuoB,UAAD,CAFxB;AAGH;AACA;AACAvZ,MAAAA,WAAW,EAAEqZ,OAAO,CAAC/tB,OALlB;AAMH6M,MAAAA,aAAa,EAAEzF,mBAAmB,CAAC6mB,UAAD;AAN/B,KAAP;AAQH,GAVqC,EAUnC,CAACrU,KAAD,EAAQmU,OAAR,CAVmC,CAAtC;;AAaA,MAAMhgB,QAAQ,GAAGsN,sBAAW,EAA5B;AACA,MAAM+S,OAAO,GAAGnT,iBAAW,CAAC;AAAA,WAAMra,UAAU,CAACY,WAAX,CAAuBusB,OAAO,CAAC/tB,OAA/B,CAAN;AAAA,GAAD,EAAgD,CACvE+tB,OADuE,CAAhD,CAA3B;AAGA,MAAMM,WAAW,GAAGpT,iBAAW,CAAC;AAC5B,QAAMzX,IAAI,GAA2B;AACjCmpB,MAAAA,IAAI,EAAEvE,sBAD2B;AAEjCjX,MAAAA,OAAO,EAAE6c,kBAAkB;AAFM,KAArC;AAIAjgB,IAAAA,QAAQ,CAACmD,sBAAsB,CAACpC,aAAa,CAAC2F,cAAf,EAA+BjR,IAAI,CAAC2N,OAApC,CAAvB,CAAR;AACA,WAAO3N,IAAP;AACH,GAP8B,EAO5B,CAACuK,QAAD,EAAWigB,kBAAX,CAP4B,CAA/B;AAQA,MAAMM,SAAS,GAAGrT,iBAAW,CACzB,UAACzX,IAAD,EAA+BgmB,OAA/B;AACI,QAAM+E,UAAU,GAAG/E,OAAO,CAACgF,aAAR,EAAnB;;AACA,QACI,CAAC5tB,UAAU,CAACY,WAAX,CAAuBgC,IAAI,CAAC2N,OAAL,CAAauD,WAApC,CAAD,IACA,CAAC6Z,UADD,IAEA,CAACA,UAAU,CAACE,UAHhB,EAIE;AACE;AACH;;AAED1gB,IAAAA,QAAQ,CACJmD,sBAAsB,CAACpC,aAAa,CAAC6F,YAAf,eACfnR,IAAI,CAAC2N,OADU;AAElByD,MAAAA,WAAW,EAAE2Z,UAAU,CAACE,UAFN;AAGlBpX,MAAAA,IAAI,EAAEkX,UAAU,CAACG,UAAX,KAA0B;AAHd,OADlB,CAAR;AAOH,GAlBwB,EAmBzB,CAAC3gB,QAAD,CAnByB,CAA7B;;AAuBA,MAAMvK,IAAI,GAAGqZ,aAAO,CAChB;AAAA,WAAO;AACH8P,MAAAA,IAAI,EAAEvE,sBADH;AAEH;AACAjX,MAAAA,OAAO,EAAE;AAHN,KAAP;AAAA,GADgB,EAMhB,EANgB,CAApB;AAQA,MAAMwd,OAAO,GAAG1T,iBAAW,CAAC,UAAAuO,OAAO;AAAA,WAAK;AAAEO,MAAAA,UAAU,EAAEP,OAAO,CAACO,UAAR;AAAd,KAAL;AAAA,GAAR,EAAoD,EAApD,CAA3B;;AACA,4BAAuD7C,kBAAkB,CAAC;AACtE1jB,IAAAA,IAAI,EAAJA,IADsE;AAEtE4qB,IAAAA,OAAO,EAAPA,OAFsE;AAGtEQ,IAAAA,KAAK,EAAEP,WAH+D;AAItE;AACAQ,IAAAA,GAAG,EAAEP,SALiE;AAMtEK,IAAAA,OAAO,EAAPA;AANsE,GAAD,CAAzE;AAAA,MAAqBG,aAArB,0BAAS/E,UAAT;AAAA,MAAsCgF,IAAtC;AAAA,MAA4CC,OAA5C;;AASAzvB,EAAAA,eAAS,CAAC;AACN;AACA;AACAyvB,IAAAA,OAAO,CAACC,kCAAa,EAAd,EAAkB;AAAEC,MAAAA,oBAAoB,EAAE;AAAxB,KAAlB,CAAP;AACH,GAJQ,EAIN,CAACF,OAAD,CAJM,CAAT;AAMA,SAAO;AAAEF,IAAAA,aAAa,EAAbA,aAAF;AAAiBC,IAAAA,IAAI,EAAJA;AAAjB,GAAP;AACH,CA7EM;AAqFP,AAAO,IAAMI,WAAW,GAAG,SAAdA,WAAc;MACvBruB,YAAAA;MACAsuB,wBAAAA;MACAC,4BAAAA;AAEA,MAAMC,cAAc,GAAGrvB,mBAAmB,CAACib,sBAAW,CAAC1V,iBAAD,CAAZ,CAA1C;AACA,MAAM+pB,MAAM,GAAGtU,iBAAW,CACtB,UAACuU,KAAD,EAAgChG,OAAhC;AACI,QAAI,CAACA,OAAO,CAACiG,OAAR,EAAL,EAAwB;AACxB,QAAMC,gBAAgB,GAAmD;AACrEjB,MAAAA,UAAU,EAAE3tB;AADyD,KAAzE;AAGA,WAAO4uB,gBAAP;AACH,GAPqB,EAQtB,CAAC5uB,IAAD,CARsB,CAA1B;AAUA,MAAM2uB,OAAO,GAAGxU,iBAAW,CACvB,UAACzX,IAAD,EAA+BgmB,OAA/B;AACI,QACI4F,gBAAgB,IAChB,CAACxuB,UAAU,CAACc,WAAX,CAAuBZ,IAAvB,CADD,IAEC,CAAC0oB,OAAO,CAACmG,MAAR,CAAe;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAAf,CAAD,IAAsC,CAACP,oBAH5C,EAIE;AACE,aAAO,KAAP;AACH;;AACD,wBAA+C7rB,IAAI,CAAC2N,OAApD;AAAA,QAAQgd,MAAR,iBAAQA,MAAR;AAAA,QAAgBzZ,WAAhB,iBAAgBA,WAAhB;AAAA,QAA6B7H,aAA7B,iBAA6BA,aAA7B;AAGA;AACA;;AACA,QAAMgjB,iBAAiB,GAAG,IAAIzsB,GAAJ,EAA1B;AACAysB,IAAAA,iBAAiB,CAACjsB,GAAlB,CAAsB9C,IAAI,CAAC2C,EAA3B;AACA6rB,IAAAA,cAAc,CAACtvB,OAAf,CAAuBqH,GAAvB,CAA2B,UAAAoa,MAAM;AAC7B,UAAIA,MAAJ,EAAYoO,iBAAiB,CAACjsB,GAAlB,CAAsB6d,MAAM,CAAChe,EAA7B;AACf,KAFD;AAGA,QAAMqsB,UAAU,IAAgBpb,WAAhB,SAAgC7H,aAAhC,CAAhB;;AACA,yDAAuBijB,UAAvB,wCAAmC;AAAA,UAAxBC,QAAwB;AAC/B,UAAIF,iBAAiB,CAAClsB,GAAlB,CAAsBosB,QAAQ,CAACtsB,EAA/B,CAAJ,EAAwC,OAAO,KAAP;AAC3C;AAGD;;;AACA,WAAO3C,IAAI,CAAC2C,EAAL,MAAY0qB,MAAZ,oBAAYA,MAAM,CAAE1qB,EAApB,CAAP;AACH,GA3BsB,EA4BvB,CAAC2rB,gBAAD,EAAmBtuB,IAAnB,EAAyBuuB,oBAAzB,EAA+CC,cAA/C,CA5BuB,CAA3B;AA8BA,MAAMX,OAAO,GAAG1T,iBAAW,CACvB,UAAAuO,OAAO;AAAA,WAAK;AACRmG,MAAAA,MAAM,EAAEnG,OAAO,CAACmG,MAAR,EADA;AAERK,MAAAA,aAAa,EAAExG,OAAO,CAACmG,MAAR,CAAe;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAf,CAFP;AAGRH,MAAAA,OAAO,EAAEjG,OAAO,CAACiG,OAAR;AAHD,KAAL;AAAA,GADgB,EAMvB,EANuB,CAA3B;;AAQA,4BAGIlI,kBAAkB,CAAC;AACnB0I,IAAAA,MAAM,EAAE7H,sBADW;AAEnB8H,IAAAA,IAAI,EAAEX,MAFa;AAGnBE,IAAAA,OAAO,EAAPA,OAHmB;AAInBd,IAAAA,OAAO,EAAPA;AAJmB,GAAD,CAHtB;AAAA;AAAA,MACcwB,SADd,wBACMR,MADN;AAAA,MACwCS,gBADxC,wBACyBJ,aADzB;AAAA,MACmEK,UADnE,wBAC0DZ,OAD1D;AAAA,MAEIS,IAFJ;;AASA,SAAO;AAAEC,IAAAA,SAAS,EAATA,SAAF;AAAaC,IAAAA,gBAAgB,EAAhBA,gBAAb;AAA+BC,IAAAA,UAAU,EAAVA,UAA/B;AAA2CH,IAAAA,IAAI,EAAJA;AAA3C,GAAP;AACH,CAhEM;AAkEP,AAAO,IAAMI,eAAe,GAAG,SAAlBA,eAAkB,CAACxvB,IAAD;AAC3B,qBAAgCgtB,WAAW,CAAChtB,IAAD,CAA3C;AAAA,MAAQguB,aAAR,gBAAQA,aAAR;AAAA,MAAuBC,IAAvB,gBAAuBA,IAAvB;;AACA,qBAAwCI,WAAW,CAAC;AAAEruB,IAAAA,IAAI,EAAJA;AAAF,GAAD,CAAnD;AAAA,MAAQqvB,SAAR,gBAAQA,SAAR;AAAA,MAAmBE,UAAnB,gBAAmBA,UAAnB;AAAA,MAA+BH,IAA/B,gBAA+BA,IAA/B;;AACA,MAAMK,QAAQ,GAAG1T,aAAO,CACpB;AAAA,WAAO;AACHiS,MAAAA,aAAa,EAAbA,aADG;AAEHqB,MAAAA,SAAS,EAATA,SAFG;AAGHE,MAAAA,UAAU,EAAVA;AAHG,KAAP;AAAA,GADoB,EAMpB,CAACA,UAAD,EAAavB,aAAb,EAA4BqB,SAA5B,CANoB,CAAxB;AAQA,SAAO;AACHD,IAAAA,IAAI,EAAJA,IADG;AAEHnB,IAAAA,IAAI,EAAJA,IAFG;AAGHwB,IAAAA,QAAQ,EAARA;AAHG,GAAP;AAKH,CAhBM;AAkBP,AAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAC1vB,IAAD,EAA2ByvB,QAA3B;AAC3B,MAAMxiB,QAAQ,GAAGsN,sBAAW,EAA5B;AACA,MAAMoV,gBAAgB,GAAGxwB,mBAAmB,CAACib,sBAAW,CAACxV,mBAAD,CAAZ,CAA5C;AACAnG,EAAAA,eAAS,CAAC;;;AACN,QAAImxB,OAAO,GAAkB,IAA7B;;AACA,QACIH,QAAQ,CAACJ,SAAT,IACAvvB,UAAU,CAACgB,aAAX,CAAyBd,IAAzB,CADA,IAEAA,IAAI,CAAC2C,EAAL,+BAAYgtB,gBAAgB,CAACzwB,OAA7B,qBAAY,sBAA0ByD,EAAtC,CAHJ,EAIE;AACEitB,MAAAA,OAAO,GAAGjxB,UAAU,CAChB;AAAA,eACIsO,QAAQ,CACJmD,sBAAsB,CAACwC,gBAAgB,CAACG,SAAlB,EAA6B;AAC/CC,UAAAA,UAAU,EAAEhT,IADmC;AAE/C6J,UAAAA,KAAK,EAAE,CAAC7J,IAAD;AAFwC,SAA7B,CADlB,CADZ;AAAA,OADgB;AAShB,UATgB,CAApB;AAWH;;AACD,WAAO;AACH,UAAI4vB,OAAJ,EAAahxB,YAAY,CAACgxB,OAAD,CAAZ;AAChB,KAFD;AAGH,GAtBQ,EAsBN,CAAC3iB,QAAD,EAAWjN,IAAX,EAAiByvB,QAAQ,CAACJ,SAA1B,EAAqCM,gBAArC,CAtBM,CAAT;AAuBH,CA1BM;;ACpMP;;;;;AAMA;AASA,IAAME,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD,EAAcC,GAAd;AACjB,SAAOD,GAAG,GAAGrS,IAAI,CAACuS,KAAL,CAAWvS,IAAI,CAACwS,MAAL,KAAgBxS,IAAI,CAACuS,KAAL,CAAWD,GAAG,GAAGD,GAAjB,CAA3B,CAAb;AACH,CAFD;;AAGA,AAAO,IAAMI,eAAe,gBAAmCvV,cAAK,CAACgL,IAAN,CAAW,UAAAE,KAAK;AAC3E,MAAQsK,SAAR,GAAiCtK,KAAjC,CAAQsK,SAAR;AAAA,MAAmBC,SAAnB,GAAiCvK,KAAjC,CAAmBuK,SAAnB;AAEA,MAAMC,iBAAiB,GAAGR,YAAY,CAACM,SAAD,EAAYC,SAAZ,CAAtC;AACA,MAAME,UAAU,GAAG,SAASC,MAAT,CAAgBF,iBAAhB,CAAnB;AAEA,MAAMtL,OAAO,GAAGD,WAAS,EAAzB;AACA,SACInK,4BAAA,OAAA;AACIyO,IAAAA,SAAS,EAAErE,OAAO,CAACyL;AACnBC,IAAAA,uBAAuB,EAAE;AAAEC,MAAAA,MAAM,EAAEJ;AAAV;GAF7B,CADJ;AAMH,CAb8D,CAAxD;AAeP,IAAMxL,WAAS,gBAAGd,qBAAqB,CAAC;AAAA,SAAO;AAC3C,sCAAkC;AAC9B,YAAM;AAAE2M,QAAAA,OAAO,EAAE;AAAX,OADwB;AAE9B,aAAO;AAAEA,QAAAA,OAAO,EAAE;AAAX,OAFuB;AAG9B,cAAQ;AAAEA,QAAAA,OAAO,EAAE;AAAX;AAHsB,KADS;AAM3CH,IAAAA,eAAe,EAAE;AACbI,MAAAA,aAAa,EAAE,sBADF;AAEbC,MAAAA,uBAAuB,EAAE,UAFZ;AAGbC,MAAAA,uBAAuB,EAAE,QAHZ;AAIbC,MAAAA,iBAAiB,EAAE,MAJN;AAKbtH,MAAAA,eAAe,EAAE,MALJ;AAMbuH,MAAAA,UAAU,EAAE,QANC;AAObC,MAAAA,QAAQ,EAAE,QAPG;AAQbxO,MAAAA,YAAY,EAAE,CARD;AASbyO,MAAAA,QAAQ,EAAE,KATG;AAUbC,MAAAA,QAAQ,EAAE;AAVG;AAN0B,GAAP;AAAA,CAAD,CAAvC;;ACdO,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACpxB,IAAD;AACjC,SAAO+b,aAAO,CAAC;AACX,QAAMsV,SAAS,GAA4C;AACvD,sBAAgB,YADuC;AAEvD,6BAAuBrxB,IAAI,GAAGA,IAAI,CAAC2C,EAAR,GAAazB;AAFe,KAA3D;AAKA;AACIowB,MAAAA,IAAI,EAAE;AADV,OAEOD,SAFP;AAIH,GAVa,EAUX,CAACrxB,IAAD,CAVW,CAAd;AAWH,CAZM;AAcP,AAAO,IAAMuxB,iBAAiB,GAAG,SAApBA,iBAAoB,CAACvxB,IAAD,EAA2BwxB,QAA3B,EAA8CC,OAA9C;AAC7B,MAAMnR,QAAQ,GAAGG,WAAW,CAACzgB,IAAD,CAA5B;;AACA,yBAA2C0xB,eAAe,CAAC1xB,IAAD,CAA1D;AAAA,MAAQ2xB,YAAR,oBAAQA,YAAR;AAAA,MAAsBC,gBAAtB,oBAAsBA,gBAAtB;;AAEA,SAAO7V,aAAO,CAAiB;AAC3B,QAAM8V,SAAS,GAAGF,YAAY,GAAG1T,UAAU,CAACqC,QAAQ,CAACD,SAAV,CAAb,GAAoCrC,WAAW,CAACsC,QAAQ,CAACD,SAAV,CAA7E;AACA,QAAMyR,QAAQ,GAAGF,gBAAgB,IAAI,CAAC5xB,IAAtC;AACA,QAAMkU,IAAI,GAAG0d,gBAAgB,GAAGzgB,sBAAc,CAACuP,OAAlB,GAA4BJ,QAAQ,CAACpM,IAAlE;AAEA,WAAO;AACHxS,MAAAA,aAAa,EAAE5B,UAAU,CAAC2B,gBAAX,CAA4BzB,IAA5B,CADZ;AAEHkU,MAAAA,IAAI,EAAElU,IAAI,IAAIA,IAAI,CAACkU,IAAL,KAAchT,SAAtB,GAAkClB,IAAI,CAACkU,IAAvC,GAA8CA,IAFjD;AAGH4d,MAAAA,QAAQ,EAAEA,QAHP;AAIHH,MAAAA,YAAY,EAAEA,YAJX;AAKHhI,MAAAA,KAAK,EAAE3pB,IAAI,IAAIA,IAAI,CAAC2pB,KAAL,KAAezoB,SAAvB,GAAmClB,IAAI,CAAC2pB,KAAxC,GAAgDkI,SALpD;AAMHL,MAAAA,QAAQ,EAAEA,QANP;AAOHC,MAAAA,OAAO,EAAE,CAAC,CAACA;AAPR,KAAP;AASH,GAda,EAcX,CAACzxB,IAAD,EAAOyxB,OAAP,EAAgBnR,QAAhB,EAA0BkR,QAA1B,EAAoCI,gBAApC,EAAsDD,YAAtD,CAdW,CAAd;AAeH,CAnBM;AAqBP,AAAO,IAAMI,UAAU,GAAG,SAAbA,UAAa,CAACtC,QAAD;AACtB,MAAIuC,WAAW,GAA6B,IAA5C;;AACA,MAAIvC,QAAQ,CAACJ,SAAb,EAAwB;AACpB,QAAM4C,YAAY,GAAGxC,QAAQ,CAACF,UAA9B;AACAyC,IAAAA,WAAW,GAAGC,YAAY,GAAG9gB,sBAAc,CAACoe,UAAlB,GAA+Bpe,sBAAc,CAAC+gB,aAAxE;AACH,GAHD,MAGO,IAAIzC,QAAQ,CAACzB,aAAb,EAA4B;AAC/BgE,IAAAA,WAAW,GAAG7gB,sBAAc,CAACghB,WAA7B;AACH;;AAED,SAAOH,WAAP;AACH,CAVM;AAYP,AAAO,IAAMI,yBAAyB,GAAG,SAA5BA,yBAA4B,CAACpyB,IAAD;AACrC,MAAMqyB,aAAa,GAAqBtW,aAAO,CAAC;AAC5C,QAAMsW,aAAa,GAAqB,EAAxC;AACA,QAAIvyB,UAAU,CAACI,QAAX,CAAoBF,IAApB,CAAJ,EAA+BqyB,aAAa,CAACnwB,IAAd,CAAmBiP,sBAAc,CAACmhB,MAAlC;AAC/B,QAAIxyB,UAAU,CAACK,SAAX,CAAqBH,IAArB,CAAJ,EAAgCqyB,aAAa,CAACnwB,IAAd,CAAmBiP,sBAAc,CAACohB,OAAlC;AAChC,QAAIzyB,UAAU,CAACM,WAAX,CAAuBJ,IAAvB,CAAJ,EAAkCqyB,aAAa,CAACnwB,IAAd,CAAmBiP,sBAAc,CAAC4N,IAAlC;AAClC,WAAOsT,aAAP;AACH,GAN8C,EAM5C,CAACryB,IAAD,CAN4C,CAA/C;AAOA,MAAMwyB,UAAU,GAAGhW,gBAAU,CAACoB,iBAAD,CAA7B;AACA,MAAM6U,sBAAsB,GAAG1W,aAAO,CAClC;AAAA,WAAMsW,aAAa,CAAC9rB,GAAd,CAAkB,UAAC2N,IAAD,EAAOvI,KAAP;AAAA,aAAiBgP,4BAAA,CAAC6X,UAAD;AAAYnX,QAAAA,GAAG,qBAAmB1P;AAASuI,QAAAA,IAAI,EAAEA;OAAjD,CAAjB;AAAA,KAAlB,CAAN;AAAA,GADkC;AAGlC;AACA;AACA,GAACse,UAAD,EAAaH,aAAb,CALkC,CAAtC;AAOA,SAAOI,sBAAP;AACH,CAjBM;;AAmBP,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,QAAD;AACb,MAAMC,KAAK,GAAGD,QAAQ,CAACE,KAAT,CAAe,GAAf,CAAd;;AACA,MAAID,KAAK,CAACnwB,MAAV,EAAkB;AACd,iBAAWmwB,KAAK,CAACA,KAAK,CAACnwB,MAAN,GAAe,CAAhB,CAAhB;AACH;;AACD,SAAO,EAAP;AACH,CAND;;AAQA,AAAO,IAAMqwB,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAC9yB,IAAD;AAChC,SAAO+b,aAAO,CAAC;AACX,QAAI,CAAC/b,IAAL,EAAW,OAAO2a,4BAAA,CAACuV,eAAD;AAAiBC,MAAAA,SAAS,EAAE;AAAIC,MAAAA,SAAS,EAAE;KAA3C,CAAP;AAEX,QAAIxtB,IAAJ;AACA,QAAImwB,SAAS,GAAG,IAAhB;AAEA,QAAM9yB,KAAK,GAAGH,UAAU,CAACC,WAAX,CAAuBC,IAAvB,CAAd;;AACA,QAAIC,KAAJ,EAAW;AACP2C,MAAAA,IAAI,GAAG5C,IAAI,CAAC4C,IAAZ;AACH,KAFD,MAEO;AAAA;;AACHmwB,MAAAA,SAAS,gBAAG/yB,IAAI,CAACgzB,GAAR,wBAAeN,QAAQ,CAAC1yB,IAAI,CAAC4C,IAAN,CAAhC;AACAA,MAAAA,IAAI,GAAG5C,IAAI,CAAC4C,IAAL,CAAUqwB,MAAV,CAAiB,CAAjB,EAAoBjzB,IAAI,CAAC4C,IAAL,CAAUH,MAAV,GAAmBswB,SAAS,CAACtwB,MAAjD,CAAP;AACH;;AAED,WACIkY,4BAAA,wBAAA,MAAA,EACK/X,IADL,EAEKmwB,SAAS,IAAIpY,4BAAA,OAAA;AAAMyO,MAAAA,SAAS,EAAC;KAAhB,EAAiE2J,SAAjE,CAFlB,CADJ;AAMH,GApBa,EAoBX,CAAC/yB,IAAD,CApBW,CAAd;AAqBH,CAtBM;AAwBP,AAAO,IAAM0xB,eAAe,GAAG,SAAlBA,eAAkB,CAAC1xB,IAAD;AAC3B,MAAM4H,kBAAkB,GAAGwS,sBAAW,CAACzS,wBAAD,CAAtC;;AACA,kBAAwCrJ,cAAQ,CAAmB,IAAnB,CAAhD;AAAA,MAAOqzB,YAAP;AAAA,MAAqBuB,eAArB;;AACA,mBAAgD50B,cAAQ,CAAU,KAAV,CAAxD;AAAA,MAAOszB,gBAAP;AAAA,MAAyBuB,mBAAzB;;AACA,MAAMC,eAAe,GAAGn0B,YAAM,CAAC,CAAD,CAA9B;AAEAR,EAAAA,eAAS,CAAC;AACN,QAAI40B,gBAAgB,GAAG,KAAvB;;AAEA,QAAIrzB,IAAJ,EAAU;AACN,UAAI4H,kBAAJ,EAAwB;AACpB,YAAIwrB,eAAe,CAACl0B,OAAhB,KAA4B,CAAhC,EAAmC;AAC/Bi0B,UAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACH;;AACDC,QAAAA,eAAe,CAACl0B,OAAhB;AACAgR,QAAAA,OAAO,CAACC,OAAR,GACKW,IADL,CACU;AAAA,iBAAMlJ,kBAAkB,CAAC5H,IAAD,CAAxB;AAAA,SADV,EAEK8Q,IAFL,CAEU,UAAC6gB,YAAD;AACF,cAAI0B,gBAAJ,EAAsB;AACtBF,UAAAA,mBAAmB,CAAC,KAAD,CAAnB;;AAEA,cAAIxB,YAAY,IAAI,OAAOA,YAAP,KAAwB,QAA5C,EAAsD;AAClDuB,YAAAA,eAAe,CAACvB,YAAD,CAAf;AACH;AACJ,SATL,WAUW,UAAAryB,KAAK;AACR,cAAI,CAAC+zB,gBAAL,EAAuBF,mBAAmB,CAAC,KAAD,CAAnB;AACvB9zB,UAAAA,MAAM,CAACC,KAAP,kEAA0EA,KAAK,CAACgC,OAAhF;AACH,SAbL;AAcH,OAnBD,MAmBO,IAAItB,IAAI,CAAC2xB,YAAT,EAAuB;AAC1BuB,QAAAA,eAAe,CAAClzB,IAAI,CAAC2xB,YAAN,CAAf;AACH;AACJ;;AAED,WAAO;AACH0B,MAAAA,gBAAgB,GAAG,IAAnB;AACH,KAFD;AAGH,GA/BQ,EA+BN,CAACrzB,IAAD,EAAOkzB,eAAP,EAAwBC,mBAAxB,EAA6CvrB,kBAA7C,CA/BM,CAAT;AAiCA,SAAO;AAAE+pB,IAAAA,YAAY,EAAZA,YAAF;AAAgBC,IAAAA,gBAAgB,EAAhBA;AAAhB,GAAP;AACH,CAxCM;AA0CP,AAAO,IAAM0B,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACtzB,IAAD,EAA2BuzB,YAA3B;AAChC,MAAMtmB,QAAQ,GAAGsN,sBAAW,EAA5B;;AAGA,MAAMiZ,YAAY,GAAGrZ,iBAAW,CAC5B,UAAC8M,KAAD,EAAyBnU,SAAzB;AACI,QAAI,CAAC9S,IAAL,EAAW;AAEXiN,IAAAA,QAAQ,CACJmD,sBAAsB,CAACpC,aAAa,CAAC6E,cAAf,EAA+B;AACjDC,MAAAA,SAAS,EAATA,SADiD;AAEjD9S,MAAAA,IAAI,EAAJA,IAFiD;AAGjDqT,MAAAA,gBAAgB,EAAEkgB,YAH+B;AAIjDrM,MAAAA,MAAM,EAAED,KAAK,CAACC,MAJmC;AAKjDjU,MAAAA,OAAO,EAAEgU,KAAK,CAAChU,OALkC;AAMjDK,MAAAA,QAAQ,EAAE2T,KAAK,CAAC3T;AANiC,KAA/B,CADlB,CAAR;AAUH,GAd2B,EAe5B,CAACrG,QAAD,EAAWjN,IAAX,EAAiBuzB,YAAjB,CAf4B,CAAhC;AAiBA,MAAME,eAAe,GAAGtZ,iBAAW,CAC/B,UAAC8M,KAAD;AACI,QAAI,CAACjnB,IAAL,EAAW;AAEXiN,IAAAA,QAAQ,CACJmD,sBAAsB,CAACpC,aAAa,CAACwF,iBAAf,EAAkC;AACpDxT,MAAAA,IAAI,EAAJA,IADoD;AAEpDqT,MAAAA,gBAAgB,EAAEkgB,YAFkC;AAGpD9f,MAAAA,QAAQ,EAAEwT,KAAK,CAACxT,QAHoC;AAIpDC,MAAAA,QAAQ,EAAEuT,KAAK,CAACvT,QAJoC;AAKpDwT,MAAAA,MAAM,EAAED,KAAK,CAACC,MALsC;AAMpDjU,MAAAA,OAAO,EAAEgU,KAAK,CAAChU,OANqC;AAOpDK,MAAAA,QAAQ,EAAE2T,KAAK,CAAC3T;AAPoC,KAAlC,CADlB,CAAR;AAWH,GAf8B,EAgB/B,CAACrG,QAAD,EAAWjN,IAAX,EAAiBuzB,YAAjB,CAhB+B,CAAnC;;AAoBA,MAAMG,aAAa,GAAGvZ,iBAAW,CAAC,UAAC8M,KAAD;AAAA,WAA4BuM,YAAY,CAACvM,KAAD,EAAQ,QAAR,CAAxC;AAAA,GAAD,EAA4D,CAACuM,YAAD,CAA5D,CAAjC;AACA,MAAMG,aAAa,GAAGxZ,iBAAW,CAAC,UAAC8M,KAAD;AAAA,WAA4BuM,YAAY,CAACvM,KAAD,EAAQ,QAAR,CAAxC;AAAA,GAAD,EAA4D,CAACuM,YAAD,CAA5D,CAAjC;AAEA,SAAO;AACHE,IAAAA,aAAa,EAAbA,aADG;AAEHC,IAAAA,aAAa,EAAbA,aAFG;AAGHF,IAAAA,eAAe,EAAfA;AAHG,GAAP;AAKH,CAjDM;;ACpCP,WAAYG;AACRA,EAAAA,0DAAA,WAAA;AACAA,EAAAA,4DAAA,aAAA;AACAA,EAAAA,2DAAA,YAAA;AACAA,EAAAA,0DAAA,WAAA;AACH,CALD,EAAYA,6BAAqB,KAArBA,6BAAqB,KAAA,CAAjC;;ACtGO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACxvB,YAAD;AAChC,MAAM4I,QAAQ,GAAGsN,sBAAW,EAA5B;AACA,MAAMuP,UAAU,GAAG9P,gBAAgB,CAAC5V,oBAAD,EAAuBC,YAAvB,CAAnC;AACA,SAAO8V,iBAAW,CAAC;AAAA,WAAMlN,QAAQ,CAACmD,sBAAsB,CAAC0Z,UAAD,EAAa5oB,SAAb,CAAvB,CAAd;AAAA,GAAD,EAAgE,CAC9E+L,QAD8E,EAE9E6c,UAF8E,CAAhE,CAAlB;AAIH,CAPM;AASP,AAAO,IAAMgK,kBAAkB,GAAG,SAArBA,kBAAqB,CAC9BzvB,YAD8B;;;AAG9B,MAAMU,YAAY,GAAGqV,sBAAW,CAACtV,kBAAD,CAAhC;AACA,MAAMoC,cAAc,GAAGkT,sBAAW,CAACnT,oBAAD,CAAlC;AAEA,MAAMG,YAAY,GAAGgT,sBAAW,CAACjT,kBAAD,CAAhC;AACA,MAAMG,SAAS,GAAG8S,sBAAW,CAAC/S,eAAD,CAA7B;AAEA,MAAMZ,MAAM,GAAGuT,gBAAgB,CAAC5V,oBAAD,EAAuBC,YAAvB,CAA/B;;AAEA,MAAM0vB,WAAW,GAAG/Z,gBAAgB,CAACvS,iBAAD,EAAoBhB,MAApB,sCAAoBA,MAAM,CAAE+G,MAA5B,qBAAoB,eAAgB7K,EAApC,CAApC;AAEA,MAAMqxB,mBAAmB,GAAGha,gBAAgB,CACxCnT,iCADwC,EAExCxC,YAFwC,CAA5C;AAKA,MAAM4vB,oBAAoB,GAAGD,mBAAmB,KAAK,CAArD;AAEA,SAAOjY,aAAO,CAAC;;;AACX,QAAI,CAACtV,MAAL,EAAa,OAAO;AAAEyN,MAAAA,IAAI,EAAE,IAAR;AAAcggB,MAAAA,MAAM,EAAE,KAAtB;AAA6BpH,MAAAA,QAAQ,EAAE;AAAvC,KAAP;AAEb,QAAI5Y,IAAI,4CAAGzN,MAAM,CAACgI,MAAV,qBAAG,eAAeyF,IAAlB,kCAA0B,IAAlC;;AACA,QAAIzN,MAAM,CAAC2D,eAAX,EAA4B;AACxB,UAAIhD,YAAY,KAAKX,MAAM,CAAC9D,EAA5B,EAAgC;AAC5B,YAAI2E,SAAS,KAAK5D,SAAS,CAAC4G,GAA5B,EAAiC;AAC7B4J,UAAAA,IAAI,GAAG/C,sBAAc,CAACgjB,OAAtB;AACH,SAFD,MAEO;AACHjgB,UAAAA,IAAI,GAAG/C,sBAAc,CAACijB,QAAtB;AACH;AACJ,OAND,MAMO;AACHlgB,QAAAA,IAAI,GAAG/C,sBAAc,CAACkjB,WAAtB;AACH;AACJ,KAVD,MAUO,IAAI5tB,MAAM,CAAC+G,MAAX,EAAmB;AACtB,UAAIumB,WAAJ,EAAiB;AACb7f,QAAAA,IAAI,GAAG/C,sBAAc,CAACmjB,QAAtB;AACH,OAFD,MAEO;AACHpgB,QAAAA,IAAI,GAAG/C,sBAAc,CAACojB,SAAtB;AACH;AACJ;;AAED,QAAMC,0BAA0B,GAAG/tB,MAAM,CAAC9D,EAAP,KAAcyE,YAAjD;AACA,QAAMqtB,8BAA8B,GAAGhuB,MAAM,CAACS,cAAP,KAA0BA,cAAjE;AACA,QAAMwtB,kBAAkB,GAAGjuB,MAAM,CAAC+G,MAAP,GAAgB,CAAC,CAACumB,WAAlB,GAAgC,KAA3D;AAEA,QAAIY,cAAc,GAAG,KAArB;AACA,QAAIC,YAAY,GAAG,KAAnB;;AACA,QAAInuB,MAAM,CAACouB,gBAAP,KAA4B3zB,SAAhC,EAA2C;AACvCyzB,MAAAA,cAAc,GAAGluB,MAAM,CAACouB,gBAAP,OAA8BjB,6BAAqB,CAACkB,QAArE;AACAF,MAAAA,YAAY,GAAGnuB,MAAM,CAACouB,gBAAP,OAA8BjB,6BAAqB,CAACmB,MAAnE;AACH;;AACD,QAAMb,MAAM,GACRM,0BAA0B,IAC1BC,8BADA,IAEAC,kBAFA,IAGAE,YAJJ;AAMA,QAAI9H,QAAQ,GAAa,CAAC,CAACrmB,MAAM,CAACC,iBAAT,IAA8ButB,oBAA/B,IAAwDU,cAAhF;;AAEA,QAAIluB,MAAM,CAAC9D,EAAP,KAAcqL,aAAa,CAACC,gBAAd,CAA+BtL,EAAjD,EAAqD;AACjD;AACA;AACAmqB,MAAAA,QAAQ,GAAGA,QAAQ,IAAI,CAAChtB,UAAU,CAACQ,UAAX,CAAsByE,YAAtB,CAAxB;AACH;;AAED,WAAO;AAAEmP,MAAAA,IAAI,EAAJA,IAAF;AAAQggB,MAAAA,MAAM,EAANA,MAAR;AAAgBpH,MAAAA,QAAQ,EAARA;AAAhB,KAAP;AACH,GA/Ca,EA+CX,CACC/nB,YADD,EAECmC,cAFD,EAGCE,YAHD,EAICE,SAJD,EAKCb,MALD,EAMCstB,WAND,EAOCE,oBAPD,CA/CW,CAAd;AAwDH,CA5EM;;AC9BP;;;;;AAMA,AAyBO,IAAMe,aAAa,gBAAiCra,cAAK,CAACgL,IAAN,CAAW,UAAAE,KAAK;;;AACvE,MACeoP,iBADf,GAUIpP,KAVJ,CACIuD,SADJ;AAAA,MAEI3K,IAFJ,GAUIoH,KAVJ,CAEIpH,IAFJ;AAAA,MAGIhI,OAHJ,GAUIoP,KAVJ,CAGIpP,OAHJ;AAAA,MAIIyd,MAJJ,GAUIrO,KAVJ,CAIIqO,MAJJ;AAAA,MAKIhgB,IALJ,GAUI2R,KAVJ,CAKI3R,IALJ;AAAA,MAMIE,QANJ,GAUIyR,KAVJ,CAMIzR,QANJ;AAAA,MAOI2Y,OAPJ,GAUIlH,KAVJ,CAOIkH,OAPJ;AAAA,MAQID,QARJ,GAUIjH,KAVJ,CAQIiH,QARJ;AAAA,MASIoI,QATJ,GAUIrP,KAVJ,CASIqP,QATJ;AAWA,MAAMnQ,OAAO,GAAGD,WAAS,EAAzB;AACA,MAAM0N,UAAU,GAAGhW,gBAAU,CAACoB,iBAAD,CAA7B;AAEA,MAAM3C,aAAa,GACf/G,IAAI,IAAIE,QAAR,GACIuG,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEhV,QAAQ,GAAG,EAAH,GAAQ2Q,OAAO,CAACoQ;GAAxC,EACIxa,4BAAA,CAAC6X,UAAD;AACIte,IAAAA,IAAI,EAAEA,IAAI,GAAGA,IAAH,GAAU/C,sBAAc,CAACikB;AACnCC,IAAAA,UAAU,EAAE;GAFhB,CADJ,CADJ,GAOI,IARR;AAUA,MAAMjM,SAAS,GAAGnE,CAAC,cACdgQ,iBADc,WACdA,iBADc,GACO,EADP,IACY,IADZ,KAEdlQ,OAAO,CAACuQ,UAFM,IAEO,IAFP,KAGdvQ,OAAO,CAACwQ,cAHM,IAGWnhB,QAHX,KAId2Q,OAAO,CAACyQ,YAJM,IAIS,CAAC,CAACtB,MAJX,MAAnB;AAMA,SACIvZ,4BAAA,CAAC8a,MAAD;AACIrM,IAAAA,SAAS,EAAEA;AACX2D,IAAAA,OAAO,EAAEA;AACTrS,IAAAA,KAAK,EAAEjE,OAAO,GAAGA,OAAH,GAAagI;AAC3BqO,IAAAA,QAAQ,EAAEA,QAAQ,IAAI,CAACC;GAJ3B,EAMK9R,aANL,EAOKwD,IAAI,IAAI,CAACrK,QAAT,IAAqBuG,4BAAA,OAAA,MAAA,EAAO8D,IAAP,CAP1B,EAQKyW,QAAQ,IACLva,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC2Q;GAAxB,EACI/a,4BAAA,CAAC6X,UAAD;AACIte,IAAAA,IAAI,EAAEA,IAAI,GAAGA,IAAH,GAAU/C,sBAAc,CAAC+jB;AACnCG,IAAAA,UAAU,EAAE;GAFhB,CADJ,CATR,CADJ;AAmBH,CAlD0D,CAApD;AAoDP,IAAMvQ,WAAS,gBAAGX,sBAAsB,CAAC,UAAAI,KAAK;AAAA,SAAK;AAC/C+Q,IAAAA,UAAU,EAAE;AACR3T,MAAAA,QAAQ,EAAEqD,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAciT,QAAf,CADX;AAERgU,MAAAA,aAAa,EAAE3Q,SAAS,CAAC,MAAD,CAFhB;AAGR4Q,MAAAA,aAAa,EAAE5Q,SAAS,CAAC,CAAD,CAHhB;AAIRmM,MAAAA,QAAQ,EAAEnM,SAAS,CAAC,MAAD,CAJX;AAKRtD,MAAAA,UAAU,EAAE6C,KAAK,CAAC7V,OAAN,CAAcgT,UALlB;AAMRoG,MAAAA,MAAM,EAAEvD,KAAK,CAAC7V,OAAN,CAAc3L,IANd;AAOR8yB,MAAAA,aAAa,EAAE7Q,SAAS,CAAC,CAAD,CAPhB;AAQR8Q,MAAAA,UAAU,EAAE9Q,SAAS,CAAC,CAAD;AARb,KADmC;AAW/CmQ,IAAAA,YAAY,EAAE;AACVY,MAAAA,WAAW,EAAE;AADH,KAXiC;AAc/CR,IAAAA,cAAc,EAAE;AACZ1N,MAAAA,KAAK,EAAEtD,KAAK,CAAC7V,OAAN,CAAc3L,IADT;AAEZkoB,MAAAA,SAAS,EAAE;AAFC,KAd+B;AAkB/CyK,IAAAA,YAAY,EAAE;AACV/T,MAAAA,QAAQ,EAAE,OADA;AAEVqU,MAAAA,UAAU,EAAE,CAFF;AAGVC,MAAAA,SAAS,EAAE;AAHD,KAlBiC;AAuB/CT,IAAAA,YAAY,EAAE;AACV7L,MAAAA,KAAK,EAAE3E,SAAS,CAACT,KAAK,CAACxD,MAAN,CAAaM,UAAd;AADN;AAvBiC,GAAL;AAAA,CAAN,CAAxC;AAgCA,AAAO,IAAM6U,kBAAkB,gBAAsCvb,cAAK,CAACgL,IAAN,CACjE,UAAAE,KAAK;AACD,MAAQxhB,YAAR,GAAyBwhB,KAAzB,CAAQxhB,YAAR;AAEA,MAAMoC,MAAM,GAAGuT,gBAAgB,CAAC5V,oBAAD,EAAuBC,YAAvB,CAA/B;AACA,MAAM8xB,aAAa,GAAGtC,oBAAoB,CAACxvB,YAAD,CAA1C;;AACA,4BAAmCyvB,kBAAkB,CAACzvB,YAAD,CAArD;AAAA,MAAQ6P,IAAR,uBAAQA,IAAR;AAAA,MAAcggB,MAAd,uBAAcA,MAAd;AAAA,MAAsBpH,QAAtB,uBAAsBA,QAAtB;;AACA,8BAAsC3Q,6BAA6B,CAAC1V,MAAD,CAAnE;AAAA,MAAQ2V,UAAR,yBAAQA,UAAR;AAAA,MAAoBC,aAApB,yBAAoBA,aAApB;;AAEA,MAAI,CAAC5V,MAAL,EAAa,OAAO,IAAP;AACb,MAAQgI,MAAR,GAAmBhI,MAAnB,CAAQgI,MAAR;AACA,MAAI,CAACA,MAAL,EAAa,OAAO,IAAP;AACb,MAAIhI,MAAM,CAACouB,gBAAP,KAA4B3zB,SAA5B,IAAyCuF,MAAM,CAACouB,gBAAP,OAA8BjB,6BAAqB,CAACwC,MAAjG,EAAyG,OAAO,IAAP;AAEzG,SACIzb,4BAAA,CAACqa,aAAD;AACIvW,IAAAA,IAAI,EAAErC;AACN3F,IAAAA,OAAO,EAAE4F;AACTnI,IAAAA,IAAI,EAAEA;AACNE,IAAAA,QAAQ,EAAE3F,MAAM,CAAC2F;AACjB8f,IAAAA,MAAM,EAAEA;AACRnH,IAAAA,OAAO,EAAEoJ;AACTrJ,IAAAA,QAAQ,EAAEA;GAPd,CADJ;AAWH,CAzBgE,CAA9D;;ACnHP;;;;;AAMA,AAiBO,IAAMuJ,iBAAiB,gBAAqC1b,cAAK,CAACgL,IAAN,CAC/D;;;MAAG2Q,aAAAA;MAAOp3B,eAAAA;MAASwD,YAAAA;AACf,MAAQ1C,IAAR,GAAoC0C,IAApC,CAAQ1C,IAAR;AAAA,MAAc8sB,QAAd,GAAoCpqB,IAApC,CAAcoqB,QAAd;AAAA,MAAwBC,OAAxB,GAAoCrqB,IAApC,CAAwBqqB,OAAxB;;AACA,qBAAwCsB,WAAW,CAAC;AAChDruB,IAAAA,IAAI,EAAJA,IADgD;AAEhDsuB,IAAAA,gBAAgB,EAAE,CAACtuB,IAAD,IAASd;AAFqB,GAAD,CAAnD;AAAA,MAAQmwB,SAAR,gBAAQA,SAAR;AAAA,MAAmBE,UAAnB,gBAAmBA,UAAnB;AAAA,MAA+BH,IAA/B,gBAA+BA,IAA/B;;AAIA,MAAMK,QAAQ,GAAG1T,aAAO,CACpB;AAAA,WAAO;AACHsT,MAAAA,SAAS,EAATA,SADG;AAEHE,MAAAA,UAAU,EAAVA,UAFG;AAGHvB,MAAAA,aAAa,EAAE;AAHZ,KAAP;AAAA,GADoB,EAMpB,CAACuB,UAAD,EAAaF,SAAb,CANoB,CAAxB;AAQAK,EAAAA,eAAe,CAAC1vB,IAAD,EAAOyvB,QAAP,CAAf;AACA,MAAMuC,WAAW,GAAGD,UAAU,CAACtC,QAAD,CAA9B;AACA,MAAM+C,UAAU,GAAGhW,gBAAU,CAACoB,iBAAD,CAA7B;AAEA,MAAMmH,OAAO,GAAGD,WAAS,CAAC2K,QAAD,CAAzB;AACA,MAAMrG,SAAS,GAAGnE,CAAC,cACdF,OAAO,CAACwR,cADM,IACW,IADX,KAEdxR,OAAO,CAACyR,kBAFM,IAEe1J,QAFf,KAGd/H,OAAO,CAAC0R,iBAHM,IAGcv3B,OAHd,MAAnB;AAKA,MAAMuf,IAAI,GAAGze,IAAI,GAAGA,IAAI,CAAC4C,IAAR,GAAe,YAAhC;AACA,MAAMsR,IAAI,GACNoiB,KAAK,IAAI,CAAAt2B,IAAI,QAAJ,YAAAA,IAAI,CAAE02B,eAAN,MAA0Bx1B,SAAnC,GACMiQ,sBAAc,CAACwP,MADrB,GAEM3gB,IAFN,oBAEMA,IAAI,CAAE02B,eAHhB;AAKA,SACI/b,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC4R;AAAiBv3B,IAAAA,GAAG,EAAEY,IAAI,GAAGovB,IAAH,GAAU;GAA5D,EACKpvB,IAAI,IAAIgyB,WAAR,IACGrX,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC6R;GAAxB,EACIjc,4BAAA,CAAC6X,UAAD;AAAYte,IAAAA,IAAI,EAAE8d;AAAaqD,IAAAA,UAAU,EAAE;GAA3C,CADJ,CAFR,EAMI1a,4BAAA,CAACqa,aAAD;AACI9gB,IAAAA,IAAI,EAAEA;AACNkV,IAAAA,SAAS,EAAEA;AACX3K,IAAAA,IAAI,EAAEA;AACNqO,IAAAA,QAAQ,EAAEA;AACVC,IAAAA,OAAO,EAAEA;GALb,CANJ,CADJ;AAgBH,CA/C8D,CAA5D;AAkDP,IAAMjI,WAAS,gBAAGd,qBAAqB,CAAC,UAAAO,KAAK;AAAA,SAAK;AAC9CoS,IAAAA,eAAe,EAAE;AACbnP,MAAAA,QAAQ,EAAE;AADG,KAD6B;AAI9C+O,IAAAA,cAAc,EAAE;AACZ5M,MAAAA,KAAK,EAAE,eAAC8F,QAAD;AACH,YAAI9F,KAAK,GAAGpF,KAAK,CAACgF,OAAN,CAAc9K,IAAd,CAAmBmL,OAA/B;;AACA,YAAI6F,QAAQ,CAACJ,SAAb,EAAwB;AACpB1F,UAAAA,KAAK,GAAG8F,QAAQ,CAACF,UAAT,GACFhL,KAAK,CAAC1C,GAAN,CAAUC,YADR,GAEFyC,KAAK,CAAC1C,GAAN,CAAUE,eAFhB;AAGH;;AACD,eAAOiD,SAAS,CAAC2E,KAAD,CAAhB;AACH;AATW,KAJ8B;AAe9C6M,IAAAA,kBAAkB,EAAE;AAChB;AACA;AACA7M,MAAAA,KAAK,EAAE;AAAA,eAAM3E,SAAS,CAACT,KAAK,CAACgF,OAAN,CAAc9K,IAAd,CAAmBqO,QAApB,CAAf;AAAA;AAHS,KAf0B;AAoB9C2J,IAAAA,iBAAiB,EAAE;AACfI,MAAAA,cAAc,EAAE7R,SAAS,CAAC,WAAD;AADV,KApB2B;AAuB9C4R,IAAAA,YAAY,EAAE;AACVjN,MAAAA,KAAK,EAAE,eAAC8F,QAAD;AAAA,eACHA,QAAQ,CAACF,UAAT,GAAsBhL,KAAK,CAAC1C,GAAN,CAAUC,YAAhC,GAA+CyC,KAAK,CAAC1C,GAAN,CAAUE,eADtD;AAAA,OADG;AAGV0H,MAAAA,eAAe,EAAE,yBAACgG,QAAD;AAAA,eACbA,QAAQ,CAACF,UAAT,GAAsBhL,KAAK,CAAC1C,GAAN,CAAUG,WAAhC,GAA8CuC,KAAK,CAAC1C,GAAN,CAAUI,cAD3C;AAAA,OAHP;AAKVP,MAAAA,UAAU,YAAU6C,KAAK,CAAC7V,OAAN,CAAcgT,UAAxB,YALA;AAMV4G,MAAAA,SAAS,EAAE,mCAND;AAOV7F,MAAAA,YAAY,EAAE8B,KAAK,CAAC7V,OAAN,CAAckT,YAPlB;AAQVkG,MAAAA,MAAM,EAAEvD,KAAK,CAAC7V,OAAN,CAAc3L,IAAd,GAAqB,CARnB;AASV8kB,MAAAA,KAAK,EAAEtD,KAAK,CAAC7V,OAAN,CAAc3L,IAAd,GAAqB,CATlB;AAUVioB,MAAAA,SAAS,EAAE,YAVD;AAWVxD,MAAAA,QAAQ,EAAE,UAXA;AAYVyD,MAAAA,SAAS,EAAE,QAZD;AAaVtD,MAAAA,IAAI,EAAE,KAbI;AAcVC,MAAAA,GAAG,EAAE,KAdK;AAeVF,MAAAA,MAAM,EAAE;AAfE;AAvBgC,GAAL;AAAA,CAAN,CAAvC;;ACzEA;;;;;AAMA,IAYaoP,UAAU,gBAA8Bnc,cAAK,CAACgL,IAAN,CAAW;AAC5D,MAAMZ,OAAO,GAAGD,WAAS,EAAzB;AACA,MAAM8H,gBAAgB,GAAGD,mBAAmB,EAA5C;AAEA,MAAMoK,qBAAqB,GAAGhb,aAAO,CAAC;AAClC,QAAMib,UAAU,GAAmB,EAAnC;;AACA,SAAK,IAAIx0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoqB,gBAAgB,CAACnqB,MAArC,EAA6C,EAAED,CAA/C,EAAkD;AAC9C,UAAM6Y,GAAG,qBAAmB7Y,CAA5B;AACA,UAAMy0B,SAAS,GACXtc,4BAAA,CAAC0b,iBAAD;AACIhb,QAAAA,GAAG,EAAEA;AACLib,QAAAA,KAAK,EAAE9zB,CAAC,KAAK;AACbtD,QAAAA,OAAO,EAAEsD,CAAC,KAAKoqB,gBAAgB,CAACnqB,MAAjB,GAA0B;AACzCC,QAAAA,IAAI,EAAEkqB,gBAAgB,CAACpqB,CAAD;OAJ1B,CADJ;AAQAw0B,MAAAA,UAAU,CAAC90B,IAAX,CAAgB+0B,SAAhB;AACH;;AACD,WAAOD,UAAP;AACH,GAfoC,EAelC,CAACpK,gBAAD,CAfkC,CAArC;AAiBA,SACIjS,4BAAA,CAAC8P,GAAD;AAAKrB,IAAAA,SAAS,EAAErE,OAAO,CAACmS;GAAxB,EACIvc,4BAAA,CAAC8P,GAAD;AAAKrB,IAAAA,SAAS,EAAErE,OAAO,CAACoS;GAAxB,EACIxc,4BAAA,CAACub,kBAAD;AAAoB7xB,IAAAA,YAAY,EAAE2J,aAAa,CAACC,gBAAd,CAA+BtL;GAAjE,CADJ,EAEIgY,4BAAA,CAACyc,WAAD;AACIhO,IAAAA,SAAS,EAAErE,OAAO,CAACsS;AACnBtS,IAAAA,OAAO,EAAE;AAAEuS,MAAAA,SAAS,EAAEvS,OAAO,CAACuS;AAArB;GAFb,EAIKP,qBAJL,CAFJ,CADJ,CADJ;AAaH,CAlCoD,CAA9C;AAoCP,IAAMjS,WAAS,gBAAGX,sBAAsB,CAAC,UAAAI,KAAK;AAAA,SAAK;AAC/C2S,IAAAA,aAAa,EAAE;AACXrB,MAAAA,aAAa,EAAEtR,KAAK,CAAC/C,OAAN,CAAcC;AADlB,KADgC;AAI/C0V,IAAAA,eAAe,EAAE;AACbhP,MAAAA,OAAO,EAAE;AADI,KAJ8B;AAO/CoP,IAAAA,iBAAiB,EAAE;AACf5V,MAAAA,QAAQ,EAAEqD,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAciT,QAAf,CADJ;AAEfmG,MAAAA,MAAM,EAAEvD,KAAK,CAAC7V,OAAN,CAAc3L,IAFP;AAGf8kB,MAAAA,KAAK,EAAEtD,KAAK,CAAC7V,OAAN,CAAc3L,IAHN;AAIfyf,MAAAA,OAAO,EAAE;AAJM,KAP4B;AAa/C6U,IAAAA,iBAAiB,EAAE;AACf1V,MAAAA,QAAQ,EAAEqD,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAciT,QAAf,CADJ;AAEf6V,MAAAA,QAAQ,EAAE;AAFK,KAb4B;AAiB/CF,IAAAA,SAAS,EAAE;AACPvB,MAAAA,WAAW,EAAE/Q,SAAS,CAAC,CAAD,CADf;AAEPgR,MAAAA,UAAU,EAAEhR,SAAS,CAAC,CAAD;AAFd;AAjBoC,GAAL;AAAA,CAAN,CAAxC;;ACtDA;;;;;AAMA,AAuBO,IAAMyS,qBAAqB,gBAAG9c,cAAK,CAACiL,UAAN,CACjC,UAACC,KAAD,EAAoCzmB,GAApC;;;AACI,MAAQqf,IAAR,GAAkDoH,KAAlD,CAAQpH,IAAR;AAAA,MAAcyV,MAAd,GAAkDrO,KAAlD,CAAcqO,MAAd;AAAA,MAAsBhgB,IAAtB,GAAkD2R,KAAlD,CAAsB3R,IAAtB;AAAA,MAA4B6Y,OAA5B,GAAkDlH,KAAlD,CAA4BkH,OAA5B;AAAA,MAAqCD,QAArC,GAAkDjH,KAAlD,CAAqCiH,QAArC;AACA,MAAM/H,OAAO,GAAGD,WAAS,EAAzB;AACA,MAAM0N,UAAU,GAAGhW,gBAAU,CAACoB,iBAAD,CAA7B;AAEA,MAAMwL,SAAS,GAAGnE,CAAC,cACdF,OAAO,CAACuQ,UADM,IACO,IADP,KAEdvQ,OAAO,CAACyQ,YAFM,IAEStB,MAFT,MAAnB;AAIA,SACIvZ,4BAAA,CAAC+c,QAAD;AACIt4B,IAAAA,GAAG,EAAEA;AACLgqB,IAAAA,SAAS,EAAEA;AACX2D,IAAAA,OAAO,EAAEA;AACTD,IAAAA,QAAQ,EAAEA;GAJd,EAMK5Y,IAAI,IACDyG,4BAAA,CAACgd,YAAD;AAAcvO,IAAAA,SAAS,EAAErE,OAAO,CAAC7Q;GAAjC,EACIyG,4BAAA,CAAC6X,UAAD;AAAYte,IAAAA,IAAI,EAAEA;AAAMmhB,IAAAA,UAAU,EAAE;GAApC,CADJ,CAPR,EAWI1a,4BAAA,CAACid,YAAD;AAAcC,IAAAA,sBAAsB,EAAE;AAAEzO,MAAAA,SAAS,EAAErE,OAAO,CAACtG;AAArB;GAAtC,EACKA,IADL,CAXJ,CADJ;AAiBH,CA3BgC,CAA9B;AA8BP,IAAMqG,WAAS,gBAAGX,sBAAsB,CAAC,UAAAI,KAAK;AAAA,SAAK;AAC/C+Q,IAAAA,UAAU,EAAE;AACR5T,MAAAA,UAAU,EAAEsD,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAcgT,UAAf,CADb;AAERoG,MAAAA,MAAM,EAAE9C,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAc3L,IAAf,CAFT;AAGR+0B,MAAAA,SAAS,EAAE9S,SAAS,CAAC,MAAD,CAHZ;AAIRmM,MAAAA,QAAQ,EAAEnM,SAAS,CAAC,MAAD,CAJX;AAKRxC,MAAAA,OAAO,EAAEwC,SAAS,CAAC,EAAD;AALV,KADmC;AAQ/C9Q,IAAAA,IAAI,EAAE;AACFyN,MAAAA,QAAQ,EAAEqD,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAciT,QAAf,CADjB;AAEFwP,MAAAA,QAAQ,EAAEnM,SAAS,CAAC,MAAD,CAFjB;AAGF2E,MAAAA,KAAK,EAAE3E,SAAS,CAAC,SAAD,CAHd;AAIF+Q,MAAAA,WAAW,EAAE;AAJX,KARyC;AAc/CtX,IAAAA,IAAI,EAAE;AACFkD,MAAAA,QAAQ,EAAEqD,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAciT,QAAf;AADjB,KAdyC;AAiB/C6T,IAAAA,YAAY,EAAE;AACV7L,MAAAA,KAAK,EAAE3E,SAAS,CAACT,KAAK,CAACxD,MAAN,CAAaM,UAAd;AADN;AAjBiC,GAAL;AAAA,CAAN,CAAxC;AA2BA,AAAO,IAAM0W,0BAA0B,gBAAGpd,cAAK,CAACiL,UAAN,CACtC,UAACC,KAAD,EAAyCzmB,GAAzC;AACI,MAAQiF,YAAR,GAA0CwhB,KAA1C,CAAQxhB,YAAR;AAAA,MAAsB2zB,eAAtB,GAA0CnS,KAA1C,CAAsBmS,eAAtB;AAEA,MAAMvxB,MAAM,GAAGuT,gBAAgB,CAAC5V,oBAAD,EAAuBC,YAAvB,CAA/B;AACA,MAAM8xB,aAAa,GAAGtC,oBAAoB,CAACxvB,YAAD,CAA1C;;AACA,4BAAmCyvB,kBAAkB,CAACzvB,YAAD,CAArD;AAAA,MAAQ6P,IAAR,uBAAQA,IAAR;AAAA,MAAcggB,MAAd,uBAAcA,MAAd;AAAA,MAAsBpH,QAAtB,uBAAsBA,QAAtB;;AACA,8BAAuB3Q,6BAA6B,CAAC1V,MAAD,CAApD;AAAA,MAAQ2V,UAAR,yBAAQA,UAAR;;;AAGA,MAAM6b,WAAW,GAAG9d,iBAAW,CAAC;AAC5Bgc,IAAAA,aAAa;AACb,QAAI6B,eAAJ,EAAqBA,eAAe;AACvC,GAH8B,EAG5B,CAACA,eAAD,EAAkB7B,aAAlB,CAH4B,CAA/B;AAKA,MAAI,CAAC1vB,MAAL,EAAa,OAAO,IAAP;AACb,MAAQgI,MAAR,GAAmBhI,MAAnB,CAAQgI,MAAR;AACA,MAAI,CAACA,MAAL,EAAa,OAAO,IAAP;AACb,MAAIhI,MAAM,CAACouB,gBAAP,KAA4B3zB,SAA5B,IAAyCuF,MAAM,CAACouB,gBAAP,OAA8BjB,6BAAqB,CAACwC,MAAjG,EAAyG,OAAO,IAAP;AAEzG,SACIzb,4BAAA,CAAC8c,qBAAD;AACIr4B,IAAAA,GAAG,EAAEA;AACLqf,IAAAA,IAAI,EAAErC;AACNlI,IAAAA,IAAI,EAAEA;AACN6Y,IAAAA,OAAO,EAAEkL;AACT/D,IAAAA,MAAM,EAAEA;AACRpH,IAAAA,QAAQ,EAAEA;GANd,CADJ;AAUH,CA9BqC,CAAnC;;ACtFP;;;;;AAMA,AAWO,IAAMoL,eAAe,gBAAmCvd,cAAK,CAACgL,IAAN,CAAW,UAAAE,KAAK;AAC3E,MAAQjjB,IAAR,GAAgCijB,KAAhC,CAAQjjB,IAAR;AAAA,MAAcuB,aAAd,GAAgC0hB,KAAhC,CAAc1hB,aAAd;;AACA,wBAA4BwW,cAAK,CAACrc,QAAN,CAAmC,IAAnC,CAA5B;AAAA,MAAO65B,MAAP;AAAA,MAAeC,SAAf;;AAEA,MAAMH,WAAW,GAAG9d,iBAAW,CAC3B,UAAC8M,KAAD;AAAA,WAAgDmR,SAAS,CAACnR,KAAK,CAACoR,aAAP,CAAzD;AAAA,GAD2B,EAE3B,CAACD,SAAD,CAF2B,CAA/B;AAIA,MAAME,WAAW,GAAGne,iBAAW,CAAC;AAAA,WAAMie,SAAS,CAAC,IAAD,CAAf;AAAA,GAAD,EAAwB,CAACA,SAAD,CAAxB,CAA/B;AAEA,MAAMG,kBAAkB,GAAGxc,aAAO,CAC9B;AAAA,WACI5X,aAAa,CAACoC,GAAd,CAAkB,UAAA5D,EAAE;AAAA,aAChBgY,4BAAA,CAACod,0BAAD;AACI1c,QAAAA,GAAG,iBAAe1Y;AAClB0B,QAAAA,YAAY,EAAE1B;AACdq1B,QAAAA,eAAe,EAAEM;OAHrB,CADgB;AAAA,KAApB,CADJ;AAAA,GAD8B,EAS9B,CAACn0B,aAAD,EAAgBm0B,WAAhB,CAT8B,CAAlC;AAYA,MAAME,aAAa,GAAG5c,2BAA2B,CAAChZ,IAAD,CAAjD;AACA,MAAMmiB,OAAO,GAAGD,WAAS,EAAzB;AACA,SACInK,4BAAA,wBAAA,MAAA,EACIA,4BAAA,CAACqa,aAAD;AAAevW,IAAAA,IAAI,EAAE+Z;AAAezL,IAAAA,OAAO,EAAEkL;AAAa/C,IAAAA,QAAQ,EAAE;GAApE,CADJ,EAEIva,4BAAA,CAAC8d,IAAD;AACIC,IAAAA,SAAS;AACTC,IAAAA,WAAW;AACXC,IAAAA,SAAS,EAAE;AACXC,IAAAA,QAAQ,EAAEV;AACVW,IAAAA,OAAO,EAAER;AACTS,IAAAA,IAAI,EAAEC,OAAO,CAACb,MAAD;AACbc,IAAAA,kBAAkB,EAAE;AACpBlU,IAAAA,OAAO,EAAE;AAAEzP,MAAAA,IAAI,EAAEyP,OAAO,CAACmU;AAAhB;GARb,EAUKX,kBAVL,CAFJ,CADJ;AAiBH,CAzC8D,CAAxD;AA2CP,IAAMzT,WAAS,gBAAGX,sBAAsB,CAAC;AAAA,SAAO;AAC5C+U,IAAAA,YAAY,EAAE;AACVrD,MAAAA,aAAa,EAAE7Q,SAAS,CAAC,CAAD,CADd;AAEV8Q,MAAAA,UAAU,EAAE9Q,SAAS,CAAC,CAAD;AAFX;AAD8B,GAAP;AAAA,CAAD,CAAxC;;AC5DA;;;;;AAMA,AAYO,IAAMmU,WAAW,gBAA+Bxe,cAAK,CAACgL,IAAN,CAAW;AAC9D,MAAMZ,OAAO,GAAGD,WAAS,EAAzB;AAEA,MAAMpZ,cAAc,GAAG0O,sBAAW,CAACxO,SAAS,CAACL,iBAAX,CAAlC;AACA,MAAM2d,aAAa,GAAG9O,sBAAW,CAAChU,mBAAD,CAAjC;AACA,MAAMgzB,WAAW,GAAGhf,sBAAW,CAAC1U,qBAAD,CAA/B;AAEA,MAAMmW,IAAI,GAAGC,iBAAO,EAApB;AACA,MAAMud,eAAe,GAAGxd,IAAI,CAACG,aAAL,CACpB;AACIrZ,IAAAA,EAAE,EAAE4Y,SAAS,CAACD,qBAAa,CAACge,OAAf,EAAwB,kBAAxB,CADjB;AAEIpd,IAAAA,cAAc;AAFlB,GADoB,EASpB;AAAEqd,IAAAA,SAAS,EAAE7tB,cAAc,CAACjJ;AAA5B,GAToB,CAAxB;AAWA,MAAM+2B,cAAc,GAAG3d,IAAI,CAACG,aAAL,CACnB;AACIrZ,IAAAA,EAAE,EAAE4Y,SAAS,CAACD,qBAAa,CAACge,OAAf,EAAwB,mBAAxB,CADjB;AAEIpd,IAAAA,cAAc;AAFlB,GADmB,EAQnB;AAAEqd,IAAAA,SAAS,EAAErQ;AAAb,GARmB,CAAvB;AAUA,MAAMuQ,YAAY,GAAG5d,IAAI,CAACG,aAAL,CACjB;AACIrZ,IAAAA,EAAE,EAAE4Y,SAAS,CAACD,qBAAa,CAACge,OAAf,EAAwB,iBAAxB,CADjB;AAEIpd,IAAAA,cAAc;AAFlB,GADiB,EAQjB;AAAEqd,IAAAA,SAAS,EAAEH;AAAb,GARiB,CAArB;AAWA,SACIze,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC2U;GAAxB,EACI/e,4BAAA,CAACgf,UAAD;AAAYvQ,IAAAA,SAAS,EAAErE,OAAO,CAAC6U;AAAUC,IAAAA,OAAO,EAAC;GAAjD,EACKR,eADL,EAEK,CAACG,cAAc,IAAIC,YAAnB,KACG9e,4BAAA,OAAA;AAAMyO,IAAAA,SAAS,EAAErE,OAAO,CAAC+U;GAAzB,KAAA,EAEInf,4BAAA,OAAA;AAAMyO,IAAAA,SAAS,EAAErE,OAAO,CAACgV;GAAzB,EACKP,cADL,CAFJ,EAKKA,cAAc,IAAIC,YAAlB,IAAkC,IALvC,EAMI9e,4BAAA,OAAA;AAAMyO,IAAAA,SAAS,EAAErE,OAAO,CAACiV;GAAzB,EAA2CP,YAA3C,CANJ,KAAA,CAHR,CADJ,CADJ;AAiBH,CAzDsD,CAAhD;AA2DP,IAAM3U,WAAS,gBAAGX,sBAAsB,CAAC,UAAAI,KAAK;AAAA,SAAK;AAC/CmV,IAAAA,aAAa,EAAE;AACX5R,MAAAA,MAAM,EAAEvD,KAAK,CAAC7V,OAAN,CAAc3L,IADX;AAEXolB,MAAAA,OAAO,EAAE;AAFE,KADgC;AAK/CyR,IAAAA,QAAQ,EAAE;AACNlY,MAAAA,UAAU,EAAEsD,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAcgT,UAAf,CADf;AAENC,MAAAA,QAAQ,EAAEqD,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAciT,QAAf,CAFb;AAGNqU,MAAAA,UAAU,EAAEhR,SAAS,CAAC,EAAD,CAHf;AAIN8C,MAAAA,MAAM,EAAEvD,KAAK,CAAC7V,OAAN,CAAc3L;AAJhB,KALqC;AAW/C+2B,IAAAA,aAAa,EAAE;AACX/D,MAAAA,WAAW,EAAE/Q,SAAS,CAAC,CAAD,CADX;AAEXgR,MAAAA,UAAU,EAAEhR,SAAS,CAAC,CAAD,CAFV;AAGX2L,MAAAA,OAAO,EAAE;AAHE,KAXgC;AAgB/CoJ,IAAAA,iBAAiB,EAAE;AACfpQ,MAAAA,KAAK,EAAEpF,KAAK,CAACxD,MAAN,CAAaM;AADL,KAhB4B;AAmB/C2Y,IAAAA,eAAe,EAAE;AAnB8B,GAAL;AAAA,CAAN,CAAxC;;AC7EA;;;;;AAMA,AAiBO,IAAMC,aAAa,gBAAiCtf,cAAK,CAACgL,IAAN,CAAW;AAClE,MAAM9J,IAAI,GAAGC,iBAAO,EAApB;AACA,MAAMoe,uBAAuB,GAAGre,IAAI,CAACG,aAAL,CAAmB;AAC/CrZ,IAAAA,EAAE,EAAE4Y,SAAS,CAACD,qBAAa,CAACge,OAAf,EAAwB,mBAAxB,CADkC;AAE/Cpd,IAAAA,cAAc,EAAE;AAF+B,GAAnB,CAAhC;AAKA,MAAM6I,OAAO,GAAGD,WAAS,EAAzB;AACA,MAAM0N,UAAU,GAAGhW,gBAAU,CAACoB,iBAAD,CAA7B;AAEA,MAAMuc,cAAc,GAAGl7B,YAAM,EAA7B;AAEA,MAAMgO,QAAQ,GAAGsN,sBAAW,EAA5B;AACA,MAAM6f,iBAAiB,GAAGhgB,sBAAW,CAACrU,kBAAD,CAArC;;AAEA,kBAAkDzH,cAAQ,CAAC87B,iBAAD,CAA1D;AAAA,MAAOC,iBAAP;AAAA,MAA0BC,oBAA1B;;AACA,qBAAqCn8B,WAAW,CAACk8B,iBAAD,EAAoB,GAApB,CAAhD;AAAA,MAAOE,0BAAP;;AACA,mBAAwDj8B,cAAQ,CAAC,KAAD,CAAhE;AAAA,MAAOk8B,oBAAP;AAAA,MAA6BC,uBAA7B;;AAEAh8B,EAAAA,eAAS,CAAC;AACNwO,IAAAA,QAAQ,CACJQ,YAAY,CAACqK,mBAAb,CAAiC;AAC7B,UAAIqiB,cAAc,CAACj7B,OAAnB,EAA4Bi7B,cAAc,CAACj7B,OAAf,CAAuBw7B,KAAvB;AAC/B,KAFD,CADI,CAAR;AAKA,WAAO;AACHztB,MAAAA,QAAQ,CAACQ,YAAY,CAACqK,mBAAb,CAAiC,IAAjC,CAAD,CAAR;AACH,KAFD;AAGH,GATQ,EASN,CAAC7K,QAAD,CATM,CAAT;AAWAxO,EAAAA,eAAS,CAAC;AACNg8B,IAAAA,uBAAuB,CAAC,KAAD,CAAvB;AACAxtB,IAAAA,QAAQ,CAACQ,YAAY,CAACsK,eAAb,CAA6BwiB,0BAA7B,CAAD,CAAR;AACH,GAHQ,EAGN,CAACA,0BAAD,EAA6BttB,QAA7B,CAHM,CAAT;AAKA,MAAM0tB,YAAY,GAAGxgB,iBAAW,CAAC,UAAC8M,KAAD;AAC7BwT,IAAAA,uBAAuB,CAAC,IAAD,CAAvB;AACAH,IAAAA,oBAAoB,CAACrT,KAAK,CAACoR,aAAN,CAAoBj6B,KAArB,CAApB;AACH,GAH+B,EAG7B,EAH6B,CAAhC;AAIA,MAAMw8B,WAAW,GAAGzgB,iBAAW,CAC3B,UAAC8M,KAAD;AACI;AACA;AACA;AACA;AACA,QAAIA,KAAK,CAAC5L,GAAN,KAAc,QAAlB,EAA4B;AACxBif,MAAAA,oBAAoB,CAAC,EAAD,CAApB;AACArtB,MAAAA,QAAQ,CAACQ,YAAY,CAACsK,eAAb,CAA6B,EAA7B,CAAD,CAAR;AACA,UAAIoiB,cAAc,CAACj7B,OAAnB,EAA4Bi7B,cAAc,CAACj7B,OAAf,CAAuB27B,IAAvB;AAC/B;AACJ,GAX0B,EAY3B,CAAC5tB,QAAD,CAZ2B,CAA/B;AAeA,SACI0N,4BAAA,CAACmgB,SAAD;AACI1R,IAAAA,SAAS,EAAErE,OAAO,CAACgW;AACnBh4B,IAAAA,IAAI,EAAC;AACL82B,IAAAA,OAAO,EAAC;AACRz7B,IAAAA,KAAK,EAAEi8B;AACPhG,IAAAA,WAAW,EAAE6F;AACbc,IAAAA,QAAQ,EAAEL;AACVM,IAAAA,QAAQ,EAAEd;AACVe,IAAAA,UAAU,EAAE;AACRC,MAAAA,OAAO,EAAEP,WADD;AAERQ,MAAAA,cAAc,EACVzgB,4BAAA,CAAC0gB,cAAD;AAAgBjS,QAAAA,SAAS,EAAErE,OAAO,CAACuW;AAAY9T,QAAAA,QAAQ,EAAC;OAAxD,EACI7M,4BAAA,CAAC6X,UAAD;AACIte,QAAAA,IAAI,EAAEsmB,oBAAoB,GAAGrpB,sBAAc,CAACuP,OAAlB,GAA4BvP,sBAAc,CAACnG;AACrEuwB,QAAAA,IAAI,EAAEf;OAFV,CADJ,CAHI;AAURpR,MAAAA,SAAS,EAAErE,OAAO,CAACyW;AAVX;AAYZC,IAAAA,UAAU,EAAE;AAAErS,MAAAA,SAAS,EAAErE,OAAO,CAAC2W;AAArB;GApBhB,CADJ;AAwBH,CA9E0D,CAApD;AAgFP,IAAM5W,WAAS,gBAAGX,sBAAsB,CAAC,UAAAI,KAAK;AAAA,SAAK;AAC/CwW,IAAAA,oBAAoB,EAAE;AAClBjT,MAAAA,MAAM,EAAEvD,KAAK,CAAC7V,OAAN,CAAc3L,IADJ;AAElB8kB,MAAAA,KAAK,EAAE;AAFW,KADyB;AAK/CyT,IAAAA,UAAU,EAAE;AACR3Z,MAAAA,QAAQ,EAAE,OADF;AAERgP,MAAAA,OAAO,EAAE;AAFD,KALmC;AAS/C6K,IAAAA,gBAAgB,EAAE;AACd9Z,MAAAA,UAAU,EAAEsD,SAAS,CAAC,CAAD,CADP;AAEdxC,MAAAA,OAAO,EAAEwC,SAAS,CAAC,CAAD,CAFJ;AAGd2W,MAAAA,MAAM,EAAE3W,SAAS,CAAC,CAAD,CAHH;AAIdrD,MAAAA,QAAQ,EAAEqD,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAciT,QAAf,CAJL;AAKdc,MAAAA,YAAY,EAAE8B,KAAK,CAAC7V,OAAN,CAAckT,YALd;AAMdkG,MAAAA,MAAM,EAAEvD,KAAK,CAAC7V,OAAN,CAAc3L,IAAd,GAAqB,CANf;AAOd64B,MAAAA,WAAW,EAAE5W,SAAS,CAAC,CAAD,CAPR;AAQdiR,MAAAA,SAAS,EAAE;AARG,KAT6B;AAmB/CyF,IAAAA,qBAAqB,EAAE;AACnBha,MAAAA,UAAU,EAAEsD,SAAS,CAAIT,KAAK,CAAC7V,OAAN,CAAc3L,IAAd,GAAqB,CAAzB,QADF;AAEnB4e,MAAAA,QAAQ,EAAEqD,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAciT,QAAf,CAFA;AAGnBmG,MAAAA,MAAM,EAAE9C,SAAS,CAACT,KAAK,CAAC7V,OAAN,CAAc3L,IAAd,GAAqB,CAAtB,CAHE;AAInByf,MAAAA,OAAO,EAAEwC,SAAS,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAJC;AAKnB2W,MAAAA,MAAM,EAAE3W,SAAS,CAAC,CAAD,CALE;AAMnB,4BAAsB;AANH;AAnBwB,GAAL;AAAA,CAAN,CAAxC;;IC3Fa6W,WAAW,gBAA+BlhB,cAAK,CAACgL,IAAN,CAAW;AAC9D,MAAMZ,OAAO,GAAGD,WAAS,EAAzB;AACA,MAAMvgB,YAAY,GAAG6V,sBAAW,CAAC9V,kBAAD,CAAhC;AAEA,MAAMw3B,qBAAqB,GAAG/f,aAAO,CAAC;AAClC,QAAMib,UAAU,GAAmB,EAAnC;;AACA,SAAK,IAAIx0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+B,YAAY,CAAC9B,MAAjC,EAAyC,EAAED,CAA3C,EAA8C;AAC1C,UAAME,IAAI,GAAG6B,YAAY,CAAC/B,CAAD,CAAzB;AAEA,UAAM6Y,GAAG,sBAAmB,OAAO3Y,IAAP,KAAgB,QAAhB,GAA2BA,IAA3B,GAAkCA,IAAI,CAACE,IAA1D,CAAT;AACA,UAAMq0B,SAAS,GACX,OAAOv0B,IAAP,KAAgB,QAAhB,GACIiY,4BAAA,CAACub,kBAAD;AAAoB7a,QAAAA,GAAG,EAAEA;AAAKhX,QAAAA,YAAY,EAAE3B;OAA5C,CADJ,GAGIiY,4BAAA,CAACud,eAAD;AACI7c,QAAAA,GAAG,EAAEA;AACLzY,QAAAA,IAAI,EAAEF,IAAI,CAACE;AACXuB,QAAAA,aAAa,EAAEzB,IAAI,CAACyB;OAHxB,CAJR;AAUA6yB,MAAAA,UAAU,CAAC90B,IAAX,CAAgB+0B,SAAhB;AACH;;AACD,WAAOD,UAAP;AACH,GAnBoC,EAmBlC,CAACzyB,YAAD,CAnBkC,CAArC;AAqBA,SACIoW,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAACgX;GAAxB,EACIphB,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAACiX;GAAxB,EACIrhB,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAACkX;GAAxB,EACIthB,4BAAA,CAACsf,aAAD,MAAA,CADJ,EAEItf,4BAAA,CAACwe,WAAD,MAAA,CAFJ,CADJ,EAKIxe,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAACmX;GAAxB,EAAuCJ,qBAAvC,CALJ,CADJ,CADJ;AAWH,CApCsD,CAAhD;AAsCP,IAAMhX,WAAS,gBAAGX,sBAAsB,CAAC,UAAAI,KAAK;AAAA,SAAK;AAC/CwX,IAAAA,cAAc,EAAE,EAD+B;AAE/CC,IAAAA,gBAAgB,EAAE;AACdG,MAAAA,QAAQ,EAAE,cADI;AAEdhU,MAAAA,OAAO,EAAE;AAFK,KAF6B;AAM/C8T,IAAAA,WAAW,EAAE;AACTpG,MAAAA,aAAa,EAAEtR,KAAK,CAAC/C,OAAN,CAAcC,gBADpB;AAET0a,MAAAA,QAAQ,EAAE,QAFD;AAGT3E,MAAAA,QAAQ,EAAE,KAHD;AAITrP,MAAAA,OAAO,EAAE;AAJA,KANkC;AAY/CiU,IAAAA,iBAAiB,EAAE;AACf5E,MAAAA,QAAQ,EAAE;AADK,KAZ4B;AAe/C0E,IAAAA,YAAY,EAAE;AACVrG,MAAAA,aAAa,EAAEtR,KAAK,CAAC/C,OAAN,CAAcC,gBADnB;AAEV0a,MAAAA,QAAQ,EAAE,QAFA;AAGVhU,MAAAA,OAAO,EAAE;AAHC;AAfiC,GAAL;AAAA,CAAN,CAAxC;;AClDA;;;;;AAMA,AAaO,IAAMkU,aAAa,GAAiC,SAA9CA,aAA8C,CAAAxW,KAAK;AAC5D,MAAQgC,KAAR,GAA0BhC,KAA1B,CAAQgC,KAAR;AAAA,MAAeC,MAAf,GAA0BjC,KAA1B,CAAeiC,MAAf;AACA,MAAM/C,OAAO,GAAGD,WAAS,EAAzB;AACA,MAAM0N,UAAU,GAAGhW,gBAAU,CAACoB,iBAAD,CAA7B;AACA,MAAMuL,KAAK,GAAkB;AACzBtB,IAAAA,KAAK,EAALA,KADyB;AAEzBC,IAAAA,MAAM,EAANA;AAFyB,GAA7B;AAKA,MAAMjM,IAAI,GAAGC,iBAAO,EAApB;AACA,MAAMwgB,WAAW,GAAGzgB,IAAI,CAACG,aAAL,CAAmB;AACnCrZ,IAAAA,EAAE,EAAE4Y,SAAS,CAACD,qBAAa,CAACihB,QAAf,EAAyB,eAAzB,CADsB;AAEnCrgB,IAAAA,cAAc,EAAE;AAFmB,GAAnB,CAApB;AAKA,SACIvB,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAACyX;AAAerT,IAAAA,KAAK,EAAEA;GAA9C,EACIxO,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC0X;GAAxB,EACI9hB,4BAAA,CAAC6X,UAAD;AAAYte,IAAAA,IAAI,EAAE/C,sBAAc,CAACurB;GAAjC,CADJ,SAAA,EAEYJ,WAFZ,CADJ,CADJ;AAQH,CAvBM;AAyBP,IAAMxX,WAAS,gBAAGX,sBAAsB,CAAC,UAAAI,KAAK;AAAA,SAAK;AAC/CiY,IAAAA,aAAa,EAAE;AACX7S,MAAAA,KAAK,EAAEpF,KAAK,CAACgF,OAAN,CAAc9K,IAAd,CAAmBqO,QADf;AAEXtF,MAAAA,QAAQ,EAAE,UAFC;AAGXyD,MAAAA,SAAS,EAAE,QAHA;AAIXtJ,MAAAA,QAAQ,EAAE;AAJC,KADgC;AAO/C8a,IAAAA,oBAAoB,EAAE;AAClBnU,MAAAA,SAAS,EAAE,mCADO;AAElBd,MAAAA,QAAQ,EAAE,UAFQ;AAGlBG,MAAAA,IAAI,EAAE,KAHY;AAIlBC,MAAAA,GAAG,EAAE;AAJa;AAPyB,GAAL;AAAA,CAAN,CAAxC;;AC5CA;;;;;AAMA,AAYO,IAAM+U,eAAe,GAAG,SAAlBA,eAAkB,CAC3BjJ,aAD2B,EAE3BC,aAF2B;AAI3B,MAAM7rB,gBAAgB,GAAGsS,sBAAW,CAACvS,sBAAD,CAApC;AAEA,MAAM+0B,OAAO,GAAG39B,YAAM,CAAC;AACnB49B,IAAAA,UAAU,EAAE,CADO;AAEnBC,IAAAA,YAAY,EAAE;AAFK,GAAD,CAAtB;AAKA,SAAO3iB,iBAAW,CACd,UAAC8M,KAAD;AACI,QAAM8V,eAAe,GAAoB;AACrC7V,MAAAA,MAAM,EAAED,KAAK,CAACC,MADuB;AAErCjU,MAAAA,OAAO,EAAEgU,KAAK,CAAChU,OAAN,IAAiBgU,KAAK,CAAC+V,OAFK;AAGrC1pB,MAAAA,QAAQ,EAAE2T,KAAK,CAAC3T;AAHqB,KAAzC;AAOAspB,IAAAA,OAAO,CAAC19B,OAAR,CAAgB29B,UAAhB;;AACA,QAAID,OAAO,CAAC19B,OAAR,CAAgB29B,UAAhB,KAA+B,CAAnC,EAAsC;AAClC,UAAInJ,aAAJ,EAAmB;AACfzM,QAAAA,KAAK,CAACE,cAAN;AACAuM,QAAAA,aAAa,CAACqJ,eAAD,CAAb;AACH;;AACDH,MAAAA,OAAO,CAAC19B,OAAR,CAAgB29B,UAAhB,GAA6B,CAA7B,CALkC;;AAOlCD,MAAAA,OAAO,CAAC19B,OAAR,CAAgB49B,YAAhB,GAA+Bn+B,UAAU,CACrC;AAAA,eAAOi+B,OAAO,CAAC19B,OAAR,CAAgB29B,UAAhB,GAA6B,CAApC;AAAA,OADqC,EAErC/0B,gBAFqC,CAAzC;AAIH,KAXD,MAWO,IAAI80B,OAAO,CAAC19B,OAAR,CAAgB29B,UAAhB,KAA+B,CAAnC,EAAsC;AACzC,UAAIlJ,aAAJ,EAAmB;AACf1M,QAAAA,KAAK,CAACE,cAAN;AACAwM,QAAAA,aAAa,CAACoJ,eAAD,CAAb;AACH;;AACD,UAAI,OAAOH,OAAO,CAAC19B,OAAR,CAAgB49B,YAAvB,KAAwC,QAA5C,EAAsD;AAClDl+B,QAAAA,YAAY,CAACg+B,OAAO,CAAC19B,OAAR,CAAgB49B,YAAjB,CAAZ;AACAF,QAAAA,OAAO,CAAC19B,OAAR,CAAgB49B,YAAhB,GAA+B,IAA/B;AACAF,QAAAA,OAAO,CAAC19B,OAAR,CAAgB29B,UAAhB,GAA6B,CAA7B;AACH;AACJ;AACJ,GAhCa,EAiCd,CAAC/0B,gBAAD,EAAmB4rB,aAAnB,EAAkCC,aAAlC,EAAiDiJ,OAAjD,CAjCc,CAAlB;AAmCH,CA9CM;AAgDP,AAAO,IAAMK,iBAAiB,GAAG,SAApBA,iBAAoB,CAACxJ,eAAD;AAC7B,SAAOtZ,iBAAW,CACd,UAAC8M,KAAD;AACI,QAAI,CAACwM,eAAL,EAAsB;AAEtB,QAAMyJ,kBAAkB,GAAuB;AAC3CzpB,MAAAA,QAAQ,EAAEwT,KAAK,CAACkW,WAAN,CAAkBte,IAAlB,KAA2B,OADM;AAE3CnL,MAAAA,QAAQ,EAAEuT,KAAK,CAACkW,WAAN,CAAkBte,IAAlB,KAA2B,OAFM;AAG3CqI,MAAAA,MAAM,EAAED,KAAK,CAACC,MAH6B;AAI3CjU,MAAAA,OAAO,EAAEgU,KAAK,CAAChU,OAJ4B;AAK3CK,MAAAA,QAAQ,EAAE2T,KAAK,CAAC3T;AAL2B,KAA/C;;AAQA,QAAI4pB,kBAAkB,CAACxpB,QAAnB,IAA+BwpB,kBAAkB,CAACzpB,QAAtD,EAAgE;AAC5DwT,MAAAA,KAAK,CAACE,cAAN;AACAF,MAAAA,KAAK,CAACmW,eAAN;AACA3J,MAAAA,eAAe,CAACyJ,kBAAD,CAAf;AACH;AACJ,GAjBa,EAkBd,CAACzJ,eAAD,CAlBc,CAAlB;AAoBH,CArBM;;AC7BA,IAAM4J,gBAAgB,GAAoC,SAApDA,gBAAoD,CAAAxX,KAAK;AAClE,MACIsE,QADJ,GAQItE,KARJ,CACIsE,QADJ;AAAA,MAEgBmT,UAFhB,GAQIzX,KARJ,CAEI0X,UAFJ;AAAA,MAGIC,gBAHJ,GAQI3X,KARJ,CAGI2X,gBAHJ;AAAA,MAII9J,aAJJ,GAQI7N,KARJ,CAII6N,aAJJ;AAAA,MAKIC,aALJ,GAQI9N,KARJ,CAKI8N,aALJ;AAAA,MAMIF,eANJ,GAQI5N,KARJ,CAMI4N,eANJ;AAAA,MAOIgK,UAPJ,GAQI5X,KARJ,CAOI4X,UAPJ;AAUA,MAAMxF,WAAW,GAAG0E,eAAe,CAACjJ,aAAD,EAAgBC,aAAhB,CAAnC;AACA,MAAM+J,aAAa,GAAGT,iBAAiB,CAACxJ,eAAD,CAAvC;AAEA,MAAMkK,SAAS,GAA4B;AACvCC,IAAAA,OAAO,EAAEzjB,iBAAW,CAAC;AAAA,aAAMsjB,UAAU,IAAIA,UAAU,CAAC,IAAD,CAA9B;AAAA,KAAD,EAAuC,CAACA,UAAD,CAAvC,CADmB;AAEvCI,IAAAA,MAAM,EAAE1jB,iBAAW,CAAC;AAAA,aAAMsjB,UAAU,IAAIA,UAAU,CAAC,KAAD,CAA9B;AAAA,KAAD,EAAwC,CAACA,UAAD,CAAxC;AAFoB,GAA3C;;AAKA,MAAI/J,aAAa,IAAIC,aAAjB,IAAkCF,eAAtC,EAAuD;AACnDkK,IAAAA,SAAS,CAAC5Q,OAAV,GAAoBkL,WAApB;AACA0F,IAAAA,SAAS,CAACG,SAAV,GAAsBJ,aAAtB;AACAC,IAAAA,SAAS,CAACI,QAAV,GAAqB,CAArB;AACH;;AAED,MAAMC,WAAW,gBAAQL,SAAR,EAAsBH,gBAAtB,CAAjB;;AACA,SAAO7iB,4BAAA,CAAC2iB,UAAD,oBAAgBU,YAAhB,EAA8B7T,QAA9B,CAAP;AACH,CA3BM;;ACrCP;;;;;AAMA,AAYO,IAAM8T,aAAa,gBAAiCtjB,cAAK,CAACgL,IAAN,CAAW;MAAG3lB,YAAAA;MAAMopB,iBAAAA;AAC3E,MAAMqJ,sBAAsB,GAAGL,yBAAyB,CAACpyB,IAAD,CAAxD;AACA,MAAMk+B,iBAAiB,GAAGpL,oBAAoB,CAAC9yB,IAAD,CAA9C;AAEA,MAAM+kB,OAAO,GAAGD,WAAS,EAAzB;AACA,SACInK,4BAAA,OAAA;AAAMyO,IAAAA,SAAS,EAAEA;AAAW1O,IAAAA,KAAK,EAAE1a,IAAI,GAAGA,IAAI,CAAC4C,IAAR,GAAe1B;GAAtD,EACKuxB,sBAAsB,CAAChwB,MAAvB,GAAgC,CAAhC,IACGkY,4BAAA,OAAA;AAAMyO,IAAAA,SAAS,EAAErE,OAAO,CAACsN;GAAzB,EAAyCI,sBAAzC,CAFR,EAIKyL,iBAJL,CADJ;AAQH,CAb0D,CAApD;AAcPD,aAAa,CAACnY,WAAd,GAA4B,eAA5B;AAEA,IAAMhB,WAAS,gBAAGd,qBAAqB,CAAC,UAAAO,KAAK;AAAA,SAAK;AAC9C8N,IAAAA,aAAa,EAAE;AACX1I,MAAAA,KAAK,EAAEpF,KAAK,CAACgF,OAAN,CAAc9K,IAAd,CAAmB0f,IADf;AAEX3W,MAAAA,QAAQ,EAAE,UAFC;AAGX7F,MAAAA,QAAQ,EAAE,SAHC;AAIXyc,MAAAA,YAAY,EAAE;AAJH;AAD+B,GAAL;AAAA,CAAN,CAAvC;;ACvBO,IAAMC,YAAY,gBAA6B1jB,cAAK,CAACgL,IAAN;AAElD;MAAG3lB,YAAAA;MAAMwxB,gBAAAA;MAAUC,eAAAA;AACf,MAAM6M,UAAU,GAAmB/M,iBAAiB,CAACvxB,IAAD,EAAOwxB,QAAP,EAAiBC,OAAjB,CAApD;;AAEA,8BAA8CnV,4BAA4B,CACtEtc,IADsE,CAA1E;AAAA,MAAQ0c,iBAAR,yBAAQA,iBAAR;AAAA,MAA2BE,cAA3B,yBAA2BA,cAA3B;;AAIA,MAAMmI,OAAO,GAAGD,WAAS,CAACwZ,UAAD,CAAzB;AACA,MAAM9L,UAAU,GAAGhW,gBAAU,CAACoB,iBAAD,CAA7B;AACA,MAAM2gB,kBAAkB,GAAGnN,qBAAqB,CAACpxB,IAAD,CAAhD;AACA,SACI2a,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC1B;KAAmBkb,mBAA3C,EACI5jB,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAACyZ;GAAxB,EACI7jB,4BAAA,CAAC6X,UAAD;AACIte,IAAAA,IAAI,EAAEoqB,UAAU,CAACpqB;AACjBqnB,IAAAA,IAAI,EAAE+C,UAAU,CAACxM;AACjBuD,IAAAA,UAAU,EAAE;GAHhB,CADJ,CADJ,EAQI1a,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC0Z;GAAxB,EACI9jB,4BAAA,MAAA;AACIyO,IAAAA,SAAS,EAAErE,OAAO,CAAC2Z;AACnBhkB,IAAAA,KAAK,EAAE1a,IAAI,GAAGA,IAAI,CAAC4C,IAAR,GAAe1B;GAF9B,EAIIyZ,4BAAA,CAACsjB,aAAD;AAAej+B,IAAAA,IAAI,EAAEA;GAArB,CAJJ,CADJ,EAOI2a,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC4Z;GAAxB,EACIhkB,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC6Z;GAAxB,EACK5+B,IAAI,GACD0c,iBADC,WACDA,iBADC,GACoB/B,4BAAA,OAAA,MAAA,UAAA,CADpB,GAGDA,4BAAA,CAACuV,eAAD;AAAiBC,IAAAA,SAAS,EAAE;AAAGC,IAAAA,SAAS,EAAE;GAA1C,CAJR,CADJ,EAQIzV,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC6Z;GAAxB,EACK5+B,IAAI,GACD4c,cADC,WACDA,cADC,GACiBjC,4BAAA,OAAA,MAAA,UAAA,CADjB,GAGDA,4BAAA,CAACuV,eAAD;AAAiBC,IAAAA,SAAS,EAAE;AAAIC,IAAAA,SAAS,EAAE;GAA3C,CAJR,CARJ,CAPJ,CARJ,EAgCIzV,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAC;GAAf,CAhCJ,EAiCIzO,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAC;GAAf,CAjCJ,CADJ;AAqCH,CAjDiD,CAA/C;AAoDP,IAAMtE,WAAS,gBAAGd,qBAAqB,CAAC,UAAAO,KAAK;AAAA,SAAK;AAC9ClB,IAAAA,aAAa,EAAE;AACX1B,MAAAA,QAAQ,EAAE4C,KAAK,CAAClB,aAAN,CAAoB1B,QADnB;AAEXkd,MAAAA,UAAU,EAAE,QAFD;AAGXrX,MAAAA,QAAQ,EAAE,UAHC;AAIXW,MAAAA,OAAO,EAAE,MAJE;AAKXL,MAAAA,MAAM,EAAE;AALG,KAD+B;AAQ9C0W,IAAAA,iBAAiB,EAAE;AACf/U,MAAAA,eAAe,EAAE,yBAAC7lB,KAAD;AAAA,eAA2BA,KAAK,CAAC+lB,KAAjC;AAAA,OADF;AAEfL,MAAAA,SAAS,EAAE,4CAFI;AAGf7G,MAAAA,YAAY,EAAE8B,KAAK,CAAClB,aAAN,CAAoBG,gBAHnB;AAIf7B,MAAAA,QAAQ,EAAE4C,KAAK,CAAClB,aAAN,CAAoBE,YAJf;AAKfoG,MAAAA,KAAK,EAAE,MALQ;AAMfnH,MAAAA,OAAO,EAAE;AANM,KAR2B;AAgB9Cic,IAAAA,wBAAwB,EAAE;AACtB1T,MAAAA,aAAa,EAAE,QADO;AAEtB5C,MAAAA,OAAO,EAAE,MAFa;AAGtBqP,MAAAA,QAAQ,EAAE;AAHY,KAhBoB;AAqB9CkH,IAAAA,iBAAiB,EAAE;AACflc,MAAAA,OAAO,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV;AADM,KArB2B;AAwB9Cmc,IAAAA,uBAAuB,EAAE;AACrBhd,MAAAA,QAAQ,EAAE4C,KAAK,CAAClB,aAAN,CAAoBC,gBADT;AAErByH,MAAAA,aAAa,EAAE,KAFM;AAGrB5C,MAAAA,OAAO,EAAE;AAHY,KAxBqB;AA6B9CyW,IAAAA,qBAAqB,EAAE;AACnBpc,MAAAA,OAAO,EAAE,CAAC,CAAD,EAAI,CAAJ,CADU;AAEnBmO,MAAAA,OAAO,EAAE;AAFU;AA7BuB,GAAL;AAAA,CAAN,CAAvC;;ACjDO,IAAMmO,YAAY,gBAAGnkB,cAAK,CAACgL,IAAN,CAAW;MAAG3lB,YAAAA;MAAMmqB,gBAAAA;;AAC5C,yBAAiCqF,eAAe,CAACxvB,IAAD,CAAhD;AAAA,MAAQovB,IAAR,oBAAQA,IAAR;AAAA,MAAcnB,IAAd,oBAAcA,IAAd;AAAA,MAAoBwB,QAApB,oBAAoBA,QAApB;;AAEAC,EAAAA,eAAe,CAAC1vB,IAAD,EAAOyvB,QAAP,CAAf;AACA,MAAM1K,OAAO,GAAGD,WAAS,EAAzB;AACA,SACInK,4BAAA,MAAA;AAAKvb,IAAAA,GAAG,EAAEgwB;AAAMhG,IAAAA,SAAS,EAAErE,OAAO,CAACga;GAAnC,EACIpkB,4BAAA,MAAA;AACIvb,IAAAA,GAAG,EAAEU,UAAU,CAACY,WAAX,CAAuBV,IAAvB,IAA+BiuB,IAA/B,GAAsC;AAC3C7E,IAAAA,SAAS,EAAErE,OAAO,CAACga;GAFvB,EAIK5U,QAAQ,CAACsF,QAAD,CAJb,CADJ,CADJ;AAUH,CAf2B,CAArB;AAiBP,AAAO,IAAM3K,WAAS,gBAAGd,qBAAqB,CAAC;AAAA,SAAO;AAClD+a,IAAAA,UAAU,EAAE;AACRjX,MAAAA,MAAM,EAAE;AADA;AADsC,GAAP;AAAA,CAAD,CAAvC;;AC/BP;;;;;AAMA,AAWO,IAAMkX,aAAa,gBAAiCrkB,cAAK,CAACgL,IAAN,CAAW,UAAAE,KAAK;AACvE,MAAQuD,SAAR,GAAoCvD,KAApC,CAAQuD,SAAR;AAAA,MAAmBuI,YAAnB,GAAoC9L,KAApC,CAAmB8L,YAAnB;AAEA,MAAMsN,cAAc,GAAwBtN,YAAY,GAAG;AAAEuN,IAAAA,eAAe,YAAUvN,YAAV;AAAjB,GAAH,GAAmD,EAA3G;AAEA,MAAM5M,OAAO,GAAGD,WAAS,EAAzB;AACA,SAAOnK,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEnE,UAAC,CAAC,CAACmE,SAAD,EAAYrE,OAAO,CAACoa,aAApB,CAAD;AAAsChW,IAAAA,KAAK,EAAE8V;GAA9D,CAAP;AACH,CAP0D,CAApD;AAQPD,aAAa,CAAClZ,WAAd,GAA4B,eAA5B;AAEA,IAAMhB,WAAS,gBAAGX,sBAAsB,CAAC;AAAA,SAAO;AAC5Cgb,IAAAA,aAAa,EAAE;AACXC,MAAAA,gBAAgB,EAAE,WADP;AAEXC,MAAAA,kBAAkB,EAAE,QAFT;AAGXC,MAAAA,cAAc,EAAE;AAHL;AAD6B,GAAP;AAAA,CAAD,CAAxC;;AC3BA;;;;;AAMA,AAYO,IAAMC,qBAAqB,gBAAgC5kB,cAAK,CAACgL,IAAN,CAAW,UAAAE,KAAK;;;AAC9E,MAAmBoP,iBAAnB,GAAmDpP,KAAnD,CAAQuD,SAAR;AAAA,MAAsCqG,QAAtC,GAAmD5J,KAAnD,CAAsC4J,QAAtC;AACA,MAAMuC,WAAW,GAAGD,UAAU,CAACtC,QAAD,CAA9B;AACA,MAAM1K,OAAO,GAAGD,WAAS,CAAC2K,QAAD,CAAzB;AACA,MAAM+C,UAAU,GAAGhW,gBAAU,CAACoB,iBAAD,CAA7B;AACA,MAAI,CAACoU,WAAL,EAAkB,OAAO,IAAP;AAClB,MAAM5I,SAAS,GAAGnE,CAAC,cACdF,OAAO,CAAC6R,YADM,IACS,IADT,KAEd3B,iBAFc,IAEM,IAFN,MAAnB;AAIA,SACIta,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEA;GAAhB,EACIzO,4BAAA,CAAC6X,UAAD;AAAYte,IAAAA,IAAI,EAAE8d;GAAlB,CADJ,CADJ;AAKH,CAfiE,CAA3D;AAiBP,IAAMlN,WAAS,gBAAGd,qBAAqB,CAAC,UAAAO,KAAK;AAAA,SAAK;AAC9CqS,IAAAA,YAAY,EAAE;AACVjN,MAAAA,KAAK,EAAE,eAAC8F,QAAD;AAAA,eACHA,QAAQ,CAACJ,SAAT,GACMI,QAAQ,CAACF,UAAT,GACIhL,KAAK,CAAC1C,GAAN,CAAUC,YADd,GAEIyC,KAAK,CAAC1C,GAAN,CAAUE,eAHpB,GAIM,MALH;AAAA,OADG;AAOViJ,MAAAA,SAAS,EAAE,YAPD;AAQVxD,MAAAA,QAAQ,EAAE,UARA;AASV7F,MAAAA,QAAQ,EAAE,OATA;AAUVgP,MAAAA,OAAO,EAAE,GAVC;AAWVnO,MAAAA,OAAO,EAAE,CAXC;AAYV,kBAAY;AACRgd,QAAAA,YAAY,EAAE,wBADN;AAERC,QAAAA,UAAU,EAAE,iBAFJ;AAGRjY,QAAAA,QAAQ,EAAE,UAHF;AAIRkY,QAAAA,OAAO,EAAE,IAJD;AAKRhY,QAAAA,MAAM,EAAE,CAAC,CALD;AAMRC,QAAAA,IAAI,EAAE,CANE;AAORC,QAAAA,GAAG,EAAE;AAPG;AAZF;AADgC,GAAL;AAAA,CAAN,CAAvC;;ACnCA;;;;;AAMA,AA0BO,IAAM+X,sBAAsB,gBAAoChlB,cAAK,CAACgL,IAAN,CAAW,UAAAE,KAAK;;;AACnF,MAAmBoP,iBAAnB,GAA+DpP,KAA/D,CAAQuD,SAAR;AAAA,MAAsCkV,UAAtC,GAA+DzY,KAA/D,CAAsCyY,UAAtC;AAAA,MAAkD7O,QAAlD,GAA+D5J,KAA/D,CAAkD4J,QAAlD;AAEA,MAAMmQ,aAAa,GAAGC,eAAe,CAACvB,UAAD,CAArC;AACA,MAAMwB,WAAW,GAAGC,aAAa,CAACzB,UAAD,CAAjC;AACA,MAAM0B,aAAa,GAAGC,oBAAoB,CAAC3B,UAAD,CAA1C;AACA,MAAMlV,SAAS,GAAGnE,CAAC,cACd2a,aAAa,CAACM,WADA,IACc,IADd,KAEdjL,iBAAiB,IAAI,EAFP,IAEY,CAAC,CAACA,iBAFd,MAAnB;AAIA,SACIta,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEA;GAAhB,EACIzO,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEwW,aAAa,CAACO;GAA9B,EACIxlB,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEwW,aAAa,CAACQ;GAA9B,CADJ,EAEIzlB,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEwW,aAAa,CAACS;GAA9B,EACI1lB,4BAAA,CAAC4kB,qBAAD;AAAuBnW,IAAAA,SAAS,EAAE0W,WAAW,CAAClJ;AAAcnH,IAAAA,QAAQ,EAAEA;GAAtE,CADJ,EAEI9U,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEnE,CAAC,CAAC,CAAC6a,WAAW,CAACQ,QAAb,EAAuBV,aAAa,CAACU,QAArC,CAAD;GAAjB,EAAoEhC,UAAU,CAAC58B,aAA/E,CAFJ,EAGIiZ,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAE4W,aAAa,CAACO;GAA9B,CAHJ,EAII5lB,4BAAA,CAACqkB,aAAD;AAAe5V,IAAAA,SAAS,EAAE0W,WAAW,CAACU;AAAW7O,IAAAA,YAAY,EAAE2M,UAAU,CAAC3M;GAA1E,CAJJ,CAFJ,CADJ,CADJ;AAaH,CAvBsE,CAAhE;AAwBPgO,sBAAsB,CAAC7Z,WAAvB,GAAqC,wBAArC;AAEA,IAAM+Z,eAAe,gBAAG7b,qBAAqB,CAAC,UAAAO,KAAK;AAAA,SAAK;AACpD2b,IAAAA,WAAW,EAAE;AACTzd,MAAAA,YAAY,EAAE8B,KAAK,CAAC1B,aAAN,CAAoBJ,YADzB;AAET+E,MAAAA,QAAQ,EAAE,UAFD;AAGTyJ,MAAAA,QAAQ,EAAE;AAHD,KADuC;AAMpDmP,IAAAA,iBAAiB,EAAE;AACf3W,MAAAA,eAAe,EAAE,yBAAC7lB,KAAD;AAAA,eAA2BA,KAAK,CAAC+lB,KAAjC;AAAA,OADF;AAEfL,MAAAA,SAAS,EAAE,mBAAC1lB,KAAD;AACP,YAAI+lB,KAAK,GAAGpF,KAAK,CAAC1B,aAAN,CAAoBM,mBAAhC;AACA,YAAIvf,KAAK,CAAC6tB,OAAV,EAAmB9H,KAAK,GAAG,oBAAR,CAAnB,KACK,IAAI/lB,KAAK,CAAC4tB,QAAV,EAAoB7H,KAAK,GAAG,uBAAR;AACzB,0BAAgBA,KAAhB;AACH,OAPc;AAQf8W,MAAAA,mBAAmB,EAAElc,KAAK,CAAC1B,aAAN,CAAoBJ,YAR1B;AASfie,MAAAA,oBAAoB,EAAE,EATP;AAUflZ,MAAAA,QAAQ,EAAE,UAVK;AAWfmZ,MAAAA,KAAK,EAAE,KAXQ;AAYf7Y,MAAAA,MAAM,EAAE,EAZO;AAafF,MAAAA,GAAG,EAAE,CAAC,EAbS;AAcfD,MAAAA,IAAI,EAAE,CAdS;AAef,iBAAW;AACPiZ,QAAAA,gBAAgB,EAAErc,KAAK,CAACgF,OAAN,CAAcG,UAAd,CAAyBkB,KADpC;AAEPiW,QAAAA,cAAc,EAAEtc,KAAK,CAACgF,OAAN,CAAcG,UAAd,CAAyBkB,KAFlC;AAGPkW,QAAAA,iBAAiB,EAAE,aAHZ;AAIPC,QAAAA,eAAe,EAAE,aAJV;AAKPC,QAAAA,WAAW,EAAE,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,CAAZ,CALN;AAMPC,QAAAA,WAAW,EAAE,OANN;AAOPzZ,QAAAA,QAAQ,EAAE,UAPH;AAQPW,QAAAA,OAAO,EAAE,OARF;AASPuX,QAAAA,OAAO,EAAE,IATF;AAUPiB,QAAAA,KAAK,EAAE,CAVA;AAWP/Y,QAAAA,GAAG,EAAE;AAXE;AAfI,KANiC;AAmCpDuY,IAAAA,iBAAiB,EAAE;AACf1W,MAAAA,eAAe,EAAE,yBAAC7lB,KAAD;AAAA,eAA2BA,KAAK,CAAC+lB,KAAjC;AAAA,OADF;AAEfL,MAAAA,SAAS,EAAE,mBAAC1lB,KAAD;AACP,YAAI+lB,KAAK,GAAGpF,KAAK,CAAC1B,aAAN,CAAoBM,mBAAhC;AACA,YAAIvf,KAAK,CAAC6tB,OAAV,EAAmB9H,KAAK,GAAG,oBAAR,CAAnB,KACK,IAAI/lB,KAAK,CAAC4tB,QAAV,EAAoB7H,KAAK,GAAG,uBAAR;AACzB,0BAAgBA,KAAhB;AACH,OAPc;AAQf+W,MAAAA,oBAAoB,EAAEnc,KAAK,CAAC1B,aAAN,CAAoBJ,YAR3B;AASf+E,MAAAA,QAAQ,EAAE,UATK;AAUf0Z,MAAAA,MAAM,EAAE,CAVO;AAWfP,MAAAA,KAAK,EAAE,CAXQ;AAYfhZ,MAAAA,IAAI,EAAE,CAZS;AAafC,MAAAA,GAAG,EAAE;AAbU,KAnCiC;AAkDpDyY,IAAAA,eAAe,EAAE;AACb/W,MAAAA,SAAS,EAAE,mBAAC1lB,KAAD;AACP,YAAMu9B,OAAO,GAAa,EAA1B;AACA,YAAIv9B,KAAK,CAAC6tB,OAAV,EAAmB0P,OAAO,CAACj/B,IAAR,CAAa,kCAAb;AACnB,YAAI0B,KAAK,CAAC4tB,QAAV,EAAoB2P,OAAO,CAACj/B,IAAR,CAAa,wCAAb;AACpBi/B,QAAAA,OAAO,CAACj/B,IAAR,YAAsBqiB,KAAK,CAAC1B,aAAN,CAAoBO,oBAA1C;AACA,eAAO+d,OAAO,CAACthC,IAAR,CAAa,IAAb,CAAP;AACH,OAPY;AAQb4pB,MAAAA,eAAe,EAAE,yBAAC7lB,KAAD;AAAA,eAA2BA,KAAK,CAAC+lB,KAAjC;AAAA,OARJ;AASblH,MAAAA,YAAY,EAAE8B,KAAK,CAAC1B,aAAN,CAAoBJ,YATrB;AAUb+E,MAAAA,QAAQ,EAAE,UAVG;AAWbyJ,MAAAA,QAAQ,EAAE,QAXG;AAYbiQ,MAAAA,MAAM,EAAE,CAZK;AAabP,MAAAA,KAAK,EAAE,CAbM;AAcbhZ,MAAAA,IAAI,EAAE,CAdO;AAebC,MAAAA,GAAG,EAAE;AAfQ,KAlDmC;AAmEpD0Y,IAAAA,QAAQ,EAAE;AACN3e,MAAAA,QAAQ,EAAEqD,SAAS,CAACT,KAAK,CAAC1B,aAAN,CAAoBC,iBAArB;AADb;AAnE0C,GAAL;AAAA,CAAN,CAA7C;AAwEA,AAAO,IAAMse,oBAAoB,gBAAoCzmB,cAAK,CAACgL,IAAN,CAAW,UAAAE,KAAK;;;AACjF,MAAmBoP,iBAAnB,GAA+DpP,KAA/D,CAAQuD,SAAR;AAAA,MAAsCkV,UAAtC,GAA+DzY,KAA/D,CAAsCyY,UAAtC;AAAA,MAAkD7O,QAAlD,GAA+D5J,KAA/D,CAAkD4J,QAAlD;AAEA,MAAMqQ,WAAW,GAAGC,aAAa,CAACzB,UAAD,CAAjC;AACA,MAAM0B,aAAa,GAAGC,oBAAoB,CAAC3B,UAAD,CAA1C;AACA,MAAM9L,UAAU,GAAGhW,gBAAU,CAACoB,iBAAD,CAA7B;AACA,MAAMwL,SAAS,GAAGnE,CAAC,gBACd6a,WAAW,CAACI,WADE,IACY,IADZ,MAEdjL,iBAAiB,IAAI,EAFP,IAEY,CAAC,CAACA,iBAFd,OAAnB;AAIA,SACIta,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEA;GAAhB,EACIzO,4BAAA,CAAC4kB,qBAAD;AAAuBnW,IAAAA,SAAS,EAAE0W,WAAW,CAAClJ;AAAcnH,IAAAA,QAAQ,EAAEA;GAAtE,CADJ,EAEI9U,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAE0W,WAAW,CAACQ;GAA5B,EACI3lB,4BAAA,CAAC6X,UAAD;AAAYte,IAAAA,IAAI,EAAEoqB,UAAU,CAACpqB;AAAMqnB,IAAAA,IAAI,EAAE+C,UAAU,CAACxM;GAApD,CADJ,CAFJ,EAKInX,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAE4W,aAAa,CAACO;GAA9B,CALJ,EAMI5lB,4BAAA,CAACqkB,aAAD;AAAe5V,IAAAA,SAAS,EAAE0W,WAAW,CAACU;AAAW7O,IAAAA,YAAY,EAAE2M,UAAU,CAAC3M;GAA1E,CANJ,CADJ;AAUH,CApBoE,CAA9D;AAqBPyP,oBAAoB,CAACtb,WAArB,GAAmC,sBAAnC;AAEA,IAAMia,aAAa,gBAAG/b,qBAAqB,CAAC,UAAAO,KAAK;AAAA,SAAK;AAClD2b,IAAAA,WAAW,EAAE;AACT5W,MAAAA,SAAS,EAAE,mBAAC1lB,KAAD;AACP,YAAMu9B,OAAO,GAAa,EAA1B;AACA,YAAIv9B,KAAK,CAAC4tB,QAAV,EAAoB2P,OAAO,CAACj/B,IAAR,CAAa,sCAAb;AACpB,YAAI0B,KAAK,CAAC6tB,OAAV,EAAmB0P,OAAO,CAACj/B,IAAR,CAAa,kCAAb;AACnBi/B,QAAAA,OAAO,CAACj/B,IAAR,YAAsBqiB,KAAK,CAAC1B,aAAN,CAAoBK,aAA1C;AACA,eAAOie,OAAO,CAACthC,IAAR,CAAa,IAAb,CAAP;AACH,OAPQ;AAQT4pB,MAAAA,eAAe,EAAE,yBAAC7lB,KAAD;AAAA,eAA2BA,KAAK,CAAC+lB,KAAjC;AAAA,OARR;AASTlH,MAAAA,YAAY,EAAE8B,KAAK,CAAC1B,aAAN,CAAoBJ,YATzB;AAUT+E,MAAAA,QAAQ,EAAE,UAVD;AAWTyJ,MAAAA,QAAQ,EAAE;AAXD,KADqC;AAclD2F,IAAAA,YAAY,EAAE;AACVlP,MAAAA,MAAM,EAAE;AADE,KAdoC;AAiBlD4Y,IAAAA,QAAQ,EAAE;AACNhY,MAAAA,SAAS,EAAE,mCADL;AAEN3G,MAAAA,QAAQ,EAAE4C,KAAK,CAAC1B,aAAN,CAAoBG,QAFxB;AAGN2N,MAAAA,OAAO,EAAE,iBAAC/sB,KAAD;AAAA,eAA4BA,KAAK,CAAC+tB,YAAN,IAAsB,CAAC/tB,KAAK,CAAC6tB,OAA7B,GAAuC,CAAvC,GAA2C,CAAvE;AAAA,OAHH;AAIN9H,MAAAA,KAAK,EAAE,eAAC/lB,KAAD;AAAA,eACHA,KAAK,CAAC6tB,OAAN,GAAgBlN,KAAK,CAAC1B,aAAN,CAAoBE,gBAApC,GAAuDwB,KAAK,CAAC1B,aAAN,CAAoBI,SADxE;AAAA,OAJD;AAMNuE,MAAAA,QAAQ,EAAE,UANJ;AAONG,MAAAA,IAAI,EAAE,KAPA;AAQND,MAAAA,MAAM,EAAE,EARF;AASNE,MAAAA,GAAG,EAAE;AATC,KAjBwC;AA4BlD4Y,IAAAA,SAAS,EAAE;AACP/d,MAAAA,YAAY,EAAE8B,KAAK,CAAC1B,aAAN,CAAoBJ,YAD3B;AAEP+E,MAAAA,QAAQ,EAAE,UAFH;AAGPE,MAAAA,MAAM,EAAE,CAHD;AAIPwZ,MAAAA,MAAM,EAAE,CAJD;AAKPP,MAAAA,KAAK,EAAE,CALA;AAMPhZ,MAAAA,IAAI,EAAE,CANC;AAOPC,MAAAA,GAAG,EAAE;AAPE;AA5BuC,GAAL;AAAA,CAAN,CAA3C;AAuCA,AAAO,IAAMqY,oBAAoB,gBAAGjc,qBAAqB,CAAC;AAAA,SAAO;AAC7Duc,IAAAA,kBAAkB,EAAE;AAChBpY,MAAAA,OAAO,EAAE,iBAACvkB,KAAD;AAAA,eAA4BA,KAAK,CAAC4tB,QAAN,GAAiB,OAAjB,GAA2B,MAAvD;AAAA,OADO;AAEhB9H,MAAAA,UAAU,EACN,+BACA,QADA,GAEA,sBAFA,GAGA,2BAHA,GAIA,wBAJA,GAKA,0BALA,GAMA,GATY;AAUhBD,MAAAA,eAAe,EAAE,wBAVD;AAWhBjC,MAAAA,QAAQ,EAAE,UAXM;AAYhBM,MAAAA,MAAM,EAAE,MAZQ;AAahBD,MAAAA,KAAK,EAAE,MAbS;AAchBH,MAAAA,MAAM,EAAE;AAdQ,KADyC;AAiB7D2Z,IAAAA,cAAc,EAAE;AACZlZ,MAAAA,OAAO,EAAE,iBAACvkB,KAAD;AAAA,eAA4BA,KAAK,CAAC6tB,OAAN,GAAgB,OAAhB,GAA0B,MAAtD;AAAA,OADG;AAEZnI,MAAAA,SAAS,EAAE,kCAFC;AAGZ9B,MAAAA,QAAQ,EAAE,UAHE;AAIZM,MAAAA,MAAM,EAAE,MAJI;AAKZD,MAAAA,KAAK,EAAE,MALK;AAMZH,MAAAA,MAAM,EAAE;AANI;AAjB6C,GAAP;AAAA,CAAD,CAAlD;;ACvLA,IAAM4Z,SAAS,gBAA6B3mB,cAAK,CAACgL,IAAN,CAAW;;;MAAG3lB,YAAAA;MAAMwxB,gBAAAA;MAAUC,eAAAA;MAAShC,gBAAAA;AACtF,MAAM1vB,WAAW,GAAGD,UAAU,CAACC,WAAX,CAAuBC,IAAvB,CAApB;AACA,MAAMs+B,UAAU,GAAG/M,iBAAiB,CAACvxB,IAAD,EAAOwxB,QAAP,EAAiBC,OAAjB,CAApC;AAEA,MAAM1M,OAAO,GAAGwc,kBAAkB,CAACjD,UAAD,CAAlC;AACA,MAAMC,kBAAkB,GAAGnN,qBAAqB,CAACpxB,IAAD,CAAhD;AACA,MAAMwhC,cAAc,GAAGvc,CAAC,cACnBF,OAAO,CAAClC,aADW,IACK,IADL,MAAxB;AAGA,SACIlI,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEoY;KAAoBjD,mBAApC,EACKx+B,WAAW,GACR4a,4BAAA,CAACglB,sBAAD;AACIvW,IAAAA,SAAS,EAAErE,OAAO,CAAC0c;AACnBnD,IAAAA,UAAU,EAAEA;AACZ7O,IAAAA,QAAQ,EAAEA;GAHd,CADQ,GAOR9U,4BAAA,CAACymB,oBAAD;AACIhY,IAAAA,SAAS,EAAErE,OAAO,CAAC0c;AACnBnD,IAAAA,UAAU,EAAEA;AACZ7O,IAAAA,QAAQ,EAAEA;GAHd,CARR,EAcI9U,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC2c;GAAxB,EACI/mB,4BAAA,CAACsjB,aAAD;AAAe7U,IAAAA,SAAS,EAAErE,OAAO,CAAC4c;AAAmB3hC,IAAAA,IAAI,EAAEA;GAA3D,CADJ,CAdJ,CADJ;AAoBH,CA7BkD,CAA5C;AA8BPshC,SAAS,CAACxb,WAAV,GAAwB,WAAxB;AAEA,IAAMyb,kBAAkB,gBAAGvd,qBAAqB,CAAC,UAAAO,KAAK;AAAA,SAAK;AACvD1B,IAAAA,aAAa,EAAE;AACXkI,MAAAA,aAAa,EAAE,QADJ;AAEX5C,MAAAA,OAAO,EAAE,MAFE;AAGXL,MAAAA,MAAM,EAAE;AAHG,KADwC;AAMvD2Z,IAAAA,oBAAoB,EAAE;AAClBjK,MAAAA,QAAQ,EAAE;AADQ,KANiC;AASvDkK,IAAAA,0BAA0B,EAAE;AACxB/f,MAAAA,QAAQ,EAAE4C,KAAK,CAAC1B,aAAN,CAAoBlB,QADN;AAExBigB,MAAAA,SAAS,EAAE,YAFa;AAGxB3W,MAAAA,SAAS,EAAE,QAHa;AAIxB6K,MAAAA,UAAU,EAAE;AAJY,KAT2B;AAevD6L,IAAAA,iBAAiB,EAAE;AACflY,MAAAA,eAAe,EAAE,yBAAC7lB,KAAD;AAAA,eAA4BA,KAAK,CAAC4tB,QAAN,GAAiB,sBAAjB,GAA0C,aAAtE;AAAA,OADF;AAEfqF,MAAAA,cAAc,EAAE,wBAACjzB,KAAD;AAAA,eAA4BA,KAAK,CAAC6tB,OAAN,GAAgB,WAAhB,GAA8B,MAA1D;AAAA,OAFD;AAGfhP,MAAAA,YAAY,EAAE,CAHC;AAIfD,MAAAA,OAAO,EAAE,CAAC,CAAD,EAAI,CAAJ;AAJM;AAfoC,GAAL;AAAA,CAAN,CAAhD;;ACrBO,IAAMqf,SAAS,gBAA6BlnB,cAAK,CAACgL,IAAN,CAC/C;MAAG3lB,YAAAA;MAAMwxB,gBAAAA;MAAUC,eAAAA;MAAShC,gBAAAA;AACxB,MAAM6O,UAAU,GAAmB/M,iBAAiB,CAACvxB,IAAD,EAAOwxB,QAAP,EAAiBC,OAAjB,CAApD;AACA,MAAMO,WAAW,GAAGD,UAAU,CAACtC,QAAD,CAA9B;;AAEA,8BAA8CnT,4BAA4B,CACtEtc,IADsE,CAA1E;AAAA,MAAQ0c,iBAAR,yBAAQA,iBAAR;AAAA,MAA2BE,cAA3B,yBAA2BA,cAA3B;;AAGA,MAAMklB,UAAU,GAAG/lB,aAAO,CACtB;AAAA,WAAO;AACHuiB,MAAAA,UAAU,EAAVA,UADG;AAEH7O,MAAAA,QAAQ,EAARA;AAFG,KAAP;AAAA,GADsB,EAKtB,CAACA,QAAD,EAAW6O,UAAX,CALsB,CAA1B;AAOA,MAAMvZ,OAAO,GAAGD,WAAS,CAACgd,UAAD,CAAzB;AACA,MAAM9B,aAAa,GAAGC,oBAAoB,CAAC3B,UAAD,CAA1C;AACA,MAAM9L,UAAU,GAAGhW,gBAAU,CAACoB,iBAAD,CAA7B;AACA,MAAM2gB,kBAAkB,GAAGnN,qBAAqB,CAACpxB,IAAD,CAAhD;AACA,SACI2a,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC1B;KAAmBkb,mBAA3C,EACI5jB,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAE4W,aAAa,CAACqB;GAA9B,CADJ,EAEI1mB,4BAAA,MAAA;AACIyO,IAAAA,SAAS,EAAEnE,CAAC,CAAC,CACT+a,aAAa,CAACO,kBADL,EAETxb,OAAO,CAACgd,sBAFC,CAAD;GADhB,CAFJ,EAQIpnB,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAACyZ;GAAxB,EACI7jB,4BAAA,CAAC6X,UAAD;AACIte,IAAAA,IAAI,EAAE8d,WAAF,WAAEA,WAAF,GAAiBsM,UAAU,CAACpqB;AAChCqnB,IAAAA,IAAI,EAAEvJ,WAAW,GAAG,KAAH,GAAWsM,UAAU,CAACxM;AACvCuD,IAAAA,UAAU,EAAE;GAHhB,CADJ,CARJ,EAeI1a,4BAAA,MAAA;AACIyO,IAAAA,SAAS,EAAErE,OAAO,CAAC2Z;AACnBhkB,IAAAA,KAAK,EAAE1a,IAAI,GAAGA,IAAI,CAAC4C,IAAR,GAAe1B;GAF9B,EAIIyZ,4BAAA,CAACsjB,aAAD;AAAej+B,IAAAA,IAAI,EAAEA;GAArB,CAJJ,CAfJ,EAqBI2a,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC6Z;GAAxB,EACK5+B,IAAI,GACD0c,iBADC,WACDA,iBADC,GACoB/B,4BAAA,OAAA,MAAA,UAAA,CADpB,GAGDA,4BAAA,CAACuV,eAAD;AAAiBC,IAAAA,SAAS,EAAE;AAAGC,IAAAA,SAAS,EAAE;GAA1C,CAJR,CArBJ,EA4BIzV,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAErE,OAAO,CAAC6Z;GAAxB,EACK5+B,IAAI,GACD4c,cADC,WACDA,cADC,GACiBjC,4BAAA,OAAA,MAAA,UAAA,CADjB,GAGDA,4BAAA,CAACuV,eAAD;AAAiBC,IAAAA,SAAS,EAAE;AAAIC,IAAAA,SAAS,EAAE;GAA3C,CAJR,CA5BJ,CADJ;AAsCH,CAzD8C,CAA5C;AA4DP,IAAMtL,WAAS,gBAAGd,qBAAqB,CAAC,UAAAO,KAAK;AAAA,SAAK;AAC9ClB,IAAAA,aAAa,EAAE;AACXiG,MAAAA,SAAS,aAAW/E,KAAK,CAACgF,OAAN,CAAcC,OAAzB,cADE;AAEX7H,MAAAA,QAAQ,EAAE4C,KAAK,CAAClB,aAAN,CAAoB1B,QAFnB;AAGXgI,MAAAA,KAAK,EAAE;AAAA,YAAG8F,QAAH,SAAGA,QAAH;AAAA,eACHA,QAAQ,CAACJ,SAAT,GACMI,QAAQ,CAACF,UAAT,GACIhL,KAAK,CAAC1C,GAAN,CAAUC,YADd,GAEIyC,KAAK,CAAC1C,GAAN,CAAUE,eAHpB,GAIM,SALH;AAAA,OAHI;AASX8c,MAAAA,UAAU,EAAE,QATD;AAUXrX,MAAAA,QAAQ,EAAE,UAVC;AAWXW,MAAAA,OAAO,EAAE,MAXE;AAYXL,MAAAA,MAAM,EAAE;AAZG,KAD+B;AAe9Cia,IAAAA,sBAAsB,EAAE;AACpBpR,MAAAA,OAAO,EAAE;AADW,KAfsB;AAkB9C6N,IAAAA,iBAAiB,EAAE;AACf7U,MAAAA,KAAK,EAAE;AAAA,YAAG2U,UAAH,SAAGA,UAAH;AAAA,YAAe7O,QAAf,SAAeA,QAAf;AAAA,eACHA,QAAQ,CAACJ,SAAT,GACMI,QAAQ,CAACF,UAAT,GACIhL,KAAK,CAAC1C,GAAN,CAAUC,YADd,GAEIyC,KAAK,CAAC1C,GAAN,CAAUE,eAHpB,GAIMuc,UAAU,CAAC3U,KALd;AAAA,OADQ;AAOfhI,MAAAA,QAAQ,EAAE4C,KAAK,CAAClB,aAAN,CAAoBE,YAPf;AAQfyH,MAAAA,SAAS,EAAE,YARI;AASfxI,MAAAA,OAAO,EAAE,CAAC,CAAD,EAAI,CAAJ,CATM;AAUfkF,MAAAA,MAAM,EAAE;AAVO,KAlB2B;AA8B9CgX,IAAAA,iBAAiB,EAAE;AACfsD,MAAAA,YAAY,EAAE,UADC;AAEfhX,MAAAA,SAAS,EAAE,YAFI;AAGfgG,MAAAA,UAAU,EAAE,QAHG;AAIfC,MAAAA,QAAQ,EAAE,QAJK;AAKfgR,MAAAA,IAAI,EAAE,WALS;AAMfrG,MAAAA,WAAW,EAAE,CANE;AAOflU,MAAAA,MAAM,EAAE;AAPO,KA9B2B;AAuC9CkX,IAAAA,qBAAqB,EAAE;AACnBjd,MAAAA,QAAQ,EAAE4C,KAAK,CAAClB,aAAN,CAAoBC,gBADX;AAEnB0H,MAAAA,SAAS,EAAE,YAFQ;AAGnBgG,MAAAA,UAAU,EAAE,QAHO;AAInBC,MAAAA,QAAQ,EAAE,QAJS;AAKnBgR,MAAAA,IAAI,EAAE,WALa;AAMnBzf,MAAAA,OAAO,EAAE,CAAC,CAAD,EAAI,CAAJ,CANU;AAOnBkF,MAAAA,MAAM,EAAE;AAPW;AAvCuB,GAAL;AAAA,CAAN,CAAvC;;ACzDA,IAAMwa,gBAAgB,GAAkB;AACpClU,EAAAA,aAAa,EAAE,KADqB;AAEpCqB,EAAAA,SAAS,EAAE,KAFyB;AAGpCE,EAAAA,UAAU,EAAE;AAHwB,CAAxC;AAMA,AAAO,IAAM4S,cAAc,gBAAkCxnB,cAAK,CAACgL,IAAN,CAAW;MAAGpgB,cAAAA;MAAQguB,oBAAAA;MAAc6O,oBAAAA;AAC7F,MAAMrd,OAAO,GAAGD,WAAS,EAAzB;;AAGA,MAAM9kB,IAAI,GAAGga,gBAAgB,CAAC1U,cAAD,EAAiBC,MAAjB,CAA7B;AACA,MAAMisB,QAAQ,GAAGxX,gBAAgB,CAAC3T,oBAAD,EAAuBd,MAAvB,CAAjC;AACA,MAAM6kB,WAAW,GAAGhQ,sBAAW,CAACrS,mBAAD,CAA/B;;AAGA,MAAMs6B,iBAAiB,GAAG/O,oBAAoB,CAACtzB,IAAD,EAAOuzB,YAAP,CAA9C;;AACA,kBAA8Bj1B,cAAQ,CAAC,KAAD,CAAtC;AAAA,MAAOmzB,OAAP;AAAA,MAAgBgM,UAAhB;;AACA,MAAM6E,qBAAqB;AACvB/E,IAAAA,UAAU,EAAE,KADW;AAEvBC,IAAAA,gBAAgB,EAAE;AAAEpU,MAAAA,SAAS,EAAErE,OAAO,CAACwd;AAArB;AAFK,KAGnBziC,UAAU,CAACO,WAAX,CAAuBL,IAAvB,IAA+BqiC,iBAA/B,GAAmDnhC,SAHhC;AAIvBu8B,IAAAA,UAAU,EAAVA;AAJuB,IAA3B;;;AAQA,MAAM+E,cAAc,GAAqC;AACrDxiC,IAAAA,IAAI,EAAJA,IADqD;AAErDwxB,IAAAA,QAAQ,EAARA,QAFqD;AAGrDC,IAAAA,OAAO,EAAPA;AAHqD,GAAzD;AAMA,MAAIgR,cAAJ;AACA,MAAIL,YAAY,KAAKlxB,oBAAY,CAACkE,IAAlC,EAAwCqtB,cAAc,GAAGZ,SAAjB,CAAxC,KACK,IAAIO,YAAY,KAAKlxB,oBAAY,CAACsE,OAAlC,EAA2CitB,cAAc,GAAGpE,YAAjB,CAA3C,KACAoE,cAAc,GAAGnB,SAAjB;AAEL,SAAOlX,WAAW,GACdzP,4BAAA,CAAC0iB,gBAAD,oBAAsBiF,sBAAtB,EACI3nB,4BAAA,CAAC8nB,cAAD,oBAAoBD;AAAgB/S,IAAAA,QAAQ,EAAEyS;IAA9C,CADJ,CADc,GAKdvnB,4BAAA,CAACmkB,YAAD;AAAc9+B,IAAAA,IAAI,EAAEA;GAApB,EACK,UAAAyvB,QAAQ;AAAA,WACL9U,4BAAA,CAAC0iB,gBAAD,oBAAsBiF,sBAAtB,EACI3nB,4BAAA,CAAC8nB,cAAD,oBAAoBD;AAAgB/S,MAAAA,QAAQ,EAAEA;MAA9C,CADJ,CADK;AAAA,GADb,CALJ;AAaH,CA3C4D,CAAtD;AA4CP0S,cAAc,CAACrc,WAAf,GAA6B,gBAA7B;AAEA,IAAMhB,WAAS,gBAAGX,sBAAsB,CAAC;AAAA,SAAO;AAC5Coe,IAAAA,yBAAyB,EAAE;AACvB;AACA;AACAG,MAAAA,OAAO,EAAE,iBAHc;AAIvBlb,MAAAA,QAAQ,EAAE,UAJa;AAKvBM,MAAAA,MAAM,EAAE;AALe;AADiB,GAAP;AAAA,CAAD,CAAxC;;AC5CO,IAAM6a,cAAc,GAAG,SAAjBA,cAAiB;AAC1B;AACA,SAAO,OAAOC,MAAM,CAACC,WAAd,KAA8B,WAA9B,IAA6CC,SAAS,CAACC,SAAV,CAAoBC,OAApB,CAA4B,UAA5B,MAA4C,CAAC,CAAjG;AACH,CAHM;AAKP,AAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CACzBpb,KADyB,EAEzB0R,SAFyB,EAGzB2J,UAHyB,EAIzBxX,kBAJyB;AAMzB,MAAMyX,MAAM,GAAGzX,kBAAkB,GAAG,CAAH,GAAO,CAAxC;AACA,MAAM0X,SAAS,GAAGT,cAAc,KAAK,CAAL,GAAS,EAAzC;AAEA,MAAIU,WAAJ;AACA,MAAIC,WAAJ;;AACA,MAAI5X,kBAAJ,EAAwB;AACpB2X,IAAAA,WAAW,GAAG,CAAd;AACAC,IAAAA,WAAW,GAAG,CAACzb,KAAK,GAAGsb,MAAR,GAAiBC,SAAlB,IAA+BC,WAA7C;AACH,GAHD,MAGO;AACHC,IAAAA,WAAW,GAAGJ,UAAU,CAACztB,UAAzB;AACA4tB,IAAAA,WAAW,GAAG5lB,IAAI,CAACsS,GAAL,CAAS,CAAT,EAAYtS,IAAI,CAACuS,KAAL,CAAW,CAACnI,KAAK,GAAGub,SAAT,KAAuBE,WAAW,GAAGH,MAArC,CAAX,CAAZ,CAAd;AACH;;AAED,MAAMI,QAAQ,GAAG9lB,IAAI,CAAC+lB,IAAL,CAAUjK,SAAS,GAAG8J,WAAtB,CAAjB;AAEA,SAAO;AACHE,IAAAA,QAAQ,EAARA,QADG;AAEHF,IAAAA,WAAW,EAAXA,WAFG;AAGHF,IAAAA,MAAM,EAANA,MAHG;AAIHM,IAAAA,SAAS,EAAEP,UAAU,CAAC7tB,WAJnB;AAKHiuB,IAAAA,WAAW,EAAXA;AALG,GAAP;AAOH,CA5BM;AA8BP,AAAO,IAAMI,aAAa,gBAAgC/oB,cAAK,CAACgL,IAAN,CAAW,UAAAE,KAAK;AACtE,MAAQgC,KAAR,GAA0BhC,KAA1B,CAAQgC,KAAR;AAAA,MAAeC,MAAf,GAA0BjC,KAA1B,CAAeiC,MAAf;AAEA,MAAMob,UAAU,GAAG9oB,sBAAW,CAACnT,oBAAD,CAA9B;AACA,MAAMyE,cAAc,GAAG0O,sBAAW,CAACxO,SAAS,CAACL,iBAAX,CAAlC;AACA,MAAMguB,SAAS,GAAGxd,aAAO,CAAC;AAAA,WAAMrQ,cAAc,CAACjJ,MAArB;AAAA,GAAD,EAA8B,CAACiJ,cAAD,CAA9B,CAAzB;AAEA,MAAMi4B,OAAO,GAAG1kC,YAAM,EAAtB;AACA,MAAMysB,kBAAkB,GAAG/H,qBAAqB,EAAhD;AAGA;AACA;AACA;;AACA,kBAAoCrlB,cAAQ,CAAC2kC,aAAa,CAACpb,KAAD,EAAQ0R,SAAR,EAAmB2J,UAAnB,EAA+BxX,kBAA/B,CAAd,CAA5C;AAAA,MAAOkY,UAAP;AAAA,MAAmBC,aAAnB;;AACA,MAAMC,aAAa,GAAG7kC,YAAM,CAAC2kC,UAAD,CAA5B;AACAnlC,EAAAA,eAAS,CAAC;AACN,QAAMslC,OAAO,GAAGD,aAAa,CAAC5kC,OAA9B;AACA,QAAM8kC,OAAO,GAAGf,aAAa,CAACpb,KAAD,EAAQ0R,SAAR,EAAmB2J,UAAnB,EAA+BxX,kBAA/B,CAA7B;AAEAoY,IAAAA,aAAa,CAAC5kC,OAAd,GAAwB8kC,OAAxB;;AACA,QAAIL,OAAO,CAACzkC,OAAZ,EAAqB;AACjB,UAAI6kC,OAAO,CAACR,QAAR,KAAqBS,OAAO,CAACT,QAAjC,EAA2C;AACvCI,QAAAA,OAAO,CAACzkC,OAAR,CAAgB+kC,kBAAhB,CAAmCxmB,IAAI,CAACqS,GAAL,CAASiU,OAAO,CAACR,QAAjB,EAA2BS,OAAO,CAACT,QAAnC,IAA+C,CAAlF;AACH;;AACD,UAAIQ,OAAO,CAACV,WAAR,KAAwBW,OAAO,CAACX,WAApC,EAAiD;AAC7CM,QAAAA,OAAO,CAACzkC,OAAR,CAAgBglC,qBAAhB,CAAsCzmB,IAAI,CAACqS,GAAL,CAASiU,OAAO,CAACV,WAAjB,EAA8BW,OAAO,CAACT,QAAtC,IAAkD,CAAxF;AACH;;AACD,UAAIQ,OAAO,CAACT,WAAR,KAAwBU,OAAO,CAACV,WAApC,EAAiD;AAC7CK,QAAAA,OAAO,CAACzkC,OAAR,CAAgBilC,iBAAhB,CAAkC;AAAEC,UAAAA,WAAW,EAAE,CAAf;AAAkBC,UAAAA,QAAQ,EAAE;AAA5B,SAAlC;AACH;AACJ;;AAEDR,IAAAA,aAAa,CAACG,OAAD,CAAb;AACH,GAlBQ,EAkBN,CAACH,aAAD,EAAgBC,aAAhB,EAA+BpY,kBAA/B,EAAmD7D,KAAnD,EAA0Dqb,UAA1D,EAAsE3J,SAAtE,CAlBM,CAAT;AAoBA,MAAM+K,MAAM,GAAGvoB,aAAO,CAAC;AACnB,QAAMwoB,EAAE,GAAGT,aAAX;AACA,WAAO;AACHU,MAAAA,cAAc,EAAE,wBAAC74B,KAAD;AAAA,eACZ44B,EAAE,CAACrlC,OAAH,CAAWokC,WAAX,IAA2B33B,KAAK,KAAK44B,EAAE,CAACrlC,OAAH,CAAWmkC,WAAX,GAAyB,CAAnC,GAAuC,CAAvC,GAA2CkB,EAAE,CAACrlC,OAAH,CAAWikC,MAAjF,CADY;AAAA,OADb;AAGHsB,MAAAA,YAAY,EAAE,sBAAC94B,KAAD;AAAA,eACV44B,EAAE,CAACrlC,OAAH,CAAWukC,SAAX,IAAwB93B,KAAK,KAAK44B,EAAE,CAACrlC,OAAH,CAAWqkC,QAAX,GAAsB,CAAhC,GAAoC,CAApC,GAAwCgB,EAAE,CAACrlC,OAAH,CAAWikC,MAA3E,CADU;AAAA;AAHX,KAAP;AAMH,GARqB,EAQnB,CAACW,aAAD,CARmB,CAAtB;AAUA,MAAMY,iBAAiB,GAAGvlC,mBAAmB,CAACib,sBAAW,CAACxO,SAAS,CAACL,iBAAX,CAAZ,CAA7C;AACA,MAAMo5B,UAAU,GAAGxqB,iBAAW,CAC1B,UAACnK,IAAD;;;AACI,QAAMrE,KAAK,GAAGqE,IAAI,CAACq0B,QAAL,GAAgBP,aAAa,CAAC5kC,OAAd,CAAsBmkC,WAAtC,GAAoDrzB,IAAI,CAACo0B,WAAvE;AAEA,oCAAOM,iBAAiB,CAACxlC,OAAlB,CAA0ByM,KAA1B,CAAP,sDAA2DA,KAA3D;AACH,GALyB,EAM1B,CAACm4B,aAAD,EAAgBY,iBAAhB,CAN0B,CAA9B;AASA,MAAME,YAAY,GAAGzqB,iBAAW,CAC5B,UAACnK,IAAD;AACI,QAAMu0B,EAAE,GAAGT,aAAX;AACA,QAAMn4B,KAAK,GAAGqE,IAAI,CAACq0B,QAAL,GAAgBE,EAAE,CAACrlC,OAAH,CAAWmkC,WAA3B,GAAyCrzB,IAAI,CAACo0B,WAA5D;AACA,QAAM7+B,MAAM,GAAGmG,cAAc,CAACC,KAAD,CAA7B;AACA,QAAID,cAAc,CAACC,KAAD,CAAd,KAA0BzK,SAA9B,EAAyC,OAAO,IAAP;;AAEzC,QAAM2jC,eAAe,gBACd70B,IAAI,CAACmZ,KADS;AAEjBiV,MAAAA,YAAY,EAAEpuB,IAAI,CAACo0B,WAAL,KAAqBG,EAAE,CAACrlC,OAAH,CAAWmkC,WAAX,GAAyB,CAA9C,GAAkD,CAAlD,GAAsDkB,EAAE,CAACrlC,OAAH,CAAWikC,MAF9D;AAGjBtN,MAAAA,aAAa,EAAE7lB,IAAI,CAACq0B,QAAL,KAAkBE,EAAE,CAACrlC,OAAH,CAAWqkC,QAAX,GAAsB,CAAxC,GAA4C,CAA5C,GAAgDgB,EAAE,CAACrlC,OAAH,CAAWikC,MAHzD;AAIjBnY,MAAAA,SAAS,EAAE;AAJM,MAArB;;AAOA,WACIrQ,4BAAA,MAAA;AAAKwO,MAAAA,KAAK,EAAE0b;KAAZ,EACIlqB,4BAAA,CAACwnB,cAAD;AAAgB58B,MAAAA,MAAM,EAAEA,MAAF,WAAEA,MAAF,GAAY;AAAMguB,MAAAA,YAAY,EAAE5nB;AAAOy2B,MAAAA,YAAY,EAAEc,UAAU,CAACthC;KAAtF,CADJ,CADJ;AAKH,GAnB2B,EAoB5B,CAAC8J,cAAD,EAAiBw3B,UAAU,CAACthC,IAA5B,CApB4B,CAAhC;AAuBA,MAAMmjB,OAAO,GAAGD,WAAS,EAAzB;AACA,MAAMggB,aAAa,GAAG/oB,aAAO,CAAC;AAC1B,WACIpB,4BAAA,CAACoqB,4BAAD;AACI3lC,MAAAA,GAAG,EAAEukC;AACLva,MAAAA,SAAS,EAAErE,OAAO,CAACigB;AACnBC,MAAAA,kBAAkB,EAAErB,UAAU,CAACH,SAAX,GAAuBG,UAAU,CAACT;AACtDM,MAAAA,SAAS,EAAEa,MAAM,CAACG;AAClBS,MAAAA,oBAAoB,EAAEtB,UAAU,CAACN,WAAX,GAAyBM,UAAU,CAACT;AAC1DG,MAAAA,WAAW,EAAEgB,MAAM,CAACE;AACpBnB,MAAAA,WAAW,EAAEO,UAAU,CAACP;AACxBvb,MAAAA,MAAM,EAAEA;AACRyb,MAAAA,QAAQ,EAAEK,UAAU,CAACL;AACrB1b,MAAAA,KAAK,EAAEA;AACPsd,MAAAA,OAAO,EAAER;KAXb,EAaKC,YAbL,CADJ;AAiBH,GAlB4B,EAkB1B,CACC7f,OAAO,CAACigB,aADT,EAECpB,UAAU,CAACH,SAFZ,EAGCG,UAAU,CAACT,MAHZ,EAICS,UAAU,CAACN,WAJZ,EAKCM,UAAU,CAACP,WALZ,EAMCO,UAAU,CAACL,QANZ,EAOCe,MAAM,CAACG,YAPR,EAQCH,MAAM,CAACE,cARR,EASC1c,MATD,EAUCD,KAVD,EAWC8c,UAXD,EAYCC,YAZD,CAlB0B,CAA7B;AAiCA,SAAOE,aAAP;AACH,CAlHyD,CAAnD;AAoHP,IAAMhgB,WAAS,gBAAGX,sBAAsB,CAAC;AAAA,SAAO;AAC5C6gB,IAAAA,aAAa,EAAE;AAD6B,GAAP;AAAA,CAAD,CAAxC;;ACtLA;;;;;AAMA,AAeO,IAAMI,aAAa,gBAAgCzqB,cAAK,CAACgL,IAAN,CAAW,UAAAE,KAAK;AACtE,MAAQgC,KAAR,GAA0BhC,KAA1B,CAAQgC,KAAR;AAAA,MAAeC,MAAf,GAA0BjC,KAA1B,CAAeiC,MAAf;AAEA,MAAMob,UAAU,GAAG9oB,sBAAW,CAACnT,oBAAD,CAA9B;AAEA,MAAMo+B,OAAO,GAAGpmC,YAAM,EAAtB;AAEA,MAAMyM,cAAc,GAAG0O,sBAAW,CAACxO,SAAS,CAACL,iBAAX,CAAlC;AACA,MAAMm5B,iBAAiB,GAAGvlC,mBAAmB,CAACuM,cAAD,CAA7C;AACA,MAAMi5B,UAAU,GAAGxqB,iBAAW,CAC1B,UAACxO,KAAD;AAAA;;AAAA,oCAAmB+4B,iBAAiB,CAACxlC,OAAlB,CAA0ByM,KAA1B,CAAnB,sDAAuEA,KAAvE;AAAA,GAD0B,EAE1B,CAAC+4B,iBAAD,CAF0B,CAA9B;AAKA,MAAM3f,OAAO,GAAGD,WAAS,EAAzB;AACA,MAAMwgB,aAAa,GAAGvpB,aAAO,CAAC;AAC1B;AACA,QAAMwpB,WAAW,GAAG,SAAdA,WAAc,CAACv1B,IAAD;;;AAChB,aACI2K,4BAAA,MAAA;AAAKwO,QAAAA,KAAK,EAAEnZ,IAAI,CAACmZ;OAAjB,EACIxO,4BAAA,CAACwnB,cAAD;AACI58B,QAAAA,MAAM,2BAAEmG,cAAc,CAACsE,IAAI,CAACrE,KAAN,CAAhB,oCAAgC;AACtC4nB,QAAAA,YAAY,EAAEvjB,IAAI,CAACrE;AACnBy2B,QAAAA,YAAY,EAAElxB,oBAAY,CAACkE;OAH/B,CADJ,CADJ;AASH,KAVD;;AAYA,WACIuF,4BAAA,CAAC6qB,yBAAD;AACIpmC,MAAAA,GAAG,EAAEimC;AACLjc,MAAAA,SAAS,EAAErE,OAAO,CAAC0gB;AACnBC,MAAAA,QAAQ,EAAExC,UAAU,CAAC7tB;AACrByS,MAAAA,MAAM,EAAEA;AACR6d,MAAAA,SAAS,EAAEj6B,cAAc,CAACjJ;AAC1BolB,MAAAA,KAAK,EAAEA;AACPsd,MAAAA,OAAO,EAAER;KAPb,EASKY,WATL,CADJ;AAaH,GA3B4B,EA2B1B,CACCxgB,OAAO,CAAC0gB,aADT,EAECvC,UAAU,CAAC7tB,WAFZ,EAGCyS,MAHD,EAICpc,cAJD,EAKCmc,KALD,EAMC8c,UAND,CA3B0B,CAA7B;AAoCA,SAAOW,aAAP;AACH,CApDyD,CAAnD;AAsDP,IAAMxgB,WAAS,gBAAGd,qBAAqB,CAAC,UAAAO,KAAK;AAAA,SAAK;AAC9CkhB,IAAAA,aAAa,EAAE;AACXG,MAAAA,SAAS,iBAAerhB,KAAK,CAACgF,OAAN,CAAcC;AAD3B;AAD+B,GAAL;AAAA,CAAN,CAAvC;;ICjDa+S,QAAQ,gBAA4B5hB,cAAK,CAACgL,IAAN,CAAW,UAACE,KAAD;AACxD,MAAMna,cAAc,GAAG0O,sBAAW,CAACxO,SAAS,CAACL,iBAAX,CAAlC;AACA,MAAM23B,UAAU,GAAG9oB,sBAAW,CAACnT,oBAAD,CAA9B;AAEA,MAAMpC,aAAa,GAAGuV,sBAAW,CAACxV,mBAAD,CAAjC;;AACA,qBAA+CypB,WAAW,CAAC;AAAEruB,IAAAA,IAAI,EAAE6E;AAAR,GAAD,CAA1D;AAAA,MAAQuqB,IAAR,gBAAQA,IAAR;AAAA,MAAcG,UAAd,gBAAcA,UAAd;AAAA,MAA0BD,gBAA1B,gBAA0BA,gBAA1B;;AACA,MAAMwS,UAAU,GAAG/lB,aAAO,CAAa;AAAA,WAAO;AAAEwT,MAAAA,UAAU,EAAVA,UAAF;AAAcD,MAAAA,gBAAgB,EAAhBA;AAAd,KAAP;AAAA,GAAb,EAAuD,CAACC,UAAD,EAAaD,gBAAb,CAAvD,CAA1B;AAEA,MAAMuW,YAAY,GAAGC,cAAc,CAAChE,UAAD,CAAnC;AACA,MAAM/c,OAAO,GAAGD,WAAS,CAACoe,UAAD,CAAzB;AACA,MAAQ6C,QAAR,GAAqBlgB,KAArB,CAAQkgB,QAAR;AAGA;AACA;;AACA,MAAMC,mBAAmB,GAAG,IAA5B;AAEA,MAAMC,YAAY,GAAG9rB,iBAAW,CAC5B;QAAG0N,aAAAA;QAAOC,cAAAA;;AACN,QAAIpc,cAAc,CAACjJ,MAAf,KAA0B,CAA9B,EAAiC;AAC7B,aAAOkY,4BAAA,CAAC0hB,aAAD;AAAexU,QAAAA,KAAK,EAAEA;AAAOC,QAAAA,MAAM,EAAEob,UAAU,CAAC7tB;OAAhD,CAAP;AACH,KAFD,MAEO,IAAI6tB,UAAU,CAACthC,IAAX,KAAoBsP,oBAAY,CAACkE,IAArC,EAA2C;AAC9C,aAAOuF,4BAAA,CAACyqB,aAAD;AAAevd,QAAAA,KAAK,EAAEA;AAAOC,QAAAA,MAAM,EAAEA;OAArC,CAAP;AACH,KAFM,MAEA;AACH,aAAOnN,4BAAA,CAAC+oB,aAAD;AAAe7b,QAAAA,KAAK,EAAEA;AAAOC,QAAAA,MAAM,EAAEA;OAArC,CAAP;AACH;AACJ,GAT2B,EAU5B,CAACpc,cAAD,EAAiBw3B,UAAjB,CAV4B,CAAhC;AAaA,MAAM1Q,UAAU,GAAGhW,gBAAU,CAACoB,iBAAD,CAA7B;AACA,SACIjD,4BAAA,MAAA;AAAKorB,IAAAA,QAAQ,EAAEA;AAAU3mC,IAAAA,GAAG,EAAEgwB;AAAMhG,IAAAA,SAAS,EAAEnE,CAAC,CAAC,CAACF,OAAO,CAACmhB,eAAT,EAA0BL,YAAY,CAACK,eAAvC,CAAD;AAA2D5U,IAAAA,IAAI,EAAC;GAAhH,EACI3W,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEyc,YAAY,CAACM;GAA7B,EACIxrB,4BAAA,MAAA;AAAKyO,IAAAA,SAAS,EAAEyc,YAAY,CAACO;GAA7B,EACIzrB,4BAAA,CAAC6X,UAAD;AAAYte,IAAAA,IAAI,EAAEqb,UAAU,GAAGpe,sBAAc,CAACoe,UAAlB,GAA+Bpe,sBAAc,CAAC+gB;GAA1E,CADJ,CADJ,CADJ,EAMIvX,4BAAA,CAAC0rB,SAAD;AAAWC,IAAAA,aAAa,EAAE,CAACN;GAA3B,EAAiDC,YAAjD,CANJ,CADJ;AAUH,CAzCgD,CAA1C;AA0CP1J,QAAQ,CAACzW,WAAT,GAAuB,UAAvB;AAEA,IAAMggB,cAAc,gBAAG9hB,qBAAqB,CAAC,UAAAO,KAAK;AAAA,SAAK;AACnD2hB,IAAAA,eAAe,EAAE;AACbpO,MAAAA,SAAS,EAAE9pB,aAAa,CAAC2H,cAAd,CAA6BzO,cAA7B,CAA4CmO,WAA5C,GAA0D,CADxD;AAEbqU,MAAAA,UAAU,EAAE,oBAAC9lB,KAAD;AAAA,eACRA,KAAK,CAAC0rB,gBAAN,IAA0B1rB,KAAK,CAAC2rB,UAAhC,GACM3rB,KAAK,CAAC2rB,UAAN,GACI1L,iBAAiB,CAACU,KAAK,CAAC1C,GAAN,CAAUK,sBAAX,EAAmCqC,KAAK,CAAC1C,GAAN,CAAUM,sBAA7C,CADrB,GAEI0B,iBAAiB,CAACU,KAAK,CAAC1C,GAAN,CAAUO,yBAAX,EAAsCmC,KAAK,CAAC1C,GAAN,CAAUQ,yBAAhD,CAH3B,GAIM,MALE;AAAA;AAFC,KADkC;AAUnD8jB,IAAAA,WAAW,EAAE;AACThe,MAAAA,OAAO,EAAE,iBAACvkB,KAAD;AAAA;AAELA,UAAAA,KAAK,CAAC0rB,gBAAN,IAA0B1rB,KAAK,CAAC2rB,UAAhC,GAA6C,OAA7C,GAAuD;AAFlD;AAAA,OADA;AAIT9M,MAAAA,YAAY,EAAE8B,KAAK,CAAC1B,aAAN,CAAoBJ,YAJzB;AAKTgF,MAAAA,aAAa,EAAE,MALN;AAMTD,MAAAA,QAAQ,EAAE,UAND;AAOTM,MAAAA,MAAM,EAAE,MAPC;AAQTD,MAAAA,KAAK,EAAE,MARE;AASTH,MAAAA,MAAM,EAAE;AATC,KAVsC;AAqBnD0e,IAAAA,eAAe,EAAE;AACb3c,MAAAA,eAAe,EAAE,yBAAC7lB,KAAD;AAAA,eAAwBA,KAAK,CAAC2rB,UAAN,GAAmBhL,KAAK,CAAC1C,GAAN,CAAUG,WAA7B,GAA2CuC,KAAK,CAAC1C,GAAN,CAAUI,cAA7E;AAAA,OADJ;AAEb0H,MAAAA,KAAK,EAAE,eAAC/lB,KAAD;AAAA,eAAwBA,KAAK,CAAC2rB,UAAN,GAAmBhL,KAAK,CAAC1C,GAAN,CAAUC,YAA7B,GAA4CyC,KAAK,CAAC1C,GAAN,CAAUE,eAA9E;AAAA,OAFM;AAGbU,MAAAA,YAAY,EAAE8B,KAAK,CAAC1B,aAAN,CAAoBJ,YAHrB;AAIb6F,MAAAA,SAAS,EAAE,mCAJE;AAKbd,MAAAA,QAAQ,EAAE,UALG;AAMbyD,MAAAA,SAAS,EAAE,QANE;AAObvJ,MAAAA,UAAU,EAAE,MAPC;AAQbC,MAAAA,QAAQ,EAAE,KARG;AASbgG,MAAAA,IAAI,EAAE,KATO;AAUbG,MAAAA,MAAM,EAAE,EAVK;AAWbF,MAAAA,GAAG,EAAE,KAXQ;AAYbC,MAAAA,KAAK,EAAE;AAZM;AArBkC,GAAL;AAAA,CAAN,CAA5C;AAqCA,IAAM/C,WAAS,gBAAGX,sBAAsB,CAAC;AAAA,SAAO;AAC5C+hB,IAAAA,eAAe,EAAE;AACbpe,MAAAA,MAAM,EAAE,MADK;AAEbye,MAAAA,SAAS,EAAE;AAFE;AAD2B,GAAP;AAAA,CAAD,CAAxC;;AC3GA;;;;;AAMA,IAgBaC,eAAe,gBAAmC7rB,cAAK,CAACgL,IAAN,CAAW;AACtE,MAAM1Y,QAAQ,GAAGsN,sBAAW,EAA5B;AACA9b,EAAAA,eAAS,CAAC;AACNwO,IAAAA,QAAQ,CAACQ,YAAY,CAAC6K,qBAAb,CAAmC,IAAnC,CAAD,CAAR;AACA,WAAO;AACHrL,MAAAA,QAAQ,CAACQ,YAAY,CAAC6K,qBAAb,CAAmC,KAAnC,CAAD,CAAR;AACH,KAFD;AAGH,GALQ,EAKN,CAACrL,QAAD,CALM,CAAT;AAOA,MAAM4O,IAAI,GAAGC,iBAAO,EAApB;AACA,MAAM2qB,yBAAyB,GAAG5qB,IAAI,CAACG,aAAL,CAC9B;AACIrZ,IAAAA,EAAE,EAAE4Y,SAAS,CAACD,qBAAa,CAACkrB,eAAf,EAAgC,qBAAhC,CADjB;AAEItqB,IAAAA,cAAc,EAAE;AAFpB,GAD8B,EAK9B;AAAEwqB,IAAAA,QAAQ,EAAE/rB,4BAAA,SAAA,MAAA,qBAAA;AAAZ,GAL8B,CAAlC;AAQA,MAAMrS,iBAAiB,GAAG8R,sBAAW,CAAC/R,uBAAD,CAArC;AACA,MAAM5D,gBAAgB,GAAG2V,sBAAW,CAAC5V,sBAAD,CAApC;AAEA,MAAM+T,eAAe,GAAG8O,uBAAuB,EAA/C;AACA,MAAMsf,yBAAyB,GAAG5qB,aAAO,CAAC;AACtC,QAAMib,UAAU,GAAmB,EAAnC;;+BACSx0B;AACL,UAAME,IAAI,GAAG+B,gBAAgB,CAACjC,CAAD,CAA7B;;AAEA,UAAI,OAAOE,IAAP,KAAgB,QAApB,EAA8B;AAC1Bs0B,QAAAA,UAAU,CAAC90B,IAAX,CACIyY,4BAAA,CAACod,0BAAD;AACI1c,UAAAA,GAAG,yBAAuB3Y;AAC1B2B,UAAAA,YAAY,EAAE3B;AACds1B,UAAAA,eAAe,EAAEzf;SAHrB,CADJ;AAOH,OARD,MAQO;AACH7V,QAAAA,IAAI,CAACyB,aAAL,CAAmBoC,GAAnB,CAAuB,UAAA5D,EAAE;AAAA,iBACrBq0B,UAAU,CAAC90B,IAAX,CACIyY,4BAAA,CAACod,0BAAD;AACI1c,YAAAA,GAAG,yBAAuB3Y,IAAI,CAACE,IAA5B,SAAoCD;AACvC0B,YAAAA,YAAY,EAAE1B;AACdq1B,YAAAA,eAAe,EAAEzf;WAHrB,CADJ,CADqB;AAAA,SAAzB;AASH;;;AArBL,SAAK,IAAI/V,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiC,gBAAgB,CAAChC,MAArC,EAA6C,EAAED,CAA/C,EAAkD;AAAA,YAAzCA,CAAyC;AAsBjD;;AACD,WAAOw0B,UAAP;AACH,GA1BwC,EA0BtC,CAACvyB,gBAAD,EAAmB8T,eAAnB,CA1BsC,CAAzC;AA4BA,MAAMquB,cAAc,GAAG7qB,aAAO,CAC1B;AAAA,WAAOzT,iBAAiB,GAAG;AAAEsf,MAAAA,GAAG,EAAEtf,iBAAiB,CAACqM,MAAzB;AAAiCgT,MAAAA,IAAI,EAAErf,iBAAiB,CAACmM;AAAzD,KAAH,GAAuEvT,SAA/F;AAAA,GAD0B,EAE1B,CAACoH,iBAAD,CAF0B,CAA9B;AAKA,MAAMyc,OAAO,GAAGD,WAAS,EAAzB;AACA,SACInK,4BAAA,CAAC8d,IAAD;AACIG,IAAAA,SAAS,EAAE;AACXiO,IAAAA,aAAa;AACb/N,IAAAA,OAAO,EAAEvgB;AACT0gB,IAAAA,kBAAkB,EAAE;AACpBF,IAAAA,IAAI,EAAE,CAAC,CAACzwB;AACRs+B,IAAAA,cAAc,EAAEA;AAChBE,IAAAA,eAAe,EAAC;AAChB/hB,IAAAA,OAAO,EAAE;AAAEzP,MAAAA,IAAI,EAAEyP,OAAO,CAACgiB;AAAhB;GARb,EAUKJ,yBAVL,EAWIhsB,4BAAA,CAACqsB,aAAD;AAAe/P,IAAAA,SAAS,EAAC;AAAM7N,IAAAA,SAAS,EAAErE,OAAO,CAACkiB;GAAlD,EACKR,yBADL,CAXJ,CADJ;AAiBH,CAzE8D,CAAxD;AA2EP,IAAM3hB,WAAS,gBAAGX,sBAAsB,CAAC;AAAA,SAAO;AAC5C4iB,IAAAA,eAAe,EAAE;AACblR,MAAAA,aAAa,EAAE7Q,SAAS,CAAC,CAAD,CADX;AAEb8Q,MAAAA,UAAU,EAAE9Q,SAAS,CAAC,CAAD;AAFR,KAD2B;AAK5CiiB,IAAAA,kBAAkB,EAAE;AAChBvlB,MAAAA,UAAU,EAAEsD,SAAS,CAAC,MAAD,CADL;AAEhBrD,MAAAA,QAAQ,EAAEqD,SAAS,CAAC,OAAD;AAFH;AALwB,GAAP;AAAA,CAAD,CAAxC;;ACjGA;;;;;AAMA,IASakiB,eAAe,gBAAGvsB,cAAK,CAACgL,IAAN,eAC3BhL,cAAK,CAACiL,UAAN,CAAsD,UAACC,KAAD,EAAQzmB,GAAR;AAClD,MAAQ2mC,QAAR,GAAqBlgB,KAArB,CAAQkgB,QAAR;AACA,SACIprB,4BAAA,CAAC4Q,WAAD;AAAansB,IAAAA,GAAG,EAAEA;KAASymB,MAA3B,EACIlL,4BAAA,CAACmc,UAAD,MAAA,CADJ,EAEInc,4BAAA,CAACkhB,WAAD,MAAA,CAFJ,EAGIlhB,4BAAA,CAAC4hB,QAAD;AAAUwJ,IAAAA,QAAQ,EAAEA;GAApB,CAHJ,EAIIprB,4BAAA,CAAC6rB,eAAD,MAAA,CAJJ,CADJ;AAQH,CAVD,CAD2B,CAAxB;AAaPU,eAAe,CAACphB,WAAhB,GAA8B,iBAA9B;;ACJO,IAAMqhB,cAAc,GAAG,SAAjBA,cAAiB,CAC1BhiC,OAD0B,EAE1BiiC,eAF0B;AAI1B,SAAOrrB,aAAO,CAAC;AACX,QAAMlX,aAAa,GAAGM,OAAO,CAACiiC,eAAD,CAA7B;AAEA,QAAMziC,WAAW,GAAG,CAACE,aAAD,CAApB;AAEA,QAAIwiC,QAAQ,GAAGxiC,aAAa,CAACwiC,QAA7B;;AACA,WAAOA,QAAP,EAAiB;AACb,UAAMC,UAAU,GAAGniC,OAAO,CAACkiC,QAAD,CAA1B;;AACA,UAAIC,UAAJ,EAAgB;AACZ3iC,QAAAA,WAAW,CAAC4iC,OAAZ,CAAoBD,UAApB;AACAD,QAAAA,QAAQ,GAAGC,UAAU,CAACD,QAAtB;AACH,OAHD,MAGO;AACH;AACH;AACJ;;AAED,WAAO1iC,WAAP;AACH,GAjBa,EAiBX,CAACyiC,eAAD,EAAkBjiC,OAAlB,CAjBW,CAAd;AAkBH,CAtBM;AAwBP,AAAO,IAAMqiC,QAAQ,GAAG,SAAXA,QAAW,CACpBriC,OADoB,EAEpBiiC,eAFoB;AAIpB,SAAOrrB,aAAO,CAAC;AACX,QAAMlX,aAAa,GAAGM,OAAO,CAACiiC,eAAD,CAA7B;AACA,QAAMK,WAAW,GAAG5iC,aAAa,CAAC4iC,WAAlC;AACA,QAAM59B,KAAK,GAAG49B,WAAW,CAAClhC,GAAZ,CAAgB,UAAChB,MAAD;AAAA,aAAoBJ,OAAO,CAACI,MAAD,CAA3B;AAAA,KAAhB,CAAd;AACA,WAAOsE,KAAP;AACH,GALa,EAKX,CAACu9B,eAAD,EAAkBjiC,OAAlB,CALW,CAAd;AAMH,CAVM;AAYP,AAAO,IAAMuiC,iBAAiB,GAAG,SAApBA,iBAAoB,CAC7BC,WAD6B,EAE7BC,eAF6B;AAI7B,kBAA8BtpC,cAAQ,CAACqpC,WAAD,CAAtC;AAAA,MAAOxiC,OAAP;AAAA,MAAgB0iC,UAAhB;;AACA,mBAA8CvpC,cAAQ,CAACspC,eAAD,CAAtD;AAAA,MAAOR,eAAP;AAAA,MAAwBU,kBAAxB;;AACA,MAAMC,YAAY,GAAG5tB,iBAAW,CAAC;AAC7B0tB,IAAAA,UAAU,CAACF,WAAD,CAAV;AACAG,IAAAA,kBAAkB,CAACF,eAAD,CAAlB;AACH,GAH+B,EAG7B,CAACD,WAAD,EAAcC,eAAd,CAH6B,CAAhC;AAIA,MAAMI,SAAS,GAAG7tB,iBAAW,CACzB,UAACtQ,KAAD,EAAcwjB,MAAd,EAA0BvZ,WAA1B;AAAA,WACI+zB,UAAU,CAAC,UAAAI,cAAc;AACrB,UAAMC,UAAU,gBAAQD,cAAR,CAAhB;;AACA,UAAME,WAAW,GAAG,IAAI7lC,GAAJ,CAAQuH,KAAK,CAACtD,GAAN,CAAU,UAAA0E,CAAC;AAAA,eAAIA,CAAC,CAACtI,EAAN;AAAA,OAAX,CAAR,CAApB;;AAGA,UAAMylC,oBAAoB,GAAG/a,MAAM,CAACoa,WAAP,CAAoBj8B,MAApB,CAA2B,UAAA7I,EAAE;AAAA,eAAI,CAACwlC,WAAW,CAACtlC,GAAZ,CAAgBF,EAAhB,CAAL;AAAA,OAA7B,CAA7B;AACAulC,MAAAA,UAAU,CAAC7a,MAAM,CAAC1qB,EAAR,CAAV,gBACO0qB,MADP;AAEIoa,QAAAA,WAAW,EAAEW,oBAFjB;AAGI1mC,QAAAA,aAAa,EAAE0mC,oBAAoB,CAAC3lC;AAHxC;;AAOA,UAAM4lC,yBAAyB,aAAOv0B,WAAW,CAAC2zB,WAAnB,EAAoC59B,KAAK,CAACtD,GAAN,CAAU,UAAA0E,CAAC;AAAA,eAAIA,CAAC,CAACtI,EAAN;AAAA,OAAX,CAApC,CAA/B;AACAulC,MAAAA,UAAU,CAACp0B,WAAW,CAACnR,EAAb,CAAV,gBACOmR,WADP;AAEI2zB,QAAAA,WAAW,EAAEY,yBAFjB;AAGI3mC,QAAAA,aAAa,EAAE2mC,yBAAyB,CAAC5lC;AAH7C;AAOA;;AACAoH,MAAAA,KAAK,CAACyB,OAAN,CAAc,UAAAtL,IAAI;AACdkoC,QAAAA,UAAU,CAACloC,IAAI,CAAC2C,EAAN,CAAV,gBACO3C,IADP;AAEIqnC,UAAAA,QAAQ,EAAEvzB,WAAW,CAACnR;AAF1B;AAIH,OALD;AAOA,aAAOulC,UAAP;AACH,KA9BS,CADd;AAAA,GADyB,EAiCzB,EAjCyB,CAA7B;AAoCA,MAAMI,OAAO,GAAGvsB,aAAO,CACnB;AAAA,WAAO;AACH8rB,MAAAA,UAAU,EAAVA,UADG;AAEHC,MAAAA,kBAAkB,EAAlBA,kBAFG;AAGHC,MAAAA,YAAY,EAAZA,YAHG;AAIHC,MAAAA,SAAS,EAATA;AAJG,KAAP;AAAA,GADmB,EAOnB,CAACH,UAAD,EAAaC,kBAAb,EAAiCC,YAAjC,EAA+CC,SAA/C,CAPmB,CAAvB;AASA,SAAO;AACH7iC,IAAAA,OAAO,EAAPA,OADG;AAEHiiC,IAAAA,eAAe,EAAfA,eAFG;AAGHkB,IAAAA,OAAO,EAAPA;AAHG,GAAP;AAKH,CA5DM;AA+DP,AAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACD,OAAD;AAChC,SAAOnuB,iBAAW,CACd,UAACnK,IAAD;AACI,QAAIA,IAAI,CAACrN,EAAL,KAAYqL,aAAa,CAAC+E,SAAd,CAAwBpQ,EAAxC,EAA4C;AACxC,0BAA8BqN,IAAI,CAACK,OAAnC;AAAA,UAAQ2C,UAAR,iBAAQA,UAAR;AAAA,UAAoBnJ,KAApB,iBAAoBA,KAApB;AACA,UAAM2+B,UAAU,GAAGx1B,UAAH,WAAGA,UAAH,GAAiBnJ,KAAK,CAAC,CAAD,CAAtC;;AACA,UAAI2+B,UAAU,IAAI1oC,UAAU,CAACC,WAAX,CAAuByoC,UAAvB,CAAlB,EAAsD;AAClDF,QAAAA,OAAO,CAACR,kBAAR,CAA2BU,UAAU,CAAC7lC,EAAtC;AACH;AACJ,KAND,MAMO,IAAIqN,IAAI,CAACrN,EAAL,KAAYqL,aAAa,CAACgG,SAAd,CAAwBrR,EAAxC,EAA4C;AAC/C2lC,MAAAA,OAAO,CAACN,SAAR,CAAkBh4B,IAAI,CAACK,OAAL,CAAaxG,KAA/B,EAAsCmG,IAAI,CAACK,OAAL,CAAagd,MAAnD,EAA4Drd,IAAI,CAACK,OAAL,CAAayD,WAAzE;AACH;AACJ,GAXa,EAYd,CAACw0B,OAAD,CAZc,CAAlB;AAcH,CAfM;AAiBP,AAAO,IAAMG,UAAU,GAAG,SAAbA,UAAa;MACtBd,mBAAAA;MACAC,uBAAAA;;AAEA,2BAA8CF,iBAAiB,CAACC,WAAD,EAAcC,eAAd,CAA/D;AAAA,MAAQziC,OAAR,sBAAQA,OAAR;AAAA,MAAiBiiC,eAAjB,sBAAiBA,eAAjB;AAAA,MAAkCkB,OAAlC,sBAAkCA,OAAlC;;AACA,MAAM3jC,WAAW,GAAGwiC,cAAc,CAAChiC,OAAD,EAAUiiC,eAAV,CAAlC;AACA,MAAMv9B,KAAK,GAAG29B,QAAQ,CAACriC,OAAD,EAAUiiC,eAAV,CAAtB;AACA,MAAMsB,iBAAiB,GAAGH,oBAAoB,CAACD,OAAD,CAA9C;AAEA,MAAMt4B,IAAI,GAAG;AACT7K,IAAAA,OAAO,EAAPA,OADS;AAETiiC,IAAAA,eAAe,EAAfA,eAFS;AAGTziC,IAAAA,WAAW,EAAXA,WAHS;AAITkF,IAAAA,KAAK,EAALA;AAJS,GAAb;AAMA,SAAO;AAAEmG,IAAAA,IAAI,EAAJA,IAAF;AAAQs4B,IAAAA,OAAO,EAAPA,OAAR;AAAiBI,IAAAA,iBAAiB,EAAjBA;AAAjB,GAAP;AACH,CAhBM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
\ No newline at end of file
+{"version":3,"file":"chonky.cjs.development.js","sources":["../src/util/hooks-helpers.ts","../src/util/logger.ts","../src/util/file-helper.ts","../src/redux/files-transforms.ts","../src/action-definitions/option-ids.ts","../src/types/sort.types.ts","../src/redux/selectors.ts","../src/redux/thunks/file-actions.thunks.ts","../src/redux/thunks/dispatchers.thunks.ts","../src/types/file-view.types.ts","../src/types/icons.types.ts","../src/util/helpers.ts","../src/redux/thunks/index.ts","../src/action-definitions/essential.ts","../src/action-definitions/default.ts","../src/action-definitions/extra.ts","../src/action-definitions/index.ts","../src/redux/state.ts","../src/redux/reducers.ts","../src/redux/watchers.ts","../src/redux/store.ts","../src/components/internal/ChonkyIconPlaceholder.tsx","../src/util/default-config.ts","../src/util/i18n.ts","../src/util/icon-helper.ts","../src/util/styles.ts","../src/util/file-browser-handle.ts","../src/components/internal/ChonkyBusinessLogic.tsx","../src/util/dnd-fallback.ts","../src/components/external/FileContextMenu-hooks.ts","../src/types/dnd.types.ts","../src/components/file-list/DnDFileListDragLayer.tsx","../src/components/internal/HotkeyListener.tsx","../src/components/internal/ChonkyPresentationLayer.tsx","../src/components/external/FileBrowser.tsx","../src/components/external/FileNavbar-hooks.ts","../src/util/dnd.ts","../src/components/external/TextPlaceholder.tsx","../src/components/file-list/FileEntry-hooks.tsx","../src/types/action.types.ts","../src/util/file-actions.ts","../src/components/external/ToolbarButton.tsx","../src/components/external/FolderChainButton.tsx","../src/components/external/FileNavbar.tsx","../src/components/external/ToolbarDropdownButton.tsx","../src/components/external/ToolbarDropdown.tsx","../src/components/external/ToolbarInfo.tsx","../src/components/external/ToolbarSearch.tsx","../src/components/external/FileToolbar.tsx","../src/components/file-list/FileListEmpty.tsx","../src/components/internal/ClickableWrapper-hooks.tsx","../src/components/internal/ClickableWrapper.tsx","../src/components/file-list/FileEntryName.tsx","../src/components/file-list/CompactEntry.tsx","../src/components/file-list/DnDFileEntry.tsx","../src/components/file-list/FileThumbnail.tsx","../src/components/file-list/GridEntryDndIndicator.tsx","../src/components/file-list/GridEntryPreview.tsx","../src/components/file-list/GridEntry.tsx","../src/components/file-list/ListEntry.tsx","../src/components/file-list/FileEntry.tsx","../src/components/file-list/GridContainer.tsx","../src/components/file-list/ListContainer.tsx","../src/components/file-list/FileList.tsx","../src/components/external/FileContextMenu.tsx","../src/components/external/FullFileBrowser.tsx","../src/extensions/file-map.ts"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nexport const useDebounce = <T>(\n    value: T,\n    delay: number\n): [T, React.Dispatch<React.SetStateAction<T>>] => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(() => {\n        const handler = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [value, delay]);\n\n    return [debouncedValue, setDebouncedValue];\n};\n\nconst UNINITIALIZED_SENTINEL = {};\nexport const useStaticValue = <T>(factory: () => T): T => {\n    const valueRef = useRef<T>(UNINITIALIZED_SENTINEL as T);\n    if (valueRef.current === UNINITIALIZED_SENTINEL) valueRef.current = factory();\n    return valueRef.current;\n};\n\nexport const useInstanceVariable = <T>(value: T) => {\n    const ref = useRef(value);\n    useEffect(() => {\n        ref.current = value;\n    }, [ref, value]);\n    return ref;\n};\n","export class Logger {\n    public static error(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.error('[Chonky runtime error]', ...args);\n    }\n\n    public static warn(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.warn('[Chonky runtime warning]', ...args);\n    }\n\n    public static debug(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.debug('[Chonky runtime debug]', ...args);\n    }\n\n    public static formatBullets(bullets: string[]): string {\n        return `\\n- ${bullets.join('\\n- ')}`;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from '../types/file.types';\nimport { Logger } from './logger';\n\nexport class FileHelper {\n    public static isDirectory(file: Nullable<FileData>): file is FileData {\n        // Not a directory by default\n        return !!file && file.isDir === true;\n    }\n\n    public static isHidden(file: Nullable<FileData>): file is FileData {\n        // Not hidden by default\n        return !!file && file.isHidden === true;\n    }\n\n    public static isSymlink(file: Nullable<FileData>): file is FileData {\n        // Not a symlink by default\n        return !!file && file.isSymlink === true;\n    }\n\n    public static isEncrypted(file: Nullable<FileData>): file is FileData {\n        // Not encrypted by default\n        return !!file && file.isEncrypted === true;\n    }\n\n    public static isClickable(file: Nullable<FileData>): file is FileData {\n        // Clickable by default\n        return !!file;\n    }\n\n    public static isOpenable(file: Nullable<FileData>): file is FileData {\n        // Openable by default\n        return !!file && file.openable !== false;\n    }\n\n    public static isSelectable(file: Nullable<FileData>): file is FileData {\n        // Selectable by default\n        return !!file && file.selectable !== false;\n    }\n\n    public static isDraggable(file: Nullable<FileData>): file is FileData {\n        // File & folders are draggable by default, `null` is not\n        return !!file && file.draggable !== false;\n    }\n\n    public static isDroppable(file: Nullable<FileData>): file is FileData {\n        // Folders are droppable by default, files are not\n        if (!file) return false;\n        if (file.isDir && file.droppable !== false) return true;\n        return file.droppable === true;\n    }\n\n    public static isDndOpenable(file: Nullable<FileData>): file is FileData {\n        // Folders are DnD openable by default, files are not\n        if (!FileHelper.isOpenable(file)) return false;\n        if (file.isDir && file.dndOpenable !== false) return true;\n        return file.dndOpenable === true;\n    }\n\n    public static getModDate(file: Nullable<FileData>): Nullable<Date> {\n        if (!file || file.modDate === null || file.modDate === undefined) return null;\n        return FileHelper.parseDate(file.modDate);\n    }\n\n    public static parseDate(maybeDate: Date | string | any): Nullable<Date> {\n        if (typeof maybeDate === 'string' || typeof maybeDate === 'number') {\n            // We allow users to provide string and numerical representations of dates.\n            try {\n                return new Date(maybeDate);\n            } catch (error) {\n                Logger.error(\n                    `Could not convert provided string/number into a date: ${error.message} `,\n                    'Invalid value:',\n                    maybeDate\n                );\n            }\n        }\n        if (maybeDate instanceof Date && !isNaN(maybeDate.getTime())) {\n            // We only allow valid dates objects\n            return maybeDate;\n        }\n\n        // If we have an invalid date representation, we just return null.\n        Logger.warn('Unsupported date representation:', maybeDate);\n        return null;\n    }\n\n    public static getChildrenCount(file: Nullable<FileData>): Nullable<number> {\n        if (!file || typeof file.childrenCount !== 'number') return null;\n\n        return file.childrenCount;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileArray } from '../types/file.types';\nimport { Logger } from '../util/logger';\n\ninterface SanitizeFiles {\n    (mode: 'files', rawArray: FileArray | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'folderChain', rawArray: Nullable<FileArray> | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'fileActions', rawArray: FileAction[] | any): {\n        sanitizedArray: FileAction[];\n        errorMessages: string[];\n    };\n}\n\nexport const sanitizeInputArray: SanitizeFiles = (mode: string, rawArray: any[]) => {\n    const sanitizedFiles = [];\n    const errorMessages: string[] = [];\n\n    if ((mode === 'folderChain' || mode === 'fileActions') && !rawArray) {\n        // Do nothing, we allow folder chain to be null.\n    } else if (!Array.isArray(rawArray)) {\n        errorMessages.push(\n            `Expected \"${mode}\" prop to be an array, got \"${typeof rawArray}\" instead.`\n        );\n    } else {\n        let nonObjectFileCount = 0;\n        let missingFieldFileCount = 0;\n        const seenIds = new Set<string>();\n        const duplicateIds = new Set<string>();\n\n        for (let i = 0; i < rawArray.length; ++i) {\n            const item = rawArray[i];\n            if (!item) {\n                if (mode === 'fileActions') nonObjectFileCount++;\n                else sanitizedFiles.push(null);\n            } else if (typeof item !== 'object') {\n                nonObjectFileCount++;\n            } else {\n                if (!item.id || (mode !== 'fileActions' && !item.name)) {\n                    missingFieldFileCount++;\n                } else if (seenIds.has(item.id)) {\n                    duplicateIds.add(item.id);\n                } else {\n                    seenIds.add(item.id);\n                    sanitizedFiles.push(item);\n                }\n            }\n        }\n\n        if (nonObjectFileCount) {\n            errorMessages.push(\n                `Detected ${nonObjectFileCount} file(s) of invalid type. Remember ` +\n                    `that \"files\" array should contain either objects or nulls.`\n            );\n        }\n        if (missingFieldFileCount) {\n            errorMessages.push(\n                `Detected ${missingFieldFileCount} file(s) that are missing the ` +\n                    `required fields. Remember that file object should define an ` +\n                    `\"id\" and a \"name\".`\n            );\n        }\n        if (duplicateIds.size > 0) {\n            const repeatedIdsString = '\"' + Array.from(duplicateIds).join('\", \"') + '\"';\n            errorMessages.push(\n                `Detected ${duplicateIds.size} file IDs that are used multiple ` +\n                    `times. Remember that each file should have a unique IDs. The ` +\n                    `following IDs were seen multiple times: ${repeatedIdsString}`\n            );\n        }\n    }\n\n    if (errorMessages.length > 0) {\n        const errorMessageString = '\\n- ' + errorMessages.join('\\n- ');\n        let arrayString: string;\n        let itemString: string;\n        if (mode === 'folderChain') {\n            arrayString = 'folder chain';\n            itemString = 'files';\n        } else if (mode === 'fileActions') {\n            arrayString = 'file actions';\n            itemString = 'file actions';\n        } else {\n            // mode === 'files'\n            arrayString = 'files';\n            itemString = 'files';\n        }\n\n        Logger.error(\n            `Errors were detected when sanitizing the ${arrayString} array. ` +\n                `Offending ${itemString} were removed from the array. Summary of ` +\n                `validation errors: ${errorMessageString}`\n        );\n    }\n\n    return {\n        sanitizedArray: sanitizedFiles,\n        errorMessages,\n    };\n};\n","/**\n * We have option IDs in a separate file to avoid circular deps...\n */\nexport const OptionIds = {\n    ShowHiddenFiles: 'show_hidden_files',\n    ShowFoldersFirst: 'show_folders_first',\n    DarkMode: 'dark_mode',\n};\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from './file.types';\n\nexport type FileSortKeySelector = (file: Nullable<FileData>) => any;\n\nexport enum SortOrder {\n    ASC = 'asc',\n    DESC = 'desc',\n}\n","import sort from 'fast-sort';\nimport FuzzySearch from 'fuzzy-search';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { createSelector } from '@reduxjs/toolkit';\n\nimport { OptionIds } from '../action-definitions/option-ids';\nimport { FileArray, FileData, FileFilter } from '../types/file.types';\nimport { RootState } from '../types/redux.types';\nimport { FileSortKeySelector, SortOrder } from '../types/sort.types';\nimport { FileHelper } from '../util/file-helper';\n\n// Raw selectors\nexport const selectInstanceId = (state: RootState) => state.instanceId;\nexport const selectExternalFileActionHandler = (state: RootState) => state.externalFileActionHandler;\n\nexport const selectFileActionMap = (state: RootState) => state.fileActionMap;\nexport const selectFileActionIds = (state: RootState) => state.fileActionIds;\nexport const selectFileActionData = (fileActionId: string) => (state: RootState) =>\n    selectFileActionMap(state)[fileActionId];\nexport const selectToolbarItems = (state: RootState) => state.toolbarItems;\nexport const selectContextMenuItems = (state: RootState) => state.contextMenuItems;\n\nexport const selectFolderChain = (state: RootState) => state.folderChain;\nexport const selectCurrentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const currentFolder = folderChain.length > 0 ? folderChain[folderChain.length - 1] : null;\n    return currentFolder;\n};\nexport const selectParentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const parentFolder = folderChain.length > 1 ? folderChain[folderChain.length - 2] : null;\n    return parentFolder;\n};\n\nexport const selectRawFiles = (state: RootState) => state.rawFiles;\nexport const selectFileMap = (state: RootState) => state.fileMap;\nexport const selectCleanFileIds = (state: RootState) => state.cleanFileIds;\nexport const selectFileData = (fileId: Nullable<string>) => (state: RootState) =>\n    fileId ? selectFileMap(state)[fileId] : null;\n\nexport const selectHiddenFileIdMap = (state: RootState) => state.hiddenFileIdMap;\nexport const selectHiddenFileCount = (state: RootState) => Object.keys(selectHiddenFileIdMap(state)).length;\n\nexport const selectFocusSearchInput = (state: RootState) => state.focusSearchInput;\nexport const selectSearchString = (state: RootState) => state.searchString;\n\nexport const selectSelectionMap = (state: RootState) => state.selectionMap;\nexport const selectSelectedFileIds = (state: RootState) => Object.keys(selectSelectionMap(state));\nexport const selectSelectionSize = (state: RootState) => selectSelectedFileIds(state).length;\nexport const selectIsFileSelected = (fileId: Nullable<string>) => (state: RootState) =>\n    !!fileId && !!selectSelectionMap(state)[fileId];\nexport const selectSelectedFiles = (state: RootState) => {\n    const fileMap = selectFileMap(state);\n    return Object.keys(selectSelectionMap(state)).map(id => fileMap[id]);\n};\nexport const selectSelectedFilesForAction = (fileActionId: string) => (state: RootState) => {\n    const { fileActionMap } = state;\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.requiresSelection) return undefined;\n\n    return getSelectedFiles(state, action.fileFilter);\n};\nexport const selectSelectedFilesForActionCount = (fileActionId: string) => (state: RootState) =>\n    getSelectedFilesForAction(state, fileActionId)?.length;\nexport const selectDisableSelection = (state: RootState) => state.disableSelection;\n\nexport const selectFileViewConfig = (state: RootState) => state.fileViewConfig;\n\nexport const selectSortActionId = (state: RootState) => state.sortActionId;\nexport const selectSortOrder = (state: RootState) => state.sortOrder;\n\nexport const selectOptionMap = (state: RootState) => state.optionMap;\nexport const selectOptionValue = (optionId: string) => (state: RootState) => selectOptionMap(state)[optionId];\n\nexport const selectThumbnailGenerator = (state: RootState) => state.thumbnailGenerator;\nexport const selectDoubleClickDelay = (state: RootState) => state.doubleClickDelay;\nexport const selectIsDnDDisabled = (state: RootState) => state.disableDragAndDrop;\nexport const selectClearSelectionOnOutsideClick = (state: RootState) => state.clearSelectionOnOutsideClick;\n\nexport const selectContextMenuMounted = (state: RootState) => state.contextMenuMounted;\nexport const selectContextMenuConfig = (state: RootState) => state.contextMenuConfig;\nexport const selectContextMenuTriggerFile = (state: RootState) => {\n    const config = selectContextMenuConfig(state);\n    if (!config || !config.triggerFileId) return null;\n    const fileMap = selectFileMap(state);\n    return fileMap[config.triggerFileId] ?? null;\n};\n\n// Raw selectors\nconst getFileActionMap = (state: RootState) => state.fileActionMap;\nconst getOptionMap = (state: RootState) => state.optionMap;\nconst getFileMap = (state: RootState) => state.fileMap;\nconst getFileIds = (state: RootState) => state.fileIds;\nconst getCleanFileIds = (state: RootState) => state.cleanFileIds;\nconst getSortActionId = (state: RootState) => state.sortActionId;\nconst getSortOrder = (state: RootState) => state.sortOrder;\nconst getSearchString = (state: RootState) => state.searchString;\nconst _getLastClick = (state: RootState) => state.lastClick;\n\n// Memoized selectors\nconst makeGetAction = (fileActionSelector: (state: RootState) => Nullable<string>) =>\n    createSelector([getFileActionMap, fileActionSelector], (fileActionMap, fileActionId) =>\n        fileActionId && fileActionMap[fileActionId] ? fileActionMap[fileActionId] : null\n    );\nconst makeGetOptionValue = (optionId: string, defaultValue: any = undefined) =>\n    createSelector([getOptionMap], optionMap => {\n        const value = optionMap[optionId];\n        if (value === undefined) {\n            return defaultValue;\n        }\n        return value;\n    });\nconst makeGetFiles = (fileIdsSelector: (state: RootState) => Nullable<string>[]) =>\n    createSelector(\n        [getFileMap, fileIdsSelector],\n        (fileMap, fileIds): FileArray => fileIds.map(fileId => (fileId && fileMap[fileId] ? fileMap[fileId] : null))\n    );\nconst getSortedFileIds = createSelector(\n    [\n        getFileIds,\n        getSortOrder,\n        makeGetFiles(getFileIds),\n        makeGetAction(getSortActionId),\n        makeGetOptionValue(OptionIds.ShowFoldersFirst, false),\n    ],\n    (fileIds, sortOrder, files, sortAction, showFolderFirst) => {\n        if (!sortAction) {\n            // We allow users to set the sort action ID to `null` if they want to use their\n            // own sorting mechanisms instead of relying on Chonky built-in sort.\n            return fileIds;\n        }\n\n        const prepareSortKeySelector = (selector: FileSortKeySelector) => (file: Nullable<FileData>) => selector(file);\n\n        const sortFunctions: {\n            asc?: (file: FileData) => any;\n            desc?: (file: FileData) => any;\n        }[] = [];\n\n        if (showFolderFirst) {\n            // If option is undefined (relevant actions is not enabled), we don't show\n            // folders first.\n            sortFunctions.push({\n                desc: prepareSortKeySelector(FileHelper.isDirectory),\n            });\n        }\n        if (sortAction.sortKeySelector) {\n            const configKeyName = sortOrder === SortOrder.ASC ? 'asc' : 'desc';\n            sortFunctions.push({\n                [configKeyName]: prepareSortKeySelector(sortAction.sortKeySelector),\n            });\n        }\n        if (sortFunctions.length === 0) return fileIds;\n\n        // We copy the array because `fast-sort` mutates it\n        const sortedFileIds = sort([...files])\n            .by(sortFunctions as any)\n            .map(file => (file ? file.id : null));\n        return sortedFileIds;\n    }\n);\nconst getSearcher = createSelector(\n    [makeGetFiles(getCleanFileIds)],\n    cleanFiles => new FuzzySearch(cleanFiles as FileData[], ['name'], { caseSensitive: false })\n);\nconst getSearchFilteredFileIds = createSelector(\n    [getCleanFileIds, getSearchString, getSearcher],\n    (cleanFileIds, searchString, searcher) =>\n        searchString ? searcher.search(searchString).map(f => f.id) : cleanFileIds\n);\nconst getHiddenFileIdMap = createSelector(\n    [getSearchFilteredFileIds, makeGetFiles(getCleanFileIds), makeGetOptionValue(OptionIds.ShowHiddenFiles)],\n    (searchFilteredFileIds, cleanFiles, showHiddenFiles) => {\n        const searchFilteredFileIdsSet = new Set(searchFilteredFileIds);\n        const hiddenFileIdMap: any = {};\n        cleanFiles.forEach(file => {\n            if (!file) return;\n            else if (!searchFilteredFileIdsSet.has(file.id)) {\n                // Hidden by seach\n                hiddenFileIdMap[file.id] = true;\n            } else if (!showHiddenFiles && FileHelper.isHidden(file)) {\n                // Hidden by options\n                hiddenFileIdMap[file.id] = true;\n            }\n        });\n        return hiddenFileIdMap;\n    }\n);\nconst getDisplayFileIds = createSelector(\n    [getSortedFileIds, getHiddenFileIdMap],\n    /** Returns files that will actually be shown to the user. */\n    (sortedFileIds, hiddenFileIdMap) => sortedFileIds.filter(id => !id || !hiddenFileIdMap[id])\n);\nconst getLastClickIndex = createSelector(\n    [_getLastClick, getSortedFileIds],\n    /** Returns the last click index after ensuring it is actually still valid. */\n    (lastClick, displayFileIds) => {\n        if (\n            !lastClick ||\n            lastClick.index > displayFileIds.length - 1 ||\n            lastClick.fileId != displayFileIds[lastClick.index]\n        ) {\n            return null;\n        }\n        return lastClick.index;\n    }\n);\n\nexport const selectors = {\n    // Raw selectors\n    getFileActionMap,\n    getOptionMap,\n    getFileMap,\n    getFileIds,\n    getCleanFileIds,\n    getSortActionId,\n    getSortOrder,\n    getSearchString,\n    _getLastClick,\n\n    // Memoized selectors\n    getSortedFileIds,\n    getSearcher,\n    getSearchFilteredFileIds,\n    getHiddenFileIdMap,\n    getDisplayFileIds,\n    getLastClickIndex,\n\n    // Parametrized selectors\n    makeGetAction,\n    makeGetOptionValue,\n    makeGetFiles,\n};\n\n// Selectors meant to be used outside of Redux code\nexport const getFileData = (state: RootState, fileId: Nullable<string>) =>\n    fileId ? selectFileMap(state)[fileId] : null;\nexport const getIsFileSelected = (state: RootState, file: FileData) => {\n    // !!! We deliberately don't use `FileHelper.isSelectable` here as we want to\n    //     reflect the state of Redux store accurately.\n    return !!selectSelectionMap(state)[file.id];\n};\nexport const getSelectedFiles = (state: RootState, ...filters: Nilable<FileFilter>[]) => {\n    const { fileMap, selectionMap } = state;\n\n    const selectedFiles = Object.keys(selectionMap).map(id => fileMap[id]);\n    const filteredSelectedFiles = filters.reduce(\n        (prevFiles, filter) => (filter ? prevFiles.filter(filter) : prevFiles),\n        selectedFiles\n    );\n    return filteredSelectedFiles;\n};\nexport const getSelectedFilesForAction = (state: RootState, fileActionId: string) =>\n    selectSelectedFilesForAction(fileActionId)(state);\n","import { Nilable } from 'tsdef';\n\nimport { ChonkyActions, DefaultFileActions, EssentialFileActions } from '../../action-definitions/index';\nimport { FileActionGroup, FileActionMenuItem } from '../../types/action-menus.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyThunk } from '../../types/redux.types';\nimport { SortOrder } from '../../types/sort.types';\nimport { sanitizeInputArray } from '../files-transforms';\nimport { reduxActions } from '../reducers';\nimport { selectCleanFileIds, selectFileMap, selectHiddenFileIdMap, selectSelectionMap } from '../selectors';\n\n/**\n * Merges multiple file action arrays into one while removing duplicates\n */\nconst mergeFileActionsArrays = (...fileActionArrays: FileAction[][]): FileAction[] => {\n    const seenActionIds = new Set<string>();\n    const addToSeen = (a: FileAction) => !!seenActionIds.add(a.id);\n    const wasNotSeen = (a: FileAction) => !seenActionIds.has(a.id);\n\n    const duplicateFreeArrays = fileActionArrays.map(arr => {\n        const duplicateFreeArray = arr.filter(wasNotSeen);\n        duplicateFreeArray.map(addToSeen);\n        return duplicateFreeArray;\n    });\n    return new Array<FileAction>().concat(...duplicateFreeArrays);\n};\n\nexport const thunkUpdateRawFileActions = (\n    rawFileActions: FileAction[] | any,\n    disableDefaultFileActions: Nilable<boolean | string[]>\n): ChonkyThunk => dispatch => {\n    const { sanitizedArray, errorMessages } = sanitizeInputArray('fileActions', rawFileActions);\n\n    // Add default actions unless user disabled them\n    let defaultActionsToAdd: FileAction[];\n    if (Array.isArray(disableDefaultFileActions)) {\n        const disabledActionIds = new Set(disableDefaultFileActions);\n        defaultActionsToAdd = DefaultFileActions.filter(action => !disabledActionIds.has(action.id));\n    } else if (disableDefaultFileActions) {\n        defaultActionsToAdd = [];\n    } else {\n        defaultActionsToAdd = DefaultFileActions;\n    }\n\n    const fileActions = mergeFileActionsArrays(sanitizedArray, EssentialFileActions, defaultActionsToAdd);\n    const optionDefaults: any = {};\n    fileActions.map(a => (a.option ? (optionDefaults[a.option.id] = a.option.defaultValue) : null));\n\n    dispatch(reduxActions.setRawFileActions(rawFileActions));\n    dispatch(reduxActions.setFileActionsErrorMessages(errorMessages));\n    dispatch(reduxActions.setFileActions(fileActions));\n    dispatch(reduxActions.setOptionDefaults(optionDefaults));\n    dispatch(thunkUpdateToolbarNContextMenuItems(fileActions));\n};\n\nexport const thunkUpdateToolbarNContextMenuItems = (fileActions: FileAction[]): ChonkyThunk => dispatch => {\n    const excludedToolbarFileActionIds = new Set<string>([\n        // TODO: Move decision to exclude actions somewhere else, as users' custom\n        //  components might not give these actions special treatment like Chonky does.\n        ChonkyActions.OpenParentFolder.id,\n    ]);\n\n    type SeenGroupMap = { [groupName: string]: FileActionGroup };\n\n    const toolbarItems: FileActionMenuItem[] = [];\n    const seenToolbarGroups: SeenGroupMap = {};\n\n    const contextMenuItems: FileActionMenuItem[] = [];\n    const seenContextMenuGroups: SeenGroupMap = {};\n\n    const getGroup = (itemArray: FileActionMenuItem[], seenMap: SeenGroupMap, groupName: string): FileActionGroup => {\n        if (seenMap[groupName]) return seenMap[groupName];\n        const group: FileActionGroup = { name: groupName, fileActionIds: [] };\n        itemArray.push(group);\n        seenMap[groupName] = group;\n        return group;\n    };\n\n    for (const action of fileActions) {\n        const button = action.button;\n        if (!button) continue;\n\n        if (button.toolbar && !excludedToolbarFileActionIds.has(action.id)) {\n            if (button.group) {\n                const group = getGroup(toolbarItems, seenToolbarGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                toolbarItems.push(action.id);\n            }\n        }\n\n        if (button.contextMenu) {\n            if (button.group) {\n                const group = getGroup(contextMenuItems, seenContextMenuGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                contextMenuItems.push(action.id);\n            }\n        }\n    }\n\n    dispatch(reduxActions.updateFileActionMenuItems([toolbarItems, contextMenuItems]));\n};\n\nexport const thunkUpdateDefaultFileViewActionId = (fileActionId: Nilable<string>): ChonkyThunk => (\n    dispatch,\n    getState\n) => {\n    const { fileActionMap } = getState();\n    const action = fileActionId ? fileActionMap[fileActionId] : null;\n    if (action && action.fileViewConfig) {\n        dispatch(reduxActions.setFileViewConfig(action.fileViewConfig));\n    }\n};\n\nexport const thunkActivateSortAction = (fileActionId: Nilable<string>): ChonkyThunk => (dispatch, getState) => {\n    if (!fileActionId) return;\n\n    const { sortActionId: oldActionId, sortOrder: oldOrder, fileActionMap } = getState();\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.sortKeySelector) return;\n\n    let order = oldOrder === SortOrder.ASC ? SortOrder.DESC : SortOrder.ASC;\n    if (oldActionId !== fileActionId) {\n        order = SortOrder.ASC;\n    }\n\n    dispatch(reduxActions.setSort({ actionId: fileActionId, order: order }));\n};\n\nexport const thunkApplySelectionTransform = (action: FileAction): ChonkyThunk => (dispatch, getState) => {\n    const selectionTransform = action.selectionTransform;\n    if (!selectionTransform) return;\n\n    const state = getState();\n    const prevSelection = new Set<string>(Object.keys(selectSelectionMap(state)));\n    const hiddenFileIds = new Set<string>(Object.keys(selectHiddenFileIdMap(state)));\n\n    const newSelection = selectionTransform({\n        prevSelection,\n        fileIds: selectCleanFileIds(state),\n        fileMap: selectFileMap(state),\n        hiddenFileIds,\n    });\n    if (!newSelection) return;\n\n    if (newSelection.size === 0) {\n        dispatch(reduxActions.clearSelection());\n    } else {\n        dispatch(reduxActions.selectFiles({ fileIds: Array.from(newSelection), reset: true }));\n    }\n};\n","import { MaybePromise, Undefinable } from 'tsdef';\n\nimport { FileActionData, FileActionState } from '../../types/action-handler.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyDispatch, ChonkyThunk } from '../../types/redux.types';\nimport { Logger } from '../../util/logger';\nimport { reduxActions } from '../reducers';\nimport {\n    selectContextMenuTriggerFile, selectExternalFileActionHandler, selectFileActionMap,\n    selectInstanceId, selectSelectedFiles\n} from '../selectors';\nimport { thunkActivateSortAction, thunkApplySelectionTransform } from './file-actions.thunks';\n\n/**\n * Thunk that dispatches actions to the external (user-provided) action handler.\n */\nexport const thunkDispatchFileAction = (data: FileActionData<FileAction>): ChonkyThunk => (_dispatch, getState) => {\n    Logger.debug(`FILE ACTION DISPATCH: [${data.id}]`, 'data:', data);\n    const state = getState();\n    const action = selectFileActionMap(state)[data.id];\n    const externalFileActionHandler = selectExternalFileActionHandler(state);\n    if (action) {\n        if (externalFileActionHandler) {\n            Promise.resolve(externalFileActionHandler(data)).catch(error =>\n                Logger.error(`User-defined file action handler threw an error: ${error.message}`)\n            );\n        }\n    } else {\n        Logger.warn(\n            `Internal components dispatched the \"${data.id}\" file action, but such ` + `action was not registered.`\n        );\n    }\n};\n\n/**\n * Thunk that is used by internal components (and potentially the user) to \"request\"\n * actions. When action is requested, Chonky \"prepares\" the action data by extracting it\n * from Redux state. Once action data is ready, Chonky executes some side effect and/or\n * dispatches the action to the external action handler.\n */\nexport const thunkRequestFileAction = <Action extends FileAction>(\n    action: Action,\n    payload: Action['__payloadType']\n): ChonkyThunk => (dispatch, getState) => {\n    Logger.debug(`FILE ACTION REQUEST: [${action.id}]`, 'action:', action, 'payload:', payload);\n    const state = getState();\n    const instanceId = selectInstanceId(state);\n\n    if (!selectFileActionMap(state)[action.id]) {\n        Logger.warn(\n            `The action \"${action.id}\" was requested, but it is not registered. The ` +\n                `action will still be dispatched, but this might indicate a bug in ` +\n                `the code. Please register your actions by passing them to ` +\n                `\"fileActions\" prop.`\n        );\n    }\n\n    // Determine files for the action if action requires selection\n    const selectedFiles = selectSelectedFiles(state);\n    const selectedFilesForAction = action.fileFilter ? selectedFiles.filter(action.fileFilter) : selectedFiles;\n    if (action.requiresSelection && selectedFilesForAction.length === 0) {\n        Logger.warn(\n            `Internal components requested the \"${action.id}\" file ` +\n                `action, but the selection for this action was empty. This ` +\n                `might a bug in the code of the presentational components.`\n        );\n        return;\n    }\n\n    const contextMenuTriggerFile = selectContextMenuTriggerFile(state);\n    const actionState: FileActionState<{}> = {\n        instanceId,\n        selectedFiles,\n        selectedFilesForAction,\n        contextMenuTriggerFile,\n    };\n\n    // === Update sort state if necessary\n    const sortKeySelector = action.sortKeySelector;\n    if (sortKeySelector) dispatch(thunkActivateSortAction(action.id));\n\n    // === Update file view state if necessary\n    const fileViewConfig = action.fileViewConfig;\n    if (fileViewConfig) dispatch(reduxActions.setFileViewConfig(fileViewConfig));\n\n    // === Update option state if necessary\n    const option = action.option;\n    if (option) dispatch(reduxActions.toggleOption(option.id));\n\n    // === Apply selection transform if necessary\n    const selectionTransform = action.selectionTransform;\n    if (selectionTransform) dispatch(thunkApplySelectionTransform(action));\n\n    // Apply the effect\n    const effect = action.effect;\n    let maybeEffectPromise: MaybePromise<boolean | undefined> = undefined;\n    if (effect) {\n        try {\n            maybeEffectPromise = effect({\n                action,\n                payload,\n                state: actionState,\n                reduxDispatch: dispatch,\n                getReduxState: getState,\n            }) as MaybePromise<boolean | undefined>;\n        } catch (error) {\n            Logger.error(`User-defined effect function for action ${action.id} threw an ` + `error: ${error.message}`);\n        }\n    }\n\n    // Dispatch the action to user code. Deliberately call it after all other\n    // operations are over.\n    return Promise.resolve(maybeEffectPromise)\n        .then(effectResult => {\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, effectResult);\n        })\n        .catch(error => {\n            Logger.error(\n                `User-defined effect function for action ${action.id} returned a ` +\n                    `promise that was rejected: ${error.message}`\n            );\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, undefined);\n        });\n};\n\nexport const triggerDispatchAfterEffect = <Action extends FileAction>(\n    dispatch: ChonkyDispatch,\n    data: FileActionData<Action>,\n    effectResult: Undefinable<boolean>\n) => {\n    const preventDispatch = effectResult === true;\n    if (!preventDispatch) dispatch(thunkDispatchFileAction(data));\n};\n","export enum FileViewMode {\n    List = 'list',\n    Compact = 'compact',\n    Grid = 'grid',\n}\n\nexport type FileViewConfigList = {\n    mode: FileViewMode.List;\n    entryHeight: number;\n};\n\nexport type FileViewConfigGrid = {\n    mode: FileViewMode.Compact | FileViewMode.Grid;\n    entryWidth: number;\n    entryHeight: number;\n};\n\nexport type FileViewConfig = FileViewConfigList | FileViewConfigGrid;\n","import React from 'react';\n\nexport enum ChonkyIconName {\n    // Misc\n    loading = 'loading',\n    dropdown = 'dropdown',\n    placeholder = 'placeholder',\n\n    // File Actions: Drag & drop\n    dndDragging = 'dndDragging',\n    dndCanDrop = 'dndCanDrop',\n    dndCannotDrop = 'dndCannotDrop',\n\n    // File Actions: File operations\n    openFiles = 'openFiles',\n    openParentFolder = 'openParentFolder',\n    copy = 'copy',\n    paste = 'paste',\n    share = 'share',\n    search = 'search',\n    selectAllFiles = 'selectAllFiles',\n    clearSelection = 'clearSelection',\n\n    // File Actions: Sorting & options\n    sortAsc = 'sortAsc',\n    sortDesc = 'sortDesc',\n    toggleOn = 'toggleOn',\n    toggleOff = 'toggleOff',\n\n    // File Actions: File Views\n    list = 'list',\n    compact = 'compact',\n    smallThumbnail = 'smallThumbnail',\n    largeThumbnail = 'largeThumbnail',\n\n    // File Actions: Unsorted\n    folder = 'folder',\n    folderCreate = 'folderCreate',\n    folderOpen = 'folderOpen',\n    folderChainSeparator = 'folderChainSeparator',\n    download = 'download',\n    upload = 'upload',\n    trash = 'trash',\n    fallbackIcon = 'fallbackIcon',\n\n    // File modifiers\n    symlink = 'symlink',\n    hidden = 'hidden',\n\n    // Generic file types\n    file = 'file',\n    license = 'license',\n    code = 'code',\n    config = 'config',\n    model = 'model',\n    database = 'database',\n    text = 'text',\n    archive = 'archive',\n    image = 'image',\n    video = 'video',\n    info = 'info',\n    key = 'key',\n    lock = 'lock',\n    music = 'music',\n    terminal = 'terminal',\n    users = 'users',\n\n    // OS file types\n    linux = 'linux',\n    ubuntu = 'ubuntu',\n    windows = 'windows',\n\n    // Programming language file types\n    rust = 'rust',\n    python = 'python',\n    nodejs = 'nodejs',\n    php = 'php',\n\n    // Development tools file types\n    git = 'git',\n\n    // Brands file types\n    adobe = 'adobe',\n\n    // Other program file types\n    pdf = 'pdf',\n    excel = 'excel',\n    word = 'word',\n    flash = 'flash',\n}\n\nexport interface FileIconData {\n    icon: ChonkyIconName | string;\n    colorCode: number;\n}\n\nexport interface ChonkyIconProps {\n    icon: ChonkyIconName | string;\n    spin?: boolean;\n    className?: string;\n    fixedWidth?: boolean;\n    style?: React.CSSProperties;\n}\n","// Used in React hooks to indicate empty deps are intentional.\nimport { MaybePromise, Nullable, WritableProps } from 'tsdef';\n\nimport { FileAction, FileActionEffect } from '../types/action.types';\nimport { Logger } from './logger';\n\n// Used in contexts that need to provide some default value for a function.\n// eslint-disable-next-line no-unused-vars,@typescript-eslint/no-unused-vars\nexport const NOOP_FUNCTION = (...args: any[]) => {\n    Logger.warn(\n        `The \"NOOP_FUNCTION\" from the constants module was called. ` +\n            `This can indicate a bug in one of the components. Supplied args:`,\n        args\n    );\n};\n\nexport const isPromise = <T>(value: MaybePromise<T> | any): value is Promise<T> => {\n    if (typeof value !== 'object' || !value) return false;\n    const then = (value as Promise<T>).then;\n    return then && typeof then === 'function';\n};\n\nexport const defineFileAction = <Action extends FileAction>(\n    action: Action,\n    effect?: FileActionEffect<FileAction>\n): WritableProps<Action> => {\n    if (action.__payloadType !== undefined && (action.hotkeys || action.button)) {\n        const errorMessage =\n            `Invalid definition was provided for file action \"${action.id}\". Actions ` +\n            `that specify hotkeys or buttons cannot define a payload type. If ` +\n            `your application requires this functionality, define two actions ` +\n            `and chain them using effects.`;\n        Logger.error(errorMessage);\n        throw new Error(errorMessage);\n    }\n\n    action.effect = effect;\n    return action;\n};\n\n/**\n * Recursively check the current element and the parent elements, going bottom-up.\n * Returns the first element to match the predicate, otherwise returns null if such\n * element is not found.\n */\nexport const findElementAmongAncestors = (\n    maybeElement: HTMLElement | any,\n    predicate: (maybeElement: HTMLElement | any) => boolean\n): Nullable<HTMLElement> => {\n    if (!maybeElement) return maybeElement;\n\n    if (predicate(maybeElement)) return maybeElement;\n\n    if (maybeElement.parentElement) {\n        return findElementAmongAncestors(maybeElement.parentElement, predicate);\n    }\n\n    return null;\n};\n\nexport const elementIsInsideButton = (buttonCandidate: HTMLElement | any): boolean => {\n    return !!findElementAmongAncestors(\n        buttonCandidate,\n        (element: any) => element.tagName && element.tagName.toLowerCase() === 'button'\n    );\n};\n\nexport const getValueOrFallback = <T extends any>(\n    value: T | undefined,\n    fallback: T,\n    desiredType?: 'boolean' | 'string' | 'number'\n): NonNullable<T> => {\n    if (desiredType) {\n        return (typeof value === desiredType ? value : fallback) as NonNullable<T>;\n    }\n    return (value !== undefined ? value : fallback) as NonNullable<T>;\n};\n","import { ChonkyThunk } from '../../types/redux.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { reduxActions } from '../reducers';\nimport { selectors } from '../selectors';\n\nexport const reduxThunks = {\n    selectRange: (params: {\n        rangeStart: number;\n        rangeEnd: number;\n        reset?: boolean;\n    }): ChonkyThunk => (dispatch, getState) => {\n        const state = getState();\n        if (state.disableSelection) return;\n        const displayFileIds = selectors.getDisplayFileIds(state);\n        const fileIdsToSelect = displayFileIds\n            .slice(params.rangeStart, params.rangeEnd + 1)\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id])) as string[];\n        dispatch(\n            reduxActions.selectFiles({\n                fileIds: fileIdsToSelect,\n                reset: !!params.reset,\n            })\n        );\n    },\n};\n","import { reduxActions } from '../redux/reducers';\nimport {\n    getFileData, getIsFileSelected, selectDisableSelection, selectors, selectParentFolder,\n    selectSelectionSize\n} from '../redux/selectors';\nimport { reduxThunks } from '../redux/thunks';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport {\n    ChangeSelectionPayload, EndDragNDropPayload, KeyboardClickFilePayload, MouseClickFilePayload,\n    MoveFilesPayload, OpenFileContextMenuPayload, OpenFilesPayload, StartDragNDropPayload\n} from '../types/action-payloads.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { Logger } from '../util/logger';\nimport { ChonkyActions } from './index';\n\nexport const EssentialActions = {\n    /**\n     * Action that is dispatched when the user clicks on a file entry using their mouse.\n     * Both single clicks and double clicks trigger this action.\n     */\n    MouseClickFile: defineFileAction(\n        {\n            id: 'mouse_click_file',\n            __payloadType: {} as MouseClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (payload.clickType === 'double') {\n                if (FileHelper.isOpenable(payload.file)) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n\n                            // To simulate Windows Explorer and Nautilus behaviour,\n                            // a double click on a file only opens that file even if\n                            // there is a selection.\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else {\n                // We're dealing with a single click\n\n                const disableSelection = selectDisableSelection(getReduxState());\n                if (FileHelper.isSelectable(payload.file) && !disableSelection) {\n                    if (payload.ctrlKey) {\n                        // Multiple selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: false,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    } else if (payload.shiftKey) {\n                        // Range selection\n                        const lastClickIndex = selectors.getLastClickIndex(getReduxState());\n                        if (typeof lastClickIndex === 'number') {\n                            // We have the index of the previous click\n                            let rangeStart = lastClickIndex;\n                            let rangeEnd = payload.fileDisplayIndex;\n                            if (rangeStart > rangeEnd) {\n                                [rangeStart, rangeEnd] = [rangeEnd, rangeStart];\n                            }\n\n                            reduxDispatch(reduxThunks.selectRange({ rangeStart, rangeEnd }));\n                        } else {\n                            // Since we can't do a range selection, do a\n                            // multiple selection\n                            reduxDispatch(\n                                reduxActions.toggleSelection({\n                                    fileId: payload.file.id,\n                                    exclusive: false,\n                                })\n                            );\n                            reduxDispatch(\n                                reduxActions.setLastClickIndex({\n                                    index: payload.fileDisplayIndex,\n                                    fileId: payload.file.id,\n                                })\n                            );\n                        }\n                    } else {\n                        // Exclusive selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: true,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    }\n                } else {\n                    if (!payload.ctrlKey && !disableSelection) {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                    reduxDispatch(\n                        reduxActions.setLastClickIndex({\n                            index: payload.fileDisplayIndex,\n                            fileId: payload.file.id,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when the user \"clicks\" on a file using their keyboard.\n     * Using Space and Enter keys counts as clicking.\n     */\n    KeyboardClickFile: defineFileAction(\n        {\n            id: 'keyboard_click_file',\n            __payloadType: {} as KeyboardClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            reduxDispatch(\n                reduxActions.setLastClickIndex({\n                    index: payload.fileDisplayIndex,\n                    fileId: payload.file.id,\n                })\n            );\n            if (payload.enterKey) {\n                // We only dispatch the Open Files action here when the selection is\n                // empty. Otherwise, `Enter` key presses are handled by the\n                // hotkey manager for the Open Files action.\n                if (selectSelectionSize(getReduxState()) === 0) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else if (payload.spaceKey && FileHelper.isSelectable(payload.file)) {\n                reduxDispatch(\n                    reduxActions.toggleSelection({\n                        fileId: payload.file.id,\n                        exclusive: payload.ctrlKey,\n                    })\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user starts dragging some file.\n     */\n    StartDragNDrop: defineFileAction(\n        {\n            id: 'start_drag_n_drop',\n            __payloadType: {} as StartDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            const file = payload.draggedFile;\n            if (!getIsFileSelected(getReduxState(), file)) {\n                if (FileHelper.isSelectable(file)) {\n                    reduxDispatch(\n                        reduxActions.selectFiles({\n                            fileIds: [file.id],\n                            reset: true,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user either cancels the drag & drop interaction,\n     * or drops a file somewhere.\n     */\n    EndDragNDrop: defineFileAction(\n        {\n            id: 'end_drag_n_drop',\n            __payloadType: {} as EndDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (getIsFileSelected(getReduxState(), payload.destination)) {\n                // Can't drop a selection into itself\n                return;\n            }\n\n            const { draggedFile, selectedFiles } = payload as EndDragNDropPayload;\n            const droppedFiles = selectedFiles.length > 0 ? selectedFiles : [draggedFile];\n            reduxDispatch(\n                thunkRequestFileAction(ChonkyActions.MoveFiles, {\n                    ...payload,\n                    files: droppedFiles,\n                })\n            );\n        }\n    ),\n    /**\n     * Action that is dispatched when user moves files from one folder to another,\n     * usually by dragging & dropping some files into the folder.\n     */\n    MoveFiles: defineFileAction({\n        id: 'move_files',\n        __payloadType: {} as MoveFilesPayload,\n    } as const),\n    /**\n     * Action that is dispatched when the selection changes for any reason.\n     */\n    ChangeSelection: defineFileAction({\n        id: 'change_selection',\n        __payloadType: {} as ChangeSelectionPayload,\n    } as const),\n    /**\n     * Action that is dispatched when user wants to open some files. This action is\n     * often triggered by other actions.\n     */\n    OpenFiles: defineFileAction({\n        id: 'open_files',\n        __payloadType: {} as OpenFilesPayload,\n    } as const),\n    /**\n     * Action that is triggered when user wants to go up a directory.\n     */\n    OpenParentFolder: defineFileAction(\n        {\n            id: 'open_parent_folder',\n            hotkeys: ['backspace'],\n            button: {\n                name: 'Go up a directory',\n                toolbar: true,\n                contextMenu: false,\n                icon: ChonkyIconName.openParentFolder,\n                iconOnly: true,\n            },\n        } as const,\n        ({ reduxDispatch, getReduxState }) => {\n            const parentFolder = selectParentFolder(getReduxState());\n            if (FileHelper.isOpenable(parentFolder)) {\n                reduxDispatch(\n                    thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                        targetFile: parentFolder,\n                        files: [parentFolder],\n                    })\n                );\n            } else {\n                Logger.warn(\n                    'Open parent folder effect was triggered  even though the parent folder' +\n                        ' is not openable. This indicates a bug in presentation components.'\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user opens the context menu, either by right click\n     * on something or using the context menu button on their keyboard.\n     */\n    OpenFileContextMenu: defineFileAction(\n        {\n            id: 'open_file_context_menu',\n            __payloadType: {} as OpenFileContextMenuPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            // TODO: Check if the context menu component is actually enabled. There is a\n            //  chance it doesn't matter if it is enabled or not - if it is not mounted,\n            //  the action will simply have no effect. It also allows users to provide\n            //  their own components - however, users could also flip the \"context menu\n            //  component mounted\" switch...\n            const triggerFile = getFileData(getReduxState(), payload.triggerFileId);\n            if (triggerFile) {\n                const fileSelected = getIsFileSelected(getReduxState(), triggerFile);\n                if (!fileSelected) {\n                    // If file is selected, we leave the selection as is. If it is not\n                    // selected, it means user right clicked the file with no selection.\n                    // We simulate the Windows Explorer/Nautilus behaviour of moving\n                    // selection to this file.\n                    if (FileHelper.isSelectable(triggerFile)) {\n                        reduxDispatch(\n                            reduxActions.selectFiles({\n                                fileIds: [payload.triggerFileId],\n                                reset: true,\n                            })\n                        );\n                    } else {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                }\n            }\n\n            reduxDispatch(\n                reduxActions.showContextMenu({\n                    triggerFileId: payload.triggerFileId,\n                    mouseX: payload.clientX - 2,\n                    mouseY: payload.clientY - 4,\n                })\n            );\n        }\n    ),\n};\n","import { Nullable } from 'tsdef';\n\nimport { selectFocusSearchInput } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileSelectionTransform } from '../types/action.types';\nimport { FileViewMode } from '../types/file-view.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { EssentialActions } from './essential';\nimport { OptionIds } from './option-ids';\n\nexport const DefaultActions = {\n    /**\n     * Action that can be used to open currently selected files.\n     */\n    OpenSelection: defineFileAction(\n        {\n            id: 'open_selection',\n            hotkeys: ['enter'],\n            requiresSelection: true,\n            fileFilter: FileHelper.isOpenable,\n            button: {\n                name: 'Open selection',\n                toolbar: true,\n                contextMenu: true,\n                group: 'Actions',\n                icon: ChonkyIconName.openFiles,\n            },\n        } as const,\n        ({ state, reduxDispatch }) => {\n            reduxDispatch(\n                thunkRequestFileAction(EssentialActions.OpenFiles, {\n                    files: state.selectedFilesForAction!,\n                })\n            );\n            return undefined;\n        }\n    ),\n    /**\n     * Action that selects all files.\n     */\n    SelectAllFiles: defineFileAction({\n        id: 'select_all_files',\n        hotkeys: ['ctrl+a'],\n        button: {\n            name: 'Select all files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.selectAllFiles,\n        },\n        selectionTransform: (({ fileIds, hiddenFileIds }) => {\n            const newSelection = new Set<string>();\n            fileIds.map(fileId => {\n                // We don't need to check if file is selectable because Chonky does\n                // it own checks internally.\n                if (!hiddenFileIds.has(fileId)) newSelection.add(fileId);\n            });\n            return newSelection;\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that clear the file selection.\n     */\n    ClearSelection: defineFileAction({\n        id: 'clear_selection',\n        hotkeys: ['escape'],\n        button: {\n            name: 'Clear selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.clearSelection,\n        },\n        selectionTransform: (({ prevSelection }) => {\n            if (prevSelection.size === 0) return null;\n            return new Set<string>();\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that enables List view.\n     */\n    EnableListView: defineFileAction({\n        id: 'enable_list_view',\n        fileViewConfig: {\n            mode: FileViewMode.List,\n            entryHeight: 30,\n        },\n        button: {\n            name: 'Switch to List view',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Compact view. Note that compact view is still\n     * experimental and should not be used in production.\n     */\n    EnableCompactView: defineFileAction({\n        // TODO: Don't enable until compact view is fully supported\n        id: 'enable_compact_view',\n        fileViewConfig: {\n            mode: FileViewMode.Compact,\n            entryHeight: 40,\n            entryWidth: 220,\n        },\n        button: {\n            name: 'Switch to Compact view',\n            toolbar: true,\n            icon: ChonkyIconName.compact,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Grid view.\n     */\n    EnableGridView: defineFileAction({\n        id: 'enable_grid_view',\n        fileViewConfig: { mode: FileViewMode.Grid, entryWidth: 165, entryHeight: 130 },\n        button: {\n            name: 'Switch to Grid view',\n            toolbar: true,\n            icon: ChonkyIconName.smallThumbnail,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.name`.\n     */\n    SortFilesByName: defineFileAction({\n        id: 'sort_files_by_name',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.name.toLowerCase() : undefined),\n        button: {\n            name: 'Sort by name',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.size`.\n     */\n    SortFilesBySize: defineFileAction({\n        id: 'sort_files_by_size',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.size : undefined),\n        button: {\n            name: 'Sort by size',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.modDate`.\n     */\n    SortFilesByDate: defineFileAction({\n        id: 'sort_files_by_date',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.modDate : undefined),\n        button: {\n            name: 'Sort by date',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether hidden files are shown to the user or not.\n     */\n    ToggleHiddenFiles: defineFileAction({\n        id: 'toggle_hidden_files',\n        hotkeys: ['ctrl+h'],\n        option: {\n            id: OptionIds.ShowHiddenFiles,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show hidden files',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether folders should appear before files regardless of\n     * current sort function.\n     */\n    ToggleShowFoldersFirst: defineFileAction({\n        id: 'toggle_show_folders_first',\n        option: {\n            id: OptionIds.ShowFoldersFirst,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show folders first',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that focuses the search input when it is dispatched.\n     */\n    FocusSearchInput: defineFileAction(\n        {\n            id: 'focus_search_input',\n            hotkeys: ['ctrl+f'],\n        } as const,\n        ({ getReduxState }) => {\n            const focusSearchInput = selectFocusSearchInput(getReduxState());\n            if (focusSearchInput) focusSearchInput();\n        }\n    ),\n    /**\n     * Action that enables List view.\n     */\n    ToggleDarkMode: defineFileAction({\n        id: 'enable_dark_mode',\n        option: {\n            id: OptionIds.DarkMode,\n            defaultValue: false,\n        },\n        button: {\n            name: 'Enable dark mode',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n};\n","import { ChonkyIconName } from '../types/icons.types';\nimport { defineFileAction } from '../util/helpers';\n\nexport const ExtraActions = {\n    /**\n     * Action that adds a button and shortcut to copy files.\n     */\n    CopyFiles: defineFileAction({\n        id: 'copy_files',\n        requiresSelection: true,\n        hotkeys: ['ctrl+c'],\n        button: {\n            name: 'Copy selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.copy,\n        },\n    } as const),\n    /**\n     * Action that adds a button to create a new folder.\n     */\n    CreateFolder: defineFileAction({\n        id: 'create_folder',\n        button: {\n            name: 'Create folder',\n            toolbar: true,\n            tooltip: 'Create a folder',\n            icon: ChonkyIconName.folderCreate,\n        },\n    } as const),\n    /**\n     * Action that adds a button to upload files.\n     */\n    UploadFiles: defineFileAction({\n        id: 'upload_files',\n        button: {\n            name: 'Upload files',\n            toolbar: true,\n            tooltip: 'Upload files',\n            icon: ChonkyIconName.upload,\n        },\n    } as const),\n    /**\n     * Action that adds a button to download files.\n     */\n    DownloadFiles: defineFileAction({\n        id: 'download_files',\n        requiresSelection: true,\n        button: {\n            name: 'Download files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.download,\n        },\n    } as const),\n    /**\n     * Action that adds a button and shortcut to delete files.\n     */\n    DeleteFiles: defineFileAction({\n        id: 'delete_files',\n        requiresSelection: true,\n        hotkeys: ['delete'],\n        button: {\n            name: 'Delete files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.trash,\n        },\n    } as const),\n};\n","import { DefaultActions } from './default';\nimport { EssentialActions } from './essential';\nimport { ExtraActions } from './extra';\n\nexport { OptionIds } from './option-ids';\n\nexport const ChonkyActions = {\n    ...EssentialActions,\n    ...DefaultActions,\n    ...ExtraActions,\n};\n\nexport const EssentialFileActions = [\n    ChonkyActions.MouseClickFile,\n    ChonkyActions.KeyboardClickFile,\n    ChonkyActions.StartDragNDrop,\n    ChonkyActions.EndDragNDrop,\n    ChonkyActions.MoveFiles,\n    ChonkyActions.ChangeSelection,\n    ChonkyActions.OpenFiles,\n    ChonkyActions.OpenParentFolder,\n    ChonkyActions.OpenFileContextMenu,\n];\n\nexport const DefaultFileActions = [\n    ChonkyActions.OpenSelection,\n    ChonkyActions.SelectAllFiles,\n    ChonkyActions.ClearSelection,\n    ChonkyActions.EnableListView,\n    // TODO: Don't enable until compact view is fully supported\n    // ChonkyActions.EnableCompactView,\n    ChonkyActions.EnableGridView,\n    ChonkyActions.SortFilesByName,\n    ChonkyActions.SortFilesBySize,\n    ChonkyActions.SortFilesByDate,\n    ChonkyActions.ToggleHiddenFiles,\n    ChonkyActions.ToggleShowFoldersFirst,\n    ChonkyActions.FocusSearchInput,\n];\n","import { ChonkyActions } from '../action-definitions/index';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\n\nexport const initialRootState: RootState = {\n    instanceId: 'CHONKY_INVALID_ID', // should be overwritten by preloaded state\n\n    externalFileActionHandler: null,\n\n    rawFileActions: [],\n    fileActionsErrorMessages: [],\n    fileActionMap: {},\n    fileActionIds: [],\n    toolbarItems: [],\n    contextMenuItems: [],\n\n    rawFolderChain: null,\n    folderChainErrorMessages: [],\n    folderChain: [],\n\n    rawFiles: [],\n    filesErrorMessages: [],\n    fileMap: {},\n    fileIds: [],\n    cleanFileIds: [],\n\n    sortedFileIds: [],\n    hiddenFileIdMap: {},\n\n    focusSearchInput: null,\n    searchString: '',\n    searchMode: 'currentFolder',\n\n    selectionMap: {},\n    disableSelection: false,\n\n    fileViewConfig: ChonkyActions.EnableGridView.fileViewConfig,\n\n    sortActionId: null,\n    sortOrder: SortOrder.ASC,\n\n    optionMap: {},\n\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableDragAndDrop: false,\n    clearSelectionOnOutsideClick: true,\n\n    lastClick: null,\n\n    contextMenuMounted: false,\n    contextMenuConfig: null,\n};\n","import { Nilable, Nullable } from 'tsdef';\n\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nimport { GenericFileActionHandler } from '../types/action-handler.types';\nimport { FileActionMenuItem } from '../types/action-menus.types';\nimport { FileAction, FileActionMap } from '../types/action.types';\nimport { ContextMenuConfig } from '../types/context-menu.types';\nimport { FileViewConfig } from '../types/file-view.types';\nimport { FileArray, FileIdTrueMap, FileMap } from '../types/file.types';\nimport { OptionMap } from '../types/options.types';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\nimport { ThumbnailGenerator } from '../types/thumbnails.types';\nimport { FileHelper } from '../util/file-helper';\nimport { sanitizeInputArray } from './files-transforms';\nimport { initialRootState } from './state';\n\nconst reducers = {\n    setExternalFileActionHandler(\n        state: RootState,\n        action: PayloadAction<Nilable<GenericFileActionHandler<FileAction>>>\n    ) {\n        state.externalFileActionHandler = action.payload ?? null;\n    },\n    setRawFileActions(state: RootState, action: PayloadAction<FileAction[] | any>) {\n        state.rawFileActions = action.payload;\n    },\n    setFileActionsErrorMessages(state: RootState, action: PayloadAction<string[]>) {\n        state.fileActionsErrorMessages = action.payload;\n    },\n    setFileActions(state: RootState, action: PayloadAction<FileAction[]>) {\n        const fileActionMap: FileActionMap = {};\n        action.payload.map(a => (fileActionMap[a.id] = a));\n        const fileIds = action.payload.map(a => a.id);\n\n        state.fileActionMap = fileActionMap as FileMap;\n        state.fileActionIds = fileIds;\n    },\n    updateFileActionMenuItems(state: RootState, action: PayloadAction<[FileActionMenuItem[], FileActionMenuItem[]]>) {\n        [state.toolbarItems, state.contextMenuItems] = action.payload;\n    },\n    setRawFolderChain(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFolderChain = action.payload;\n        const { sanitizedArray: folderChain, errorMessages } = sanitizeInputArray('folderChain', rawFolderChain);\n        state.rawFolderChain = rawFolderChain;\n        state.folderChain = folderChain;\n        state.folderChainErrorMessages = errorMessages;\n    },\n    setRawFiles(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFiles = action.payload;\n        const { sanitizedArray: files, errorMessages } = sanitizeInputArray('files', rawFiles);\n        state.rawFiles = rawFiles;\n        state.filesErrorMessages = errorMessages;\n\n        const fileMap: FileMap = {};\n        files.forEach(f => {\n            if (f) fileMap[f.id] = f;\n        });\n        const fileIds = files.map(f => (f ? f.id : null));\n        const cleanFileIds = fileIds.filter(f => !!f) as string[];\n\n        state.fileMap = fileMap;\n        state.fileIds = fileIds;\n        state.cleanFileIds = cleanFileIds;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (!fileMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setSortedFileIds(state: RootState, action: PayloadAction<Nullable<string>[]>) {\n        state.sortedFileIds = action.payload;\n    },\n    setHiddenFileIds(state: RootState, action: PayloadAction<FileIdTrueMap>) {\n        state.hiddenFileIdMap = action.payload;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (state.hiddenFileIdMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setFocusSearchInput(state: RootState, action: PayloadAction<Nullable<() => void>>) {\n        state.focusSearchInput = action.payload;\n    },\n    setSearchString(state: RootState, action: PayloadAction<string>) {\n        state.searchString = action.payload;\n    },\n    selectAllFiles(state: RootState) {\n        state.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (id ? (state.selectionMap[id] = true) : null));\n    },\n    selectFiles(state: RootState, action: PayloadAction<{ fileIds: string[]; reset: boolean }>) {\n        if (state.disableSelection) return;\n        if (action.payload.reset) state.selectionMap = {};\n        action.payload.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (state.selectionMap[id] = true));\n    },\n    toggleSelection(state: RootState, action: PayloadAction<{ fileId: string; exclusive: boolean }>) {\n        if (state.disableSelection) return;\n        const oldValue = !!state.selectionMap[action.payload.fileId];\n        if (action.payload.exclusive) state.selectionMap = {};\n        if (oldValue) delete state.selectionMap[action.payload.fileId];\n        else if (FileHelper.isSelectable(state.fileMap[action.payload.fileId])) {\n            state.selectionMap[action.payload.fileId] = true;\n        }\n    },\n    clearSelection(state: RootState) {\n        if (state.disableSelection) return;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setSelectionDisabled(state: RootState, action: PayloadAction<boolean>) {\n        state.disableSelection = action.payload;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setFileViewConfig(state: RootState, action: PayloadAction<FileViewConfig>) {\n        state.fileViewConfig = action.payload;\n    },\n    setSort(state: RootState, action: PayloadAction<{ actionId: string; order: SortOrder }>) {\n        state.sortActionId = action.payload.actionId;\n        state.sortOrder = action.payload.order;\n    },\n    setOptionDefaults(state: RootState, action: PayloadAction<OptionMap>) {\n        for (const optionId of Object.keys(action.payload)) {\n            if (optionId in state.optionMap) continue;\n            state.optionMap[optionId] = action.payload[optionId];\n        }\n    },\n    toggleOption(state: RootState, action: PayloadAction<string>) {\n        state.optionMap[action.payload] = !state.optionMap[action.payload];\n    },\n    setThumbnailGenerator(state: RootState, action: PayloadAction<Nullable<ThumbnailGenerator>>) {\n        state.thumbnailGenerator = action.payload;\n    },\n    setDoubleClickDelay(state: RootState, action: PayloadAction<number>) {\n        state.doubleClickDelay = action.payload;\n    },\n    setDisableDragAndDrop(state: RootState, action: PayloadAction<boolean>) {\n        state.disableDragAndDrop = action.payload;\n    },\n    setClearSelectionOnOutsideClick(state: RootState, action: PayloadAction<boolean>) {\n        state.clearSelectionOnOutsideClick = action.payload;\n    },\n    setLastClickIndex(state: RootState, action: PayloadAction<Nullable<{ index: number; fileId: string }>>) {\n        state.lastClick = action.payload;\n    },\n    setContextMenuMounted(state: RootState, action: PayloadAction<boolean>) {\n        state.contextMenuMounted = action.payload;\n    },\n    showContextMenu(state: RootState, action: PayloadAction<ContextMenuConfig>) {\n        state.contextMenuConfig = action.payload;\n    },\n    hideContextMenu(state: RootState) {\n        if (!state.contextMenuConfig) return;\n        state.contextMenuConfig = null;\n    },\n};\n\nexport const { actions: reduxActions, reducer: rootReducer } = createSlice({\n    name: 'root',\n    initialState: initialRootState,\n    reducers,\n});\n","import { useEffect } from 'react';\nimport watch from 'redux-watch';\n\nimport { Store } from '@reduxjs/toolkit';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { RootState } from '../types/redux.types';\nimport { FileSelection } from '../types/selection.types';\nimport { selectSelectedFileIds, selectSelectionMap } from './selectors';\nimport { thunkRequestFileAction } from './thunks/dispatchers.thunks';\n\nexport const useStoreWatchers = (store: Store<RootState>) => {\n    useEffect(() => {\n        const selectionWatcher = watch(() => selectSelectionMap(store.getState()));\n        const onSelectionChange = (\n            newSelection: FileSelection,\n            oldSelection: FileSelection\n        ) => {\n            // We don't check for deep equality here as we expect the\n            // reducers to prevent all unnecessary updates.\n            if (newSelection === oldSelection) return;\n\n            // Notify users the selection has changed.\n            const selectedFilesIds = selectSelectedFileIds(store.getState());\n            const selection = new Set<string>(selectedFilesIds);\n            store.dispatch(\n                thunkRequestFileAction(ChonkyActions.ChangeSelection, {\n                    selection,\n                }) as any\n            );\n        };\n\n        const unsubscribeCallbacks = [\n            store.subscribe(selectionWatcher(onSelectionChange)),\n        ];\n        return () => {\n            for (const unsubscribe of unsubscribeCallbacks) unsubscribe();\n        };\n    }, [store]);\n};\n","import { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { configureStore } from '@reduxjs/toolkit';\n\nimport { RootState } from '../types/redux.types';\nimport { useStaticValue } from '../util/hooks-helpers';\nimport { rootReducer } from './reducers';\nimport { initialRootState } from './state';\nimport { useStoreWatchers } from './watchers';\n\nexport const useChonkyStore = (chonkyInstanceId: string) => {\n    const store = useStaticValue(() => {\n        const preloadedState: RootState = {\n            ...initialRootState,\n            instanceId: chonkyInstanceId,\n        };\n\n        return configureStore({\n            preloadedState: preloadedState as any,\n            reducer: rootReducer,\n            middleware: getDefaultMiddleware =>\n                getDefaultMiddleware({\n                    serializableCheck: false,\n                }),\n            devTools: { name: `chonky_${chonkyInstanceId}` },\n        });\n    });\n    useStoreWatchers(store);\n    return store;\n};\n\n/**\n * Hook that can be used with parametrized selectors.\n */\nexport const useParamSelector = <Args extends Array<any>, Value>(\n    parametrizedSelector: (...args: Args) => (state: RootState) => Value,\n    ...selectorParams: Args\n) => {\n    const selector = useCallback(\n        (state: RootState) => parametrizedSelector(...selectorParams)(state),\n        // eslint-disable-next-line\n        [parametrizedSelector, ...selectorParams]\n    );\n    return useSelector(selector);\n};\n\n/**\n * DTE - DispatchThunkEffect. This method is used to decrease code duplication in\n * main Chonky method.\n */\nexport const useDTE = <Args extends Array<any>>(actionCreator: (...args: Args) => any, ...selectorParams: Args) => {\n    const dispatch = useDispatch();\n    useEffect(\n        () => {\n            dispatch(actionCreator(...selectorParams));\n        },\n        // eslint-disable-next-line\n        [dispatch, actionCreator, ...selectorParams]\n    );\n};\n\nexport const usePropReduxUpdate = <Payload extends any>(actionCreator: (payload: Payload) => any, payload: Payload) => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(actionCreator(payload));\n    }, [dispatch, actionCreator, payload]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { ChonkyIconProps } from '../../types/icons.types';\n\nexport const ChonkyIconPlaceholder: React.FC<ChonkyIconProps> = () => {\n    // This component should not be rendered unless the user has misconfigured Chonky\n    const title =\n        'No icon component found. Please follow Chonky installation instructions to ' +\n        'provide a pre-made icon component (or a custom icon).';\n    return <span title={title}></span>;\n};\n","import { ChonkyActions } from '../action-definitions/index';\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileBrowserProps } from '../types/file-browser.types';\n\nexport type ChonkyConfig = Pick<\n    FileBrowserProps,\n    | 'fileActions'\n    | 'onFileAction'\n    | 'thumbnailGenerator'\n    | 'doubleClickDelay'\n    | 'disableSelection'\n    | 'disableDefaultFileActions'\n    | 'disableDragAndDrop'\n    | 'disableDragAndDropProvider'\n    | 'defaultSortActionId'\n    | 'defaultFileViewActionId'\n    | 'clearSelectionOnOutsideClick'\n    | 'iconComponent'\n    | 'darkMode'\n    | 'i18n'\n>;\n\nexport const defaultConfig: ChonkyConfig = {\n    fileActions: null,\n    onFileAction: null,\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableSelection: false,\n    disableDefaultFileActions: false,\n    disableDragAndDrop: false,\n    disableDragAndDropProvider: false,\n    defaultSortActionId: ChonkyActions.SortFilesByName.id,\n    defaultFileViewActionId: ChonkyActions.EnableGridView.id,\n    clearSelectionOnOutsideClick: true,\n    iconComponent: ChonkyIconPlaceholder,\n    darkMode: false,\n    i18n: {},\n};\n\nexport const setChonkyDefaults = (config: Partial<ChonkyConfig>) => {\n    for (const key of Object.keys(defaultConfig)) {\n        if (key in config) {\n            defaultConfig[key as keyof ChonkyConfig] = config[\n                key as keyof ChonkyConfig\n            ] as any;\n        }\n    }\n};\n","import filesize from 'filesize';\nimport { createContext, useContext, useMemo } from 'react';\nimport { IntlShape, useIntl } from 'react-intl';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyFormatters } from '../types/i18n.types';\nimport { FileHelper } from './file-helper';\n\nexport enum I18nNamespace {\n    Toolbar = 'toolbar',\n    FileList = 'fileList',\n    FileEntry = 'fileEntry',\n    FileContextMenu = 'contextMenu',\n\n    FileActions = 'actions',\n    FileActionGroups = 'actionGroups',\n}\n\nexport const getI18nId = (namespace: I18nNamespace, stringId: string): string =>\n    `chonky.${namespace}.${stringId}`;\n\nexport const getActionI18nId = (actionId: string, stringId: string): string =>\n    `chonky.${I18nNamespace.FileActions}.${actionId}.${stringId}`;\n\nexport const useLocalizedFileActionGroup = (groupName: string) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        return intl.formatMessage({\n            id: getI18nId(I18nNamespace.FileActionGroups, groupName),\n            defaultMessage: groupName,\n        });\n    }, [groupName, intl]);\n};\n\nexport const useLocalizedFileActionStrings = (action: Nullable<FileAction>) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        if (!action) {\n            return {\n                buttonName: '',\n                buttonTooltip: undefined,\n            };\n        }\n\n        const buttonName = intl.formatMessage({\n            id: getActionI18nId(action.id, 'button.name'),\n            defaultMessage: action.button?.name,\n        });\n\n        let buttonTooltip: Undefinable<string> = undefined;\n        if (action.button?.tooltip) {\n            // We only translate the tooltip if the original action has a tooltip.\n            buttonTooltip = intl.formatMessage({\n                id: getActionI18nId(action.id, 'button.tooltip'),\n                defaultMessage: action.button?.tooltip,\n            });\n        }\n\n        return {\n            buttonName,\n            buttonTooltip,\n        };\n    }, [action, intl]);\n};\n\nexport const useLocalizedFileEntryStrings = (file: Nullable<FileData>) => {\n    const intl = useIntl();\n    const formatters = useContext(ChonkyFormattersContext);\n    return useMemo(() => {\n        return {\n            fileModDateString: formatters.formatFileModDate(intl, file),\n            fileSizeString: formatters.formatFileSize(intl, file),\n        };\n    }, [file, formatters, intl]);\n};\n\nexport const defaultFormatters: ChonkyFormatters = {\n    formatFileModDate: (\n        intl: IntlShape,\n        file: Nullable<FileData>\n    ): Nullable<string> => {\n        const safeModDate = FileHelper.getModDate(file);\n        if (safeModDate) {\n            return intl.formatDate(safeModDate, {\n                dateStyle: 'medium',\n                timeStyle: 'short',\n            });\n        } else {\n            return null;\n        }\n    },\n    formatFileSize: (_intl: IntlShape, file: Nullable<FileData>): Nullable<string> => {\n        if (!file || typeof file.size !== 'number') return null;\n\n        const size = file.size;\n        const sizeData = filesize(size, { bits: false, output: 'object' }) as any;\n        if (sizeData.symbol === 'B') {\n            return `${Math.round(sizeData.value / 10) / 100.0} KB`;\n        } else if (sizeData.symbol === 'KB') {\n            return `${Math.round(sizeData.value)} ${sizeData.symbol}`;\n        }\n        return `${sizeData.value} ${sizeData.symbol}`;\n    },\n};\n\nexport const ChonkyFormattersContext = createContext(defaultFormatters);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2019\n * @license MIT\n */\n\nimport { createContext, ElementType, useMemo } from 'react';\n\nimport ExactTrie from 'exact-trie';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName, ChonkyIconProps, FileIconData } from '../types/icons.types';\n\nexport const ChonkyIconContext = createContext<ElementType<ChonkyIconProps>>(ChonkyIconPlaceholder);\n\nexport const VideoExtensions: string[] = [\n    '3g2',\n    '3gp',\n    '3gpp',\n    'asf',\n    'asx',\n    'avi',\n    'dvb',\n    'f4v',\n    'fli',\n    'flv',\n    'fvt',\n    'h261',\n    'h263',\n    'h264',\n    'jpgm',\n    'jpgv',\n    'jpm',\n    'm1v',\n    'm2v',\n    'm4u',\n    'm4v',\n    'mj2',\n    'mjp2',\n    'mk3d',\n    'mks',\n    'mkv',\n    'mng',\n    'mov',\n    'movie',\n    'mp4',\n    'mp4v',\n    'mpe',\n    'mpeg',\n    'mpg',\n    'mpg4',\n    'mxu',\n    'ogv',\n    'pyv',\n    'qt',\n    'smv',\n    'ts',\n    'uvh',\n    'uvm',\n    'uvp',\n    'uvs',\n    'uvu',\n    'uvv',\n    'uvvh',\n    'uvvm',\n    'uvvp',\n    'uvvs',\n    'uvvu',\n    'uvvv',\n    'viv',\n    'vob',\n    'webm',\n    'wm',\n    'wmv',\n    'wmx',\n    'wvx',\n];\nexport const ImageExtensions: string[] = [\n    '3ds',\n    'apng',\n    'azv',\n    'bmp',\n    'bmp',\n    'btif',\n    'cgm',\n    'cmx',\n    'djv',\n    'djvu',\n    'drle',\n    'dwg',\n    'dxf',\n    'emf',\n    'exr',\n    'fbs',\n    'fh',\n    'fh4',\n    'fh5',\n    'fh7',\n    'fhc',\n    'fits',\n    'fpx',\n    'fst',\n    'g3',\n    'gif',\n    'heic',\n    'heics',\n    'heif',\n    'heifs',\n    'ico',\n    'ico',\n    'ief',\n    'jls',\n    'jng',\n    'jp2',\n    'jpe',\n    'jpeg',\n    'jpf',\n    'jpg',\n    'jpg2',\n    'jpm',\n    'jpx',\n    'jxr',\n    'ktx',\n    'mdi',\n    'mmr',\n    'npx',\n    'pbm',\n    'pct',\n    'pcx',\n    'pcx',\n    'pgm',\n    'pic',\n    'png',\n    'pnm',\n    'ppm',\n    'psd',\n    'pti',\n    'ras',\n    'rgb',\n    'rlc',\n    'sgi',\n    'sid',\n    'sub',\n    'svg',\n    'svgz',\n    't38',\n    'tap',\n    'tfx',\n    'tga',\n    'tif',\n    'tiff',\n    'uvg',\n    'uvi',\n    'uvvg',\n    'uvvi',\n    'vtf',\n    'wbmp',\n    'wdp',\n    'webp',\n    'wmf',\n    'xbm',\n    'xif',\n    'xpm',\n    'xwd',\n];\nexport const AudioExtensions: string[] = [\n    '3gpp',\n    'aac',\n    'adp',\n    'aif',\n    'aifc',\n    'aiff',\n    'au',\n    'caf',\n    'dra',\n    'dts',\n    'dtshd',\n    'ecelp4800',\n    'ecelp7470',\n    'ecelp9600',\n    'eol',\n    'flac',\n    'kar',\n    'lvp',\n    'm2a',\n    'm3a',\n    'm3u',\n    'm4a',\n    'm4a',\n    'mid',\n    'midi',\n    'mka',\n    'mp2',\n    'mp2a',\n    'mp3',\n    'mp3',\n    'mp4a',\n    'mpga',\n    'oga',\n    'ogg',\n    'pya',\n    'ra',\n    'ra',\n    'ram',\n    'rip',\n    'rmi',\n    'rmp',\n    's3m',\n    'sil',\n    'snd',\n    'spx',\n    'uva',\n    'uvva',\n    'wav',\n    'wav',\n    'wav',\n    'wax',\n    'weba',\n    'wma',\n    'xm',\n];\nexport const ColorsLight: string[] = [\n    '#bbbbbb',\n    '#d65c5c',\n    '#d6665c',\n    '#d6705c',\n    '#d67a5c',\n    '#d6855c',\n    '#d68f5c',\n    '#d6995c',\n    '#d6a35c',\n    '#d6ad5c',\n    '#d6b85c',\n    '#d6c25c',\n    '#d6cc5c',\n    '#d6d65c',\n    '#ccd65c',\n    '#c2d65c',\n    '#b8d65c',\n    '#add65c',\n    '#a3d65c',\n    '#99d65c',\n    '#8fd65c',\n    '#85d65c',\n    '#7ad65c',\n    '#70d65c',\n    '#66d65c',\n    '#5cd65c',\n    '#5cd666',\n    '#5cd670',\n    '#5cd67a',\n    '#5cd685',\n    '#5cd68f',\n    '#5cd699',\n    '#5cd6a3',\n    '#5cd6ad',\n    '#5cd6b8',\n    '#5cd6c2',\n    '#5cd6cc',\n    '#5cd6d6',\n    '#5cccd6',\n    '#5cc2d6',\n    '#5cb8d6',\n    '#5cadd6',\n    '#5ca3d6',\n    '#5c99d6',\n    '#5c8fd6',\n    '#5c85d6',\n    '#5c7ad6',\n    '#5c70d6',\n    '#5c66d6',\n    '#5c5cd6',\n    '#665cd6',\n    '#705cd6',\n    '#7a5cd6',\n    '#855cd6',\n    '#8f5cd6',\n    '#995cd6',\n    '#a35cd6',\n    '#ad5cd6',\n    '#b85cd6',\n    '#c25cd6',\n    '#cc5cd6',\n    '#d65cd6',\n    '#d65ccc',\n    '#d65cc2',\n    '#d65cb8',\n    '#d65cad',\n    '#d65ca3',\n    '#d65c99',\n    '#d65c8f',\n    '#d65c85',\n    '#d65c7a',\n    '#d65c70',\n    '#d65c66',\n];\nexport const ColorsDark: string[] = [\n    '#777',\n    '#8f3d3d',\n    '#8f443d',\n    '#8f4b3d',\n    '#8f523d',\n    '#8f583d',\n    '#8f5f3d',\n    '#8f663d',\n    '#8f6d3d',\n    '#8f743d',\n    '#8f7a3d',\n    '#8f813d',\n    '#8f883d',\n    '#8f8f3d',\n    '#888f3d',\n    '#818f3d',\n    '#7a8f3d',\n    '#748f3d',\n    '#6d8f3d',\n    '#668f3d',\n    '#5f8f3d',\n    '#588f3d',\n    '#528f3d',\n    '#4b8f3d',\n    '#448f3d',\n    '#3d8f3d',\n    '#3d8f44',\n    '#3d8f4b',\n    '#3d8f52',\n    '#3d8f58',\n    '#3d8f5f',\n    '#3d8f66',\n    '#3d8f6d',\n    '#3d8f74',\n    '#3d8f7a',\n    '#3d8f81',\n    '#3d8f88',\n    '#3d8f8f',\n    '#3d888f',\n    '#3d818f',\n    '#3d7a8f',\n    '#3d748f',\n    '#3d6d8f',\n    '#3d668f',\n    '#3d5f8f',\n    '#3d588f',\n    '#3d528f',\n    '#3d4b8f',\n    '#3d448f',\n    '#3d3d8f',\n    '#443d8f',\n    '#4b3d8f',\n    '#523d8f',\n    '#583d8f',\n    '#5f3d8f',\n    '#663d8f',\n    '#6d3d8f',\n    '#743d8f',\n    '#7a3d8f',\n    '#813d8f',\n    '#883d8f',\n    '#8f3d8f',\n    '#8f3d88',\n    '#8f3d81',\n    '#8f3d7a',\n    '#8f3d74',\n    '#8f3d6d',\n    '#8f3d66',\n    '#8f3d5f',\n    '#8f3d58',\n    '#8f3d52',\n    '#8f3d4b',\n    '#8f3d44',\n];\n\nconst getIconTrie = () => {\n    let colourIndex = 0;\n    const step = 5;\n\n    const IconsToExtensions = [\n        // Generic file types\n        [ChonkyIconName.license, ['license']],\n        [ChonkyIconName.config, ['sfk', 'ini', 'yml', 'toml', 'iml']],\n        [ChonkyIconName.model, ['3ds', 'obj', 'ply', 'fbx']],\n        [ChonkyIconName.database, ['csv', 'json', 'sql', 'sqlite', 'sqlite3', 'npy', 'npz', 'rec', 'idx', 'hdf5']],\n        [ChonkyIconName.text, ['txt', 'md', 'mdx']],\n        [ChonkyIconName.archive, ['zip', 'rar', 'tar', 'tar.gz', '7z']],\n        [ChonkyIconName.image, ImageExtensions],\n        [ChonkyIconName.video, VideoExtensions],\n        [ChonkyIconName.code, ['html', 'php', 'css', 'sass', 'scss', 'less', 'cpp', 'h', 'hpp', 'c', 'xml']],\n        [ChonkyIconName.info, ['bib', 'readme', 'nfo']],\n        [ChonkyIconName.key, ['pem', 'pub']],\n        [ChonkyIconName.lock, ['lock', 'lock.json', 'shrinkwrap.json']],\n        [ChonkyIconName.music, AudioExtensions],\n        [ChonkyIconName.terminal, ['run', 'sh']],\n        [ChonkyIconName.trash, ['.Trashes']],\n        [ChonkyIconName.users, ['authors', 'contributors']],\n\n        // OS file types\n        [ChonkyIconName.linux, ['AppImage']],\n        [ChonkyIconName.ubuntu, ['deb']],\n        [ChonkyIconName.windows, ['exe']],\n\n        // Programming language file types\n        [ChonkyIconName.rust, ['rs', 'rlib']],\n        [ChonkyIconName.python, ['py', 'ipynb']],\n        [ChonkyIconName.nodejs, ['js', 'jsx', 'ts', 'tsx', 'd.ts']],\n        [ChonkyIconName.php, ['php']],\n\n        // Development tools file types\n        [ChonkyIconName.git, ['.gitignore']],\n\n        // Brands file types\n        [ChonkyIconName.adobe, ['psd']],\n\n        // Other program file types\n        [ChonkyIconName.pdf, ['pdf']],\n        [ChonkyIconName.excel, ['xls', 'xlsx']],\n        [ChonkyIconName.word, ['doc', 'docx', 'odt']],\n        [ChonkyIconName.flash, ['swf']],\n    ] as const;\n\n    const exactTrie = new ExactTrie({ ignoreCase: true });\n    for (const pair of IconsToExtensions) {\n        const [icon, extensions] = pair;\n\n        for (let i = 0; i < extensions.length; ++i) {\n            colourIndex += step;\n            const colorCode = (colourIndex % (ColorsLight.length - 1)) + 1;\n            const iconData: FileIconData = {\n                icon,\n                colorCode,\n            };\n            exactTrie.put(extensions[i], iconData, true);\n        }\n    }\n\n    return exactTrie;\n};\n\nconst iconTrie = getIconTrie();\n\nexport const useIconData = (file: Nullable<FileData>): FileIconData => {\n    return useMemo(() => {\n        if (!file) return { icon: ChonkyIconName.loading, colorCode: 0 };\n        if (file.isDir === true) return { icon: ChonkyIconName.folder, colorCode: 0 };\n\n        const match = iconTrie.getWithCheckpoints(file.name, '.', true);\n        return match ? match : { icon: ChonkyIconName.file, colorCode: 32 };\n    }, [file]);\n};\n","import { Theme as MuiTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\nimport { createUseStyles } from 'react-jss';\nimport { DeepPartial } from 'tsdef';\n\nexport const lightTheme = {\n    colors: {\n        debugRed: '#fabdbd',\n        debugBlue: '#bdd8fa',\n        debugGreen: '#d2fabd',\n        debugPurple: '#d2bdfa',\n        debugYellow: '#fae9bd',\n\n        textActive: '#09f',\n    },\n\n    fontSizes: {\n        rootPrimary: 15,\n    },\n\n    margins: {\n        rootLayoutMargin: 8,\n    },\n\n    toolbar: {\n        size: 30,\n        lineHeight: '30px', // `px` suffix is required for `line-height` fields to work\n        fontSize: 15,\n        buttonRadius: 4,\n    },\n\n    dnd: {\n        canDropColor: 'green',\n        cannotDropColor: 'red',\n        canDropMask: 'rgba(180, 235, 180, 0.75)',\n        cannotDropMask: 'rgba(235, 180, 180, 0.75)',\n        fileListCanDropMaskOne: 'rgba(180, 235, 180, 0.1)',\n        fileListCanDropMaskTwo: 'rgba(180, 235, 180, 0.2)',\n        fileListCannotDropMaskOne: 'rgba(235, 180, 180, 0.1)',\n        fileListCannotDropMaskTwo: 'rgba(235, 180, 180, 0.2)',\n    },\n\n    dragLayer: {\n        border: 'solid 2px #09f',\n        padding: '7px 10px',\n        borderRadius: 2,\n    },\n\n    fileList: {\n        desktopGridGutter: 8,\n        mobileGridGutter: 5,\n    },\n\n    gridFileEntry: {\n        childrenCountSize: '1.6em',\n        iconColorFocused: '#000',\n        iconSize: '2.4em',\n        iconColor: '#fff',\n        borderRadius: 5,\n        fontSize: 14,\n\n        fileColorTint: 'rgba(255, 255, 255, 0.4)',\n        folderBackColorTint: 'rgba(255, 255, 255, 0.1)',\n        folderFrontColorTint: 'rgba(255, 255, 255, 0.4)',\n    },\n\n    listFileEntry: {\n        propertyFontSize: 14,\n        iconFontSize: '1.1em',\n        iconBorderRadius: 5,\n        fontSize: 14,\n    },\n};\n\nexport type ChonkyTheme = typeof lightTheme;\n\nexport const darkThemeOverride: DeepPartial<ChonkyTheme> = {\n    gridFileEntry: {\n        fileColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderBackColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderFrontColorTint: 'rgba(50, 50, 50, 0.15)',\n    },\n};\n\nexport const mobileThemeOverride: DeepPartial<ChonkyTheme> = {\n    fontSizes: {\n        rootPrimary: 13,\n    },\n    margins: {\n        rootLayoutMargin: 4,\n    },\n    toolbar: {\n        size: 28,\n        lineHeight: '28px',\n        fontSize: 13,\n    },\n    gridFileEntry: {\n        fontSize: 13,\n    },\n    listFileEntry: {\n        propertyFontSize: 12,\n        iconFontSize: '1em',\n        fontSize: 13,\n    },\n};\n\nexport const useIsMobileBreakpoint = () => {\n    return useMediaQuery('(max-width:480px)');\n};\n\nexport const getStripeGradient = (colorOne: string, colorTwo: string) =>\n    'repeating-linear-gradient(' +\n    '45deg,' +\n    `${colorOne},` +\n    `${colorOne} 10px,` +\n    `${colorTwo} 0,` +\n    `${colorTwo} 20px` +\n    ')';\n\nexport const makeLocalChonkyStyles = <C extends string = string>(\n    styles: (theme: ChonkyTheme & MuiTheme) => any\n    // @ts-ignore\n): any => createUseStyles<ChonkyTheme, C>(styles);\n\nexport const makeGlobalChonkyStyles = <C extends string = string>(\n    makeStyles: (theme: ChonkyTheme & MuiTheme) => any\n) => {\n    const selectorMapping = {};\n    const makeGlobalStyles = (theme: ChonkyTheme) => {\n        const localStyles = makeStyles(theme as any);\n        const globalStyles = {};\n        const localSelectors = Object.keys(localStyles);\n        localSelectors.map(localSelector => {\n            const globalSelector = `chonky-${localSelector}`;\n            const jssSelector = `@global .${globalSelector}`;\n            // @ts-ignore\n            globalStyles[jssSelector] = localStyles[localSelector];\n            // @ts-ignore\n            selectorMapping[localSelector] = globalSelector;\n        });\n        return globalStyles;\n    };\n\n    // @ts-ignore\n    const useStyles = createUseStyles<ChonkyTheme, C>(makeGlobalStyles as any);\n    return (...args: any[]): any => {\n        const styles = useStyles(...args);\n        const classes = {};\n        Object.keys(selectorMapping).map(localSelector => {\n            // @ts-ignore\n            classes[localSelector] = selectorMapping[localSelector];\n        });\n        return { ...classes, ...styles };\n    };\n};\n\nexport const important = <T>(value: T) => [value, '!important'];\n\nexport const c = classnames;\n","import React, { useImperativeHandle } from 'react';\nimport { useDispatch, useStore } from 'react-redux';\n\nimport { reduxActions } from '../redux/reducers';\nimport { selectSelectionMap } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileAction } from '../types/action.types';\nimport { FileBrowserHandle } from '../types/file-browser.types';\nimport { RootState } from '../types/redux.types';\n\nexport const useFileBrowserHandle = (ref: React.Ref<FileBrowserHandle>) => {\n    const store = useStore<RootState>();\n    const dispatch = useDispatch();\n\n    useImperativeHandle(\n        ref,\n        () => ({\n            getFileSelection(): Set<string> {\n                const selectionMap = selectSelectionMap(store.getState());\n                const selectionSet = new Set(Object.keys(selectionMap));\n                return selectionSet;\n            },\n            setFileSelection(selection, reset = true): void {\n                const fileIds = Array.from(selection);\n                dispatch(reduxActions.selectFiles({ fileIds, reset }));\n            },\n            requestFileAction<Action extends FileAction>(\n                action: Action,\n                payload: Action['__payloadType']\n            ): Promise<void> {\n                return Promise.resolve(\n                    dispatch(thunkRequestFileAction(action, payload))\n                ).then();\n            },\n        }),\n        [store, dispatch]\n    );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { initialRootState } from '../../redux/state';\nimport { useDTE, usePropReduxUpdate } from '../../redux/store';\nimport {\n    thunkActivateSortAction, thunkUpdateDefaultFileViewActionId, thunkUpdateRawFileActions\n} from '../../redux/thunks/file-actions.thunks';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { useFileBrowserHandle } from '../../util/file-browser-handle';\nimport { getValueOrFallback } from '../../util/helpers';\n\nexport const ChonkyBusinessLogicInner = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        // ==== Update Redux state\n        usePropReduxUpdate(reduxActions.setRawFiles, props.files ?? initialRootState.rawFiles);\n        usePropReduxUpdate(reduxActions.setRawFolderChain, props.folderChain);\n        useDTE(\n            thunkUpdateRawFileActions,\n            getValueOrFallback(props.fileActions, defaultConfig.fileActions),\n            getValueOrFallback(props.disableDefaultFileActions, defaultConfig.disableDefaultFileActions)\n        );\n        useDTE(\n            reduxActions.setExternalFileActionHandler,\n            getValueOrFallback(props.onFileAction, defaultConfig.onFileAction) as any\n        );\n        useDTE(\n            reduxActions.setSelectionDisabled,\n            getValueOrFallback(props.disableSelection, defaultConfig.disableSelection, 'boolean')\n        );\n        useDTE(\n            thunkActivateSortAction,\n            getValueOrFallback(props.defaultSortActionId, defaultConfig.defaultSortActionId)\n        );\n        useDTE(\n            thunkUpdateDefaultFileViewActionId,\n            getValueOrFallback(props.defaultFileViewActionId, defaultConfig.defaultFileViewActionId, 'string')\n        );\n\n        useDTE(\n            reduxActions.setThumbnailGenerator,\n            getValueOrFallback(props.thumbnailGenerator, defaultConfig.thumbnailGenerator)\n        );\n        useDTE(\n            reduxActions.setDoubleClickDelay,\n            getValueOrFallback(props.doubleClickDelay, defaultConfig.doubleClickDelay, 'number')\n        );\n        useDTE(\n            reduxActions.setDisableDragAndDrop,\n            getValueOrFallback(props.disableDragAndDrop, defaultConfig.disableDragAndDrop, 'boolean')\n        );\n        useDTE(\n            reduxActions.setClearSelectionOnOutsideClick,\n            getValueOrFallback(\n                props.clearSelectionOnOutsideClick,\n                defaultConfig.clearSelectionOnOutsideClick,\n                'boolean'\n            )\n        );\n\n        // ==== Setup the imperative handle for external use\n        useFileBrowserHandle(ref);\n\n        return null;\n    })\n);\nChonkyBusinessLogicInner.displayName = 'ChonkyBusinessLogicInner';\n\nexport const ChonkyBusinessLogic = React.memo(ChonkyBusinessLogicInner);\nChonkyBusinessLogic.displayName = 'ChonkyBusinessLogic';\n","import { useCallback, useContext } from 'react';\nimport { DndContext, useDrag, useDrop } from 'react-dnd';\n\nexport const useDndContextAvailable = () => {\n    const dndContext = useContext(DndContext);\n    const { dragDropManager } = dndContext;\n    return !!dragDropManager;\n};\n\nexport const useDragIfAvailable: typeof useDrag = (...args) => {\n    // This is an ugly hack to make `useDrag` not throw if a `DndContext` is not available.\n    // See: https://github.com/react-dnd/react-dnd/issues/2212\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrag = dndContextAvailable ? useDrag : mockHook;\n    return useHook(...args);\n};\n\nexport const useDropIfAvailable: typeof useDrop = (...args) => {\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrop = dndContextAvailable ? useDrop : mockHook;\n    return useHook(...args);\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuMounted } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { findElementAmongAncestors } from '../../util/helpers';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\n\nexport const findClosestChonkyFileId = (\n    element: HTMLElement | any\n): Nullable<string> => {\n    const fileEntryWrapperDiv = findElementAmongAncestors(\n        element,\n        (element: any) =>\n            element.tagName &&\n            element.tagName.toLowerCase() === 'div' &&\n            element.dataset &&\n            element.dataset.chonkyFileId\n    );\n    return fileEntryWrapperDiv ? fileEntryWrapperDiv.dataset.chonkyFileId! : null;\n};\n\nexport const useContextMenuTrigger = () => {\n    const dispatch = useDispatch();\n    const contextMenuMountedRef = useInstanceVariable(\n        useSelector(selectContextMenuMounted)\n    );\n    return useCallback(\n        (event: React.MouseEvent<HTMLDivElement>) => {\n            // Use default browser context menu when Chonky context menu component\n            // is not mounted.\n            if (!contextMenuMountedRef.current) return;\n            // Users can use Alt+Right Click to bring up browser's default\n            // context menu instead of Chonky's context menu.\n            if (event.altKey) return;\n\n            event.preventDefault();\n\n            const triggerFileId = findClosestChonkyFileId(event.target);\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.OpenFileContextMenu, {\n                    clientX: event.clientX,\n                    clientY: event.clientY,\n                    triggerFileId,\n                })\n            );\n        },\n        [contextMenuMountedRef, dispatch]\n    );\n};\n\nexport const useContextMenuDismisser = () => {\n    const dispatch = useDispatch();\n    return useCallback(() => dispatch(reduxActions.hideContextMenu()), [dispatch]);\n};\n","import { DragObjectWithType } from 'react-dnd';\nimport { Nilable } from 'tsdef';\n\nimport { StartDragNDropPayload } from './action-payloads.types';\nimport { FileData } from './file.types';\n\nexport interface ChonkyDndDropResult {\n    dropTarget: Nilable<FileData> | any;\n    dropEffect: 'move' | 'copy';\n}\n\nexport type ChonkyDndFileEntryItem = DragObjectWithType & {\n    payload: StartDragNDropPayload;\n};\nexport const ChonkyDndFileEntryType = 'dnd-chonky-file-entry';\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useDragLayer } from 'react-dnd';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyDndFileEntryItem, ChonkyDndFileEntryType } from '../../types/dnd.types';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileListDragLayerProps {}\n\nconst layerStyles: React.CSSProperties = {\n    position: 'fixed',\n    pointerEvents: 'none',\n    zIndex: 100,\n    left: 0,\n    top: 0,\n    width: '100%',\n    height: '100%',\n};\nconst getItemStyles = (\n    initialCursorOffset: Nullable<{ x: number; y: number }>,\n    initialFileOffset: Nullable<{ x: number; y: number }>,\n    currentFileOffset: Nullable<{ x: number; y: number }>\n) => {\n    if (!initialCursorOffset || !initialFileOffset || !currentFileOffset) {\n        return {\n            display: 'none',\n        };\n    }\n    const x = initialCursorOffset.x + (currentFileOffset.x - initialFileOffset.x);\n    const y = initialCursorOffset.y + (currentFileOffset.y - initialFileOffset.y);\n    const transform = `translate(${x}px, ${y}px)`;\n    return {\n        transform,\n        WebkitTransform: transform,\n    };\n};\n\nexport const DnDFileListDragLayer: React.FC<DnDFileListDragLayerProps> = () => {\n    const classes = useStyles();\n\n    const {\n        itemType,\n        item,\n        initialCursorOffset,\n        initialFileOffset,\n        currentFileOffset,\n        isDragging,\n    } = useDragLayer(monitor => ({\n        item: monitor.getItem() as ChonkyDndFileEntryItem,\n        itemType: monitor.getItemType(),\n        initialCursorOffset: monitor.getInitialClientOffset(),\n        initialFileOffset: monitor.getInitialSourceClientOffset(),\n        currentFileOffset: monitor.getSourceClientOffset(),\n        isDragging: monitor.isDragging(),\n    }));\n    if (!isDragging || itemType !== ChonkyDndFileEntryType || !item.payload) {\n        return null;\n    }\n\n    const selectionSize = item.payload.selectedFiles.length;\n    return (\n        <div style={layerStyles}>\n            <div\n                style={getItemStyles(\n                    initialCursorOffset,\n                    initialFileOffset,\n                    currentFileOffset\n                )}\n            >\n                <div className={classes.fileDragPreview}>\n                    <b>{item.payload.draggedFile.name}</b>\n                    {selectionSize > 1 && (\n                        <>\n                            {' and '}\n                            <strong>\n                                {selectionSize - 1} other file\n                                {selectionSize - 1 !== 1 ? 's' : ''}\n                            </strong>\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileDragPreview: {\n        boxShadow: `2px 2px 5px ${theme.palette.divider}`,\n        backgroundColor: theme.palette.background.default,\n        borderRadius: theme.dragLayer.borderRadius,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        padding: theme.dragLayer.padding,\n        border: theme.dragLayer.border,\n        display: 'inline-block',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport hotkeys from 'hotkeys-js';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\n\nexport interface HotkeyListenerProps {\n    fileActionId: string;\n}\n\nexport const HotkeyListener: React.FC<HotkeyListenerProps> = React.memo(props => {\n    const { fileActionId } = props;\n\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n\n    useEffect(() => {\n        if (!fileAction || !fileAction.hotkeys || fileAction.hotkeys.length === 0) {\n            return;\n        }\n\n        const hotkeysStr = fileAction.hotkeys.join(',');\n        const hotkeyCallback = (event: KeyboardEvent) => {\n            event.preventDefault();\n            dispatch(thunkRequestFileAction(fileAction, undefined));\n        };\n        hotkeys(hotkeysStr, hotkeyCallback);\n        return () => hotkeys.unbind(hotkeysStr, hotkeyCallback);\n    }, [dispatch, fileAction]);\n\n    return null;\n});\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { reduxActions } from '../../redux/reducers';\nimport {\n    selectClearSelectionOnOutsideClick,\n    selectFileActionIds,\n    selectIsDnDDisabled,\n} from '../../redux/selectors';\nimport { useDndContextAvailable } from '../../util/dnd-fallback';\nimport { elementIsInsideButton } from '../../util/helpers';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuTrigger } from '../external/FileContextMenu-hooks';\nimport { DnDFileListDragLayer } from '../file-list/DnDFileListDragLayer';\nimport { HotkeyListener } from './HotkeyListener';\n\nexport interface ChonkyPresentationLayerProps {}\n\nexport const ChonkyPresentationLayer: React.FC<ChonkyPresentationLayerProps> = ({\n    children,\n}) => {\n    const dispatch = useDispatch();\n    const fileActionIds = useSelector(selectFileActionIds);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n    const clearSelectionOnOutsideClick = useSelector(\n        selectClearSelectionOnOutsideClick\n    );\n\n    // Deal with clicks outside of Chonky\n    const handleClickAway = useCallback(\n        (event: React.MouseEvent<Document>) => {\n            if (!clearSelectionOnOutsideClick || elementIsInsideButton(event.target)) {\n                // We only clear out the selection on outside click if the click target\n                // was not a button. We don't want to clear out the selection when a\n                // button is clicked because Chonky users might want to trigger some\n                // selection-related action on that button click.\n                return;\n            }\n            dispatch(reduxActions.clearSelection());\n        },\n        [dispatch, clearSelectionOnOutsideClick]\n    );\n\n    // Generate necessary components\n    const hotkeyListenerComponents = useMemo(\n        () =>\n            fileActionIds.map(actionId => (\n                <HotkeyListener\n                    key={`file-action-listener-${actionId}`}\n                    fileActionId={actionId}\n                />\n            )),\n        [fileActionIds]\n    );\n\n    const dndContextAvailable = useDndContextAvailable();\n    const showContextMenu = useContextMenuTrigger();\n\n    const classes = useStyles();\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n            <Box className={classes.chonkyRoot} onContextMenu={showContextMenu}>\n                {!dndDisabled && dndContextAvailable && <DnDFileListDragLayer />}\n                {hotkeyListenerComponents}\n                {children ? children : null}\n            </Box>\n        </ClickAwayListener>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    chonkyRoot: {\n        backgroundColor: theme.palette.background.paper,\n        border: `solid 1px ${theme.palette.divider}`,\n        padding: theme.margins.rootLayoutMargin,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        touchAction: 'manipulation', // Disabling zoom on double tap\n        fontFamily: 'sans-serif',\n        flexDirection: 'column',\n        boxSizing: 'border-box',\n        textAlign: 'left',\n        borderRadius: 4,\n        display: 'flex',\n        height: '100%',\n\n        // Disabling select\n        webkitTouchCallout: 'none',\n        webkitUserSelect: 'none',\n        mozUserSelect: 'none',\n        msUserSelect: 'none',\n        userSelect: 'none',\n    },\n}));\n","import {\n    createMuiTheme,\n    ThemeProvider as MuiThemeProvider,\n} from '@material-ui/core/styles';\nimport merge from 'deepmerge';\nimport React, { ReactNode, useMemo } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { IntlProvider } from 'react-intl';\nimport { ThemeProvider } from 'react-jss';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport shortid from 'shortid';\n\nimport { useChonkyStore } from '../../redux/store';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { getValueOrFallback } from '../../util/helpers';\nimport { useStaticValue } from '../../util/hooks-helpers';\nimport { ChonkyFormattersContext, defaultFormatters } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    darkThemeOverride,\n    lightTheme,\n    mobileThemeOverride,\n    useIsMobileBreakpoint,\n} from '../../util/styles';\nimport { ChonkyBusinessLogic } from '../internal/ChonkyBusinessLogic';\nimport { ChonkyIconPlaceholder } from '../internal/ChonkyIconPlaceholder';\nimport { ChonkyPresentationLayer } from '../internal/ChonkyPresentationLayer';\n\n// if (process.env.NODE_ENV === 'development') {\n//     const whyDidYouRender = require('@welldone-software/why-did-you-render');\n//     whyDidYouRender(React, {\n//         trackAllPureComponents: true,\n//     });\n// }\n\nexport const FileBrowser = React.forwardRef<\n    FileBrowserHandle,\n    FileBrowserProps & { children?: ReactNode }\n>((props, ref) => {\n    const { instanceId, iconComponent, children } = props;\n    const disableDragAndDrop = getValueOrFallback(\n        props.disableDragAndDrop,\n        defaultConfig.disableDragAndDrop,\n        'boolean'\n    );\n    const disableDragAndDropProvider = getValueOrFallback(\n        props.disableDragAndDropProvider,\n        defaultConfig.disableDragAndDropProvider,\n        'boolean'\n    );\n    const darkMode = getValueOrFallback(\n        props.darkMode,\n        defaultConfig.darkMode,\n        'boolean'\n    );\n    const i18n = getValueOrFallback(props.i18n, defaultConfig.i18n);\n    const formatters = useMemo(() => ({ ...defaultFormatters, ...i18n?.formatters }), [\n        i18n,\n    ]);\n\n    const chonkyInstanceId = useStaticValue(() => instanceId ?? shortid.generate());\n    const store = useChonkyStore(chonkyInstanceId);\n\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n    const theme = useMemo(() => {\n        const muiTheme = createMuiTheme({\n            palette: { type: darkMode ? 'dark' : 'light' },\n        });\n        const combinedTheme = merge(\n            muiTheme,\n            merge(lightTheme, darkMode ? darkThemeOverride : {})\n        );\n        return isMobileBreakpoint\n            ? merge(combinedTheme, mobileThemeOverride)\n            : combinedTheme;\n    }, [darkMode, isMobileBreakpoint]);\n\n    const chonkyComps = (\n        <>\n            <ChonkyBusinessLogic ref={ref} {...props} />\n            <ChonkyPresentationLayer>{children}</ChonkyPresentationLayer>\n        </>\n    );\n\n    return (\n        <IntlProvider locale=\"en\" defaultLocale=\"en\" {...i18n}>\n            <ChonkyFormattersContext.Provider value={formatters}>\n                <ReduxProvider store={store}>\n                    <ThemeProvider theme={theme}>\n                        <MuiThemeProvider theme={theme}>\n                            <ChonkyIconContext.Provider\n                                value={\n                                    iconComponent ??\n                                    defaultConfig.iconComponent ??\n                                    ChonkyIconPlaceholder\n                                }\n                            >\n                                {disableDragAndDrop || disableDragAndDropProvider ? (\n                                    chonkyComps\n                                ) : (\n                                    <DndProvider backend={HTML5Backend}>\n                                        {chonkyComps}\n                                    </DndProvider>\n                                )}\n                            </ChonkyIconContext.Provider>\n                        </MuiThemeProvider>\n                    </ThemeProvider>\n                </ReduxProvider>\n            </ChonkyFormattersContext.Provider>\n        </IntlProvider>\n    );\n});\nFileBrowser.displayName = 'FileBrowser';\n","import { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectFolderChain } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { FileData } from '../../types/file.types';\nimport { FileHelper } from '../../util/file-helper';\n\nexport interface FolderChainItem {\n    file: Nullable<FileData>;\n    disabled: boolean;\n    onClick?: () => void;\n}\n\nexport const useFolderChainItems = (): FolderChainItem[] => {\n    const folderChain = useSelector(selectFolderChain);\n    const dispatch = useDispatch();\n\n    const folderChainItems = useMemo(() => {\n        const items: FolderChainItem[] = [];\n        if (!folderChain) return items;\n\n        for (let i = 0; i < folderChain.length; ++i) {\n            const file = folderChain[i];\n            items.push({\n                file,\n                disabled: !file,\n                onClick:\n                    !FileHelper.isOpenable(file) || i === folderChain.length - 1\n                        ? undefined\n                        : () =>\n                              dispatch(\n                                  thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                                      targetFile: file,\n                                      files: [file],\n                                  })\n                              ),\n            });\n        }\n        return items;\n    }, [dispatch, folderChain]);\n    return folderChainItems;\n};\n","import { useCallback, useEffect, useMemo } from 'react';\nimport { DragSourceMonitor, DropTargetMonitor } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useDispatch, useSelector, useStore } from 'react-redux';\nimport { ExcludeKeys, Nullable } from 'tsdef';\n\nimport { EssentialActions } from '../action-definitions/essential';\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectCurrentFolder,\n    selectFolderChain,\n    selectInstanceId,\n    selectSelectedFiles,\n} from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { StartDragNDropPayload } from '../types/action-payloads.types';\nimport {\n    ChonkyDndDropResult,\n    ChonkyDndFileEntryItem,\n    ChonkyDndFileEntryType,\n} from '../types/dnd.types';\nimport { DndEntryState } from '../types/file-list.types';\nimport { FileData } from '../types/file.types';\nimport { useDragIfAvailable, useDropIfAvailable } from './dnd-fallback';\nimport { FileHelper } from './file-helper';\nimport { useInstanceVariable } from './hooks-helpers';\n\nexport const useFileDrag = (file: Nullable<FileData>) => {\n    // Prepare the dnd payload\n    const store = useStore();\n    const fileRef = useInstanceVariable(file);\n    const getDndStartPayload = useCallback<() => StartDragNDropPayload>(() => {\n        const reduxState = store.getState();\n        return {\n            sourceInstanceId: selectInstanceId(reduxState),\n            source: selectCurrentFolder(reduxState),\n            // We force non-null type below because by convention, if drag & drop for\n            // this file was possible, it must have been non-null.\n            draggedFile: fileRef.current!,\n            selectedFiles: selectSelectedFiles(reduxState),\n        };\n    }, [store, fileRef]);\n\n    // For drag source\n    const dispatch = useDispatch();\n    const canDrag = useCallback(() => FileHelper.isDraggable(fileRef.current), [\n        fileRef,\n    ]);\n    const onDragStart = useCallback((): ChonkyDndFileEntryItem => {\n        const item: ChonkyDndFileEntryItem = {\n            type: ChonkyDndFileEntryType,\n            payload: getDndStartPayload(),\n        };\n        dispatch(thunkRequestFileAction(ChonkyActions.StartDragNDrop, item.payload));\n        return item;\n    }, [dispatch, getDndStartPayload]);\n    const onDragEnd = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DragSourceMonitor) => {\n            const dropResult = monitor.getDropResult() as ChonkyDndDropResult;\n            if (\n                !FileHelper.isDraggable(item.payload.draggedFile) ||\n                !dropResult ||\n                !dropResult.dropTarget\n            ) {\n                return;\n            }\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.EndDragNDrop, {\n                    ...item.payload,\n                    destination: dropResult.dropTarget,\n                    copy: dropResult.dropEffect === 'copy',\n                })\n            );\n        },\n        [dispatch]\n    );\n\n    // Create refs for react-dnd hooks\n    const item = useMemo<ChonkyDndFileEntryItem>(\n        () => ({\n            type: ChonkyDndFileEntryType,\n            // Payload is actually added in `onDragStart`\n            payload: {} as StartDragNDropPayload,\n        }),\n        []\n    );\n    const collect = useCallback(monitor => ({ isDragging: monitor.isDragging() }), []);\n    const [{ isDragging: dndIsDragging }, drag, preview] = useDragIfAvailable({\n        item,\n        canDrag,\n        begin: onDragStart,\n        // @ts-ignore\n        end: onDragEnd,\n        collect,\n    });\n\n    useEffect(() => {\n        // Set drag preview to an empty image because `DnDFileListDragLayer` will\n        // provide its own preview.\n        preview(getEmptyImage(), { captureDraggingState: true });\n    }, [preview]);\n\n    return { dndIsDragging, drag };\n};\n\ninterface UseFileDropParams {\n    file: Nullable<FileData>;\n    forceDisableDrop?: boolean;\n    includeChildrenDrops?: boolean;\n}\n\nexport const useFileDrop = ({\n    file,\n    forceDisableDrop,\n    includeChildrenDrops,\n}: UseFileDropParams) => {\n    const folderChainRef = useInstanceVariable(useSelector(selectFolderChain));\n    const onDrop = useCallback(\n        (_item: ChonkyDndFileEntryItem, monitor) => {\n            if (!monitor.canDrop()) return;\n            const customDropResult: ExcludeKeys<ChonkyDndDropResult, 'dropEffect'> = {\n                dropTarget: file,\n            };\n            return customDropResult;\n        },\n        [file]\n    );\n    const canDrop = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DropTargetMonitor) => {\n            if (\n                forceDisableDrop ||\n                !FileHelper.isDroppable(file) ||\n                (!monitor.isOver({ shallow: true }) && !includeChildrenDrops)\n            ) {\n                return false;\n            }\n            const { source, draggedFile, selectedFiles } = item.payload;\n\n            // We prevent folders from being dropped into themselves. We also prevent\n            // any folder from current folder chain being moved - we can't move the\n            // folder that we are currently in.\n            const prohibitedFileIds = new Set<string>();\n            prohibitedFileIds.add(file.id);\n            folderChainRef.current.map(folder => {\n                if (folder) prohibitedFileIds.add(folder.id);\n            });\n            const movedFiles: FileData[] = [draggedFile, ...selectedFiles];\n            for (const currFile of movedFiles) {\n                if (prohibitedFileIds.has(currFile.id)) return false;\n            }\n\n            // Finally, prohibit files from being moved into their parent folder\n            // (which is a no-op).\n            return file.id !== source?.id;\n        },\n        [forceDisableDrop, file, includeChildrenDrops, folderChainRef]\n    );\n    const collect = useCallback(\n        monitor => ({\n            isOver: monitor.isOver(),\n            isOverCurrent: monitor.isOver({ shallow: true }),\n            canDrop: monitor.canDrop(),\n        }),\n        []\n    );\n    const [\n        { isOver: dndIsOver, isOverCurrent: dndIsOverCurrent, canDrop: dndCanDrop },\n        drop,\n    ] = useDropIfAvailable({\n        accept: ChonkyDndFileEntryType,\n        drop: onDrop,\n        canDrop,\n        collect,\n    });\n    return { dndIsOver, dndIsOverCurrent, dndCanDrop, drop };\n};\n\nexport const useFileEntryDnD = (file: Nullable<FileData>) => {\n    const { dndIsDragging, drag } = useFileDrag(file);\n    const { dndIsOver, dndCanDrop, drop } = useFileDrop({ file });\n    const dndState = useMemo<DndEntryState>(\n        () => ({\n            dndIsDragging,\n            dndIsOver,\n            dndCanDrop,\n        }),\n        [dndCanDrop, dndIsDragging, dndIsOver]\n    );\n    return {\n        drop,\n        drag,\n        dndState,\n    };\n};\n\nexport const useDndHoverOpen = (file: Nullable<FileData>, dndState: DndEntryState) => {\n    const dispatch = useDispatch();\n    const currentFolderRef = useInstanceVariable(useSelector(selectCurrentFolder));\n    useEffect(() => {\n        let timeout: Nullable<any> = null;\n        if (\n            dndState.dndIsOver &&\n            FileHelper.isDndOpenable(file) &&\n            file.id !== currentFolderRef.current?.id\n        ) {\n            timeout = setTimeout(\n                () =>\n                    dispatch(\n                        thunkRequestFileAction(EssentialActions.OpenFiles, {\n                            targetFile: file,\n                            files: [file],\n                        })\n                    ),\n                // TODO: Make this timeout configurable\n                1500\n            );\n        }\n        return () => {\n            if (timeout) clearTimeout(timeout);\n        };\n    }, [dispatch, file, dndState.dndIsOver, currentFolderRef]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface TextPlaceholderProps {\n    minLength: number;\n    maxLength: number;\n}\n\nconst getRandomInt = (min: number, max: number) => {\n    return min + Math.floor(Math.random() * Math.floor(max - min));\n};\nexport const TextPlaceholder: React.FC<TextPlaceholderProps> = React.memo(props => {\n    const { minLength, maxLength } = props;\n\n    const placeholderLength = getRandomInt(minLength, maxLength);\n    const whitespace = '&nbsp;'.repeat(placeholderLength);\n\n    const classes = useStyles();\n    return (\n        <span\n            className={classes.textPlaceholder}\n            dangerouslySetInnerHTML={{ __html: whitespace }}\n        />\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(() => ({\n    '@keyframes loading-placeholder': {\n        '0%': { opacity: 0.2 },\n        '50%': { opacity: 0.4 },\n        '100%': { opacity: 0.2 },\n    },\n    textPlaceholder: {\n        animationName: '$loading-placeholder',\n        animationIterationCount: 'infinite',\n        animationTimingFunction: 'linear',\n        animationDuration: '1.5s',\n        backgroundColor: '#ccc',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        borderRadius: 4,\n        maxWidth: '40%',\n        minWidth: 20,\n    },\n}));\n","import React, {\n    HTMLProps, useCallback, useContext, useEffect, useMemo, useRef, useState\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectThumbnailGenerator } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { ChonkyIconContext, ColorsDark, ColorsLight, useIconData } from '../../util/icon-helper';\nimport { Logger } from '../../util/logger';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { KeyboardClickEvent, MouseClickEvent } from '../internal/ClickableWrapper';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const useFileEntryHtmlProps = (file: Nullable<FileData>): HTMLProps<HTMLDivElement> => {\n    return useMemo(() => {\n        const dataProps: { [prop: string]: Undefinable<string> } = {\n            'data-test-id': 'file-entry',\n            'data-chonky-file-id': file ? file.id : undefined,\n        };\n\n        return {\n            role: 'listitem',\n            ...dataProps,\n        };\n    }, [file]);\n};\n\nexport const useFileEntryState = (file: Nullable<FileData>, selected: boolean, focused: boolean) => {\n    const iconData = useIconData(file);\n    const { thumbnailUrl, thumbnailLoading } = useThumbnailUrl(file);\n\n    return useMemo<FileEntryState>(() => {\n        const fileColor = thumbnailUrl ? ColorsDark[iconData.colorCode] : ColorsLight[iconData.colorCode];\n        const iconSpin = thumbnailLoading || !file;\n        const icon = thumbnailLoading ? ChonkyIconName.loading : iconData.icon;\n\n        return {\n            childrenCount: FileHelper.getChildrenCount(file),\n            icon: file && file.icon !== undefined ? file.icon : icon,\n            iconSpin: iconSpin,\n            thumbnailUrl: thumbnailUrl,\n            color: file && file.color !== undefined ? file.color : fileColor,\n            selected: selected,\n            focused: !!focused,\n        };\n    }, [file, focused, iconData, selected, thumbnailLoading, thumbnailUrl]);\n};\n\nexport const useDndIcon = (dndState: DndEntryState) => {\n    let dndIconName: Nullable<ChonkyIconName> = null;\n    if (dndState.dndIsOver) {\n        const showDropIcon = dndState.dndCanDrop;\n        dndIconName = showDropIcon ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop;\n    } else if (dndState.dndIsDragging) {\n        dndIconName = ChonkyIconName.dndDragging;\n    }\n\n    return dndIconName;\n};\n\nexport const useModifierIconComponents = (file: Nullable<FileData>) => {\n    const modifierIcons: ChonkyIconName[] = useMemo(() => {\n        const modifierIcons: ChonkyIconName[] = [];\n        if (FileHelper.isHidden(file)) modifierIcons.push(ChonkyIconName.hidden);\n        if (FileHelper.isSymlink(file)) modifierIcons.push(ChonkyIconName.symlink);\n        if (FileHelper.isEncrypted(file)) modifierIcons.push(ChonkyIconName.lock);\n        return modifierIcons;\n    }, [file]);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const modifierIconComponents = useMemo(\n        () => modifierIcons.map((icon, index) => <ChonkyIcon key={`file-modifier-${index}`} icon={icon} />),\n        // For some reason ESLint marks `ChonkyIcon` as an unnecessary dependency,\n        // but we expect it can change at runtime so we disable the check.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [ChonkyIcon, modifierIcons]\n    );\n    return modifierIconComponents;\n};\n\nconst _extname = (fileName: string) => {\n    const parts = fileName.split('.');\n    if (parts.length) {\n        return `.${parts[parts.length - 1]}`;\n    }\n    return '';\n};\n\nexport const useFileNameComponent = (file: Nullable<FileData>) => {\n    return useMemo(() => {\n        if (!file) return <TextPlaceholder minLength={15} maxLength={20} />;\n\n        let name;\n        let extension = null;\n\n        const isDir = FileHelper.isDirectory(file);\n        if (isDir) {\n            name = file.name;\n        } else {\n            extension = file.ext ?? _extname(file.name);\n            name = file.name.substr(0, file.name.length - extension.length);\n        }\n\n        return (\n            <>\n                {name}\n                {extension && <span className=\"chonky-file-entry-description-title-extension\">{extension}</span>}\n            </>\n        );\n    }, [file]);\n};\n\nexport const useThumbnailUrl = (file: Nullable<FileData>) => {\n    const thumbnailGenerator = useSelector(selectThumbnailGenerator);\n    const [thumbnailUrl, setThumbnailUrl] = useState<Nullable<string>>(null);\n    const [thumbnailLoading, setThumbnailLoading] = useState<boolean>(false);\n    const loadingAttempts = useRef(0);\n\n    useEffect(() => {\n        let loadingCancelled = false;\n\n        if (file) {\n            if (thumbnailGenerator) {\n                if (loadingAttempts.current === 0) {\n                    setThumbnailLoading(true);\n                }\n                loadingAttempts.current++;\n                Promise.resolve()\n                    .then(() => thumbnailGenerator(file))\n                    .then((thumbnailUrl: any) => {\n                        if (loadingCancelled) return;\n                        setThumbnailLoading(false);\n\n                        if (thumbnailUrl && typeof thumbnailUrl === 'string') {\n                            setThumbnailUrl(thumbnailUrl);\n                        }\n                    })\n                    .catch(error => {\n                        if (!loadingCancelled) setThumbnailLoading(false);\n                        Logger.error(`User-defined \"thumbnailGenerator\" handler threw an error: ${error.message}`);\n                    });\n            } else if (file.thumbnailUrl) {\n                setThumbnailUrl(file.thumbnailUrl);\n            }\n        }\n\n        return () => {\n            loadingCancelled = true;\n        };\n    }, [file, setThumbnailUrl, setThumbnailLoading, thumbnailGenerator]);\n\n    return { thumbnailUrl, thumbnailLoading };\n};\n\nexport const useFileClickHandlers = (file: Nullable<FileData>, displayIndex: number) => {\n    const dispatch = useDispatch();\n\n    // Prepare base handlers\n    const onMouseClick = useCallback(\n        (event: MouseClickEvent, clickType: 'single' | 'double') => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.MouseClickFile, {\n                    clickType,\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n    const onKeyboardClick = useCallback(\n        (event: KeyboardClickEvent) => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.KeyboardClickFile, {\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    enterKey: event.enterKey,\n                    spaceKey: event.spaceKey,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n\n    // Prepare single/double click handlers\n    const onSingleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'single'), [onMouseClick]);\n    const onDoubleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'double'), [onMouseClick]);\n\n    return {\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n    };\n};\n","import { MaybePromise, Nullable } from 'tsdef';\n\nimport { FileActionState } from './action-handler.types';\nimport { FileViewConfig } from './file-view.types';\nimport { FileFilter, FileMap } from './file.types';\nimport { ChonkyIconName } from './icons.types';\nimport { ChonkyDispatch, RootState } from './redux.types';\nimport { FileSortKeySelector } from './sort.types';\n\nexport interface FileAction {\n    /**\n     * Unique file action ID. If you set the action ID to one of the built-in Chonky\n     * action action IDs, you custom action definition will override the built-in\n     * definition.\n     */\n    id: string;\n    /**\n     * When set to `true`, the action will only be active (dispatchable) when user\n     * selects one or more files. If `fileFilter` is defined, it will be applied to\n     * selection before checking if its empty.\n     */\n    requiresSelection?: boolean; // Requires selection of 1+ files\n    /**\n     * A predicate that determines whether a file should be included in the selection\n     * for this action.\n     */\n    fileFilter?: FileFilter;\n    /**\n     * List of hotkeys that should trigger this action, defined using `hotkey-js`\n     * notation.\n     * @see https://www.npmjs.com/package/hotkeys-js\n     */\n    hotkeys?: string[] | readonly string[];\n    /**\n     * When button is defined and `toolbar` or `contextMenu` is set to `true`, a\n     * button will be added to the relevant UI component. Clicking on this button\n     * will active this action. The appearance of the button will change based on\n     * the action definition and the current Chonky state.\n     */\n    button?: FileActionButton;\n    /**\n     * When `sortKeySelector` is specified, the action becomes a sorting toggle. When\n     * this action is activated, it will sort files using the key selector, toggling\n     * between Ascending and Descending orders.\n     */\n    sortKeySelector?: FileSortKeySelector;\n    /**\n     * When `fileViewConfig` is specified, triggering this action will apply the\n     * provided config to Chonky's file view.\n     */\n    fileViewConfig?: FileViewConfig;\n    /**\n     * When `option` is specified, the action becomes an option toggle. When the action\n     * is activated, the boolean value of the option will be toggled.\n     */\n    option?: FileActionOption;\n    /**\n     * When selection transform is defined, activating this action will update the file\n     * selection. If the transform function returns `null`, selection will be left\n     * untouched.\n     */\n    selectionTransform?: FileSelectionTransform;\n    /**\n     * When effect is defined, it will be called right before dispatching the action to\n     * the user defined action handler. If the effect function returns a promise, Chonky\n     * will wait for the promise to resolve or fail before dispatching the action to the\n     * handler. If this function returns `true`, the file action will NOT be dispatched\n     * the the handler.\n     */\n    effect?: FileActionEffect;\n    /**\n     * When customVisibility is defined, it will change the display state of the file action\n     * The function must return the visibility as one of the CustomVisibilityState values:\n     *  - Hidden\n     *  - Disabled\n     *  - Default\n     *  - Active\n     */\n    customVisibility?: () => CustomVisibilityState;\n    /**\n     * Field used to infer the type of action payload. It is used solely for Typescript\n     * type inference and action validation.\n     */\n    __payloadType?: any;\n    /**\n     * Field used to infer the type of extra state for this action. It is used solely\n     * for Typescript type inference and action validation.\n     */\n    __extraStateType?: any;\n}\n\nexport interface FileActionButton {\n    name: string; // Button name\n    toolbar?: boolean; // Whether to show the button in the toolbar\n    contextMenu?: boolean; // Whether to show the button in the context menu\n    group?: string; // Button group (dropdown in toolbar or section in context menu)\n    tooltip?: string; // Help tooltip text\n    icon?: ChonkyIconName | string | any; // Icon name\n    iconOnly?: boolean; // Whether to only display the icon\n}\n\nexport interface FileActionOption {\n    id: string; // Unique option ID\n    defaultValue: boolean; // Whether the option is enabled by default (required)\n}\n\nexport type FileSelectionTransform = (data: {\n    prevSelection: Set<string>;\n    fileIds: ReadonlyArray<string>;\n    fileMap: Readonly<FileMap>;\n    hiddenFileIds: Set<string>;\n}) => Nullable<Set<string>>;\n\nexport type FileActionEffect<Action extends FileAction = any> = (data: {\n    action: Action;\n    payload: Action['__payloadType'];\n    state: FileActionState<{}>; // extra state is empty on purpose\n    reduxDispatch: ChonkyDispatch;\n    getReduxState: () => RootState;\n}) => MaybePromise<undefined | boolean | void>;\n\nexport type FileActionMap = { [actonId: string]: FileAction };\n\nexport enum CustomVisibilityState {\n    Hidden, \n    Disabled, \n    Default,\n    Active\n};\n","import { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectFileActionData,\n    selectFileViewConfig,\n    selectOptionValue,\n    selectParentFolder,\n    selectSelectedFilesForActionCount,\n    selectSortActionId,\n    selectSortOrder,\n} from '../redux/selectors';\nimport { useParamSelector } from '../redux/store';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { CustomVisibilityState } from '../types/action.types';\nimport { SortOrder } from '../types/sort.types';\nimport { FileHelper } from './file-helper';\n\nexport const useFileActionTrigger = (fileActionId: string) => {\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n    return useCallback(() => dispatch(thunkRequestFileAction(fileAction, undefined)), [\n        dispatch,\n        fileAction,\n    ]);\n};\n\nexport const useFileActionProps = (\n    fileActionId: string\n): { icon: Nullable<ChonkyIconName | string>; active: boolean; disabled: boolean } => {\n    const parentFolder = useSelector(selectParentFolder);\n    const fileViewConfig = useSelector(selectFileViewConfig);\n\n    const sortActionId = useSelector(selectSortActionId);\n    const sortOrder = useSelector(selectSortOrder);\n\n    const action = useParamSelector(selectFileActionData, fileActionId);\n    // @ts-ignore\n    const optionValue = useParamSelector(selectOptionValue, action?.option?.id);\n\n    const actionSelectionSize = useParamSelector(\n        selectSelectedFilesForActionCount,\n        fileActionId\n    );\n\n    const actionSelectionEmpty = actionSelectionSize === 0;\n\n    return useMemo(() => {\n        if (!action) return { icon: null, active: false, disabled: true };\n\n        let icon = action.button?.icon ?? null;\n        if (action.sortKeySelector) {\n            if (sortActionId === action.id) {\n                if (sortOrder === SortOrder.ASC) {\n                    icon = ChonkyIconName.sortAsc;\n                } else {\n                    icon = ChonkyIconName.sortDesc;\n                }\n            } else {\n                icon = ChonkyIconName.placeholder;\n            }\n        } else if (action.option) {\n            if (optionValue) {\n                icon = ChonkyIconName.toggleOn;\n            } else {\n                icon = ChonkyIconName.toggleOff;\n            }\n        }\n\n        const isSortButtonAndCurrentSort = action.id === sortActionId;\n        const isFileViewButtonAndCurrentView = action.fileViewConfig === fileViewConfig;\n        const isOptionAndEnabled = action.option ? !!optionValue : false;\n\n        let customDisabled = false;\n        let customActive = false;\n        if (action.customVisibility !== undefined) {\n            customDisabled = action.customVisibility() === CustomVisibilityState.Disabled;\n            customActive = action.customVisibility() === CustomVisibilityState.Active;\n        }\n        const active =\n            isSortButtonAndCurrentSort ||\n            isFileViewButtonAndCurrentView ||\n            isOptionAndEnabled ||\n            customActive;\n        \n        let disabled: boolean = (!!action.requiresSelection && actionSelectionEmpty) || customDisabled;\n\n        if (action.id === ChonkyActions.OpenParentFolder.id) {\n            // We treat `open_parent_folder` file action as a special case as it\n            // requires the parent folder to be present to work...\n            disabled = disabled || !FileHelper.isOpenable(parentFolder);\n        }\n\n        return { icon, active, disabled };\n    }, [\n        parentFolder,\n        fileViewConfig,\n        sortActionId,\n        sortOrder,\n        action,\n        optionValue,\n        actionSelectionEmpty,\n    ]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Button from '@material-ui/core/Button';\nimport React, { useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarButtonProps {\n    className?: string;\n    text: string;\n    tooltip?: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    iconOnly?: boolean;\n    onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n    disabled?: boolean;\n    dropdown?: boolean;\n}\n\nexport const ToolbarButton: React.FC<ToolbarButtonProps> = React.memo(props => {\n    const {\n        className: externalClassName,\n        text,\n        tooltip,\n        active,\n        icon,\n        iconOnly,\n        onClick,\n        disabled,\n        dropdown,\n    } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const iconComponent =\n        icon || iconOnly ? (\n            <div className={iconOnly ? '' : classes.iconWithText}>\n                <ChonkyIcon\n                    icon={icon ? icon : ChonkyIconName.fallbackIcon}\n                    fixedWidth={true}\n                />\n            </div>\n        ) : null;\n\n    const className = c({\n        [externalClassName ?? '']: true,\n        [classes.baseButton]: true,\n        [classes.iconOnlyButton]: iconOnly,\n        [classes.activeButton]: !!active,\n    });\n    return (\n        <Button\n            className={className}\n            onClick={onClick}\n            title={tooltip ? tooltip : text}\n            disabled={disabled || !onClick}\n        >\n            {iconComponent}\n            {text && !iconOnly && <span>{text}</span>}\n            {dropdown && (\n                <div className={classes.iconDropdown}>\n                    <ChonkyIcon\n                        icon={icon ? icon : ChonkyIconName.dropdown}\n                        fixedWidth={true}\n                    />\n                </div>\n            )}\n        </Button>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        textTransform: important('none'),\n        letterSpacing: important(0),\n        minWidth: important('auto'),\n        lineHeight: theme.toolbar.lineHeight,\n        height: theme.toolbar.size,\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    iconWithText: {\n        marginRight: 8,\n    },\n    iconOnlyButton: {\n        width: theme.toolbar.size,\n        textAlign: 'center',\n    },\n    iconDropdown: {\n        fontSize: '0.7em',\n        marginLeft: 2,\n        marginTop: 1,\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarButtonProps {\n    fileActionId: string;\n}\n\nexport const SmartToolbarButton: React.FC<SmartToolbarButtonProps> = React.memo(\n    props => {\n        const { fileActionId } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName, buttonTooltip } = useLocalizedFileActionStrings(action);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarButton\n                text={buttonName}\n                tooltip={buttonTooltip}\n                icon={icon}\n                iconOnly={button.iconOnly}\n                active={active}\n                onClick={triggerAction}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDndHoverOpen, useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from '../file-list/FileEntry-hooks';\nimport { FolderChainItem } from './FileNavbar-hooks';\nimport { ToolbarButton } from './ToolbarButton';\n\nexport interface FolderChainButtonProps {\n    first: boolean;\n    current: boolean;\n    item: FolderChainItem;\n}\n\nexport const FolderChainButton: React.FC<FolderChainButtonProps> = React.memo(\n    ({ first, current, item }) => {\n        const { file, disabled, onClick } = item;\n        const { dndIsOver, dndCanDrop, drop } = useFileDrop({\n            file,\n            forceDisableDrop: !file || current,\n        });\n        const dndState = useMemo<DndEntryState>(\n            () => ({\n                dndIsOver,\n                dndCanDrop,\n                dndIsDragging: false,\n            }),\n            [dndCanDrop, dndIsOver]\n        );\n        useDndHoverOpen(file, dndState);\n        const dndIconName = useDndIcon(dndState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const classes = useStyles(dndState);\n        const className = c({\n            [classes.baseBreadcrumb]: true,\n            [classes.disabledBreadcrumb]: disabled,\n            [classes.currentBreadcrumb]: current,\n        });\n        const text = file ? file.name : 'Loading...';\n        const icon =\n            first && file?.folderChainIcon === undefined\n                ? ChonkyIconName.folder\n                : file?.folderChainIcon;\n\n        return (\n            <div className={classes.buttonContainer} ref={file ? drop : null}>\n                {file && dndIconName && (\n                    <div className={classes.dndIndicator}>\n                        <ChonkyIcon icon={dndIconName} fixedWidth={true} />\n                    </div>\n                )}\n                <ToolbarButton\n                    icon={icon}\n                    className={className}\n                    text={text}\n                    disabled={disabled}\n                    onClick={onClick}\n                />\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    buttonContainer: {\n        position: 'relative',\n    },\n    baseBreadcrumb: {\n        color: (dndState: DndEntryState) => {\n            let color = theme.palette.text.primary;\n            if (dndState.dndIsOver) {\n                color = dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor;\n            }\n            return important(color);\n        },\n    },\n    disabledBreadcrumb: {\n        // Constant function here is on purpose. Without the function, the color here\n        // does not override the `baseBreadcrumb` color from above.\n        color: () => important(theme.palette.text.disabled),\n    },\n    currentBreadcrumb: {\n        textDecoration: important('underline'),\n    },\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor,\n        backgroundColor: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask,\n        lineHeight: `calc(${theme.toolbar.lineHeight} - 6px)`,\n        transform: 'translateX(-50%) translateY(-50%)',\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 6,\n        width: theme.toolbar.size - 6,\n        boxSizing: 'border-box',\n        position: 'absolute',\n        textAlign: 'center',\n        left: '50%',\n        top: '50%',\n        zIndex: 5,\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useFolderChainItems } from './FileNavbar-hooks';\nimport { FolderChainButton } from './FolderChainButton';\nimport { SmartToolbarButton } from './ToolbarButton';\n\nexport interface FileNavbarProps {}\n\nexport const FileNavbar: React.FC<FileNavbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const folderChainItems = useFolderChainItems();\n\n    const folderChainComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < folderChainItems.length; ++i) {\n            const key = `folder-chain-${i}`;\n            const component = (\n                <FolderChainButton\n                    key={key}\n                    first={i === 0}\n                    current={i === folderChainItems.length - 1}\n                    item={folderChainItems[i]}\n                />\n            );\n            components.push(component);\n        }\n        return components;\n    }, [folderChainItems]);\n\n    return (\n        <Box className={classes.navbarWrapper}>\n            <Box className={classes.navbarContainer}>\n                <SmartToolbarButton fileActionId={ChonkyActions.OpenParentFolder.id} />\n                <Breadcrumbs\n                    className={classes.navbarBreadcrumbs}\n                    classes={{ separator: classes.separator }}\n                >\n                    {folderChainComponents}\n                </Breadcrumbs>\n            </Box>\n        </Box>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    navbarWrapper: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n    },\n    navbarContainer: {\n        display: 'flex',\n    },\n    upDirectoryButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        height: theme.toolbar.size,\n        width: theme.toolbar.size,\n        padding: '0px !important',\n    },\n    navbarBreadcrumbs: {\n        fontSize: important(theme.toolbar.fontSize),\n        flexGrow: 100,\n    },\n    separator: {\n        marginRight: important(4),\n        marginLeft: important(4),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport React, { useCallback, useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarDropdownButtonProps {\n    text: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    onClick?: () => void;\n    disabled?: boolean;\n}\n\nexport const ToolbarDropdownButton = React.forwardRef(\n    (props: ToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { text, active, icon, onClick, disabled } = props;\n        const classes = useStyles();\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const className = c({\n            [classes.baseButton]: true,\n            [classes.activeButton]: active,\n        });\n        return (\n            <MenuItem\n                ref={ref}\n                className={className}\n                onClick={onClick}\n                disabled={disabled}\n            >\n                {icon && (\n                    <ListItemIcon className={classes.icon}>\n                        <ChonkyIcon icon={icon} fixedWidth={true} />\n                    </ListItemIcon>\n                )}\n                <ListItemText primaryTypographyProps={{ className: classes.text }}>\n                    {text}\n                </ListItemText>\n            </MenuItem>\n        );\n    }\n);\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        height: important(theme.toolbar.size),\n        minHeight: important('auto'),\n        minWidth: important('auto'),\n        padding: important(20),\n    },\n    icon: {\n        fontSize: important(theme.toolbar.fontSize),\n        minWidth: important('auto'),\n        color: important('inherit'),\n        marginRight: 8,\n    },\n    text: {\n        fontSize: important(theme.toolbar.fontSize),\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarDropdownButtonProps {\n    fileActionId: string;\n    onClickFollowUp?: () => void;\n}\n\nexport const SmartToolbarDropdownButton = React.forwardRef(\n    (props: SmartToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { fileActionId, onClickFollowUp } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName } = useLocalizedFileActionStrings(action);\n\n        // Combine external click handler with internal one\n        const handleClick = useCallback(() => {\n            triggerAction();\n            if (onClickFollowUp) onClickFollowUp();\n        }, [onClickFollowUp, triggerAction]);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarDropdownButton\n                ref={ref}\n                text={buttonName}\n                icon={icon}\n                onClick={handleClick}\n                active={active}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Menu from '@material-ui/core/Menu';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { FileActionGroup } from '../../types/action-menus.types';\nimport { useLocalizedFileActionGroup } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { ToolbarButton } from './ToolbarButton';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport type ToolbarDropdownProps = FileActionGroup;\n\nexport const ToolbarDropdown: React.FC<ToolbarDropdownProps> = React.memo(props => {\n    const { name, fileActionIds } = props;\n    const [anchor, setAnchor] = React.useState<null | HTMLElement>(null);\n\n    const handleClick = useCallback(\n        (event: React.MouseEvent<HTMLButtonElement>) => setAnchor(event.currentTarget),\n        [setAnchor]\n    );\n    const handleClose = useCallback(() => setAnchor(null), [setAnchor]);\n\n    const menuItemComponents = useMemo(\n        () =>\n            fileActionIds.map(id => (\n                <SmartToolbarDropdownButton\n                    key={`menu-item-${id}`}\n                    fileActionId={id}\n                    onClickFollowUp={handleClose}\n                />\n            )),\n        [fileActionIds, handleClose]\n    );\n\n    const localizedName = useLocalizedFileActionGroup(name);\n    const classes = useStyles();\n    return (\n        <>\n            <ToolbarButton text={localizedName} onClick={handleClick} dropdown={true} />\n            <Menu\n                autoFocus\n                keepMounted\n                elevation={2}\n                anchorEl={anchor}\n                onClose={handleClose}\n                open={Boolean(anchor)}\n                transitionDuration={150}\n                classes={{ list: classes.dropdownList }}\n            >\n                {menuItemComponents}\n            </Menu>\n        </>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    dropdownList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport Typography from '@material-ui/core/Typography';\n\nimport { selectHiddenFileCount, selectors, selectSelectionSize } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarInfoProps {}\n\nexport const ToolbarInfo: React.FC<ToolbarInfoProps> = React.memo(() => {\n    const classes = useStyles();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const selectionSize = useSelector(selectSelectionSize);\n    const hiddenCount = useSelector(selectHiddenFileCount);\n\n    const intl = useIntl();\n    const fileCountString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'visibleFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {# items}\n                one {# item}\n                other {# items}\n            }`,\n        },\n        { fileCount: displayFileIds.length }\n    );\n    const selectedString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'selectedFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# selected}\n            }`,\n        },\n        { fileCount: selectionSize }\n    );\n    const hiddenString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'hiddenFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# hidden}\n            }`,\n        },\n        { fileCount: hiddenCount }\n    );\n\n    return (\n        <div className={classes.infoContainer}>\n            <Typography className={classes.infoText} variant=\"body1\">\n                {fileCountString}\n                {(selectedString || hiddenString) && (\n                    <span className={classes.extraInfoSpan}>\n                        (\n                        <span className={classes.selectionSizeText}>\n                            {selectedString}\n                        </span>\n                        {selectedString && hiddenString && ', '}\n                        <span className={classes.hiddenCountText}>{hiddenString}</span>)\n                    </span>\n                )}\n            </Typography>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    infoContainer: {\n        height: theme.toolbar.size,\n        display: 'flex',\n    },\n    infoText: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        fontSize: important(theme.toolbar.fontSize),\n        marginLeft: important(12),\n        height: theme.toolbar.size,\n    },\n    extraInfoSpan: {\n        marginRight: important(8),\n        marginLeft: important(8),\n        opacity: 0.8,\n    },\n    selectionSizeText: {\n        color: theme.colors.textActive,\n    },\n    hiddenCountText: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectSearchString } from '../../redux/selectors';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDebounce } from '../../util/hooks-helpers';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarSearchProps {}\n\nexport const ToolbarSearch: React.FC<ToolbarSearchProps> = React.memo(() => {\n    const intl = useIntl();\n    const searchPlaceholderString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.Toolbar, 'searchPlaceholder'),\n        defaultMessage: 'Search',\n    });\n\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const searchInputRef = useRef<HTMLInputElement>();\n\n    const dispatch = useDispatch();\n    const reduxSearchString = useSelector(selectSearchString);\n\n    const [localSearchString, setLocalSearchString] = useState(reduxSearchString);\n    const [debouncedLocalSearchString] = useDebounce(localSearchString, 300);\n    const [showLoadingIndicator, setShowLoadingIndicator] = useState(false);\n\n    useEffect(() => {\n        dispatch(\n            reduxActions.setFocusSearchInput(() => {\n                if (searchInputRef.current) searchInputRef.current.focus();\n            })\n        );\n        return () => {\n            dispatch(reduxActions.setFocusSearchInput(null));\n        };\n    }, [dispatch]);\n\n    useEffect(() => {\n        setShowLoadingIndicator(false);\n        dispatch(reduxActions.setSearchString(debouncedLocalSearchString));\n    }, [debouncedLocalSearchString, dispatch]);\n\n    const handleChange = useCallback((event: React.FormEvent<HTMLInputElement>) => {\n        setShowLoadingIndicator(true);\n        setLocalSearchString(event.currentTarget.value);\n    }, []);\n    const handleKeyUp = useCallback(\n        (event: React.KeyboardEvent<HTMLInputElement>) => {\n            // Remove focus from the search input field when user presses escape.\n            // Note: We use KeyUp instead of KeyPress because some browser plugins can\n            //       intercept KeyPress events with Escape key.\n            //       @see https://stackoverflow.com/a/37461974\n            if (event.key === 'Escape') {\n                setLocalSearchString('');\n                dispatch(reduxActions.setSearchString(''));\n                if (searchInputRef.current) searchInputRef.current.blur();\n            }\n        },\n        [dispatch]\n    );\n\n    return (\n        <TextField\n            className={classes.searchFieldContainer}\n            size=\"small\"\n            variant=\"outlined\"\n            value={localSearchString}\n            placeholder={searchPlaceholderString}\n            onChange={handleChange as any}\n            inputRef={searchInputRef}\n            InputProps={{\n                onKeyUp: handleKeyUp,\n                startAdornment: (\n                    <InputAdornment className={classes.searchIcon} position=\"start\">\n                        <ChonkyIcon\n                            icon={showLoadingIndicator ? ChonkyIconName.loading : ChonkyIconName.search}\n                            spin={showLoadingIndicator}\n                        />\n                    </InputAdornment>\n                ),\n                className: classes.searchFieldInput,\n            }}\n            inputProps={{ className: classes.searchFieldInputInner }}\n        />\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    searchFieldContainer: {\n        height: theme.toolbar.size,\n        width: 150,\n    },\n    searchIcon: {\n        fontSize: '0.9em',\n        opacity: 0.75,\n    },\n    searchFieldInput: {\n        lineHeight: important(0),\n        padding: important(0),\n        margin: important(0),\n        fontSize: important(theme.toolbar.fontSize),\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 4,\n        paddingLeft: important(8),\n        marginTop: 2,\n    },\n    searchFieldInputInner: {\n        lineHeight: important(`${theme.toolbar.size - 4}px`),\n        fontSize: important(theme.toolbar.fontSize),\n        height: important(theme.toolbar.size - 4),\n        padding: important([0, 8, 0, 0]),\n        margin: important(0),\n        '-webkit-appearance': 'none',\n    },\n}));\n","import React, { ReactElement, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectToolbarItems } from '../../redux/selectors';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { SmartToolbarButton } from './ToolbarButton';\nimport { ToolbarDropdown } from './ToolbarDropdown';\nimport { ToolbarInfo } from './ToolbarInfo';\nimport { ToolbarSearch } from './ToolbarSearch';\n\nexport interface FileToolbarProps {}\n\nexport const FileToolbar: React.FC<FileToolbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const toolbarItems = useSelector(selectToolbarItems);\n\n    const toolbarItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < toolbarItems.length; ++i) {\n            const item = toolbarItems[i];\n\n            const key = `toolbar-item-${typeof item === 'string' ? item : item.name}`;\n            const component =\n                typeof item === 'string' ? (\n                    <SmartToolbarButton key={key} fileActionId={item} />\n                ) : (\n                    <ToolbarDropdown\n                        key={key}\n                        name={item.name}\n                        fileActionIds={item.fileActionIds}\n                    />\n                );\n            components.push(component);\n        }\n        return components;\n    }, [toolbarItems]);\n\n    return (\n        <div className={classes.toolbarWrapper}>\n            <div className={classes.toolbarContainer}>\n                <div className={classes.toolbarLeft}>\n                    <ToolbarSearch />\n                    <ToolbarInfo />\n                </div>\n                <div className={classes.toolbarRight}>{toolbarItemComponents}</div>\n            </div>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    toolbarWrapper: {},\n    toolbarContainer: {\n        flexWrap: 'wrap-reverse',\n        display: 'flex',\n    },\n    toolbarLeft: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        flexGrow: 10000,\n        display: 'flex',\n    },\n    toolbarLeftFiller: {\n        flexGrow: 10000,\n    },\n    toolbarRight: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        display: 'flex',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useContext } from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileListEmptyProps {\n    width: number;\n    height: number;\n}\n\nexport const FileListEmpty: React.FC<FileListEmptyProps> = props => {\n    const { width, height } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const style: CSSProperties = {\n        width,\n        height,\n    };\n\n    const intl = useIntl();\n    const emptyString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.FileList, 'nothingToShow'),\n        defaultMessage: 'Nothing to show',\n    });\n\n    return (\n        <div className={classes.fileListEmpty} style={style}>\n            <div className={classes.fileListEmptyContent}>\n                <ChonkyIcon icon={ChonkyIconName.folderOpen} />\n                &nbsp; {emptyString}\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileListEmpty: {\n        color: theme.palette.text.disabled,\n        position: 'relative',\n        textAlign: 'center',\n        fontSize: '1.2em',\n    },\n    fileListEmptyContent: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        left: '50%',\n        top: '50%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { selectDoubleClickDelay } from '../../redux/selectors';\nimport {\n    KeyboardClickEvent,\n    KeyboardClickEventHandler,\n    MouseClickEvent,\n    MouseClickEventHandler,\n} from './ClickableWrapper';\n\nexport const useClickHandler = (\n    onSingleClick: Nilable<MouseClickEventHandler>,\n    onDoubleClick: Nilable<MouseClickEventHandler>\n) => {\n    const doubleClickDelay = useSelector(selectDoubleClickDelay);\n\n    const counter = useRef({\n        clickCount: 0,\n        clickTimeout: null as Nullable<number>,\n    });\n\n    return useCallback(\n        (event: React.MouseEvent) => {\n            const mouseClickEvent: MouseClickEvent = {\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey || event.metaKey,\n                shiftKey: event.shiftKey,\n\n            };\n\n            counter.current.clickCount++;\n            if (counter.current.clickCount === 1) {\n                if (onSingleClick) {\n                    event.preventDefault();\n                    onSingleClick(mouseClickEvent);\n                }\n                counter.current.clickCount = 1;\n                // @ts-ignore\n                counter.current.clickTimeout = setTimeout(\n                    () => (counter.current.clickCount = 0),\n                    doubleClickDelay\n                );\n            } else if (counter.current.clickCount === 2) {\n                if (onDoubleClick) {\n                    event.preventDefault();\n                    onDoubleClick(mouseClickEvent);\n                }\n                if (typeof counter.current.clickTimeout === 'number') {\n                    clearTimeout(counter.current.clickTimeout);\n                    counter.current.clickTimeout = null;\n                    counter.current.clickCount = 0;\n                }\n            }\n        },\n        [doubleClickDelay, onSingleClick, onDoubleClick, counter]\n    );\n};\n\nexport const useKeyDownHandler = (onKeyboardClick?: KeyboardClickEventHandler) => {\n    return useCallback(\n        (event: React.KeyboardEvent) => {\n            if (!onKeyboardClick) return;\n\n            const keyboardClickEvent: KeyboardClickEvent = {\n                enterKey: event.nativeEvent.code === 'Enter',\n                spaceKey: event.nativeEvent.code === 'Space',\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey,\n                shiftKey: event.shiftKey,\n            };\n\n            if (keyboardClickEvent.spaceKey || keyboardClickEvent.enterKey) {\n                event.preventDefault();\n                event.stopPropagation();\n                onKeyboardClick(keyboardClickEvent);\n            }\n        },\n        [onKeyboardClick]\n    );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback } from 'react';\nimport { AnyObjectWithStringKeys } from 'tsdef';\n\nimport { useClickHandler, useKeyDownHandler } from './ClickableWrapper-hooks';\n\nexport interface MouseClickEvent {\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type MouseClickEventHandler = (event: MouseClickEvent) => void;\n\nexport interface KeyboardClickEvent {\n    enterKey: boolean;\n    spaceKey: boolean;\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type KeyboardClickEventHandler = (event: KeyboardClickEvent) => void;\n\nexport interface ClickableWrapperProps {\n    wrapperTag: any;\n    passthroughProps?: any;\n\n    onSingleClick?: MouseClickEventHandler;\n    onDoubleClick?: MouseClickEventHandler;\n    onKeyboardClick?: KeyboardClickEventHandler;\n    setFocused?: (focused: boolean) => void;\n}\n\nexport const ClickableWrapper: React.FC<ClickableWrapperProps> = props => {\n    const {\n        children,\n        wrapperTag: WrapperTag,\n        passthroughProps,\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n        setFocused,\n    } = props;\n\n    const handleClick = useClickHandler(onSingleClick, onDoubleClick);\n    const handleKeyDown = useKeyDownHandler(onKeyboardClick);\n\n    const compProps: AnyObjectWithStringKeys = {\n        onFocus: useCallback(() => setFocused && setFocused(true), [setFocused]),\n        onBlur: useCallback(() => setFocused && setFocused(false), [setFocused]),\n    };\n\n    if (onSingleClick || onDoubleClick || onKeyboardClick) {\n        compProps.onClick = handleClick;\n        compProps.onKeyDown = handleKeyDown;\n        compProps.tabIndex = 0;\n    }\n\n    const mergedProps = { ...compProps, ...passthroughProps };\n    return <WrapperTag {...mergedProps}>{children}</WrapperTag>;\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { FileData } from '../../types/file.types';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileNameComponent, useModifierIconComponents } from './FileEntry-hooks';\n\nexport interface FileEntryNameProps {\n    file: Nullable<FileData>;\n    className?: string;\n}\n\nexport const FileEntryName: React.FC<FileEntryNameProps> = React.memo(({ file, className }) => {\n    const modifierIconComponents = useModifierIconComponents(file);\n    const fileNameComponent = useFileNameComponent(file);\n\n    const classes = useStyles();\n    return (\n        <span className={className} title={file ? file.name : undefined}>\n            {modifierIconComponents.length > 0 && (\n                <span className={classes.modifierIcons}>{modifierIconComponents}</span>\n            )}\n            {fileNameComponent}\n        </span>\n    );\n});\nFileEntryName.displayName = 'FileEntryName';\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    modifierIcons: {\n        color: theme.palette.text.hint,\n        position: 'relative',\n        fontSize: '0.775em',\n        paddingRight: 5,\n    },\n}));\n","import React, { useContext } from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const CompactEntry: React.FC<FileEntryProps> = React.memo(\n    // @ts-ignore\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n\n        const classes = useStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={entryState.icon}\n                        spin={entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div className={classes.listFileEntryDescription}>\n                    <div\n                        className={classes.listFileEntryName}\n                        title={file ? file.name : undefined}\n                    >\n                        <FileEntryName file={file} />\n                    </div>\n                    <div className={classes.listFileEntryProperties}>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileModDateString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={5} maxLength={15} />\n                            )}\n                        </div>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileSizeString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={10} maxLength={20} />\n                            )}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"chonky-file-entry-outline\"></div>\n                <div className=\"chonky-file-entry-selection\"></div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        fontSize: theme.listFileEntry.fontSize,\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntryIcon: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: 'inset rgba(255, 255, 255, 0.5) 0 0 0 999px',\n        borderRadius: theme.listFileEntry.iconBorderRadius,\n        fontSize: theme.listFileEntry.iconFontSize,\n        color: '#fff',\n        padding: 8,\n    },\n    listFileEntryDescription: {\n        flexDirection: 'column',\n        display: 'flex',\n        flexGrow: 1,\n    },\n    listFileEntryName: {\n        padding: [0, 8, 4, 8],\n    },\n    listFileEntryProperties: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        flexDirection: 'row',\n        display: 'flex',\n    },\n    listFileEntryProperty: {\n        padding: [0, 8],\n        opacity: 0.4,\n    },\n}));\n","import React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { useDndHoverOpen, useFileEntryDnD } from '../../util/dnd';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileEntryProps {\n    file: Nullable<FileData>;\n    children: (dndState: DndEntryState) => React.ReactElement;\n}\n\nexport const DnDFileEntry = React.memo(({ file, children }: DnDFileEntryProps) => {\n    const { drop, drag, dndState } = useFileEntryDnD(file);\n\n    useDndHoverOpen(file, dndState);\n    const classes = useStyles();\n    return (\n        <div ref={drop} className={classes.fillParent}>\n            <div\n                ref={FileHelper.isDraggable(file) ? drag : null}\n                className={classes.fillParent}\n            >\n                {children(dndState)}\n            </div>\n        </div>\n    );\n});\n\nexport const useStyles = makeLocalChonkyStyles(() => ({\n    fillParent: {\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport c from 'classnames';\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileThumbnailProps {\n    className: string;\n    thumbnailUrl: Nullable<string>;\n}\n\nexport const FileThumbnail: React.FC<FileThumbnailProps> = React.memo(props => {\n    const { className, thumbnailUrl } = props;\n\n    const thumbnailStyle: React.CSSProperties = thumbnailUrl ? { backgroundImage: `url('${thumbnailUrl}')` } : {};\n\n    const classes = useStyles();\n    return <div className={c([className, classes.fileThumbnail])} style={thumbnailStyle} />;\n});\nFileThumbnail.displayName = 'FileThumbnail';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileThumbnail: {\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n        backgroundSize: 'contain',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from './FileEntry-hooks';\n\nexport interface DnDIndicatorProps {\n    className: string;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryDndIndicator: React.FC<DnDIndicatorProps> = React.memo(props => {\n    const { className: externalClassName, dndState } = props;\n    const dndIconName = useDndIcon(dndState);\n    const classes = useStyles(dndState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    if (!dndIconName) return null;\n    const className = c({\n        [classes.dndIndicator]: true,\n        [externalClassName]: true,\n    });\n    return (\n        <div className={className}>\n            <ChonkyIcon icon={dndIconName} />\n        </div>\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : '#000',\n        boxSizing: 'border-box',\n        position: 'absolute',\n        fontSize: '1.2em',\n        opacity: 0.6,\n        padding: 6,\n        '&:before': {\n            borderBottom: '50px solid transparent',\n            borderLeft: '50px solid #fff',\n            position: 'absolute',\n            content: '\"\"',\n            zIndex: -1,\n            left: 0,\n            top: 0,\n        },\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useEffect } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { FileThumbnail } from './FileThumbnail';\nimport { GridEntryDndIndicator } from './GridEntryDndIndicator';\n\nexport type FileEntryState = {\n    childrenCount: Nullable<number>;\n    color: string;\n    icon: ChonkyIconName | string;\n    thumbnailUrl: Nullable<string>;\n    iconSpin: boolean;\n    selected: boolean;\n    focused: boolean;\n};\n\nexport interface FileEntryPreviewProps {\n    className?: string;\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryPreviewFolder: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const folderClasses = useFolderStyles(entryState);\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const className = c({\n        [folderClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <div className={folderClasses.folderBackSideMid}>\n                <div className={folderClasses.folderBackSideTop} />\n                <div className={folderClasses.folderFrontSide}>\n                    <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n                    <div className={c([fileClasses.fileIcon, folderClasses.fileIcon])}>{entryState.childrenCount}</div>\n                    <div className={commonClasses.selectionIndicator}></div>\n                    <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n                </div>\n            </div>\n        </div>\n    );\n});\nGridEntryPreviewFolder.displayName = 'GridEntryPreviewFolder';\n\nconst useFolderStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    folderBackSideTop: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopLeftRadius: theme.gridFileEntry.borderRadius,\n        borderTopRightRadius: 10,\n        position: 'absolute',\n        right: '60%',\n        height: 13,\n        top: -10,\n        left: 0,\n        '&:after': {\n            borderRightColor: theme.palette.background.paper,\n            borderTopColor: theme.palette.background.paper,\n            borderBottomColor: 'transparent',\n            borderLeftColor: 'transparent',\n            borderWidth: [0, 15, 10, 0],\n            borderStyle: 'solid',\n            position: 'absolute',\n            display: 'block',\n            content: '\"\"',\n            right: 0,\n            top: 0,\n        },\n    },\n    folderBackSideMid: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopRightRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    folderFrontSide: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            if (state.selected) shadows.push('inset rgba(0, 153, 255, .65) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.folderFrontColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        overflow: 'hidden',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    fileIcon: {\n        fontSize: important(theme.gridFileEntry.childrenCountSize),\n    },\n}));\n\nexport const GridEntryPreviewFile: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const className = c({\n        [fileClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n            <div className={fileClasses.fileIcon}>\n                <ChonkyIcon icon={entryState.icon} spin={entryState.iconSpin} />\n            </div>\n            <div className={commonClasses.selectionIndicator}></div>\n            <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n        </div>\n    );\n});\nGridEntryPreviewFile.displayName = 'GridEntryPreviewFile';\n\nconst useFileStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.selected) shadows.push('inset rgba(0,153,255, .65) 0 0 0 3px');\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.fileColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    dndIndicator: {\n        zIndex: 14,\n    },\n    fileIcon: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        fontSize: theme.gridFileEntry.iconSize,\n        opacity: (state: FileEntryState) => (state.thumbnailUrl && !state.focused ? 0 : 1),\n        color: (state: FileEntryState) =>\n            state.focused ? theme.gridFileEntry.iconColorFocused : theme.gridFileEntry.iconColor,\n        position: 'absolute',\n        left: '50%',\n        zIndex: 12,\n        top: '50%',\n    },\n    thumbnail: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        zIndex: 6,\n        bottom: 5,\n        right: 5,\n        left: 5,\n        top: 5,\n    },\n}));\n\nexport const useCommonEntryStyles = makeLocalChonkyStyles(() => ({\n    selectionIndicator: {\n        display: (state: FileEntryState) => (state.selected ? 'block' : 'none'),\n        background:\n            'repeating-linear-gradient(' +\n            '45deg,' +\n            'rgba(0,153,255,.14),' +\n            'rgba(0,153,255,.14) 10px,' +\n            'rgba(0,153,255,.25) 0,' +\n            'rgba(0,153,255,.25) 20px' +\n            ')',\n        backgroundColor: 'rgba(0, 153, 255, .14)',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 10,\n    },\n    focusIndicator: {\n        display: (state: FileEntryState) => (state.focused ? 'block' : 'none'),\n        boxShadow: 'inset rgba(0, 0, 0, 1) 0 0 0 2px',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 11,\n    },\n}));\n","import React from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, GridEntryPreviewFile, GridEntryPreviewFolder } from './GridEntryPreview';\n\nexport const GridEntry: React.FC<FileEntryProps> = React.memo(({ file, selected, focused, dndState }) => {\n    const isDirectory = FileHelper.isDirectory(file);\n    const entryState = useFileEntryState(file, selected, focused);\n\n    const classes = useFileEntryStyles(entryState);\n    const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n    const entryClassName = c({\n        [classes.gridFileEntry]: true,\n    });\n    return (\n        <div className={entryClassName} {...fileEntryHtmlProps}>\n            {isDirectory ? (\n                <GridEntryPreviewFolder\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            ) : (\n                <GridEntryPreviewFile\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            )}\n            <div className={classes.gridFileEntryNameContainer}>\n                <FileEntryName className={classes.gridFileEntryName} file={file} />\n            </div>\n        </div>\n    );\n});\nGridEntry.displayName = 'GridEntry';\n\nconst useFileEntryStyles = makeLocalChonkyStyles(theme => ({\n    gridFileEntry: {\n        flexDirection: 'column',\n        display: 'flex',\n        height: '100%',\n    },\n    gridFileEntryPreview: {\n        flexGrow: 1,\n    },\n    gridFileEntryNameContainer: {\n        fontSize: theme.gridFileEntry.fontSize,\n        wordBreak: 'break-word',\n        textAlign: 'center',\n        paddingTop: 5,\n    },\n    gridFileEntryName: {\n        backgroundColor: (state: FileEntryState) => (state.selected ? 'rgba(0,153,255, .25)' : 'transparent'),\n        textDecoration: (state: FileEntryState) => (state.focused ? 'underline' : 'none'),\n        borderRadius: 3,\n        padding: [2, 4],\n    },\n}));\n","import React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport {\n    useDndIcon,\n    useFileEntryHtmlProps,\n    useFileEntryState,\n} from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, useCommonEntryStyles } from './GridEntryPreview';\n\ninterface StyleState {\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const ListEntry: React.FC<FileEntryProps> = React.memo(\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n        const dndIconName = useDndIcon(dndState);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n        const styleState = useMemo<StyleState>(\n            () => ({\n                entryState,\n                dndState,\n            }),\n            [dndState, entryState]\n        );\n        const classes = useStyles(styleState);\n        const commonClasses = useCommonEntryStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={commonClasses.focusIndicator}></div>\n                <div\n                    className={c([\n                        commonClasses.selectionIndicator,\n                        classes.listFileEntrySelection,\n                    ])}\n                ></div>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={dndIconName ?? entryState.icon}\n                        spin={dndIconName ? false : entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div\n                    className={classes.listFileEntryName}\n                    title={file ? file.name : undefined}\n                >\n                    <FileEntryName file={file} />\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileModDateString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={5} maxLength={15} />\n                    )}\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileSizeString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={10} maxLength={20} />\n                    )}\n                </div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        boxShadow: `inset ${theme.palette.divider} 0 -1px 0`,\n        fontSize: theme.listFileEntry.fontSize,\n        color: ({ dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : 'inherit',\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntrySelection: {\n        opacity: 0.6,\n    },\n    listFileEntryIcon: {\n        color: ({ entryState, dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : entryState.color,\n        fontSize: theme.listFileEntry.iconFontSize,\n        boxSizing: 'border-box',\n        padding: [2, 4],\n        zIndex: 20,\n    },\n    listFileEntryName: {\n        textOverflow: 'ellipsis',\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '1 1 300px',\n        paddingLeft: 8,\n        zIndex: 20,\n    },\n    listFileEntryProperty: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '0 1 150px',\n        padding: [2, 8],\n        zIndex: 20,\n    },\n}));\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileData, selectIsDnDDisabled, selectIsFileSelected } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { ClickableWrapper, ClickableWrapperProps } from '../internal/ClickableWrapper';\nimport { CompactEntry } from './CompactEntry';\nimport { DnDFileEntry } from './DnDFileEntry';\nimport { useFileClickHandlers } from './FileEntry-hooks';\nimport { GridEntry } from './GridEntry';\nimport { ListEntry } from './ListEntry';\n\nexport interface SmartFileEntryProps {\n    fileId: Nullable<string>;\n    displayIndex: number;\n    fileViewMode: FileViewMode;\n}\n\nconst disabledDndState: DndEntryState = {\n    dndIsDragging: false,\n    dndIsOver: false,\n    dndCanDrop: false,\n};\n\nexport const SmartFileEntry: React.FC<SmartFileEntryProps> = React.memo(({ fileId, displayIndex, fileViewMode }) => {\n    const classes = useStyles();\n\n    // Basic properties\n    const file = useParamSelector(selectFileData, fileId);\n    const selected = useParamSelector(selectIsFileSelected, fileId);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n\n    // Clickable wrapper properties\n    const fileClickHandlers = useFileClickHandlers(file, displayIndex);\n    const [focused, setFocused] = useState(false);\n    const clickableWrapperProps: ClickableWrapperProps = {\n        wrapperTag: 'div',\n        passthroughProps: { className: classes.fileEntryClickableWrapper },\n        ...(FileHelper.isClickable(file) ? fileClickHandlers : undefined),\n        setFocused,\n    };\n\n    // File entry properties\n    const fileEntryProps: Omit<FileEntryProps, 'dndState'> = {\n        file,\n        selected,\n        focused,\n    };\n\n    let EntryComponent: React.FC<FileEntryProps>;\n    if (fileViewMode === FileViewMode.List) EntryComponent = ListEntry;\n    else if (fileViewMode === FileViewMode.Compact) EntryComponent = CompactEntry;\n    else EntryComponent = GridEntry;\n\n    return dndDisabled ? (\n        <ClickableWrapper {...clickableWrapperProps}>\n            <EntryComponent {...fileEntryProps} dndState={disabledDndState} />\n        </ClickableWrapper>\n    ) : (\n        <DnDFileEntry file={file}>\n            {dndState => (\n                <ClickableWrapper {...clickableWrapperProps}>\n                    <EntryComponent {...fileEntryProps} dndState={dndState} />\n                </ClickableWrapper>\n            )}\n        </DnDFileEntry>\n    );\n});\nSmartFileEntry.displayName = 'SmartFileEntry';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileEntryClickableWrapper: {\n        // We disable default browser outline because Chonky provides its own outline\n        // (which doesn't compromise accessibility, hopefully)\n        outline: 'none !important',\n        position: 'relative',\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { VariableSizeGrid } from 'react-window';\n\nimport { ChonkyActions } from '../../action-definitions';\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewConfigGrid } from '../../types/file-view.types';\nimport { RootState } from '../../types/redux.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeGlobalChonkyStyles, useIsMobileBreakpoint } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListGridProps {\n    width: number;\n    height: number;\n}\n\ninterface GridConfig {\n    rowCount: number;\n    columnCount: number;\n    gutter: number;\n    rowHeight: number;\n    columnWidth: number;\n}\n\nexport const isMobileDevice = () => {\n    // noinspection JSDeprecatedSymbols\n    return typeof window.orientation !== 'undefined' || navigator.userAgent.indexOf('IEMobile') !== -1;\n};\n\nexport const getGridConfig = (\n    width: number,\n    fileCount: number,\n    viewConfig: FileViewConfigGrid,\n    isMobileBreakpoint: boolean\n): GridConfig => {\n    const gutter = isMobileBreakpoint ? 5 : 8;\n    const scrollbar = isMobileDevice() ? 0 : 18;\n\n    let columnCount: number;\n    let columnWidth: number;\n    if (isMobileBreakpoint) {\n        columnCount = 2;\n        columnWidth = (width - gutter - scrollbar) / columnCount;\n    } else {\n        columnWidth = viewConfig.entryWidth;\n        columnCount = Math.max(1, Math.floor((width - scrollbar) / (columnWidth + gutter)));\n    }\n\n    const rowCount = Math.ceil(fileCount / columnCount);\n\n    return {\n        rowCount,\n        columnCount,\n        gutter,\n        rowHeight: viewConfig.entryHeight,\n        columnWidth,\n    };\n};\n\nexport const GridContainer: React.FC<FileListGridProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig) as FileViewConfigGrid;\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const fileCount = useMemo(() => displayFileIds.length, [displayFileIds]);\n\n    const gridRef = useRef<VariableSizeGrid>();\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n\n    // Whenever the grid config changes at runtime, we call a method on the\n    // `VariableSizeGrid` handle to reset column width/row height cache.\n    // !!! Note that we deliberately update the `gridRef` firsts and update the React\n    //     state AFTER that. This is needed to avoid file entries jumping up/down.\n    const [gridConfig, setGridConfig] = useState(getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint));\n    const gridConfigRef = useRef(gridConfig);\n    useEffect(() => {\n        const oldConf = gridConfigRef.current;\n        const newConf = getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint);\n\n        gridConfigRef.current = newConf;\n        if (gridRef.current) {\n            if (oldConf.rowCount !== newConf.rowCount) {\n                gridRef.current.resetAfterRowIndex(Math.min(oldConf.rowCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnCount !== newConf.columnCount) {\n                gridRef.current.resetAfterColumnIndex(Math.min(oldConf.columnCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnWidth !== newConf.columnWidth) {\n                gridRef.current.resetAfterIndices({ columnIndex: 0, rowIndex: 0 });\n            }\n        }\n\n        setGridConfig(newConf);\n    }, [setGridConfig, gridConfigRef, isMobileBreakpoint, width, viewConfig, fileCount]);\n\n    const sizers = useMemo(() => {\n        const gc = gridConfigRef;\n        return {\n            getColumnWidth: (index: number) =>\n                gc.current.columnWidth! + (index === gc.current.columnCount - 1 ? 0 : gc.current.gutter),\n            getRowHeight: (index: number) =>\n                gc.current.rowHeight + (index === gc.current.rowCount - 1 ? 0 : gc.current.gutter),\n        };\n    }, [gridConfigRef]);\n\n    const displayFileIdsRef = useInstanceVariable(useSelector(selectors.getDisplayFileIds));\n    const getItemKey = useCallback(\n        (data: { columnIndex: number; rowIndex: number; data: any }) => {\n            const index = data.rowIndex * gridConfigRef.current.columnCount + data.columnIndex;\n\n            return displayFileIdsRef.current[index] ?? `loading-file-${index}`;\n        },\n        [gridConfigRef, displayFileIdsRef]\n    );\n\n    const cellRenderer = useCallback(\n        (data: { rowIndex: number; columnIndex: number; style: CSSProperties }) => {\n            const gc = gridConfigRef;\n            const index = data.rowIndex * gc.current.columnCount + data.columnIndex;\n            const fileId = displayFileIds[index];\n            if (displayFileIds[index] === undefined) return null;\n\n            const styleWithGutter: CSSProperties = {\n                ...data.style,\n                paddingRight: data.columnIndex === gc.current.columnCount - 1 ? 0 : gc.current.gutter,\n                paddingBottom: data.rowIndex === gc.current.rowCount - 1 ? 0 : gc.current.gutter,\n                boxSizing: 'border-box',\n            };\n\n            return (\n                <div style={styleWithGutter}>\n                    <SmartFileEntry fileId={fileId ?? null} displayIndex={index} fileViewMode={viewConfig.mode} />\n                </div>\n            );\n        },\n        [displayFileIds, viewConfig.mode]\n    );\n\n    const classes = useStyles();\n    const gridComponent = useMemo(() => {\n        return (\n            <VariableSizeGrid\n                ref={gridRef as any}\n                className={classes.gridContainer}\n                estimatedRowHeight={gridConfig.rowHeight + gridConfig.gutter}\n                rowHeight={sizers.getRowHeight}\n                estimatedColumnWidth={gridConfig.columnWidth + gridConfig.gutter}\n                columnWidth={sizers.getColumnWidth}\n                columnCount={gridConfig.columnCount}\n                height={height}\n                rowCount={gridConfig.rowCount}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {cellRenderer}\n            </VariableSizeGrid>\n        );\n    }, [\n        classes.gridContainer,\n        gridConfig.rowHeight,\n        gridConfig.gutter,\n        gridConfig.columnWidth,\n        gridConfig.columnCount,\n        gridConfig.rowCount,\n        sizers.getRowHeight,\n        sizers.getColumnWidth,\n        height,\n        width,\n        getItemKey,\n        cellRenderer,\n    ]);\n\n    return gridComponent;\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    gridContainer: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useMemo, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FixedSizeList } from 'react-window';\n\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListListProps {\n    width: number;\n    height: number;\n}\n\nexport const ListContainer: React.FC<FileListListProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const listRef = useRef<FixedSizeList>();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const displayFileIdsRef = useInstanceVariable(displayFileIds);\n    const getItemKey = useCallback(\n        (index: number) => displayFileIdsRef.current[index] ?? `loading-file-${index}`,\n        [displayFileIdsRef]\n    );\n\n    const classes = useStyles();\n    const listComponent = useMemo(() => {\n        // When entry size is null, we use List view\n        const rowRenderer = (data: { index: number; style: CSSProperties }) => {\n            return (\n                <div style={data.style}>\n                    <SmartFileEntry\n                        fileId={displayFileIds[data.index] ?? null}\n                        displayIndex={data.index}\n                        fileViewMode={FileViewMode.List}\n                    />\n                </div>\n            );\n        };\n\n        return (\n            <FixedSizeList\n                ref={listRef as any}\n                className={classes.listContainer}\n                itemSize={viewConfig.entryHeight}\n                height={height}\n                itemCount={displayFileIds.length}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {rowRenderer}\n            </FixedSizeList>\n        );\n    }, [\n        classes.listContainer,\n        viewConfig.entryHeight,\n        height,\n        displayFileIds,\n        width,\n        getItemKey,\n    ]);\n\n    return listComponent;\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listContainer: {\n        borderTop: `solid 1px ${theme.palette.divider}`,\n    },\n}));\n","import React, { UIEvent, useCallback, useContext, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectCurrentFolder, selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    c, getStripeGradient, makeGlobalChonkyStyles, makeLocalChonkyStyles\n} from '../../util/styles';\nimport { FileListEmpty } from './FileListEmpty';\nimport { GridContainer } from './GridContainer';\nimport { ListContainer } from './ListContainer';\n\nexport interface FileListProps {\n    onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n}\n\ninterface StyleState {\n    dndCanDrop: boolean;\n    dndIsOverCurrent: boolean;\n}\n\nexport const FileList: React.FC<FileListProps> = React.memo((props: FileListProps) => {\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const currentFolder = useSelector(selectCurrentFolder);\n    const { drop, dndCanDrop, dndIsOverCurrent } = useFileDrop({ file: currentFolder });\n    const styleState = useMemo<StyleState>(() => ({ dndCanDrop, dndIsOverCurrent }), [dndCanDrop, dndIsOverCurrent]);\n\n    const localClasses = useLocalStyles(styleState);\n    const classes = useStyles(viewConfig);\n    const { onScroll } = props;\n\n    // In Chonky v0.x, this field was user-configurable. In Chonky v1.x+, we hardcode\n    // this to `true` to simplify configuration. Users can just wrap Chonky in their\n    // own `div` if they want to have finer control over the height.\n    const fillParentContainer = true;\n\n    const listRenderer = useCallback(\n        ({ width, height }: { width: number; height: number }) => {\n            if (displayFileIds.length === 0) {\n                return <FileListEmpty width={width} height={viewConfig.entryHeight} />;\n            } else if (viewConfig.mode === FileViewMode.List) {\n                return <ListContainer width={width} height={height} />;\n            } else {\n                return <GridContainer width={width} height={height} />;\n            }\n        },\n        [displayFileIds, viewConfig]\n    );\n\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    return (\n        <div onScroll={onScroll} ref={drop} className={c([classes.fileListWrapper, localClasses.fileListWrapper])} role=\"list\">\n            <div className={localClasses.dndDropZone}>\n                <div className={localClasses.dndDropZoneIcon}>\n                    <ChonkyIcon icon={dndCanDrop ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop} />\n                </div>\n            </div>\n            <AutoSizer disableHeight={!fillParentContainer}>{listRenderer}</AutoSizer>\n        </div>\n    );\n});\nFileList.displayName = 'FileList';\n\nconst useLocalStyles = makeLocalChonkyStyles(theme => ({\n    fileListWrapper: {\n        minHeight: ChonkyActions.EnableGridView.fileViewConfig.entryHeight + 2,\n        background: (state: StyleState) =>\n            state.dndIsOverCurrent && state.dndCanDrop\n                ? state.dndCanDrop\n                    ? getStripeGradient(theme.dnd.fileListCanDropMaskOne, theme.dnd.fileListCanDropMaskTwo)\n                    : getStripeGradient(theme.dnd.fileListCannotDropMaskOne, theme.dnd.fileListCannotDropMaskTwo)\n                : 'none',\n    },\n    dndDropZone: {\n        display: (state: StyleState) =>\n            // When we cannot drop, we don't show an indicator at all\n            state.dndIsOverCurrent && state.dndCanDrop ? 'block' : 'none',\n        borderRadius: theme.gridFileEntry.borderRadius,\n        pointerEvents: 'none',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 2,\n    },\n    dndDropZoneIcon: {\n        backgroundColor: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask),\n        color: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor),\n        borderRadius: theme.gridFileEntry.borderRadius,\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        textAlign: 'center',\n        lineHeight: '60px',\n        fontSize: '2em',\n        left: '50%',\n        height: 60,\n        top: '50%',\n        width: 60,\n    },\n}));\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileListWrapper: {\n        height: '100%',\n        maxHeight: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { ReactElement, useEffect, useMemo } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Menu from '@material-ui/core/Menu';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuConfig, selectContextMenuItems } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuDismisser } from './FileContextMenu-hooks';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport interface FileContextMenuProps {}\n\nexport const FileContextMenu: React.FC<FileContextMenuProps> = React.memo(() => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(reduxActions.setContextMenuMounted(true));\n        return () => {\n            dispatch(reduxActions.setContextMenuMounted(false));\n        };\n    }, [dispatch]);\n\n    const intl = useIntl();\n    const browserMenuShortcutString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.FileContextMenu, 'browserMenuShortcut'),\n            defaultMessage: 'Browser menu: {shortcut}',\n        },\n        { shortcut: <strong>Alt + Right Click</strong> }\n    );\n\n    const contextMenuConfig = useSelector(selectContextMenuConfig);\n    const contextMenuItems = useSelector(selectContextMenuItems);\n\n    const hideContextMenu = useContextMenuDismisser();\n    const contextMenuItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < contextMenuItems.length; ++i) {\n            const item = contextMenuItems[i];\n\n            if (typeof item === 'string') {\n                components.push(\n                    <SmartToolbarDropdownButton\n                        key={`context-menu-item-${item}`}\n                        fileActionId={item}\n                        onClickFollowUp={hideContextMenu}\n                    />\n                );\n            } else {\n                item.fileActionIds.map(id =>\n                    components.push(\n                        <SmartToolbarDropdownButton\n                            key={`context-menu-item-${item.name}-${id}`}\n                            fileActionId={id}\n                            onClickFollowUp={hideContextMenu}\n                        />\n                    )\n                );\n            }\n        }\n        return components;\n    }, [contextMenuItems, hideContextMenu]);\n\n    const anchorPosition = useMemo(\n        () => (contextMenuConfig ? { top: contextMenuConfig.mouseY, left: contextMenuConfig.mouseX } : undefined),\n        [contextMenuConfig]\n    );\n\n    const classes = useStyles();\n    return (\n        <Menu\n            elevation={2}\n            disablePortal\n            onClose={hideContextMenu}\n            transitionDuration={150}\n            open={!!contextMenuConfig}\n            anchorPosition={anchorPosition}\n            anchorReference=\"anchorPosition\"\n            classes={{ list: classes.contextMenuList }}\n        >\n            {contextMenuItemComponents}\n            <ListSubheader component=\"div\" className={classes.browserMenuTooltip}>\n                {browserMenuShortcutString}\n            </ListSubheader>\n        </Menu>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    contextMenuList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    browserMenuTooltip: {\n        lineHeight: important('30px'),\n        fontSize: important('0.7em'),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport { createGenerateClassName, StylesProvider } from '@material-ui/core';\nimport React from 'react';\n\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { FileList } from '../file-list/FileList';\nimport { FileBrowser } from './FileBrowser';\nimport { FileContextMenu } from './FileContextMenu';\nimport { FileNavbar } from './FileNavbar';\nimport { FileToolbar } from './FileToolbar';\n\nconst muiJSSClassNameGenerator = createGenerateClassName({\n    // Seed property is used for prefix jss classes generated by material ui.\n    // Added to prevent style collisions\n    seed: 'chonky-generated',\n  });\n\nexport const FullFileBrowser = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        const { onScroll } = props\n        return (\n            <StylesProvider generateClassName={muiJSSClassNameGenerator}>\n                <FileBrowser ref={ref} {...props}>\n                    <FileNavbar />\n                    <FileToolbar />\n                    <FileList onScroll={onScroll}/>\n                    <FileContextMenu/>\n                </FileBrowser>\n            </StylesProvider>\n        );\n    })\n);\nFullFileBrowser.displayName = 'FullFileBrowser';\n","/**\n *\n */\n\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { FileActionData } from '../types/action-handler.types';\nimport { FileAction } from '../types/action.types';\nimport { FileArray, FileData } from '../types/file.types';\nimport { FileHelper } from '../util/file-helper';\n\nexport interface CustomFileData extends FileData {\n    parentId?: string;\n    childrenIds?: string[];\n}\nexport interface CustomFileMap<FT extends CustomFileData> {\n    [fileId: string]: FT;\n}\nexport interface FileMapParams<FT extends CustomFileData> {\n    baseFileMap: CustomFileMap<FT>;\n    initialFolderId: string;\n}\n\nexport const useFolderChain = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n\n        const folderChain = [currentFolder];\n\n        let parentId = currentFolder.parentId;\n        while (parentId) {\n            const parentFile = fileMap[parentId];\n            if (parentFile) {\n                folderChain.unshift(parentFile);\n                parentId = parentFile.parentId;\n            } else {\n                break;\n            }\n        }\n\n        return folderChain;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFiles = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n        const childrenIds = currentFolder.childrenIds!;\n        const files = childrenIds.map((fileId: string) => fileMap[fileId]);\n        return files;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFileMapMethods = <FT extends CustomFileData>(\n    baseFileMap: CustomFileMap<FT>,\n    initialFolderId: string\n) => {\n    const [fileMap, setFileMap] = useState(baseFileMap);\n    const [currentFolderId, setCurrentFolderId] = useState(initialFolderId);\n    const resetFileMap = useCallback(() => {\n        setFileMap(baseFileMap);\n        setCurrentFolderId(initialFolderId);\n    }, [baseFileMap, initialFolderId]);\n    const moveFiles = useCallback(\n        (files: FT[], source: FT, destination: FT) =>\n            setFileMap(currentFileMap => {\n                const newFileMap = { ...currentFileMap };\n                const moveFileIds = new Set(files.map(f => f.id));\n\n                // Delete files from their source folder.\n                const newSourceChildrenIds = source.childrenIds!.filter(id => !moveFileIds.has(id));\n                newFileMap[source.id] = {\n                    ...source,\n                    childrenIds: newSourceChildrenIds,\n                    childrenCount: newSourceChildrenIds.length,\n                };\n\n                // Add the files to their destination folder.\n                const newDestinationChildrenIds = [...destination.childrenIds!, ...files.map(f => f.id)];\n                newFileMap[destination.id] = {\n                    ...destination,\n                    childrenIds: newDestinationChildrenIds,\n                    childrenCount: newDestinationChildrenIds.length,\n                };\n\n                // Finally, update the parent folder ID on the files from source folder\n                // ID to the destination folder ID.\n                files.forEach(file => {\n                    newFileMap[file.id] = {\n                        ...file,\n                        parentId: destination.id,\n                    };\n                });\n\n                return newFileMap;\n            }),\n        []\n    );\n\n    const methods = useMemo(\n        () => ({\n            setFileMap,\n            setCurrentFolderId,\n            resetFileMap,\n            moveFiles,\n        }),\n        [setFileMap, setCurrentFolderId, resetFileMap, moveFiles]\n    );\n    return {\n        fileMap,\n        currentFolderId,\n        methods,\n    };\n};\nexport type FileMethods = ReturnType<typeof useFileMapMethods>['methods'];\n\nexport const useFileActionHandler = (methods: FileMethods) => {\n    return useCallback(\n        (data: FileActionData<FileAction>) => {\n            if (data.id === ChonkyActions.OpenFiles.id) {\n                const { targetFile, files } = data.payload;\n                const fileToOpen = targetFile ?? files[0];\n                if (fileToOpen && FileHelper.isDirectory(fileToOpen)) {\n                    methods.setCurrentFolderId(fileToOpen.id);\n                }\n            } else if (data.id === ChonkyActions.MoveFiles.id) {\n                methods.moveFiles(data.payload.files, data.payload.source!, data.payload.destination);\n            }\n        },\n        [methods]\n    );\n};\n\nexport const useFileMap = <FT extends CustomFileData = CustomFileData>({\n    baseFileMap,\n    initialFolderId,\n}: FileMapParams<FT>) => {\n    const { fileMap, currentFolderId, methods } = useFileMapMethods(baseFileMap, initialFolderId);\n    const folderChain = useFolderChain(fileMap, currentFolderId);\n    const files = useFiles(fileMap, currentFolderId);\n    const fileActionHandler = useFileActionHandler(methods as FileMethods);\n\n    const data = {\n        fileMap,\n        currentFolderId,\n        folderChain,\n        files,\n    };\n    return { data, methods, fileActionHandler };\n};\n"],"names":["useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","UNINITIALIZED_SENTINEL","useStaticValue","factory","valueRef","useRef","current","useInstanceVariable","ref","Logger","error","args","console","warn","debug","formatBullets","bullets","join","FileHelper","isDirectory","file","isDir","isHidden","isSymlink","isEncrypted","isClickable","isOpenable","openable","isSelectable","selectable","isDraggable","draggable","isDroppable","droppable","isDndOpenable","dndOpenable","getModDate","modDate","undefined","parseDate","maybeDate","Date","message","isNaN","getTime","getChildrenCount","childrenCount","sanitizeInputArray","mode","rawArray","sanitizedFiles","errorMessages","Array","isArray","push","nonObjectFileCount","missingFieldFileCount","seenIds","Set","duplicateIds","i","length","item","id","name","has","add","size","repeatedIdsString","from","errorMessageString","arrayString","itemString","sanitizedArray","OptionIds","ShowHiddenFiles","ShowFoldersFirst","DarkMode","SortOrder","selectInstanceId","state","instanceId","selectExternalFileActionHandler","externalFileActionHandler","selectFileActionMap","fileActionMap","selectFileActionIds","fileActionIds","selectFileActionData","fileActionId","selectToolbarItems","toolbarItems","selectContextMenuItems","contextMenuItems","selectFolderChain","folderChain","selectCurrentFolder","currentFolder","selectParentFolder","parentFolder","selectRawFiles","rawFiles","selectFileMap","fileMap","selectCleanFileIds","cleanFileIds","selectFileData","fileId","selectHiddenFileIdMap","hiddenFileIdMap","selectHiddenFileCount","Object","keys","selectFocusSearchInput","focusSearchInput","selectSearchString","searchString","selectSelectionMap","selectionMap","selectSelectedFileIds","selectSelectionSize","selectIsFileSelected","selectSelectedFiles","map","selectSelectedFilesForAction","action","requiresSelection","getSelectedFiles","fileFilter","selectSelectedFilesForActionCount","getSelectedFilesForAction","selectDisableSelection","disableSelection","selectFileViewConfig","fileViewConfig","selectSortActionId","sortActionId","selectSortOrder","sortOrder","selectOptionMap","optionMap","selectOptionValue","optionId","selectThumbnailGenerator","thumbnailGenerator","selectDoubleClickDelay","doubleClickDelay","selectIsDnDDisabled","disableDragAndDrop","selectClearSelectionOnOutsideClick","clearSelectionOnOutsideClick","selectContextMenuMounted","contextMenuMounted","selectContextMenuConfig","contextMenuConfig","selectContextMenuTriggerFile","config","triggerFileId","getFileActionMap","getOptionMap","getFileMap","getFileIds","fileIds","getCleanFileIds","getSortActionId","getSortOrder","getSearchString","_getLastClick","lastClick","makeGetAction","fileActionSelector","createSelector","makeGetOptionValue","defaultValue","makeGetFiles","fileIdsSelector","getSortedFileIds","files","sortAction","showFolderFirst","prepareSortKeySelector","selector","sortFunctions","desc","sortKeySelector","configKeyName","ASC","sortedFileIds","sort","by","getSearcher","cleanFiles","FuzzySearch","caseSensitive","getSearchFilteredFileIds","searcher","search","f","getHiddenFileIdMap","searchFilteredFileIds","showHiddenFiles","searchFilteredFileIdsSet","forEach","getDisplayFileIds","filter","getLastClickIndex","displayFileIds","index","selectors","getFileData","getIsFileSelected","selectedFiles","filters","filteredSelectedFiles","reduce","prevFiles","mergeFileActionsArrays","seenActionIds","addToSeen","a","wasNotSeen","fileActionArrays","duplicateFreeArrays","arr","duplicateFreeArray","concat","thunkUpdateRawFileActions","rawFileActions","disableDefaultFileActions","dispatch","defaultActionsToAdd","disabledActionIds","DefaultFileActions","fileActions","EssentialFileActions","optionDefaults","option","reduxActions","setRawFileActions","setFileActionsErrorMessages","setFileActions","setOptionDefaults","thunkUpdateToolbarNContextMenuItems","excludedToolbarFileActionIds","ChonkyActions","OpenParentFolder","seenToolbarGroups","seenContextMenuGroups","getGroup","itemArray","seenMap","groupName","group","button","toolbar","contextMenu","updateFileActionMenuItems","thunkUpdateDefaultFileViewActionId","getState","setFileViewConfig","thunkActivateSortAction","oldActionId","oldOrder","order","DESC","setSort","actionId","thunkApplySelectionTransform","selectionTransform","prevSelection","hiddenFileIds","newSelection","clearSelection","selectFiles","reset","thunkDispatchFileAction","data","_dispatch","Promise","resolve","thunkRequestFileAction","payload","selectedFilesForAction","contextMenuTriggerFile","actionState","toggleOption","effect","maybeEffectPromise","reduxDispatch","getReduxState","then","effectResult","triggerDispatchAfterEffect","preventDispatch","FileViewMode","ChonkyIconName","defineFileAction","__payloadType","hotkeys","errorMessage","Error","findElementAmongAncestors","maybeElement","predicate","parentElement","elementIsInsideButton","buttonCandidate","element","tagName","toLowerCase","getValueOrFallback","fallback","desiredType","reduxThunks","selectRange","params","fileIdsToSelect","slice","rangeStart","rangeEnd","EssentialActions","MouseClickFile","clickType","OpenFiles","targetFile","ctrlKey","toggleSelection","exclusive","setLastClickIndex","fileDisplayIndex","shiftKey","lastClickIndex","KeyboardClickFile","enterKey","spaceKey","StartDragNDrop","draggedFile","EndDragNDrop","destination","droppedFiles","MoveFiles","ChangeSelection","icon","openParentFolder","iconOnly","OpenFileContextMenu","triggerFile","fileSelected","showContextMenu","mouseX","clientX","mouseY","clientY","DefaultActions","OpenSelection","openFiles","SelectAllFiles","selectAllFiles","ClearSelection","EnableListView","List","entryHeight","list","EnableCompactView","Compact","entryWidth","compact","EnableGridView","Grid","smallThumbnail","SortFilesByName","SortFilesBySize","SortFilesByDate","ToggleHiddenFiles","ToggleShowFoldersFirst","FocusSearchInput","ToggleDarkMode","ExtraActions","CopyFiles","copy","CreateFolder","tooltip","folderCreate","UploadFiles","upload","DownloadFiles","download","DeleteFiles","trash","initialRootState","fileActionsErrorMessages","rawFolderChain","folderChainErrorMessages","filesErrorMessages","searchMode","reducers","setExternalFileActionHandler","setRawFolderChain","setRawFiles","selectedFileId","setSortedFileIds","setHiddenFileIds","setFocusSearchInput","setSearchString","oldValue","setSelectionDisabled","setThumbnailGenerator","setDoubleClickDelay","setDisableDragAndDrop","setClearSelectionOnOutsideClick","setContextMenuMounted","hideContextMenu","createSlice","initialState","actions","rootReducer","reducer","useStoreWatchers","store","selectionWatcher","watch","onSelectionChange","oldSelection","selectedFilesIds","selection","unsubscribeCallbacks","subscribe","unsubscribe","useChonkyStore","chonkyInstanceId","preloadedState","configureStore","middleware","getDefaultMiddleware","serializableCheck","devTools","useParamSelector","parametrizedSelector","selectorParams","useCallback","useSelector","useDTE","actionCreator","useDispatch","usePropReduxUpdate","ChonkyIconPlaceholder","title","React","defaultConfig","onFileAction","disableDragAndDropProvider","defaultSortActionId","defaultFileViewActionId","iconComponent","darkMode","i18n","setChonkyDefaults","key","I18nNamespace","getI18nId","namespace","stringId","getActionI18nId","FileActions","useLocalizedFileActionGroup","intl","useIntl","useMemo","formatMessage","FileActionGroups","defaultMessage","useLocalizedFileActionStrings","buttonName","buttonTooltip","useLocalizedFileEntryStrings","formatters","useContext","ChonkyFormattersContext","fileModDateString","formatFileModDate","fileSizeString","formatFileSize","defaultFormatters","safeModDate","formatDate","dateStyle","timeStyle","_intl","sizeData","filesize","bits","output","symbol","Math","round","createContext","ChonkyIconContext","VideoExtensions","ImageExtensions","AudioExtensions","ColorsLight","ColorsDark","getIconTrie","colourIndex","step","IconsToExtensions","license","model","database","text","archive","image","video","code","info","lock","music","terminal","users","linux","ubuntu","windows","rust","python","nodejs","php","git","adobe","pdf","excel","word","flash","exactTrie","ExactTrie","ignoreCase","pair","extensions","colorCode","iconData","put","iconTrie","useIconData","loading","folder","match","getWithCheckpoints","lightTheme","colors","debugRed","debugBlue","debugGreen","debugPurple","debugYellow","textActive","fontSizes","rootPrimary","margins","rootLayoutMargin","lineHeight","fontSize","buttonRadius","dnd","canDropColor","cannotDropColor","canDropMask","cannotDropMask","fileListCanDropMaskOne","fileListCanDropMaskTwo","fileListCannotDropMaskOne","fileListCannotDropMaskTwo","dragLayer","border","padding","borderRadius","fileList","desktopGridGutter","mobileGridGutter","gridFileEntry","childrenCountSize","iconColorFocused","iconSize","iconColor","fileColorTint","folderBackColorTint","folderFrontColorTint","listFileEntry","propertyFontSize","iconFontSize","iconBorderRadius","darkThemeOverride","mobileThemeOverride","useIsMobileBreakpoint","useMediaQuery","getStripeGradient","colorOne","colorTwo","makeLocalChonkyStyles","styles","createUseStyles","makeGlobalChonkyStyles","makeStyles","selectorMapping","makeGlobalStyles","theme","localStyles","globalStyles","localSelectors","localSelector","globalSelector","jssSelector","useStyles","classes","important","c","classnames","useFileBrowserHandle","useStore","useImperativeHandle","getFileSelection","selectionSet","setFileSelection","requestFileAction","ChonkyBusinessLogicInner","memo","forwardRef","props","displayName","ChonkyBusinessLogic","useDndContextAvailable","dndContext","DndContext","dragDropManager","useDragIfAvailable","dndContextAvailable","mockHook","useHook","useDrag","useDropIfAvailable","useDrop","findClosestChonkyFileId","fileEntryWrapperDiv","dataset","chonkyFileId","useContextMenuTrigger","contextMenuMountedRef","event","altKey","preventDefault","target","useContextMenuDismisser","ChonkyDndFileEntryType","layerStyles","position","pointerEvents","zIndex","left","top","width","height","getItemStyles","initialCursorOffset","initialFileOffset","currentFileOffset","display","x","y","transform","WebkitTransform","DnDFileListDragLayer","useDragLayer","monitor","getItem","itemType","getItemType","getInitialClientOffset","getInitialSourceClientOffset","getSourceClientOffset","isDragging","selectionSize","style","className","fileDragPreview","boxShadow","palette","divider","backgroundColor","background","color","primary","HotkeyListener","fileAction","hotkeysStr","hotkeyCallback","unbind","ChonkyPresentationLayer","children","dndDisabled","handleClickAway","hotkeyListenerComponents","ClickAwayListener","onClickAway","Box","chonkyRoot","onContextMenu","paper","touchAction","fontFamily","flexDirection","boxSizing","textAlign","webkitTouchCallout","webkitUserSelect","mozUserSelect","msUserSelect","userSelect","FileBrowser","shortid","generate","isMobileBreakpoint","muiTheme","createMuiTheme","type","combinedTheme","merge","chonkyComps","IntlProvider","locale","defaultLocale","Provider","ReduxProvider","ThemeProvider","MuiThemeProvider","DndProvider","backend","HTML5Backend","useFolderChainItems","folderChainItems","items","disabled","onClick","useFileDrag","fileRef","getDndStartPayload","reduxState","sourceInstanceId","source","canDrag","onDragStart","onDragEnd","dropResult","getDropResult","dropTarget","dropEffect","collect","begin","end","dndIsDragging","drag","preview","getEmptyImage","captureDraggingState","useFileDrop","forceDisableDrop","includeChildrenDrops","folderChainRef","onDrop","_item","canDrop","customDropResult","isOver","shallow","prohibitedFileIds","movedFiles","currFile","isOverCurrent","accept","drop","dndIsOver","dndIsOverCurrent","dndCanDrop","useFileEntryDnD","dndState","useDndHoverOpen","currentFolderRef","timeout","getRandomInt","min","max","floor","random","TextPlaceholder","minLength","maxLength","placeholderLength","whitespace","repeat","textPlaceholder","dangerouslySetInnerHTML","__html","opacity","animationName","animationIterationCount","animationTimingFunction","animationDuration","whiteSpace","overflow","maxWidth","minWidth","useFileEntryHtmlProps","dataProps","role","useFileEntryState","selected","focused","useThumbnailUrl","thumbnailUrl","thumbnailLoading","fileColor","iconSpin","useDndIcon","dndIconName","showDropIcon","dndCannotDrop","dndDragging","useModifierIconComponents","modifierIcons","hidden","symlink","ChonkyIcon","modifierIconComponents","_extname","fileName","parts","split","useFileNameComponent","extension","ext","substr","setThumbnailUrl","setThumbnailLoading","loadingAttempts","loadingCancelled","useFileClickHandlers","displayIndex","onMouseClick","onKeyboardClick","onSingleClick","onDoubleClick","CustomVisibilityState","useFileActionTrigger","useFileActionProps","optionValue","actionSelectionSize","actionSelectionEmpty","active","sortAsc","sortDesc","placeholder","toggleOn","toggleOff","isSortButtonAndCurrentSort","isFileViewButtonAndCurrentView","isOptionAndEnabled","customDisabled","customActive","customVisibility","Disabled","Active","ToolbarButton","externalClassName","dropdown","iconWithText","fallbackIcon","fixedWidth","baseButton","iconOnlyButton","activeButton","Button","iconDropdown","textTransform","letterSpacing","paddingBottom","paddingTop","marginRight","marginLeft","marginTop","SmartToolbarButton","triggerAction","Hidden","FolderChainButton","first","baseBreadcrumb","disabledBreadcrumb","currentBreadcrumb","folderChainIcon","buttonContainer","dndIndicator","textDecoration","FileNavbar","folderChainComponents","components","component","navbarWrapper","navbarContainer","Breadcrumbs","navbarBreadcrumbs","separator","upDirectoryButton","flexGrow","ToolbarDropdownButton","MenuItem","ListItemIcon","ListItemText","primaryTypographyProps","minHeight","SmartToolbarDropdownButton","onClickFollowUp","handleClick","ToolbarDropdown","anchor","setAnchor","currentTarget","handleClose","menuItemComponents","localizedName","Menu","autoFocus","keepMounted","elevation","anchorEl","onClose","open","Boolean","transitionDuration","dropdownList","ToolbarInfo","hiddenCount","fileCountString","Toolbar","fileCount","selectedString","hiddenString","infoContainer","Typography","infoText","variant","extraInfoSpan","selectionSizeText","hiddenCountText","ToolbarSearch","searchPlaceholderString","searchInputRef","reduxSearchString","localSearchString","setLocalSearchString","debouncedLocalSearchString","showLoadingIndicator","setShowLoadingIndicator","focus","handleChange","handleKeyUp","blur","TextField","searchFieldContainer","onChange","inputRef","InputProps","onKeyUp","startAdornment","InputAdornment","searchIcon","spin","searchFieldInput","inputProps","searchFieldInputInner","margin","paddingLeft","FileToolbar","toolbarItemComponents","toolbarWrapper","toolbarContainer","toolbarLeft","toolbarRight","flexWrap","toolbarLeftFiller","FileListEmpty","emptyString","FileList","fileListEmpty","fileListEmptyContent","folderOpen","useClickHandler","counter","clickCount","clickTimeout","mouseClickEvent","metaKey","useKeyDownHandler","keyboardClickEvent","nativeEvent","stopPropagation","ClickableWrapper","WrapperTag","wrapperTag","passthroughProps","setFocused","handleKeyDown","compProps","onFocus","onBlur","onKeyDown","tabIndex","mergedProps","FileEntryName","fileNameComponent","hint","paddingRight","CompactEntry","entryState","fileEntryHtmlProps","listFileEntryIcon","listFileEntryDescription","listFileEntryName","listFileEntryProperties","listFileEntryProperty","alignItems","DnDFileEntry","fillParent","FileThumbnail","thumbnailStyle","backgroundImage","fileThumbnail","backgroundRepeat","backgroundPosition","backgroundSize","GridEntryDndIndicator","borderBottom","borderLeft","content","GridEntryPreviewFolder","folderClasses","useFolderStyles","fileClasses","useFileStyles","commonClasses","useCommonEntryStyles","previewFile","folderBackSideMid","folderBackSideTop","folderFrontSide","fileIcon","selectionIndicator","thumbnail","borderTopLeftRadius","borderTopRightRadius","right","borderRightColor","borderTopColor","borderBottomColor","borderLeftColor","borderWidth","borderStyle","bottom","shadows","GridEntryPreviewFile","focusIndicator","GridEntry","useFileEntryStyles","entryClassName","gridFileEntryPreview","gridFileEntryNameContainer","gridFileEntryName","wordBreak","ListEntry","styleState","listFileEntrySelection","textOverflow","flex","disabledDndState","SmartFileEntry","fileViewMode","fileClickHandlers","clickableWrapperProps","fileEntryClickableWrapper","fileEntryProps","EntryComponent","outline","isMobileDevice","window","orientation","navigator","userAgent","indexOf","getGridConfig","viewConfig","gutter","scrollbar","columnCount","columnWidth","rowCount","ceil","rowHeight","GridContainer","gridRef","gridConfig","setGridConfig","gridConfigRef","oldConf","newConf","resetAfterRowIndex","resetAfterColumnIndex","resetAfterIndices","columnIndex","rowIndex","sizers","gc","getColumnWidth","getRowHeight","displayFileIdsRef","getItemKey","cellRenderer","styleWithGutter","gridComponent","VariableSizeGrid","gridContainer","estimatedRowHeight","estimatedColumnWidth","itemKey","ListContainer","listRef","listComponent","rowRenderer","FixedSizeList","listContainer","itemSize","itemCount","borderTop","localClasses","useLocalStyles","onScroll","fillParentContainer","listRenderer","fileListWrapper","dndDropZone","dndDropZoneIcon","AutoSizer","disableHeight","maxHeight","FileContextMenu","browserMenuShortcutString","shortcut","contextMenuItemComponents","anchorPosition","disablePortal","anchorReference","contextMenuList","ListSubheader","browserMenuTooltip","muiJSSClassNameGenerator","createGenerateClassName","seed","FullFileBrowser","StylesProvider","generateClassName","useFolderChain","currentFolderId","parentId","parentFile","unshift","useFiles","childrenIds","useFileMapMethods","baseFileMap","initialFolderId","setFileMap","setCurrentFolderId","resetFileMap","moveFiles","currentFileMap","newFileMap","moveFileIds","newSourceChildrenIds","newDestinationChildrenIds","methods","useFileActionHandler","fileToOpen","useFileMap","fileActionHandler"],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/chonky/dist/chonky.cjs.production.min.js b/node_modules/chonky/dist/chonky.cjs.production.min.js
index 41b835d..ee4d0ca 100644
--- a/node_modules/chonky/dist/chonky.cjs.production.min.js
+++ b/node_modules/chonky/dist/chonky.cjs.production.min.js
@@ -1,2 +1,2 @@
-"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@material-ui/core/styles"),n=e(require("deepmerge")),r=require("react"),o=e(r),i=require("react-dnd"),a=require("react-dnd-html5-backend"),l=require("react-intl"),c=require("react-jss"),s=require("react-redux"),d=e(require("shortid")),u=require("@reduxjs/toolkit"),f=e(require("fast-sort")),p=e(require("fuzzy-search")),m=e(require("redux-watch")),g=e(require("filesize")),h=e(require("exact-trie")),b=e(require("@material-ui/core/useMediaQuery")),y=e(require("classnames")),v=e(require("@material-ui/core/Box")),x=e(require("@material-ui/core/ClickAwayListener")),C=e(require("hotkeys-js")),S=e(require("@material-ui/core/Breadcrumbs")),F=e(require("@material-ui/core/Button")),I=e(require("@material-ui/core/Menu")),k=e(require("@material-ui/core/ListItemIcon")),w=e(require("@material-ui/core/ListItemText")),E=e(require("@material-ui/core/MenuItem")),D=e(require("@material-ui/core/Typography")),M=e(require("@material-ui/core/InputAdornment")),N=e(require("@material-ui/core/TextField")),A=e(require("react-virtualized-auto-sizer")),O=require("react-window"),z=e(require("@material-ui/core/ListSubheader"));function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return L(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _,j={},H=function(e){var t=r.useRef(j);return t.current===j&&(t.current=e()),t.current},P=function(e){var t=r.useRef(e);return r.useEffect((function(){t.current=e}),[t,e]),t},B=function(){function e(){}return e.error=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,["[Chonky runtime error]"].concat(n))},e.warn=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,["[Chonky runtime warning]"].concat(n))},e.debug=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).debug.apply(e,["[Chonky runtime debug]"].concat(n))},e.formatBullets=function(e){return"\n- "+e.join("\n- ")},e}(),K=function(){function e(){}return e.isDirectory=function(e){return!!e&&!0===e.isDir},e.isHidden=function(e){return!!e&&!0===e.isHidden},e.isSymlink=function(e){return!!e&&!0===e.isSymlink},e.isEncrypted=function(e){return!!e&&!0===e.isEncrypted},e.isClickable=function(e){return!!e},e.isOpenable=function(e){return!!e&&!1!==e.openable},e.isSelectable=function(e){return!!e&&!1!==e.selectable},e.isDraggable=function(e){return!!e&&!1!==e.draggable},e.isDroppable=function(e){return!(!e||(!e.isDir||!1===e.droppable)&&!0!==e.droppable)},e.isDndOpenable=function(t){return!(!e.isOpenable(t)||(!t.isDir||!1===t.dndOpenable)&&!0!==t.dndOpenable)},e.getModDate=function(t){return t&&null!=t.modDate?e.parseDate(t.modDate):null},e.parseDate=function(e){if("string"==typeof e||"number"==typeof e)try{return new Date(e)}catch(t){B.error("Could not convert provided string/number into a date: "+t.message+" ","Invalid value:",e)}return e instanceof Date&&!isNaN(e.getTime())?e:(B.warn("Unsupported date representation:",e),null)},e.getChildrenCount=function(e){return e&&"number"==typeof e.childrenCount?e.childrenCount:null},e}(),V=function(e,t){var n=[],r=[];if("folderChain"!==e&&"fileActions"!==e||t)if(Array.isArray(t)){for(var o=0,i=0,a=new Set,l=new Set,c=0;c<t.length;++c){var s=t[c];s?"object"!=typeof s?o++:!s.id||"fileActions"!==e&&!s.name?i++:a.has(s.id)?l.add(s.id):(a.add(s.id),n.push(s)):"fileActions"===e?o++:n.push(null)}if(o&&r.push("Detected "+o+' file(s) of invalid type. Remember that "files" array should contain either objects or nulls.'),i&&r.push("Detected "+i+' file(s) that are missing the required fields. Remember that file object should define an "id" and a "name".'),l.size>0){var d='"'+Array.from(l).join('", "')+'"';r.push("Detected "+l.size+" file IDs that are used multiple times. Remember that each file should have a unique IDs. The following IDs were seen multiple times: "+d)}}else r.push('Expected "'+e+'" prop to be an array, got "'+typeof t+'" instead.');if(r.length>0){var u,f,p="\n- "+r.join("\n- ");"folderChain"===e?(u="folder chain",f="files"):"fileActions"===e?(u="file actions",f="file actions"):(u="files",f="files"),B.error("Errors were detected when sanitizing the "+u+" array. Offending "+f+" were removed from the array. Summary of validation errors: "+p)}return{sanitizedArray:n,errorMessages:r}},q={ShowHiddenFiles:"show_hidden_files",ShowFoldersFirst:"show_folders_first",DarkMode:"dark_mode"};!function(e){e.ASC="asc",e.DESC="desc"}(_||(_={}));var W,G,U=function(e){return e.instanceId},Y=function(e){return e.externalFileActionHandler},X=function(e){return e.fileActionMap},Z=function(e){return e.fileActionIds},Q=function(e){return function(t){return X(t)[e]}},$=function(e){return e.toolbarItems},J=function(e){return e.contextMenuItems},ee=function(e){return e.folderChain},te=function(e){var t=ee(e);return t.length>0?t[t.length-1]:null},ne=function(e){var t=ee(e);return t.length>1?t[t.length-2]:null},re=function(e){return e.fileMap},oe=function(e){return e.cleanFileIds},ie=function(e){return function(t){return e?re(t)[e]:null}},ae=function(e){return e.hiddenFileIdMap},le=function(e){return Object.keys(ae(e)).length},ce=function(e){return e.focusSearchInput},se=function(e){return e.searchString},de=function(e){return e.selectionMap},ue=function(e){return Object.keys(de(e))},fe=function(e){return ue(e).length},pe=function(e){return function(t){return!!e&&!!de(t)[e]}},me=function(e){var t=re(e);return Object.keys(de(e)).map((function(e){return t[e]}))},ge=function(e){return function(t){var n=t.fileActionMap[e];if(n&&n.requiresSelection)return Xe(t,n.fileFilter)}},he=function(e){return function(t){var n;return null==(n=Ze(t,e))?void 0:n.length}},be=function(e){return e.disableSelection},ye=function(e){return e.fileViewConfig},ve=function(e){return e.sortActionId},xe=function(e){return e.sortOrder},Ce=function(e){return e.optionMap},Se=function(e){return function(t){return Ce(t)[e]}},Fe=function(e){return e.thumbnailGenerator},Ie=function(e){return e.doubleClickDelay},ke=function(e){return e.disableDragAndDrop},we=function(e){return e.clearSelectionOnOutsideClick},Ee=function(e){return e.contextMenuMounted},De=function(e){return e.contextMenuConfig},Me=function(e){var t,n=De(e);return n&&n.triggerFileId&&null!=(t=re(e)[n.triggerFileId])?t:null},Ne=function(e){return e.fileActionMap},Ae=function(e){return e.optionMap},Oe=function(e){return e.fileMap},ze=function(e){return e.fileIds},Te=function(e){return e.cleanFileIds},Le=function(e){return e.sortActionId},Re=function(e){return e.sortOrder},_e=function(e){return e.searchString},je=function(e){return e.lastClick},He=function(e){return u.createSelector([Ne,e],(function(e,t){return t&&e[t]?e[t]:null}))},Pe=function(e,t){return void 0===t&&(t=void 0),u.createSelector([Ae],(function(n){var r=n[e];return void 0===r?t:r}))},Be=function(e){return u.createSelector([Oe,e],(function(e,t){return t.map((function(t){return t&&e[t]?e[t]:null}))}))},Ke=u.createSelector([ze,Re,Be(ze),He(Le),Pe(q.ShowFoldersFirst,!1)],(function(e,t,n,r,o){if(!r)return e;var i,a=function(e){return function(t){return e(t)}},l=[];return o&&l.push({desc:a(K.isDirectory)}),r.sortKeySelector&&l.push(((i={})[t===_.ASC?"asc":"desc"]=a(r.sortKeySelector),i)),0===l.length?e:f([].concat(n)).by(l).map((function(e){return e?e.id:null}))})),Ve=u.createSelector([Be(Te)],(function(e){return new p(e,["name"],{caseSensitive:!1})})),qe=u.createSelector([Te,_e,Ve],(function(e,t,n){return t?n.search(t).map((function(e){return e.id})):e})),We=u.createSelector([qe,Be(Te),Pe(q.ShowHiddenFiles)],(function(e,t,n){var r=new Set(e),o={};return t.forEach((function(e){e&&(r.has(e.id)?!n&&K.isHidden(e)&&(o[e.id]=!0):o[e.id]=!0)})),o})),Ge={getFileActionMap:Ne,getOptionMap:Ae,getFileMap:Oe,getFileIds:ze,getCleanFileIds:Te,getSortActionId:Le,getSortOrder:Re,getSearchString:_e,_getLastClick:je,getSortedFileIds:Ke,getSearcher:Ve,getSearchFilteredFileIds:qe,getHiddenFileIdMap:We,getDisplayFileIds:u.createSelector([Ke,We],(function(e,t){return e.filter((function(e){return!e||!t[e]}))})),getLastClickIndex:u.createSelector([je,Ke],(function(e,t){return!e||e.index>t.length-1||e.fileId!=t[e.index]?null:e.index})),makeGetAction:He,makeGetOptionValue:Pe,makeGetFiles:Be},Ue=function(e,t){return t?re(e)[t]:null},Ye=function(e,t){return!!de(e)[t.id]},Xe=function(e){for(var t=e.fileMap,n=e.selectionMap,r=Object.keys(n).map((function(e){return t[e]})),o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var l=i.reduce((function(e,t){return t?e.filter(t):e}),r);return l},Ze=function(e,t){return ge(t)(e)},Qe=function(e,t){return function(n){var r,o=V("fileActions",e),i=o.sanitizedArray,a=o.errorMessages;if(Array.isArray(t)){var l=new Set(t);r=pt.filter((function(e){return!l.has(e.id)}))}else r=t?[]:pt;var c=function(){for(var e,t=new Set,n=function(e){return!!t.add(e.id)},r=function(e){return!t.has(e.id)},o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var l=i.map((function(e){var t=e.filter(r);return t.map(n),t}));return(e=new Array).concat.apply(e,l)}(i,ft,r),s={};c.map((function(e){return e.option?s[e.option.id]=e.option.defaultValue:null})),n(ht.setRawFileActions(e)),n(ht.setFileActionsErrorMessages(a)),n(ht.setFileActions(c)),n(ht.setOptionDefaults(s)),n($e(c))}},$e=function(e){return function(t){for(var n,r=new Set([ut.OpenParentFolder.id]),o=[],i={},a=[],l={},c=function(e,t,n){if(t[n])return t[n];var r={name:n,fileActionIds:[]};return e.push(r),t[n]=r,r},s=R(e);!(n=s()).done;){var d=n.value,u=d.button;u&&(u.toolbar&&!r.has(d.id)&&(u.group?c(o,i,u.group).fileActionIds.push(d.id):o.push(d.id)),u.contextMenu&&(u.group?c(a,l,u.group).fileActionIds.push(d.id):a.push(d.id)))}t(ht.updateFileActionMenuItems([o,a]))}},Je=function(e){return function(t,n){var r=n(),o=e?r.fileActionMap[e]:null;o&&o.fileViewConfig&&t(ht.setFileViewConfig(o.fileViewConfig))}},et=function(e){return function(t,n){if(e){var r=n(),o=r.fileActionMap[e];if(o&&o.sortKeySelector){var i=r.sortOrder===_.ASC?_.DESC:_.ASC;r.sortActionId!==e&&(i=_.ASC),t(ht.setSort({actionId:e,order:i}))}}}},tt=function(e){return function(t,n){B.debug("FILE ACTION DISPATCH: ["+e.id+"]","data:",e);var r=n(),o=X(r)[e.id],i=Y(r);o?i&&Promise.resolve(i(e)).catch((function(e){return B.error("User-defined file action handler threw an error: "+e.message)})):B.warn('Internal components dispatched the "'+e.id+'" file action, but such action was not registered.')}},nt=function(e,t){return function(n,r){B.debug("FILE ACTION REQUEST: ["+e.id+"]","action:",e,"payload:",t);var o=r(),i=U(o);X(o)[e.id]||B.warn('The action "'+e.id+'" was requested, but it is not registered. The action will still be dispatched, but this might indicate a bug in the code. Please register your actions by passing them to "fileActions" prop.');var a=me(o),l=e.fileFilter?a.filter(e.fileFilter):a;if(!e.requiresSelection||0!==l.length){var c={instanceId:i,selectedFiles:a,selectedFilesForAction:l,contextMenuTriggerFile:Me(o)};e.sortKeySelector&&n(et(e.id));var s=e.fileViewConfig;s&&n(ht.setFileViewConfig(s));var d=e.option;d&&n(ht.toggleOption(d.id)),e.selectionTransform&&n(function(e){return function(t,n){var r=e.selectionTransform;if(r){var o=n(),i=new Set(Object.keys(de(o))),a=new Set(Object.keys(ae(o))),l=r({prevSelection:i,fileIds:oe(o),fileMap:re(o),hiddenFileIds:a});l&&t(0===l.size?ht.clearSelection():ht.selectFiles({fileIds:Array.from(l),reset:!0}))}}}(e));var u=e.effect,f=void 0;if(u)try{f=u({action:e,payload:t,state:c,reduxDispatch:n,getReduxState:r})}catch(t){B.error("User-defined effect function for action "+e.id+" threw an error: "+t.message)}return Promise.resolve(f).then((function(r){rt(n,{id:e.id,action:e,payload:t,state:c},r)})).catch((function(r){B.error("User-defined effect function for action "+e.id+" returned a promise that was rejected: "+r.message),rt(n,{id:e.id,action:e,payload:t,state:c},void 0)}))}B.warn('Internal components requested the "'+e.id+'" file action, but the selection for this action was empty. This might a bug in the code of the presentational components.')}},rt=function(e,t,n){!0===n||e(tt(t))};(W=exports.FileViewMode||(exports.FileViewMode={})).List="list",W.Compact="compact",W.Grid="grid",(G=exports.ChonkyIconName||(exports.ChonkyIconName={})).loading="loading",G.dropdown="dropdown",G.placeholder="placeholder",G.dndDragging="dndDragging",G.dndCanDrop="dndCanDrop",G.dndCannotDrop="dndCannotDrop",G.openFiles="openFiles",G.openParentFolder="openParentFolder",G.copy="copy",G.paste="paste",G.share="share",G.search="search",G.selectAllFiles="selectAllFiles",G.clearSelection="clearSelection",G.sortAsc="sortAsc",G.sortDesc="sortDesc",G.toggleOn="toggleOn",G.toggleOff="toggleOff",G.list="list",G.compact="compact",G.smallThumbnail="smallThumbnail",G.largeThumbnail="largeThumbnail",G.folder="folder",G.folderCreate="folderCreate",G.folderOpen="folderOpen",G.folderChainSeparator="folderChainSeparator",G.download="download",G.upload="upload",G.trash="trash",G.fallbackIcon="fallbackIcon",G.symlink="symlink",G.hidden="hidden",G.file="file",G.license="license",G.code="code",G.config="config",G.model="model",G.database="database",G.text="text",G.archive="archive",G.image="image",G.video="video",G.info="info",G.key="key",G.lock="lock",G.music="music",G.terminal="terminal",G.users="users",G.linux="linux",G.ubuntu="ubuntu",G.windows="windows",G.rust="rust",G.python="python",G.nodejs="nodejs",G.php="php",G.git="git",G.adobe="adobe",G.pdf="pdf",G.excel="excel",G.word="word",G.flash="flash";var ot,it=function(e,t){if(void 0!==e.__payloadType&&(e.hotkeys||e.button)){var n='Invalid definition was provided for file action "'+e.id+'". Actions that specify hotkeys or buttons cannot define a payload type. If your application requires this functionality, define two actions and chain them using effects.';throw B.error(n),new Error(n)}return e.effect=t,e},at=function e(t,n){return t?n(t)?t:t.parentElement?e(t.parentElement,n):null:t},lt=function(e,t,n){return n?typeof e===n?e:t:void 0!==e?e:t},ct={MouseClickFile:it({id:"mouse_click_file",__payloadType:{}},(function(e){var t,n=e.payload,r=e.reduxDispatch,o=e.getReduxState;if("double"===n.clickType)K.isOpenable(n.file)&&r(nt(ut.OpenFiles,{targetFile:n.file,files:[n.file]}));else{var i=be(o());if(K.isSelectable(n.file)&&!i)if(n.ctrlKey)r(ht.toggleSelection({fileId:n.file.id,exclusive:!1})),r(ht.setLastClickIndex({index:n.fileDisplayIndex,fileId:n.file.id}));else if(n.shiftKey){var a=Ge.getLastClickIndex(o());if("number"==typeof a){var l=a,c=n.fileDisplayIndex;if(l>c){var s=[c,l];l=s[0],c=s[1]}r((t={rangeStart:l,rangeEnd:c},function(e,n){var r=n();if(!r.disableSelection){var o=Ge.getDisplayFileIds(r).slice(t.rangeStart,t.rangeEnd+1).filter((function(e){return e&&K.isSelectable(r.fileMap[e])}));e(ht.selectFiles({fileIds:o,reset:!!t.reset}))}}))}else r(ht.toggleSelection({fileId:n.file.id,exclusive:!1})),r(ht.setLastClickIndex({index:n.fileDisplayIndex,fileId:n.file.id}))}else r(ht.toggleSelection({fileId:n.file.id,exclusive:!0})),r(ht.setLastClickIndex({index:n.fileDisplayIndex,fileId:n.file.id}));else n.ctrlKey||i||r(ht.clearSelection()),r(ht.setLastClickIndex({index:n.fileDisplayIndex,fileId:n.file.id}))}})),KeyboardClickFile:it({id:"keyboard_click_file",__payloadType:{}},(function(e){var t=e.payload,n=e.reduxDispatch,r=e.getReduxState;n(ht.setLastClickIndex({index:t.fileDisplayIndex,fileId:t.file.id})),t.enterKey?0===fe(r())&&n(nt(ut.OpenFiles,{targetFile:t.file,files:[t.file]})):t.spaceKey&&K.isSelectable(t.file)&&n(ht.toggleSelection({fileId:t.file.id,exclusive:t.ctrlKey}))})),StartDragNDrop:it({id:"start_drag_n_drop",__payloadType:{}},(function(e){var t=e.reduxDispatch,n=e.payload.draggedFile;Ye((0,e.getReduxState)(),n)||K.isSelectable(n)&&t(ht.selectFiles({fileIds:[n.id],reset:!0}))})),EndDragNDrop:it({id:"end_drag_n_drop",__payloadType:{}},(function(e){var t=e.payload,n=e.reduxDispatch;if(!Ye((0,e.getReduxState)(),t.destination)){var r=t.selectedFiles;n(nt(ut.MoveFiles,T({},t,{files:r.length>0?r:[t.draggedFile]})))}})),MoveFiles:it({id:"move_files",__payloadType:{}}),ChangeSelection:it({id:"change_selection",__payloadType:{}}),OpenFiles:it({id:"open_files",__payloadType:{}}),OpenParentFolder:it({id:"open_parent_folder",hotkeys:["backspace"],button:{name:"Go up a directory",toolbar:!0,contextMenu:!1,icon:exports.ChonkyIconName.openParentFolder,iconOnly:!0}},(function(e){var t=e.reduxDispatch,n=ne((0,e.getReduxState)());K.isOpenable(n)?t(nt(ut.OpenFiles,{targetFile:n,files:[n]})):B.warn("Open parent folder effect was triggered  even though the parent folder is not openable. This indicates a bug in presentation components.")})),OpenFileContextMenu:it({id:"open_file_context_menu",__payloadType:{}},(function(e){var t=e.payload,n=e.reduxDispatch,r=e.getReduxState,o=Ue(r(),t.triggerFileId);o&&(Ye(r(),o)||(K.isSelectable(o)?n(ht.selectFiles({fileIds:[t.triggerFileId],reset:!0})):n(ht.clearSelection()))),n(ht.showContextMenu({triggerFileId:t.triggerFileId,mouseX:t.clientX-2,mouseY:t.clientY-4}))}))},st={OpenSelection:it({id:"open_selection",hotkeys:["enter"],requiresSelection:!0,fileFilter:K.isOpenable,button:{name:"Open selection",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.openFiles}},(function(e){(0,e.reduxDispatch)(nt(ct.OpenFiles,{files:e.state.selectedFilesForAction}))})),SelectAllFiles:it({id:"select_all_files",hotkeys:["ctrl+a"],button:{name:"Select all files",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.selectAllFiles},selectionTransform:function(e){var t=e.fileIds,n=e.hiddenFileIds,r=new Set;return t.map((function(e){n.has(e)||r.add(e)})),r}}),ClearSelection:it({id:"clear_selection",hotkeys:["escape"],button:{name:"Clear selection",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.clearSelection},selectionTransform:function(e){return 0===e.prevSelection.size?null:new Set}}),EnableListView:it({id:"enable_list_view",fileViewConfig:{mode:exports.FileViewMode.List,entryHeight:30},button:{name:"Switch to List view",toolbar:!0,icon:exports.ChonkyIconName.list,iconOnly:!0}}),EnableCompactView:it({id:"enable_compact_view",fileViewConfig:{mode:exports.FileViewMode.Compact,entryHeight:40,entryWidth:220},button:{name:"Switch to Compact view",toolbar:!0,icon:exports.ChonkyIconName.compact,iconOnly:!0}}),EnableGridView:it({id:"enable_grid_view",fileViewConfig:{mode:exports.FileViewMode.Grid,entryWidth:165,entryHeight:130},button:{name:"Switch to Grid view",toolbar:!0,icon:exports.ChonkyIconName.smallThumbnail,iconOnly:!0}}),SortFilesByName:it({id:"sort_files_by_name",sortKeySelector:function(e){return e?e.name.toLowerCase():void 0},button:{name:"Sort by name",toolbar:!0,group:"Options"}}),SortFilesBySize:it({id:"sort_files_by_size",sortKeySelector:function(e){return e?e.size:void 0},button:{name:"Sort by size",toolbar:!0,group:"Options"}}),SortFilesByDate:it({id:"sort_files_by_date",sortKeySelector:function(e){return e?e.modDate:void 0},button:{name:"Sort by date",toolbar:!0,group:"Options"}}),ToggleHiddenFiles:it({id:"toggle_hidden_files",hotkeys:["ctrl+h"],option:{id:q.ShowHiddenFiles,defaultValue:!0},button:{name:"Show hidden files",toolbar:!0,group:"Options"}}),ToggleShowFoldersFirst:it({id:"toggle_show_folders_first",option:{id:q.ShowFoldersFirst,defaultValue:!0},button:{name:"Show folders first",toolbar:!0,group:"Options"}}),FocusSearchInput:it({id:"focus_search_input",hotkeys:["ctrl+f"]},(function(e){var t=ce((0,e.getReduxState)());t&&t()})),ToggleDarkMode:it({id:"enable_dark_mode",option:{id:q.DarkMode,defaultValue:!1},button:{name:"Enable dark mode",toolbar:!0,icon:exports.ChonkyIconName.list,iconOnly:!0}})},dt={CopyFiles:it({id:"copy_files",requiresSelection:!0,hotkeys:["ctrl+c"],button:{name:"Copy selection",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.copy}}),CreateFolder:it({id:"create_folder",button:{name:"Create folder",toolbar:!0,tooltip:"Create a folder",icon:exports.ChonkyIconName.folderCreate}}),UploadFiles:it({id:"upload_files",button:{name:"Upload files",toolbar:!0,tooltip:"Upload files",icon:exports.ChonkyIconName.upload}}),DownloadFiles:it({id:"download_files",requiresSelection:!0,button:{name:"Download files",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.download}}),DeleteFiles:it({id:"delete_files",requiresSelection:!0,hotkeys:["delete"],button:{name:"Delete files",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.trash}})},ut=T({},ct,st,dt),ft=[ut.MouseClickFile,ut.KeyboardClickFile,ut.StartDragNDrop,ut.EndDragNDrop,ut.MoveFiles,ut.ChangeSelection,ut.OpenFiles,ut.OpenParentFolder,ut.OpenFileContextMenu],pt=[ut.OpenSelection,ut.SelectAllFiles,ut.ClearSelection,ut.EnableListView,ut.EnableGridView,ut.SortFilesByName,ut.SortFilesBySize,ut.SortFilesByDate,ut.ToggleHiddenFiles,ut.ToggleShowFoldersFirst,ut.FocusSearchInput],mt={instanceId:"CHONKY_INVALID_ID",externalFileActionHandler:null,rawFileActions:[],fileActionsErrorMessages:[],fileActionMap:{},fileActionIds:[],toolbarItems:[],contextMenuItems:[],rawFolderChain:null,folderChainErrorMessages:[],folderChain:[],rawFiles:[],filesErrorMessages:[],fileMap:{},fileIds:[],cleanFileIds:[],sortedFileIds:[],hiddenFileIdMap:{},focusSearchInput:null,searchString:"",searchMode:"currentFolder",selectionMap:{},disableSelection:!1,fileViewConfig:ut.EnableGridView.fileViewConfig,sortActionId:null,sortOrder:_.ASC,optionMap:{},thumbnailGenerator:null,doubleClickDelay:300,disableDragAndDrop:!1,clearSelectionOnOutsideClick:!0,lastClick:null,contextMenuMounted:!1,contextMenuConfig:null},gt=u.createSlice({name:"root",initialState:mt,reducers:{setExternalFileActionHandler:function(e,t){var n;e.externalFileActionHandler=null!=(n=t.payload)?n:null},setRawFileActions:function(e,t){e.rawFileActions=t.payload},setFileActionsErrorMessages:function(e,t){e.fileActionsErrorMessages=t.payload},setFileActions:function(e,t){var n={};t.payload.map((function(e){return n[e.id]=e}));var r=t.payload.map((function(e){return e.id}));e.fileActionMap=n,e.fileActionIds=r},updateFileActionMenuItems:function(e,t){var n=t.payload;e.toolbarItems=n[0],e.contextMenuItems=n[1]},setRawFolderChain:function(e,t){var n=t.payload,r=V("folderChain",n),o=r.sanitizedArray,i=r.errorMessages;e.rawFolderChain=n,e.folderChain=o,e.folderChainErrorMessages=i},setRawFiles:function(e,t){var n=t.payload,r=V("files",n),o=r.sanitizedArray,i=r.errorMessages;e.rawFiles=n,e.filesErrorMessages=i;var a={};o.forEach((function(e){e&&(a[e.id]=e)}));var l=o.map((function(e){return e?e.id:null})),c=l.filter((function(e){return!!e}));e.fileMap=a,e.fileIds=l,e.cleanFileIds=c;for(var s=0,d=Object.keys(e.selectionMap);s<d.length;s++){var u=d[s];a[u]||delete e.selectionMap[u]}},setSortedFileIds:function(e,t){e.sortedFileIds=t.payload},setHiddenFileIds:function(e,t){e.hiddenFileIdMap=t.payload;for(var n=0,r=Object.keys(e.selectionMap);n<r.length;n++){var o=r[n];e.hiddenFileIdMap[o]&&delete e.selectionMap[o]}},setFocusSearchInput:function(e,t){e.focusSearchInput=t.payload},setSearchString:function(e,t){e.searchString=t.payload},selectAllFiles:function(e){e.fileIds.filter((function(t){return t&&K.isSelectable(e.fileMap[t])})).map((function(t){return t?e.selectionMap[t]=!0:null}))},selectFiles:function(e,t){e.disableSelection||(t.payload.reset&&(e.selectionMap={}),t.payload.fileIds.filter((function(t){return t&&K.isSelectable(e.fileMap[t])})).map((function(t){return e.selectionMap[t]=!0})))},toggleSelection:function(e,t){if(!e.disableSelection){var n=!!e.selectionMap[t.payload.fileId];t.payload.exclusive&&(e.selectionMap={}),n?delete e.selectionMap[t.payload.fileId]:K.isSelectable(e.fileMap[t.payload.fileId])&&(e.selectionMap[t.payload.fileId]=!0)}},clearSelection:function(e){e.disableSelection||0!==Object.keys(e.selectionMap).length&&(e.selectionMap={})},setSelectionDisabled:function(e,t){e.disableSelection=t.payload,0!==Object.keys(e.selectionMap).length&&(e.selectionMap={})},setFileViewConfig:function(e,t){e.fileViewConfig=t.payload},setSort:function(e,t){e.sortActionId=t.payload.actionId,e.sortOrder=t.payload.order},setOptionDefaults:function(e,t){for(var n=0,r=Object.keys(t.payload);n<r.length;n++){var o=r[n];o in e.optionMap||(e.optionMap[o]=t.payload[o])}},toggleOption:function(e,t){e.optionMap[t.payload]=!e.optionMap[t.payload]},setThumbnailGenerator:function(e,t){e.thumbnailGenerator=t.payload},setDoubleClickDelay:function(e,t){e.doubleClickDelay=t.payload},setDisableDragAndDrop:function(e,t){e.disableDragAndDrop=t.payload},setClearSelectionOnOutsideClick:function(e,t){e.clearSelectionOnOutsideClick=t.payload},setLastClickIndex:function(e,t){e.lastClick=t.payload},setContextMenuMounted:function(e,t){e.contextMenuMounted=t.payload},showContextMenu:function(e,t){e.contextMenuConfig=t.payload},hideContextMenu:function(e){e.contextMenuConfig&&(e.contextMenuConfig=null)}}}),ht=gt.actions,bt=gt.reducer,yt=function(e){var t=H((function(){var t=T({},mt,{instanceId:e});return u.configureStore({preloadedState:t,reducer:bt,middleware:function(e){return e({serializableCheck:!1})},devTools:{name:"chonky_"+e}})}));return function(e){r.useEffect((function(){var t=m((function(){return de(e.getState())})),n=[e.subscribe(t((function(t,n){if(t!==n){var r=ue(e.getState()),o=new Set(r);e.dispatch(nt(ut.ChangeSelection,{selection:o}))}})))];return function(){for(var e,t=R(n);!(e=t()).done;)(0,e.value)()}}),[e])}(t),t},vt=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=r.useCallback((function(t){return e.apply(void 0,n)(t)}),[e].concat(n));return s.useSelector(i)},xt=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=s.useDispatch();r.useEffect((function(){i(e.apply(void 0,n))}),[i,e].concat(n))},Ct=function(e,t){var n=s.useDispatch();r.useEffect((function(){n(e(t))}),[n,e,t])},St=function(){return o.createElement("span",{title:"No icon component found. Please follow Chonky installation instructions to provide a pre-made icon component (or a custom icon)."},"")},Ft={fileActions:null,onFileAction:null,thumbnailGenerator:null,doubleClickDelay:300,disableSelection:!1,disableDefaultFileActions:!1,disableDragAndDrop:!1,disableDragAndDropProvider:!1,defaultSortActionId:ut.SortFilesByName.id,defaultFileViewActionId:ut.EnableGridView.id,clearSelectionOnOutsideClick:!0,iconComponent:St,darkMode:!1,i18n:{}};(ot=exports.I18nNamespace||(exports.I18nNamespace={})).Toolbar="toolbar",ot.FileList="fileList",ot.FileEntry="fileEntry",ot.FileContextMenu="contextMenu",ot.FileActions="actions",ot.FileActionGroups="actionGroups";var It=function(e,t){return"chonky."+e+"."+t},kt=function(e,t){return"chonky."+exports.I18nNamespace.FileActions+"."+e+"."+t},wt=function(e){var t=l.useIntl();return r.useMemo((function(){var n,r;if(!e)return{buttonName:"",buttonTooltip:void 0};var o,i=t.formatMessage({id:kt(e.id,"button.name"),defaultMessage:null==(n=e.button)?void 0:n.name}),a=void 0;return null!=(r=e.button)&&r.tooltip&&(a=t.formatMessage({id:kt(e.id,"button.tooltip"),defaultMessage:null==(o=e.button)?void 0:o.tooltip})),{buttonName:i,buttonTooltip:a}}),[e,t])},Et=function(e){var t=l.useIntl(),n=r.useContext(Mt);return r.useMemo((function(){return{fileModDateString:n.formatFileModDate(t,e),fileSizeString:n.formatFileSize(t,e)}}),[e,n,t])},Dt={formatFileModDate:function(e,t){var n=K.getModDate(t);return n?e.formatDate(n,{dateStyle:"medium",timeStyle:"short"}):null},formatFileSize:function(e,t){if(!t||"number"!=typeof t.size)return null;var n=g(t.size,{bits:!1,output:"object"});return"B"===n.symbol?Math.round(n.value/10)/100+" KB":"KB"===n.symbol?Math.round(n.value)+" "+n.symbol:n.value+" "+n.symbol}},Mt=r.createContext(Dt),Nt=r.createContext(St),At=["3g2","3gp","3gpp","asf","asx","avi","dvb","f4v","fli","flv","fvt","h261","h263","h264","jpgm","jpgv","jpm","m1v","m2v","m4u","m4v","mj2","mjp2","mk3d","mks","mkv","mng","mov","movie","mp4","mp4v","mpe","mpeg","mpg","mpg4","mxu","ogv","pyv","qt","smv","ts","uvh","uvm","uvp","uvs","uvu","uvv","uvvh","uvvm","uvvp","uvvs","uvvu","uvvv","viv","vob","webm","wm","wmv","wmx","wvx"],Ot=["3ds","apng","azv","bmp","bmp","btif","cgm","cmx","djv","djvu","drle","dwg","dxf","emf","exr","fbs","fh","fh4","fh5","fh7","fhc","fits","fpx","fst","g3","gif","heic","heics","heif","heifs","ico","ico","ief","jls","jng","jp2","jpe","jpeg","jpf","jpg","jpg2","jpm","jpx","jxr","ktx","mdi","mmr","npx","pbm","pct","pcx","pcx","pgm","pic","png","pnm","ppm","psd","pti","ras","rgb","rlc","sgi","sid","sub","svg","svgz","t38","tap","tfx","tga","tif","tiff","uvg","uvi","uvvg","uvvi","vtf","wbmp","wdp","webp","wmf","xbm","xif","xpm","xwd"],zt=["3gpp","aac","adp","aif","aifc","aiff","au","caf","dra","dts","dtshd","ecelp4800","ecelp7470","ecelp9600","eol","flac","kar","lvp","m2a","m3a","m3u","m4a","m4a","mid","midi","mka","mp2","mp2a","mp3","mp3","mp4a","mpga","oga","ogg","pya","ra","ra","ram","rip","rmi","rmp","s3m","sil","snd","spx","uva","uvva","wav","wav","wav","wax","weba","wma","xm"],Tt=["#bbbbbb","#d65c5c","#d6665c","#d6705c","#d67a5c","#d6855c","#d68f5c","#d6995c","#d6a35c","#d6ad5c","#d6b85c","#d6c25c","#d6cc5c","#d6d65c","#ccd65c","#c2d65c","#b8d65c","#add65c","#a3d65c","#99d65c","#8fd65c","#85d65c","#7ad65c","#70d65c","#66d65c","#5cd65c","#5cd666","#5cd670","#5cd67a","#5cd685","#5cd68f","#5cd699","#5cd6a3","#5cd6ad","#5cd6b8","#5cd6c2","#5cd6cc","#5cd6d6","#5cccd6","#5cc2d6","#5cb8d6","#5cadd6","#5ca3d6","#5c99d6","#5c8fd6","#5c85d6","#5c7ad6","#5c70d6","#5c66d6","#5c5cd6","#665cd6","#705cd6","#7a5cd6","#855cd6","#8f5cd6","#995cd6","#a35cd6","#ad5cd6","#b85cd6","#c25cd6","#cc5cd6","#d65cd6","#d65ccc","#d65cc2","#d65cb8","#d65cad","#d65ca3","#d65c99","#d65c8f","#d65c85","#d65c7a","#d65c70","#d65c66"],Lt=["#777","#8f3d3d","#8f443d","#8f4b3d","#8f523d","#8f583d","#8f5f3d","#8f663d","#8f6d3d","#8f743d","#8f7a3d","#8f813d","#8f883d","#8f8f3d","#888f3d","#818f3d","#7a8f3d","#748f3d","#6d8f3d","#668f3d","#5f8f3d","#588f3d","#528f3d","#4b8f3d","#448f3d","#3d8f3d","#3d8f44","#3d8f4b","#3d8f52","#3d8f58","#3d8f5f","#3d8f66","#3d8f6d","#3d8f74","#3d8f7a","#3d8f81","#3d8f88","#3d8f8f","#3d888f","#3d818f","#3d7a8f","#3d748f","#3d6d8f","#3d668f","#3d5f8f","#3d588f","#3d528f","#3d4b8f","#3d448f","#3d3d8f","#443d8f","#4b3d8f","#523d8f","#583d8f","#5f3d8f","#663d8f","#6d3d8f","#743d8f","#7a3d8f","#813d8f","#883d8f","#8f3d8f","#8f3d88","#8f3d81","#8f3d7a","#8f3d74","#8f3d6d","#8f3d66","#8f3d5f","#8f3d58","#8f3d52","#8f3d4b","#8f3d44"],Rt=function(){for(var e=0,t=[[exports.ChonkyIconName.license,["license"]],[exports.ChonkyIconName.config,["sfk","ini","yml","toml","iml"]],[exports.ChonkyIconName.model,["3ds","obj","ply","fbx"]],[exports.ChonkyIconName.database,["csv","json","sql","sqlite","sqlite3","npy","npz","rec","idx","hdf5"]],[exports.ChonkyIconName.text,["txt","md","mdx"]],[exports.ChonkyIconName.archive,["zip","rar","tar","tar.gz","7z"]],[exports.ChonkyIconName.image,Ot],[exports.ChonkyIconName.video,At],[exports.ChonkyIconName.code,["html","php","css","sass","scss","less","cpp","h","hpp","c","xml"]],[exports.ChonkyIconName.info,["bib","readme","nfo"]],[exports.ChonkyIconName.key,["pem","pub"]],[exports.ChonkyIconName.lock,["lock","lock.json","shrinkwrap.json"]],[exports.ChonkyIconName.music,zt],[exports.ChonkyIconName.terminal,["run","sh"]],[exports.ChonkyIconName.trash,[".Trashes"]],[exports.ChonkyIconName.users,["authors","contributors"]],[exports.ChonkyIconName.linux,["AppImage"]],[exports.ChonkyIconName.ubuntu,["deb"]],[exports.ChonkyIconName.windows,["exe"]],[exports.ChonkyIconName.rust,["rs","rlib"]],[exports.ChonkyIconName.python,["py","ipynb"]],[exports.ChonkyIconName.nodejs,["js","jsx","ts","tsx","d.ts"]],[exports.ChonkyIconName.php,["php"]],[exports.ChonkyIconName.git,[".gitignore"]],[exports.ChonkyIconName.adobe,["psd"]],[exports.ChonkyIconName.pdf,["pdf"]],[exports.ChonkyIconName.excel,["xls","xlsx"]],[exports.ChonkyIconName.word,["doc","docx","odt"]],[exports.ChonkyIconName.flash,["swf"]]],n=new h({ignoreCase:!0}),r=0,o=t;r<o.length;r++)for(var i=o[r],a=i[0],l=i[1],c=0;c<l.length;++c)n.put(l[c],{icon:a,colorCode:(e+=5)%(Tt.length-1)+1},!0);return n}(),_t={colors:{debugRed:"#fabdbd",debugBlue:"#bdd8fa",debugGreen:"#d2fabd",debugPurple:"#d2bdfa",debugYellow:"#fae9bd",textActive:"#09f"},fontSizes:{rootPrimary:15},margins:{rootLayoutMargin:8},toolbar:{size:30,lineHeight:"30px",fontSize:15,buttonRadius:4},dnd:{canDropColor:"green",cannotDropColor:"red",canDropMask:"rgba(180, 235, 180, 0.75)",cannotDropMask:"rgba(235, 180, 180, 0.75)",fileListCanDropMaskOne:"rgba(180, 235, 180, 0.1)",fileListCanDropMaskTwo:"rgba(180, 235, 180, 0.2)",fileListCannotDropMaskOne:"rgba(235, 180, 180, 0.1)",fileListCannotDropMaskTwo:"rgba(235, 180, 180, 0.2)"},dragLayer:{border:"solid 2px #09f",padding:"7px 10px",borderRadius:2},fileList:{desktopGridGutter:8,mobileGridGutter:5},gridFileEntry:{childrenCountSize:"1.6em",iconColorFocused:"#000",iconSize:"2.4em",iconColor:"#fff",borderRadius:5,fontSize:14,fileColorTint:"rgba(255, 255, 255, 0.4)",folderBackColorTint:"rgba(255, 255, 255, 0.1)",folderFrontColorTint:"rgba(255, 255, 255, 0.4)"},listFileEntry:{propertyFontSize:14,iconFontSize:"1.1em",iconBorderRadius:5,fontSize:14}},jt={gridFileEntry:{fileColorTint:"rgba(50, 50, 50, 0.4)",folderBackColorTint:"rgba(50, 50, 50, 0.4)",folderFrontColorTint:"rgba(50, 50, 50, 0.15)"}},Ht={fontSizes:{rootPrimary:13},margins:{rootLayoutMargin:4},toolbar:{size:28,lineHeight:"28px",fontSize:13},gridFileEntry:{fontSize:13},listFileEntry:{propertyFontSize:12,iconFontSize:"1em",fontSize:13}},Pt=function(){return b("(max-width:480px)")},Bt=function(e,t){return"repeating-linear-gradient(45deg,"+e+","+e+" 10px,"+t+" 0,"+t+" 20px)"},Kt=function(e){return c.createUseStyles(e)},Vt=function(e){var t={},n=c.createUseStyles((function(n){var r=e(n),o={};return Object.keys(r).map((function(e){var n="chonky-"+e;o["@global ."+n]=r[e],t[e]=n})),o}));return function(){var e=n.apply(void 0,arguments),r={};return Object.keys(t).map((function(e){r[e]=t[e]})),T({},r,e)}},qt=function(e){return[e,"!important"]},Wt=y,Gt=o.memo(o.forwardRef((function(e,t){var n;return Ct(ht.setRawFiles,null!=(n=e.files)?n:mt.rawFiles),Ct(ht.setRawFolderChain,e.folderChain),xt(Qe,lt(e.fileActions,Ft.fileActions),lt(e.disableDefaultFileActions,Ft.disableDefaultFileActions)),xt(ht.setExternalFileActionHandler,lt(e.onFileAction,Ft.onFileAction)),xt(ht.setSelectionDisabled,lt(e.disableSelection,Ft.disableSelection,"boolean")),xt(et,lt(e.defaultSortActionId,Ft.defaultSortActionId)),xt(Je,lt(e.defaultFileViewActionId,Ft.defaultFileViewActionId,"string")),xt(ht.setThumbnailGenerator,lt(e.thumbnailGenerator,Ft.thumbnailGenerator)),xt(ht.setDoubleClickDelay,lt(e.doubleClickDelay,Ft.doubleClickDelay,"number")),xt(ht.setDisableDragAndDrop,lt(e.disableDragAndDrop,Ft.disableDragAndDrop,"boolean")),xt(ht.setClearSelectionOnOutsideClick,lt(e.clearSelectionOnOutsideClick,Ft.clearSelectionOnOutsideClick,"boolean")),function(e){var t=s.useStore(),n=s.useDispatch();r.useImperativeHandle(e,(function(){return{getFileSelection:function(){var e=de(t.getState());return new Set(Object.keys(e))},setFileSelection:function(e,t){void 0===t&&(t=!0);var r=Array.from(e);n(ht.selectFiles({fileIds:r,reset:t}))},requestFileAction:function(e,t){return Promise.resolve(n(nt(e,t))).then()}}}),[t,n])}(t),null})));Gt.displayName="ChonkyBusinessLogicInner";var Ut=o.memo(Gt);Ut.displayName="ChonkyBusinessLogic";var Yt=function(){return!!r.useContext(i.DndContext).dragDropManager},Xt={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"},Zt=function(e,t,n){if(!e||!t||!n)return{display:"none"};var r="translate("+(e.x+(n.x-t.x))+"px, "+(e.y+(n.y-t.y))+"px)";return{transform:r,WebkitTransform:r}},Qt=function(){var e=$t(),t=i.useDragLayer((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialCursorOffset:e.getInitialClientOffset(),initialFileOffset:e.getInitialSourceClientOffset(),currentFileOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}})),n=t.item;if(!t.isDragging||"dnd-chonky-file-entry"!==t.itemType||!n.payload)return null;var r=n.payload.selectedFiles.length;return o.createElement("div",{style:Xt},o.createElement("div",{style:Zt(t.initialCursorOffset,t.initialFileOffset,t.currentFileOffset)},o.createElement("div",{className:e.fileDragPreview},o.createElement("b",null,n.payload.draggedFile.name),r>1&&o.createElement(o.Fragment,null," and ",o.createElement("strong",null,r-1," other file",r-1!=1?"s":"")))))},$t=Vt((function(e){return{fileDragPreview:{boxShadow:"2px 2px 5px "+e.palette.divider,backgroundColor:e.palette.background.default,borderRadius:e.dragLayer.borderRadius,fontSize:e.fontSizes.rootPrimary,color:e.palette.text.primary,padding:e.dragLayer.padding,border:e.dragLayer.border,display:"inline-block"}}})),Jt=o.memo((function(e){var t=e.fileActionId,n=s.useDispatch(),o=vt(Q,t);return r.useEffect((function(){if(o&&o.hotkeys&&0!==o.hotkeys.length){var e=o.hotkeys.join(","),t=function(e){e.preventDefault(),n(nt(o,void 0))};return C(e,t),function(){return C.unbind(e,t)}}}),[n,o]),null})),en=function(e){var t=e.children,n=s.useDispatch(),i=s.useSelector(Z),a=s.useSelector(ke),l=s.useSelector(we),c=r.useCallback((function(e){l&&!at(e.target,(function(e){return e.tagName&&"button"===e.tagName.toLowerCase()}))&&n(ht.clearSelection())}),[n,l]),d=r.useMemo((function(){return i.map((function(e){return o.createElement(Jt,{key:"file-action-listener-"+e,fileActionId:e})}))}),[i]),u=Yt(),f=function(){var e=s.useDispatch(),t=P(s.useSelector(Ee));return r.useCallback((function(n){if(t.current&&!n.altKey){n.preventDefault();var r,o=(r=at(n.target,(function(e){return e.tagName&&"div"===e.tagName.toLowerCase()&&e.dataset&&e.dataset.chonkyFileId})))?r.dataset.chonkyFileId:null;e(nt(ut.OpenFileContextMenu,{clientX:n.clientX,clientY:n.clientY,triggerFileId:o}))}}),[t,e])}(),p=tn();return o.createElement(x,{onClickAway:c},o.createElement(v,{className:p.chonkyRoot,onContextMenu:f},!a&&u&&o.createElement(Qt,null),d,t||null))},tn=Vt((function(e){return{chonkyRoot:{backgroundColor:e.palette.background.paper,border:"solid 1px "+e.palette.divider,padding:e.margins.rootLayoutMargin,fontSize:e.fontSizes.rootPrimary,color:e.palette.text.primary,touchAction:"manipulation",fontFamily:"sans-serif",flexDirection:"column",boxSizing:"border-box",textAlign:"left",borderRadius:4,display:"flex",height:"100%",webkitTouchCallout:"none",webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none"}}})),nn=o.forwardRef((function(e,u){var f,p=e.instanceId,m=e.iconComponent,g=e.children,h=lt(e.disableDragAndDrop,Ft.disableDragAndDrop,"boolean"),b=lt(e.disableDragAndDropProvider,Ft.disableDragAndDropProvider,"boolean"),y=lt(e.darkMode,Ft.darkMode,"boolean"),v=lt(e.i18n,Ft.i18n),x=r.useMemo((function(){return T({},Dt,null==v?void 0:v.formatters)}),[v]),C=H((function(){return null!=p?p:d.generate()})),S=yt(C),F=Pt(),I=r.useMemo((function(){var e=t.createMuiTheme({palette:{type:y?"dark":"light"}}),r=n(e,n(_t,y?jt:{}));return F?n(r,Ht):r}),[y,F]),k=o.createElement(o.Fragment,null,o.createElement(Ut,Object.assign({ref:u},e)),o.createElement(en,null,g));return o.createElement(l.IntlProvider,Object.assign({locale:"en",defaultLocale:"en"},v),o.createElement(Mt.Provider,{value:x},o.createElement(s.Provider,{store:S},o.createElement(c.ThemeProvider,{theme:I},o.createElement(t.ThemeProvider,{theme:I},o.createElement(Nt.Provider,{value:null!=(f=null!=m?m:Ft.iconComponent)?f:St},h||b?k:o.createElement(i.DndProvider,{backend:a.HTML5Backend},k)))))))}));nn.displayName="FileBrowser";var rn,on=function(e){var t=e.file,n=e.forceDisableDrop,o=e.includeChildrenDrops,a=P(s.useSelector(ee)),l=function(){var e=Yt(),t=r.useCallback((function(){return[{},function(){return null}]}),[]),n=e?i.useDrop:t;return n.apply(void 0,arguments)}({accept:"dnd-chonky-file-entry",drop:r.useCallback((function(e,n){if(n.canDrop())return{dropTarget:t}}),[t]),canDrop:r.useCallback((function(e,r){if(n||!K.isDroppable(t)||!r.isOver({shallow:!0})&&!o)return!1;var i=e.payload,l=i.source,c=i.draggedFile,s=i.selectedFiles,d=new Set;d.add(t.id),a.current.map((function(e){e&&d.add(e.id)}));for(var u,f=R([c].concat(s));!(u=f()).done;)if(d.has(u.value.id))return!1;return t.id!==(null==l?void 0:l.id)}),[n,t,o,a]),collect:r.useCallback((function(e){return{isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0}),canDrop:e.canDrop()}}),[])}),c=l[0];return{dndIsOver:c.isOver,dndIsOverCurrent:c.isOverCurrent,dndCanDrop:c.canDrop,drop:l[1]}},an=function(e,t){var n=s.useDispatch(),o=P(s.useSelector(te));r.useEffect((function(){var r,i=null;return t.dndIsOver&&K.isDndOpenable(e)&&e.id!==(null==(r=o.current)?void 0:r.id)&&(i=setTimeout((function(){return n(nt(ct.OpenFiles,{targetFile:e,files:[e]}))}),1500)),function(){i&&clearTimeout(i)}}),[n,e,t.dndIsOver,o])},ln=o.memo((function(e){var t,n,r=(n=e.maxLength,(t=e.minLength)+Math.floor(Math.random()*Math.floor(n-t))),i="&nbsp;".repeat(r),a=cn();return o.createElement("span",{className:a.textPlaceholder,dangerouslySetInnerHTML:{__html:i}})})),cn=Kt((function(){return{"@keyframes loading-placeholder":{"0%":{opacity:.2},"50%":{opacity:.4},"100%":{opacity:.2}},textPlaceholder:{animationName:"$loading-placeholder",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDuration:"1.5s",backgroundColor:"#ccc",whiteSpace:"nowrap",overflow:"hidden",borderRadius:4,maxWidth:"40%",minWidth:20}}})),sn=function(e){return r.useMemo((function(){return T({role:"listitem"},{"data-test-id":"file-entry","data-chonky-file-id":e?e.id:void 0})}),[e])},dn=function(e,t,n){var o=function(e){return r.useMemo((function(){return e?!0===e.isDir?{icon:exports.ChonkyIconName.folder,colorCode:0}:Rt.getWithCheckpoints(e.name,".",!0)||{icon:exports.ChonkyIconName.file,colorCode:32}:{icon:exports.ChonkyIconName.loading,colorCode:0}}),[e])}(e),i=fn(e),a=i.thumbnailUrl,l=i.thumbnailLoading;return r.useMemo((function(){var r=a?Lt[o.colorCode]:Tt[o.colorCode],i=l||!e,c=l?exports.ChonkyIconName.loading:o.icon;return{childrenCount:K.getChildrenCount(e),icon:e&&void 0!==e.icon?e.icon:c,iconSpin:i,thumbnailUrl:a,color:e&&void 0!==e.color?e.color:r,selected:t,focused:!!n}}),[e,n,o,t,l,a])},un=function(e){var t=null;return e.dndIsOver?t=e.dndCanDrop?exports.ChonkyIconName.dndCanDrop:exports.ChonkyIconName.dndCannotDrop:e.dndIsDragging&&(t=exports.ChonkyIconName.dndDragging),t},fn=function(e){var t=s.useSelector(Fe),n=r.useState(null),o=n[0],i=n[1],a=r.useState(!1),l=a[0],c=a[1],d=r.useRef(0);return r.useEffect((function(){var n=!1;return e&&(t?(0===d.current&&c(!0),d.current++,Promise.resolve().then((function(){return t(e)})).then((function(e){n||(c(!1),e&&"string"==typeof e&&i(e))})).catch((function(e){n||c(!1),B.error('User-defined "thumbnailGenerator" handler threw an error: '+e.message)}))):e.thumbnailUrl&&i(e.thumbnailUrl)),function(){n=!0}}),[e,i,c,t]),{thumbnailUrl:o,thumbnailLoading:l}};(rn=exports.CustomVisibilityState||(exports.CustomVisibilityState={}))[rn.Hidden=0]="Hidden",rn[rn.Disabled=1]="Disabled",rn[rn.Default=2]="Default",rn[rn.Active=3]="Active";var pn=function(e){var t=s.useDispatch(),n=vt(Q,e);return r.useCallback((function(){return t(nt(n,void 0))}),[t,n])},mn=function(e){var t,n=s.useSelector(ne),o=s.useSelector(ye),i=s.useSelector(ve),a=s.useSelector(xe),l=vt(Q,e),c=vt(Se,null==l||null==(t=l.option)?void 0:t.id),d=0===vt(he,e);return r.useMemo((function(){var e,t;if(!l)return{icon:null,active:!1,disabled:!0};var r=null!=(e=null==(t=l.button)?void 0:t.icon)?e:null;l.sortKeySelector?r=i===l.id?a===_.ASC?exports.ChonkyIconName.sortAsc:exports.ChonkyIconName.sortDesc:exports.ChonkyIconName.placeholder:l.option&&(r=c?exports.ChonkyIconName.toggleOn:exports.ChonkyIconName.toggleOff);var s=l.id===i,u=l.fileViewConfig===o,f=!!l.option&&!!c,p=!1,m=!1;void 0!==l.customVisibility&&(p=l.customVisibility()===exports.CustomVisibilityState.Disabled,m=l.customVisibility()===exports.CustomVisibilityState.Active);var g=s||u||f||m,h=!!l.requiresSelection&&d||p;return l.id===ut.OpenParentFolder.id&&(h=h||!K.isOpenable(n)),{icon:r,active:g,disabled:h}}),[n,o,i,a,l,c,d])},gn=o.memo((function(e){var t,n=e.className,i=e.text,a=e.tooltip,l=e.active,c=e.icon,s=e.iconOnly,d=e.onClick,u=e.disabled,f=e.dropdown,p=hn(),m=r.useContext(Nt),g=c||s?o.createElement("div",{className:s?"":p.iconWithText},o.createElement(m,{icon:c||exports.ChonkyIconName.fallbackIcon,fixedWidth:!0})):null,h=Wt(((t={})[null!=n?n:""]=!0,t[p.baseButton]=!0,t[p.iconOnlyButton]=s,t[p.activeButton]=!!l,t));return o.createElement(F,{className:h,onClick:d,title:a||i,disabled:u||!d},g,i&&!s&&o.createElement("span",null,i),f&&o.createElement("div",{className:p.iconDropdown},o.createElement(m,{icon:c||exports.ChonkyIconName.dropdown,fixedWidth:!0})))})),hn=Vt((function(e){return{baseButton:{fontSize:qt(e.toolbar.fontSize),textTransform:qt("none"),letterSpacing:qt(0),minWidth:qt("auto"),lineHeight:e.toolbar.lineHeight,height:e.toolbar.size,paddingBottom:qt(0),paddingTop:qt(0)},iconWithText:{marginRight:8},iconOnlyButton:{width:e.toolbar.size,textAlign:"center"},iconDropdown:{fontSize:"0.7em",marginLeft:2,marginTop:1},activeButton:{color:qt(e.colors.textActive)}}})),bn=o.memo((function(e){var t=e.fileActionId,n=vt(Q,t),r=pn(t),i=mn(t),a=i.icon,l=i.active,c=i.disabled,s=wt(n),d=s.buttonName,u=s.buttonTooltip;if(!n)return null;var f=n.button;return f?void 0!==n.customVisibility&&n.customVisibility()===exports.CustomVisibilityState.Hidden?null:o.createElement(gn,{text:d,tooltip:u,icon:a,iconOnly:f.iconOnly,active:l,onClick:r,disabled:c}):null})),yn=o.memo((function(e){var t,n=e.first,i=e.current,a=e.item,l=a.file,c=a.disabled,s=a.onClick,d=on({file:l,forceDisableDrop:!l||i}),u=d.dndIsOver,f=d.dndCanDrop,p=d.drop,m=r.useMemo((function(){return{dndIsOver:u,dndCanDrop:f,dndIsDragging:!1}}),[f,u]);an(l,m);var g=un(m),h=r.useContext(Nt),b=vn(m),y=Wt(((t={})[b.baseBreadcrumb]=!0,t[b.disabledBreadcrumb]=c,t[b.currentBreadcrumb]=i,t)),v=l?l.name:"Loading...",x=n&&void 0===(null==l?void 0:l.folderChainIcon)?exports.ChonkyIconName.folder:null==l?void 0:l.folderChainIcon;return o.createElement("div",{className:b.buttonContainer,ref:l?p:null},l&&g&&o.createElement("div",{className:b.dndIndicator},o.createElement(h,{icon:g,fixedWidth:!0})),o.createElement(gn,{icon:x,className:y,text:v,disabled:c,onClick:s}))})),vn=Kt((function(e){return{buttonContainer:{position:"relative"},baseBreadcrumb:{color:function(t){var n=e.palette.text.primary;return t.dndIsOver&&(n=t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor),qt(n)}},disabledBreadcrumb:{color:function(){return qt(e.palette.text.disabled)}},currentBreadcrumb:{textDecoration:qt("underline")},dndIndicator:{color:function(t){return t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor},backgroundColor:function(t){return t.dndCanDrop?e.dnd.canDropMask:e.dnd.cannotDropMask},lineHeight:"calc("+e.toolbar.lineHeight+" - 6px)",transform:"translateX(-50%) translateY(-50%)",borderRadius:e.toolbar.buttonRadius,height:e.toolbar.size-6,width:e.toolbar.size-6,boxSizing:"border-box",position:"absolute",textAlign:"center",left:"50%",top:"50%",zIndex:5}}})),xn=o.memo((function(){var e,t,n=Cn(),i=(e=s.useSelector(ee),t=s.useDispatch(),r.useMemo((function(){var n=[];if(!e)return n;for(var r=function(r){var o=e[r];n.push({file:o,disabled:!o,onClick:K.isOpenable(o)&&r!==e.length-1?function(){return t(nt(ut.OpenFiles,{targetFile:o,files:[o]}))}:void 0})},o=0;o<e.length;++o)r(o);return n}),[t,e])),a=r.useMemo((function(){for(var e=[],t=0;t<i.length;++t){var n=o.createElement(yn,{key:"folder-chain-"+t,first:0===t,current:t===i.length-1,item:i[t]});e.push(n)}return e}),[i]);return o.createElement(v,{className:n.navbarWrapper},o.createElement(v,{className:n.navbarContainer},o.createElement(bn,{fileActionId:ut.OpenParentFolder.id}),o.createElement(S,{className:n.navbarBreadcrumbs,classes:{separator:n.separator}},a)))})),Cn=Vt((function(e){return{navbarWrapper:{paddingBottom:e.margins.rootLayoutMargin},navbarContainer:{display:"flex"},upDirectoryButton:{fontSize:qt(e.toolbar.fontSize),height:e.toolbar.size,width:e.toolbar.size,padding:"0px !important"},navbarBreadcrumbs:{fontSize:qt(e.toolbar.fontSize),flexGrow:100},separator:{marginRight:qt(4),marginLeft:qt(4)}}})),Sn=o.forwardRef((function(e,t){var n,i=e.text,a=e.active,l=e.icon,c=e.onClick,s=e.disabled,d=Fn(),u=r.useContext(Nt),f=Wt(((n={})[d.baseButton]=!0,n[d.activeButton]=a,n));return o.createElement(E,{ref:t,className:f,onClick:c,disabled:s},l&&o.createElement(k,{className:d.icon},o.createElement(u,{icon:l,fixedWidth:!0})),o.createElement(w,{primaryTypographyProps:{className:d.text}},i))})),Fn=Vt((function(e){return{baseButton:{lineHeight:qt(e.toolbar.lineHeight),height:qt(e.toolbar.size),minHeight:qt("auto"),minWidth:qt("auto"),padding:qt(20)},icon:{fontSize:qt(e.toolbar.fontSize),minWidth:qt("auto"),color:qt("inherit"),marginRight:8},text:{fontSize:qt(e.toolbar.fontSize)},activeButton:{color:qt(e.colors.textActive)}}})),In=o.forwardRef((function(e,t){var n=e.fileActionId,i=e.onClickFollowUp,a=vt(Q,n),l=pn(n),c=mn(n),s=c.icon,d=c.active,u=c.disabled,f=wt(a).buttonName,p=r.useCallback((function(){l(),i&&i()}),[i,l]);return a&&a.button?void 0!==a.customVisibility&&a.customVisibility()===exports.CustomVisibilityState.Hidden?null:o.createElement(Sn,{ref:t,text:f,icon:s,onClick:p,active:d,disabled:u}):null})),kn=o.memo((function(e){var t,n,i=e.name,a=e.fileActionIds,c=o.useState(null),s=c[0],d=c[1],u=r.useCallback((function(e){return d(e.currentTarget)}),[d]),f=r.useCallback((function(){return d(null)}),[d]),p=r.useMemo((function(){return a.map((function(e){return o.createElement(In,{key:"menu-item-"+e,fileActionId:e,onClickFollowUp:f})}))}),[a,f]),m=(t=i,n=l.useIntl(),r.useMemo((function(){return n.formatMessage({id:It(exports.I18nNamespace.FileActionGroups,t),defaultMessage:t})}),[t,n])),g=wn();return o.createElement(o.Fragment,null,o.createElement(gn,{text:m,onClick:u,dropdown:!0}),o.createElement(I,{autoFocus:!0,keepMounted:!0,elevation:2,anchorEl:s,onClose:f,open:Boolean(s),transitionDuration:150,classes:{list:g.dropdownList}},p))})),wn=Vt((function(){return{dropdownList:{paddingBottom:qt(0),paddingTop:qt(0)}}})),En=o.memo((function(){var e=Dn(),t=s.useSelector(Ge.getDisplayFileIds),n=s.useSelector(fe),r=s.useSelector(le),i=l.useIntl(),a=i.formatMessage({id:It(exports.I18nNamespace.Toolbar,"visibleFileCount"),defaultMessage:"{fileCount, plural,\n                =0 {# items}\n                one {# item}\n                other {# items}\n            }"},{fileCount:t.length}),c=i.formatMessage({id:It(exports.I18nNamespace.Toolbar,"selectedFileCount"),defaultMessage:"{fileCount, plural,\n                =0 {}\n                other {# selected}\n            }"},{fileCount:n}),d=i.formatMessage({id:It(exports.I18nNamespace.Toolbar,"hiddenFileCount"),defaultMessage:"{fileCount, plural,\n                =0 {}\n                other {# hidden}\n            }"},{fileCount:r});return o.createElement("div",{className:e.infoContainer},o.createElement(D,{className:e.infoText,variant:"body1"},a,(c||d)&&o.createElement("span",{className:e.extraInfoSpan},"(",o.createElement("span",{className:e.selectionSizeText},c),c&&d&&", ",o.createElement("span",{className:e.hiddenCountText},d),")")))})),Dn=Vt((function(e){return{infoContainer:{height:e.toolbar.size,display:"flex"},infoText:{lineHeight:qt(e.toolbar.lineHeight),fontSize:qt(e.toolbar.fontSize),marginLeft:qt(12),height:e.toolbar.size},extraInfoSpan:{marginRight:qt(8),marginLeft:qt(8),opacity:.8},selectionSizeText:{color:e.colors.textActive},hiddenCountText:{}}})),Mn=o.memo((function(){var e=l.useIntl().formatMessage({id:It(exports.I18nNamespace.Toolbar,"searchPlaceholder"),defaultMessage:"Search"}),t=Nn(),n=r.useContext(Nt),i=r.useRef(),a=s.useDispatch(),c=s.useSelector(se),d=r.useState(c),u=d[0],f=d[1],p=function(e,t){var n=r.useState(e),o=n[0],i=n[1];return r.useEffect((function(){var t=setTimeout((function(){i(e)}),300);return function(){clearTimeout(t)}}),[e,300]),[o,i]}(u)[0],m=r.useState(!1),g=m[0],h=m[1];r.useEffect((function(){return a(ht.setFocusSearchInput((function(){i.current&&i.current.focus()}))),function(){a(ht.setFocusSearchInput(null))}}),[a]),r.useEffect((function(){h(!1),a(ht.setSearchString(p))}),[p,a]);var b=r.useCallback((function(e){h(!0),f(e.currentTarget.value)}),[]),y=r.useCallback((function(e){"Escape"===e.key&&(f(""),a(ht.setSearchString("")),i.current&&i.current.blur())}),[a]);return o.createElement(N,{className:t.searchFieldContainer,size:"small",variant:"outlined",value:u,placeholder:e,onChange:b,inputRef:i,InputProps:{onKeyUp:y,startAdornment:o.createElement(M,{className:t.searchIcon,position:"start"},o.createElement(n,{icon:g?exports.ChonkyIconName.loading:exports.ChonkyIconName.search,spin:g})),className:t.searchFieldInput},inputProps:{className:t.searchFieldInputInner}})})),Nn=Vt((function(e){return{searchFieldContainer:{height:e.toolbar.size,width:150},searchIcon:{fontSize:"0.9em",opacity:.75},searchFieldInput:{lineHeight:qt(0),padding:qt(0),margin:qt(0),fontSize:qt(e.toolbar.fontSize),borderRadius:e.toolbar.buttonRadius,height:e.toolbar.size-4,paddingLeft:qt(8),marginTop:2},searchFieldInputInner:{lineHeight:qt(e.toolbar.size-4+"px"),fontSize:qt(e.toolbar.fontSize),height:qt(e.toolbar.size-4),padding:qt([0,8,0,0]),margin:qt(0),"-webkit-appearance":"none"}}})),An=o.memo((function(){var e=On(),t=s.useSelector($),n=r.useMemo((function(){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="toolbar-item-"+("string"==typeof r?r:r.name),a="string"==typeof r?o.createElement(bn,{key:i,fileActionId:r}):o.createElement(kn,{key:i,name:r.name,fileActionIds:r.fileActionIds});e.push(a)}return e}),[t]);return o.createElement("div",{className:e.toolbarWrapper},o.createElement("div",{className:e.toolbarContainer},o.createElement("div",{className:e.toolbarLeft},o.createElement(Mn,null),o.createElement(En,null)),o.createElement("div",{className:e.toolbarRight},n)))})),On=Vt((function(e){return{toolbarWrapper:{},toolbarContainer:{flexWrap:"wrap-reverse",display:"flex"},toolbarLeft:{paddingBottom:e.margins.rootLayoutMargin,flexWrap:"nowrap",flexGrow:1e4,display:"flex"},toolbarLeftFiller:{flexGrow:1e4},toolbarRight:{paddingBottom:e.margins.rootLayoutMargin,flexWrap:"nowrap",display:"flex"}}})),zn=function(e){var t=e.width,n=e.height,i=Tn(),a=r.useContext(Nt),c={width:t,height:n},s=l.useIntl().formatMessage({id:It(exports.I18nNamespace.FileList,"nothingToShow"),defaultMessage:"Nothing to show"});return o.createElement("div",{className:i.fileListEmpty,style:c},o.createElement("div",{className:i.fileListEmptyContent},o.createElement(a,{icon:exports.ChonkyIconName.folderOpen})," ",s))},Tn=Vt((function(e){return{fileListEmpty:{color:e.palette.text.disabled,position:"relative",textAlign:"center",fontSize:"1.2em"},fileListEmptyContent:{transform:"translateX(-50%) translateY(-50%)",position:"absolute",left:"50%",top:"50%"}}})),Ln=function(e){var t=e.children,n=e.wrapperTag,i=e.passthroughProps,a=e.onSingleClick,l=e.onDoubleClick,c=e.onKeyboardClick,d=e.setFocused,u=function(e,t){var n=s.useSelector(Ie),o=r.useRef({clickCount:0,clickTimeout:null});return r.useCallback((function(r){var i={altKey:r.altKey,ctrlKey:r.ctrlKey||r.metaKey,shiftKey:r.shiftKey};o.current.clickCount++,1===o.current.clickCount?(e&&(r.preventDefault(),e(i)),o.current.clickCount=1,o.current.clickTimeout=setTimeout((function(){return o.current.clickCount=0}),n)):2===o.current.clickCount&&(t&&(r.preventDefault(),t(i)),"number"==typeof o.current.clickTimeout&&(clearTimeout(o.current.clickTimeout),o.current.clickTimeout=null,o.current.clickCount=0))}),[n,e,t,o])}(a,l),f=function(e){return r.useCallback((function(t){if(e){var n={enterKey:"Enter"===t.nativeEvent.code,spaceKey:"Space"===t.nativeEvent.code,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey};(n.spaceKey||n.enterKey)&&(t.preventDefault(),t.stopPropagation(),e(n))}}),[e])}(c),p={onFocus:r.useCallback((function(){return d&&d(!0)}),[d]),onBlur:r.useCallback((function(){return d&&d(!1)}),[d])};(a||l||c)&&(p.onClick=u,p.onKeyDown=f,p.tabIndex=0);var m=T({},p,i);return o.createElement(n,Object.assign({},m),t)},Rn=o.memo((function(e){var t=e.file,n=e.className,i=function(e){var t=r.useMemo((function(){var t=[];return K.isHidden(e)&&t.push(exports.ChonkyIconName.hidden),K.isSymlink(e)&&t.push(exports.ChonkyIconName.symlink),K.isEncrypted(e)&&t.push(exports.ChonkyIconName.lock),t}),[e]),n=r.useContext(Nt);return r.useMemo((function(){return t.map((function(e,t){return o.createElement(n,{key:"file-modifier-"+t,icon:e})}))}),[n,t])}(t),a=function(e){return r.useMemo((function(){if(!e)return o.createElement(ln,{minLength:15,maxLength:20});var t,n,r,i=null;return K.isDirectory(e)?t=e.name:(i=null!=(n=e.ext)?n:(r=e.name.split(".")).length?"."+r[r.length-1]:"",t=e.name.substr(0,e.name.length-i.length)),o.createElement(o.Fragment,null,t,i&&o.createElement("span",{className:"chonky-file-entry-description-title-extension"},i))}),[e])}(t),l=_n();return o.createElement("span",{className:n,title:t?t.name:void 0},i.length>0&&o.createElement("span",{className:l.modifierIcons},i),a)}));Rn.displayName="FileEntryName";var _n=Kt((function(e){return{modifierIcons:{color:e.palette.text.hint,position:"relative",fontSize:"0.775em",paddingRight:5}}})),jn=o.memo((function(e){var t=e.file,n=dn(t,e.selected,e.focused),i=Et(t),a=i.fileModDateString,l=i.fileSizeString,c=Hn(n),s=r.useContext(Nt),d=sn(t);return o.createElement("div",Object.assign({className:c.listFileEntry},d),o.createElement("div",{className:c.listFileEntryIcon},o.createElement(s,{icon:n.icon,spin:n.iconSpin,fixedWidth:!0})),o.createElement("div",{className:c.listFileEntryDescription},o.createElement("div",{className:c.listFileEntryName,title:t?t.name:void 0},o.createElement(Rn,{file:t})),o.createElement("div",{className:c.listFileEntryProperties},o.createElement("div",{className:c.listFileEntryProperty},t?null!=a?a:o.createElement("span",null,""):o.createElement(ln,{minLength:5,maxLength:15})),o.createElement("div",{className:c.listFileEntryProperty},t?null!=l?l:o.createElement("span",null,""):o.createElement(ln,{minLength:10,maxLength:20})))),o.createElement("div",{className:"chonky-file-entry-outline"}),o.createElement("div",{className:"chonky-file-entry-selection"}))})),Hn=Kt((function(e){return{listFileEntry:{fontSize:e.listFileEntry.fontSize,alignItems:"center",position:"relative",display:"flex",height:"100%"},listFileEntryIcon:{backgroundColor:function(e){return e.color},boxShadow:"inset rgba(255, 255, 255, 0.5) 0 0 0 999px",borderRadius:e.listFileEntry.iconBorderRadius,fontSize:e.listFileEntry.iconFontSize,color:"#fff",padding:8},listFileEntryDescription:{flexDirection:"column",display:"flex",flexGrow:1},listFileEntryName:{padding:[0,8,4,8]},listFileEntryProperties:{fontSize:e.listFileEntry.propertyFontSize,flexDirection:"row",display:"flex"},listFileEntryProperty:{padding:[0,8],opacity:.4}}})),Pn=o.memo((function(e){var t=e.file,n=e.children,l=function(e){var t=function(e){var t=s.useStore(),n=P(e),o=r.useCallback((function(){var e=t.getState();return{sourceInstanceId:U(e),source:te(e),draggedFile:n.current,selectedFiles:me(e)}}),[t,n]),l=s.useDispatch(),c=r.useCallback((function(){return K.isDraggable(n.current)}),[n]),d=r.useCallback((function(){var e={type:"dnd-chonky-file-entry",payload:o()};return l(nt(ut.StartDragNDrop,e.payload)),e}),[l,o]),u=r.useCallback((function(e,t){var n=t.getDropResult();K.isDraggable(e.payload.draggedFile)&&n&&n.dropTarget&&l(nt(ut.EndDragNDrop,T({},e.payload,{destination:n.dropTarget,copy:"copy"===n.dropEffect})))}),[l]),f=function(){var e=Yt(),t=r.useCallback((function(){return[{},function(){return null},function(){return null}]}),[]),n=e?i.useDrag:t;return n.apply(void 0,arguments)}({item:r.useMemo((function(){return{type:"dnd-chonky-file-entry",payload:{}}}),[]),canDrag:c,begin:d,end:u,collect:r.useCallback((function(e){return{isDragging:e.isDragging()}}),[])}),p=f[0].isDragging,m=f[1],g=f[2];return r.useEffect((function(){g(a.getEmptyImage(),{captureDraggingState:!0})}),[g]),{dndIsDragging:p,drag:m}}(e),n=t.dndIsDragging,o=t.drag,l=on({file:e}),c=l.dndIsOver,d=l.dndCanDrop;return{drop:l.drop,drag:o,dndState:r.useMemo((function(){return{dndIsDragging:n,dndIsOver:c,dndCanDrop:d}}),[d,n,c])}}(t),c=l.drop,d=l.drag,u=l.dndState;an(t,u);var f=Bn();return o.createElement("div",{ref:c,className:f.fillParent},o.createElement("div",{ref:K.isDraggable(t)?d:null,className:f.fillParent},n(u)))})),Bn=Kt((function(){return{fillParent:{height:"100%"}}})),Kn=o.memo((function(e){var t=e.className,n=e.thumbnailUrl,r=n?{backgroundImage:"url('"+n+"')"}:{},i=Vn();return o.createElement("div",{className:y([t,i.fileThumbnail]),style:r})}));Kn.displayName="FileThumbnail";var Vn=Vt((function(){return{fileThumbnail:{backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"contain"}}})),qn=o.memo((function(e){var t,n=e.className,i=e.dndState,a=un(i),l=Wn(i),c=r.useContext(Nt);if(!a)return null;var s=Wt(((t={})[l.dndIndicator]=!0,t[n]=!0,t));return o.createElement("div",{className:s},o.createElement(c,{icon:a}))})),Wn=Kt((function(e){return{dndIndicator:{color:function(t){return t.dndIsOver?t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor:"#000"},boxSizing:"border-box",position:"absolute",fontSize:"1.2em",opacity:.6,padding:6,"&:before":{borderBottom:"50px solid transparent",borderLeft:"50px solid #fff",position:"absolute",content:'""',zIndex:-1,left:0,top:0}}}})),Gn=o.memo((function(e){var t,n=e.className,r=e.entryState,i=e.dndState,a=Un(r),l=Xn(r),c=Zn(r),s=Wt(((t={})[a.previewFile]=!0,t[n||""]=!!n,t));return o.createElement("div",{className:s},o.createElement("div",{className:a.folderBackSideMid},o.createElement("div",{className:a.folderBackSideTop}),o.createElement("div",{className:a.folderFrontSide},o.createElement(qn,{className:l.dndIndicator,dndState:i}),o.createElement("div",{className:Wt([l.fileIcon,a.fileIcon])},r.childrenCount),o.createElement("div",{className:c.selectionIndicator}),o.createElement(Kn,{className:l.thumbnail,thumbnailUrl:r.thumbnailUrl}))))}));Gn.displayName="GridEntryPreviewFolder";var Un=Kt((function(e){return{previewFile:{borderRadius:e.gridFileEntry.borderRadius,position:"relative",overflow:"hidden"},folderBackSideTop:{backgroundColor:function(e){return e.color},boxShadow:function(t){var n=e.gridFileEntry.folderBackColorTint;return t.focused?n="rgba(0, 0, 0, 0.3)":t.selected&&(n="rgba(0, 153, 255, .4)"),"inset "+n+" 0 0 0 999px"},borderTopLeftRadius:e.gridFileEntry.borderRadius,borderTopRightRadius:10,position:"absolute",right:"60%",height:13,top:-10,left:0,"&:after":{borderRightColor:e.palette.background.paper,borderTopColor:e.palette.background.paper,borderBottomColor:"transparent",borderLeftColor:"transparent",borderWidth:[0,15,10,0],borderStyle:"solid",position:"absolute",display:"block",content:'""',right:0,top:0}},folderBackSideMid:{backgroundColor:function(e){return e.color},boxShadow:function(t){var n=e.gridFileEntry.folderBackColorTint;return t.focused?n="rgba(0, 0, 0, 0.3)":t.selected&&(n="rgba(0, 153, 255, .4)"),"inset "+n+" 0 0 0 999px"},borderTopRightRadius:e.gridFileEntry.borderRadius,position:"absolute",bottom:0,right:0,left:0,top:10},folderFrontSide:{boxShadow:function(t){var n=[];return t.focused&&n.push("inset rgba(0, 0, 0, 1) 0 0 0 3px"),t.selected&&n.push("inset rgba(0, 153, 255, .65) 0 0 0 3px"),n.push("inset "+e.gridFileEntry.folderFrontColorTint+" 0 0 0 999px"),n.join(", ")},backgroundColor:function(e){return e.color},borderRadius:e.gridFileEntry.borderRadius,position:"absolute",overflow:"hidden",bottom:0,right:0,left:0,top:10},fileIcon:{fontSize:qt(e.gridFileEntry.childrenCountSize)}}})),Yn=o.memo((function(e){var t,n=e.className,i=e.entryState,a=e.dndState,l=Xn(i),c=Zn(i),s=r.useContext(Nt),d=Wt(((t={})[l.previewFile]=!0,t[n||""]=!!n,t));return o.createElement("div",{className:d},o.createElement(qn,{className:l.dndIndicator,dndState:a}),o.createElement("div",{className:l.fileIcon},o.createElement(s,{icon:i.icon,spin:i.iconSpin})),o.createElement("div",{className:c.selectionIndicator}),o.createElement(Kn,{className:l.thumbnail,thumbnailUrl:i.thumbnailUrl}))}));Yn.displayName="GridEntryPreviewFile";var Xn=Kt((function(e){return{previewFile:{boxShadow:function(t){var n=[];return t.selected&&n.push("inset rgba(0,153,255, .65) 0 0 0 3px"),t.focused&&n.push("inset rgba(0, 0, 0, 1) 0 0 0 3px"),n.push("inset "+e.gridFileEntry.fileColorTint+" 0 0 0 999px"),n.join(", ")},backgroundColor:function(e){return e.color},borderRadius:e.gridFileEntry.borderRadius,position:"relative",overflow:"hidden"},dndIndicator:{zIndex:14},fileIcon:{transform:"translateX(-50%) translateY(-50%)",fontSize:e.gridFileEntry.iconSize,opacity:function(e){return e.thumbnailUrl&&!e.focused?0:1},color:function(t){return t.focused?e.gridFileEntry.iconColorFocused:e.gridFileEntry.iconColor},position:"absolute",left:"50%",zIndex:12,top:"50%"},thumbnail:{borderRadius:e.gridFileEntry.borderRadius,position:"absolute",zIndex:6,bottom:5,right:5,left:5,top:5}}})),Zn=Kt((function(){return{selectionIndicator:{display:function(e){return e.selected?"block":"none"},background:"repeating-linear-gradient(45deg,rgba(0,153,255,.14),rgba(0,153,255,.14) 10px,rgba(0,153,255,.25) 0,rgba(0,153,255,.25) 20px)",backgroundColor:"rgba(0, 153, 255, .14)",position:"absolute",height:"100%",width:"100%",zIndex:10},focusIndicator:{display:function(e){return e.focused?"block":"none"},boxShadow:"inset rgba(0, 0, 0, 1) 0 0 0 2px",position:"absolute",height:"100%",width:"100%",zIndex:11}}})),Qn=o.memo((function(e){var t,n=e.file,r=e.selected,i=e.focused,a=e.dndState,l=K.isDirectory(n),c=dn(n,r,i),s=$n(c),d=sn(n),u=Wt(((t={})[s.gridFileEntry]=!0,t));return o.createElement("div",Object.assign({className:u},d),o.createElement(l?Gn:Yn,{className:s.gridFileEntryPreview,entryState:c,dndState:a}),o.createElement("div",{className:s.gridFileEntryNameContainer},o.createElement(Rn,{className:s.gridFileEntryName,file:n})))}));Qn.displayName="GridEntry";var $n=Kt((function(e){return{gridFileEntry:{flexDirection:"column",display:"flex",height:"100%"},gridFileEntryPreview:{flexGrow:1},gridFileEntryNameContainer:{fontSize:e.gridFileEntry.fontSize,wordBreak:"break-word",textAlign:"center",paddingTop:5},gridFileEntryName:{backgroundColor:function(e){return e.selected?"rgba(0,153,255, .25)":"transparent"},textDecoration:function(e){return e.focused?"underline":"none"},borderRadius:3,padding:[2,4]}}})),Jn=o.memo((function(e){var t=e.file,n=e.dndState,i=dn(t,e.selected,e.focused),a=un(n),l=Et(t),c=l.fileModDateString,s=l.fileSizeString,d=r.useMemo((function(){return{entryState:i,dndState:n}}),[n,i]),u=er(d),f=Zn(i),p=r.useContext(Nt),m=sn(t);return o.createElement("div",Object.assign({className:u.listFileEntry},m),o.createElement("div",{className:f.focusIndicator}),o.createElement("div",{className:Wt([f.selectionIndicator,u.listFileEntrySelection])}),o.createElement("div",{className:u.listFileEntryIcon},o.createElement(p,{icon:null!=a?a:i.icon,spin:!a&&i.iconSpin,fixedWidth:!0})),o.createElement("div",{className:u.listFileEntryName,title:t?t.name:void 0},o.createElement(Rn,{file:t})),o.createElement("div",{className:u.listFileEntryProperty},t?null!=c?c:o.createElement("span",null,""):o.createElement(ln,{minLength:5,maxLength:15})),o.createElement("div",{className:u.listFileEntryProperty},t?null!=s?s:o.createElement("span",null,""):o.createElement(ln,{minLength:10,maxLength:20})))})),er=Kt((function(e){return{listFileEntry:{boxShadow:"inset "+e.palette.divider+" 0 -1px 0",fontSize:e.listFileEntry.fontSize,color:function(t){var n=t.dndState;return n.dndIsOver?n.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor:"inherit"},alignItems:"center",position:"relative",display:"flex",height:"100%"},listFileEntrySelection:{opacity:.6},listFileEntryIcon:{color:function(t){var n=t.dndState;return n.dndIsOver?n.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor:t.entryState.color},fontSize:e.listFileEntry.iconFontSize,boxSizing:"border-box",padding:[2,4],zIndex:20},listFileEntryName:{textOverflow:"ellipsis",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",flex:"1 1 300px",paddingLeft:8,zIndex:20},listFileEntryProperty:{fontSize:e.listFileEntry.propertyFontSize,boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",flex:"0 1 150px",padding:[2,8],zIndex:20}}})),tr={dndIsDragging:!1,dndIsOver:!1,dndCanDrop:!1},nr=o.memo((function(e){var t,n=e.fileId,i=e.displayIndex,a=e.fileViewMode,l=rr(),c=vt(ie,n),d=vt(pe,n),u=s.useSelector(ke),f=function(e,t){var n=s.useDispatch(),o=r.useCallback((function(r,o){e&&n(nt(ut.MouseClickFile,{clickType:o,file:e,fileDisplayIndex:t,altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey}))}),[n,e,t]),i=r.useCallback((function(r){e&&n(nt(ut.KeyboardClickFile,{file:e,fileDisplayIndex:t,enterKey:r.enterKey,spaceKey:r.spaceKey,altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey}))}),[n,e,t]);return{onSingleClick:r.useCallback((function(e){return o(e,"single")}),[o]),onDoubleClick:r.useCallback((function(e){return o(e,"double")}),[o]),onKeyboardClick:i}}(c,i),p=r.useState(!1),m=p[0],g=p[1],h=T({wrapperTag:"div",passthroughProps:{className:l.fileEntryClickableWrapper}},K.isClickable(c)?f:void 0,{setFocused:g}),b={file:c,selected:d,focused:m};return t=a===exports.FileViewMode.List?Jn:a===exports.FileViewMode.Compact?jn:Qn,u?o.createElement(Ln,Object.assign({},h),o.createElement(t,Object.assign({},b,{dndState:tr}))):o.createElement(Pn,{file:c},(function(e){return o.createElement(Ln,Object.assign({},h),o.createElement(t,Object.assign({},b,{dndState:e})))}))}));nr.displayName="SmartFileEntry";var rr=Vt((function(){return{fileEntryClickableWrapper:{outline:"none !important",position:"relative",height:"100%"}}})),or=function(e,t,n,r){var o,i,a=r?5:8,l=void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")?0:18;return r?i=(e-a-l)/(o=2):(i=n.entryWidth,o=Math.max(1,Math.floor((e-l)/(i+a)))),{rowCount:Math.ceil(t/o),columnCount:o,gutter:a,rowHeight:n.entryHeight,columnWidth:i}},ir=o.memo((function(e){var t=e.width,n=e.height,i=s.useSelector(ye),a=s.useSelector(Ge.getDisplayFileIds),l=r.useMemo((function(){return a.length}),[a]),c=r.useRef(),d=Pt(),u=r.useState(or(t,l,i,d)),f=u[0],p=u[1],m=r.useRef(f);r.useEffect((function(){var e=m.current,n=or(t,l,i,d);m.current=n,c.current&&(e.rowCount!==n.rowCount&&c.current.resetAfterRowIndex(Math.min(e.rowCount,n.rowCount)-1),e.columnCount!==n.columnCount&&c.current.resetAfterColumnIndex(Math.min(e.columnCount,n.rowCount)-1),e.columnWidth!==n.columnWidth&&c.current.resetAfterIndices({columnIndex:0,rowIndex:0})),p(n)}),[p,m,d,t,i,l]);var g=r.useMemo((function(){var e=m;return{getColumnWidth:function(t){return e.current.columnWidth+(t===e.current.columnCount-1?0:e.current.gutter)},getRowHeight:function(t){return e.current.rowHeight+(t===e.current.rowCount-1?0:e.current.gutter)}}}),[m]),h=P(s.useSelector(Ge.getDisplayFileIds)),b=r.useCallback((function(e){var t,n=e.rowIndex*m.current.columnCount+e.columnIndex;return null!=(t=h.current[n])?t:"loading-file-"+n}),[m,h]),y=r.useCallback((function(e){var t=e.rowIndex*m.current.columnCount+e.columnIndex,n=a[t];if(void 0===a[t])return null;var r=T({},e.style,{paddingRight:e.columnIndex===m.current.columnCount-1?0:m.current.gutter,paddingBottom:e.rowIndex===m.current.rowCount-1?0:m.current.gutter,boxSizing:"border-box"});return o.createElement("div",{style:r},o.createElement(nr,{fileId:null!=n?n:null,displayIndex:t,fileViewMode:i.mode}))}),[a,i.mode]),v=ar();return r.useMemo((function(){return o.createElement(O.VariableSizeGrid,{ref:c,className:v.gridContainer,estimatedRowHeight:f.rowHeight+f.gutter,rowHeight:g.getRowHeight,estimatedColumnWidth:f.columnWidth+f.gutter,columnWidth:g.getColumnWidth,columnCount:f.columnCount,height:n,rowCount:f.rowCount,width:t,itemKey:b},y)}),[v.gridContainer,f.rowHeight,f.gutter,f.columnWidth,f.columnCount,f.rowCount,g.getRowHeight,g.getColumnWidth,n,t,b,y])})),ar=Vt((function(){return{gridContainer:{}}})),lr=o.memo((function(e){var t=e.width,n=e.height,i=s.useSelector(ye),a=r.useRef(),l=s.useSelector(Ge.getDisplayFileIds),c=P(l),d=r.useCallback((function(e){var t;return null!=(t=c.current[e])?t:"loading-file-"+e}),[c]),u=cr();return r.useMemo((function(){return o.createElement(O.FixedSizeList,{ref:a,className:u.listContainer,itemSize:i.entryHeight,height:n,itemCount:l.length,width:t,itemKey:d},(function(e){var t;return o.createElement("div",{style:e.style},o.createElement(nr,{fileId:null!=(t=l[e.index])?t:null,displayIndex:e.index,fileViewMode:exports.FileViewMode.List}))}))}),[u.listContainer,i.entryHeight,n,l,t,d])})),cr=Kt((function(e){return{listContainer:{borderTop:"solid 1px "+e.palette.divider}}})),sr=o.memo((function(e){var t=s.useSelector(Ge.getDisplayFileIds),n=s.useSelector(ye),i=s.useSelector(te),a=on({file:i}),l=a.drop,c=a.dndCanDrop,d=a.dndIsOverCurrent,u=r.useMemo((function(){return{dndCanDrop:c,dndIsOverCurrent:d}}),[c,d]),f=dr(u),p=ur(n),m=e.onScroll,g=r.useCallback((function(e){var r=e.width,i=e.height;return 0===t.length?o.createElement(zn,{width:r,height:n.entryHeight}):n.mode===exports.FileViewMode.List?o.createElement(lr,{width:r,height:i}):o.createElement(ir,{width:r,height:i})}),[t,n]),h=r.useContext(Nt);return o.createElement("div",{onScroll:m,ref:l,className:Wt([p.fileListWrapper,f.fileListWrapper]),role:"list"},o.createElement("div",{className:f.dndDropZone},o.createElement("div",{className:f.dndDropZoneIcon},o.createElement(h,{icon:c?exports.ChonkyIconName.dndCanDrop:exports.ChonkyIconName.dndCannotDrop}))),o.createElement(A,{disableHeight:!1},g))}));sr.displayName="FileList";var dr=Kt((function(e){return{fileListWrapper:{minHeight:ut.EnableGridView.fileViewConfig.entryHeight+2,background:function(t){return t.dndIsOverCurrent&&t.dndCanDrop?t.dndCanDrop?Bt(e.dnd.fileListCanDropMaskOne,e.dnd.fileListCanDropMaskTwo):Bt(e.dnd.fileListCannotDropMaskOne,e.dnd.fileListCannotDropMaskTwo):"none"}},dndDropZone:{display:function(e){return e.dndIsOverCurrent&&e.dndCanDrop?"block":"none"},borderRadius:e.gridFileEntry.borderRadius,pointerEvents:"none",position:"absolute",height:"100%",width:"100%",zIndex:2},dndDropZoneIcon:{backgroundColor:function(t){return t.dndCanDrop?e.dnd.canDropMask:e.dnd.cannotDropMask},color:function(t){return t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor},borderRadius:e.gridFileEntry.borderRadius,transform:"translateX(-50%) translateY(-50%)",position:"absolute",textAlign:"center",lineHeight:"60px",fontSize:"2em",left:"50%",height:60,top:"50%",width:60}}})),ur=Vt((function(){return{fileListWrapper:{height:"100%",maxHeight:"100%"}}})),fr=o.memo((function(){var e=s.useDispatch();r.useEffect((function(){return e(ht.setContextMenuMounted(!0)),function(){e(ht.setContextMenuMounted(!1))}}),[e]);var t=l.useIntl().formatMessage({id:It(exports.I18nNamespace.FileContextMenu,"browserMenuShortcut"),defaultMessage:"Browser menu: {shortcut}"},{shortcut:o.createElement("strong",null,"Alt + Right Click")}),n=s.useSelector(De),i=s.useSelector(J),a=function(){var e=s.useDispatch();return r.useCallback((function(){return e(ht.hideContextMenu())}),[e])}(),c=r.useMemo((function(){for(var e=[],t=function(t){var n=i[t];"string"==typeof n?e.push(o.createElement(In,{key:"context-menu-item-"+n,fileActionId:n,onClickFollowUp:a})):n.fileActionIds.map((function(t){return e.push(o.createElement(In,{key:"context-menu-item-"+n.name+"-"+t,fileActionId:t,onClickFollowUp:a}))}))},n=0;n<i.length;++n)t(n);return e}),[i,a]),d=r.useMemo((function(){return n?{top:n.mouseY,left:n.mouseX}:void 0}),[n]),u=pr();return o.createElement(I,{elevation:2,disablePortal:!0,onClose:a,transitionDuration:150,open:!!n,anchorPosition:d,anchorReference:"anchorPosition",classes:{list:u.contextMenuList}},c,o.createElement(z,{component:"div",className:u.browserMenuTooltip},t))})),pr=Vt((function(){return{contextMenuList:{paddingBottom:qt(0),paddingTop:qt(0)},browserMenuTooltip:{lineHeight:qt("30px"),fontSize:qt("0.7em")}}})),mr=o.memo(o.forwardRef((function(e,t){var n=e.onScroll;return o.createElement(nn,Object.assign({ref:t},e),o.createElement(xn,null),o.createElement(An,null),o.createElement(sr,{onScroll:n}),o.createElement(fr,null))})));mr.displayName="FullFileBrowser";var gr=function(e,t){return r.useMemo((function(){for(var n=e[t],r=[n],o=n.parentId;o;){var i=e[o];if(!i)break;r.unshift(i),o=i.parentId}return r}),[t,e])},hr=function(e,t){return r.useMemo((function(){return e[t].childrenIds.map((function(t){return e[t]}))}),[t,e])},br=function(e,t){var n=r.useState(e),o=n[0],i=n[1],a=r.useState(t),l=a[0],c=a[1],s=r.useCallback((function(){i(e),c(t)}),[e,t]),d=r.useCallback((function(e,t,n){return i((function(r){var o=T({},r),i=new Set(e.map((function(e){return e.id}))),a=t.childrenIds.filter((function(e){return!i.has(e)}));o[t.id]=T({},t,{childrenIds:a,childrenCount:a.length});var l=[].concat(n.childrenIds,e.map((function(e){return e.id})));return o[n.id]=T({},n,{childrenIds:l,childrenCount:l.length}),e.forEach((function(e){o[e.id]=T({},e,{parentId:n.id})})),o}))}),[]);return{fileMap:o,currentFolderId:l,methods:r.useMemo((function(){return{setFileMap:i,setCurrentFolderId:c,resetFileMap:s,moveFiles:d}}),[i,c,s,d])}},yr=function(e){return r.useCallback((function(t){if(t.id===ut.OpenFiles.id){var n=t.payload,r=n.targetFile,o=null!=r?r:n.files[0];o&&K.isDirectory(o)&&e.setCurrentFolderId(o.id)}else t.id===ut.MoveFiles.id&&e.moveFiles(t.payload.files,t.payload.source,t.payload.destination)}),[e])},vr={__proto__:null,useFolderChain:gr,useFiles:hr,useFileMapMethods:br,useFileActionHandler:yr,useFileMap:function(e){var t=br(e.baseFileMap,e.initialFolderId),n=t.fileMap,r=t.currentFolderId,o=t.methods;return{data:{fileMap:n,currentFolderId:r,folderChain:gr(n,r),files:hr(n,r)},methods:o,fileActionHandler:yr(o)}}};exports.ChonkyActions=ut,exports.ChonkyDndFileEntryType="dnd-chonky-file-entry",exports.DefaultFileActions=pt,exports.FileBrowser=nn,exports.FileContextMenu=fr,exports.FileHelper=K,exports.FileList=sr,exports.FileNavbar=xn,exports.FileToolbar=An,exports.FullFileBrowser=mr,exports.OptionIds=q,exports.defaultFormatters=Dt,exports.defineFileAction=it,exports.fileMap=vr,exports.getActionI18nId=kt,exports.getFileData=Ue,exports.getI18nId=It,exports.getIsFileSelected=Ye,exports.getSelectedFiles=Xe,exports.getSelectedFilesForAction=Ze,exports.reduxActions=ht,exports.rootReducer=bt,exports.selectCleanFileIds=oe,exports.selectClearSelectionOnOutsideClick=we,exports.selectContextMenuConfig=De,exports.selectContextMenuItems=J,exports.selectContextMenuMounted=Ee,exports.selectContextMenuTriggerFile=Me,exports.selectCurrentFolder=te,exports.selectDisableSelection=be,exports.selectDoubleClickDelay=Ie,exports.selectExternalFileActionHandler=Y,exports.selectFileActionData=Q,exports.selectFileActionIds=Z,exports.selectFileActionMap=X,exports.selectFileData=ie,exports.selectFileMap=re,exports.selectFileViewConfig=ye,exports.selectFocusSearchInput=ce,exports.selectFolderChain=ee,exports.selectHiddenFileCount=le,exports.selectHiddenFileIdMap=ae,exports.selectInstanceId=U,exports.selectIsDnDDisabled=ke,exports.selectIsFileSelected=pe,exports.selectOptionMap=Ce,exports.selectOptionValue=Se,exports.selectParentFolder=ne,exports.selectRawFiles=function(e){return e.rawFiles},exports.selectSearchString=se,exports.selectSelectedFileIds=ue,exports.selectSelectedFiles=me,exports.selectSelectedFilesForAction=ge,exports.selectSelectedFilesForActionCount=he,exports.selectSelectionMap=de,exports.selectSelectionSize=fe,exports.selectSortActionId=ve,exports.selectSortOrder=xe,exports.selectThumbnailGenerator=Fe,exports.selectToolbarItems=$,exports.selectors=Ge,exports.setChonkyDefaults=function(e){for(var t=0,n=Object.keys(Ft);t<n.length;t++){var r=n[t];r in e&&(Ft[r]=e[r])}},exports.thunkDispatchFileAction=tt,exports.thunkRequestFileAction=nt,exports.useChonkyStore=yt,exports.useDTE=xt,exports.useParamSelector=vt,exports.usePropReduxUpdate=Ct;
+"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@material-ui/core/styles"),n=e(require("deepmerge")),r=require("react"),o=e(r),i=require("react-dnd"),a=require("react-dnd-html5-backend"),l=require("react-intl"),c=require("react-jss"),s=require("react-redux"),d=e(require("shortid")),u=require("@reduxjs/toolkit"),f=e(require("fast-sort")),p=e(require("fuzzy-search")),m=e(require("redux-watch")),g=e(require("filesize")),h=e(require("exact-trie")),b=e(require("@material-ui/core/useMediaQuery")),y=e(require("classnames")),v=e(require("@material-ui/core/Box")),x=e(require("@material-ui/core/ClickAwayListener")),C=e(require("hotkeys-js")),S=e(require("@material-ui/core/Breadcrumbs")),F=e(require("@material-ui/core/Button")),I=e(require("@material-ui/core/Menu")),k=e(require("@material-ui/core/ListItemIcon")),w=e(require("@material-ui/core/ListItemText")),E=e(require("@material-ui/core/MenuItem")),D=e(require("@material-ui/core/Typography")),M=e(require("@material-ui/core/InputAdornment")),N=e(require("@material-ui/core/TextField")),A=e(require("react-virtualized-auto-sizer")),O=require("react-window"),z=e(require("@material-ui/core/ListSubheader")),T=require("@material-ui/core");function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return R(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var j,H={},P=function(e){var t=r.useRef(H);return t.current===H&&(t.current=e()),t.current},B=function(e){var t=r.useRef(e);return r.useEffect((function(){t.current=e}),[t,e]),t},K=function(){function e(){}return e.error=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,["[Chonky runtime error]"].concat(n))},e.warn=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,["[Chonky runtime warning]"].concat(n))},e.debug=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).debug.apply(e,["[Chonky runtime debug]"].concat(n))},e.formatBullets=function(e){return"\n- "+e.join("\n- ")},e}(),V=function(){function e(){}return e.isDirectory=function(e){return!!e&&!0===e.isDir},e.isHidden=function(e){return!!e&&!0===e.isHidden},e.isSymlink=function(e){return!!e&&!0===e.isSymlink},e.isEncrypted=function(e){return!!e&&!0===e.isEncrypted},e.isClickable=function(e){return!!e},e.isOpenable=function(e){return!!e&&!1!==e.openable},e.isSelectable=function(e){return!!e&&!1!==e.selectable},e.isDraggable=function(e){return!!e&&!1!==e.draggable},e.isDroppable=function(e){return!(!e||(!e.isDir||!1===e.droppable)&&!0!==e.droppable)},e.isDndOpenable=function(t){return!(!e.isOpenable(t)||(!t.isDir||!1===t.dndOpenable)&&!0!==t.dndOpenable)},e.getModDate=function(t){return t&&null!=t.modDate?e.parseDate(t.modDate):null},e.parseDate=function(e){if("string"==typeof e||"number"==typeof e)try{return new Date(e)}catch(t){K.error("Could not convert provided string/number into a date: "+t.message+" ","Invalid value:",e)}return e instanceof Date&&!isNaN(e.getTime())?e:(K.warn("Unsupported date representation:",e),null)},e.getChildrenCount=function(e){return e&&"number"==typeof e.childrenCount?e.childrenCount:null},e}(),q=function(e,t){var n=[],r=[];if("folderChain"!==e&&"fileActions"!==e||t)if(Array.isArray(t)){for(var o=0,i=0,a=new Set,l=new Set,c=0;c<t.length;++c){var s=t[c];s?"object"!=typeof s?o++:!s.id||"fileActions"!==e&&!s.name?i++:a.has(s.id)?l.add(s.id):(a.add(s.id),n.push(s)):"fileActions"===e?o++:n.push(null)}if(o&&r.push("Detected "+o+' file(s) of invalid type. Remember that "files" array should contain either objects or nulls.'),i&&r.push("Detected "+i+' file(s) that are missing the required fields. Remember that file object should define an "id" and a "name".'),l.size>0){var d='"'+Array.from(l).join('", "')+'"';r.push("Detected "+l.size+" file IDs that are used multiple times. Remember that each file should have a unique IDs. The following IDs were seen multiple times: "+d)}}else r.push('Expected "'+e+'" prop to be an array, got "'+typeof t+'" instead.');if(r.length>0){var u,f,p="\n- "+r.join("\n- ");"folderChain"===e?(u="folder chain",f="files"):"fileActions"===e?(u="file actions",f="file actions"):(u="files",f="files"),K.error("Errors were detected when sanitizing the "+u+" array. Offending "+f+" were removed from the array. Summary of validation errors: "+p)}return{sanitizedArray:n,errorMessages:r}},W={ShowHiddenFiles:"show_hidden_files",ShowFoldersFirst:"show_folders_first",DarkMode:"dark_mode"};!function(e){e.ASC="asc",e.DESC="desc"}(j||(j={}));var G,U,Y=function(e){return e.instanceId},X=function(e){return e.externalFileActionHandler},Z=function(e){return e.fileActionMap},Q=function(e){return e.fileActionIds},$=function(e){return function(t){return Z(t)[e]}},J=function(e){return e.toolbarItems},ee=function(e){return e.contextMenuItems},te=function(e){return e.folderChain},ne=function(e){var t=te(e);return t.length>0?t[t.length-1]:null},re=function(e){var t=te(e);return t.length>1?t[t.length-2]:null},oe=function(e){return e.fileMap},ie=function(e){return e.cleanFileIds},ae=function(e){return function(t){return e?oe(t)[e]:null}},le=function(e){return e.hiddenFileIdMap},ce=function(e){return Object.keys(le(e)).length},se=function(e){return e.focusSearchInput},de=function(e){return e.searchString},ue=function(e){return e.selectionMap},fe=function(e){return Object.keys(ue(e))},pe=function(e){return fe(e).length},me=function(e){return function(t){return!!e&&!!ue(t)[e]}},ge=function(e){var t=oe(e);return Object.keys(ue(e)).map((function(e){return t[e]}))},he=function(e){return function(t){var n=t.fileActionMap[e];if(n&&n.requiresSelection)return Ze(t,n.fileFilter)}},be=function(e){return function(t){var n;return null==(n=Qe(t,e))?void 0:n.length}},ye=function(e){return e.disableSelection},ve=function(e){return e.fileViewConfig},xe=function(e){return e.sortActionId},Ce=function(e){return e.sortOrder},Se=function(e){return e.optionMap},Fe=function(e){return function(t){return Se(t)[e]}},Ie=function(e){return e.thumbnailGenerator},ke=function(e){return e.doubleClickDelay},we=function(e){return e.disableDragAndDrop},Ee=function(e){return e.clearSelectionOnOutsideClick},De=function(e){return e.contextMenuMounted},Me=function(e){return e.contextMenuConfig},Ne=function(e){var t,n=Me(e);return n&&n.triggerFileId&&null!=(t=oe(e)[n.triggerFileId])?t:null},Ae=function(e){return e.fileActionMap},Oe=function(e){return e.optionMap},ze=function(e){return e.fileMap},Te=function(e){return e.fileIds},Le=function(e){return e.cleanFileIds},Re=function(e){return e.sortActionId},_e=function(e){return e.sortOrder},je=function(e){return e.searchString},He=function(e){return e.lastClick},Pe=function(e){return u.createSelector([Ae,e],(function(e,t){return t&&e[t]?e[t]:null}))},Be=function(e,t){return void 0===t&&(t=void 0),u.createSelector([Oe],(function(n){var r=n[e];return void 0===r?t:r}))},Ke=function(e){return u.createSelector([ze,e],(function(e,t){return t.map((function(t){return t&&e[t]?e[t]:null}))}))},Ve=u.createSelector([Te,_e,Ke(Te),Pe(Re),Be(W.ShowFoldersFirst,!1)],(function(e,t,n,r,o){if(!r)return e;var i,a=function(e){return function(t){return e(t)}},l=[];return o&&l.push({desc:a(V.isDirectory)}),r.sortKeySelector&&l.push(((i={})[t===j.ASC?"asc":"desc"]=a(r.sortKeySelector),i)),0===l.length?e:f([].concat(n)).by(l).map((function(e){return e?e.id:null}))})),qe=u.createSelector([Ke(Le)],(function(e){return new p(e,["name"],{caseSensitive:!1})})),We=u.createSelector([Le,je,qe],(function(e,t,n){return t?n.search(t).map((function(e){return e.id})):e})),Ge=u.createSelector([We,Ke(Le),Be(W.ShowHiddenFiles)],(function(e,t,n){var r=new Set(e),o={};return t.forEach((function(e){e&&(r.has(e.id)?!n&&V.isHidden(e)&&(o[e.id]=!0):o[e.id]=!0)})),o})),Ue={getFileActionMap:Ae,getOptionMap:Oe,getFileMap:ze,getFileIds:Te,getCleanFileIds:Le,getSortActionId:Re,getSortOrder:_e,getSearchString:je,_getLastClick:He,getSortedFileIds:Ve,getSearcher:qe,getSearchFilteredFileIds:We,getHiddenFileIdMap:Ge,getDisplayFileIds:u.createSelector([Ve,Ge],(function(e,t){return e.filter((function(e){return!e||!t[e]}))})),getLastClickIndex:u.createSelector([He,Ve],(function(e,t){return!e||e.index>t.length-1||e.fileId!=t[e.index]?null:e.index})),makeGetAction:Pe,makeGetOptionValue:Be,makeGetFiles:Ke},Ye=function(e,t){return t?oe(e)[t]:null},Xe=function(e,t){return!!ue(e)[t.id]},Ze=function(e){for(var t=e.fileMap,n=e.selectionMap,r=Object.keys(n).map((function(e){return t[e]})),o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var l=i.reduce((function(e,t){return t?e.filter(t):e}),r);return l},Qe=function(e,t){return he(t)(e)},$e=function(e,t){return function(n){var r,o=q("fileActions",e),i=o.sanitizedArray,a=o.errorMessages;if(Array.isArray(t)){var l=new Set(t);r=mt.filter((function(e){return!l.has(e.id)}))}else r=t?[]:mt;var c=function(){for(var e,t=new Set,n=function(e){return!!t.add(e.id)},r=function(e){return!t.has(e.id)},o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var l=i.map((function(e){var t=e.filter(r);return t.map(n),t}));return(e=new Array).concat.apply(e,l)}(i,pt,r),s={};c.map((function(e){return e.option?s[e.option.id]=e.option.defaultValue:null})),n(bt.setRawFileActions(e)),n(bt.setFileActionsErrorMessages(a)),n(bt.setFileActions(c)),n(bt.setOptionDefaults(s)),n(Je(c))}},Je=function(e){return function(t){for(var n,r=new Set([ft.OpenParentFolder.id]),o=[],i={},a=[],l={},c=function(e,t,n){if(t[n])return t[n];var r={name:n,fileActionIds:[]};return e.push(r),t[n]=r,r},s=_(e);!(n=s()).done;){var d=n.value,u=d.button;u&&(u.toolbar&&!r.has(d.id)&&(u.group?c(o,i,u.group).fileActionIds.push(d.id):o.push(d.id)),u.contextMenu&&(u.group?c(a,l,u.group).fileActionIds.push(d.id):a.push(d.id)))}t(bt.updateFileActionMenuItems([o,a]))}},et=function(e){return function(t,n){var r=n(),o=e?r.fileActionMap[e]:null;o&&o.fileViewConfig&&t(bt.setFileViewConfig(o.fileViewConfig))}},tt=function(e){return function(t,n){if(e){var r=n(),o=r.fileActionMap[e];if(o&&o.sortKeySelector){var i=r.sortOrder===j.ASC?j.DESC:j.ASC;r.sortActionId!==e&&(i=j.ASC),t(bt.setSort({actionId:e,order:i}))}}}},nt=function(e){return function(t,n){K.debug("FILE ACTION DISPATCH: ["+e.id+"]","data:",e);var r=n(),o=Z(r)[e.id],i=X(r);o?i&&Promise.resolve(i(e)).catch((function(e){return K.error("User-defined file action handler threw an error: "+e.message)})):K.warn('Internal components dispatched the "'+e.id+'" file action, but such action was not registered.')}},rt=function(e,t){return function(n,r){K.debug("FILE ACTION REQUEST: ["+e.id+"]","action:",e,"payload:",t);var o=r(),i=Y(o);Z(o)[e.id]||K.warn('The action "'+e.id+'" was requested, but it is not registered. The action will still be dispatched, but this might indicate a bug in the code. Please register your actions by passing them to "fileActions" prop.');var a=ge(o),l=e.fileFilter?a.filter(e.fileFilter):a;if(!e.requiresSelection||0!==l.length){var c={instanceId:i,selectedFiles:a,selectedFilesForAction:l,contextMenuTriggerFile:Ne(o)};e.sortKeySelector&&n(tt(e.id));var s=e.fileViewConfig;s&&n(bt.setFileViewConfig(s));var d=e.option;d&&n(bt.toggleOption(d.id)),e.selectionTransform&&n(function(e){return function(t,n){var r=e.selectionTransform;if(r){var o=n(),i=new Set(Object.keys(ue(o))),a=new Set(Object.keys(le(o))),l=r({prevSelection:i,fileIds:ie(o),fileMap:oe(o),hiddenFileIds:a});l&&t(0===l.size?bt.clearSelection():bt.selectFiles({fileIds:Array.from(l),reset:!0}))}}}(e));var u=e.effect,f=void 0;if(u)try{f=u({action:e,payload:t,state:c,reduxDispatch:n,getReduxState:r})}catch(t){K.error("User-defined effect function for action "+e.id+" threw an error: "+t.message)}return Promise.resolve(f).then((function(r){ot(n,{id:e.id,action:e,payload:t,state:c},r)})).catch((function(r){K.error("User-defined effect function for action "+e.id+" returned a promise that was rejected: "+r.message),ot(n,{id:e.id,action:e,payload:t,state:c},void 0)}))}K.warn('Internal components requested the "'+e.id+'" file action, but the selection for this action was empty. This might a bug in the code of the presentational components.')}},ot=function(e,t,n){!0===n||e(nt(t))};(G=exports.FileViewMode||(exports.FileViewMode={})).List="list",G.Compact="compact",G.Grid="grid",(U=exports.ChonkyIconName||(exports.ChonkyIconName={})).loading="loading",U.dropdown="dropdown",U.placeholder="placeholder",U.dndDragging="dndDragging",U.dndCanDrop="dndCanDrop",U.dndCannotDrop="dndCannotDrop",U.openFiles="openFiles",U.openParentFolder="openParentFolder",U.copy="copy",U.paste="paste",U.share="share",U.search="search",U.selectAllFiles="selectAllFiles",U.clearSelection="clearSelection",U.sortAsc="sortAsc",U.sortDesc="sortDesc",U.toggleOn="toggleOn",U.toggleOff="toggleOff",U.list="list",U.compact="compact",U.smallThumbnail="smallThumbnail",U.largeThumbnail="largeThumbnail",U.folder="folder",U.folderCreate="folderCreate",U.folderOpen="folderOpen",U.folderChainSeparator="folderChainSeparator",U.download="download",U.upload="upload",U.trash="trash",U.fallbackIcon="fallbackIcon",U.symlink="symlink",U.hidden="hidden",U.file="file",U.license="license",U.code="code",U.config="config",U.model="model",U.database="database",U.text="text",U.archive="archive",U.image="image",U.video="video",U.info="info",U.key="key",U.lock="lock",U.music="music",U.terminal="terminal",U.users="users",U.linux="linux",U.ubuntu="ubuntu",U.windows="windows",U.rust="rust",U.python="python",U.nodejs="nodejs",U.php="php",U.git="git",U.adobe="adobe",U.pdf="pdf",U.excel="excel",U.word="word",U.flash="flash";var it,at=function(e,t){if(void 0!==e.__payloadType&&(e.hotkeys||e.button)){var n='Invalid definition was provided for file action "'+e.id+'". Actions that specify hotkeys or buttons cannot define a payload type. If your application requires this functionality, define two actions and chain them using effects.';throw K.error(n),new Error(n)}return e.effect=t,e},lt=function e(t,n){return t?n(t)?t:t.parentElement?e(t.parentElement,n):null:t},ct=function(e,t,n){return n?typeof e===n?e:t:void 0!==e?e:t},st={MouseClickFile:at({id:"mouse_click_file",__payloadType:{}},(function(e){var t,n=e.payload,r=e.reduxDispatch,o=e.getReduxState;if("double"===n.clickType)V.isOpenable(n.file)&&r(rt(ft.OpenFiles,{targetFile:n.file,files:[n.file]}));else{var i=ye(o());if(V.isSelectable(n.file)&&!i)if(n.ctrlKey)r(bt.toggleSelection({fileId:n.file.id,exclusive:!1})),r(bt.setLastClickIndex({index:n.fileDisplayIndex,fileId:n.file.id}));else if(n.shiftKey){var a=Ue.getLastClickIndex(o());if("number"==typeof a){var l=a,c=n.fileDisplayIndex;if(l>c){var s=[c,l];l=s[0],c=s[1]}r((t={rangeStart:l,rangeEnd:c},function(e,n){var r=n();if(!r.disableSelection){var o=Ue.getDisplayFileIds(r).slice(t.rangeStart,t.rangeEnd+1).filter((function(e){return e&&V.isSelectable(r.fileMap[e])}));e(bt.selectFiles({fileIds:o,reset:!!t.reset}))}}))}else r(bt.toggleSelection({fileId:n.file.id,exclusive:!1})),r(bt.setLastClickIndex({index:n.fileDisplayIndex,fileId:n.file.id}))}else r(bt.toggleSelection({fileId:n.file.id,exclusive:!0})),r(bt.setLastClickIndex({index:n.fileDisplayIndex,fileId:n.file.id}));else n.ctrlKey||i||r(bt.clearSelection()),r(bt.setLastClickIndex({index:n.fileDisplayIndex,fileId:n.file.id}))}})),KeyboardClickFile:at({id:"keyboard_click_file",__payloadType:{}},(function(e){var t=e.payload,n=e.reduxDispatch,r=e.getReduxState;n(bt.setLastClickIndex({index:t.fileDisplayIndex,fileId:t.file.id})),t.enterKey?0===pe(r())&&n(rt(ft.OpenFiles,{targetFile:t.file,files:[t.file]})):t.spaceKey&&V.isSelectable(t.file)&&n(bt.toggleSelection({fileId:t.file.id,exclusive:t.ctrlKey}))})),StartDragNDrop:at({id:"start_drag_n_drop",__payloadType:{}},(function(e){var t=e.reduxDispatch,n=e.payload.draggedFile;Xe((0,e.getReduxState)(),n)||V.isSelectable(n)&&t(bt.selectFiles({fileIds:[n.id],reset:!0}))})),EndDragNDrop:at({id:"end_drag_n_drop",__payloadType:{}},(function(e){var t=e.payload,n=e.reduxDispatch;if(!Xe((0,e.getReduxState)(),t.destination)){var r=t.selectedFiles;n(rt(ft.MoveFiles,L({},t,{files:r.length>0?r:[t.draggedFile]})))}})),MoveFiles:at({id:"move_files",__payloadType:{}}),ChangeSelection:at({id:"change_selection",__payloadType:{}}),OpenFiles:at({id:"open_files",__payloadType:{}}),OpenParentFolder:at({id:"open_parent_folder",hotkeys:["backspace"],button:{name:"Go up a directory",toolbar:!0,contextMenu:!1,icon:exports.ChonkyIconName.openParentFolder,iconOnly:!0}},(function(e){var t=e.reduxDispatch,n=re((0,e.getReduxState)());V.isOpenable(n)?t(rt(ft.OpenFiles,{targetFile:n,files:[n]})):K.warn("Open parent folder effect was triggered  even though the parent folder is not openable. This indicates a bug in presentation components.")})),OpenFileContextMenu:at({id:"open_file_context_menu",__payloadType:{}},(function(e){var t=e.payload,n=e.reduxDispatch,r=e.getReduxState,o=Ye(r(),t.triggerFileId);o&&(Xe(r(),o)||(V.isSelectable(o)?n(bt.selectFiles({fileIds:[t.triggerFileId],reset:!0})):n(bt.clearSelection()))),n(bt.showContextMenu({triggerFileId:t.triggerFileId,mouseX:t.clientX-2,mouseY:t.clientY-4}))}))},dt={OpenSelection:at({id:"open_selection",hotkeys:["enter"],requiresSelection:!0,fileFilter:V.isOpenable,button:{name:"Open selection",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.openFiles}},(function(e){(0,e.reduxDispatch)(rt(st.OpenFiles,{files:e.state.selectedFilesForAction}))})),SelectAllFiles:at({id:"select_all_files",hotkeys:["ctrl+a"],button:{name:"Select all files",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.selectAllFiles},selectionTransform:function(e){var t=e.fileIds,n=e.hiddenFileIds,r=new Set;return t.map((function(e){n.has(e)||r.add(e)})),r}}),ClearSelection:at({id:"clear_selection",hotkeys:["escape"],button:{name:"Clear selection",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.clearSelection},selectionTransform:function(e){return 0===e.prevSelection.size?null:new Set}}),EnableListView:at({id:"enable_list_view",fileViewConfig:{mode:exports.FileViewMode.List,entryHeight:30},button:{name:"Switch to List view",toolbar:!0,icon:exports.ChonkyIconName.list,iconOnly:!0}}),EnableCompactView:at({id:"enable_compact_view",fileViewConfig:{mode:exports.FileViewMode.Compact,entryHeight:40,entryWidth:220},button:{name:"Switch to Compact view",toolbar:!0,icon:exports.ChonkyIconName.compact,iconOnly:!0}}),EnableGridView:at({id:"enable_grid_view",fileViewConfig:{mode:exports.FileViewMode.Grid,entryWidth:165,entryHeight:130},button:{name:"Switch to Grid view",toolbar:!0,icon:exports.ChonkyIconName.smallThumbnail,iconOnly:!0}}),SortFilesByName:at({id:"sort_files_by_name",sortKeySelector:function(e){return e?e.name.toLowerCase():void 0},button:{name:"Sort by name",toolbar:!0,group:"Options"}}),SortFilesBySize:at({id:"sort_files_by_size",sortKeySelector:function(e){return e?e.size:void 0},button:{name:"Sort by size",toolbar:!0,group:"Options"}}),SortFilesByDate:at({id:"sort_files_by_date",sortKeySelector:function(e){return e?e.modDate:void 0},button:{name:"Sort by date",toolbar:!0,group:"Options"}}),ToggleHiddenFiles:at({id:"toggle_hidden_files",hotkeys:["ctrl+h"],option:{id:W.ShowHiddenFiles,defaultValue:!0},button:{name:"Show hidden files",toolbar:!0,group:"Options"}}),ToggleShowFoldersFirst:at({id:"toggle_show_folders_first",option:{id:W.ShowFoldersFirst,defaultValue:!0},button:{name:"Show folders first",toolbar:!0,group:"Options"}}),FocusSearchInput:at({id:"focus_search_input",hotkeys:["ctrl+f"]},(function(e){var t=se((0,e.getReduxState)());t&&t()})),ToggleDarkMode:at({id:"enable_dark_mode",option:{id:W.DarkMode,defaultValue:!1},button:{name:"Enable dark mode",toolbar:!0,icon:exports.ChonkyIconName.list,iconOnly:!0}})},ut={CopyFiles:at({id:"copy_files",requiresSelection:!0,hotkeys:["ctrl+c"],button:{name:"Copy selection",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.copy}}),CreateFolder:at({id:"create_folder",button:{name:"Create folder",toolbar:!0,tooltip:"Create a folder",icon:exports.ChonkyIconName.folderCreate}}),UploadFiles:at({id:"upload_files",button:{name:"Upload files",toolbar:!0,tooltip:"Upload files",icon:exports.ChonkyIconName.upload}}),DownloadFiles:at({id:"download_files",requiresSelection:!0,button:{name:"Download files",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.download}}),DeleteFiles:at({id:"delete_files",requiresSelection:!0,hotkeys:["delete"],button:{name:"Delete files",toolbar:!0,contextMenu:!0,group:"Actions",icon:exports.ChonkyIconName.trash}})},ft=L({},st,dt,ut),pt=[ft.MouseClickFile,ft.KeyboardClickFile,ft.StartDragNDrop,ft.EndDragNDrop,ft.MoveFiles,ft.ChangeSelection,ft.OpenFiles,ft.OpenParentFolder,ft.OpenFileContextMenu],mt=[ft.OpenSelection,ft.SelectAllFiles,ft.ClearSelection,ft.EnableListView,ft.EnableGridView,ft.SortFilesByName,ft.SortFilesBySize,ft.SortFilesByDate,ft.ToggleHiddenFiles,ft.ToggleShowFoldersFirst,ft.FocusSearchInput],gt={instanceId:"CHONKY_INVALID_ID",externalFileActionHandler:null,rawFileActions:[],fileActionsErrorMessages:[],fileActionMap:{},fileActionIds:[],toolbarItems:[],contextMenuItems:[],rawFolderChain:null,folderChainErrorMessages:[],folderChain:[],rawFiles:[],filesErrorMessages:[],fileMap:{},fileIds:[],cleanFileIds:[],sortedFileIds:[],hiddenFileIdMap:{},focusSearchInput:null,searchString:"",searchMode:"currentFolder",selectionMap:{},disableSelection:!1,fileViewConfig:ft.EnableGridView.fileViewConfig,sortActionId:null,sortOrder:j.ASC,optionMap:{},thumbnailGenerator:null,doubleClickDelay:300,disableDragAndDrop:!1,clearSelectionOnOutsideClick:!0,lastClick:null,contextMenuMounted:!1,contextMenuConfig:null},ht=u.createSlice({name:"root",initialState:gt,reducers:{setExternalFileActionHandler:function(e,t){var n;e.externalFileActionHandler=null!=(n=t.payload)?n:null},setRawFileActions:function(e,t){e.rawFileActions=t.payload},setFileActionsErrorMessages:function(e,t){e.fileActionsErrorMessages=t.payload},setFileActions:function(e,t){var n={};t.payload.map((function(e){return n[e.id]=e}));var r=t.payload.map((function(e){return e.id}));e.fileActionMap=n,e.fileActionIds=r},updateFileActionMenuItems:function(e,t){var n=t.payload;e.toolbarItems=n[0],e.contextMenuItems=n[1]},setRawFolderChain:function(e,t){var n=t.payload,r=q("folderChain",n),o=r.sanitizedArray,i=r.errorMessages;e.rawFolderChain=n,e.folderChain=o,e.folderChainErrorMessages=i},setRawFiles:function(e,t){var n=t.payload,r=q("files",n),o=r.sanitizedArray,i=r.errorMessages;e.rawFiles=n,e.filesErrorMessages=i;var a={};o.forEach((function(e){e&&(a[e.id]=e)}));var l=o.map((function(e){return e?e.id:null})),c=l.filter((function(e){return!!e}));e.fileMap=a,e.fileIds=l,e.cleanFileIds=c;for(var s=0,d=Object.keys(e.selectionMap);s<d.length;s++){var u=d[s];a[u]||delete e.selectionMap[u]}},setSortedFileIds:function(e,t){e.sortedFileIds=t.payload},setHiddenFileIds:function(e,t){e.hiddenFileIdMap=t.payload;for(var n=0,r=Object.keys(e.selectionMap);n<r.length;n++){var o=r[n];e.hiddenFileIdMap[o]&&delete e.selectionMap[o]}},setFocusSearchInput:function(e,t){e.focusSearchInput=t.payload},setSearchString:function(e,t){e.searchString=t.payload},selectAllFiles:function(e){e.fileIds.filter((function(t){return t&&V.isSelectable(e.fileMap[t])})).map((function(t){return t?e.selectionMap[t]=!0:null}))},selectFiles:function(e,t){e.disableSelection||(t.payload.reset&&(e.selectionMap={}),t.payload.fileIds.filter((function(t){return t&&V.isSelectable(e.fileMap[t])})).map((function(t){return e.selectionMap[t]=!0})))},toggleSelection:function(e,t){if(!e.disableSelection){var n=!!e.selectionMap[t.payload.fileId];t.payload.exclusive&&(e.selectionMap={}),n?delete e.selectionMap[t.payload.fileId]:V.isSelectable(e.fileMap[t.payload.fileId])&&(e.selectionMap[t.payload.fileId]=!0)}},clearSelection:function(e){e.disableSelection||0!==Object.keys(e.selectionMap).length&&(e.selectionMap={})},setSelectionDisabled:function(e,t){e.disableSelection=t.payload,0!==Object.keys(e.selectionMap).length&&(e.selectionMap={})},setFileViewConfig:function(e,t){e.fileViewConfig=t.payload},setSort:function(e,t){e.sortActionId=t.payload.actionId,e.sortOrder=t.payload.order},setOptionDefaults:function(e,t){for(var n=0,r=Object.keys(t.payload);n<r.length;n++){var o=r[n];o in e.optionMap||(e.optionMap[o]=t.payload[o])}},toggleOption:function(e,t){e.optionMap[t.payload]=!e.optionMap[t.payload]},setThumbnailGenerator:function(e,t){e.thumbnailGenerator=t.payload},setDoubleClickDelay:function(e,t){e.doubleClickDelay=t.payload},setDisableDragAndDrop:function(e,t){e.disableDragAndDrop=t.payload},setClearSelectionOnOutsideClick:function(e,t){e.clearSelectionOnOutsideClick=t.payload},setLastClickIndex:function(e,t){e.lastClick=t.payload},setContextMenuMounted:function(e,t){e.contextMenuMounted=t.payload},showContextMenu:function(e,t){e.contextMenuConfig=t.payload},hideContextMenu:function(e){e.contextMenuConfig&&(e.contextMenuConfig=null)}}}),bt=ht.actions,yt=ht.reducer,vt=function(e){var t=P((function(){var t=L({},gt,{instanceId:e});return u.configureStore({preloadedState:t,reducer:yt,middleware:function(e){return e({serializableCheck:!1})},devTools:{name:"chonky_"+e}})}));return function(e){r.useEffect((function(){var t=m((function(){return ue(e.getState())})),n=[e.subscribe(t((function(t,n){if(t!==n){var r=fe(e.getState()),o=new Set(r);e.dispatch(rt(ft.ChangeSelection,{selection:o}))}})))];return function(){for(var e,t=_(n);!(e=t()).done;)(0,e.value)()}}),[e])}(t),t},xt=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=r.useCallback((function(t){return e.apply(void 0,n)(t)}),[e].concat(n));return s.useSelector(i)},Ct=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=s.useDispatch();r.useEffect((function(){i(e.apply(void 0,n))}),[i,e].concat(n))},St=function(e,t){var n=s.useDispatch();r.useEffect((function(){n(e(t))}),[n,e,t])},Ft=function(){return o.createElement("span",{title:"No icon component found. Please follow Chonky installation instructions to provide a pre-made icon component (or a custom icon)."},"")},It={fileActions:null,onFileAction:null,thumbnailGenerator:null,doubleClickDelay:300,disableSelection:!1,disableDefaultFileActions:!1,disableDragAndDrop:!1,disableDragAndDropProvider:!1,defaultSortActionId:ft.SortFilesByName.id,defaultFileViewActionId:ft.EnableGridView.id,clearSelectionOnOutsideClick:!0,iconComponent:Ft,darkMode:!1,i18n:{}};(it=exports.I18nNamespace||(exports.I18nNamespace={})).Toolbar="toolbar",it.FileList="fileList",it.FileEntry="fileEntry",it.FileContextMenu="contextMenu",it.FileActions="actions",it.FileActionGroups="actionGroups";var kt=function(e,t){return"chonky."+e+"."+t},wt=function(e,t){return"chonky."+exports.I18nNamespace.FileActions+"."+e+"."+t},Et=function(e){var t=l.useIntl();return r.useMemo((function(){var n,r;if(!e)return{buttonName:"",buttonTooltip:void 0};var o,i=t.formatMessage({id:wt(e.id,"button.name"),defaultMessage:null==(n=e.button)?void 0:n.name}),a=void 0;return null!=(r=e.button)&&r.tooltip&&(a=t.formatMessage({id:wt(e.id,"button.tooltip"),defaultMessage:null==(o=e.button)?void 0:o.tooltip})),{buttonName:i,buttonTooltip:a}}),[e,t])},Dt=function(e){var t=l.useIntl(),n=r.useContext(Nt);return r.useMemo((function(){return{fileModDateString:n.formatFileModDate(t,e),fileSizeString:n.formatFileSize(t,e)}}),[e,n,t])},Mt={formatFileModDate:function(e,t){var n=V.getModDate(t);return n?e.formatDate(n,{dateStyle:"medium",timeStyle:"short"}):null},formatFileSize:function(e,t){if(!t||"number"!=typeof t.size)return null;var n=g(t.size,{bits:!1,output:"object"});return"B"===n.symbol?Math.round(n.value/10)/100+" KB":"KB"===n.symbol?Math.round(n.value)+" "+n.symbol:n.value+" "+n.symbol}},Nt=r.createContext(Mt),At=r.createContext(Ft),Ot=["3g2","3gp","3gpp","asf","asx","avi","dvb","f4v","fli","flv","fvt","h261","h263","h264","jpgm","jpgv","jpm","m1v","m2v","m4u","m4v","mj2","mjp2","mk3d","mks","mkv","mng","mov","movie","mp4","mp4v","mpe","mpeg","mpg","mpg4","mxu","ogv","pyv","qt","smv","ts","uvh","uvm","uvp","uvs","uvu","uvv","uvvh","uvvm","uvvp","uvvs","uvvu","uvvv","viv","vob","webm","wm","wmv","wmx","wvx"],zt=["3ds","apng","azv","bmp","bmp","btif","cgm","cmx","djv","djvu","drle","dwg","dxf","emf","exr","fbs","fh","fh4","fh5","fh7","fhc","fits","fpx","fst","g3","gif","heic","heics","heif","heifs","ico","ico","ief","jls","jng","jp2","jpe","jpeg","jpf","jpg","jpg2","jpm","jpx","jxr","ktx","mdi","mmr","npx","pbm","pct","pcx","pcx","pgm","pic","png","pnm","ppm","psd","pti","ras","rgb","rlc","sgi","sid","sub","svg","svgz","t38","tap","tfx","tga","tif","tiff","uvg","uvi","uvvg","uvvi","vtf","wbmp","wdp","webp","wmf","xbm","xif","xpm","xwd"],Tt=["3gpp","aac","adp","aif","aifc","aiff","au","caf","dra","dts","dtshd","ecelp4800","ecelp7470","ecelp9600","eol","flac","kar","lvp","m2a","m3a","m3u","m4a","m4a","mid","midi","mka","mp2","mp2a","mp3","mp3","mp4a","mpga","oga","ogg","pya","ra","ra","ram","rip","rmi","rmp","s3m","sil","snd","spx","uva","uvva","wav","wav","wav","wax","weba","wma","xm"],Lt=["#bbbbbb","#d65c5c","#d6665c","#d6705c","#d67a5c","#d6855c","#d68f5c","#d6995c","#d6a35c","#d6ad5c","#d6b85c","#d6c25c","#d6cc5c","#d6d65c","#ccd65c","#c2d65c","#b8d65c","#add65c","#a3d65c","#99d65c","#8fd65c","#85d65c","#7ad65c","#70d65c","#66d65c","#5cd65c","#5cd666","#5cd670","#5cd67a","#5cd685","#5cd68f","#5cd699","#5cd6a3","#5cd6ad","#5cd6b8","#5cd6c2","#5cd6cc","#5cd6d6","#5cccd6","#5cc2d6","#5cb8d6","#5cadd6","#5ca3d6","#5c99d6","#5c8fd6","#5c85d6","#5c7ad6","#5c70d6","#5c66d6","#5c5cd6","#665cd6","#705cd6","#7a5cd6","#855cd6","#8f5cd6","#995cd6","#a35cd6","#ad5cd6","#b85cd6","#c25cd6","#cc5cd6","#d65cd6","#d65ccc","#d65cc2","#d65cb8","#d65cad","#d65ca3","#d65c99","#d65c8f","#d65c85","#d65c7a","#d65c70","#d65c66"],Rt=["#777","#8f3d3d","#8f443d","#8f4b3d","#8f523d","#8f583d","#8f5f3d","#8f663d","#8f6d3d","#8f743d","#8f7a3d","#8f813d","#8f883d","#8f8f3d","#888f3d","#818f3d","#7a8f3d","#748f3d","#6d8f3d","#668f3d","#5f8f3d","#588f3d","#528f3d","#4b8f3d","#448f3d","#3d8f3d","#3d8f44","#3d8f4b","#3d8f52","#3d8f58","#3d8f5f","#3d8f66","#3d8f6d","#3d8f74","#3d8f7a","#3d8f81","#3d8f88","#3d8f8f","#3d888f","#3d818f","#3d7a8f","#3d748f","#3d6d8f","#3d668f","#3d5f8f","#3d588f","#3d528f","#3d4b8f","#3d448f","#3d3d8f","#443d8f","#4b3d8f","#523d8f","#583d8f","#5f3d8f","#663d8f","#6d3d8f","#743d8f","#7a3d8f","#813d8f","#883d8f","#8f3d8f","#8f3d88","#8f3d81","#8f3d7a","#8f3d74","#8f3d6d","#8f3d66","#8f3d5f","#8f3d58","#8f3d52","#8f3d4b","#8f3d44"],_t=function(){for(var e=0,t=[[exports.ChonkyIconName.license,["license"]],[exports.ChonkyIconName.config,["sfk","ini","yml","toml","iml"]],[exports.ChonkyIconName.model,["3ds","obj","ply","fbx"]],[exports.ChonkyIconName.database,["csv","json","sql","sqlite","sqlite3","npy","npz","rec","idx","hdf5"]],[exports.ChonkyIconName.text,["txt","md","mdx"]],[exports.ChonkyIconName.archive,["zip","rar","tar","tar.gz","7z"]],[exports.ChonkyIconName.image,zt],[exports.ChonkyIconName.video,Ot],[exports.ChonkyIconName.code,["html","php","css","sass","scss","less","cpp","h","hpp","c","xml"]],[exports.ChonkyIconName.info,["bib","readme","nfo"]],[exports.ChonkyIconName.key,["pem","pub"]],[exports.ChonkyIconName.lock,["lock","lock.json","shrinkwrap.json"]],[exports.ChonkyIconName.music,Tt],[exports.ChonkyIconName.terminal,["run","sh"]],[exports.ChonkyIconName.trash,[".Trashes"]],[exports.ChonkyIconName.users,["authors","contributors"]],[exports.ChonkyIconName.linux,["AppImage"]],[exports.ChonkyIconName.ubuntu,["deb"]],[exports.ChonkyIconName.windows,["exe"]],[exports.ChonkyIconName.rust,["rs","rlib"]],[exports.ChonkyIconName.python,["py","ipynb"]],[exports.ChonkyIconName.nodejs,["js","jsx","ts","tsx","d.ts"]],[exports.ChonkyIconName.php,["php"]],[exports.ChonkyIconName.git,[".gitignore"]],[exports.ChonkyIconName.adobe,["psd"]],[exports.ChonkyIconName.pdf,["pdf"]],[exports.ChonkyIconName.excel,["xls","xlsx"]],[exports.ChonkyIconName.word,["doc","docx","odt"]],[exports.ChonkyIconName.flash,["swf"]]],n=new h({ignoreCase:!0}),r=0,o=t;r<o.length;r++)for(var i=o[r],a=i[0],l=i[1],c=0;c<l.length;++c)n.put(l[c],{icon:a,colorCode:(e+=5)%(Lt.length-1)+1},!0);return n}(),jt={colors:{debugRed:"#fabdbd",debugBlue:"#bdd8fa",debugGreen:"#d2fabd",debugPurple:"#d2bdfa",debugYellow:"#fae9bd",textActive:"#09f"},fontSizes:{rootPrimary:15},margins:{rootLayoutMargin:8},toolbar:{size:30,lineHeight:"30px",fontSize:15,buttonRadius:4},dnd:{canDropColor:"green",cannotDropColor:"red",canDropMask:"rgba(180, 235, 180, 0.75)",cannotDropMask:"rgba(235, 180, 180, 0.75)",fileListCanDropMaskOne:"rgba(180, 235, 180, 0.1)",fileListCanDropMaskTwo:"rgba(180, 235, 180, 0.2)",fileListCannotDropMaskOne:"rgba(235, 180, 180, 0.1)",fileListCannotDropMaskTwo:"rgba(235, 180, 180, 0.2)"},dragLayer:{border:"solid 2px #09f",padding:"7px 10px",borderRadius:2},fileList:{desktopGridGutter:8,mobileGridGutter:5},gridFileEntry:{childrenCountSize:"1.6em",iconColorFocused:"#000",iconSize:"2.4em",iconColor:"#fff",borderRadius:5,fontSize:14,fileColorTint:"rgba(255, 255, 255, 0.4)",folderBackColorTint:"rgba(255, 255, 255, 0.1)",folderFrontColorTint:"rgba(255, 255, 255, 0.4)"},listFileEntry:{propertyFontSize:14,iconFontSize:"1.1em",iconBorderRadius:5,fontSize:14}},Ht={gridFileEntry:{fileColorTint:"rgba(50, 50, 50, 0.4)",folderBackColorTint:"rgba(50, 50, 50, 0.4)",folderFrontColorTint:"rgba(50, 50, 50, 0.15)"}},Pt={fontSizes:{rootPrimary:13},margins:{rootLayoutMargin:4},toolbar:{size:28,lineHeight:"28px",fontSize:13},gridFileEntry:{fontSize:13},listFileEntry:{propertyFontSize:12,iconFontSize:"1em",fontSize:13}},Bt=function(){return b("(max-width:480px)")},Kt=function(e,t){return"repeating-linear-gradient(45deg,"+e+","+e+" 10px,"+t+" 0,"+t+" 20px)"},Vt=function(e){return c.createUseStyles(e)},qt=function(e){var t={},n=c.createUseStyles((function(n){var r=e(n),o={};return Object.keys(r).map((function(e){var n="chonky-"+e;o["@global ."+n]=r[e],t[e]=n})),o}));return function(){var e=n.apply(void 0,arguments),r={};return Object.keys(t).map((function(e){r[e]=t[e]})),L({},r,e)}},Wt=function(e){return[e,"!important"]},Gt=y,Ut=o.memo(o.forwardRef((function(e,t){var n;return St(bt.setRawFiles,null!=(n=e.files)?n:gt.rawFiles),St(bt.setRawFolderChain,e.folderChain),Ct($e,ct(e.fileActions,It.fileActions),ct(e.disableDefaultFileActions,It.disableDefaultFileActions)),Ct(bt.setExternalFileActionHandler,ct(e.onFileAction,It.onFileAction)),Ct(bt.setSelectionDisabled,ct(e.disableSelection,It.disableSelection,"boolean")),Ct(tt,ct(e.defaultSortActionId,It.defaultSortActionId)),Ct(et,ct(e.defaultFileViewActionId,It.defaultFileViewActionId,"string")),Ct(bt.setThumbnailGenerator,ct(e.thumbnailGenerator,It.thumbnailGenerator)),Ct(bt.setDoubleClickDelay,ct(e.doubleClickDelay,It.doubleClickDelay,"number")),Ct(bt.setDisableDragAndDrop,ct(e.disableDragAndDrop,It.disableDragAndDrop,"boolean")),Ct(bt.setClearSelectionOnOutsideClick,ct(e.clearSelectionOnOutsideClick,It.clearSelectionOnOutsideClick,"boolean")),function(e){var t=s.useStore(),n=s.useDispatch();r.useImperativeHandle(e,(function(){return{getFileSelection:function(){var e=ue(t.getState());return new Set(Object.keys(e))},setFileSelection:function(e,t){void 0===t&&(t=!0);var r=Array.from(e);n(bt.selectFiles({fileIds:r,reset:t}))},requestFileAction:function(e,t){return Promise.resolve(n(rt(e,t))).then()}}}),[t,n])}(t),null})));Ut.displayName="ChonkyBusinessLogicInner";var Yt=o.memo(Ut);Yt.displayName="ChonkyBusinessLogic";var Xt=function(){return!!r.useContext(i.DndContext).dragDropManager},Zt={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"},Qt=function(e,t,n){if(!e||!t||!n)return{display:"none"};var r="translate("+(e.x+(n.x-t.x))+"px, "+(e.y+(n.y-t.y))+"px)";return{transform:r,WebkitTransform:r}},$t=function(){var e=Jt(),t=i.useDragLayer((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialCursorOffset:e.getInitialClientOffset(),initialFileOffset:e.getInitialSourceClientOffset(),currentFileOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}})),n=t.item;if(!t.isDragging||"dnd-chonky-file-entry"!==t.itemType||!n.payload)return null;var r=n.payload.selectedFiles.length;return o.createElement("div",{style:Zt},o.createElement("div",{style:Qt(t.initialCursorOffset,t.initialFileOffset,t.currentFileOffset)},o.createElement("div",{className:e.fileDragPreview},o.createElement("b",null,n.payload.draggedFile.name),r>1&&o.createElement(o.Fragment,null," and ",o.createElement("strong",null,r-1," other file",r-1!=1?"s":"")))))},Jt=qt((function(e){return{fileDragPreview:{boxShadow:"2px 2px 5px "+e.palette.divider,backgroundColor:e.palette.background.default,borderRadius:e.dragLayer.borderRadius,fontSize:e.fontSizes.rootPrimary,color:e.palette.text.primary,padding:e.dragLayer.padding,border:e.dragLayer.border,display:"inline-block"}}})),en=o.memo((function(e){var t=e.fileActionId,n=s.useDispatch(),o=xt($,t);return r.useEffect((function(){if(o&&o.hotkeys&&0!==o.hotkeys.length){var e=o.hotkeys.join(","),t=function(e){e.preventDefault(),n(rt(o,void 0))};return C(e,t),function(){return C.unbind(e,t)}}}),[n,o]),null})),tn=function(e){var t=e.children,n=s.useDispatch(),i=s.useSelector(Q),a=s.useSelector(we),l=s.useSelector(Ee),c=r.useCallback((function(e){l&&!lt(e.target,(function(e){return e.tagName&&"button"===e.tagName.toLowerCase()}))&&n(bt.clearSelection())}),[n,l]),d=r.useMemo((function(){return i.map((function(e){return o.createElement(en,{key:"file-action-listener-"+e,fileActionId:e})}))}),[i]),u=Xt(),f=function(){var e=s.useDispatch(),t=B(s.useSelector(De));return r.useCallback((function(n){if(t.current&&!n.altKey){n.preventDefault();var r,o=(r=lt(n.target,(function(e){return e.tagName&&"div"===e.tagName.toLowerCase()&&e.dataset&&e.dataset.chonkyFileId})))?r.dataset.chonkyFileId:null;e(rt(ft.OpenFileContextMenu,{clientX:n.clientX,clientY:n.clientY,triggerFileId:o}))}}),[t,e])}(),p=nn();return o.createElement(x,{onClickAway:c},o.createElement(v,{className:p.chonkyRoot,onContextMenu:f},!a&&u&&o.createElement($t,null),d,t||null))},nn=qt((function(e){return{chonkyRoot:{backgroundColor:e.palette.background.paper,border:"solid 1px "+e.palette.divider,padding:e.margins.rootLayoutMargin,fontSize:e.fontSizes.rootPrimary,color:e.palette.text.primary,touchAction:"manipulation",fontFamily:"sans-serif",flexDirection:"column",boxSizing:"border-box",textAlign:"left",borderRadius:4,display:"flex",height:"100%",webkitTouchCallout:"none",webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none"}}})),rn=o.forwardRef((function(e,u){var f,p=e.instanceId,m=e.iconComponent,g=e.children,h=ct(e.disableDragAndDrop,It.disableDragAndDrop,"boolean"),b=ct(e.disableDragAndDropProvider,It.disableDragAndDropProvider,"boolean"),y=ct(e.darkMode,It.darkMode,"boolean"),v=ct(e.i18n,It.i18n),x=r.useMemo((function(){return L({},Mt,null==v?void 0:v.formatters)}),[v]),C=P((function(){return null!=p?p:d.generate()})),S=vt(C),F=Bt(),I=r.useMemo((function(){var e=t.createMuiTheme({palette:{type:y?"dark":"light"}}),r=n(e,n(jt,y?Ht:{}));return F?n(r,Pt):r}),[y,F]),k=o.createElement(o.Fragment,null,o.createElement(Yt,Object.assign({ref:u},e)),o.createElement(tn,null,g));return o.createElement(l.IntlProvider,Object.assign({locale:"en",defaultLocale:"en"},v),o.createElement(Nt.Provider,{value:x},o.createElement(s.Provider,{store:S},o.createElement(c.ThemeProvider,{theme:I},o.createElement(t.ThemeProvider,{theme:I},o.createElement(At.Provider,{value:null!=(f=null!=m?m:It.iconComponent)?f:Ft},h||b?k:o.createElement(i.DndProvider,{backend:a.HTML5Backend},k)))))))}));rn.displayName="FileBrowser";var on,an=function(e){var t=e.file,n=e.forceDisableDrop,o=e.includeChildrenDrops,a=B(s.useSelector(te)),l=function(){var e=Xt(),t=r.useCallback((function(){return[{},function(){return null}]}),[]),n=e?i.useDrop:t;return n.apply(void 0,arguments)}({accept:"dnd-chonky-file-entry",drop:r.useCallback((function(e,n){if(n.canDrop())return{dropTarget:t}}),[t]),canDrop:r.useCallback((function(e,r){if(n||!V.isDroppable(t)||!r.isOver({shallow:!0})&&!o)return!1;var i=e.payload,l=i.source,c=i.draggedFile,s=i.selectedFiles,d=new Set;d.add(t.id),a.current.map((function(e){e&&d.add(e.id)}));for(var u,f=_([c].concat(s));!(u=f()).done;)if(d.has(u.value.id))return!1;return t.id!==(null==l?void 0:l.id)}),[n,t,o,a]),collect:r.useCallback((function(e){return{isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0}),canDrop:e.canDrop()}}),[])}),c=l[0];return{dndIsOver:c.isOver,dndIsOverCurrent:c.isOverCurrent,dndCanDrop:c.canDrop,drop:l[1]}},ln=function(e,t){var n=s.useDispatch(),o=B(s.useSelector(ne));r.useEffect((function(){var r,i=null;return t.dndIsOver&&V.isDndOpenable(e)&&e.id!==(null==(r=o.current)?void 0:r.id)&&(i=setTimeout((function(){return n(rt(st.OpenFiles,{targetFile:e,files:[e]}))}),1500)),function(){i&&clearTimeout(i)}}),[n,e,t.dndIsOver,o])},cn=o.memo((function(e){var t,n,r=(n=e.maxLength,(t=e.minLength)+Math.floor(Math.random()*Math.floor(n-t))),i="&nbsp;".repeat(r),a=sn();return o.createElement("span",{className:a.textPlaceholder,dangerouslySetInnerHTML:{__html:i}})})),sn=Vt((function(){return{"@keyframes loading-placeholder":{"0%":{opacity:.2},"50%":{opacity:.4},"100%":{opacity:.2}},textPlaceholder:{animationName:"$loading-placeholder",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDuration:"1.5s",backgroundColor:"#ccc",whiteSpace:"nowrap",overflow:"hidden",borderRadius:4,maxWidth:"40%",minWidth:20}}})),dn=function(e){return r.useMemo((function(){return L({role:"listitem"},{"data-test-id":"file-entry","data-chonky-file-id":e?e.id:void 0})}),[e])},un=function(e,t,n){var o=function(e){return r.useMemo((function(){return e?!0===e.isDir?{icon:exports.ChonkyIconName.folder,colorCode:0}:_t.getWithCheckpoints(e.name,".",!0)||{icon:exports.ChonkyIconName.file,colorCode:32}:{icon:exports.ChonkyIconName.loading,colorCode:0}}),[e])}(e),i=pn(e),a=i.thumbnailUrl,l=i.thumbnailLoading;return r.useMemo((function(){var r=a?Rt[o.colorCode]:Lt[o.colorCode],i=l||!e,c=l?exports.ChonkyIconName.loading:o.icon;return{childrenCount:V.getChildrenCount(e),icon:e&&void 0!==e.icon?e.icon:c,iconSpin:i,thumbnailUrl:a,color:e&&void 0!==e.color?e.color:r,selected:t,focused:!!n}}),[e,n,o,t,l,a])},fn=function(e){var t=null;return e.dndIsOver?t=e.dndCanDrop?exports.ChonkyIconName.dndCanDrop:exports.ChonkyIconName.dndCannotDrop:e.dndIsDragging&&(t=exports.ChonkyIconName.dndDragging),t},pn=function(e){var t=s.useSelector(Ie),n=r.useState(null),o=n[0],i=n[1],a=r.useState(!1),l=a[0],c=a[1],d=r.useRef(0);return r.useEffect((function(){var n=!1;return e&&(t?(0===d.current&&c(!0),d.current++,Promise.resolve().then((function(){return t(e)})).then((function(e){n||(c(!1),e&&"string"==typeof e&&i(e))})).catch((function(e){n||c(!1),K.error('User-defined "thumbnailGenerator" handler threw an error: '+e.message)}))):e.thumbnailUrl&&i(e.thumbnailUrl)),function(){n=!0}}),[e,i,c,t]),{thumbnailUrl:o,thumbnailLoading:l}};(on=exports.CustomVisibilityState||(exports.CustomVisibilityState={}))[on.Hidden=0]="Hidden",on[on.Disabled=1]="Disabled",on[on.Default=2]="Default",on[on.Active=3]="Active";var mn=function(e){var t=s.useDispatch(),n=xt($,e);return r.useCallback((function(){return t(rt(n,void 0))}),[t,n])},gn=function(e){var t,n=s.useSelector(re),o=s.useSelector(ve),i=s.useSelector(xe),a=s.useSelector(Ce),l=xt($,e),c=xt(Fe,null==l||null==(t=l.option)?void 0:t.id),d=0===xt(be,e);return r.useMemo((function(){var e,t;if(!l)return{icon:null,active:!1,disabled:!0};var r=null!=(e=null==(t=l.button)?void 0:t.icon)?e:null;l.sortKeySelector?r=i===l.id?a===j.ASC?exports.ChonkyIconName.sortAsc:exports.ChonkyIconName.sortDesc:exports.ChonkyIconName.placeholder:l.option&&(r=c?exports.ChonkyIconName.toggleOn:exports.ChonkyIconName.toggleOff);var s=l.id===i,u=l.fileViewConfig===o,f=!!l.option&&!!c,p=!1,m=!1;void 0!==l.customVisibility&&(p=l.customVisibility()===exports.CustomVisibilityState.Disabled,m=l.customVisibility()===exports.CustomVisibilityState.Active);var g=s||u||f||m,h=!!l.requiresSelection&&d||p;return l.id===ft.OpenParentFolder.id&&(h=h||!V.isOpenable(n)),{icon:r,active:g,disabled:h}}),[n,o,i,a,l,c,d])},hn=o.memo((function(e){var t,n=e.className,i=e.text,a=e.tooltip,l=e.active,c=e.icon,s=e.iconOnly,d=e.onClick,u=e.disabled,f=e.dropdown,p=bn(),m=r.useContext(At),g=c||s?o.createElement("div",{className:s?"":p.iconWithText},o.createElement(m,{icon:c||exports.ChonkyIconName.fallbackIcon,fixedWidth:!0})):null,h=Gt(((t={})[null!=n?n:""]=!0,t[p.baseButton]=!0,t[p.iconOnlyButton]=s,t[p.activeButton]=!!l,t));return o.createElement(F,{className:h,onClick:d,title:a||i,disabled:u||!d},g,i&&!s&&o.createElement("span",null,i),f&&o.createElement("div",{className:p.iconDropdown},o.createElement(m,{icon:c||exports.ChonkyIconName.dropdown,fixedWidth:!0})))})),bn=qt((function(e){return{baseButton:{fontSize:Wt(e.toolbar.fontSize),textTransform:Wt("none"),letterSpacing:Wt(0),minWidth:Wt("auto"),lineHeight:e.toolbar.lineHeight,height:e.toolbar.size,paddingBottom:Wt(0),paddingTop:Wt(0)},iconWithText:{marginRight:8},iconOnlyButton:{width:e.toolbar.size,textAlign:"center"},iconDropdown:{fontSize:"0.7em",marginLeft:2,marginTop:1},activeButton:{color:Wt(e.colors.textActive)}}})),yn=o.memo((function(e){var t=e.fileActionId,n=xt($,t),r=mn(t),i=gn(t),a=i.icon,l=i.active,c=i.disabled,s=Et(n),d=s.buttonName,u=s.buttonTooltip;if(!n)return null;var f=n.button;return f?void 0!==n.customVisibility&&n.customVisibility()===exports.CustomVisibilityState.Hidden?null:o.createElement(hn,{text:d,tooltip:u,icon:a,iconOnly:f.iconOnly,active:l,onClick:r,disabled:c}):null})),vn=o.memo((function(e){var t,n=e.first,i=e.current,a=e.item,l=a.file,c=a.disabled,s=a.onClick,d=an({file:l,forceDisableDrop:!l||i}),u=d.dndIsOver,f=d.dndCanDrop,p=d.drop,m=r.useMemo((function(){return{dndIsOver:u,dndCanDrop:f,dndIsDragging:!1}}),[f,u]);ln(l,m);var g=fn(m),h=r.useContext(At),b=xn(m),y=Gt(((t={})[b.baseBreadcrumb]=!0,t[b.disabledBreadcrumb]=c,t[b.currentBreadcrumb]=i,t)),v=l?l.name:"Loading...",x=n&&void 0===(null==l?void 0:l.folderChainIcon)?exports.ChonkyIconName.folder:null==l?void 0:l.folderChainIcon;return o.createElement("div",{className:b.buttonContainer,ref:l?p:null},l&&g&&o.createElement("div",{className:b.dndIndicator},o.createElement(h,{icon:g,fixedWidth:!0})),o.createElement(hn,{icon:x,className:y,text:v,disabled:c,onClick:s}))})),xn=Vt((function(e){return{buttonContainer:{position:"relative"},baseBreadcrumb:{color:function(t){var n=e.palette.text.primary;return t.dndIsOver&&(n=t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor),Wt(n)}},disabledBreadcrumb:{color:function(){return Wt(e.palette.text.disabled)}},currentBreadcrumb:{textDecoration:Wt("underline")},dndIndicator:{color:function(t){return t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor},backgroundColor:function(t){return t.dndCanDrop?e.dnd.canDropMask:e.dnd.cannotDropMask},lineHeight:"calc("+e.toolbar.lineHeight+" - 6px)",transform:"translateX(-50%) translateY(-50%)",borderRadius:e.toolbar.buttonRadius,height:e.toolbar.size-6,width:e.toolbar.size-6,boxSizing:"border-box",position:"absolute",textAlign:"center",left:"50%",top:"50%",zIndex:5}}})),Cn=o.memo((function(){var e,t,n=Sn(),i=(e=s.useSelector(te),t=s.useDispatch(),r.useMemo((function(){var n=[];if(!e)return n;for(var r=function(r){var o=e[r];n.push({file:o,disabled:!o,onClick:V.isOpenable(o)&&r!==e.length-1?function(){return t(rt(ft.OpenFiles,{targetFile:o,files:[o]}))}:void 0})},o=0;o<e.length;++o)r(o);return n}),[t,e])),a=r.useMemo((function(){for(var e=[],t=0;t<i.length;++t){var n=o.createElement(vn,{key:"folder-chain-"+t,first:0===t,current:t===i.length-1,item:i[t]});e.push(n)}return e}),[i]);return o.createElement(v,{className:n.navbarWrapper},o.createElement(v,{className:n.navbarContainer},o.createElement(yn,{fileActionId:ft.OpenParentFolder.id}),o.createElement(S,{className:n.navbarBreadcrumbs,classes:{separator:n.separator}},a)))})),Sn=qt((function(e){return{navbarWrapper:{paddingBottom:e.margins.rootLayoutMargin},navbarContainer:{display:"flex"},upDirectoryButton:{fontSize:Wt(e.toolbar.fontSize),height:e.toolbar.size,width:e.toolbar.size,padding:"0px !important"},navbarBreadcrumbs:{fontSize:Wt(e.toolbar.fontSize),flexGrow:100},separator:{marginRight:Wt(4),marginLeft:Wt(4)}}})),Fn=o.forwardRef((function(e,t){var n,i=e.text,a=e.active,l=e.icon,c=e.onClick,s=e.disabled,d=In(),u=r.useContext(At),f=Gt(((n={})[d.baseButton]=!0,n[d.activeButton]=a,n));return o.createElement(E,{ref:t,className:f,onClick:c,disabled:s},l&&o.createElement(k,{className:d.icon},o.createElement(u,{icon:l,fixedWidth:!0})),o.createElement(w,{primaryTypographyProps:{className:d.text}},i))})),In=qt((function(e){return{baseButton:{lineHeight:Wt(e.toolbar.lineHeight),height:Wt(e.toolbar.size),minHeight:Wt("auto"),minWidth:Wt("auto"),padding:Wt(20)},icon:{fontSize:Wt(e.toolbar.fontSize),minWidth:Wt("auto"),color:Wt("inherit"),marginRight:8},text:{fontSize:Wt(e.toolbar.fontSize)},activeButton:{color:Wt(e.colors.textActive)}}})),kn=o.forwardRef((function(e,t){var n=e.fileActionId,i=e.onClickFollowUp,a=xt($,n),l=mn(n),c=gn(n),s=c.icon,d=c.active,u=c.disabled,f=Et(a).buttonName,p=r.useCallback((function(){l(),i&&i()}),[i,l]);return a&&a.button?void 0!==a.customVisibility&&a.customVisibility()===exports.CustomVisibilityState.Hidden?null:o.createElement(Fn,{ref:t,text:f,icon:s,onClick:p,active:d,disabled:u}):null})),wn=o.memo((function(e){var t,n,i=e.name,a=e.fileActionIds,c=o.useState(null),s=c[0],d=c[1],u=r.useCallback((function(e){return d(e.currentTarget)}),[d]),f=r.useCallback((function(){return d(null)}),[d]),p=r.useMemo((function(){return a.map((function(e){return o.createElement(kn,{key:"menu-item-"+e,fileActionId:e,onClickFollowUp:f})}))}),[a,f]),m=(t=i,n=l.useIntl(),r.useMemo((function(){return n.formatMessage({id:kt(exports.I18nNamespace.FileActionGroups,t),defaultMessage:t})}),[t,n])),g=En();return o.createElement(o.Fragment,null,o.createElement(hn,{text:m,onClick:u,dropdown:!0}),o.createElement(I,{autoFocus:!0,keepMounted:!0,elevation:2,anchorEl:s,onClose:f,open:Boolean(s),transitionDuration:150,classes:{list:g.dropdownList}},p))})),En=qt((function(){return{dropdownList:{paddingBottom:Wt(0),paddingTop:Wt(0)}}})),Dn=o.memo((function(){var e=Mn(),t=s.useSelector(Ue.getDisplayFileIds),n=s.useSelector(pe),r=s.useSelector(ce),i=l.useIntl(),a=i.formatMessage({id:kt(exports.I18nNamespace.Toolbar,"visibleFileCount"),defaultMessage:"{fileCount, plural,\n                =0 {# items}\n                one {# item}\n                other {# items}\n            }"},{fileCount:t.length}),c=i.formatMessage({id:kt(exports.I18nNamespace.Toolbar,"selectedFileCount"),defaultMessage:"{fileCount, plural,\n                =0 {}\n                other {# selected}\n            }"},{fileCount:n}),d=i.formatMessage({id:kt(exports.I18nNamespace.Toolbar,"hiddenFileCount"),defaultMessage:"{fileCount, plural,\n                =0 {}\n                other {# hidden}\n            }"},{fileCount:r});return o.createElement("div",{className:e.infoContainer},o.createElement(D,{className:e.infoText,variant:"body1"},a,(c||d)&&o.createElement("span",{className:e.extraInfoSpan},"(",o.createElement("span",{className:e.selectionSizeText},c),c&&d&&", ",o.createElement("span",{className:e.hiddenCountText},d),")")))})),Mn=qt((function(e){return{infoContainer:{height:e.toolbar.size,display:"flex"},infoText:{lineHeight:Wt(e.toolbar.lineHeight),fontSize:Wt(e.toolbar.fontSize),marginLeft:Wt(12),height:e.toolbar.size},extraInfoSpan:{marginRight:Wt(8),marginLeft:Wt(8),opacity:.8},selectionSizeText:{color:e.colors.textActive},hiddenCountText:{}}})),Nn=o.memo((function(){var e=l.useIntl().formatMessage({id:kt(exports.I18nNamespace.Toolbar,"searchPlaceholder"),defaultMessage:"Search"}),t=An(),n=r.useContext(At),i=r.useRef(),a=s.useDispatch(),c=s.useSelector(de),d=r.useState(c),u=d[0],f=d[1],p=function(e,t){var n=r.useState(e),o=n[0],i=n[1];return r.useEffect((function(){var t=setTimeout((function(){i(e)}),300);return function(){clearTimeout(t)}}),[e,300]),[o,i]}(u)[0],m=r.useState(!1),g=m[0],h=m[1];r.useEffect((function(){return a(bt.setFocusSearchInput((function(){i.current&&i.current.focus()}))),function(){a(bt.setFocusSearchInput(null))}}),[a]),r.useEffect((function(){h(!1),a(bt.setSearchString(p))}),[p,a]);var b=r.useCallback((function(e){h(!0),f(e.currentTarget.value)}),[]),y=r.useCallback((function(e){"Escape"===e.key&&(f(""),a(bt.setSearchString("")),i.current&&i.current.blur())}),[a]);return o.createElement(N,{className:t.searchFieldContainer,size:"small",variant:"outlined",value:u,placeholder:e,onChange:b,inputRef:i,InputProps:{onKeyUp:y,startAdornment:o.createElement(M,{className:t.searchIcon,position:"start"},o.createElement(n,{icon:g?exports.ChonkyIconName.loading:exports.ChonkyIconName.search,spin:g})),className:t.searchFieldInput},inputProps:{className:t.searchFieldInputInner}})})),An=qt((function(e){return{searchFieldContainer:{height:e.toolbar.size,width:150},searchIcon:{fontSize:"0.9em",opacity:.75},searchFieldInput:{lineHeight:Wt(0),padding:Wt(0),margin:Wt(0),fontSize:Wt(e.toolbar.fontSize),borderRadius:e.toolbar.buttonRadius,height:e.toolbar.size-4,paddingLeft:Wt(8),marginTop:2},searchFieldInputInner:{lineHeight:Wt(e.toolbar.size-4+"px"),fontSize:Wt(e.toolbar.fontSize),height:Wt(e.toolbar.size-4),padding:Wt([0,8,0,0]),margin:Wt(0),"-webkit-appearance":"none"}}})),On=o.memo((function(){var e=zn(),t=s.useSelector(J),n=r.useMemo((function(){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="toolbar-item-"+("string"==typeof r?r:r.name),a="string"==typeof r?o.createElement(yn,{key:i,fileActionId:r}):o.createElement(wn,{key:i,name:r.name,fileActionIds:r.fileActionIds});e.push(a)}return e}),[t]);return o.createElement("div",{className:e.toolbarWrapper},o.createElement("div",{className:e.toolbarContainer},o.createElement("div",{className:e.toolbarLeft},o.createElement(Nn,null),o.createElement(Dn,null)),o.createElement("div",{className:e.toolbarRight},n)))})),zn=qt((function(e){return{toolbarWrapper:{},toolbarContainer:{flexWrap:"wrap-reverse",display:"flex"},toolbarLeft:{paddingBottom:e.margins.rootLayoutMargin,flexWrap:"nowrap",flexGrow:1e4,display:"flex"},toolbarLeftFiller:{flexGrow:1e4},toolbarRight:{paddingBottom:e.margins.rootLayoutMargin,flexWrap:"nowrap",display:"flex"}}})),Tn=function(e){var t=e.width,n=e.height,i=Ln(),a=r.useContext(At),c={width:t,height:n},s=l.useIntl().formatMessage({id:kt(exports.I18nNamespace.FileList,"nothingToShow"),defaultMessage:"Nothing to show"});return o.createElement("div",{className:i.fileListEmpty,style:c},o.createElement("div",{className:i.fileListEmptyContent},o.createElement(a,{icon:exports.ChonkyIconName.folderOpen})," ",s))},Ln=qt((function(e){return{fileListEmpty:{color:e.palette.text.disabled,position:"relative",textAlign:"center",fontSize:"1.2em"},fileListEmptyContent:{transform:"translateX(-50%) translateY(-50%)",position:"absolute",left:"50%",top:"50%"}}})),Rn=function(e){var t=e.children,n=e.wrapperTag,i=e.passthroughProps,a=e.onSingleClick,l=e.onDoubleClick,c=e.onKeyboardClick,d=e.setFocused,u=function(e,t){var n=s.useSelector(ke),o=r.useRef({clickCount:0,clickTimeout:null});return r.useCallback((function(r){var i={altKey:r.altKey,ctrlKey:r.ctrlKey||r.metaKey,shiftKey:r.shiftKey};o.current.clickCount++,1===o.current.clickCount?(e&&(r.preventDefault(),e(i)),o.current.clickCount=1,o.current.clickTimeout=setTimeout((function(){return o.current.clickCount=0}),n)):2===o.current.clickCount&&(t&&(r.preventDefault(),t(i)),"number"==typeof o.current.clickTimeout&&(clearTimeout(o.current.clickTimeout),o.current.clickTimeout=null,o.current.clickCount=0))}),[n,e,t,o])}(a,l),f=function(e){return r.useCallback((function(t){if(e){var n={enterKey:"Enter"===t.nativeEvent.code,spaceKey:"Space"===t.nativeEvent.code,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey};(n.spaceKey||n.enterKey)&&(t.preventDefault(),t.stopPropagation(),e(n))}}),[e])}(c),p={onFocus:r.useCallback((function(){return d&&d(!0)}),[d]),onBlur:r.useCallback((function(){return d&&d(!1)}),[d])};(a||l||c)&&(p.onClick=u,p.onKeyDown=f,p.tabIndex=0);var m=L({},p,i);return o.createElement(n,Object.assign({},m),t)},_n=o.memo((function(e){var t=e.file,n=e.className,i=function(e){var t=r.useMemo((function(){var t=[];return V.isHidden(e)&&t.push(exports.ChonkyIconName.hidden),V.isSymlink(e)&&t.push(exports.ChonkyIconName.symlink),V.isEncrypted(e)&&t.push(exports.ChonkyIconName.lock),t}),[e]),n=r.useContext(At);return r.useMemo((function(){return t.map((function(e,t){return o.createElement(n,{key:"file-modifier-"+t,icon:e})}))}),[n,t])}(t),a=function(e){return r.useMemo((function(){if(!e)return o.createElement(cn,{minLength:15,maxLength:20});var t,n,r,i=null;return V.isDirectory(e)?t=e.name:(i=null!=(n=e.ext)?n:(r=e.name.split(".")).length?"."+r[r.length-1]:"",t=e.name.substr(0,e.name.length-i.length)),o.createElement(o.Fragment,null,t,i&&o.createElement("span",{className:"chonky-file-entry-description-title-extension"},i))}),[e])}(t),l=jn();return o.createElement("span",{className:n,title:t?t.name:void 0},i.length>0&&o.createElement("span",{className:l.modifierIcons},i),a)}));_n.displayName="FileEntryName";var jn=Vt((function(e){return{modifierIcons:{color:e.palette.text.hint,position:"relative",fontSize:"0.775em",paddingRight:5}}})),Hn=o.memo((function(e){var t=e.file,n=un(t,e.selected,e.focused),i=Dt(t),a=i.fileModDateString,l=i.fileSizeString,c=Pn(n),s=r.useContext(At),d=dn(t);return o.createElement("div",Object.assign({className:c.listFileEntry},d),o.createElement("div",{className:c.listFileEntryIcon},o.createElement(s,{icon:n.icon,spin:n.iconSpin,fixedWidth:!0})),o.createElement("div",{className:c.listFileEntryDescription},o.createElement("div",{className:c.listFileEntryName,title:t?t.name:void 0},o.createElement(_n,{file:t})),o.createElement("div",{className:c.listFileEntryProperties},o.createElement("div",{className:c.listFileEntryProperty},t?null!=a?a:o.createElement("span",null,""):o.createElement(cn,{minLength:5,maxLength:15})),o.createElement("div",{className:c.listFileEntryProperty},t?null!=l?l:o.createElement("span",null,""):o.createElement(cn,{minLength:10,maxLength:20})))),o.createElement("div",{className:"chonky-file-entry-outline"}),o.createElement("div",{className:"chonky-file-entry-selection"}))})),Pn=Vt((function(e){return{listFileEntry:{fontSize:e.listFileEntry.fontSize,alignItems:"center",position:"relative",display:"flex",height:"100%"},listFileEntryIcon:{backgroundColor:function(e){return e.color},boxShadow:"inset rgba(255, 255, 255, 0.5) 0 0 0 999px",borderRadius:e.listFileEntry.iconBorderRadius,fontSize:e.listFileEntry.iconFontSize,color:"#fff",padding:8},listFileEntryDescription:{flexDirection:"column",display:"flex",flexGrow:1},listFileEntryName:{padding:[0,8,4,8]},listFileEntryProperties:{fontSize:e.listFileEntry.propertyFontSize,flexDirection:"row",display:"flex"},listFileEntryProperty:{padding:[0,8],opacity:.4}}})),Bn=o.memo((function(e){var t=e.file,n=e.children,l=function(e){var t=function(e){var t=s.useStore(),n=B(e),o=r.useCallback((function(){var e=t.getState();return{sourceInstanceId:Y(e),source:ne(e),draggedFile:n.current,selectedFiles:ge(e)}}),[t,n]),l=s.useDispatch(),c=r.useCallback((function(){return V.isDraggable(n.current)}),[n]),d=r.useCallback((function(){var e={type:"dnd-chonky-file-entry",payload:o()};return l(rt(ft.StartDragNDrop,e.payload)),e}),[l,o]),u=r.useCallback((function(e,t){var n=t.getDropResult();V.isDraggable(e.payload.draggedFile)&&n&&n.dropTarget&&l(rt(ft.EndDragNDrop,L({},e.payload,{destination:n.dropTarget,copy:"copy"===n.dropEffect})))}),[l]),f=function(){var e=Xt(),t=r.useCallback((function(){return[{},function(){return null},function(){return null}]}),[]),n=e?i.useDrag:t;return n.apply(void 0,arguments)}({item:r.useMemo((function(){return{type:"dnd-chonky-file-entry",payload:{}}}),[]),canDrag:c,begin:d,end:u,collect:r.useCallback((function(e){return{isDragging:e.isDragging()}}),[])}),p=f[0].isDragging,m=f[1],g=f[2];return r.useEffect((function(){g(a.getEmptyImage(),{captureDraggingState:!0})}),[g]),{dndIsDragging:p,drag:m}}(e),n=t.dndIsDragging,o=t.drag,l=an({file:e}),c=l.dndIsOver,d=l.dndCanDrop;return{drop:l.drop,drag:o,dndState:r.useMemo((function(){return{dndIsDragging:n,dndIsOver:c,dndCanDrop:d}}),[d,n,c])}}(t),c=l.drop,d=l.drag,u=l.dndState;ln(t,u);var f=Kn();return o.createElement("div",{ref:c,className:f.fillParent},o.createElement("div",{ref:V.isDraggable(t)?d:null,className:f.fillParent},n(u)))})),Kn=Vt((function(){return{fillParent:{height:"100%"}}})),Vn=o.memo((function(e){var t=e.className,n=e.thumbnailUrl,r=n?{backgroundImage:"url('"+n+"')"}:{},i=qn();return o.createElement("div",{className:y([t,i.fileThumbnail]),style:r})}));Vn.displayName="FileThumbnail";var qn=qt((function(){return{fileThumbnail:{backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"contain"}}})),Wn=o.memo((function(e){var t,n=e.className,i=e.dndState,a=fn(i),l=Gn(i),c=r.useContext(At);if(!a)return null;var s=Gt(((t={})[l.dndIndicator]=!0,t[n]=!0,t));return o.createElement("div",{className:s},o.createElement(c,{icon:a}))})),Gn=Vt((function(e){return{dndIndicator:{color:function(t){return t.dndIsOver?t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor:"#000"},boxSizing:"border-box",position:"absolute",fontSize:"1.2em",opacity:.6,padding:6,"&:before":{borderBottom:"50px solid transparent",borderLeft:"50px solid #fff",position:"absolute",content:'""',zIndex:-1,left:0,top:0}}}})),Un=o.memo((function(e){var t,n=e.className,r=e.entryState,i=e.dndState,a=Yn(r),l=Zn(r),c=Qn(r),s=Gt(((t={})[a.previewFile]=!0,t[n||""]=!!n,t));return o.createElement("div",{className:s},o.createElement("div",{className:a.folderBackSideMid},o.createElement("div",{className:a.folderBackSideTop}),o.createElement("div",{className:a.folderFrontSide},o.createElement(Wn,{className:l.dndIndicator,dndState:i}),o.createElement("div",{className:Gt([l.fileIcon,a.fileIcon])},r.childrenCount),o.createElement("div",{className:c.selectionIndicator}),o.createElement(Vn,{className:l.thumbnail,thumbnailUrl:r.thumbnailUrl}))))}));Un.displayName="GridEntryPreviewFolder";var Yn=Vt((function(e){return{previewFile:{borderRadius:e.gridFileEntry.borderRadius,position:"relative",overflow:"hidden"},folderBackSideTop:{backgroundColor:function(e){return e.color},boxShadow:function(t){var n=e.gridFileEntry.folderBackColorTint;return t.focused?n="rgba(0, 0, 0, 0.3)":t.selected&&(n="rgba(0, 153, 255, .4)"),"inset "+n+" 0 0 0 999px"},borderTopLeftRadius:e.gridFileEntry.borderRadius,borderTopRightRadius:10,position:"absolute",right:"60%",height:13,top:-10,left:0,"&:after":{borderRightColor:e.palette.background.paper,borderTopColor:e.palette.background.paper,borderBottomColor:"transparent",borderLeftColor:"transparent",borderWidth:[0,15,10,0],borderStyle:"solid",position:"absolute",display:"block",content:'""',right:0,top:0}},folderBackSideMid:{backgroundColor:function(e){return e.color},boxShadow:function(t){var n=e.gridFileEntry.folderBackColorTint;return t.focused?n="rgba(0, 0, 0, 0.3)":t.selected&&(n="rgba(0, 153, 255, .4)"),"inset "+n+" 0 0 0 999px"},borderTopRightRadius:e.gridFileEntry.borderRadius,position:"absolute",bottom:0,right:0,left:0,top:10},folderFrontSide:{boxShadow:function(t){var n=[];return t.focused&&n.push("inset rgba(0, 0, 0, 1) 0 0 0 3px"),t.selected&&n.push("inset rgba(0, 153, 255, .65) 0 0 0 3px"),n.push("inset "+e.gridFileEntry.folderFrontColorTint+" 0 0 0 999px"),n.join(", ")},backgroundColor:function(e){return e.color},borderRadius:e.gridFileEntry.borderRadius,position:"absolute",overflow:"hidden",bottom:0,right:0,left:0,top:10},fileIcon:{fontSize:Wt(e.gridFileEntry.childrenCountSize)}}})),Xn=o.memo((function(e){var t,n=e.className,i=e.entryState,a=e.dndState,l=Zn(i),c=Qn(i),s=r.useContext(At),d=Gt(((t={})[l.previewFile]=!0,t[n||""]=!!n,t));return o.createElement("div",{className:d},o.createElement(Wn,{className:l.dndIndicator,dndState:a}),o.createElement("div",{className:l.fileIcon},o.createElement(s,{icon:i.icon,spin:i.iconSpin})),o.createElement("div",{className:c.selectionIndicator}),o.createElement(Vn,{className:l.thumbnail,thumbnailUrl:i.thumbnailUrl}))}));Xn.displayName="GridEntryPreviewFile";var Zn=Vt((function(e){return{previewFile:{boxShadow:function(t){var n=[];return t.selected&&n.push("inset rgba(0,153,255, .65) 0 0 0 3px"),t.focused&&n.push("inset rgba(0, 0, 0, 1) 0 0 0 3px"),n.push("inset "+e.gridFileEntry.fileColorTint+" 0 0 0 999px"),n.join(", ")},backgroundColor:function(e){return e.color},borderRadius:e.gridFileEntry.borderRadius,position:"relative",overflow:"hidden"},dndIndicator:{zIndex:14},fileIcon:{transform:"translateX(-50%) translateY(-50%)",fontSize:e.gridFileEntry.iconSize,opacity:function(e){return e.thumbnailUrl&&!e.focused?0:1},color:function(t){return t.focused?e.gridFileEntry.iconColorFocused:e.gridFileEntry.iconColor},position:"absolute",left:"50%",zIndex:12,top:"50%"},thumbnail:{borderRadius:e.gridFileEntry.borderRadius,position:"absolute",zIndex:6,bottom:5,right:5,left:5,top:5}}})),Qn=Vt((function(){return{selectionIndicator:{display:function(e){return e.selected?"block":"none"},background:"repeating-linear-gradient(45deg,rgba(0,153,255,.14),rgba(0,153,255,.14) 10px,rgba(0,153,255,.25) 0,rgba(0,153,255,.25) 20px)",backgroundColor:"rgba(0, 153, 255, .14)",position:"absolute",height:"100%",width:"100%",zIndex:10},focusIndicator:{display:function(e){return e.focused?"block":"none"},boxShadow:"inset rgba(0, 0, 0, 1) 0 0 0 2px",position:"absolute",height:"100%",width:"100%",zIndex:11}}})),$n=o.memo((function(e){var t,n=e.file,r=e.selected,i=e.focused,a=e.dndState,l=V.isDirectory(n),c=un(n,r,i),s=Jn(c),d=dn(n),u=Gt(((t={})[s.gridFileEntry]=!0,t));return o.createElement("div",Object.assign({className:u},d),o.createElement(l?Un:Xn,{className:s.gridFileEntryPreview,entryState:c,dndState:a}),o.createElement("div",{className:s.gridFileEntryNameContainer},o.createElement(_n,{className:s.gridFileEntryName,file:n})))}));$n.displayName="GridEntry";var Jn=Vt((function(e){return{gridFileEntry:{flexDirection:"column",display:"flex",height:"100%"},gridFileEntryPreview:{flexGrow:1},gridFileEntryNameContainer:{fontSize:e.gridFileEntry.fontSize,wordBreak:"break-word",textAlign:"center",paddingTop:5},gridFileEntryName:{backgroundColor:function(e){return e.selected?"rgba(0,153,255, .25)":"transparent"},textDecoration:function(e){return e.focused?"underline":"none"},borderRadius:3,padding:[2,4]}}})),er=o.memo((function(e){var t=e.file,n=e.dndState,i=un(t,e.selected,e.focused),a=fn(n),l=Dt(t),c=l.fileModDateString,s=l.fileSizeString,d=r.useMemo((function(){return{entryState:i,dndState:n}}),[n,i]),u=tr(d),f=Qn(i),p=r.useContext(At),m=dn(t);return o.createElement("div",Object.assign({className:u.listFileEntry},m),o.createElement("div",{className:f.focusIndicator}),o.createElement("div",{className:Gt([f.selectionIndicator,u.listFileEntrySelection])}),o.createElement("div",{className:u.listFileEntryIcon},o.createElement(p,{icon:null!=a?a:i.icon,spin:!a&&i.iconSpin,fixedWidth:!0})),o.createElement("div",{className:u.listFileEntryName,title:t?t.name:void 0},o.createElement(_n,{file:t})),o.createElement("div",{className:u.listFileEntryProperty},t?null!=c?c:o.createElement("span",null,""):o.createElement(cn,{minLength:5,maxLength:15})),o.createElement("div",{className:u.listFileEntryProperty},t?null!=s?s:o.createElement("span",null,""):o.createElement(cn,{minLength:10,maxLength:20})))})),tr=Vt((function(e){return{listFileEntry:{boxShadow:"inset "+e.palette.divider+" 0 -1px 0",fontSize:e.listFileEntry.fontSize,color:function(t){var n=t.dndState;return n.dndIsOver?n.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor:"inherit"},alignItems:"center",position:"relative",display:"flex",height:"100%"},listFileEntrySelection:{opacity:.6},listFileEntryIcon:{color:function(t){var n=t.dndState;return n.dndIsOver?n.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor:t.entryState.color},fontSize:e.listFileEntry.iconFontSize,boxSizing:"border-box",padding:[2,4],zIndex:20},listFileEntryName:{textOverflow:"ellipsis",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",flex:"1 1 300px",paddingLeft:8,zIndex:20},listFileEntryProperty:{fontSize:e.listFileEntry.propertyFontSize,boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",flex:"0 1 150px",padding:[2,8],zIndex:20}}})),nr={dndIsDragging:!1,dndIsOver:!1,dndCanDrop:!1},rr=o.memo((function(e){var t,n=e.fileId,i=e.displayIndex,a=e.fileViewMode,l=or(),c=xt(ae,n),d=xt(me,n),u=s.useSelector(we),f=function(e,t){var n=s.useDispatch(),o=r.useCallback((function(r,o){e&&n(rt(ft.MouseClickFile,{clickType:o,file:e,fileDisplayIndex:t,altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey}))}),[n,e,t]),i=r.useCallback((function(r){e&&n(rt(ft.KeyboardClickFile,{file:e,fileDisplayIndex:t,enterKey:r.enterKey,spaceKey:r.spaceKey,altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey}))}),[n,e,t]);return{onSingleClick:r.useCallback((function(e){return o(e,"single")}),[o]),onDoubleClick:r.useCallback((function(e){return o(e,"double")}),[o]),onKeyboardClick:i}}(c,i),p=r.useState(!1),m=p[0],g=p[1],h=L({wrapperTag:"div",passthroughProps:{className:l.fileEntryClickableWrapper}},V.isClickable(c)?f:void 0,{setFocused:g}),b={file:c,selected:d,focused:m};return t=a===exports.FileViewMode.List?er:a===exports.FileViewMode.Compact?Hn:$n,u?o.createElement(Rn,Object.assign({},h),o.createElement(t,Object.assign({},b,{dndState:nr}))):o.createElement(Bn,{file:c},(function(e){return o.createElement(Rn,Object.assign({},h),o.createElement(t,Object.assign({},b,{dndState:e})))}))}));rr.displayName="SmartFileEntry";var or=qt((function(){return{fileEntryClickableWrapper:{outline:"none !important",position:"relative",height:"100%"}}})),ir=function(e,t,n,r){var o,i,a=r?5:8,l=void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")?0:18;return r?i=(e-a-l)/(o=2):(i=n.entryWidth,o=Math.max(1,Math.floor((e-l)/(i+a)))),{rowCount:Math.ceil(t/o),columnCount:o,gutter:a,rowHeight:n.entryHeight,columnWidth:i}},ar=o.memo((function(e){var t=e.width,n=e.height,i=s.useSelector(ve),a=s.useSelector(Ue.getDisplayFileIds),l=r.useMemo((function(){return a.length}),[a]),c=r.useRef(),d=Bt(),u=r.useState(ir(t,l,i,d)),f=u[0],p=u[1],m=r.useRef(f);r.useEffect((function(){var e=m.current,n=ir(t,l,i,d);m.current=n,c.current&&(e.rowCount!==n.rowCount&&c.current.resetAfterRowIndex(Math.min(e.rowCount,n.rowCount)-1),e.columnCount!==n.columnCount&&c.current.resetAfterColumnIndex(Math.min(e.columnCount,n.rowCount)-1),e.columnWidth!==n.columnWidth&&c.current.resetAfterIndices({columnIndex:0,rowIndex:0})),p(n)}),[p,m,d,t,i,l]);var g=r.useMemo((function(){var e=m;return{getColumnWidth:function(t){return e.current.columnWidth+(t===e.current.columnCount-1?0:e.current.gutter)},getRowHeight:function(t){return e.current.rowHeight+(t===e.current.rowCount-1?0:e.current.gutter)}}}),[m]),h=B(s.useSelector(Ue.getDisplayFileIds)),b=r.useCallback((function(e){var t,n=e.rowIndex*m.current.columnCount+e.columnIndex;return null!=(t=h.current[n])?t:"loading-file-"+n}),[m,h]),y=r.useCallback((function(e){var t=e.rowIndex*m.current.columnCount+e.columnIndex,n=a[t];if(void 0===a[t])return null;var r=L({},e.style,{paddingRight:e.columnIndex===m.current.columnCount-1?0:m.current.gutter,paddingBottom:e.rowIndex===m.current.rowCount-1?0:m.current.gutter,boxSizing:"border-box"});return o.createElement("div",{style:r},o.createElement(rr,{fileId:null!=n?n:null,displayIndex:t,fileViewMode:i.mode}))}),[a,i.mode]),v=lr();return r.useMemo((function(){return o.createElement(O.VariableSizeGrid,{ref:c,className:v.gridContainer,estimatedRowHeight:f.rowHeight+f.gutter,rowHeight:g.getRowHeight,estimatedColumnWidth:f.columnWidth+f.gutter,columnWidth:g.getColumnWidth,columnCount:f.columnCount,height:n,rowCount:f.rowCount,width:t,itemKey:b},y)}),[v.gridContainer,f.rowHeight,f.gutter,f.columnWidth,f.columnCount,f.rowCount,g.getRowHeight,g.getColumnWidth,n,t,b,y])})),lr=qt((function(){return{gridContainer:{}}})),cr=o.memo((function(e){var t=e.width,n=e.height,i=s.useSelector(ve),a=r.useRef(),l=s.useSelector(Ue.getDisplayFileIds),c=B(l),d=r.useCallback((function(e){var t;return null!=(t=c.current[e])?t:"loading-file-"+e}),[c]),u=sr();return r.useMemo((function(){return o.createElement(O.FixedSizeList,{ref:a,className:u.listContainer,itemSize:i.entryHeight,height:n,itemCount:l.length,width:t,itemKey:d},(function(e){var t;return o.createElement("div",{style:e.style},o.createElement(rr,{fileId:null!=(t=l[e.index])?t:null,displayIndex:e.index,fileViewMode:exports.FileViewMode.List}))}))}),[u.listContainer,i.entryHeight,n,l,t,d])})),sr=Vt((function(e){return{listContainer:{borderTop:"solid 1px "+e.palette.divider}}})),dr=o.memo((function(e){var t=s.useSelector(Ue.getDisplayFileIds),n=s.useSelector(ve),i=s.useSelector(ne),a=an({file:i}),l=a.drop,c=a.dndCanDrop,d=a.dndIsOverCurrent,u=r.useMemo((function(){return{dndCanDrop:c,dndIsOverCurrent:d}}),[c,d]),f=ur(u),p=fr(n),m=e.onScroll,g=r.useCallback((function(e){var r=e.width,i=e.height;return 0===t.length?o.createElement(Tn,{width:r,height:n.entryHeight}):n.mode===exports.FileViewMode.List?o.createElement(cr,{width:r,height:i}):o.createElement(ar,{width:r,height:i})}),[t,n]),h=r.useContext(At);return o.createElement("div",{onScroll:m,ref:l,className:Gt([p.fileListWrapper,f.fileListWrapper]),role:"list"},o.createElement("div",{className:f.dndDropZone},o.createElement("div",{className:f.dndDropZoneIcon},o.createElement(h,{icon:c?exports.ChonkyIconName.dndCanDrop:exports.ChonkyIconName.dndCannotDrop}))),o.createElement(A,{disableHeight:!1},g))}));dr.displayName="FileList";var ur=Vt((function(e){return{fileListWrapper:{minHeight:ft.EnableGridView.fileViewConfig.entryHeight+2,background:function(t){return t.dndIsOverCurrent&&t.dndCanDrop?t.dndCanDrop?Kt(e.dnd.fileListCanDropMaskOne,e.dnd.fileListCanDropMaskTwo):Kt(e.dnd.fileListCannotDropMaskOne,e.dnd.fileListCannotDropMaskTwo):"none"}},dndDropZone:{display:function(e){return e.dndIsOverCurrent&&e.dndCanDrop?"block":"none"},borderRadius:e.gridFileEntry.borderRadius,pointerEvents:"none",position:"absolute",height:"100%",width:"100%",zIndex:2},dndDropZoneIcon:{backgroundColor:function(t){return t.dndCanDrop?e.dnd.canDropMask:e.dnd.cannotDropMask},color:function(t){return t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor},borderRadius:e.gridFileEntry.borderRadius,transform:"translateX(-50%) translateY(-50%)",position:"absolute",textAlign:"center",lineHeight:"60px",fontSize:"2em",left:"50%",height:60,top:"50%",width:60}}})),fr=qt((function(){return{fileListWrapper:{height:"100%",maxHeight:"100%"}}})),pr=o.memo((function(){var e=s.useDispatch();r.useEffect((function(){return e(bt.setContextMenuMounted(!0)),function(){e(bt.setContextMenuMounted(!1))}}),[e]);var t=l.useIntl().formatMessage({id:kt(exports.I18nNamespace.FileContextMenu,"browserMenuShortcut"),defaultMessage:"Browser menu: {shortcut}"},{shortcut:o.createElement("strong",null,"Alt + Right Click")}),n=s.useSelector(Me),i=s.useSelector(ee),a=function(){var e=s.useDispatch();return r.useCallback((function(){return e(bt.hideContextMenu())}),[e])}(),c=r.useMemo((function(){for(var e=[],t=function(t){var n=i[t];"string"==typeof n?e.push(o.createElement(kn,{key:"context-menu-item-"+n,fileActionId:n,onClickFollowUp:a})):n.fileActionIds.map((function(t){return e.push(o.createElement(kn,{key:"context-menu-item-"+n.name+"-"+t,fileActionId:t,onClickFollowUp:a}))}))},n=0;n<i.length;++n)t(n);return e}),[i,a]),d=r.useMemo((function(){return n?{top:n.mouseY,left:n.mouseX}:void 0}),[n]),u=mr();return o.createElement(I,{elevation:2,disablePortal:!0,onClose:a,transitionDuration:150,open:!!n,anchorPosition:d,anchorReference:"anchorPosition",classes:{list:u.contextMenuList}},c,o.createElement(z,{component:"div",className:u.browserMenuTooltip},t))})),mr=qt((function(){return{contextMenuList:{paddingBottom:Wt(0),paddingTop:Wt(0)},browserMenuTooltip:{lineHeight:Wt("30px"),fontSize:Wt("0.7em")}}})),gr=T.createGenerateClassName({seed:"chonky-generated"}),hr=o.memo(o.forwardRef((function(e,t){var n=e.onScroll;return o.createElement(T.StylesProvider,{generateClassName:gr},o.createElement(rn,Object.assign({ref:t},e),o.createElement(Cn,null),o.createElement(On,null),o.createElement(dr,{onScroll:n}),o.createElement(pr,null)))})));hr.displayName="FullFileBrowser";var br=function(e,t){return r.useMemo((function(){for(var n=e[t],r=[n],o=n.parentId;o;){var i=e[o];if(!i)break;r.unshift(i),o=i.parentId}return r}),[t,e])},yr=function(e,t){return r.useMemo((function(){return e[t].childrenIds.map((function(t){return e[t]}))}),[t,e])},vr=function(e,t){var n=r.useState(e),o=n[0],i=n[1],a=r.useState(t),l=a[0],c=a[1],s=r.useCallback((function(){i(e),c(t)}),[e,t]),d=r.useCallback((function(e,t,n){return i((function(r){var o=L({},r),i=new Set(e.map((function(e){return e.id}))),a=t.childrenIds.filter((function(e){return!i.has(e)}));o[t.id]=L({},t,{childrenIds:a,childrenCount:a.length});var l=[].concat(n.childrenIds,e.map((function(e){return e.id})));return o[n.id]=L({},n,{childrenIds:l,childrenCount:l.length}),e.forEach((function(e){o[e.id]=L({},e,{parentId:n.id})})),o}))}),[]);return{fileMap:o,currentFolderId:l,methods:r.useMemo((function(){return{setFileMap:i,setCurrentFolderId:c,resetFileMap:s,moveFiles:d}}),[i,c,s,d])}},xr=function(e){return r.useCallback((function(t){if(t.id===ft.OpenFiles.id){var n=t.payload,r=n.targetFile,o=null!=r?r:n.files[0];o&&V.isDirectory(o)&&e.setCurrentFolderId(o.id)}else t.id===ft.MoveFiles.id&&e.moveFiles(t.payload.files,t.payload.source,t.payload.destination)}),[e])},Cr={__proto__:null,useFolderChain:br,useFiles:yr,useFileMapMethods:vr,useFileActionHandler:xr,useFileMap:function(e){var t=vr(e.baseFileMap,e.initialFolderId),n=t.fileMap,r=t.currentFolderId,o=t.methods;return{data:{fileMap:n,currentFolderId:r,folderChain:br(n,r),files:yr(n,r)},methods:o,fileActionHandler:xr(o)}}};exports.ChonkyActions=ft,exports.ChonkyDndFileEntryType="dnd-chonky-file-entry",exports.DefaultFileActions=mt,exports.FileBrowser=rn,exports.FileContextMenu=pr,exports.FileHelper=V,exports.FileList=dr,exports.FileNavbar=Cn,exports.FileToolbar=On,exports.FullFileBrowser=hr,exports.OptionIds=W,exports.defaultFormatters=Mt,exports.defineFileAction=at,exports.fileMap=Cr,exports.getActionI18nId=wt,exports.getFileData=Ye,exports.getI18nId=kt,exports.getIsFileSelected=Xe,exports.getSelectedFiles=Ze,exports.getSelectedFilesForAction=Qe,exports.reduxActions=bt,exports.rootReducer=yt,exports.selectCleanFileIds=ie,exports.selectClearSelectionOnOutsideClick=Ee,exports.selectContextMenuConfig=Me,exports.selectContextMenuItems=ee,exports.selectContextMenuMounted=De,exports.selectContextMenuTriggerFile=Ne,exports.selectCurrentFolder=ne,exports.selectDisableSelection=ye,exports.selectDoubleClickDelay=ke,exports.selectExternalFileActionHandler=X,exports.selectFileActionData=$,exports.selectFileActionIds=Q,exports.selectFileActionMap=Z,exports.selectFileData=ae,exports.selectFileMap=oe,exports.selectFileViewConfig=ve,exports.selectFocusSearchInput=se,exports.selectFolderChain=te,exports.selectHiddenFileCount=ce,exports.selectHiddenFileIdMap=le,exports.selectInstanceId=Y,exports.selectIsDnDDisabled=we,exports.selectIsFileSelected=me,exports.selectOptionMap=Se,exports.selectOptionValue=Fe,exports.selectParentFolder=re,exports.selectRawFiles=function(e){return e.rawFiles},exports.selectSearchString=de,exports.selectSelectedFileIds=fe,exports.selectSelectedFiles=ge,exports.selectSelectedFilesForAction=he,exports.selectSelectedFilesForActionCount=be,exports.selectSelectionMap=ue,exports.selectSelectionSize=pe,exports.selectSortActionId=xe,exports.selectSortOrder=Ce,exports.selectThumbnailGenerator=Ie,exports.selectToolbarItems=J,exports.selectors=Ue,exports.setChonkyDefaults=function(e){for(var t=0,n=Object.keys(It);t<n.length;t++){var r=n[t];r in e&&(It[r]=e[r])}},exports.thunkDispatchFileAction=nt,exports.thunkRequestFileAction=rt,exports.useChonkyStore=vt,exports.useDTE=Ct,exports.useParamSelector=xt,exports.usePropReduxUpdate=St;
 //# sourceMappingURL=chonky.cjs.production.min.js.map
diff --git a/node_modules/chonky/dist/chonky.cjs.production.min.js.map b/node_modules/chonky/dist/chonky.cjs.production.min.js.map
index 06afa22..6a66b3c 100644
--- a/node_modules/chonky/dist/chonky.cjs.production.min.js.map
+++ b/node_modules/chonky/dist/chonky.cjs.production.min.js.map
@@ -1 +1 @@
-{"version":3,"file":"chonky.cjs.production.min.js","sources":["../src/util/hooks-helpers.ts","../src/types/sort.types.ts","../src/util/logger.ts","../src/util/file-helper.ts","../src/redux/files-transforms.ts","../src/action-definitions/option-ids.ts","../src/types/file-view.types.ts","../src/types/icons.types.ts","../src/redux/selectors.ts","../src/redux/thunks/file-actions.thunks.ts","../src/redux/thunks/dispatchers.thunks.ts","../src/util/i18n.ts","../src/util/helpers.ts","../src/action-definitions/essential.ts","../src/redux/thunks/index.ts","../src/action-definitions/default.ts","../src/action-definitions/extra.ts","../src/action-definitions/index.ts","../src/redux/state.ts","../src/redux/reducers.ts","../src/redux/store.ts","../src/redux/watchers.ts","../src/components/internal/ChonkyIconPlaceholder.tsx","../src/util/default-config.ts","../src/util/icon-helper.ts","../src/util/styles.ts","../src/components/internal/ChonkyBusinessLogic.tsx","../src/util/file-browser-handle.ts","../src/util/dnd-fallback.ts","../src/components/file-list/DnDFileListDragLayer.tsx","../src/types/dnd.types.ts","../src/components/internal/HotkeyListener.tsx","../src/components/internal/ChonkyPresentationLayer.tsx","../src/components/external/FileContextMenu-hooks.ts","../src/components/external/FileBrowser.tsx","../src/components/external/FileNavbar-hooks.ts","../src/types/action.types.ts","../src/util/dnd.ts","../src/components/external/TextPlaceholder.tsx","../src/components/file-list/FileEntry-hooks.tsx","../src/util/file-actions.ts","../src/components/external/ToolbarButton.tsx","../src/components/external/FolderChainButton.tsx","../src/components/external/FileNavbar.tsx","../src/components/external/ToolbarDropdownButton.tsx","../src/components/external/ToolbarDropdown.tsx","../src/components/external/ToolbarInfo.tsx","../src/components/external/ToolbarSearch.tsx","../src/components/external/FileToolbar.tsx","../src/components/file-list/FileListEmpty.tsx","../src/components/internal/ClickableWrapper.tsx","../src/components/internal/ClickableWrapper-hooks.tsx","../src/components/file-list/FileEntryName.tsx","../src/components/file-list/CompactEntry.tsx","../src/components/file-list/DnDFileEntry.tsx","../src/components/file-list/FileThumbnail.tsx","../src/components/file-list/GridEntryDndIndicator.tsx","../src/components/file-list/GridEntryPreview.tsx","../src/components/file-list/GridEntry.tsx","../src/components/file-list/ListEntry.tsx","../src/components/file-list/FileEntry.tsx","../src/components/file-list/GridContainer.tsx","../src/components/file-list/ListContainer.tsx","../src/components/file-list/FileList.tsx","../src/components/external/FileContextMenu.tsx","../src/components/external/FullFileBrowser.tsx","../src/extensions/file-map.ts"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nexport const useDebounce = <T>(\n    value: T,\n    delay: number\n): [T, React.Dispatch<React.SetStateAction<T>>] => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(() => {\n        const handler = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [value, delay]);\n\n    return [debouncedValue, setDebouncedValue];\n};\n\nconst UNINITIALIZED_SENTINEL = {};\nexport const useStaticValue = <T>(factory: () => T): T => {\n    const valueRef = useRef<T>(UNINITIALIZED_SENTINEL as T);\n    if (valueRef.current === UNINITIALIZED_SENTINEL) valueRef.current = factory();\n    return valueRef.current;\n};\n\nexport const useInstanceVariable = <T>(value: T) => {\n    const ref = useRef(value);\n    useEffect(() => {\n        ref.current = value;\n    }, [ref, value]);\n    return ref;\n};\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from './file.types';\n\nexport type FileSortKeySelector = (file: Nullable<FileData>) => any;\n\nexport enum SortOrder {\n    ASC = 'asc',\n    DESC = 'desc',\n}\n","export class Logger {\n    public static error(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.error('[Chonky runtime error]', ...args);\n    }\n\n    public static warn(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.warn('[Chonky runtime warning]', ...args);\n    }\n\n    public static debug(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.debug('[Chonky runtime debug]', ...args);\n    }\n\n    public static formatBullets(bullets: string[]): string {\n        return `\\n- ${bullets.join('\\n- ')}`;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from '../types/file.types';\nimport { Logger } from './logger';\n\nexport class FileHelper {\n    public static isDirectory(file: Nullable<FileData>): file is FileData {\n        // Not a directory by default\n        return !!file && file.isDir === true;\n    }\n\n    public static isHidden(file: Nullable<FileData>): file is FileData {\n        // Not hidden by default\n        return !!file && file.isHidden === true;\n    }\n\n    public static isSymlink(file: Nullable<FileData>): file is FileData {\n        // Not a symlink by default\n        return !!file && file.isSymlink === true;\n    }\n\n    public static isEncrypted(file: Nullable<FileData>): file is FileData {\n        // Not encrypted by default\n        return !!file && file.isEncrypted === true;\n    }\n\n    public static isClickable(file: Nullable<FileData>): file is FileData {\n        // Clickable by default\n        return !!file;\n    }\n\n    public static isOpenable(file: Nullable<FileData>): file is FileData {\n        // Openable by default\n        return !!file && file.openable !== false;\n    }\n\n    public static isSelectable(file: Nullable<FileData>): file is FileData {\n        // Selectable by default\n        return !!file && file.selectable !== false;\n    }\n\n    public static isDraggable(file: Nullable<FileData>): file is FileData {\n        // File & folders are draggable by default, `null` is not\n        return !!file && file.draggable !== false;\n    }\n\n    public static isDroppable(file: Nullable<FileData>): file is FileData {\n        // Folders are droppable by default, files are not\n        if (!file) return false;\n        if (file.isDir && file.droppable !== false) return true;\n        return file.droppable === true;\n    }\n\n    public static isDndOpenable(file: Nullable<FileData>): file is FileData {\n        // Folders are DnD openable by default, files are not\n        if (!FileHelper.isOpenable(file)) return false;\n        if (file.isDir && file.dndOpenable !== false) return true;\n        return file.dndOpenable === true;\n    }\n\n    public static getModDate(file: Nullable<FileData>): Nullable<Date> {\n        if (!file || file.modDate === null || file.modDate === undefined) return null;\n        return FileHelper.parseDate(file.modDate);\n    }\n\n    public static parseDate(maybeDate: Date | string | any): Nullable<Date> {\n        if (typeof maybeDate === 'string' || typeof maybeDate === 'number') {\n            // We allow users to provide string and numerical representations of dates.\n            try {\n                return new Date(maybeDate);\n            } catch (error) {\n                Logger.error(\n                    `Could not convert provided string/number into a date: ${error.message} `,\n                    'Invalid value:',\n                    maybeDate\n                );\n            }\n        }\n        if (maybeDate instanceof Date && !isNaN(maybeDate.getTime())) {\n            // We only allow valid dates objects\n            return maybeDate;\n        }\n\n        // If we have an invalid date representation, we just return null.\n        Logger.warn('Unsupported date representation:', maybeDate);\n        return null;\n    }\n\n    public static getChildrenCount(file: Nullable<FileData>): Nullable<number> {\n        if (!file || typeof file.childrenCount !== 'number') return null;\n\n        return file.childrenCount;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileArray } from '../types/file.types';\nimport { Logger } from '../util/logger';\n\ninterface SanitizeFiles {\n    (mode: 'files', rawArray: FileArray | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'folderChain', rawArray: Nullable<FileArray> | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'fileActions', rawArray: FileAction[] | any): {\n        sanitizedArray: FileAction[];\n        errorMessages: string[];\n    };\n}\n\nexport const sanitizeInputArray: SanitizeFiles = (mode: string, rawArray: any[]) => {\n    const sanitizedFiles = [];\n    const errorMessages: string[] = [];\n\n    if ((mode === 'folderChain' || mode === 'fileActions') && !rawArray) {\n        // Do nothing, we allow folder chain to be null.\n    } else if (!Array.isArray(rawArray)) {\n        errorMessages.push(\n            `Expected \"${mode}\" prop to be an array, got \"${typeof rawArray}\" instead.`\n        );\n    } else {\n        let nonObjectFileCount = 0;\n        let missingFieldFileCount = 0;\n        const seenIds = new Set<string>();\n        const duplicateIds = new Set<string>();\n\n        for (let i = 0; i < rawArray.length; ++i) {\n            const item = rawArray[i];\n            if (!item) {\n                if (mode === 'fileActions') nonObjectFileCount++;\n                else sanitizedFiles.push(null);\n            } else if (typeof item !== 'object') {\n                nonObjectFileCount++;\n            } else {\n                if (!item.id || (mode !== 'fileActions' && !item.name)) {\n                    missingFieldFileCount++;\n                } else if (seenIds.has(item.id)) {\n                    duplicateIds.add(item.id);\n                } else {\n                    seenIds.add(item.id);\n                    sanitizedFiles.push(item);\n                }\n            }\n        }\n\n        if (nonObjectFileCount) {\n            errorMessages.push(\n                `Detected ${nonObjectFileCount} file(s) of invalid type. Remember ` +\n                    `that \"files\" array should contain either objects or nulls.`\n            );\n        }\n        if (missingFieldFileCount) {\n            errorMessages.push(\n                `Detected ${missingFieldFileCount} file(s) that are missing the ` +\n                    `required fields. Remember that file object should define an ` +\n                    `\"id\" and a \"name\".`\n            );\n        }\n        if (duplicateIds.size > 0) {\n            const repeatedIdsString = '\"' + Array.from(duplicateIds).join('\", \"') + '\"';\n            errorMessages.push(\n                `Detected ${duplicateIds.size} file IDs that are used multiple ` +\n                    `times. Remember that each file should have a unique IDs. The ` +\n                    `following IDs were seen multiple times: ${repeatedIdsString}`\n            );\n        }\n    }\n\n    if (errorMessages.length > 0) {\n        const errorMessageString = '\\n- ' + errorMessages.join('\\n- ');\n        let arrayString: string;\n        let itemString: string;\n        if (mode === 'folderChain') {\n            arrayString = 'folder chain';\n            itemString = 'files';\n        } else if (mode === 'fileActions') {\n            arrayString = 'file actions';\n            itemString = 'file actions';\n        } else {\n            // mode === 'files'\n            arrayString = 'files';\n            itemString = 'files';\n        }\n\n        Logger.error(\n            `Errors were detected when sanitizing the ${arrayString} array. ` +\n                `Offending ${itemString} were removed from the array. Summary of ` +\n                `validation errors: ${errorMessageString}`\n        );\n    }\n\n    return {\n        sanitizedArray: sanitizedFiles,\n        errorMessages,\n    };\n};\n","/**\n * We have option IDs in a separate file to avoid circular deps...\n */\nexport const OptionIds = {\n    ShowHiddenFiles: 'show_hidden_files',\n    ShowFoldersFirst: 'show_folders_first',\n    DarkMode: 'dark_mode',\n};\n","export enum FileViewMode {\n    List = 'list',\n    Compact = 'compact',\n    Grid = 'grid',\n}\n\nexport type FileViewConfigList = {\n    mode: FileViewMode.List;\n    entryHeight: number;\n};\n\nexport type FileViewConfigGrid = {\n    mode: FileViewMode.Compact | FileViewMode.Grid;\n    entryWidth: number;\n    entryHeight: number;\n};\n\nexport type FileViewConfig = FileViewConfigList | FileViewConfigGrid;\n","import React from 'react';\n\nexport enum ChonkyIconName {\n    // Misc\n    loading = 'loading',\n    dropdown = 'dropdown',\n    placeholder = 'placeholder',\n\n    // File Actions: Drag & drop\n    dndDragging = 'dndDragging',\n    dndCanDrop = 'dndCanDrop',\n    dndCannotDrop = 'dndCannotDrop',\n\n    // File Actions: File operations\n    openFiles = 'openFiles',\n    openParentFolder = 'openParentFolder',\n    copy = 'copy',\n    paste = 'paste',\n    share = 'share',\n    search = 'search',\n    selectAllFiles = 'selectAllFiles',\n    clearSelection = 'clearSelection',\n\n    // File Actions: Sorting & options\n    sortAsc = 'sortAsc',\n    sortDesc = 'sortDesc',\n    toggleOn = 'toggleOn',\n    toggleOff = 'toggleOff',\n\n    // File Actions: File Views\n    list = 'list',\n    compact = 'compact',\n    smallThumbnail = 'smallThumbnail',\n    largeThumbnail = 'largeThumbnail',\n\n    // File Actions: Unsorted\n    folder = 'folder',\n    folderCreate = 'folderCreate',\n    folderOpen = 'folderOpen',\n    folderChainSeparator = 'folderChainSeparator',\n    download = 'download',\n    upload = 'upload',\n    trash = 'trash',\n    fallbackIcon = 'fallbackIcon',\n\n    // File modifiers\n    symlink = 'symlink',\n    hidden = 'hidden',\n\n    // Generic file types\n    file = 'file',\n    license = 'license',\n    code = 'code',\n    config = 'config',\n    model = 'model',\n    database = 'database',\n    text = 'text',\n    archive = 'archive',\n    image = 'image',\n    video = 'video',\n    info = 'info',\n    key = 'key',\n    lock = 'lock',\n    music = 'music',\n    terminal = 'terminal',\n    users = 'users',\n\n    // OS file types\n    linux = 'linux',\n    ubuntu = 'ubuntu',\n    windows = 'windows',\n\n    // Programming language file types\n    rust = 'rust',\n    python = 'python',\n    nodejs = 'nodejs',\n    php = 'php',\n\n    // Development tools file types\n    git = 'git',\n\n    // Brands file types\n    adobe = 'adobe',\n\n    // Other program file types\n    pdf = 'pdf',\n    excel = 'excel',\n    word = 'word',\n    flash = 'flash',\n}\n\nexport interface FileIconData {\n    icon: ChonkyIconName | string;\n    colorCode: number;\n}\n\nexport interface ChonkyIconProps {\n    icon: ChonkyIconName | string;\n    spin?: boolean;\n    className?: string;\n    fixedWidth?: boolean;\n    style?: React.CSSProperties;\n}\n","import sort from 'fast-sort';\nimport FuzzySearch from 'fuzzy-search';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { createSelector } from '@reduxjs/toolkit';\n\nimport { OptionIds } from '../action-definitions/option-ids';\nimport { FileArray, FileData, FileFilter } from '../types/file.types';\nimport { RootState } from '../types/redux.types';\nimport { FileSortKeySelector, SortOrder } from '../types/sort.types';\nimport { FileHelper } from '../util/file-helper';\n\n// Raw selectors\nexport const selectInstanceId = (state: RootState) => state.instanceId;\nexport const selectExternalFileActionHandler = (state: RootState) => state.externalFileActionHandler;\n\nexport const selectFileActionMap = (state: RootState) => state.fileActionMap;\nexport const selectFileActionIds = (state: RootState) => state.fileActionIds;\nexport const selectFileActionData = (fileActionId: string) => (state: RootState) =>\n    selectFileActionMap(state)[fileActionId];\nexport const selectToolbarItems = (state: RootState) => state.toolbarItems;\nexport const selectContextMenuItems = (state: RootState) => state.contextMenuItems;\n\nexport const selectFolderChain = (state: RootState) => state.folderChain;\nexport const selectCurrentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const currentFolder = folderChain.length > 0 ? folderChain[folderChain.length - 1] : null;\n    return currentFolder;\n};\nexport const selectParentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const parentFolder = folderChain.length > 1 ? folderChain[folderChain.length - 2] : null;\n    return parentFolder;\n};\n\nexport const selectRawFiles = (state: RootState) => state.rawFiles;\nexport const selectFileMap = (state: RootState) => state.fileMap;\nexport const selectCleanFileIds = (state: RootState) => state.cleanFileIds;\nexport const selectFileData = (fileId: Nullable<string>) => (state: RootState) =>\n    fileId ? selectFileMap(state)[fileId] : null;\n\nexport const selectHiddenFileIdMap = (state: RootState) => state.hiddenFileIdMap;\nexport const selectHiddenFileCount = (state: RootState) => Object.keys(selectHiddenFileIdMap(state)).length;\n\nexport const selectFocusSearchInput = (state: RootState) => state.focusSearchInput;\nexport const selectSearchString = (state: RootState) => state.searchString;\n\nexport const selectSelectionMap = (state: RootState) => state.selectionMap;\nexport const selectSelectedFileIds = (state: RootState) => Object.keys(selectSelectionMap(state));\nexport const selectSelectionSize = (state: RootState) => selectSelectedFileIds(state).length;\nexport const selectIsFileSelected = (fileId: Nullable<string>) => (state: RootState) =>\n    !!fileId && !!selectSelectionMap(state)[fileId];\nexport const selectSelectedFiles = (state: RootState) => {\n    const fileMap = selectFileMap(state);\n    return Object.keys(selectSelectionMap(state)).map(id => fileMap[id]);\n};\nexport const selectSelectedFilesForAction = (fileActionId: string) => (state: RootState) => {\n    const { fileActionMap } = state;\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.requiresSelection) return undefined;\n\n    return getSelectedFiles(state, action.fileFilter);\n};\nexport const selectSelectedFilesForActionCount = (fileActionId: string) => (state: RootState) =>\n    getSelectedFilesForAction(state, fileActionId)?.length;\nexport const selectDisableSelection = (state: RootState) => state.disableSelection;\n\nexport const selectFileViewConfig = (state: RootState) => state.fileViewConfig;\n\nexport const selectSortActionId = (state: RootState) => state.sortActionId;\nexport const selectSortOrder = (state: RootState) => state.sortOrder;\n\nexport const selectOptionMap = (state: RootState) => state.optionMap;\nexport const selectOptionValue = (optionId: string) => (state: RootState) => selectOptionMap(state)[optionId];\n\nexport const selectThumbnailGenerator = (state: RootState) => state.thumbnailGenerator;\nexport const selectDoubleClickDelay = (state: RootState) => state.doubleClickDelay;\nexport const selectIsDnDDisabled = (state: RootState) => state.disableDragAndDrop;\nexport const selectClearSelectionOnOutsideClick = (state: RootState) => state.clearSelectionOnOutsideClick;\n\nexport const selectContextMenuMounted = (state: RootState) => state.contextMenuMounted;\nexport const selectContextMenuConfig = (state: RootState) => state.contextMenuConfig;\nexport const selectContextMenuTriggerFile = (state: RootState) => {\n    const config = selectContextMenuConfig(state);\n    if (!config || !config.triggerFileId) return null;\n    const fileMap = selectFileMap(state);\n    return fileMap[config.triggerFileId] ?? null;\n};\n\n// Raw selectors\nconst getFileActionMap = (state: RootState) => state.fileActionMap;\nconst getOptionMap = (state: RootState) => state.optionMap;\nconst getFileMap = (state: RootState) => state.fileMap;\nconst getFileIds = (state: RootState) => state.fileIds;\nconst getCleanFileIds = (state: RootState) => state.cleanFileIds;\nconst getSortActionId = (state: RootState) => state.sortActionId;\nconst getSortOrder = (state: RootState) => state.sortOrder;\nconst getSearchString = (state: RootState) => state.searchString;\nconst _getLastClick = (state: RootState) => state.lastClick;\n\n// Memoized selectors\nconst makeGetAction = (fileActionSelector: (state: RootState) => Nullable<string>) =>\n    createSelector([getFileActionMap, fileActionSelector], (fileActionMap, fileActionId) =>\n        fileActionId && fileActionMap[fileActionId] ? fileActionMap[fileActionId] : null\n    );\nconst makeGetOptionValue = (optionId: string, defaultValue: any = undefined) =>\n    createSelector([getOptionMap], optionMap => {\n        const value = optionMap[optionId];\n        if (value === undefined) {\n            return defaultValue;\n        }\n        return value;\n    });\nconst makeGetFiles = (fileIdsSelector: (state: RootState) => Nullable<string>[]) =>\n    createSelector(\n        [getFileMap, fileIdsSelector],\n        (fileMap, fileIds): FileArray => fileIds.map(fileId => (fileId && fileMap[fileId] ? fileMap[fileId] : null))\n    );\nconst getSortedFileIds = createSelector(\n    [\n        getFileIds,\n        getSortOrder,\n        makeGetFiles(getFileIds),\n        makeGetAction(getSortActionId),\n        makeGetOptionValue(OptionIds.ShowFoldersFirst, false),\n    ],\n    (fileIds, sortOrder, files, sortAction, showFolderFirst) => {\n        if (!sortAction) {\n            // We allow users to set the sort action ID to `null` if they want to use their\n            // own sorting mechanisms instead of relying on Chonky built-in sort.\n            return fileIds;\n        }\n\n        const prepareSortKeySelector = (selector: FileSortKeySelector) => (file: Nullable<FileData>) => selector(file);\n\n        const sortFunctions: {\n            asc?: (file: FileData) => any;\n            desc?: (file: FileData) => any;\n        }[] = [];\n\n        if (showFolderFirst) {\n            // If option is undefined (relevant actions is not enabled), we don't show\n            // folders first.\n            sortFunctions.push({\n                desc: prepareSortKeySelector(FileHelper.isDirectory),\n            });\n        }\n        if (sortAction.sortKeySelector) {\n            const configKeyName = sortOrder === SortOrder.ASC ? 'asc' : 'desc';\n            sortFunctions.push({\n                [configKeyName]: prepareSortKeySelector(sortAction.sortKeySelector),\n            });\n        }\n        if (sortFunctions.length === 0) return fileIds;\n\n        // We copy the array because `fast-sort` mutates it\n        const sortedFileIds = sort([...files])\n            .by(sortFunctions as any)\n            .map(file => (file ? file.id : null));\n        return sortedFileIds;\n    }\n);\nconst getSearcher = createSelector(\n    [makeGetFiles(getCleanFileIds)],\n    cleanFiles => new FuzzySearch(cleanFiles as FileData[], ['name'], { caseSensitive: false })\n);\nconst getSearchFilteredFileIds = createSelector(\n    [getCleanFileIds, getSearchString, getSearcher],\n    (cleanFileIds, searchString, searcher) =>\n        searchString ? searcher.search(searchString).map(f => f.id) : cleanFileIds\n);\nconst getHiddenFileIdMap = createSelector(\n    [getSearchFilteredFileIds, makeGetFiles(getCleanFileIds), makeGetOptionValue(OptionIds.ShowHiddenFiles)],\n    (searchFilteredFileIds, cleanFiles, showHiddenFiles) => {\n        const searchFilteredFileIdsSet = new Set(searchFilteredFileIds);\n        const hiddenFileIdMap: any = {};\n        cleanFiles.forEach(file => {\n            if (!file) return;\n            else if (!searchFilteredFileIdsSet.has(file.id)) {\n                // Hidden by seach\n                hiddenFileIdMap[file.id] = true;\n            } else if (!showHiddenFiles && FileHelper.isHidden(file)) {\n                // Hidden by options\n                hiddenFileIdMap[file.id] = true;\n            }\n        });\n        return hiddenFileIdMap;\n    }\n);\nconst getDisplayFileIds = createSelector(\n    [getSortedFileIds, getHiddenFileIdMap],\n    /** Returns files that will actually be shown to the user. */\n    (sortedFileIds, hiddenFileIdMap) => sortedFileIds.filter(id => !id || !hiddenFileIdMap[id])\n);\nconst getLastClickIndex = createSelector(\n    [_getLastClick, getSortedFileIds],\n    /** Returns the last click index after ensuring it is actually still valid. */\n    (lastClick, displayFileIds) => {\n        if (\n            !lastClick ||\n            lastClick.index > displayFileIds.length - 1 ||\n            lastClick.fileId != displayFileIds[lastClick.index]\n        ) {\n            return null;\n        }\n        return lastClick.index;\n    }\n);\n\nexport const selectors = {\n    // Raw selectors\n    getFileActionMap,\n    getOptionMap,\n    getFileMap,\n    getFileIds,\n    getCleanFileIds,\n    getSortActionId,\n    getSortOrder,\n    getSearchString,\n    _getLastClick,\n\n    // Memoized selectors\n    getSortedFileIds,\n    getSearcher,\n    getSearchFilteredFileIds,\n    getHiddenFileIdMap,\n    getDisplayFileIds,\n    getLastClickIndex,\n\n    // Parametrized selectors\n    makeGetAction,\n    makeGetOptionValue,\n    makeGetFiles,\n};\n\n// Selectors meant to be used outside of Redux code\nexport const getFileData = (state: RootState, fileId: Nullable<string>) =>\n    fileId ? selectFileMap(state)[fileId] : null;\nexport const getIsFileSelected = (state: RootState, file: FileData) => {\n    // !!! We deliberately don't use `FileHelper.isSelectable` here as we want to\n    //     reflect the state of Redux store accurately.\n    return !!selectSelectionMap(state)[file.id];\n};\nexport const getSelectedFiles = (state: RootState, ...filters: Nilable<FileFilter>[]) => {\n    const { fileMap, selectionMap } = state;\n\n    const selectedFiles = Object.keys(selectionMap).map(id => fileMap[id]);\n    const filteredSelectedFiles = filters.reduce(\n        (prevFiles, filter) => (filter ? prevFiles.filter(filter) : prevFiles),\n        selectedFiles\n    );\n    return filteredSelectedFiles;\n};\nexport const getSelectedFilesForAction = (state: RootState, fileActionId: string) =>\n    selectSelectedFilesForAction(fileActionId)(state);\n","import { Nilable } from 'tsdef';\n\nimport { ChonkyActions, DefaultFileActions, EssentialFileActions } from '../../action-definitions/index';\nimport { FileActionGroup, FileActionMenuItem } from '../../types/action-menus.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyThunk } from '../../types/redux.types';\nimport { SortOrder } from '../../types/sort.types';\nimport { sanitizeInputArray } from '../files-transforms';\nimport { reduxActions } from '../reducers';\nimport { selectCleanFileIds, selectFileMap, selectHiddenFileIdMap, selectSelectionMap } from '../selectors';\n\n/**\n * Merges multiple file action arrays into one while removing duplicates\n */\nconst mergeFileActionsArrays = (...fileActionArrays: FileAction[][]): FileAction[] => {\n    const seenActionIds = new Set<string>();\n    const addToSeen = (a: FileAction) => !!seenActionIds.add(a.id);\n    const wasNotSeen = (a: FileAction) => !seenActionIds.has(a.id);\n\n    const duplicateFreeArrays = fileActionArrays.map(arr => {\n        const duplicateFreeArray = arr.filter(wasNotSeen);\n        duplicateFreeArray.map(addToSeen);\n        return duplicateFreeArray;\n    });\n    return new Array<FileAction>().concat(...duplicateFreeArrays);\n};\n\nexport const thunkUpdateRawFileActions = (\n    rawFileActions: FileAction[] | any,\n    disableDefaultFileActions: Nilable<boolean | string[]>\n): ChonkyThunk => dispatch => {\n    const { sanitizedArray, errorMessages } = sanitizeInputArray('fileActions', rawFileActions);\n\n    // Add default actions unless user disabled them\n    let defaultActionsToAdd: FileAction[];\n    if (Array.isArray(disableDefaultFileActions)) {\n        const disabledActionIds = new Set(disableDefaultFileActions);\n        defaultActionsToAdd = DefaultFileActions.filter(action => !disabledActionIds.has(action.id));\n    } else if (disableDefaultFileActions) {\n        defaultActionsToAdd = [];\n    } else {\n        defaultActionsToAdd = DefaultFileActions;\n    }\n\n    const fileActions = mergeFileActionsArrays(sanitizedArray, EssentialFileActions, defaultActionsToAdd);\n    const optionDefaults: any = {};\n    fileActions.map(a => (a.option ? (optionDefaults[a.option.id] = a.option.defaultValue) : null));\n\n    dispatch(reduxActions.setRawFileActions(rawFileActions));\n    dispatch(reduxActions.setFileActionsErrorMessages(errorMessages));\n    dispatch(reduxActions.setFileActions(fileActions));\n    dispatch(reduxActions.setOptionDefaults(optionDefaults));\n    dispatch(thunkUpdateToolbarNContextMenuItems(fileActions));\n};\n\nexport const thunkUpdateToolbarNContextMenuItems = (fileActions: FileAction[]): ChonkyThunk => dispatch => {\n    const excludedToolbarFileActionIds = new Set<string>([\n        // TODO: Move decision to exclude actions somewhere else, as users' custom\n        //  components might not give these actions special treatment like Chonky does.\n        ChonkyActions.OpenParentFolder.id,\n    ]);\n\n    type SeenGroupMap = { [groupName: string]: FileActionGroup };\n\n    const toolbarItems: FileActionMenuItem[] = [];\n    const seenToolbarGroups: SeenGroupMap = {};\n\n    const contextMenuItems: FileActionMenuItem[] = [];\n    const seenContextMenuGroups: SeenGroupMap = {};\n\n    const getGroup = (itemArray: FileActionMenuItem[], seenMap: SeenGroupMap, groupName: string): FileActionGroup => {\n        if (seenMap[groupName]) return seenMap[groupName];\n        const group: FileActionGroup = { name: groupName, fileActionIds: [] };\n        itemArray.push(group);\n        seenMap[groupName] = group;\n        return group;\n    };\n\n    for (const action of fileActions) {\n        const button = action.button;\n        if (!button) continue;\n\n        if (button.toolbar && !excludedToolbarFileActionIds.has(action.id)) {\n            if (button.group) {\n                const group = getGroup(toolbarItems, seenToolbarGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                toolbarItems.push(action.id);\n            }\n        }\n\n        if (button.contextMenu) {\n            if (button.group) {\n                const group = getGroup(contextMenuItems, seenContextMenuGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                contextMenuItems.push(action.id);\n            }\n        }\n    }\n\n    dispatch(reduxActions.updateFileActionMenuItems([toolbarItems, contextMenuItems]));\n};\n\nexport const thunkUpdateDefaultFileViewActionId = (fileActionId: Nilable<string>): ChonkyThunk => (\n    dispatch,\n    getState\n) => {\n    const { fileActionMap } = getState();\n    const action = fileActionId ? fileActionMap[fileActionId] : null;\n    if (action && action.fileViewConfig) {\n        dispatch(reduxActions.setFileViewConfig(action.fileViewConfig));\n    }\n};\n\nexport const thunkActivateSortAction = (fileActionId: Nilable<string>): ChonkyThunk => (dispatch, getState) => {\n    if (!fileActionId) return;\n\n    const { sortActionId: oldActionId, sortOrder: oldOrder, fileActionMap } = getState();\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.sortKeySelector) return;\n\n    let order = oldOrder === SortOrder.ASC ? SortOrder.DESC : SortOrder.ASC;\n    if (oldActionId !== fileActionId) {\n        order = SortOrder.ASC;\n    }\n\n    dispatch(reduxActions.setSort({ actionId: fileActionId, order: order }));\n};\n\nexport const thunkApplySelectionTransform = (action: FileAction): ChonkyThunk => (dispatch, getState) => {\n    const selectionTransform = action.selectionTransform;\n    if (!selectionTransform) return;\n\n    const state = getState();\n    const prevSelection = new Set<string>(Object.keys(selectSelectionMap(state)));\n    const hiddenFileIds = new Set<string>(Object.keys(selectHiddenFileIdMap(state)));\n\n    const newSelection = selectionTransform({\n        prevSelection,\n        fileIds: selectCleanFileIds(state),\n        fileMap: selectFileMap(state),\n        hiddenFileIds,\n    });\n    if (!newSelection) return;\n\n    if (newSelection.size === 0) {\n        dispatch(reduxActions.clearSelection());\n    } else {\n        dispatch(reduxActions.selectFiles({ fileIds: Array.from(newSelection), reset: true }));\n    }\n};\n","import { MaybePromise, Undefinable } from 'tsdef';\n\nimport { FileActionData, FileActionState } from '../../types/action-handler.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyDispatch, ChonkyThunk } from '../../types/redux.types';\nimport { Logger } from '../../util/logger';\nimport { reduxActions } from '../reducers';\nimport {\n    selectContextMenuTriggerFile, selectExternalFileActionHandler, selectFileActionMap,\n    selectInstanceId, selectSelectedFiles\n} from '../selectors';\nimport { thunkActivateSortAction, thunkApplySelectionTransform } from './file-actions.thunks';\n\n/**\n * Thunk that dispatches actions to the external (user-provided) action handler.\n */\nexport const thunkDispatchFileAction = (data: FileActionData<FileAction>): ChonkyThunk => (_dispatch, getState) => {\n    Logger.debug(`FILE ACTION DISPATCH: [${data.id}]`, 'data:', data);\n    const state = getState();\n    const action = selectFileActionMap(state)[data.id];\n    const externalFileActionHandler = selectExternalFileActionHandler(state);\n    if (action) {\n        if (externalFileActionHandler) {\n            Promise.resolve(externalFileActionHandler(data)).catch(error =>\n                Logger.error(`User-defined file action handler threw an error: ${error.message}`)\n            );\n        }\n    } else {\n        Logger.warn(\n            `Internal components dispatched the \"${data.id}\" file action, but such ` + `action was not registered.`\n        );\n    }\n};\n\n/**\n * Thunk that is used by internal components (and potentially the user) to \"request\"\n * actions. When action is requested, Chonky \"prepares\" the action data by extracting it\n * from Redux state. Once action data is ready, Chonky executes some side effect and/or\n * dispatches the action to the external action handler.\n */\nexport const thunkRequestFileAction = <Action extends FileAction>(\n    action: Action,\n    payload: Action['__payloadType']\n): ChonkyThunk => (dispatch, getState) => {\n    Logger.debug(`FILE ACTION REQUEST: [${action.id}]`, 'action:', action, 'payload:', payload);\n    const state = getState();\n    const instanceId = selectInstanceId(state);\n\n    if (!selectFileActionMap(state)[action.id]) {\n        Logger.warn(\n            `The action \"${action.id}\" was requested, but it is not registered. The ` +\n                `action will still be dispatched, but this might indicate a bug in ` +\n                `the code. Please register your actions by passing them to ` +\n                `\"fileActions\" prop.`\n        );\n    }\n\n    // Determine files for the action if action requires selection\n    const selectedFiles = selectSelectedFiles(state);\n    const selectedFilesForAction = action.fileFilter ? selectedFiles.filter(action.fileFilter) : selectedFiles;\n    if (action.requiresSelection && selectedFilesForAction.length === 0) {\n        Logger.warn(\n            `Internal components requested the \"${action.id}\" file ` +\n                `action, but the selection for this action was empty. This ` +\n                `might a bug in the code of the presentational components.`\n        );\n        return;\n    }\n\n    const contextMenuTriggerFile = selectContextMenuTriggerFile(state);\n    const actionState: FileActionState<{}> = {\n        instanceId,\n        selectedFiles,\n        selectedFilesForAction,\n        contextMenuTriggerFile,\n    };\n\n    // === Update sort state if necessary\n    const sortKeySelector = action.sortKeySelector;\n    if (sortKeySelector) dispatch(thunkActivateSortAction(action.id));\n\n    // === Update file view state if necessary\n    const fileViewConfig = action.fileViewConfig;\n    if (fileViewConfig) dispatch(reduxActions.setFileViewConfig(fileViewConfig));\n\n    // === Update option state if necessary\n    const option = action.option;\n    if (option) dispatch(reduxActions.toggleOption(option.id));\n\n    // === Apply selection transform if necessary\n    const selectionTransform = action.selectionTransform;\n    if (selectionTransform) dispatch(thunkApplySelectionTransform(action));\n\n    // Apply the effect\n    const effect = action.effect;\n    let maybeEffectPromise: MaybePromise<boolean | undefined> = undefined;\n    if (effect) {\n        try {\n            maybeEffectPromise = effect({\n                action,\n                payload,\n                state: actionState,\n                reduxDispatch: dispatch,\n                getReduxState: getState,\n            }) as MaybePromise<boolean | undefined>;\n        } catch (error) {\n            Logger.error(`User-defined effect function for action ${action.id} threw an ` + `error: ${error.message}`);\n        }\n    }\n\n    // Dispatch the action to user code. Deliberately call it after all other\n    // operations are over.\n    return Promise.resolve(maybeEffectPromise)\n        .then(effectResult => {\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, effectResult);\n        })\n        .catch(error => {\n            Logger.error(\n                `User-defined effect function for action ${action.id} returned a ` +\n                    `promise that was rejected: ${error.message}`\n            );\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, undefined);\n        });\n};\n\nexport const triggerDispatchAfterEffect = <Action extends FileAction>(\n    dispatch: ChonkyDispatch,\n    data: FileActionData<Action>,\n    effectResult: Undefinable<boolean>\n) => {\n    const preventDispatch = effectResult === true;\n    if (!preventDispatch) dispatch(thunkDispatchFileAction(data));\n};\n","import filesize from 'filesize';\nimport { createContext, useContext, useMemo } from 'react';\nimport { IntlShape, useIntl } from 'react-intl';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyFormatters } from '../types/i18n.types';\nimport { FileHelper } from './file-helper';\n\nexport enum I18nNamespace {\n    Toolbar = 'toolbar',\n    FileList = 'fileList',\n    FileEntry = 'fileEntry',\n    FileContextMenu = 'contextMenu',\n\n    FileActions = 'actions',\n    FileActionGroups = 'actionGroups',\n}\n\nexport const getI18nId = (namespace: I18nNamespace, stringId: string): string =>\n    `chonky.${namespace}.${stringId}`;\n\nexport const getActionI18nId = (actionId: string, stringId: string): string =>\n    `chonky.${I18nNamespace.FileActions}.${actionId}.${stringId}`;\n\nexport const useLocalizedFileActionGroup = (groupName: string) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        return intl.formatMessage({\n            id: getI18nId(I18nNamespace.FileActionGroups, groupName),\n            defaultMessage: groupName,\n        });\n    }, [groupName, intl]);\n};\n\nexport const useLocalizedFileActionStrings = (action: Nullable<FileAction>) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        if (!action) {\n            return {\n                buttonName: '',\n                buttonTooltip: undefined,\n            };\n        }\n\n        const buttonName = intl.formatMessage({\n            id: getActionI18nId(action.id, 'button.name'),\n            defaultMessage: action.button?.name,\n        });\n\n        let buttonTooltip: Undefinable<string> = undefined;\n        if (action.button?.tooltip) {\n            // We only translate the tooltip if the original action has a tooltip.\n            buttonTooltip = intl.formatMessage({\n                id: getActionI18nId(action.id, 'button.tooltip'),\n                defaultMessage: action.button?.tooltip,\n            });\n        }\n\n        return {\n            buttonName,\n            buttonTooltip,\n        };\n    }, [action, intl]);\n};\n\nexport const useLocalizedFileEntryStrings = (file: Nullable<FileData>) => {\n    const intl = useIntl();\n    const formatters = useContext(ChonkyFormattersContext);\n    return useMemo(() => {\n        return {\n            fileModDateString: formatters.formatFileModDate(intl, file),\n            fileSizeString: formatters.formatFileSize(intl, file),\n        };\n    }, [file, formatters, intl]);\n};\n\nexport const defaultFormatters: ChonkyFormatters = {\n    formatFileModDate: (\n        intl: IntlShape,\n        file: Nullable<FileData>\n    ): Nullable<string> => {\n        const safeModDate = FileHelper.getModDate(file);\n        if (safeModDate) {\n            return intl.formatDate(safeModDate, {\n                dateStyle: 'medium',\n                timeStyle: 'short',\n            });\n        } else {\n            return null;\n        }\n    },\n    formatFileSize: (_intl: IntlShape, file: Nullable<FileData>): Nullable<string> => {\n        if (!file || typeof file.size !== 'number') return null;\n\n        const size = file.size;\n        const sizeData = filesize(size, { bits: false, output: 'object' }) as any;\n        if (sizeData.symbol === 'B') {\n            return `${Math.round(sizeData.value / 10) / 100.0} KB`;\n        } else if (sizeData.symbol === 'KB') {\n            return `${Math.round(sizeData.value)} ${sizeData.symbol}`;\n        }\n        return `${sizeData.value} ${sizeData.symbol}`;\n    },\n};\n\nexport const ChonkyFormattersContext = createContext(defaultFormatters);\n","// Used in React hooks to indicate empty deps are intentional.\nimport { MaybePromise, Nullable, WritableProps } from 'tsdef';\n\nimport { FileAction, FileActionEffect } from '../types/action.types';\nimport { Logger } from './logger';\n\n// Used in contexts that need to provide some default value for a function.\n// eslint-disable-next-line no-unused-vars,@typescript-eslint/no-unused-vars\nexport const NOOP_FUNCTION = (...args: any[]) => {\n    Logger.warn(\n        `The \"NOOP_FUNCTION\" from the constants module was called. ` +\n            `This can indicate a bug in one of the components. Supplied args:`,\n        args\n    );\n};\n\nexport const isPromise = <T>(value: MaybePromise<T> | any): value is Promise<T> => {\n    if (typeof value !== 'object' || !value) return false;\n    const then = (value as Promise<T>).then;\n    return then && typeof then === 'function';\n};\n\nexport const defineFileAction = <Action extends FileAction>(\n    action: Action,\n    effect?: FileActionEffect<FileAction>\n): WritableProps<Action> => {\n    if (action.__payloadType !== undefined && (action.hotkeys || action.button)) {\n        const errorMessage =\n            `Invalid definition was provided for file action \"${action.id}\". Actions ` +\n            `that specify hotkeys or buttons cannot define a payload type. If ` +\n            `your application requires this functionality, define two actions ` +\n            `and chain them using effects.`;\n        Logger.error(errorMessage);\n        throw new Error(errorMessage);\n    }\n\n    action.effect = effect;\n    return action;\n};\n\n/**\n * Recursively check the current element and the parent elements, going bottom-up.\n * Returns the first element to match the predicate, otherwise returns null if such\n * element is not found.\n */\nexport const findElementAmongAncestors = (\n    maybeElement: HTMLElement | any,\n    predicate: (maybeElement: HTMLElement | any) => boolean\n): Nullable<HTMLElement> => {\n    if (!maybeElement) return maybeElement;\n\n    if (predicate(maybeElement)) return maybeElement;\n\n    if (maybeElement.parentElement) {\n        return findElementAmongAncestors(maybeElement.parentElement, predicate);\n    }\n\n    return null;\n};\n\nexport const elementIsInsideButton = (buttonCandidate: HTMLElement | any): boolean => {\n    return !!findElementAmongAncestors(\n        buttonCandidate,\n        (element: any) => element.tagName && element.tagName.toLowerCase() === 'button'\n    );\n};\n\nexport const getValueOrFallback = <T extends any>(\n    value: T | undefined,\n    fallback: T,\n    desiredType?: 'boolean' | 'string' | 'number'\n): NonNullable<T> => {\n    if (desiredType) {\n        return (typeof value === desiredType ? value : fallback) as NonNullable<T>;\n    }\n    return (value !== undefined ? value : fallback) as NonNullable<T>;\n};\n","import { reduxActions } from '../redux/reducers';\nimport {\n    getFileData, getIsFileSelected, selectDisableSelection, selectors, selectParentFolder,\n    selectSelectionSize\n} from '../redux/selectors';\nimport { reduxThunks } from '../redux/thunks';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport {\n    ChangeSelectionPayload, EndDragNDropPayload, KeyboardClickFilePayload, MouseClickFilePayload,\n    MoveFilesPayload, OpenFileContextMenuPayload, OpenFilesPayload, StartDragNDropPayload\n} from '../types/action-payloads.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { Logger } from '../util/logger';\nimport { ChonkyActions } from './index';\n\nexport const EssentialActions = {\n    /**\n     * Action that is dispatched when the user clicks on a file entry using their mouse.\n     * Both single clicks and double clicks trigger this action.\n     */\n    MouseClickFile: defineFileAction(\n        {\n            id: 'mouse_click_file',\n            __payloadType: {} as MouseClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (payload.clickType === 'double') {\n                if (FileHelper.isOpenable(payload.file)) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n\n                            // To simulate Windows Explorer and Nautilus behaviour,\n                            // a double click on a file only opens that file even if\n                            // there is a selection.\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else {\n                // We're dealing with a single click\n\n                const disableSelection = selectDisableSelection(getReduxState());\n                if (FileHelper.isSelectable(payload.file) && !disableSelection) {\n                    if (payload.ctrlKey) {\n                        // Multiple selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: false,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    } else if (payload.shiftKey) {\n                        // Range selection\n                        const lastClickIndex = selectors.getLastClickIndex(getReduxState());\n                        if (typeof lastClickIndex === 'number') {\n                            // We have the index of the previous click\n                            let rangeStart = lastClickIndex;\n                            let rangeEnd = payload.fileDisplayIndex;\n                            if (rangeStart > rangeEnd) {\n                                [rangeStart, rangeEnd] = [rangeEnd, rangeStart];\n                            }\n\n                            reduxDispatch(reduxThunks.selectRange({ rangeStart, rangeEnd }));\n                        } else {\n                            // Since we can't do a range selection, do a\n                            // multiple selection\n                            reduxDispatch(\n                                reduxActions.toggleSelection({\n                                    fileId: payload.file.id,\n                                    exclusive: false,\n                                })\n                            );\n                            reduxDispatch(\n                                reduxActions.setLastClickIndex({\n                                    index: payload.fileDisplayIndex,\n                                    fileId: payload.file.id,\n                                })\n                            );\n                        }\n                    } else {\n                        // Exclusive selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: true,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    }\n                } else {\n                    if (!payload.ctrlKey && !disableSelection) {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                    reduxDispatch(\n                        reduxActions.setLastClickIndex({\n                            index: payload.fileDisplayIndex,\n                            fileId: payload.file.id,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when the user \"clicks\" on a file using their keyboard.\n     * Using Space and Enter keys counts as clicking.\n     */\n    KeyboardClickFile: defineFileAction(\n        {\n            id: 'keyboard_click_file',\n            __payloadType: {} as KeyboardClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            reduxDispatch(\n                reduxActions.setLastClickIndex({\n                    index: payload.fileDisplayIndex,\n                    fileId: payload.file.id,\n                })\n            );\n            if (payload.enterKey) {\n                // We only dispatch the Open Files action here when the selection is\n                // empty. Otherwise, `Enter` key presses are handled by the\n                // hotkey manager for the Open Files action.\n                if (selectSelectionSize(getReduxState()) === 0) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else if (payload.spaceKey && FileHelper.isSelectable(payload.file)) {\n                reduxDispatch(\n                    reduxActions.toggleSelection({\n                        fileId: payload.file.id,\n                        exclusive: payload.ctrlKey,\n                    })\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user starts dragging some file.\n     */\n    StartDragNDrop: defineFileAction(\n        {\n            id: 'start_drag_n_drop',\n            __payloadType: {} as StartDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            const file = payload.draggedFile;\n            if (!getIsFileSelected(getReduxState(), file)) {\n                if (FileHelper.isSelectable(file)) {\n                    reduxDispatch(\n                        reduxActions.selectFiles({\n                            fileIds: [file.id],\n                            reset: true,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user either cancels the drag & drop interaction,\n     * or drops a file somewhere.\n     */\n    EndDragNDrop: defineFileAction(\n        {\n            id: 'end_drag_n_drop',\n            __payloadType: {} as EndDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (getIsFileSelected(getReduxState(), payload.destination)) {\n                // Can't drop a selection into itself\n                return;\n            }\n\n            const { draggedFile, selectedFiles } = payload as EndDragNDropPayload;\n            const droppedFiles = selectedFiles.length > 0 ? selectedFiles : [draggedFile];\n            reduxDispatch(\n                thunkRequestFileAction(ChonkyActions.MoveFiles, {\n                    ...payload,\n                    files: droppedFiles,\n                })\n            );\n        }\n    ),\n    /**\n     * Action that is dispatched when user moves files from one folder to another,\n     * usually by dragging & dropping some files into the folder.\n     */\n    MoveFiles: defineFileAction({\n        id: 'move_files',\n        __payloadType: {} as MoveFilesPayload,\n    } as const),\n    /**\n     * Action that is dispatched when the selection changes for any reason.\n     */\n    ChangeSelection: defineFileAction({\n        id: 'change_selection',\n        __payloadType: {} as ChangeSelectionPayload,\n    } as const),\n    /**\n     * Action that is dispatched when user wants to open some files. This action is\n     * often triggered by other actions.\n     */\n    OpenFiles: defineFileAction({\n        id: 'open_files',\n        __payloadType: {} as OpenFilesPayload,\n    } as const),\n    /**\n     * Action that is triggered when user wants to go up a directory.\n     */\n    OpenParentFolder: defineFileAction(\n        {\n            id: 'open_parent_folder',\n            hotkeys: ['backspace'],\n            button: {\n                name: 'Go up a directory',\n                toolbar: true,\n                contextMenu: false,\n                icon: ChonkyIconName.openParentFolder,\n                iconOnly: true,\n            },\n        } as const,\n        ({ reduxDispatch, getReduxState }) => {\n            const parentFolder = selectParentFolder(getReduxState());\n            if (FileHelper.isOpenable(parentFolder)) {\n                reduxDispatch(\n                    thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                        targetFile: parentFolder,\n                        files: [parentFolder],\n                    })\n                );\n            } else {\n                Logger.warn(\n                    'Open parent folder effect was triggered  even though the parent folder' +\n                        ' is not openable. This indicates a bug in presentation components.'\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user opens the context menu, either by right click\n     * on something or using the context menu button on their keyboard.\n     */\n    OpenFileContextMenu: defineFileAction(\n        {\n            id: 'open_file_context_menu',\n            __payloadType: {} as OpenFileContextMenuPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            // TODO: Check if the context menu component is actually enabled. There is a\n            //  chance it doesn't matter if it is enabled or not - if it is not mounted,\n            //  the action will simply have no effect. It also allows users to provide\n            //  their own components - however, users could also flip the \"context menu\n            //  component mounted\" switch...\n            const triggerFile = getFileData(getReduxState(), payload.triggerFileId);\n            if (triggerFile) {\n                const fileSelected = getIsFileSelected(getReduxState(), triggerFile);\n                if (!fileSelected) {\n                    // If file is selected, we leave the selection as is. If it is not\n                    // selected, it means user right clicked the file with no selection.\n                    // We simulate the Windows Explorer/Nautilus behaviour of moving\n                    // selection to this file.\n                    if (FileHelper.isSelectable(triggerFile)) {\n                        reduxDispatch(\n                            reduxActions.selectFiles({\n                                fileIds: [payload.triggerFileId],\n                                reset: true,\n                            })\n                        );\n                    } else {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                }\n            }\n\n            reduxDispatch(\n                reduxActions.showContextMenu({\n                    triggerFileId: payload.triggerFileId,\n                    mouseX: payload.clientX - 2,\n                    mouseY: payload.clientY - 4,\n                })\n            );\n        }\n    ),\n};\n","import { ChonkyThunk } from '../../types/redux.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { reduxActions } from '../reducers';\nimport { selectors } from '../selectors';\n\nexport const reduxThunks = {\n    selectRange: (params: {\n        rangeStart: number;\n        rangeEnd: number;\n        reset?: boolean;\n    }): ChonkyThunk => (dispatch, getState) => {\n        const state = getState();\n        if (state.disableSelection) return;\n        const displayFileIds = selectors.getDisplayFileIds(state);\n        const fileIdsToSelect = displayFileIds\n            .slice(params.rangeStart, params.rangeEnd + 1)\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id])) as string[];\n        dispatch(\n            reduxActions.selectFiles({\n                fileIds: fileIdsToSelect,\n                reset: !!params.reset,\n            })\n        );\n    },\n};\n","import { Nullable } from 'tsdef';\n\nimport { selectFocusSearchInput } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileSelectionTransform } from '../types/action.types';\nimport { FileViewMode } from '../types/file-view.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { EssentialActions } from './essential';\nimport { OptionIds } from './option-ids';\n\nexport const DefaultActions = {\n    /**\n     * Action that can be used to open currently selected files.\n     */\n    OpenSelection: defineFileAction(\n        {\n            id: 'open_selection',\n            hotkeys: ['enter'],\n            requiresSelection: true,\n            fileFilter: FileHelper.isOpenable,\n            button: {\n                name: 'Open selection',\n                toolbar: true,\n                contextMenu: true,\n                group: 'Actions',\n                icon: ChonkyIconName.openFiles,\n            },\n        } as const,\n        ({ state, reduxDispatch }) => {\n            reduxDispatch(\n                thunkRequestFileAction(EssentialActions.OpenFiles, {\n                    files: state.selectedFilesForAction!,\n                })\n            );\n            return undefined;\n        }\n    ),\n    /**\n     * Action that selects all files.\n     */\n    SelectAllFiles: defineFileAction({\n        id: 'select_all_files',\n        hotkeys: ['ctrl+a'],\n        button: {\n            name: 'Select all files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.selectAllFiles,\n        },\n        selectionTransform: (({ fileIds, hiddenFileIds }) => {\n            const newSelection = new Set<string>();\n            fileIds.map(fileId => {\n                // We don't need to check if file is selectable because Chonky does\n                // it own checks internally.\n                if (!hiddenFileIds.has(fileId)) newSelection.add(fileId);\n            });\n            return newSelection;\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that clear the file selection.\n     */\n    ClearSelection: defineFileAction({\n        id: 'clear_selection',\n        hotkeys: ['escape'],\n        button: {\n            name: 'Clear selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.clearSelection,\n        },\n        selectionTransform: (({ prevSelection }) => {\n            if (prevSelection.size === 0) return null;\n            return new Set<string>();\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that enables List view.\n     */\n    EnableListView: defineFileAction({\n        id: 'enable_list_view',\n        fileViewConfig: {\n            mode: FileViewMode.List,\n            entryHeight: 30,\n        },\n        button: {\n            name: 'Switch to List view',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Compact view. Note that compact view is still\n     * experimental and should not be used in production.\n     */\n    EnableCompactView: defineFileAction({\n        // TODO: Don't enable until compact view is fully supported\n        id: 'enable_compact_view',\n        fileViewConfig: {\n            mode: FileViewMode.Compact,\n            entryHeight: 40,\n            entryWidth: 220,\n        },\n        button: {\n            name: 'Switch to Compact view',\n            toolbar: true,\n            icon: ChonkyIconName.compact,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Grid view.\n     */\n    EnableGridView: defineFileAction({\n        id: 'enable_grid_view',\n        fileViewConfig: { mode: FileViewMode.Grid, entryWidth: 165, entryHeight: 130 },\n        button: {\n            name: 'Switch to Grid view',\n            toolbar: true,\n            icon: ChonkyIconName.smallThumbnail,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.name`.\n     */\n    SortFilesByName: defineFileAction({\n        id: 'sort_files_by_name',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.name.toLowerCase() : undefined),\n        button: {\n            name: 'Sort by name',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.size`.\n     */\n    SortFilesBySize: defineFileAction({\n        id: 'sort_files_by_size',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.size : undefined),\n        button: {\n            name: 'Sort by size',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.modDate`.\n     */\n    SortFilesByDate: defineFileAction({\n        id: 'sort_files_by_date',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.modDate : undefined),\n        button: {\n            name: 'Sort by date',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether hidden files are shown to the user or not.\n     */\n    ToggleHiddenFiles: defineFileAction({\n        id: 'toggle_hidden_files',\n        hotkeys: ['ctrl+h'],\n        option: {\n            id: OptionIds.ShowHiddenFiles,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show hidden files',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether folders should appear before files regardless of\n     * current sort function.\n     */\n    ToggleShowFoldersFirst: defineFileAction({\n        id: 'toggle_show_folders_first',\n        option: {\n            id: OptionIds.ShowFoldersFirst,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show folders first',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that focuses the search input when it is dispatched.\n     */\n    FocusSearchInput: defineFileAction(\n        {\n            id: 'focus_search_input',\n            hotkeys: ['ctrl+f'],\n        } as const,\n        ({ getReduxState }) => {\n            const focusSearchInput = selectFocusSearchInput(getReduxState());\n            if (focusSearchInput) focusSearchInput();\n        }\n    ),\n    /**\n     * Action that enables List view.\n     */\n    ToggleDarkMode: defineFileAction({\n        id: 'enable_dark_mode',\n        option: {\n            id: OptionIds.DarkMode,\n            defaultValue: false,\n        },\n        button: {\n            name: 'Enable dark mode',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n};\n","import { ChonkyIconName } from '../types/icons.types';\nimport { defineFileAction } from '../util/helpers';\n\nexport const ExtraActions = {\n    /**\n     * Action that adds a button and shortcut to copy files.\n     */\n    CopyFiles: defineFileAction({\n        id: 'copy_files',\n        requiresSelection: true,\n        hotkeys: ['ctrl+c'],\n        button: {\n            name: 'Copy selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.copy,\n        },\n    } as const),\n    /**\n     * Action that adds a button to create a new folder.\n     */\n    CreateFolder: defineFileAction({\n        id: 'create_folder',\n        button: {\n            name: 'Create folder',\n            toolbar: true,\n            tooltip: 'Create a folder',\n            icon: ChonkyIconName.folderCreate,\n        },\n    } as const),\n    /**\n     * Action that adds a button to upload files.\n     */\n    UploadFiles: defineFileAction({\n        id: 'upload_files',\n        button: {\n            name: 'Upload files',\n            toolbar: true,\n            tooltip: 'Upload files',\n            icon: ChonkyIconName.upload,\n        },\n    } as const),\n    /**\n     * Action that adds a button to download files.\n     */\n    DownloadFiles: defineFileAction({\n        id: 'download_files',\n        requiresSelection: true,\n        button: {\n            name: 'Download files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.download,\n        },\n    } as const),\n    /**\n     * Action that adds a button and shortcut to delete files.\n     */\n    DeleteFiles: defineFileAction({\n        id: 'delete_files',\n        requiresSelection: true,\n        hotkeys: ['delete'],\n        button: {\n            name: 'Delete files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.trash,\n        },\n    } as const),\n};\n","import { DefaultActions } from './default';\nimport { EssentialActions } from './essential';\nimport { ExtraActions } from './extra';\n\nexport { OptionIds } from './option-ids';\n\nexport const ChonkyActions = {\n    ...EssentialActions,\n    ...DefaultActions,\n    ...ExtraActions,\n};\n\nexport const EssentialFileActions = [\n    ChonkyActions.MouseClickFile,\n    ChonkyActions.KeyboardClickFile,\n    ChonkyActions.StartDragNDrop,\n    ChonkyActions.EndDragNDrop,\n    ChonkyActions.MoveFiles,\n    ChonkyActions.ChangeSelection,\n    ChonkyActions.OpenFiles,\n    ChonkyActions.OpenParentFolder,\n    ChonkyActions.OpenFileContextMenu,\n];\n\nexport const DefaultFileActions = [\n    ChonkyActions.OpenSelection,\n    ChonkyActions.SelectAllFiles,\n    ChonkyActions.ClearSelection,\n    ChonkyActions.EnableListView,\n    // TODO: Don't enable until compact view is fully supported\n    // ChonkyActions.EnableCompactView,\n    ChonkyActions.EnableGridView,\n    ChonkyActions.SortFilesByName,\n    ChonkyActions.SortFilesBySize,\n    ChonkyActions.SortFilesByDate,\n    ChonkyActions.ToggleHiddenFiles,\n    ChonkyActions.ToggleShowFoldersFirst,\n    ChonkyActions.FocusSearchInput,\n];\n","import { ChonkyActions } from '../action-definitions/index';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\n\nexport const initialRootState: RootState = {\n    instanceId: 'CHONKY_INVALID_ID', // should be overwritten by preloaded state\n\n    externalFileActionHandler: null,\n\n    rawFileActions: [],\n    fileActionsErrorMessages: [],\n    fileActionMap: {},\n    fileActionIds: [],\n    toolbarItems: [],\n    contextMenuItems: [],\n\n    rawFolderChain: null,\n    folderChainErrorMessages: [],\n    folderChain: [],\n\n    rawFiles: [],\n    filesErrorMessages: [],\n    fileMap: {},\n    fileIds: [],\n    cleanFileIds: [],\n\n    sortedFileIds: [],\n    hiddenFileIdMap: {},\n\n    focusSearchInput: null,\n    searchString: '',\n    searchMode: 'currentFolder',\n\n    selectionMap: {},\n    disableSelection: false,\n\n    fileViewConfig: ChonkyActions.EnableGridView.fileViewConfig,\n\n    sortActionId: null,\n    sortOrder: SortOrder.ASC,\n\n    optionMap: {},\n\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableDragAndDrop: false,\n    clearSelectionOnOutsideClick: true,\n\n    lastClick: null,\n\n    contextMenuMounted: false,\n    contextMenuConfig: null,\n};\n","import { Nilable, Nullable } from 'tsdef';\n\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nimport { GenericFileActionHandler } from '../types/action-handler.types';\nimport { FileActionMenuItem } from '../types/action-menus.types';\nimport { FileAction, FileActionMap } from '../types/action.types';\nimport { ContextMenuConfig } from '../types/context-menu.types';\nimport { FileViewConfig } from '../types/file-view.types';\nimport { FileArray, FileIdTrueMap, FileMap } from '../types/file.types';\nimport { OptionMap } from '../types/options.types';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\nimport { ThumbnailGenerator } from '../types/thumbnails.types';\nimport { FileHelper } from '../util/file-helper';\nimport { sanitizeInputArray } from './files-transforms';\nimport { initialRootState } from './state';\n\nconst reducers = {\n    setExternalFileActionHandler(\n        state: RootState,\n        action: PayloadAction<Nilable<GenericFileActionHandler<FileAction>>>\n    ) {\n        state.externalFileActionHandler = action.payload ?? null;\n    },\n    setRawFileActions(state: RootState, action: PayloadAction<FileAction[] | any>) {\n        state.rawFileActions = action.payload;\n    },\n    setFileActionsErrorMessages(state: RootState, action: PayloadAction<string[]>) {\n        state.fileActionsErrorMessages = action.payload;\n    },\n    setFileActions(state: RootState, action: PayloadAction<FileAction[]>) {\n        const fileActionMap: FileActionMap = {};\n        action.payload.map(a => (fileActionMap[a.id] = a));\n        const fileIds = action.payload.map(a => a.id);\n\n        state.fileActionMap = fileActionMap as FileMap;\n        state.fileActionIds = fileIds;\n    },\n    updateFileActionMenuItems(state: RootState, action: PayloadAction<[FileActionMenuItem[], FileActionMenuItem[]]>) {\n        [state.toolbarItems, state.contextMenuItems] = action.payload;\n    },\n    setRawFolderChain(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFolderChain = action.payload;\n        const { sanitizedArray: folderChain, errorMessages } = sanitizeInputArray('folderChain', rawFolderChain);\n        state.rawFolderChain = rawFolderChain;\n        state.folderChain = folderChain;\n        state.folderChainErrorMessages = errorMessages;\n    },\n    setRawFiles(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFiles = action.payload;\n        const { sanitizedArray: files, errorMessages } = sanitizeInputArray('files', rawFiles);\n        state.rawFiles = rawFiles;\n        state.filesErrorMessages = errorMessages;\n\n        const fileMap: FileMap = {};\n        files.forEach(f => {\n            if (f) fileMap[f.id] = f;\n        });\n        const fileIds = files.map(f => (f ? f.id : null));\n        const cleanFileIds = fileIds.filter(f => !!f) as string[];\n\n        state.fileMap = fileMap;\n        state.fileIds = fileIds;\n        state.cleanFileIds = cleanFileIds;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (!fileMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setSortedFileIds(state: RootState, action: PayloadAction<Nullable<string>[]>) {\n        state.sortedFileIds = action.payload;\n    },\n    setHiddenFileIds(state: RootState, action: PayloadAction<FileIdTrueMap>) {\n        state.hiddenFileIdMap = action.payload;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (state.hiddenFileIdMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setFocusSearchInput(state: RootState, action: PayloadAction<Nullable<() => void>>) {\n        state.focusSearchInput = action.payload;\n    },\n    setSearchString(state: RootState, action: PayloadAction<string>) {\n        state.searchString = action.payload;\n    },\n    selectAllFiles(state: RootState) {\n        state.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (id ? (state.selectionMap[id] = true) : null));\n    },\n    selectFiles(state: RootState, action: PayloadAction<{ fileIds: string[]; reset: boolean }>) {\n        if (state.disableSelection) return;\n        if (action.payload.reset) state.selectionMap = {};\n        action.payload.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (state.selectionMap[id] = true));\n    },\n    toggleSelection(state: RootState, action: PayloadAction<{ fileId: string; exclusive: boolean }>) {\n        if (state.disableSelection) return;\n        const oldValue = !!state.selectionMap[action.payload.fileId];\n        if (action.payload.exclusive) state.selectionMap = {};\n        if (oldValue) delete state.selectionMap[action.payload.fileId];\n        else if (FileHelper.isSelectable(state.fileMap[action.payload.fileId])) {\n            state.selectionMap[action.payload.fileId] = true;\n        }\n    },\n    clearSelection(state: RootState) {\n        if (state.disableSelection) return;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setSelectionDisabled(state: RootState, action: PayloadAction<boolean>) {\n        state.disableSelection = action.payload;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setFileViewConfig(state: RootState, action: PayloadAction<FileViewConfig>) {\n        state.fileViewConfig = action.payload;\n    },\n    setSort(state: RootState, action: PayloadAction<{ actionId: string; order: SortOrder }>) {\n        state.sortActionId = action.payload.actionId;\n        state.sortOrder = action.payload.order;\n    },\n    setOptionDefaults(state: RootState, action: PayloadAction<OptionMap>) {\n        for (const optionId of Object.keys(action.payload)) {\n            if (optionId in state.optionMap) continue;\n            state.optionMap[optionId] = action.payload[optionId];\n        }\n    },\n    toggleOption(state: RootState, action: PayloadAction<string>) {\n        state.optionMap[action.payload] = !state.optionMap[action.payload];\n    },\n    setThumbnailGenerator(state: RootState, action: PayloadAction<Nullable<ThumbnailGenerator>>) {\n        state.thumbnailGenerator = action.payload;\n    },\n    setDoubleClickDelay(state: RootState, action: PayloadAction<number>) {\n        state.doubleClickDelay = action.payload;\n    },\n    setDisableDragAndDrop(state: RootState, action: PayloadAction<boolean>) {\n        state.disableDragAndDrop = action.payload;\n    },\n    setClearSelectionOnOutsideClick(state: RootState, action: PayloadAction<boolean>) {\n        state.clearSelectionOnOutsideClick = action.payload;\n    },\n    setLastClickIndex(state: RootState, action: PayloadAction<Nullable<{ index: number; fileId: string }>>) {\n        state.lastClick = action.payload;\n    },\n    setContextMenuMounted(state: RootState, action: PayloadAction<boolean>) {\n        state.contextMenuMounted = action.payload;\n    },\n    showContextMenu(state: RootState, action: PayloadAction<ContextMenuConfig>) {\n        state.contextMenuConfig = action.payload;\n    },\n    hideContextMenu(state: RootState) {\n        if (!state.contextMenuConfig) return;\n        state.contextMenuConfig = null;\n    },\n};\n\nexport const { actions: reduxActions, reducer: rootReducer } = createSlice({\n    name: 'root',\n    initialState: initialRootState,\n    reducers,\n});\n","import { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { configureStore } from '@reduxjs/toolkit';\n\nimport { RootState } from '../types/redux.types';\nimport { useStaticValue } from '../util/hooks-helpers';\nimport { rootReducer } from './reducers';\nimport { initialRootState } from './state';\nimport { useStoreWatchers } from './watchers';\n\nexport const useChonkyStore = (chonkyInstanceId: string) => {\n    const store = useStaticValue(() => {\n        const preloadedState: RootState = {\n            ...initialRootState,\n            instanceId: chonkyInstanceId,\n        };\n\n        return configureStore({\n            preloadedState: preloadedState as any,\n            reducer: rootReducer,\n            middleware: getDefaultMiddleware =>\n                getDefaultMiddleware({\n                    serializableCheck: false,\n                }),\n            devTools: { name: `chonky_${chonkyInstanceId}` },\n        });\n    });\n    useStoreWatchers(store);\n    return store;\n};\n\n/**\n * Hook that can be used with parametrized selectors.\n */\nexport const useParamSelector = <Args extends Array<any>, Value>(\n    parametrizedSelector: (...args: Args) => (state: RootState) => Value,\n    ...selectorParams: Args\n) => {\n    const selector = useCallback(\n        (state: RootState) => parametrizedSelector(...selectorParams)(state),\n        // eslint-disable-next-line\n        [parametrizedSelector, ...selectorParams]\n    );\n    return useSelector(selector);\n};\n\n/**\n * DTE - DispatchThunkEffect. This method is used to decrease code duplication in\n * main Chonky method.\n */\nexport const useDTE = <Args extends Array<any>>(actionCreator: (...args: Args) => any, ...selectorParams: Args) => {\n    const dispatch = useDispatch();\n    useEffect(\n        () => {\n            dispatch(actionCreator(...selectorParams));\n        },\n        // eslint-disable-next-line\n        [dispatch, actionCreator, ...selectorParams]\n    );\n};\n\nexport const usePropReduxUpdate = <Payload extends any>(actionCreator: (payload: Payload) => any, payload: Payload) => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(actionCreator(payload));\n    }, [dispatch, actionCreator, payload]);\n};\n","import { useEffect } from 'react';\nimport watch from 'redux-watch';\n\nimport { Store } from '@reduxjs/toolkit';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { RootState } from '../types/redux.types';\nimport { FileSelection } from '../types/selection.types';\nimport { selectSelectedFileIds, selectSelectionMap } from './selectors';\nimport { thunkRequestFileAction } from './thunks/dispatchers.thunks';\n\nexport const useStoreWatchers = (store: Store<RootState>) => {\n    useEffect(() => {\n        const selectionWatcher = watch(() => selectSelectionMap(store.getState()));\n        const onSelectionChange = (\n            newSelection: FileSelection,\n            oldSelection: FileSelection\n        ) => {\n            // We don't check for deep equality here as we expect the\n            // reducers to prevent all unnecessary updates.\n            if (newSelection === oldSelection) return;\n\n            // Notify users the selection has changed.\n            const selectedFilesIds = selectSelectedFileIds(store.getState());\n            const selection = new Set<string>(selectedFilesIds);\n            store.dispatch(\n                thunkRequestFileAction(ChonkyActions.ChangeSelection, {\n                    selection,\n                }) as any\n            );\n        };\n\n        const unsubscribeCallbacks = [\n            store.subscribe(selectionWatcher(onSelectionChange)),\n        ];\n        return () => {\n            for (const unsubscribe of unsubscribeCallbacks) unsubscribe();\n        };\n    }, [store]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { ChonkyIconProps } from '../../types/icons.types';\n\nexport const ChonkyIconPlaceholder: React.FC<ChonkyIconProps> = () => {\n    // This component should not be rendered unless the user has misconfigured Chonky\n    const title =\n        'No icon component found. Please follow Chonky installation instructions to ' +\n        'provide a pre-made icon component (or a custom icon).';\n    return <span title={title}></span>;\n};\n","import { ChonkyActions } from '../action-definitions/index';\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileBrowserProps } from '../types/file-browser.types';\n\nexport type ChonkyConfig = Pick<\n    FileBrowserProps,\n    | 'fileActions'\n    | 'onFileAction'\n    | 'thumbnailGenerator'\n    | 'doubleClickDelay'\n    | 'disableSelection'\n    | 'disableDefaultFileActions'\n    | 'disableDragAndDrop'\n    | 'disableDragAndDropProvider'\n    | 'defaultSortActionId'\n    | 'defaultFileViewActionId'\n    | 'clearSelectionOnOutsideClick'\n    | 'iconComponent'\n    | 'darkMode'\n    | 'i18n'\n>;\n\nexport const defaultConfig: ChonkyConfig = {\n    fileActions: null,\n    onFileAction: null,\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableSelection: false,\n    disableDefaultFileActions: false,\n    disableDragAndDrop: false,\n    disableDragAndDropProvider: false,\n    defaultSortActionId: ChonkyActions.SortFilesByName.id,\n    defaultFileViewActionId: ChonkyActions.EnableGridView.id,\n    clearSelectionOnOutsideClick: true,\n    iconComponent: ChonkyIconPlaceholder,\n    darkMode: false,\n    i18n: {},\n};\n\nexport const setChonkyDefaults = (config: Partial<ChonkyConfig>) => {\n    for (const key of Object.keys(defaultConfig)) {\n        if (key in config) {\n            defaultConfig[key as keyof ChonkyConfig] = config[\n                key as keyof ChonkyConfig\n            ] as any;\n        }\n    }\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2019\n * @license MIT\n */\n\nimport { createContext, ElementType, useMemo } from 'react';\n\nimport ExactTrie from 'exact-trie';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName, ChonkyIconProps, FileIconData } from '../types/icons.types';\n\nexport const ChonkyIconContext = createContext<ElementType<ChonkyIconProps>>(ChonkyIconPlaceholder);\n\nexport const VideoExtensions: string[] = [\n    '3g2',\n    '3gp',\n    '3gpp',\n    'asf',\n    'asx',\n    'avi',\n    'dvb',\n    'f4v',\n    'fli',\n    'flv',\n    'fvt',\n    'h261',\n    'h263',\n    'h264',\n    'jpgm',\n    'jpgv',\n    'jpm',\n    'm1v',\n    'm2v',\n    'm4u',\n    'm4v',\n    'mj2',\n    'mjp2',\n    'mk3d',\n    'mks',\n    'mkv',\n    'mng',\n    'mov',\n    'movie',\n    'mp4',\n    'mp4v',\n    'mpe',\n    'mpeg',\n    'mpg',\n    'mpg4',\n    'mxu',\n    'ogv',\n    'pyv',\n    'qt',\n    'smv',\n    'ts',\n    'uvh',\n    'uvm',\n    'uvp',\n    'uvs',\n    'uvu',\n    'uvv',\n    'uvvh',\n    'uvvm',\n    'uvvp',\n    'uvvs',\n    'uvvu',\n    'uvvv',\n    'viv',\n    'vob',\n    'webm',\n    'wm',\n    'wmv',\n    'wmx',\n    'wvx',\n];\nexport const ImageExtensions: string[] = [\n    '3ds',\n    'apng',\n    'azv',\n    'bmp',\n    'bmp',\n    'btif',\n    'cgm',\n    'cmx',\n    'djv',\n    'djvu',\n    'drle',\n    'dwg',\n    'dxf',\n    'emf',\n    'exr',\n    'fbs',\n    'fh',\n    'fh4',\n    'fh5',\n    'fh7',\n    'fhc',\n    'fits',\n    'fpx',\n    'fst',\n    'g3',\n    'gif',\n    'heic',\n    'heics',\n    'heif',\n    'heifs',\n    'ico',\n    'ico',\n    'ief',\n    'jls',\n    'jng',\n    'jp2',\n    'jpe',\n    'jpeg',\n    'jpf',\n    'jpg',\n    'jpg2',\n    'jpm',\n    'jpx',\n    'jxr',\n    'ktx',\n    'mdi',\n    'mmr',\n    'npx',\n    'pbm',\n    'pct',\n    'pcx',\n    'pcx',\n    'pgm',\n    'pic',\n    'png',\n    'pnm',\n    'ppm',\n    'psd',\n    'pti',\n    'ras',\n    'rgb',\n    'rlc',\n    'sgi',\n    'sid',\n    'sub',\n    'svg',\n    'svgz',\n    't38',\n    'tap',\n    'tfx',\n    'tga',\n    'tif',\n    'tiff',\n    'uvg',\n    'uvi',\n    'uvvg',\n    'uvvi',\n    'vtf',\n    'wbmp',\n    'wdp',\n    'webp',\n    'wmf',\n    'xbm',\n    'xif',\n    'xpm',\n    'xwd',\n];\nexport const AudioExtensions: string[] = [\n    '3gpp',\n    'aac',\n    'adp',\n    'aif',\n    'aifc',\n    'aiff',\n    'au',\n    'caf',\n    'dra',\n    'dts',\n    'dtshd',\n    'ecelp4800',\n    'ecelp7470',\n    'ecelp9600',\n    'eol',\n    'flac',\n    'kar',\n    'lvp',\n    'm2a',\n    'm3a',\n    'm3u',\n    'm4a',\n    'm4a',\n    'mid',\n    'midi',\n    'mka',\n    'mp2',\n    'mp2a',\n    'mp3',\n    'mp3',\n    'mp4a',\n    'mpga',\n    'oga',\n    'ogg',\n    'pya',\n    'ra',\n    'ra',\n    'ram',\n    'rip',\n    'rmi',\n    'rmp',\n    's3m',\n    'sil',\n    'snd',\n    'spx',\n    'uva',\n    'uvva',\n    'wav',\n    'wav',\n    'wav',\n    'wax',\n    'weba',\n    'wma',\n    'xm',\n];\nexport const ColorsLight: string[] = [\n    '#bbbbbb',\n    '#d65c5c',\n    '#d6665c',\n    '#d6705c',\n    '#d67a5c',\n    '#d6855c',\n    '#d68f5c',\n    '#d6995c',\n    '#d6a35c',\n    '#d6ad5c',\n    '#d6b85c',\n    '#d6c25c',\n    '#d6cc5c',\n    '#d6d65c',\n    '#ccd65c',\n    '#c2d65c',\n    '#b8d65c',\n    '#add65c',\n    '#a3d65c',\n    '#99d65c',\n    '#8fd65c',\n    '#85d65c',\n    '#7ad65c',\n    '#70d65c',\n    '#66d65c',\n    '#5cd65c',\n    '#5cd666',\n    '#5cd670',\n    '#5cd67a',\n    '#5cd685',\n    '#5cd68f',\n    '#5cd699',\n    '#5cd6a3',\n    '#5cd6ad',\n    '#5cd6b8',\n    '#5cd6c2',\n    '#5cd6cc',\n    '#5cd6d6',\n    '#5cccd6',\n    '#5cc2d6',\n    '#5cb8d6',\n    '#5cadd6',\n    '#5ca3d6',\n    '#5c99d6',\n    '#5c8fd6',\n    '#5c85d6',\n    '#5c7ad6',\n    '#5c70d6',\n    '#5c66d6',\n    '#5c5cd6',\n    '#665cd6',\n    '#705cd6',\n    '#7a5cd6',\n    '#855cd6',\n    '#8f5cd6',\n    '#995cd6',\n    '#a35cd6',\n    '#ad5cd6',\n    '#b85cd6',\n    '#c25cd6',\n    '#cc5cd6',\n    '#d65cd6',\n    '#d65ccc',\n    '#d65cc2',\n    '#d65cb8',\n    '#d65cad',\n    '#d65ca3',\n    '#d65c99',\n    '#d65c8f',\n    '#d65c85',\n    '#d65c7a',\n    '#d65c70',\n    '#d65c66',\n];\nexport const ColorsDark: string[] = [\n    '#777',\n    '#8f3d3d',\n    '#8f443d',\n    '#8f4b3d',\n    '#8f523d',\n    '#8f583d',\n    '#8f5f3d',\n    '#8f663d',\n    '#8f6d3d',\n    '#8f743d',\n    '#8f7a3d',\n    '#8f813d',\n    '#8f883d',\n    '#8f8f3d',\n    '#888f3d',\n    '#818f3d',\n    '#7a8f3d',\n    '#748f3d',\n    '#6d8f3d',\n    '#668f3d',\n    '#5f8f3d',\n    '#588f3d',\n    '#528f3d',\n    '#4b8f3d',\n    '#448f3d',\n    '#3d8f3d',\n    '#3d8f44',\n    '#3d8f4b',\n    '#3d8f52',\n    '#3d8f58',\n    '#3d8f5f',\n    '#3d8f66',\n    '#3d8f6d',\n    '#3d8f74',\n    '#3d8f7a',\n    '#3d8f81',\n    '#3d8f88',\n    '#3d8f8f',\n    '#3d888f',\n    '#3d818f',\n    '#3d7a8f',\n    '#3d748f',\n    '#3d6d8f',\n    '#3d668f',\n    '#3d5f8f',\n    '#3d588f',\n    '#3d528f',\n    '#3d4b8f',\n    '#3d448f',\n    '#3d3d8f',\n    '#443d8f',\n    '#4b3d8f',\n    '#523d8f',\n    '#583d8f',\n    '#5f3d8f',\n    '#663d8f',\n    '#6d3d8f',\n    '#743d8f',\n    '#7a3d8f',\n    '#813d8f',\n    '#883d8f',\n    '#8f3d8f',\n    '#8f3d88',\n    '#8f3d81',\n    '#8f3d7a',\n    '#8f3d74',\n    '#8f3d6d',\n    '#8f3d66',\n    '#8f3d5f',\n    '#8f3d58',\n    '#8f3d52',\n    '#8f3d4b',\n    '#8f3d44',\n];\n\nconst getIconTrie = () => {\n    let colourIndex = 0;\n    const step = 5;\n\n    const IconsToExtensions = [\n        // Generic file types\n        [ChonkyIconName.license, ['license']],\n        [ChonkyIconName.config, ['sfk', 'ini', 'yml', 'toml', 'iml']],\n        [ChonkyIconName.model, ['3ds', 'obj', 'ply', 'fbx']],\n        [ChonkyIconName.database, ['csv', 'json', 'sql', 'sqlite', 'sqlite3', 'npy', 'npz', 'rec', 'idx', 'hdf5']],\n        [ChonkyIconName.text, ['txt', 'md', 'mdx']],\n        [ChonkyIconName.archive, ['zip', 'rar', 'tar', 'tar.gz', '7z']],\n        [ChonkyIconName.image, ImageExtensions],\n        [ChonkyIconName.video, VideoExtensions],\n        [ChonkyIconName.code, ['html', 'php', 'css', 'sass', 'scss', 'less', 'cpp', 'h', 'hpp', 'c', 'xml']],\n        [ChonkyIconName.info, ['bib', 'readme', 'nfo']],\n        [ChonkyIconName.key, ['pem', 'pub']],\n        [ChonkyIconName.lock, ['lock', 'lock.json', 'shrinkwrap.json']],\n        [ChonkyIconName.music, AudioExtensions],\n        [ChonkyIconName.terminal, ['run', 'sh']],\n        [ChonkyIconName.trash, ['.Trashes']],\n        [ChonkyIconName.users, ['authors', 'contributors']],\n\n        // OS file types\n        [ChonkyIconName.linux, ['AppImage']],\n        [ChonkyIconName.ubuntu, ['deb']],\n        [ChonkyIconName.windows, ['exe']],\n\n        // Programming language file types\n        [ChonkyIconName.rust, ['rs', 'rlib']],\n        [ChonkyIconName.python, ['py', 'ipynb']],\n        [ChonkyIconName.nodejs, ['js', 'jsx', 'ts', 'tsx', 'd.ts']],\n        [ChonkyIconName.php, ['php']],\n\n        // Development tools file types\n        [ChonkyIconName.git, ['.gitignore']],\n\n        // Brands file types\n        [ChonkyIconName.adobe, ['psd']],\n\n        // Other program file types\n        [ChonkyIconName.pdf, ['pdf']],\n        [ChonkyIconName.excel, ['xls', 'xlsx']],\n        [ChonkyIconName.word, ['doc', 'docx', 'odt']],\n        [ChonkyIconName.flash, ['swf']],\n    ] as const;\n\n    const exactTrie = new ExactTrie({ ignoreCase: true });\n    for (const pair of IconsToExtensions) {\n        const [icon, extensions] = pair;\n\n        for (let i = 0; i < extensions.length; ++i) {\n            colourIndex += step;\n            const colorCode = (colourIndex % (ColorsLight.length - 1)) + 1;\n            const iconData: FileIconData = {\n                icon,\n                colorCode,\n            };\n            exactTrie.put(extensions[i], iconData, true);\n        }\n    }\n\n    return exactTrie;\n};\n\nconst iconTrie = getIconTrie();\n\nexport const useIconData = (file: Nullable<FileData>): FileIconData => {\n    return useMemo(() => {\n        if (!file) return { icon: ChonkyIconName.loading, colorCode: 0 };\n        if (file.isDir === true) return { icon: ChonkyIconName.folder, colorCode: 0 };\n\n        const match = iconTrie.getWithCheckpoints(file.name, '.', true);\n        return match ? match : { icon: ChonkyIconName.file, colorCode: 32 };\n    }, [file]);\n};\n","import { Theme as MuiTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\nimport { createUseStyles } from 'react-jss';\nimport { DeepPartial } from 'tsdef';\n\nexport const lightTheme = {\n    colors: {\n        debugRed: '#fabdbd',\n        debugBlue: '#bdd8fa',\n        debugGreen: '#d2fabd',\n        debugPurple: '#d2bdfa',\n        debugYellow: '#fae9bd',\n\n        textActive: '#09f',\n    },\n\n    fontSizes: {\n        rootPrimary: 15,\n    },\n\n    margins: {\n        rootLayoutMargin: 8,\n    },\n\n    toolbar: {\n        size: 30,\n        lineHeight: '30px', // `px` suffix is required for `line-height` fields to work\n        fontSize: 15,\n        buttonRadius: 4,\n    },\n\n    dnd: {\n        canDropColor: 'green',\n        cannotDropColor: 'red',\n        canDropMask: 'rgba(180, 235, 180, 0.75)',\n        cannotDropMask: 'rgba(235, 180, 180, 0.75)',\n        fileListCanDropMaskOne: 'rgba(180, 235, 180, 0.1)',\n        fileListCanDropMaskTwo: 'rgba(180, 235, 180, 0.2)',\n        fileListCannotDropMaskOne: 'rgba(235, 180, 180, 0.1)',\n        fileListCannotDropMaskTwo: 'rgba(235, 180, 180, 0.2)',\n    },\n\n    dragLayer: {\n        border: 'solid 2px #09f',\n        padding: '7px 10px',\n        borderRadius: 2,\n    },\n\n    fileList: {\n        desktopGridGutter: 8,\n        mobileGridGutter: 5,\n    },\n\n    gridFileEntry: {\n        childrenCountSize: '1.6em',\n        iconColorFocused: '#000',\n        iconSize: '2.4em',\n        iconColor: '#fff',\n        borderRadius: 5,\n        fontSize: 14,\n\n        fileColorTint: 'rgba(255, 255, 255, 0.4)',\n        folderBackColorTint: 'rgba(255, 255, 255, 0.1)',\n        folderFrontColorTint: 'rgba(255, 255, 255, 0.4)',\n    },\n\n    listFileEntry: {\n        propertyFontSize: 14,\n        iconFontSize: '1.1em',\n        iconBorderRadius: 5,\n        fontSize: 14,\n    },\n};\n\nexport type ChonkyTheme = typeof lightTheme;\n\nexport const darkThemeOverride: DeepPartial<ChonkyTheme> = {\n    gridFileEntry: {\n        fileColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderBackColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderFrontColorTint: 'rgba(50, 50, 50, 0.15)',\n    },\n};\n\nexport const mobileThemeOverride: DeepPartial<ChonkyTheme> = {\n    fontSizes: {\n        rootPrimary: 13,\n    },\n    margins: {\n        rootLayoutMargin: 4,\n    },\n    toolbar: {\n        size: 28,\n        lineHeight: '28px',\n        fontSize: 13,\n    },\n    gridFileEntry: {\n        fontSize: 13,\n    },\n    listFileEntry: {\n        propertyFontSize: 12,\n        iconFontSize: '1em',\n        fontSize: 13,\n    },\n};\n\nexport const useIsMobileBreakpoint = () => {\n    return useMediaQuery('(max-width:480px)');\n};\n\nexport const getStripeGradient = (colorOne: string, colorTwo: string) =>\n    'repeating-linear-gradient(' +\n    '45deg,' +\n    `${colorOne},` +\n    `${colorOne} 10px,` +\n    `${colorTwo} 0,` +\n    `${colorTwo} 20px` +\n    ')';\n\nexport const makeLocalChonkyStyles = <C extends string = string>(\n    styles: (theme: ChonkyTheme & MuiTheme) => any\n    // @ts-ignore\n): any => createUseStyles<ChonkyTheme, C>(styles);\n\nexport const makeGlobalChonkyStyles = <C extends string = string>(\n    makeStyles: (theme: ChonkyTheme & MuiTheme) => any\n) => {\n    const selectorMapping = {};\n    const makeGlobalStyles = (theme: ChonkyTheme) => {\n        const localStyles = makeStyles(theme as any);\n        const globalStyles = {};\n        const localSelectors = Object.keys(localStyles);\n        localSelectors.map(localSelector => {\n            const globalSelector = `chonky-${localSelector}`;\n            const jssSelector = `@global .${globalSelector}`;\n            // @ts-ignore\n            globalStyles[jssSelector] = localStyles[localSelector];\n            // @ts-ignore\n            selectorMapping[localSelector] = globalSelector;\n        });\n        return globalStyles;\n    };\n\n    // @ts-ignore\n    const useStyles = createUseStyles<ChonkyTheme, C>(makeGlobalStyles as any);\n    return (...args: any[]): any => {\n        const styles = useStyles(...args);\n        const classes = {};\n        Object.keys(selectorMapping).map(localSelector => {\n            // @ts-ignore\n            classes[localSelector] = selectorMapping[localSelector];\n        });\n        return { ...classes, ...styles };\n    };\n};\n\nexport const important = <T>(value: T) => [value, '!important'];\n\nexport const c = classnames;\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { initialRootState } from '../../redux/state';\nimport { useDTE, usePropReduxUpdate } from '../../redux/store';\nimport {\n    thunkActivateSortAction, thunkUpdateDefaultFileViewActionId, thunkUpdateRawFileActions\n} from '../../redux/thunks/file-actions.thunks';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { useFileBrowserHandle } from '../../util/file-browser-handle';\nimport { getValueOrFallback } from '../../util/helpers';\n\nexport const ChonkyBusinessLogicInner = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        // ==== Update Redux state\n        usePropReduxUpdate(reduxActions.setRawFiles, props.files ?? initialRootState.rawFiles);\n        usePropReduxUpdate(reduxActions.setRawFolderChain, props.folderChain);\n        useDTE(\n            thunkUpdateRawFileActions,\n            getValueOrFallback(props.fileActions, defaultConfig.fileActions),\n            getValueOrFallback(props.disableDefaultFileActions, defaultConfig.disableDefaultFileActions)\n        );\n        useDTE(\n            reduxActions.setExternalFileActionHandler,\n            getValueOrFallback(props.onFileAction, defaultConfig.onFileAction) as any\n        );\n        useDTE(\n            reduxActions.setSelectionDisabled,\n            getValueOrFallback(props.disableSelection, defaultConfig.disableSelection, 'boolean')\n        );\n        useDTE(\n            thunkActivateSortAction,\n            getValueOrFallback(props.defaultSortActionId, defaultConfig.defaultSortActionId)\n        );\n        useDTE(\n            thunkUpdateDefaultFileViewActionId,\n            getValueOrFallback(props.defaultFileViewActionId, defaultConfig.defaultFileViewActionId, 'string')\n        );\n\n        useDTE(\n            reduxActions.setThumbnailGenerator,\n            getValueOrFallback(props.thumbnailGenerator, defaultConfig.thumbnailGenerator)\n        );\n        useDTE(\n            reduxActions.setDoubleClickDelay,\n            getValueOrFallback(props.doubleClickDelay, defaultConfig.doubleClickDelay, 'number')\n        );\n        useDTE(\n            reduxActions.setDisableDragAndDrop,\n            getValueOrFallback(props.disableDragAndDrop, defaultConfig.disableDragAndDrop, 'boolean')\n        );\n        useDTE(\n            reduxActions.setClearSelectionOnOutsideClick,\n            getValueOrFallback(\n                props.clearSelectionOnOutsideClick,\n                defaultConfig.clearSelectionOnOutsideClick,\n                'boolean'\n            )\n        );\n\n        // ==== Setup the imperative handle for external use\n        useFileBrowserHandle(ref);\n\n        return null;\n    })\n);\nChonkyBusinessLogicInner.displayName = 'ChonkyBusinessLogicInner';\n\nexport const ChonkyBusinessLogic = React.memo(ChonkyBusinessLogicInner);\nChonkyBusinessLogic.displayName = 'ChonkyBusinessLogic';\n","import React, { useImperativeHandle } from 'react';\nimport { useDispatch, useStore } from 'react-redux';\n\nimport { reduxActions } from '../redux/reducers';\nimport { selectSelectionMap } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileAction } from '../types/action.types';\nimport { FileBrowserHandle } from '../types/file-browser.types';\nimport { RootState } from '../types/redux.types';\n\nexport const useFileBrowserHandle = (ref: React.Ref<FileBrowserHandle>) => {\n    const store = useStore<RootState>();\n    const dispatch = useDispatch();\n\n    useImperativeHandle(\n        ref,\n        () => ({\n            getFileSelection(): Set<string> {\n                const selectionMap = selectSelectionMap(store.getState());\n                const selectionSet = new Set(Object.keys(selectionMap));\n                return selectionSet;\n            },\n            setFileSelection(selection, reset = true): void {\n                const fileIds = Array.from(selection);\n                dispatch(reduxActions.selectFiles({ fileIds, reset }));\n            },\n            requestFileAction<Action extends FileAction>(\n                action: Action,\n                payload: Action['__payloadType']\n            ): Promise<void> {\n                return Promise.resolve(\n                    dispatch(thunkRequestFileAction(action, payload))\n                ).then();\n            },\n        }),\n        [store, dispatch]\n    );\n};\n","import { useCallback, useContext } from 'react';\nimport { DndContext, useDrag, useDrop } from 'react-dnd';\n\nexport const useDndContextAvailable = () => {\n    const dndContext = useContext(DndContext);\n    const { dragDropManager } = dndContext;\n    return !!dragDropManager;\n};\n\nexport const useDragIfAvailable: typeof useDrag = (...args) => {\n    // This is an ugly hack to make `useDrag` not throw if a `DndContext` is not available.\n    // See: https://github.com/react-dnd/react-dnd/issues/2212\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrag = dndContextAvailable ? useDrag : mockHook;\n    return useHook(...args);\n};\n\nexport const useDropIfAvailable: typeof useDrop = (...args) => {\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrop = dndContextAvailable ? useDrop : mockHook;\n    return useHook(...args);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useDragLayer } from 'react-dnd';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyDndFileEntryItem, ChonkyDndFileEntryType } from '../../types/dnd.types';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileListDragLayerProps {}\n\nconst layerStyles: React.CSSProperties = {\n    position: 'fixed',\n    pointerEvents: 'none',\n    zIndex: 100,\n    left: 0,\n    top: 0,\n    width: '100%',\n    height: '100%',\n};\nconst getItemStyles = (\n    initialCursorOffset: Nullable<{ x: number; y: number }>,\n    initialFileOffset: Nullable<{ x: number; y: number }>,\n    currentFileOffset: Nullable<{ x: number; y: number }>\n) => {\n    if (!initialCursorOffset || !initialFileOffset || !currentFileOffset) {\n        return {\n            display: 'none',\n        };\n    }\n    const x = initialCursorOffset.x + (currentFileOffset.x - initialFileOffset.x);\n    const y = initialCursorOffset.y + (currentFileOffset.y - initialFileOffset.y);\n    const transform = `translate(${x}px, ${y}px)`;\n    return {\n        transform,\n        WebkitTransform: transform,\n    };\n};\n\nexport const DnDFileListDragLayer: React.FC<DnDFileListDragLayerProps> = () => {\n    const classes = useStyles();\n\n    const {\n        itemType,\n        item,\n        initialCursorOffset,\n        initialFileOffset,\n        currentFileOffset,\n        isDragging,\n    } = useDragLayer(monitor => ({\n        item: monitor.getItem() as ChonkyDndFileEntryItem,\n        itemType: monitor.getItemType(),\n        initialCursorOffset: monitor.getInitialClientOffset(),\n        initialFileOffset: monitor.getInitialSourceClientOffset(),\n        currentFileOffset: monitor.getSourceClientOffset(),\n        isDragging: monitor.isDragging(),\n    }));\n    if (!isDragging || itemType !== ChonkyDndFileEntryType || !item.payload) {\n        return null;\n    }\n\n    const selectionSize = item.payload.selectedFiles.length;\n    return (\n        <div style={layerStyles}>\n            <div\n                style={getItemStyles(\n                    initialCursorOffset,\n                    initialFileOffset,\n                    currentFileOffset\n                )}\n            >\n                <div className={classes.fileDragPreview}>\n                    <b>{item.payload.draggedFile.name}</b>\n                    {selectionSize > 1 && (\n                        <>\n                            {' and '}\n                            <strong>\n                                {selectionSize - 1} other file\n                                {selectionSize - 1 !== 1 ? 's' : ''}\n                            </strong>\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileDragPreview: {\n        boxShadow: `2px 2px 5px ${theme.palette.divider}`,\n        backgroundColor: theme.palette.background.default,\n        borderRadius: theme.dragLayer.borderRadius,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        padding: theme.dragLayer.padding,\n        border: theme.dragLayer.border,\n        display: 'inline-block',\n    },\n}));\n","import { DragObjectWithType } from 'react-dnd';\nimport { Nilable } from 'tsdef';\n\nimport { StartDragNDropPayload } from './action-payloads.types';\nimport { FileData } from './file.types';\n\nexport interface ChonkyDndDropResult {\n    dropTarget: Nilable<FileData> | any;\n    dropEffect: 'move' | 'copy';\n}\n\nexport type ChonkyDndFileEntryItem = DragObjectWithType & {\n    payload: StartDragNDropPayload;\n};\nexport const ChonkyDndFileEntryType = 'dnd-chonky-file-entry';\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport hotkeys from 'hotkeys-js';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\n\nexport interface HotkeyListenerProps {\n    fileActionId: string;\n}\n\nexport const HotkeyListener: React.FC<HotkeyListenerProps> = React.memo(props => {\n    const { fileActionId } = props;\n\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n\n    useEffect(() => {\n        if (!fileAction || !fileAction.hotkeys || fileAction.hotkeys.length === 0) {\n            return;\n        }\n\n        const hotkeysStr = fileAction.hotkeys.join(',');\n        const hotkeyCallback = (event: KeyboardEvent) => {\n            event.preventDefault();\n            dispatch(thunkRequestFileAction(fileAction, undefined));\n        };\n        hotkeys(hotkeysStr, hotkeyCallback);\n        return () => hotkeys.unbind(hotkeysStr, hotkeyCallback);\n    }, [dispatch, fileAction]);\n\n    return null;\n});\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { reduxActions } from '../../redux/reducers';\nimport {\n    selectClearSelectionOnOutsideClick,\n    selectFileActionIds,\n    selectIsDnDDisabled,\n} from '../../redux/selectors';\nimport { useDndContextAvailable } from '../../util/dnd-fallback';\nimport { elementIsInsideButton } from '../../util/helpers';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuTrigger } from '../external/FileContextMenu-hooks';\nimport { DnDFileListDragLayer } from '../file-list/DnDFileListDragLayer';\nimport { HotkeyListener } from './HotkeyListener';\n\nexport interface ChonkyPresentationLayerProps {}\n\nexport const ChonkyPresentationLayer: React.FC<ChonkyPresentationLayerProps> = ({\n    children,\n}) => {\n    const dispatch = useDispatch();\n    const fileActionIds = useSelector(selectFileActionIds);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n    const clearSelectionOnOutsideClick = useSelector(\n        selectClearSelectionOnOutsideClick\n    );\n\n    // Deal with clicks outside of Chonky\n    const handleClickAway = useCallback(\n        (event: React.MouseEvent<Document>) => {\n            if (!clearSelectionOnOutsideClick || elementIsInsideButton(event.target)) {\n                // We only clear out the selection on outside click if the click target\n                // was not a button. We don't want to clear out the selection when a\n                // button is clicked because Chonky users might want to trigger some\n                // selection-related action on that button click.\n                return;\n            }\n            dispatch(reduxActions.clearSelection());\n        },\n        [dispatch, clearSelectionOnOutsideClick]\n    );\n\n    // Generate necessary components\n    const hotkeyListenerComponents = useMemo(\n        () =>\n            fileActionIds.map(actionId => (\n                <HotkeyListener\n                    key={`file-action-listener-${actionId}`}\n                    fileActionId={actionId}\n                />\n            )),\n        [fileActionIds]\n    );\n\n    const dndContextAvailable = useDndContextAvailable();\n    const showContextMenu = useContextMenuTrigger();\n\n    const classes = useStyles();\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n            <Box className={classes.chonkyRoot} onContextMenu={showContextMenu}>\n                {!dndDisabled && dndContextAvailable && <DnDFileListDragLayer />}\n                {hotkeyListenerComponents}\n                {children ? children : null}\n            </Box>\n        </ClickAwayListener>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    chonkyRoot: {\n        backgroundColor: theme.palette.background.paper,\n        border: `solid 1px ${theme.palette.divider}`,\n        padding: theme.margins.rootLayoutMargin,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        touchAction: 'manipulation', // Disabling zoom on double tap\n        fontFamily: 'sans-serif',\n        flexDirection: 'column',\n        boxSizing: 'border-box',\n        textAlign: 'left',\n        borderRadius: 4,\n        display: 'flex',\n        height: '100%',\n\n        // Disabling select\n        webkitTouchCallout: 'none',\n        webkitUserSelect: 'none',\n        mozUserSelect: 'none',\n        msUserSelect: 'none',\n        userSelect: 'none',\n    },\n}));\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuMounted } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { findElementAmongAncestors } from '../../util/helpers';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\n\nexport const findClosestChonkyFileId = (\n    element: HTMLElement | any\n): Nullable<string> => {\n    const fileEntryWrapperDiv = findElementAmongAncestors(\n        element,\n        (element: any) =>\n            element.tagName &&\n            element.tagName.toLowerCase() === 'div' &&\n            element.dataset &&\n            element.dataset.chonkyFileId\n    );\n    return fileEntryWrapperDiv ? fileEntryWrapperDiv.dataset.chonkyFileId! : null;\n};\n\nexport const useContextMenuTrigger = () => {\n    const dispatch = useDispatch();\n    const contextMenuMountedRef = useInstanceVariable(\n        useSelector(selectContextMenuMounted)\n    );\n    return useCallback(\n        (event: React.MouseEvent<HTMLDivElement>) => {\n            // Use default browser context menu when Chonky context menu component\n            // is not mounted.\n            if (!contextMenuMountedRef.current) return;\n            // Users can use Alt+Right Click to bring up browser's default\n            // context menu instead of Chonky's context menu.\n            if (event.altKey) return;\n\n            event.preventDefault();\n\n            const triggerFileId = findClosestChonkyFileId(event.target);\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.OpenFileContextMenu, {\n                    clientX: event.clientX,\n                    clientY: event.clientY,\n                    triggerFileId,\n                })\n            );\n        },\n        [contextMenuMountedRef, dispatch]\n    );\n};\n\nexport const useContextMenuDismisser = () => {\n    const dispatch = useDispatch();\n    return useCallback(() => dispatch(reduxActions.hideContextMenu()), [dispatch]);\n};\n","import {\n    createMuiTheme,\n    ThemeProvider as MuiThemeProvider,\n} from '@material-ui/core/styles';\nimport merge from 'deepmerge';\nimport React, { ReactNode, useMemo } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { IntlProvider } from 'react-intl';\nimport { ThemeProvider } from 'react-jss';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport shortid from 'shortid';\n\nimport { useChonkyStore } from '../../redux/store';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { getValueOrFallback } from '../../util/helpers';\nimport { useStaticValue } from '../../util/hooks-helpers';\nimport { ChonkyFormattersContext, defaultFormatters } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    darkThemeOverride,\n    lightTheme,\n    mobileThemeOverride,\n    useIsMobileBreakpoint,\n} from '../../util/styles';\nimport { ChonkyBusinessLogic } from '../internal/ChonkyBusinessLogic';\nimport { ChonkyIconPlaceholder } from '../internal/ChonkyIconPlaceholder';\nimport { ChonkyPresentationLayer } from '../internal/ChonkyPresentationLayer';\n\n// if (process.env.NODE_ENV === 'development') {\n//     const whyDidYouRender = require('@welldone-software/why-did-you-render');\n//     whyDidYouRender(React, {\n//         trackAllPureComponents: true,\n//     });\n// }\n\nexport const FileBrowser = React.forwardRef<\n    FileBrowserHandle,\n    FileBrowserProps & { children?: ReactNode }\n>((props, ref) => {\n    const { instanceId, iconComponent, children } = props;\n    const disableDragAndDrop = getValueOrFallback(\n        props.disableDragAndDrop,\n        defaultConfig.disableDragAndDrop,\n        'boolean'\n    );\n    const disableDragAndDropProvider = getValueOrFallback(\n        props.disableDragAndDropProvider,\n        defaultConfig.disableDragAndDropProvider,\n        'boolean'\n    );\n    const darkMode = getValueOrFallback(\n        props.darkMode,\n        defaultConfig.darkMode,\n        'boolean'\n    );\n    const i18n = getValueOrFallback(props.i18n, defaultConfig.i18n);\n    const formatters = useMemo(() => ({ ...defaultFormatters, ...i18n?.formatters }), [\n        i18n,\n    ]);\n\n    const chonkyInstanceId = useStaticValue(() => instanceId ?? shortid.generate());\n    const store = useChonkyStore(chonkyInstanceId);\n\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n    const theme = useMemo(() => {\n        const muiTheme = createMuiTheme({\n            palette: { type: darkMode ? 'dark' : 'light' },\n        });\n        const combinedTheme = merge(\n            muiTheme,\n            merge(lightTheme, darkMode ? darkThemeOverride : {})\n        );\n        return isMobileBreakpoint\n            ? merge(combinedTheme, mobileThemeOverride)\n            : combinedTheme;\n    }, [darkMode, isMobileBreakpoint]);\n\n    const chonkyComps = (\n        <>\n            <ChonkyBusinessLogic ref={ref} {...props} />\n            <ChonkyPresentationLayer>{children}</ChonkyPresentationLayer>\n        </>\n    );\n\n    return (\n        <IntlProvider locale=\"en\" defaultLocale=\"en\" {...i18n}>\n            <ChonkyFormattersContext.Provider value={formatters}>\n                <ReduxProvider store={store}>\n                    <ThemeProvider theme={theme}>\n                        <MuiThemeProvider theme={theme}>\n                            <ChonkyIconContext.Provider\n                                value={\n                                    iconComponent ??\n                                    defaultConfig.iconComponent ??\n                                    ChonkyIconPlaceholder\n                                }\n                            >\n                                {disableDragAndDrop || disableDragAndDropProvider ? (\n                                    chonkyComps\n                                ) : (\n                                    <DndProvider backend={HTML5Backend}>\n                                        {chonkyComps}\n                                    </DndProvider>\n                                )}\n                            </ChonkyIconContext.Provider>\n                        </MuiThemeProvider>\n                    </ThemeProvider>\n                </ReduxProvider>\n            </ChonkyFormattersContext.Provider>\n        </IntlProvider>\n    );\n});\nFileBrowser.displayName = 'FileBrowser';\n","import { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectFolderChain } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { FileData } from '../../types/file.types';\nimport { FileHelper } from '../../util/file-helper';\n\nexport interface FolderChainItem {\n    file: Nullable<FileData>;\n    disabled: boolean;\n    onClick?: () => void;\n}\n\nexport const useFolderChainItems = (): FolderChainItem[] => {\n    const folderChain = useSelector(selectFolderChain);\n    const dispatch = useDispatch();\n\n    const folderChainItems = useMemo(() => {\n        const items: FolderChainItem[] = [];\n        if (!folderChain) return items;\n\n        for (let i = 0; i < folderChain.length; ++i) {\n            const file = folderChain[i];\n            items.push({\n                file,\n                disabled: !file,\n                onClick:\n                    !FileHelper.isOpenable(file) || i === folderChain.length - 1\n                        ? undefined\n                        : () =>\n                              dispatch(\n                                  thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                                      targetFile: file,\n                                      files: [file],\n                                  })\n                              ),\n            });\n        }\n        return items;\n    }, [dispatch, folderChain]);\n    return folderChainItems;\n};\n","import { MaybePromise, Nullable } from 'tsdef';\n\nimport { FileActionState } from './action-handler.types';\nimport { FileViewConfig } from './file-view.types';\nimport { FileFilter, FileMap } from './file.types';\nimport { ChonkyIconName } from './icons.types';\nimport { ChonkyDispatch, RootState } from './redux.types';\nimport { FileSortKeySelector } from './sort.types';\n\nexport interface FileAction {\n    /**\n     * Unique file action ID. If you set the action ID to one of the built-in Chonky\n     * action action IDs, you custom action definition will override the built-in\n     * definition.\n     */\n    id: string;\n    /**\n     * When set to `true`, the action will only be active (dispatchable) when user\n     * selects one or more files. If `fileFilter` is defined, it will be applied to\n     * selection before checking if its empty.\n     */\n    requiresSelection?: boolean; // Requires selection of 1+ files\n    /**\n     * A predicate that determines whether a file should be included in the selection\n     * for this action.\n     */\n    fileFilter?: FileFilter;\n    /**\n     * List of hotkeys that should trigger this action, defined using `hotkey-js`\n     * notation.\n     * @see https://www.npmjs.com/package/hotkeys-js\n     */\n    hotkeys?: string[] | readonly string[];\n    /**\n     * When button is defined and `toolbar` or `contextMenu` is set to `true`, a\n     * button will be added to the relevant UI component. Clicking on this button\n     * will active this action. The appearance of the button will change based on\n     * the action definition and the current Chonky state.\n     */\n    button?: FileActionButton;\n    /**\n     * When `sortKeySelector` is specified, the action becomes a sorting toggle. When\n     * this action is activated, it will sort files using the key selector, toggling\n     * between Ascending and Descending orders.\n     */\n    sortKeySelector?: FileSortKeySelector;\n    /**\n     * When `fileViewConfig` is specified, triggering this action will apply the\n     * provided config to Chonky's file view.\n     */\n    fileViewConfig?: FileViewConfig;\n    /**\n     * When `option` is specified, the action becomes an option toggle. When the action\n     * is activated, the boolean value of the option will be toggled.\n     */\n    option?: FileActionOption;\n    /**\n     * When selection transform is defined, activating this action will update the file\n     * selection. If the transform function returns `null`, selection will be left\n     * untouched.\n     */\n    selectionTransform?: FileSelectionTransform;\n    /**\n     * When effect is defined, it will be called right before dispatching the action to\n     * the user defined action handler. If the effect function returns a promise, Chonky\n     * will wait for the promise to resolve or fail before dispatching the action to the\n     * handler. If this function returns `true`, the file action will NOT be dispatched\n     * the the handler.\n     */\n    effect?: FileActionEffect;\n    /**\n     * When customVisibility is defined, it will change the display state of the file action\n     * The function must return the visibility as one of the CustomVisibilityState values:\n     *  - Hidden\n     *  - Disabled\n     *  - Default\n     *  - Active\n     */\n    customVisibility?: () => CustomVisibilityState;\n    /**\n     * Field used to infer the type of action payload. It is used solely for Typescript\n     * type inference and action validation.\n     */\n    __payloadType?: any;\n    /**\n     * Field used to infer the type of extra state for this action. It is used solely\n     * for Typescript type inference and action validation.\n     */\n    __extraStateType?: any;\n}\n\nexport interface FileActionButton {\n    name: string; // Button name\n    toolbar?: boolean; // Whether to show the button in the toolbar\n    contextMenu?: boolean; // Whether to show the button in the context menu\n    group?: string; // Button group (dropdown in toolbar or section in context menu)\n    tooltip?: string; // Help tooltip text\n    icon?: ChonkyIconName | string | any; // Icon name\n    iconOnly?: boolean; // Whether to only display the icon\n}\n\nexport interface FileActionOption {\n    id: string; // Unique option ID\n    defaultValue: boolean; // Whether the option is enabled by default (required)\n}\n\nexport type FileSelectionTransform = (data: {\n    prevSelection: Set<string>;\n    fileIds: ReadonlyArray<string>;\n    fileMap: Readonly<FileMap>;\n    hiddenFileIds: Set<string>;\n}) => Nullable<Set<string>>;\n\nexport type FileActionEffect<Action extends FileAction = any> = (data: {\n    action: Action;\n    payload: Action['__payloadType'];\n    state: FileActionState<{}>; // extra state is empty on purpose\n    reduxDispatch: ChonkyDispatch;\n    getReduxState: () => RootState;\n}) => MaybePromise<undefined | boolean | void>;\n\nexport type FileActionMap = { [actonId: string]: FileAction };\n\nexport enum CustomVisibilityState {\n    Hidden, \n    Disabled, \n    Default,\n    Active\n};\n","import { useCallback, useEffect, useMemo } from 'react';\nimport { DragSourceMonitor, DropTargetMonitor } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useDispatch, useSelector, useStore } from 'react-redux';\nimport { ExcludeKeys, Nullable } from 'tsdef';\n\nimport { EssentialActions } from '../action-definitions/essential';\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectCurrentFolder,\n    selectFolderChain,\n    selectInstanceId,\n    selectSelectedFiles,\n} from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { StartDragNDropPayload } from '../types/action-payloads.types';\nimport {\n    ChonkyDndDropResult,\n    ChonkyDndFileEntryItem,\n    ChonkyDndFileEntryType,\n} from '../types/dnd.types';\nimport { DndEntryState } from '../types/file-list.types';\nimport { FileData } from '../types/file.types';\nimport { useDragIfAvailable, useDropIfAvailable } from './dnd-fallback';\nimport { FileHelper } from './file-helper';\nimport { useInstanceVariable } from './hooks-helpers';\n\nexport const useFileDrag = (file: Nullable<FileData>) => {\n    // Prepare the dnd payload\n    const store = useStore();\n    const fileRef = useInstanceVariable(file);\n    const getDndStartPayload = useCallback<() => StartDragNDropPayload>(() => {\n        const reduxState = store.getState();\n        return {\n            sourceInstanceId: selectInstanceId(reduxState),\n            source: selectCurrentFolder(reduxState),\n            // We force non-null type below because by convention, if drag & drop for\n            // this file was possible, it must have been non-null.\n            draggedFile: fileRef.current!,\n            selectedFiles: selectSelectedFiles(reduxState),\n        };\n    }, [store, fileRef]);\n\n    // For drag source\n    const dispatch = useDispatch();\n    const canDrag = useCallback(() => FileHelper.isDraggable(fileRef.current), [\n        fileRef,\n    ]);\n    const onDragStart = useCallback((): ChonkyDndFileEntryItem => {\n        const item: ChonkyDndFileEntryItem = {\n            type: ChonkyDndFileEntryType,\n            payload: getDndStartPayload(),\n        };\n        dispatch(thunkRequestFileAction(ChonkyActions.StartDragNDrop, item.payload));\n        return item;\n    }, [dispatch, getDndStartPayload]);\n    const onDragEnd = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DragSourceMonitor) => {\n            const dropResult = monitor.getDropResult() as ChonkyDndDropResult;\n            if (\n                !FileHelper.isDraggable(item.payload.draggedFile) ||\n                !dropResult ||\n                !dropResult.dropTarget\n            ) {\n                return;\n            }\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.EndDragNDrop, {\n                    ...item.payload,\n                    destination: dropResult.dropTarget,\n                    copy: dropResult.dropEffect === 'copy',\n                })\n            );\n        },\n        [dispatch]\n    );\n\n    // Create refs for react-dnd hooks\n    const item = useMemo<ChonkyDndFileEntryItem>(\n        () => ({\n            type: ChonkyDndFileEntryType,\n            // Payload is actually added in `onDragStart`\n            payload: {} as StartDragNDropPayload,\n        }),\n        []\n    );\n    const collect = useCallback(monitor => ({ isDragging: monitor.isDragging() }), []);\n    const [{ isDragging: dndIsDragging }, drag, preview] = useDragIfAvailable({\n        item,\n        canDrag,\n        begin: onDragStart,\n        // @ts-ignore\n        end: onDragEnd,\n        collect,\n    });\n\n    useEffect(() => {\n        // Set drag preview to an empty image because `DnDFileListDragLayer` will\n        // provide its own preview.\n        preview(getEmptyImage(), { captureDraggingState: true });\n    }, [preview]);\n\n    return { dndIsDragging, drag };\n};\n\ninterface UseFileDropParams {\n    file: Nullable<FileData>;\n    forceDisableDrop?: boolean;\n    includeChildrenDrops?: boolean;\n}\n\nexport const useFileDrop = ({\n    file,\n    forceDisableDrop,\n    includeChildrenDrops,\n}: UseFileDropParams) => {\n    const folderChainRef = useInstanceVariable(useSelector(selectFolderChain));\n    const onDrop = useCallback(\n        (_item: ChonkyDndFileEntryItem, monitor) => {\n            if (!monitor.canDrop()) return;\n            const customDropResult: ExcludeKeys<ChonkyDndDropResult, 'dropEffect'> = {\n                dropTarget: file,\n            };\n            return customDropResult;\n        },\n        [file]\n    );\n    const canDrop = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DropTargetMonitor) => {\n            if (\n                forceDisableDrop ||\n                !FileHelper.isDroppable(file) ||\n                (!monitor.isOver({ shallow: true }) && !includeChildrenDrops)\n            ) {\n                return false;\n            }\n            const { source, draggedFile, selectedFiles } = item.payload;\n\n            // We prevent folders from being dropped into themselves. We also prevent\n            // any folder from current folder chain being moved - we can't move the\n            // folder that we are currently in.\n            const prohibitedFileIds = new Set<string>();\n            prohibitedFileIds.add(file.id);\n            folderChainRef.current.map(folder => {\n                if (folder) prohibitedFileIds.add(folder.id);\n            });\n            const movedFiles: FileData[] = [draggedFile, ...selectedFiles];\n            for (const currFile of movedFiles) {\n                if (prohibitedFileIds.has(currFile.id)) return false;\n            }\n\n            // Finally, prohibit files from being moved into their parent folder\n            // (which is a no-op).\n            return file.id !== source?.id;\n        },\n        [forceDisableDrop, file, includeChildrenDrops, folderChainRef]\n    );\n    const collect = useCallback(\n        monitor => ({\n            isOver: monitor.isOver(),\n            isOverCurrent: monitor.isOver({ shallow: true }),\n            canDrop: monitor.canDrop(),\n        }),\n        []\n    );\n    const [\n        { isOver: dndIsOver, isOverCurrent: dndIsOverCurrent, canDrop: dndCanDrop },\n        drop,\n    ] = useDropIfAvailable({\n        accept: ChonkyDndFileEntryType,\n        drop: onDrop,\n        canDrop,\n        collect,\n    });\n    return { dndIsOver, dndIsOverCurrent, dndCanDrop, drop };\n};\n\nexport const useFileEntryDnD = (file: Nullable<FileData>) => {\n    const { dndIsDragging, drag } = useFileDrag(file);\n    const { dndIsOver, dndCanDrop, drop } = useFileDrop({ file });\n    const dndState = useMemo<DndEntryState>(\n        () => ({\n            dndIsDragging,\n            dndIsOver,\n            dndCanDrop,\n        }),\n        [dndCanDrop, dndIsDragging, dndIsOver]\n    );\n    return {\n        drop,\n        drag,\n        dndState,\n    };\n};\n\nexport const useDndHoverOpen = (file: Nullable<FileData>, dndState: DndEntryState) => {\n    const dispatch = useDispatch();\n    const currentFolderRef = useInstanceVariable(useSelector(selectCurrentFolder));\n    useEffect(() => {\n        let timeout: Nullable<any> = null;\n        if (\n            dndState.dndIsOver &&\n            FileHelper.isDndOpenable(file) &&\n            file.id !== currentFolderRef.current?.id\n        ) {\n            timeout = setTimeout(\n                () =>\n                    dispatch(\n                        thunkRequestFileAction(EssentialActions.OpenFiles, {\n                            targetFile: file,\n                            files: [file],\n                        })\n                    ),\n                // TODO: Make this timeout configurable\n                1500\n            );\n        }\n        return () => {\n            if (timeout) clearTimeout(timeout);\n        };\n    }, [dispatch, file, dndState.dndIsOver, currentFolderRef]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface TextPlaceholderProps {\n    minLength: number;\n    maxLength: number;\n}\n\nconst getRandomInt = (min: number, max: number) => {\n    return min + Math.floor(Math.random() * Math.floor(max - min));\n};\nexport const TextPlaceholder: React.FC<TextPlaceholderProps> = React.memo(props => {\n    const { minLength, maxLength } = props;\n\n    const placeholderLength = getRandomInt(minLength, maxLength);\n    const whitespace = '&nbsp;'.repeat(placeholderLength);\n\n    const classes = useStyles();\n    return (\n        <span\n            className={classes.textPlaceholder}\n            dangerouslySetInnerHTML={{ __html: whitespace }}\n        />\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(() => ({\n    '@keyframes loading-placeholder': {\n        '0%': { opacity: 0.2 },\n        '50%': { opacity: 0.4 },\n        '100%': { opacity: 0.2 },\n    },\n    textPlaceholder: {\n        animationName: '$loading-placeholder',\n        animationIterationCount: 'infinite',\n        animationTimingFunction: 'linear',\n        animationDuration: '1.5s',\n        backgroundColor: '#ccc',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        borderRadius: 4,\n        maxWidth: '40%',\n        minWidth: 20,\n    },\n}));\n","import React, {\n    HTMLProps, useCallback, useContext, useEffect, useMemo, useRef, useState\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectThumbnailGenerator } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { ChonkyIconContext, ColorsDark, ColorsLight, useIconData } from '../../util/icon-helper';\nimport { Logger } from '../../util/logger';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { KeyboardClickEvent, MouseClickEvent } from '../internal/ClickableWrapper';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const useFileEntryHtmlProps = (file: Nullable<FileData>): HTMLProps<HTMLDivElement> => {\n    return useMemo(() => {\n        const dataProps: { [prop: string]: Undefinable<string> } = {\n            'data-test-id': 'file-entry',\n            'data-chonky-file-id': file ? file.id : undefined,\n        };\n\n        return {\n            role: 'listitem',\n            ...dataProps,\n        };\n    }, [file]);\n};\n\nexport const useFileEntryState = (file: Nullable<FileData>, selected: boolean, focused: boolean) => {\n    const iconData = useIconData(file);\n    const { thumbnailUrl, thumbnailLoading } = useThumbnailUrl(file);\n\n    return useMemo<FileEntryState>(() => {\n        const fileColor = thumbnailUrl ? ColorsDark[iconData.colorCode] : ColorsLight[iconData.colorCode];\n        const iconSpin = thumbnailLoading || !file;\n        const icon = thumbnailLoading ? ChonkyIconName.loading : iconData.icon;\n\n        return {\n            childrenCount: FileHelper.getChildrenCount(file),\n            icon: file && file.icon !== undefined ? file.icon : icon,\n            iconSpin: iconSpin,\n            thumbnailUrl: thumbnailUrl,\n            color: file && file.color !== undefined ? file.color : fileColor,\n            selected: selected,\n            focused: !!focused,\n        };\n    }, [file, focused, iconData, selected, thumbnailLoading, thumbnailUrl]);\n};\n\nexport const useDndIcon = (dndState: DndEntryState) => {\n    let dndIconName: Nullable<ChonkyIconName> = null;\n    if (dndState.dndIsOver) {\n        const showDropIcon = dndState.dndCanDrop;\n        dndIconName = showDropIcon ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop;\n    } else if (dndState.dndIsDragging) {\n        dndIconName = ChonkyIconName.dndDragging;\n    }\n\n    return dndIconName;\n};\n\nexport const useModifierIconComponents = (file: Nullable<FileData>) => {\n    const modifierIcons: ChonkyIconName[] = useMemo(() => {\n        const modifierIcons: ChonkyIconName[] = [];\n        if (FileHelper.isHidden(file)) modifierIcons.push(ChonkyIconName.hidden);\n        if (FileHelper.isSymlink(file)) modifierIcons.push(ChonkyIconName.symlink);\n        if (FileHelper.isEncrypted(file)) modifierIcons.push(ChonkyIconName.lock);\n        return modifierIcons;\n    }, [file]);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const modifierIconComponents = useMemo(\n        () => modifierIcons.map((icon, index) => <ChonkyIcon key={`file-modifier-${index}`} icon={icon} />),\n        // For some reason ESLint marks `ChonkyIcon` as an unnecessary dependency,\n        // but we expect it can change at runtime so we disable the check.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [ChonkyIcon, modifierIcons]\n    );\n    return modifierIconComponents;\n};\n\nconst _extname = (fileName: string) => {\n    const parts = fileName.split('.');\n    if (parts.length) {\n        return `.${parts[parts.length - 1]}`;\n    }\n    return '';\n};\n\nexport const useFileNameComponent = (file: Nullable<FileData>) => {\n    return useMemo(() => {\n        if (!file) return <TextPlaceholder minLength={15} maxLength={20} />;\n\n        let name;\n        let extension = null;\n\n        const isDir = FileHelper.isDirectory(file);\n        if (isDir) {\n            name = file.name;\n        } else {\n            extension = file.ext ?? _extname(file.name);\n            name = file.name.substr(0, file.name.length - extension.length);\n        }\n\n        return (\n            <>\n                {name}\n                {extension && <span className=\"chonky-file-entry-description-title-extension\">{extension}</span>}\n            </>\n        );\n    }, [file]);\n};\n\nexport const useThumbnailUrl = (file: Nullable<FileData>) => {\n    const thumbnailGenerator = useSelector(selectThumbnailGenerator);\n    const [thumbnailUrl, setThumbnailUrl] = useState<Nullable<string>>(null);\n    const [thumbnailLoading, setThumbnailLoading] = useState<boolean>(false);\n    const loadingAttempts = useRef(0);\n\n    useEffect(() => {\n        let loadingCancelled = false;\n\n        if (file) {\n            if (thumbnailGenerator) {\n                if (loadingAttempts.current === 0) {\n                    setThumbnailLoading(true);\n                }\n                loadingAttempts.current++;\n                Promise.resolve()\n                    .then(() => thumbnailGenerator(file))\n                    .then((thumbnailUrl: any) => {\n                        if (loadingCancelled) return;\n                        setThumbnailLoading(false);\n\n                        if (thumbnailUrl && typeof thumbnailUrl === 'string') {\n                            setThumbnailUrl(thumbnailUrl);\n                        }\n                    })\n                    .catch(error => {\n                        if (!loadingCancelled) setThumbnailLoading(false);\n                        Logger.error(`User-defined \"thumbnailGenerator\" handler threw an error: ${error.message}`);\n                    });\n            } else if (file.thumbnailUrl) {\n                setThumbnailUrl(file.thumbnailUrl);\n            }\n        }\n\n        return () => {\n            loadingCancelled = true;\n        };\n    }, [file, setThumbnailUrl, setThumbnailLoading, thumbnailGenerator]);\n\n    return { thumbnailUrl, thumbnailLoading };\n};\n\nexport const useFileClickHandlers = (file: Nullable<FileData>, displayIndex: number) => {\n    const dispatch = useDispatch();\n\n    // Prepare base handlers\n    const onMouseClick = useCallback(\n        (event: MouseClickEvent, clickType: 'single' | 'double') => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.MouseClickFile, {\n                    clickType,\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n    const onKeyboardClick = useCallback(\n        (event: KeyboardClickEvent) => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.KeyboardClickFile, {\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    enterKey: event.enterKey,\n                    spaceKey: event.spaceKey,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n\n    // Prepare single/double click handlers\n    const onSingleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'single'), [onMouseClick]);\n    const onDoubleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'double'), [onMouseClick]);\n\n    return {\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n    };\n};\n","import { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectFileActionData,\n    selectFileViewConfig,\n    selectOptionValue,\n    selectParentFolder,\n    selectSelectedFilesForActionCount,\n    selectSortActionId,\n    selectSortOrder,\n} from '../redux/selectors';\nimport { useParamSelector } from '../redux/store';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { CustomVisibilityState } from '../types/action.types';\nimport { SortOrder } from '../types/sort.types';\nimport { FileHelper } from './file-helper';\n\nexport const useFileActionTrigger = (fileActionId: string) => {\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n    return useCallback(() => dispatch(thunkRequestFileAction(fileAction, undefined)), [\n        dispatch,\n        fileAction,\n    ]);\n};\n\nexport const useFileActionProps = (\n    fileActionId: string\n): { icon: Nullable<ChonkyIconName | string>; active: boolean; disabled: boolean } => {\n    const parentFolder = useSelector(selectParentFolder);\n    const fileViewConfig = useSelector(selectFileViewConfig);\n\n    const sortActionId = useSelector(selectSortActionId);\n    const sortOrder = useSelector(selectSortOrder);\n\n    const action = useParamSelector(selectFileActionData, fileActionId);\n    // @ts-ignore\n    const optionValue = useParamSelector(selectOptionValue, action?.option?.id);\n\n    const actionSelectionSize = useParamSelector(\n        selectSelectedFilesForActionCount,\n        fileActionId\n    );\n\n    const actionSelectionEmpty = actionSelectionSize === 0;\n\n    return useMemo(() => {\n        if (!action) return { icon: null, active: false, disabled: true };\n\n        let icon = action.button?.icon ?? null;\n        if (action.sortKeySelector) {\n            if (sortActionId === action.id) {\n                if (sortOrder === SortOrder.ASC) {\n                    icon = ChonkyIconName.sortAsc;\n                } else {\n                    icon = ChonkyIconName.sortDesc;\n                }\n            } else {\n                icon = ChonkyIconName.placeholder;\n            }\n        } else if (action.option) {\n            if (optionValue) {\n                icon = ChonkyIconName.toggleOn;\n            } else {\n                icon = ChonkyIconName.toggleOff;\n            }\n        }\n\n        const isSortButtonAndCurrentSort = action.id === sortActionId;\n        const isFileViewButtonAndCurrentView = action.fileViewConfig === fileViewConfig;\n        const isOptionAndEnabled = action.option ? !!optionValue : false;\n\n        let customDisabled = false;\n        let customActive = false;\n        if (action.customVisibility !== undefined) {\n            customDisabled = action.customVisibility() === CustomVisibilityState.Disabled;\n            customActive = action.customVisibility() === CustomVisibilityState.Active;\n        }\n        const active =\n            isSortButtonAndCurrentSort ||\n            isFileViewButtonAndCurrentView ||\n            isOptionAndEnabled ||\n            customActive;\n        \n        let disabled: boolean = (!!action.requiresSelection && actionSelectionEmpty) || customDisabled;\n\n        if (action.id === ChonkyActions.OpenParentFolder.id) {\n            // We treat `open_parent_folder` file action as a special case as it\n            // requires the parent folder to be present to work...\n            disabled = disabled || !FileHelper.isOpenable(parentFolder);\n        }\n\n        return { icon, active, disabled };\n    }, [\n        parentFolder,\n        fileViewConfig,\n        sortActionId,\n        sortOrder,\n        action,\n        optionValue,\n        actionSelectionEmpty,\n    ]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Button from '@material-ui/core/Button';\nimport React, { useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarButtonProps {\n    className?: string;\n    text: string;\n    tooltip?: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    iconOnly?: boolean;\n    onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n    disabled?: boolean;\n    dropdown?: boolean;\n}\n\nexport const ToolbarButton: React.FC<ToolbarButtonProps> = React.memo(props => {\n    const {\n        className: externalClassName,\n        text,\n        tooltip,\n        active,\n        icon,\n        iconOnly,\n        onClick,\n        disabled,\n        dropdown,\n    } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const iconComponent =\n        icon || iconOnly ? (\n            <div className={iconOnly ? '' : classes.iconWithText}>\n                <ChonkyIcon\n                    icon={icon ? icon : ChonkyIconName.fallbackIcon}\n                    fixedWidth={true}\n                />\n            </div>\n        ) : null;\n\n    const className = c({\n        [externalClassName ?? '']: true,\n        [classes.baseButton]: true,\n        [classes.iconOnlyButton]: iconOnly,\n        [classes.activeButton]: !!active,\n    });\n    return (\n        <Button\n            className={className}\n            onClick={onClick}\n            title={tooltip ? tooltip : text}\n            disabled={disabled || !onClick}\n        >\n            {iconComponent}\n            {text && !iconOnly && <span>{text}</span>}\n            {dropdown && (\n                <div className={classes.iconDropdown}>\n                    <ChonkyIcon\n                        icon={icon ? icon : ChonkyIconName.dropdown}\n                        fixedWidth={true}\n                    />\n                </div>\n            )}\n        </Button>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        textTransform: important('none'),\n        letterSpacing: important(0),\n        minWidth: important('auto'),\n        lineHeight: theme.toolbar.lineHeight,\n        height: theme.toolbar.size,\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    iconWithText: {\n        marginRight: 8,\n    },\n    iconOnlyButton: {\n        width: theme.toolbar.size,\n        textAlign: 'center',\n    },\n    iconDropdown: {\n        fontSize: '0.7em',\n        marginLeft: 2,\n        marginTop: 1,\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarButtonProps {\n    fileActionId: string;\n}\n\nexport const SmartToolbarButton: React.FC<SmartToolbarButtonProps> = React.memo(\n    props => {\n        const { fileActionId } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName, buttonTooltip } = useLocalizedFileActionStrings(action);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarButton\n                text={buttonName}\n                tooltip={buttonTooltip}\n                icon={icon}\n                iconOnly={button.iconOnly}\n                active={active}\n                onClick={triggerAction}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDndHoverOpen, useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from '../file-list/FileEntry-hooks';\nimport { FolderChainItem } from './FileNavbar-hooks';\nimport { ToolbarButton } from './ToolbarButton';\n\nexport interface FolderChainButtonProps {\n    first: boolean;\n    current: boolean;\n    item: FolderChainItem;\n}\n\nexport const FolderChainButton: React.FC<FolderChainButtonProps> = React.memo(\n    ({ first, current, item }) => {\n        const { file, disabled, onClick } = item;\n        const { dndIsOver, dndCanDrop, drop } = useFileDrop({\n            file,\n            forceDisableDrop: !file || current,\n        });\n        const dndState = useMemo<DndEntryState>(\n            () => ({\n                dndIsOver,\n                dndCanDrop,\n                dndIsDragging: false,\n            }),\n            [dndCanDrop, dndIsOver]\n        );\n        useDndHoverOpen(file, dndState);\n        const dndIconName = useDndIcon(dndState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const classes = useStyles(dndState);\n        const className = c({\n            [classes.baseBreadcrumb]: true,\n            [classes.disabledBreadcrumb]: disabled,\n            [classes.currentBreadcrumb]: current,\n        });\n        const text = file ? file.name : 'Loading...';\n        const icon =\n            first && file?.folderChainIcon === undefined\n                ? ChonkyIconName.folder\n                : file?.folderChainIcon;\n\n        return (\n            <div className={classes.buttonContainer} ref={file ? drop : null}>\n                {file && dndIconName && (\n                    <div className={classes.dndIndicator}>\n                        <ChonkyIcon icon={dndIconName} fixedWidth={true} />\n                    </div>\n                )}\n                <ToolbarButton\n                    icon={icon}\n                    className={className}\n                    text={text}\n                    disabled={disabled}\n                    onClick={onClick}\n                />\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    buttonContainer: {\n        position: 'relative',\n    },\n    baseBreadcrumb: {\n        color: (dndState: DndEntryState) => {\n            let color = theme.palette.text.primary;\n            if (dndState.dndIsOver) {\n                color = dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor;\n            }\n            return important(color);\n        },\n    },\n    disabledBreadcrumb: {\n        // Constant function here is on purpose. Without the function, the color here\n        // does not override the `baseBreadcrumb` color from above.\n        color: () => important(theme.palette.text.disabled),\n    },\n    currentBreadcrumb: {\n        textDecoration: important('underline'),\n    },\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor,\n        backgroundColor: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask,\n        lineHeight: `calc(${theme.toolbar.lineHeight} - 6px)`,\n        transform: 'translateX(-50%) translateY(-50%)',\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 6,\n        width: theme.toolbar.size - 6,\n        boxSizing: 'border-box',\n        position: 'absolute',\n        textAlign: 'center',\n        left: '50%',\n        top: '50%',\n        zIndex: 5,\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useFolderChainItems } from './FileNavbar-hooks';\nimport { FolderChainButton } from './FolderChainButton';\nimport { SmartToolbarButton } from './ToolbarButton';\n\nexport interface FileNavbarProps {}\n\nexport const FileNavbar: React.FC<FileNavbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const folderChainItems = useFolderChainItems();\n\n    const folderChainComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < folderChainItems.length; ++i) {\n            const key = `folder-chain-${i}`;\n            const component = (\n                <FolderChainButton\n                    key={key}\n                    first={i === 0}\n                    current={i === folderChainItems.length - 1}\n                    item={folderChainItems[i]}\n                />\n            );\n            components.push(component);\n        }\n        return components;\n    }, [folderChainItems]);\n\n    return (\n        <Box className={classes.navbarWrapper}>\n            <Box className={classes.navbarContainer}>\n                <SmartToolbarButton fileActionId={ChonkyActions.OpenParentFolder.id} />\n                <Breadcrumbs\n                    className={classes.navbarBreadcrumbs}\n                    classes={{ separator: classes.separator }}\n                >\n                    {folderChainComponents}\n                </Breadcrumbs>\n            </Box>\n        </Box>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    navbarWrapper: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n    },\n    navbarContainer: {\n        display: 'flex',\n    },\n    upDirectoryButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        height: theme.toolbar.size,\n        width: theme.toolbar.size,\n        padding: '0px !important',\n    },\n    navbarBreadcrumbs: {\n        fontSize: important(theme.toolbar.fontSize),\n        flexGrow: 100,\n    },\n    separator: {\n        marginRight: important(4),\n        marginLeft: important(4),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport React, { useCallback, useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarDropdownButtonProps {\n    text: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    onClick?: () => void;\n    disabled?: boolean;\n}\n\nexport const ToolbarDropdownButton = React.forwardRef(\n    (props: ToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { text, active, icon, onClick, disabled } = props;\n        const classes = useStyles();\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const className = c({\n            [classes.baseButton]: true,\n            [classes.activeButton]: active,\n        });\n        return (\n            <MenuItem\n                ref={ref}\n                className={className}\n                onClick={onClick}\n                disabled={disabled}\n            >\n                {icon && (\n                    <ListItemIcon className={classes.icon}>\n                        <ChonkyIcon icon={icon} fixedWidth={true} />\n                    </ListItemIcon>\n                )}\n                <ListItemText primaryTypographyProps={{ className: classes.text }}>\n                    {text}\n                </ListItemText>\n            </MenuItem>\n        );\n    }\n);\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        height: important(theme.toolbar.size),\n        minHeight: important('auto'),\n        minWidth: important('auto'),\n        padding: important(20),\n    },\n    icon: {\n        fontSize: important(theme.toolbar.fontSize),\n        minWidth: important('auto'),\n        color: important('inherit'),\n        marginRight: 8,\n    },\n    text: {\n        fontSize: important(theme.toolbar.fontSize),\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarDropdownButtonProps {\n    fileActionId: string;\n    onClickFollowUp?: () => void;\n}\n\nexport const SmartToolbarDropdownButton = React.forwardRef(\n    (props: SmartToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { fileActionId, onClickFollowUp } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName } = useLocalizedFileActionStrings(action);\n\n        // Combine external click handler with internal one\n        const handleClick = useCallback(() => {\n            triggerAction();\n            if (onClickFollowUp) onClickFollowUp();\n        }, [onClickFollowUp, triggerAction]);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarDropdownButton\n                ref={ref}\n                text={buttonName}\n                icon={icon}\n                onClick={handleClick}\n                active={active}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Menu from '@material-ui/core/Menu';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { FileActionGroup } from '../../types/action-menus.types';\nimport { useLocalizedFileActionGroup } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { ToolbarButton } from './ToolbarButton';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport type ToolbarDropdownProps = FileActionGroup;\n\nexport const ToolbarDropdown: React.FC<ToolbarDropdownProps> = React.memo(props => {\n    const { name, fileActionIds } = props;\n    const [anchor, setAnchor] = React.useState<null | HTMLElement>(null);\n\n    const handleClick = useCallback(\n        (event: React.MouseEvent<HTMLButtonElement>) => setAnchor(event.currentTarget),\n        [setAnchor]\n    );\n    const handleClose = useCallback(() => setAnchor(null), [setAnchor]);\n\n    const menuItemComponents = useMemo(\n        () =>\n            fileActionIds.map(id => (\n                <SmartToolbarDropdownButton\n                    key={`menu-item-${id}`}\n                    fileActionId={id}\n                    onClickFollowUp={handleClose}\n                />\n            )),\n        [fileActionIds, handleClose]\n    );\n\n    const localizedName = useLocalizedFileActionGroup(name);\n    const classes = useStyles();\n    return (\n        <>\n            <ToolbarButton text={localizedName} onClick={handleClick} dropdown={true} />\n            <Menu\n                autoFocus\n                keepMounted\n                elevation={2}\n                anchorEl={anchor}\n                onClose={handleClose}\n                open={Boolean(anchor)}\n                transitionDuration={150}\n                classes={{ list: classes.dropdownList }}\n            >\n                {menuItemComponents}\n            </Menu>\n        </>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    dropdownList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport Typography from '@material-ui/core/Typography';\n\nimport { selectHiddenFileCount, selectors, selectSelectionSize } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarInfoProps {}\n\nexport const ToolbarInfo: React.FC<ToolbarInfoProps> = React.memo(() => {\n    const classes = useStyles();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const selectionSize = useSelector(selectSelectionSize);\n    const hiddenCount = useSelector(selectHiddenFileCount);\n\n    const intl = useIntl();\n    const fileCountString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'visibleFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {# items}\n                one {# item}\n                other {# items}\n            }`,\n        },\n        { fileCount: displayFileIds.length }\n    );\n    const selectedString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'selectedFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# selected}\n            }`,\n        },\n        { fileCount: selectionSize }\n    );\n    const hiddenString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'hiddenFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# hidden}\n            }`,\n        },\n        { fileCount: hiddenCount }\n    );\n\n    return (\n        <div className={classes.infoContainer}>\n            <Typography className={classes.infoText} variant=\"body1\">\n                {fileCountString}\n                {(selectedString || hiddenString) && (\n                    <span className={classes.extraInfoSpan}>\n                        (\n                        <span className={classes.selectionSizeText}>\n                            {selectedString}\n                        </span>\n                        {selectedString && hiddenString && ', '}\n                        <span className={classes.hiddenCountText}>{hiddenString}</span>)\n                    </span>\n                )}\n            </Typography>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    infoContainer: {\n        height: theme.toolbar.size,\n        display: 'flex',\n    },\n    infoText: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        fontSize: important(theme.toolbar.fontSize),\n        marginLeft: important(12),\n        height: theme.toolbar.size,\n    },\n    extraInfoSpan: {\n        marginRight: important(8),\n        marginLeft: important(8),\n        opacity: 0.8,\n    },\n    selectionSizeText: {\n        color: theme.colors.textActive,\n    },\n    hiddenCountText: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectSearchString } from '../../redux/selectors';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDebounce } from '../../util/hooks-helpers';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarSearchProps {}\n\nexport const ToolbarSearch: React.FC<ToolbarSearchProps> = React.memo(() => {\n    const intl = useIntl();\n    const searchPlaceholderString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.Toolbar, 'searchPlaceholder'),\n        defaultMessage: 'Search',\n    });\n\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const searchInputRef = useRef<HTMLInputElement>();\n\n    const dispatch = useDispatch();\n    const reduxSearchString = useSelector(selectSearchString);\n\n    const [localSearchString, setLocalSearchString] = useState(reduxSearchString);\n    const [debouncedLocalSearchString] = useDebounce(localSearchString, 300);\n    const [showLoadingIndicator, setShowLoadingIndicator] = useState(false);\n\n    useEffect(() => {\n        dispatch(\n            reduxActions.setFocusSearchInput(() => {\n                if (searchInputRef.current) searchInputRef.current.focus();\n            })\n        );\n        return () => {\n            dispatch(reduxActions.setFocusSearchInput(null));\n        };\n    }, [dispatch]);\n\n    useEffect(() => {\n        setShowLoadingIndicator(false);\n        dispatch(reduxActions.setSearchString(debouncedLocalSearchString));\n    }, [debouncedLocalSearchString, dispatch]);\n\n    const handleChange = useCallback((event: React.FormEvent<HTMLInputElement>) => {\n        setShowLoadingIndicator(true);\n        setLocalSearchString(event.currentTarget.value);\n    }, []);\n    const handleKeyUp = useCallback(\n        (event: React.KeyboardEvent<HTMLInputElement>) => {\n            // Remove focus from the search input field when user presses escape.\n            // Note: We use KeyUp instead of KeyPress because some browser plugins can\n            //       intercept KeyPress events with Escape key.\n            //       @see https://stackoverflow.com/a/37461974\n            if (event.key === 'Escape') {\n                setLocalSearchString('');\n                dispatch(reduxActions.setSearchString(''));\n                if (searchInputRef.current) searchInputRef.current.blur();\n            }\n        },\n        [dispatch]\n    );\n\n    return (\n        <TextField\n            className={classes.searchFieldContainer}\n            size=\"small\"\n            variant=\"outlined\"\n            value={localSearchString}\n            placeholder={searchPlaceholderString}\n            onChange={handleChange as any}\n            inputRef={searchInputRef}\n            InputProps={{\n                onKeyUp: handleKeyUp,\n                startAdornment: (\n                    <InputAdornment className={classes.searchIcon} position=\"start\">\n                        <ChonkyIcon\n                            icon={showLoadingIndicator ? ChonkyIconName.loading : ChonkyIconName.search}\n                            spin={showLoadingIndicator}\n                        />\n                    </InputAdornment>\n                ),\n                className: classes.searchFieldInput,\n            }}\n            inputProps={{ className: classes.searchFieldInputInner }}\n        />\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    searchFieldContainer: {\n        height: theme.toolbar.size,\n        width: 150,\n    },\n    searchIcon: {\n        fontSize: '0.9em',\n        opacity: 0.75,\n    },\n    searchFieldInput: {\n        lineHeight: important(0),\n        padding: important(0),\n        margin: important(0),\n        fontSize: important(theme.toolbar.fontSize),\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 4,\n        paddingLeft: important(8),\n        marginTop: 2,\n    },\n    searchFieldInputInner: {\n        lineHeight: important(`${theme.toolbar.size - 4}px`),\n        fontSize: important(theme.toolbar.fontSize),\n        height: important(theme.toolbar.size - 4),\n        padding: important([0, 8, 0, 0]),\n        margin: important(0),\n        '-webkit-appearance': 'none',\n    },\n}));\n","import React, { ReactElement, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectToolbarItems } from '../../redux/selectors';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { SmartToolbarButton } from './ToolbarButton';\nimport { ToolbarDropdown } from './ToolbarDropdown';\nimport { ToolbarInfo } from './ToolbarInfo';\nimport { ToolbarSearch } from './ToolbarSearch';\n\nexport interface FileToolbarProps {}\n\nexport const FileToolbar: React.FC<FileToolbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const toolbarItems = useSelector(selectToolbarItems);\n\n    const toolbarItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < toolbarItems.length; ++i) {\n            const item = toolbarItems[i];\n\n            const key = `toolbar-item-${typeof item === 'string' ? item : item.name}`;\n            const component =\n                typeof item === 'string' ? (\n                    <SmartToolbarButton key={key} fileActionId={item} />\n                ) : (\n                    <ToolbarDropdown\n                        key={key}\n                        name={item.name}\n                        fileActionIds={item.fileActionIds}\n                    />\n                );\n            components.push(component);\n        }\n        return components;\n    }, [toolbarItems]);\n\n    return (\n        <div className={classes.toolbarWrapper}>\n            <div className={classes.toolbarContainer}>\n                <div className={classes.toolbarLeft}>\n                    <ToolbarSearch />\n                    <ToolbarInfo />\n                </div>\n                <div className={classes.toolbarRight}>{toolbarItemComponents}</div>\n            </div>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    toolbarWrapper: {},\n    toolbarContainer: {\n        flexWrap: 'wrap-reverse',\n        display: 'flex',\n    },\n    toolbarLeft: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        flexGrow: 10000,\n        display: 'flex',\n    },\n    toolbarLeftFiller: {\n        flexGrow: 10000,\n    },\n    toolbarRight: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        display: 'flex',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useContext } from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileListEmptyProps {\n    width: number;\n    height: number;\n}\n\nexport const FileListEmpty: React.FC<FileListEmptyProps> = props => {\n    const { width, height } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const style: CSSProperties = {\n        width,\n        height,\n    };\n\n    const intl = useIntl();\n    const emptyString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.FileList, 'nothingToShow'),\n        defaultMessage: 'Nothing to show',\n    });\n\n    return (\n        <div className={classes.fileListEmpty} style={style}>\n            <div className={classes.fileListEmptyContent}>\n                <ChonkyIcon icon={ChonkyIconName.folderOpen} />\n                &nbsp; {emptyString}\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileListEmpty: {\n        color: theme.palette.text.disabled,\n        position: 'relative',\n        textAlign: 'center',\n        fontSize: '1.2em',\n    },\n    fileListEmptyContent: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        left: '50%',\n        top: '50%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback } from 'react';\nimport { AnyObjectWithStringKeys } from 'tsdef';\n\nimport { useClickHandler, useKeyDownHandler } from './ClickableWrapper-hooks';\n\nexport interface MouseClickEvent {\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type MouseClickEventHandler = (event: MouseClickEvent) => void;\n\nexport interface KeyboardClickEvent {\n    enterKey: boolean;\n    spaceKey: boolean;\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type KeyboardClickEventHandler = (event: KeyboardClickEvent) => void;\n\nexport interface ClickableWrapperProps {\n    wrapperTag: any;\n    passthroughProps?: any;\n\n    onSingleClick?: MouseClickEventHandler;\n    onDoubleClick?: MouseClickEventHandler;\n    onKeyboardClick?: KeyboardClickEventHandler;\n    setFocused?: (focused: boolean) => void;\n}\n\nexport const ClickableWrapper: React.FC<ClickableWrapperProps> = props => {\n    const {\n        children,\n        wrapperTag: WrapperTag,\n        passthroughProps,\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n        setFocused,\n    } = props;\n\n    const handleClick = useClickHandler(onSingleClick, onDoubleClick);\n    const handleKeyDown = useKeyDownHandler(onKeyboardClick);\n\n    const compProps: AnyObjectWithStringKeys = {\n        onFocus: useCallback(() => setFocused && setFocused(true), [setFocused]),\n        onBlur: useCallback(() => setFocused && setFocused(false), [setFocused]),\n    };\n\n    if (onSingleClick || onDoubleClick || onKeyboardClick) {\n        compProps.onClick = handleClick;\n        compProps.onKeyDown = handleKeyDown;\n        compProps.tabIndex = 0;\n    }\n\n    const mergedProps = { ...compProps, ...passthroughProps };\n    return <WrapperTag {...mergedProps}>{children}</WrapperTag>;\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { selectDoubleClickDelay } from '../../redux/selectors';\nimport {\n    KeyboardClickEvent,\n    KeyboardClickEventHandler,\n    MouseClickEvent,\n    MouseClickEventHandler,\n} from './ClickableWrapper';\n\nexport const useClickHandler = (\n    onSingleClick: Nilable<MouseClickEventHandler>,\n    onDoubleClick: Nilable<MouseClickEventHandler>\n) => {\n    const doubleClickDelay = useSelector(selectDoubleClickDelay);\n\n    const counter = useRef({\n        clickCount: 0,\n        clickTimeout: null as Nullable<number>,\n    });\n\n    return useCallback(\n        (event: React.MouseEvent) => {\n            const mouseClickEvent: MouseClickEvent = {\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey || event.metaKey,\n                shiftKey: event.shiftKey,\n\n            };\n\n            counter.current.clickCount++;\n            if (counter.current.clickCount === 1) {\n                if (onSingleClick) {\n                    event.preventDefault();\n                    onSingleClick(mouseClickEvent);\n                }\n                counter.current.clickCount = 1;\n                // @ts-ignore\n                counter.current.clickTimeout = setTimeout(\n                    () => (counter.current.clickCount = 0),\n                    doubleClickDelay\n                );\n            } else if (counter.current.clickCount === 2) {\n                if (onDoubleClick) {\n                    event.preventDefault();\n                    onDoubleClick(mouseClickEvent);\n                }\n                if (typeof counter.current.clickTimeout === 'number') {\n                    clearTimeout(counter.current.clickTimeout);\n                    counter.current.clickTimeout = null;\n                    counter.current.clickCount = 0;\n                }\n            }\n        },\n        [doubleClickDelay, onSingleClick, onDoubleClick, counter]\n    );\n};\n\nexport const useKeyDownHandler = (onKeyboardClick?: KeyboardClickEventHandler) => {\n    return useCallback(\n        (event: React.KeyboardEvent) => {\n            if (!onKeyboardClick) return;\n\n            const keyboardClickEvent: KeyboardClickEvent = {\n                enterKey: event.nativeEvent.code === 'Enter',\n                spaceKey: event.nativeEvent.code === 'Space',\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey,\n                shiftKey: event.shiftKey,\n            };\n\n            if (keyboardClickEvent.spaceKey || keyboardClickEvent.enterKey) {\n                event.preventDefault();\n                event.stopPropagation();\n                onKeyboardClick(keyboardClickEvent);\n            }\n        },\n        [onKeyboardClick]\n    );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { FileData } from '../../types/file.types';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileNameComponent, useModifierIconComponents } from './FileEntry-hooks';\n\nexport interface FileEntryNameProps {\n    file: Nullable<FileData>;\n    className?: string;\n}\n\nexport const FileEntryName: React.FC<FileEntryNameProps> = React.memo(({ file, className }) => {\n    const modifierIconComponents = useModifierIconComponents(file);\n    const fileNameComponent = useFileNameComponent(file);\n\n    const classes = useStyles();\n    return (\n        <span className={className} title={file ? file.name : undefined}>\n            {modifierIconComponents.length > 0 && (\n                <span className={classes.modifierIcons}>{modifierIconComponents}</span>\n            )}\n            {fileNameComponent}\n        </span>\n    );\n});\nFileEntryName.displayName = 'FileEntryName';\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    modifierIcons: {\n        color: theme.palette.text.hint,\n        position: 'relative',\n        fontSize: '0.775em',\n        paddingRight: 5,\n    },\n}));\n","import React, { useContext } from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const CompactEntry: React.FC<FileEntryProps> = React.memo(\n    // @ts-ignore\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n\n        const classes = useStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={entryState.icon}\n                        spin={entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div className={classes.listFileEntryDescription}>\n                    <div\n                        className={classes.listFileEntryName}\n                        title={file ? file.name : undefined}\n                    >\n                        <FileEntryName file={file} />\n                    </div>\n                    <div className={classes.listFileEntryProperties}>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileModDateString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={5} maxLength={15} />\n                            )}\n                        </div>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileSizeString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={10} maxLength={20} />\n                            )}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"chonky-file-entry-outline\"></div>\n                <div className=\"chonky-file-entry-selection\"></div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        fontSize: theme.listFileEntry.fontSize,\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntryIcon: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: 'inset rgba(255, 255, 255, 0.5) 0 0 0 999px',\n        borderRadius: theme.listFileEntry.iconBorderRadius,\n        fontSize: theme.listFileEntry.iconFontSize,\n        color: '#fff',\n        padding: 8,\n    },\n    listFileEntryDescription: {\n        flexDirection: 'column',\n        display: 'flex',\n        flexGrow: 1,\n    },\n    listFileEntryName: {\n        padding: [0, 8, 4, 8],\n    },\n    listFileEntryProperties: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        flexDirection: 'row',\n        display: 'flex',\n    },\n    listFileEntryProperty: {\n        padding: [0, 8],\n        opacity: 0.4,\n    },\n}));\n","import React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { useDndHoverOpen, useFileEntryDnD } from '../../util/dnd';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileEntryProps {\n    file: Nullable<FileData>;\n    children: (dndState: DndEntryState) => React.ReactElement;\n}\n\nexport const DnDFileEntry = React.memo(({ file, children }: DnDFileEntryProps) => {\n    const { drop, drag, dndState } = useFileEntryDnD(file);\n\n    useDndHoverOpen(file, dndState);\n    const classes = useStyles();\n    return (\n        <div ref={drop} className={classes.fillParent}>\n            <div\n                ref={FileHelper.isDraggable(file) ? drag : null}\n                className={classes.fillParent}\n            >\n                {children(dndState)}\n            </div>\n        </div>\n    );\n});\n\nexport const useStyles = makeLocalChonkyStyles(() => ({\n    fillParent: {\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport c from 'classnames';\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileThumbnailProps {\n    className: string;\n    thumbnailUrl: Nullable<string>;\n}\n\nexport const FileThumbnail: React.FC<FileThumbnailProps> = React.memo(props => {\n    const { className, thumbnailUrl } = props;\n\n    const thumbnailStyle: React.CSSProperties = thumbnailUrl ? { backgroundImage: `url('${thumbnailUrl}')` } : {};\n\n    const classes = useStyles();\n    return <div className={c([className, classes.fileThumbnail])} style={thumbnailStyle} />;\n});\nFileThumbnail.displayName = 'FileThumbnail';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileThumbnail: {\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n        backgroundSize: 'contain',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from './FileEntry-hooks';\n\nexport interface DnDIndicatorProps {\n    className: string;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryDndIndicator: React.FC<DnDIndicatorProps> = React.memo(props => {\n    const { className: externalClassName, dndState } = props;\n    const dndIconName = useDndIcon(dndState);\n    const classes = useStyles(dndState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    if (!dndIconName) return null;\n    const className = c({\n        [classes.dndIndicator]: true,\n        [externalClassName]: true,\n    });\n    return (\n        <div className={className}>\n            <ChonkyIcon icon={dndIconName} />\n        </div>\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : '#000',\n        boxSizing: 'border-box',\n        position: 'absolute',\n        fontSize: '1.2em',\n        opacity: 0.6,\n        padding: 6,\n        '&:before': {\n            borderBottom: '50px solid transparent',\n            borderLeft: '50px solid #fff',\n            position: 'absolute',\n            content: '\"\"',\n            zIndex: -1,\n            left: 0,\n            top: 0,\n        },\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useEffect } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { FileThumbnail } from './FileThumbnail';\nimport { GridEntryDndIndicator } from './GridEntryDndIndicator';\n\nexport type FileEntryState = {\n    childrenCount: Nullable<number>;\n    color: string;\n    icon: ChonkyIconName | string;\n    thumbnailUrl: Nullable<string>;\n    iconSpin: boolean;\n    selected: boolean;\n    focused: boolean;\n};\n\nexport interface FileEntryPreviewProps {\n    className?: string;\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryPreviewFolder: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const folderClasses = useFolderStyles(entryState);\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const className = c({\n        [folderClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <div className={folderClasses.folderBackSideMid}>\n                <div className={folderClasses.folderBackSideTop} />\n                <div className={folderClasses.folderFrontSide}>\n                    <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n                    <div className={c([fileClasses.fileIcon, folderClasses.fileIcon])}>{entryState.childrenCount}</div>\n                    <div className={commonClasses.selectionIndicator}></div>\n                    <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n                </div>\n            </div>\n        </div>\n    );\n});\nGridEntryPreviewFolder.displayName = 'GridEntryPreviewFolder';\n\nconst useFolderStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    folderBackSideTop: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopLeftRadius: theme.gridFileEntry.borderRadius,\n        borderTopRightRadius: 10,\n        position: 'absolute',\n        right: '60%',\n        height: 13,\n        top: -10,\n        left: 0,\n        '&:after': {\n            borderRightColor: theme.palette.background.paper,\n            borderTopColor: theme.palette.background.paper,\n            borderBottomColor: 'transparent',\n            borderLeftColor: 'transparent',\n            borderWidth: [0, 15, 10, 0],\n            borderStyle: 'solid',\n            position: 'absolute',\n            display: 'block',\n            content: '\"\"',\n            right: 0,\n            top: 0,\n        },\n    },\n    folderBackSideMid: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopRightRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    folderFrontSide: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            if (state.selected) shadows.push('inset rgba(0, 153, 255, .65) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.folderFrontColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        overflow: 'hidden',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    fileIcon: {\n        fontSize: important(theme.gridFileEntry.childrenCountSize),\n    },\n}));\n\nexport const GridEntryPreviewFile: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const className = c({\n        [fileClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n            <div className={fileClasses.fileIcon}>\n                <ChonkyIcon icon={entryState.icon} spin={entryState.iconSpin} />\n            </div>\n            <div className={commonClasses.selectionIndicator}></div>\n            <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n        </div>\n    );\n});\nGridEntryPreviewFile.displayName = 'GridEntryPreviewFile';\n\nconst useFileStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.selected) shadows.push('inset rgba(0,153,255, .65) 0 0 0 3px');\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.fileColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    dndIndicator: {\n        zIndex: 14,\n    },\n    fileIcon: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        fontSize: theme.gridFileEntry.iconSize,\n        opacity: (state: FileEntryState) => (state.thumbnailUrl && !state.focused ? 0 : 1),\n        color: (state: FileEntryState) =>\n            state.focused ? theme.gridFileEntry.iconColorFocused : theme.gridFileEntry.iconColor,\n        position: 'absolute',\n        left: '50%',\n        zIndex: 12,\n        top: '50%',\n    },\n    thumbnail: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        zIndex: 6,\n        bottom: 5,\n        right: 5,\n        left: 5,\n        top: 5,\n    },\n}));\n\nexport const useCommonEntryStyles = makeLocalChonkyStyles(() => ({\n    selectionIndicator: {\n        display: (state: FileEntryState) => (state.selected ? 'block' : 'none'),\n        background:\n            'repeating-linear-gradient(' +\n            '45deg,' +\n            'rgba(0,153,255,.14),' +\n            'rgba(0,153,255,.14) 10px,' +\n            'rgba(0,153,255,.25) 0,' +\n            'rgba(0,153,255,.25) 20px' +\n            ')',\n        backgroundColor: 'rgba(0, 153, 255, .14)',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 10,\n    },\n    focusIndicator: {\n        display: (state: FileEntryState) => (state.focused ? 'block' : 'none'),\n        boxShadow: 'inset rgba(0, 0, 0, 1) 0 0 0 2px',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 11,\n    },\n}));\n","import React from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, GridEntryPreviewFile, GridEntryPreviewFolder } from './GridEntryPreview';\n\nexport const GridEntry: React.FC<FileEntryProps> = React.memo(({ file, selected, focused, dndState }) => {\n    const isDirectory = FileHelper.isDirectory(file);\n    const entryState = useFileEntryState(file, selected, focused);\n\n    const classes = useFileEntryStyles(entryState);\n    const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n    const entryClassName = c({\n        [classes.gridFileEntry]: true,\n    });\n    return (\n        <div className={entryClassName} {...fileEntryHtmlProps}>\n            {isDirectory ? (\n                <GridEntryPreviewFolder\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            ) : (\n                <GridEntryPreviewFile\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            )}\n            <div className={classes.gridFileEntryNameContainer}>\n                <FileEntryName className={classes.gridFileEntryName} file={file} />\n            </div>\n        </div>\n    );\n});\nGridEntry.displayName = 'GridEntry';\n\nconst useFileEntryStyles = makeLocalChonkyStyles(theme => ({\n    gridFileEntry: {\n        flexDirection: 'column',\n        display: 'flex',\n        height: '100%',\n    },\n    gridFileEntryPreview: {\n        flexGrow: 1,\n    },\n    gridFileEntryNameContainer: {\n        fontSize: theme.gridFileEntry.fontSize,\n        wordBreak: 'break-word',\n        textAlign: 'center',\n        paddingTop: 5,\n    },\n    gridFileEntryName: {\n        backgroundColor: (state: FileEntryState) => (state.selected ? 'rgba(0,153,255, .25)' : 'transparent'),\n        textDecoration: (state: FileEntryState) => (state.focused ? 'underline' : 'none'),\n        borderRadius: 3,\n        padding: [2, 4],\n    },\n}));\n","import React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport {\n    useDndIcon,\n    useFileEntryHtmlProps,\n    useFileEntryState,\n} from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, useCommonEntryStyles } from './GridEntryPreview';\n\ninterface StyleState {\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const ListEntry: React.FC<FileEntryProps> = React.memo(\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n        const dndIconName = useDndIcon(dndState);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n        const styleState = useMemo<StyleState>(\n            () => ({\n                entryState,\n                dndState,\n            }),\n            [dndState, entryState]\n        );\n        const classes = useStyles(styleState);\n        const commonClasses = useCommonEntryStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={commonClasses.focusIndicator}></div>\n                <div\n                    className={c([\n                        commonClasses.selectionIndicator,\n                        classes.listFileEntrySelection,\n                    ])}\n                ></div>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={dndIconName ?? entryState.icon}\n                        spin={dndIconName ? false : entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div\n                    className={classes.listFileEntryName}\n                    title={file ? file.name : undefined}\n                >\n                    <FileEntryName file={file} />\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileModDateString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={5} maxLength={15} />\n                    )}\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileSizeString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={10} maxLength={20} />\n                    )}\n                </div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        boxShadow: `inset ${theme.palette.divider} 0 -1px 0`,\n        fontSize: theme.listFileEntry.fontSize,\n        color: ({ dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : 'inherit',\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntrySelection: {\n        opacity: 0.6,\n    },\n    listFileEntryIcon: {\n        color: ({ entryState, dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : entryState.color,\n        fontSize: theme.listFileEntry.iconFontSize,\n        boxSizing: 'border-box',\n        padding: [2, 4],\n        zIndex: 20,\n    },\n    listFileEntryName: {\n        textOverflow: 'ellipsis',\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '1 1 300px',\n        paddingLeft: 8,\n        zIndex: 20,\n    },\n    listFileEntryProperty: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '0 1 150px',\n        padding: [2, 8],\n        zIndex: 20,\n    },\n}));\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileData, selectIsDnDDisabled, selectIsFileSelected } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { ClickableWrapper, ClickableWrapperProps } from '../internal/ClickableWrapper';\nimport { CompactEntry } from './CompactEntry';\nimport { DnDFileEntry } from './DnDFileEntry';\nimport { useFileClickHandlers } from './FileEntry-hooks';\nimport { GridEntry } from './GridEntry';\nimport { ListEntry } from './ListEntry';\n\nexport interface SmartFileEntryProps {\n    fileId: Nullable<string>;\n    displayIndex: number;\n    fileViewMode: FileViewMode;\n}\n\nconst disabledDndState: DndEntryState = {\n    dndIsDragging: false,\n    dndIsOver: false,\n    dndCanDrop: false,\n};\n\nexport const SmartFileEntry: React.FC<SmartFileEntryProps> = React.memo(({ fileId, displayIndex, fileViewMode }) => {\n    const classes = useStyles();\n\n    // Basic properties\n    const file = useParamSelector(selectFileData, fileId);\n    const selected = useParamSelector(selectIsFileSelected, fileId);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n\n    // Clickable wrapper properties\n    const fileClickHandlers = useFileClickHandlers(file, displayIndex);\n    const [focused, setFocused] = useState(false);\n    const clickableWrapperProps: ClickableWrapperProps = {\n        wrapperTag: 'div',\n        passthroughProps: { className: classes.fileEntryClickableWrapper },\n        ...(FileHelper.isClickable(file) ? fileClickHandlers : undefined),\n        setFocused,\n    };\n\n    // File entry properties\n    const fileEntryProps: Omit<FileEntryProps, 'dndState'> = {\n        file,\n        selected,\n        focused,\n    };\n\n    let EntryComponent: React.FC<FileEntryProps>;\n    if (fileViewMode === FileViewMode.List) EntryComponent = ListEntry;\n    else if (fileViewMode === FileViewMode.Compact) EntryComponent = CompactEntry;\n    else EntryComponent = GridEntry;\n\n    return dndDisabled ? (\n        <ClickableWrapper {...clickableWrapperProps}>\n            <EntryComponent {...fileEntryProps} dndState={disabledDndState} />\n        </ClickableWrapper>\n    ) : (\n        <DnDFileEntry file={file}>\n            {dndState => (\n                <ClickableWrapper {...clickableWrapperProps}>\n                    <EntryComponent {...fileEntryProps} dndState={dndState} />\n                </ClickableWrapper>\n            )}\n        </DnDFileEntry>\n    );\n});\nSmartFileEntry.displayName = 'SmartFileEntry';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileEntryClickableWrapper: {\n        // We disable default browser outline because Chonky provides its own outline\n        // (which doesn't compromise accessibility, hopefully)\n        outline: 'none !important',\n        position: 'relative',\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { VariableSizeGrid } from 'react-window';\n\nimport { ChonkyActions } from '../../action-definitions';\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewConfigGrid } from '../../types/file-view.types';\nimport { RootState } from '../../types/redux.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeGlobalChonkyStyles, useIsMobileBreakpoint } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListGridProps {\n    width: number;\n    height: number;\n}\n\ninterface GridConfig {\n    rowCount: number;\n    columnCount: number;\n    gutter: number;\n    rowHeight: number;\n    columnWidth: number;\n}\n\nexport const isMobileDevice = () => {\n    // noinspection JSDeprecatedSymbols\n    return typeof window.orientation !== 'undefined' || navigator.userAgent.indexOf('IEMobile') !== -1;\n};\n\nexport const getGridConfig = (\n    width: number,\n    fileCount: number,\n    viewConfig: FileViewConfigGrid,\n    isMobileBreakpoint: boolean\n): GridConfig => {\n    const gutter = isMobileBreakpoint ? 5 : 8;\n    const scrollbar = isMobileDevice() ? 0 : 18;\n\n    let columnCount: number;\n    let columnWidth: number;\n    if (isMobileBreakpoint) {\n        columnCount = 2;\n        columnWidth = (width - gutter - scrollbar) / columnCount;\n    } else {\n        columnWidth = viewConfig.entryWidth;\n        columnCount = Math.max(1, Math.floor((width - scrollbar) / (columnWidth + gutter)));\n    }\n\n    const rowCount = Math.ceil(fileCount / columnCount);\n\n    return {\n        rowCount,\n        columnCount,\n        gutter,\n        rowHeight: viewConfig.entryHeight,\n        columnWidth,\n    };\n};\n\nexport const GridContainer: React.FC<FileListGridProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig) as FileViewConfigGrid;\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const fileCount = useMemo(() => displayFileIds.length, [displayFileIds]);\n\n    const gridRef = useRef<VariableSizeGrid>();\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n\n    // Whenever the grid config changes at runtime, we call a method on the\n    // `VariableSizeGrid` handle to reset column width/row height cache.\n    // !!! Note that we deliberately update the `gridRef` firsts and update the React\n    //     state AFTER that. This is needed to avoid file entries jumping up/down.\n    const [gridConfig, setGridConfig] = useState(getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint));\n    const gridConfigRef = useRef(gridConfig);\n    useEffect(() => {\n        const oldConf = gridConfigRef.current;\n        const newConf = getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint);\n\n        gridConfigRef.current = newConf;\n        if (gridRef.current) {\n            if (oldConf.rowCount !== newConf.rowCount) {\n                gridRef.current.resetAfterRowIndex(Math.min(oldConf.rowCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnCount !== newConf.columnCount) {\n                gridRef.current.resetAfterColumnIndex(Math.min(oldConf.columnCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnWidth !== newConf.columnWidth) {\n                gridRef.current.resetAfterIndices({ columnIndex: 0, rowIndex: 0 });\n            }\n        }\n\n        setGridConfig(newConf);\n    }, [setGridConfig, gridConfigRef, isMobileBreakpoint, width, viewConfig, fileCount]);\n\n    const sizers = useMemo(() => {\n        const gc = gridConfigRef;\n        return {\n            getColumnWidth: (index: number) =>\n                gc.current.columnWidth! + (index === gc.current.columnCount - 1 ? 0 : gc.current.gutter),\n            getRowHeight: (index: number) =>\n                gc.current.rowHeight + (index === gc.current.rowCount - 1 ? 0 : gc.current.gutter),\n        };\n    }, [gridConfigRef]);\n\n    const displayFileIdsRef = useInstanceVariable(useSelector(selectors.getDisplayFileIds));\n    const getItemKey = useCallback(\n        (data: { columnIndex: number; rowIndex: number; data: any }) => {\n            const index = data.rowIndex * gridConfigRef.current.columnCount + data.columnIndex;\n\n            return displayFileIdsRef.current[index] ?? `loading-file-${index}`;\n        },\n        [gridConfigRef, displayFileIdsRef]\n    );\n\n    const cellRenderer = useCallback(\n        (data: { rowIndex: number; columnIndex: number; style: CSSProperties }) => {\n            const gc = gridConfigRef;\n            const index = data.rowIndex * gc.current.columnCount + data.columnIndex;\n            const fileId = displayFileIds[index];\n            if (displayFileIds[index] === undefined) return null;\n\n            const styleWithGutter: CSSProperties = {\n                ...data.style,\n                paddingRight: data.columnIndex === gc.current.columnCount - 1 ? 0 : gc.current.gutter,\n                paddingBottom: data.rowIndex === gc.current.rowCount - 1 ? 0 : gc.current.gutter,\n                boxSizing: 'border-box',\n            };\n\n            return (\n                <div style={styleWithGutter}>\n                    <SmartFileEntry fileId={fileId ?? null} displayIndex={index} fileViewMode={viewConfig.mode} />\n                </div>\n            );\n        },\n        [displayFileIds, viewConfig.mode]\n    );\n\n    const classes = useStyles();\n    const gridComponent = useMemo(() => {\n        return (\n            <VariableSizeGrid\n                ref={gridRef as any}\n                className={classes.gridContainer}\n                estimatedRowHeight={gridConfig.rowHeight + gridConfig.gutter}\n                rowHeight={sizers.getRowHeight}\n                estimatedColumnWidth={gridConfig.columnWidth + gridConfig.gutter}\n                columnWidth={sizers.getColumnWidth}\n                columnCount={gridConfig.columnCount}\n                height={height}\n                rowCount={gridConfig.rowCount}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {cellRenderer}\n            </VariableSizeGrid>\n        );\n    }, [\n        classes.gridContainer,\n        gridConfig.rowHeight,\n        gridConfig.gutter,\n        gridConfig.columnWidth,\n        gridConfig.columnCount,\n        gridConfig.rowCount,\n        sizers.getRowHeight,\n        sizers.getColumnWidth,\n        height,\n        width,\n        getItemKey,\n        cellRenderer,\n    ]);\n\n    return gridComponent;\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    gridContainer: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useMemo, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FixedSizeList } from 'react-window';\n\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListListProps {\n    width: number;\n    height: number;\n}\n\nexport const ListContainer: React.FC<FileListListProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const listRef = useRef<FixedSizeList>();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const displayFileIdsRef = useInstanceVariable(displayFileIds);\n    const getItemKey = useCallback(\n        (index: number) => displayFileIdsRef.current[index] ?? `loading-file-${index}`,\n        [displayFileIdsRef]\n    );\n\n    const classes = useStyles();\n    const listComponent = useMemo(() => {\n        // When entry size is null, we use List view\n        const rowRenderer = (data: { index: number; style: CSSProperties }) => {\n            return (\n                <div style={data.style}>\n                    <SmartFileEntry\n                        fileId={displayFileIds[data.index] ?? null}\n                        displayIndex={data.index}\n                        fileViewMode={FileViewMode.List}\n                    />\n                </div>\n            );\n        };\n\n        return (\n            <FixedSizeList\n                ref={listRef as any}\n                className={classes.listContainer}\n                itemSize={viewConfig.entryHeight}\n                height={height}\n                itemCount={displayFileIds.length}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {rowRenderer}\n            </FixedSizeList>\n        );\n    }, [\n        classes.listContainer,\n        viewConfig.entryHeight,\n        height,\n        displayFileIds,\n        width,\n        getItemKey,\n    ]);\n\n    return listComponent;\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listContainer: {\n        borderTop: `solid 1px ${theme.palette.divider}`,\n    },\n}));\n","import React, { UIEvent, useCallback, useContext, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectCurrentFolder, selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    c, getStripeGradient, makeGlobalChonkyStyles, makeLocalChonkyStyles\n} from '../../util/styles';\nimport { FileListEmpty } from './FileListEmpty';\nimport { GridContainer } from './GridContainer';\nimport { ListContainer } from './ListContainer';\n\nexport interface FileListProps {\n    onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n}\n\ninterface StyleState {\n    dndCanDrop: boolean;\n    dndIsOverCurrent: boolean;\n}\n\nexport const FileList: React.FC<FileListProps> = React.memo((props: FileListProps) => {\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const currentFolder = useSelector(selectCurrentFolder);\n    const { drop, dndCanDrop, dndIsOverCurrent } = useFileDrop({ file: currentFolder });\n    const styleState = useMemo<StyleState>(() => ({ dndCanDrop, dndIsOverCurrent }), [dndCanDrop, dndIsOverCurrent]);\n\n    const localClasses = useLocalStyles(styleState);\n    const classes = useStyles(viewConfig);\n    const { onScroll } = props;\n\n    // In Chonky v0.x, this field was user-configurable. In Chonky v1.x+, we hardcode\n    // this to `true` to simplify configuration. Users can just wrap Chonky in their\n    // own `div` if they want to have finer control over the height.\n    const fillParentContainer = true;\n\n    const listRenderer = useCallback(\n        ({ width, height }: { width: number; height: number }) => {\n            if (displayFileIds.length === 0) {\n                return <FileListEmpty width={width} height={viewConfig.entryHeight} />;\n            } else if (viewConfig.mode === FileViewMode.List) {\n                return <ListContainer width={width} height={height} />;\n            } else {\n                return <GridContainer width={width} height={height} />;\n            }\n        },\n        [displayFileIds, viewConfig]\n    );\n\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    return (\n        <div onScroll={onScroll} ref={drop} className={c([classes.fileListWrapper, localClasses.fileListWrapper])} role=\"list\">\n            <div className={localClasses.dndDropZone}>\n                <div className={localClasses.dndDropZoneIcon}>\n                    <ChonkyIcon icon={dndCanDrop ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop} />\n                </div>\n            </div>\n            <AutoSizer disableHeight={!fillParentContainer}>{listRenderer}</AutoSizer>\n        </div>\n    );\n});\nFileList.displayName = 'FileList';\n\nconst useLocalStyles = makeLocalChonkyStyles(theme => ({\n    fileListWrapper: {\n        minHeight: ChonkyActions.EnableGridView.fileViewConfig.entryHeight + 2,\n        background: (state: StyleState) =>\n            state.dndIsOverCurrent && state.dndCanDrop\n                ? state.dndCanDrop\n                    ? getStripeGradient(theme.dnd.fileListCanDropMaskOne, theme.dnd.fileListCanDropMaskTwo)\n                    : getStripeGradient(theme.dnd.fileListCannotDropMaskOne, theme.dnd.fileListCannotDropMaskTwo)\n                : 'none',\n    },\n    dndDropZone: {\n        display: (state: StyleState) =>\n            // When we cannot drop, we don't show an indicator at all\n            state.dndIsOverCurrent && state.dndCanDrop ? 'block' : 'none',\n        borderRadius: theme.gridFileEntry.borderRadius,\n        pointerEvents: 'none',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 2,\n    },\n    dndDropZoneIcon: {\n        backgroundColor: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask),\n        color: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor),\n        borderRadius: theme.gridFileEntry.borderRadius,\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        textAlign: 'center',\n        lineHeight: '60px',\n        fontSize: '2em',\n        left: '50%',\n        height: 60,\n        top: '50%',\n        width: 60,\n    },\n}));\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileListWrapper: {\n        height: '100%',\n        maxHeight: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { ReactElement, useEffect, useMemo } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Menu from '@material-ui/core/Menu';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuConfig, selectContextMenuItems } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuDismisser } from './FileContextMenu-hooks';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport interface FileContextMenuProps {}\n\nexport const FileContextMenu: React.FC<FileContextMenuProps> = React.memo(() => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(reduxActions.setContextMenuMounted(true));\n        return () => {\n            dispatch(reduxActions.setContextMenuMounted(false));\n        };\n    }, [dispatch]);\n\n    const intl = useIntl();\n    const browserMenuShortcutString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.FileContextMenu, 'browserMenuShortcut'),\n            defaultMessage: 'Browser menu: {shortcut}',\n        },\n        { shortcut: <strong>Alt + Right Click</strong> }\n    );\n\n    const contextMenuConfig = useSelector(selectContextMenuConfig);\n    const contextMenuItems = useSelector(selectContextMenuItems);\n\n    const hideContextMenu = useContextMenuDismisser();\n    const contextMenuItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < contextMenuItems.length; ++i) {\n            const item = contextMenuItems[i];\n\n            if (typeof item === 'string') {\n                components.push(\n                    <SmartToolbarDropdownButton\n                        key={`context-menu-item-${item}`}\n                        fileActionId={item}\n                        onClickFollowUp={hideContextMenu}\n                    />\n                );\n            } else {\n                item.fileActionIds.map(id =>\n                    components.push(\n                        <SmartToolbarDropdownButton\n                            key={`context-menu-item-${item.name}-${id}`}\n                            fileActionId={id}\n                            onClickFollowUp={hideContextMenu}\n                        />\n                    )\n                );\n            }\n        }\n        return components;\n    }, [contextMenuItems, hideContextMenu]);\n\n    const anchorPosition = useMemo(\n        () => (contextMenuConfig ? { top: contextMenuConfig.mouseY, left: contextMenuConfig.mouseX } : undefined),\n        [contextMenuConfig]\n    );\n\n    const classes = useStyles();\n    return (\n        <Menu\n            elevation={2}\n            disablePortal\n            onClose={hideContextMenu}\n            transitionDuration={150}\n            open={!!contextMenuConfig}\n            anchorPosition={anchorPosition}\n            anchorReference=\"anchorPosition\"\n            classes={{ list: classes.contextMenuList }}\n        >\n            {contextMenuItemComponents}\n            <ListSubheader component=\"div\" className={classes.browserMenuTooltip}>\n                {browserMenuShortcutString}\n            </ListSubheader>\n        </Menu>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    contextMenuList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    browserMenuTooltip: {\n        lineHeight: important('30px'),\n        fontSize: important('0.7em'),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { FileList } from '../file-list/FileList';\nimport { FileBrowser } from './FileBrowser';\nimport { FileContextMenu } from './FileContextMenu';\nimport { FileNavbar } from './FileNavbar';\nimport { FileToolbar } from './FileToolbar';\n\nexport const FullFileBrowser = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        const { onScroll } = props\n        return (\n            <FileBrowser ref={ref} {...props}>\n                <FileNavbar />\n                <FileToolbar />\n                <FileList onScroll={onScroll}/>\n                <FileContextMenu/>\n            </FileBrowser>\n        );\n    })\n);\nFullFileBrowser.displayName = 'FullFileBrowser';\n","/**\n *\n */\n\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { FileActionData } from '../types/action-handler.types';\nimport { FileAction } from '../types/action.types';\nimport { FileArray, FileData } from '../types/file.types';\nimport { FileHelper } from '../util/file-helper';\n\nexport interface CustomFileData extends FileData {\n    parentId?: string;\n    childrenIds?: string[];\n}\nexport interface CustomFileMap<FT extends CustomFileData> {\n    [fileId: string]: FT;\n}\nexport interface FileMapParams<FT extends CustomFileData> {\n    baseFileMap: CustomFileMap<FT>;\n    initialFolderId: string;\n}\n\nexport const useFolderChain = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n\n        const folderChain = [currentFolder];\n\n        let parentId = currentFolder.parentId;\n        while (parentId) {\n            const parentFile = fileMap[parentId];\n            if (parentFile) {\n                folderChain.unshift(parentFile);\n                parentId = parentFile.parentId;\n            } else {\n                break;\n            }\n        }\n\n        return folderChain;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFiles = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n        const childrenIds = currentFolder.childrenIds!;\n        const files = childrenIds.map((fileId: string) => fileMap[fileId]);\n        return files;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFileMapMethods = <FT extends CustomFileData>(\n    baseFileMap: CustomFileMap<FT>,\n    initialFolderId: string\n) => {\n    const [fileMap, setFileMap] = useState(baseFileMap);\n    const [currentFolderId, setCurrentFolderId] = useState(initialFolderId);\n    const resetFileMap = useCallback(() => {\n        setFileMap(baseFileMap);\n        setCurrentFolderId(initialFolderId);\n    }, [baseFileMap, initialFolderId]);\n    const moveFiles = useCallback(\n        (files: FT[], source: FT, destination: FT) =>\n            setFileMap(currentFileMap => {\n                const newFileMap = { ...currentFileMap };\n                const moveFileIds = new Set(files.map(f => f.id));\n\n                // Delete files from their source folder.\n                const newSourceChildrenIds = source.childrenIds!.filter(id => !moveFileIds.has(id));\n                newFileMap[source.id] = {\n                    ...source,\n                    childrenIds: newSourceChildrenIds,\n                    childrenCount: newSourceChildrenIds.length,\n                };\n\n                // Add the files to their destination folder.\n                const newDestinationChildrenIds = [...destination.childrenIds!, ...files.map(f => f.id)];\n                newFileMap[destination.id] = {\n                    ...destination,\n                    childrenIds: newDestinationChildrenIds,\n                    childrenCount: newDestinationChildrenIds.length,\n                };\n\n                // Finally, update the parent folder ID on the files from source folder\n                // ID to the destination folder ID.\n                files.forEach(file => {\n                    newFileMap[file.id] = {\n                        ...file,\n                        parentId: destination.id,\n                    };\n                });\n\n                return newFileMap;\n            }),\n        []\n    );\n\n    const methods = useMemo(\n        () => ({\n            setFileMap,\n            setCurrentFolderId,\n            resetFileMap,\n            moveFiles,\n        }),\n        [setFileMap, setCurrentFolderId, resetFileMap, moveFiles]\n    );\n    return {\n        fileMap,\n        currentFolderId,\n        methods,\n    };\n};\nexport type FileMethods = ReturnType<typeof useFileMapMethods>['methods'];\n\nexport const useFileActionHandler = (methods: FileMethods) => {\n    return useCallback(\n        (data: FileActionData<FileAction>) => {\n            if (data.id === ChonkyActions.OpenFiles.id) {\n                const { targetFile, files } = data.payload;\n                const fileToOpen = targetFile ?? files[0];\n                if (fileToOpen && FileHelper.isDirectory(fileToOpen)) {\n                    methods.setCurrentFolderId(fileToOpen.id);\n                }\n            } else if (data.id === ChonkyActions.MoveFiles.id) {\n                methods.moveFiles(data.payload.files, data.payload.source!, data.payload.destination);\n            }\n        },\n        [methods]\n    );\n};\n\nexport const useFileMap = <FT extends CustomFileData = CustomFileData>({\n    baseFileMap,\n    initialFolderId,\n}: FileMapParams<FT>) => {\n    const { fileMap, currentFolderId, methods } = useFileMapMethods(baseFileMap, initialFolderId);\n    const folderChain = useFolderChain(fileMap, currentFolderId);\n    const files = useFiles(fileMap, currentFolderId);\n    const fileActionHandler = useFileActionHandler(methods as FileMethods);\n\n    const data = {\n        fileMap,\n        currentFolderId,\n        folderChain,\n        files,\n    };\n    return { data, methods, fileActionHandler };\n};\n"],"names":["SortOrder","UNINITIALIZED_SENTINEL","useStaticValue","factory","valueRef","useRef","current","useInstanceVariable","value","ref","useEffect","Logger","error","args","console","warn","debug","formatBullets","bullets","join","FileHelper","isDirectory","file","isDir","isHidden","isSymlink","isEncrypted","isClickable","isOpenable","openable","isSelectable","selectable","isDraggable","draggable","isDroppable","droppable","isDndOpenable","dndOpenable","getModDate","modDate","parseDate","maybeDate","Date","message","isNaN","getTime","getChildrenCount","childrenCount","sanitizeInputArray","mode","rawArray","sanitizedFiles","errorMessages","Array","isArray","nonObjectFileCount","missingFieldFileCount","seenIds","Set","duplicateIds","i","length","item","id","name","has","add","push","size","repeatedIdsString","from","arrayString","itemString","errorMessageString","sanitizedArray","OptionIds","ShowHiddenFiles","ShowFoldersFirst","DarkMode","FileViewMode","ChonkyIconName","selectInstanceId","state","instanceId","selectExternalFileActionHandler","externalFileActionHandler","selectFileActionMap","fileActionMap","selectFileActionIds","fileActionIds","selectFileActionData","fileActionId","selectToolbarItems","toolbarItems","selectContextMenuItems","contextMenuItems","selectFolderChain","folderChain","selectCurrentFolder","selectParentFolder","selectFileMap","fileMap","selectCleanFileIds","cleanFileIds","selectFileData","fileId","selectHiddenFileIdMap","hiddenFileIdMap","selectHiddenFileCount","Object","keys","selectFocusSearchInput","focusSearchInput","selectSearchString","searchString","selectSelectionMap","selectionMap","selectSelectedFileIds","selectSelectionSize","selectIsFileSelected","selectSelectedFiles","map","selectSelectedFilesForAction","action","requiresSelection","getSelectedFiles","fileFilter","selectSelectedFilesForActionCount","getSelectedFilesForAction","_getSelectedFilesForA","selectDisableSelection","disableSelection","selectFileViewConfig","fileViewConfig","selectSortActionId","sortActionId","selectSortOrder","sortOrder","selectOptionMap","optionMap","selectOptionValue","optionId","selectThumbnailGenerator","thumbnailGenerator","selectDoubleClickDelay","doubleClickDelay","selectIsDnDDisabled","disableDragAndDrop","selectClearSelectionOnOutsideClick","clearSelectionOnOutsideClick","selectContextMenuMounted","contextMenuMounted","selectContextMenuConfig","contextMenuConfig","selectContextMenuTriggerFile","config","triggerFileId","getFileActionMap","getOptionMap","getFileMap","getFileIds","fileIds","getCleanFileIds","getSortActionId","getSortOrder","getSearchString","_getLastClick","lastClick","makeGetAction","fileActionSelector","createSelector","makeGetOptionValue","defaultValue","undefined","makeGetFiles","fileIdsSelector","getSortedFileIds","files","sortAction","showFolderFirst","prepareSortKeySelector","selector","sortFunctions","desc","sortKeySelector","ASC","sort","by","getSearcher","cleanFiles","FuzzySearch","caseSensitive","getSearchFilteredFileIds","searcher","search","f","getHiddenFileIdMap","searchFilteredFileIds","showHiddenFiles","searchFilteredFileIdsSet","forEach","selectors","getDisplayFileIds","sortedFileIds","filter","getLastClickIndex","displayFileIds","index","getFileData","getIsFileSelected","selectedFiles","filters","filteredSelectedFiles","reduce","prevFiles","thunkUpdateRawFileActions","rawFileActions","disableDefaultFileActions","dispatch","defaultActionsToAdd","disabledActionIds","DefaultFileActions","fileActions","seenActionIds","addToSeen","a","wasNotSeen","fileActionArrays","duplicateFreeArrays","arr","duplicateFreeArray","concat","mergeFileActionsArrays","EssentialFileActions","optionDefaults","option","reduxActions","setRawFileActions","setFileActionsErrorMessages","setFileActions","setOptionDefaults","thunkUpdateToolbarNContextMenuItems","excludedToolbarFileActionIds","ChonkyActions","OpenParentFolder","seenToolbarGroups","seenContextMenuGroups","getGroup","itemArray","seenMap","groupName","group","button","toolbar","contextMenu","updateFileActionMenuItems","thunkUpdateDefaultFileViewActionId","getState","setFileViewConfig","thunkActivateSortAction","order","DESC","setSort","actionId","thunkDispatchFileAction","data","_dispatch","Promise","resolve","thunkRequestFileAction","payload","selectedFilesForAction","actionState","contextMenuTriggerFile","toggleOption","selectionTransform","prevSelection","hiddenFileIds","newSelection","clearSelection","selectFiles","reset","thunkApplySelectionTransform","effect","maybeEffectPromise","reduxDispatch","getReduxState","then","effectResult","triggerDispatchAfterEffect","I18nNamespace","defineFileAction","__payloadType","hotkeys","errorMessage","Error","findElementAmongAncestors","maybeElement","predicate","parentElement","getValueOrFallback","fallback","desiredType","EssentialActions","MouseClickFile","params","clickType","OpenFiles","targetFile","ctrlKey","toggleSelection","exclusive","setLastClickIndex","fileDisplayIndex","shiftKey","lastClickIndex","rangeStart","rangeEnd","fileIdsToSelect","slice","KeyboardClickFile","enterKey","spaceKey","StartDragNDrop","draggedFile","EndDragNDrop","destination","MoveFiles","ChangeSelection","icon","openParentFolder","iconOnly","parentFolder","OpenFileContextMenu","triggerFile","showContextMenu","mouseX","clientX","mouseY","clientY","DefaultActions","OpenSelection","openFiles","SelectAllFiles","selectAllFiles","ClearSelection","EnableListView","List","entryHeight","list","EnableCompactView","Compact","entryWidth","compact","EnableGridView","Grid","smallThumbnail","SortFilesByName","toLowerCase","SortFilesBySize","SortFilesByDate","ToggleHiddenFiles","ToggleShowFoldersFirst","FocusSearchInput","ToggleDarkMode","ExtraActions","CopyFiles","copy","CreateFolder","tooltip","folderCreate","UploadFiles","upload","DownloadFiles","download","DeleteFiles","trash","initialRootState","fileActionsErrorMessages","rawFolderChain","folderChainErrorMessages","rawFiles","filesErrorMessages","searchMode","createSlice","initialState","reducers","setExternalFileActionHandler","setRawFolderChain","setRawFiles","selectedFileId","setSortedFileIds","setHiddenFileIds","setFocusSearchInput","setSearchString","oldValue","setSelectionDisabled","setThumbnailGenerator","setDoubleClickDelay","setDisableDragAndDrop","setClearSelectionOnOutsideClick","setContextMenuMounted","hideContextMenu","actions","rootReducer","reducer","useChonkyStore","chonkyInstanceId","store","preloadedState","configureStore","middleware","getDefaultMiddleware","serializableCheck","devTools","selectionWatcher","watch","unsubscribeCallbacks","subscribe","oldSelection","selectedFilesIds","selection","unsubscribe","useStoreWatchers","useParamSelector","parametrizedSelector","selectorParams","useCallback","useSelector","useDTE","actionCreator","useDispatch","usePropReduxUpdate","ChonkyIconPlaceholder","React","title","defaultConfig","onFileAction","disableDragAndDropProvider","defaultSortActionId","defaultFileViewActionId","iconComponent","darkMode","i18n","getI18nId","namespace","stringId","getActionI18nId","FileActions","useLocalizedFileActionStrings","intl","useIntl","useMemo","buttonName","buttonTooltip","formatMessage","defaultMessage","_action$button","_action$button2","_action$button3","useLocalizedFileEntryStrings","formatters","useContext","ChonkyFormattersContext","fileModDateString","formatFileModDate","fileSizeString","formatFileSize","defaultFormatters","safeModDate","formatDate","dateStyle","timeStyle","_intl","sizeData","filesize","bits","output","symbol","Math","round","createContext","ChonkyIconContext","VideoExtensions","ImageExtensions","AudioExtensions","ColorsLight","ColorsDark","iconTrie","colourIndex","IconsToExtensions","license","model","database","text","archive","image","video","code","info","key","lock","music","terminal","users","linux","ubuntu","windows","rust","python","nodejs","php","git","adobe","pdf","excel","word","flash","exactTrie","ExactTrie","ignoreCase","pair","extensions","put","colorCode","getIconTrie","lightTheme","colors","debugRed","debugBlue","debugGreen","debugPurple","debugYellow","textActive","fontSizes","rootPrimary","margins","rootLayoutMargin","lineHeight","fontSize","buttonRadius","dnd","canDropColor","cannotDropColor","canDropMask","cannotDropMask","fileListCanDropMaskOne","fileListCanDropMaskTwo","fileListCannotDropMaskOne","fileListCannotDropMaskTwo","dragLayer","border","padding","borderRadius","fileList","desktopGridGutter","mobileGridGutter","gridFileEntry","childrenCountSize","iconColorFocused","iconSize","iconColor","fileColorTint","folderBackColorTint","folderFrontColorTint","listFileEntry","propertyFontSize","iconFontSize","iconBorderRadius","darkThemeOverride","mobileThemeOverride","useIsMobileBreakpoint","useMediaQuery","getStripeGradient","colorOne","colorTwo","makeLocalChonkyStyles","styles","createUseStyles","makeGlobalChonkyStyles","makeStyles","selectorMapping","useStyles","theme","localStyles","globalStyles","localSelector","globalSelector","classes","important","c","classnames","ChonkyBusinessLogicInner","memo","forwardRef","props","useStore","useImperativeHandle","getFileSelection","setFileSelection","requestFileAction","useFileBrowserHandle","displayName","ChonkyBusinessLogic","useDndContextAvailable","DndContext","dragDropManager","layerStyles","position","pointerEvents","zIndex","left","top","width","height","getItemStyles","initialCursorOffset","initialFileOffset","currentFileOffset","display","transform","x","y","WebkitTransform","DnDFileListDragLayer","useDragLayer","monitor","getItem","itemType","getItemType","getInitialClientOffset","getInitialSourceClientOffset","getSourceClientOffset","isDragging","selectionSize","style","className","fileDragPreview","boxShadow","palette","divider","backgroundColor","background","color","primary","HotkeyListener","fileAction","hotkeysStr","hotkeyCallback","event","preventDefault","unbind","ChonkyPresentationLayer","children","dndDisabled","handleClickAway","target","element","tagName","hotkeyListenerComponents","dndContextAvailable","contextMenuMountedRef","altKey","fileEntryWrapperDiv","dataset","chonkyFileId","useContextMenuTrigger","ClickAwayListener","onClickAway","Box","chonkyRoot","onContextMenu","paper","touchAction","fontFamily","flexDirection","boxSizing","textAlign","webkitTouchCallout","webkitUserSelect","mozUserSelect","msUserSelect","userSelect","FileBrowser","shortid","generate","isMobileBreakpoint","muiTheme","createMuiTheme","type","combinedTheme","merge","chonkyComps","IntlProvider","locale","defaultLocale","Provider","ReduxProvider","ThemeProvider","MuiThemeProvider","DndProvider","backend","HTML5Backend","CustomVisibilityState","useFileDrop","forceDisableDrop","includeChildrenDrops","folderChainRef","mockHook","useHook","useDrop","useDropIfAvailable","accept","drop","_item","canDrop","dropTarget","isOver","shallow","source","prohibitedFileIds","folder","collect","isOverCurrent","dndIsOver","dndIsOverCurrent","dndCanDrop","useDndHoverOpen","dndState","currentFolderRef","timeout","_currentFolderRef$cur","setTimeout","clearTimeout","TextPlaceholder","min","max","placeholderLength","maxLength","minLength","floor","random","whitespace","repeat","textPlaceholder","dangerouslySetInnerHTML","__html","opacity","animationName","animationIterationCount","animationTimingFunction","animationDuration","whiteSpace","overflow","maxWidth","minWidth","useFileEntryHtmlProps","role","useFileEntryState","selected","focused","iconData","getWithCheckpoints","loading","useIconData","useThumbnailUrl","thumbnailUrl","thumbnailLoading","fileColor","iconSpin","useDndIcon","dndIconName","dndCannotDrop","dndIsDragging","dndDragging","useState","setThumbnailUrl","setThumbnailLoading","loadingAttempts","loadingCancelled","useFileActionTrigger","useFileActionProps","optionValue","_action$option","actionSelectionEmpty","active","disabled","sortAsc","sortDesc","placeholder","toggleOn","toggleOff","isSortButtonAndCurrentSort","isFileViewButtonAndCurrentView","isOptionAndEnabled","customDisabled","customActive","customVisibility","Disabled","Active","ToolbarButton","externalClassName","onClick","dropdown","ChonkyIcon","iconWithText","fallbackIcon","fixedWidth","baseButton","iconOnlyButton","activeButton","Button","iconDropdown","textTransform","letterSpacing","paddingBottom","paddingTop","marginRight","marginLeft","marginTop","SmartToolbarButton","triggerAction","Hidden","FolderChainButton","first","baseBreadcrumb","disabledBreadcrumb","currentBreadcrumb","folderChainIcon","buttonContainer","dndIndicator","textDecoration","FileNavbar","folderChainItems","items","folderChainComponents","components","component","navbarWrapper","navbarContainer","Breadcrumbs","navbarBreadcrumbs","separator","upDirectoryButton","flexGrow","ToolbarDropdownButton","MenuItem","ListItemIcon","ListItemText","primaryTypographyProps","minHeight","SmartToolbarDropdownButton","onClickFollowUp","handleClick","ToolbarDropdown","anchor","setAnchor","currentTarget","handleClose","menuItemComponents","localizedName","FileActionGroups","Menu","autoFocus","keepMounted","elevation","anchorEl","onClose","open","Boolean","transitionDuration","dropdownList","ToolbarInfo","hiddenCount","fileCountString","Toolbar","fileCount","selectedString","hiddenString","infoContainer","Typography","infoText","variant","extraInfoSpan","selectionSizeText","hiddenCountText","ToolbarSearch","searchPlaceholderString","searchInputRef","reduxSearchString","localSearchString","setLocalSearchString","debouncedLocalSearchString","delay","debouncedValue","setDebouncedValue","handler","useDebounce","showLoadingIndicator","setShowLoadingIndicator","focus","handleChange","handleKeyUp","blur","TextField","searchFieldContainer","onChange","inputRef","InputProps","onKeyUp","startAdornment","InputAdornment","searchIcon","spin","searchFieldInput","inputProps","searchFieldInputInner","margin","paddingLeft","FileToolbar","toolbarItemComponents","toolbarWrapper","toolbarContainer","toolbarLeft","toolbarRight","flexWrap","toolbarLeftFiller","FileListEmpty","emptyString","FileList","fileListEmpty","fileListEmptyContent","folderOpen","ClickableWrapper","WrapperTag","wrapperTag","passthroughProps","onSingleClick","onDoubleClick","onKeyboardClick","setFocused","counter","clickCount","clickTimeout","mouseClickEvent","metaKey","useClickHandler","handleKeyDown","keyboardClickEvent","nativeEvent","stopPropagation","useKeyDownHandler","compProps","onFocus","onBlur","onKeyDown","tabIndex","mergedProps","FileEntryName","modifierIconComponents","modifierIcons","hidden","symlink","useModifierIconComponents","fileNameComponent","parts","extension","ext","split","substr","useFileNameComponent","hint","paddingRight","CompactEntry","entryState","fileEntryHtmlProps","listFileEntryIcon","listFileEntryDescription","listFileEntryName","listFileEntryProperties","listFileEntryProperty","alignItems","DnDFileEntry","fileRef","getDndStartPayload","reduxState","sourceInstanceId","canDrag","onDragStart","onDragEnd","dropResult","getDropResult","dropEffect","useDrag","useDragIfAvailable","begin","end","drag","preview","getEmptyImage","captureDraggingState","useFileDrag","useFileEntryDnD","fillParent","FileThumbnail","thumbnailStyle","backgroundImage","fileThumbnail","backgroundRepeat","backgroundPosition","backgroundSize","GridEntryDndIndicator","borderBottom","borderLeft","content","GridEntryPreviewFolder","folderClasses","useFolderStyles","fileClasses","useFileStyles","commonClasses","useCommonEntryStyles","previewFile","folderBackSideMid","folderBackSideTop","folderFrontSide","fileIcon","selectionIndicator","thumbnail","borderTopLeftRadius","borderTopRightRadius","right","borderRightColor","borderTopColor","borderBottomColor","borderLeftColor","borderWidth","borderStyle","bottom","shadows","GridEntryPreviewFile","focusIndicator","GridEntry","useFileEntryStyles","entryClassName","gridFileEntryPreview","gridFileEntryNameContainer","gridFileEntryName","wordBreak","ListEntry","styleState","listFileEntrySelection","textOverflow","flex","disabledDndState","SmartFileEntry","EntryComponent","displayIndex","fileViewMode","fileClickHandlers","onMouseClick","useFileClickHandlers","clickableWrapperProps","fileEntryClickableWrapper","fileEntryProps","outline","getGridConfig","viewConfig","columnCount","columnWidth","gutter","scrollbar","window","orientation","navigator","userAgent","indexOf","rowCount","ceil","rowHeight","GridContainer","gridRef","gridConfig","setGridConfig","gridConfigRef","oldConf","newConf","resetAfterRowIndex","resetAfterColumnIndex","resetAfterIndices","columnIndex","rowIndex","sizers","gc","getColumnWidth","getRowHeight","displayFileIdsRef","getItemKey","cellRenderer","styleWithGutter","VariableSizeGrid","gridContainer","estimatedRowHeight","estimatedColumnWidth","itemKey","ListContainer","listRef","FixedSizeList","listContainer","itemSize","itemCount","borderTop","currentFolder","localClasses","useLocalStyles","onScroll","listRenderer","fileListWrapper","dndDropZone","dndDropZoneIcon","AutoSizer","disableHeight","maxHeight","FileContextMenu","browserMenuShortcutString","shortcut","useContextMenuDismisser","contextMenuItemComponents","anchorPosition","disablePortal","anchorReference","contextMenuList","ListSubheader","browserMenuTooltip","FullFileBrowser","useFolderChain","currentFolderId","parentId","parentFile","unshift","useFiles","childrenIds","useFileMapMethods","baseFileMap","initialFolderId","setFileMap","setCurrentFolderId","resetFileMap","moveFiles","currentFileMap","newFileMap","moveFileIds","newSourceChildrenIds","newDestinationChildrenIds","methods","useFileActionHandler","fileToOpen","fileActionHandler"],"mappings":"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SAIhCf,GAA0BkB,gBAAcb,Ia5FxCc,GAAoBD,gBAA4ChD,IAEhEkD,GAA4B,CACrC,MACA,MACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,OACA,OACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,MACA,MACA,MACA,MACA,QACA,MACA,OACA,MACA,OACA,MACA,OACA,MACA,MACA,MACA,KACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,OACA,OACA,OACA,OACA,MACA,MACA,OACA,KACA,MACA,MACA,OAESC,GAA4B,CACrC,MACA,OACA,MACA,MACA,MACA,OACA,MACA,MACA,MACA,OACA,OACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,KACA,MACA,OACA,QACA,OACA,QACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,OACA,OACA,MACA,OACA,MACA,OACA,MACA,MACA,MACA,MACA,OAESC,GAA4B,CACrC,OACA,MACA,MACA,MACA,OACA,OACA,KACA,MACA,MACA,MACA,QACA,YACA,YACA,YACA,MACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,OACA,MACA,MACA,OACA,OACA,MACA,MACA,MACA,KACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,MACA,MACA,OACA,MACA,MAESC,GAAwB,CACjC,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAESC,GAAuB,CAChC,OACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAoEEC,GAjEc,mBACZC,EAAc,EAGZC,EAAoB,EAErB1Z,uBAAe2Z,QAAS,CAAC,YAC1B,CAAC3Z,uBAAe2E,OAAQ,CAAC,MAAO,MAAO,MAAO,OAAQ,QACtD,CAAC3E,uBAAe4Z,MAAO,CAAC,MAAO,MAAO,MAAO,QAC7C,CAAC5Z,uBAAe6Z,SAAU,CAAC,MAAO,OAAQ,MAAO,SAAU,UAAW,MAAO,MAAO,MAAO,MAAO,SAClG,CAAC7Z,uBAAe8Z,KAAM,CAAC,MAAO,KAAM,QACpC,CAAC9Z,uBAAe+Z,QAAS,CAAC,MAAO,MAAO,MAAO,SAAU,OACzD,CAAC/Z,uBAAega,MAAOZ,IACvB,CAACpZ,uBAAeia,MAAOd,IACvB,CAACnZ,uBAAeka,KAAM,CAAC,OAAQ,MAAO,MAAO,OAAQ,OAAQ,OAAQ,MAAO,IAAK,MAAO,IAAK,QAC7F,CAACla,uBAAema,KAAM,CAAC,MAAO,SAAU,QACxC,CAACna,uBAAeoa,IAAK,CAAC,MAAO,QAC7B,CAACpa,uBAA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"}
\ No newline at end of file
+{"version":3,"file":"chonky.cjs.production.min.js","sources":["../src/util/hooks-helpers.ts","../src/types/sort.types.ts","../src/util/logger.ts","../src/util/file-helper.ts","../src/redux/files-transforms.ts","../src/action-definitions/option-ids.ts","../src/types/file-view.types.ts","../src/types/icons.types.ts","../src/redux/selectors.ts","../src/redux/thunks/file-actions.thunks.ts","../src/redux/thunks/dispatchers.thunks.ts","../src/util/i18n.ts","../src/util/helpers.ts","../src/action-definitions/essential.ts","../src/redux/thunks/index.ts","../src/action-definitions/default.ts","../src/action-definitions/extra.ts","../src/action-definitions/index.ts","../src/redux/state.ts","../src/redux/reducers.ts","../src/redux/store.ts","../src/redux/watchers.ts","../src/components/internal/ChonkyIconPlaceholder.tsx","../src/util/default-config.ts","../src/util/icon-helper.ts","../src/util/styles.ts","../src/components/internal/ChonkyBusinessLogic.tsx","../src/util/file-browser-handle.ts","../src/util/dnd-fallback.ts","../src/components/file-list/DnDFileListDragLayer.tsx","../src/types/dnd.types.ts","../src/components/internal/HotkeyListener.tsx","../src/components/internal/ChonkyPresentationLayer.tsx","../src/components/external/FileContextMenu-hooks.ts","../src/components/external/FileBrowser.tsx","../src/components/external/FileNavbar-hooks.ts","../src/types/action.types.ts","../src/util/dnd.ts","../src/components/external/TextPlaceholder.tsx","../src/components/file-list/FileEntry-hooks.tsx","../src/util/file-actions.ts","../src/components/external/ToolbarButton.tsx","../src/components/external/FolderChainButton.tsx","../src/components/external/FileNavbar.tsx","../src/components/external/ToolbarDropdownButton.tsx","../src/components/external/ToolbarDropdown.tsx","../src/components/external/ToolbarInfo.tsx","../src/components/external/ToolbarSearch.tsx","../src/components/external/FileToolbar.tsx","../src/components/file-list/FileListEmpty.tsx","../src/components/internal/ClickableWrapper.tsx","../src/components/internal/ClickableWrapper-hooks.tsx","../src/components/file-list/FileEntryName.tsx","../src/components/file-list/CompactEntry.tsx","../src/components/file-list/DnDFileEntry.tsx","../src/components/file-list/FileThumbnail.tsx","../src/components/file-list/GridEntryDndIndicator.tsx","../src/components/file-list/GridEntryPreview.tsx","../src/components/file-list/GridEntry.tsx","../src/components/file-list/ListEntry.tsx","../src/components/file-list/FileEntry.tsx","../src/components/file-list/GridContainer.tsx","../src/components/file-list/ListContainer.tsx","../src/components/file-list/FileList.tsx","../src/components/external/FileContextMenu.tsx","../src/components/external/FullFileBrowser.tsx","../src/extensions/file-map.ts"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nexport const useDebounce = <T>(\n    value: T,\n    delay: number\n): [T, React.Dispatch<React.SetStateAction<T>>] => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(() => {\n        const handler = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [value, delay]);\n\n    return [debouncedValue, setDebouncedValue];\n};\n\nconst UNINITIALIZED_SENTINEL = {};\nexport const useStaticValue = <T>(factory: () => T): T => {\n    const valueRef = useRef<T>(UNINITIALIZED_SENTINEL as T);\n    if (valueRef.current === UNINITIALIZED_SENTINEL) valueRef.current = factory();\n    return valueRef.current;\n};\n\nexport const useInstanceVariable = <T>(value: T) => {\n    const ref = useRef(value);\n    useEffect(() => {\n        ref.current = value;\n    }, [ref, value]);\n    return ref;\n};\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from './file.types';\n\nexport type FileSortKeySelector = (file: Nullable<FileData>) => any;\n\nexport enum SortOrder {\n    ASC = 'asc',\n    DESC = 'desc',\n}\n","export class Logger {\n    public static error(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.error('[Chonky runtime error]', ...args);\n    }\n\n    public static warn(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.warn('[Chonky runtime warning]', ...args);\n    }\n\n    public static debug(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.debug('[Chonky runtime debug]', ...args);\n    }\n\n    public static formatBullets(bullets: string[]): string {\n        return `\\n- ${bullets.join('\\n- ')}`;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from '../types/file.types';\nimport { Logger } from './logger';\n\nexport class FileHelper {\n    public static isDirectory(file: Nullable<FileData>): file is FileData {\n        // Not a directory by default\n        return !!file && file.isDir === true;\n    }\n\n    public static isHidden(file: Nullable<FileData>): file is FileData {\n        // Not hidden by default\n        return !!file && file.isHidden === true;\n    }\n\n    public static isSymlink(file: Nullable<FileData>): file is FileData {\n        // Not a symlink by default\n        return !!file && file.isSymlink === true;\n    }\n\n    public static isEncrypted(file: Nullable<FileData>): file is FileData {\n        // Not encrypted by default\n        return !!file && file.isEncrypted === true;\n    }\n\n    public static isClickable(file: Nullable<FileData>): file is FileData {\n        // Clickable by default\n        return !!file;\n    }\n\n    public static isOpenable(file: Nullable<FileData>): file is FileData {\n        // Openable by default\n        return !!file && file.openable !== false;\n    }\n\n    public static isSelectable(file: Nullable<FileData>): file is FileData {\n        // Selectable by default\n        return !!file && file.selectable !== false;\n    }\n\n    public static isDraggable(file: Nullable<FileData>): file is FileData {\n        // File & folders are draggable by default, `null` is not\n        return !!file && file.draggable !== false;\n    }\n\n    public static isDroppable(file: Nullable<FileData>): file is FileData {\n        // Folders are droppable by default, files are not\n        if (!file) return false;\n        if (file.isDir && file.droppable !== false) return true;\n        return file.droppable === true;\n    }\n\n    public static isDndOpenable(file: Nullable<FileData>): file is FileData {\n        // Folders are DnD openable by default, files are not\n        if (!FileHelper.isOpenable(file)) return false;\n        if (file.isDir && file.dndOpenable !== false) return true;\n        return file.dndOpenable === true;\n    }\n\n    public static getModDate(file: Nullable<FileData>): Nullable<Date> {\n        if (!file || file.modDate === null || file.modDate === undefined) return null;\n        return FileHelper.parseDate(file.modDate);\n    }\n\n    public static parseDate(maybeDate: Date | string | any): Nullable<Date> {\n        if (typeof maybeDate === 'string' || typeof maybeDate === 'number') {\n            // We allow users to provide string and numerical representations of dates.\n            try {\n                return new Date(maybeDate);\n            } catch (error) {\n                Logger.error(\n                    `Could not convert provided string/number into a date: ${error.message} `,\n                    'Invalid value:',\n                    maybeDate\n                );\n            }\n        }\n        if (maybeDate instanceof Date && !isNaN(maybeDate.getTime())) {\n            // We only allow valid dates objects\n            return maybeDate;\n        }\n\n        // If we have an invalid date representation, we just return null.\n        Logger.warn('Unsupported date representation:', maybeDate);\n        return null;\n    }\n\n    public static getChildrenCount(file: Nullable<FileData>): Nullable<number> {\n        if (!file || typeof file.childrenCount !== 'number') return null;\n\n        return file.childrenCount;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileArray } from '../types/file.types';\nimport { Logger } from '../util/logger';\n\ninterface SanitizeFiles {\n    (mode: 'files', rawArray: FileArray | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'folderChain', rawArray: Nullable<FileArray> | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'fileActions', rawArray: FileAction[] | any): {\n        sanitizedArray: FileAction[];\n        errorMessages: string[];\n    };\n}\n\nexport const sanitizeInputArray: SanitizeFiles = (mode: string, rawArray: any[]) => {\n    const sanitizedFiles = [];\n    const errorMessages: string[] = [];\n\n    if ((mode === 'folderChain' || mode === 'fileActions') && !rawArray) {\n        // Do nothing, we allow folder chain to be null.\n    } else if (!Array.isArray(rawArray)) {\n        errorMessages.push(\n            `Expected \"${mode}\" prop to be an array, got \"${typeof rawArray}\" instead.`\n        );\n    } else {\n        let nonObjectFileCount = 0;\n        let missingFieldFileCount = 0;\n        const seenIds = new Set<string>();\n        const duplicateIds = new Set<string>();\n\n        for (let i = 0; i < rawArray.length; ++i) {\n            const item = rawArray[i];\n            if (!item) {\n                if (mode === 'fileActions') nonObjectFileCount++;\n                else sanitizedFiles.push(null);\n            } else if (typeof item !== 'object') {\n                nonObjectFileCount++;\n            } else {\n                if (!item.id || (mode !== 'fileActions' && !item.name)) {\n                    missingFieldFileCount++;\n                } else if (seenIds.has(item.id)) {\n                    duplicateIds.add(item.id);\n                } else {\n                    seenIds.add(item.id);\n                    sanitizedFiles.push(item);\n                }\n            }\n        }\n\n        if (nonObjectFileCount) {\n            errorMessages.push(\n                `Detected ${nonObjectFileCount} file(s) of invalid type. Remember ` +\n                    `that \"files\" array should contain either objects or nulls.`\n            );\n        }\n        if (missingFieldFileCount) {\n            errorMessages.push(\n                `Detected ${missingFieldFileCount} file(s) that are missing the ` +\n                    `required fields. Remember that file object should define an ` +\n                    `\"id\" and a \"name\".`\n            );\n        }\n        if (duplicateIds.size > 0) {\n            const repeatedIdsString = '\"' + Array.from(duplicateIds).join('\", \"') + '\"';\n            errorMessages.push(\n                `Detected ${duplicateIds.size} file IDs that are used multiple ` +\n                    `times. Remember that each file should have a unique IDs. The ` +\n                    `following IDs were seen multiple times: ${repeatedIdsString}`\n            );\n        }\n    }\n\n    if (errorMessages.length > 0) {\n        const errorMessageString = '\\n- ' + errorMessages.join('\\n- ');\n        let arrayString: string;\n        let itemString: string;\n        if (mode === 'folderChain') {\n            arrayString = 'folder chain';\n            itemString = 'files';\n        } else if (mode === 'fileActions') {\n            arrayString = 'file actions';\n            itemString = 'file actions';\n        } else {\n            // mode === 'files'\n            arrayString = 'files';\n            itemString = 'files';\n        }\n\n        Logger.error(\n            `Errors were detected when sanitizing the ${arrayString} array. ` +\n                `Offending ${itemString} were removed from the array. Summary of ` +\n                `validation errors: ${errorMessageString}`\n        );\n    }\n\n    return {\n        sanitizedArray: sanitizedFiles,\n        errorMessages,\n    };\n};\n","/**\n * We have option IDs in a separate file to avoid circular deps...\n */\nexport const OptionIds = {\n    ShowHiddenFiles: 'show_hidden_files',\n    ShowFoldersFirst: 'show_folders_first',\n    DarkMode: 'dark_mode',\n};\n","export enum FileViewMode {\n    List = 'list',\n    Compact = 'compact',\n    Grid = 'grid',\n}\n\nexport type FileViewConfigList = {\n    mode: FileViewMode.List;\n    entryHeight: number;\n};\n\nexport type FileViewConfigGrid = {\n    mode: FileViewMode.Compact | FileViewMode.Grid;\n    entryWidth: number;\n    entryHeight: number;\n};\n\nexport type FileViewConfig = FileViewConfigList | FileViewConfigGrid;\n","import React from 'react';\n\nexport enum ChonkyIconName {\n    // Misc\n    loading = 'loading',\n    dropdown = 'dropdown',\n    placeholder = 'placeholder',\n\n    // File Actions: Drag & drop\n    dndDragging = 'dndDragging',\n    dndCanDrop = 'dndCanDrop',\n    dndCannotDrop = 'dndCannotDrop',\n\n    // File Actions: File operations\n    openFiles = 'openFiles',\n    openParentFolder = 'openParentFolder',\n    copy = 'copy',\n    paste = 'paste',\n    share = 'share',\n    search = 'search',\n    selectAllFiles = 'selectAllFiles',\n    clearSelection = 'clearSelection',\n\n    // File Actions: Sorting & options\n    sortAsc = 'sortAsc',\n    sortDesc = 'sortDesc',\n    toggleOn = 'toggleOn',\n    toggleOff = 'toggleOff',\n\n    // File Actions: File Views\n    list = 'list',\n    compact = 'compact',\n    smallThumbnail = 'smallThumbnail',\n    largeThumbnail = 'largeThumbnail',\n\n    // File Actions: Unsorted\n    folder = 'folder',\n    folderCreate = 'folderCreate',\n    folderOpen = 'folderOpen',\n    folderChainSeparator = 'folderChainSeparator',\n    download = 'download',\n    upload = 'upload',\n    trash = 'trash',\n    fallbackIcon = 'fallbackIcon',\n\n    // File modifiers\n    symlink = 'symlink',\n    hidden = 'hidden',\n\n    // Generic file types\n    file = 'file',\n    license = 'license',\n    code = 'code',\n    config = 'config',\n    model = 'model',\n    database = 'database',\n    text = 'text',\n    archive = 'archive',\n    image = 'image',\n    video = 'video',\n    info = 'info',\n    key = 'key',\n    lock = 'lock',\n    music = 'music',\n    terminal = 'terminal',\n    users = 'users',\n\n    // OS file types\n    linux = 'linux',\n    ubuntu = 'ubuntu',\n    windows = 'windows',\n\n    // Programming language file types\n    rust = 'rust',\n    python = 'python',\n    nodejs = 'nodejs',\n    php = 'php',\n\n    // Development tools file types\n    git = 'git',\n\n    // Brands file types\n    adobe = 'adobe',\n\n    // Other program file types\n    pdf = 'pdf',\n    excel = 'excel',\n    word = 'word',\n    flash = 'flash',\n}\n\nexport interface FileIconData {\n    icon: ChonkyIconName | string;\n    colorCode: number;\n}\n\nexport interface ChonkyIconProps {\n    icon: ChonkyIconName | string;\n    spin?: boolean;\n    className?: string;\n    fixedWidth?: boolean;\n    style?: React.CSSProperties;\n}\n","import sort from 'fast-sort';\nimport FuzzySearch from 'fuzzy-search';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { createSelector } from '@reduxjs/toolkit';\n\nimport { OptionIds } from '../action-definitions/option-ids';\nimport { FileArray, FileData, FileFilter } from '../types/file.types';\nimport { RootState } from '../types/redux.types';\nimport { FileSortKeySelector, SortOrder } from '../types/sort.types';\nimport { FileHelper } from '../util/file-helper';\n\n// Raw selectors\nexport const selectInstanceId = (state: RootState) => state.instanceId;\nexport const selectExternalFileActionHandler = (state: RootState) => state.externalFileActionHandler;\n\nexport const selectFileActionMap = (state: RootState) => state.fileActionMap;\nexport const selectFileActionIds = (state: RootState) => state.fileActionIds;\nexport const selectFileActionData = (fileActionId: string) => (state: RootState) =>\n    selectFileActionMap(state)[fileActionId];\nexport const selectToolbarItems = (state: RootState) => state.toolbarItems;\nexport const selectContextMenuItems = (state: RootState) => state.contextMenuItems;\n\nexport const selectFolderChain = (state: RootState) => state.folderChain;\nexport const selectCurrentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const currentFolder = folderChain.length > 0 ? folderChain[folderChain.length - 1] : null;\n    return currentFolder;\n};\nexport const selectParentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const parentFolder = folderChain.length > 1 ? folderChain[folderChain.length - 2] : null;\n    return parentFolder;\n};\n\nexport const selectRawFiles = (state: RootState) => state.rawFiles;\nexport const selectFileMap = (state: RootState) => state.fileMap;\nexport const selectCleanFileIds = (state: RootState) => state.cleanFileIds;\nexport const selectFileData = (fileId: Nullable<string>) => (state: RootState) =>\n    fileId ? selectFileMap(state)[fileId] : null;\n\nexport const selectHiddenFileIdMap = (state: RootState) => state.hiddenFileIdMap;\nexport const selectHiddenFileCount = (state: RootState) => Object.keys(selectHiddenFileIdMap(state)).length;\n\nexport const selectFocusSearchInput = (state: RootState) => state.focusSearchInput;\nexport const selectSearchString = (state: RootState) => state.searchString;\n\nexport const selectSelectionMap = (state: RootState) => state.selectionMap;\nexport const selectSelectedFileIds = (state: RootState) => Object.keys(selectSelectionMap(state));\nexport const selectSelectionSize = (state: RootState) => selectSelectedFileIds(state).length;\nexport const selectIsFileSelected = (fileId: Nullable<string>) => (state: RootState) =>\n    !!fileId && !!selectSelectionMap(state)[fileId];\nexport const selectSelectedFiles = (state: RootState) => {\n    const fileMap = selectFileMap(state);\n    return Object.keys(selectSelectionMap(state)).map(id => fileMap[id]);\n};\nexport const selectSelectedFilesForAction = (fileActionId: string) => (state: RootState) => {\n    const { fileActionMap } = state;\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.requiresSelection) return undefined;\n\n    return getSelectedFiles(state, action.fileFilter);\n};\nexport const selectSelectedFilesForActionCount = (fileActionId: string) => (state: RootState) =>\n    getSelectedFilesForAction(state, fileActionId)?.length;\nexport const selectDisableSelection = (state: RootState) => state.disableSelection;\n\nexport const selectFileViewConfig = (state: RootState) => state.fileViewConfig;\n\nexport const selectSortActionId = (state: RootState) => state.sortActionId;\nexport const selectSortOrder = (state: RootState) => state.sortOrder;\n\nexport const selectOptionMap = (state: RootState) => state.optionMap;\nexport const selectOptionValue = (optionId: string) => (state: RootState) => selectOptionMap(state)[optionId];\n\nexport const selectThumbnailGenerator = (state: RootState) => state.thumbnailGenerator;\nexport const selectDoubleClickDelay = (state: RootState) => state.doubleClickDelay;\nexport const selectIsDnDDisabled = (state: RootState) => state.disableDragAndDrop;\nexport const selectClearSelectionOnOutsideClick = (state: RootState) => state.clearSelectionOnOutsideClick;\n\nexport const selectContextMenuMounted = (state: RootState) => state.contextMenuMounted;\nexport const selectContextMenuConfig = (state: RootState) => state.contextMenuConfig;\nexport const selectContextMenuTriggerFile = (state: RootState) => {\n    const config = selectContextMenuConfig(state);\n    if (!config || !config.triggerFileId) return null;\n    const fileMap = selectFileMap(state);\n    return fileMap[config.triggerFileId] ?? null;\n};\n\n// Raw selectors\nconst getFileActionMap = (state: RootState) => state.fileActionMap;\nconst getOptionMap = (state: RootState) => state.optionMap;\nconst getFileMap = (state: RootState) => state.fileMap;\nconst getFileIds = (state: RootState) => state.fileIds;\nconst getCleanFileIds = (state: RootState) => state.cleanFileIds;\nconst getSortActionId = (state: RootState) => state.sortActionId;\nconst getSortOrder = (state: RootState) => state.sortOrder;\nconst getSearchString = (state: RootState) => state.searchString;\nconst _getLastClick = (state: RootState) => state.lastClick;\n\n// Memoized selectors\nconst makeGetAction = (fileActionSelector: (state: RootState) => Nullable<string>) =>\n    createSelector([getFileActionMap, fileActionSelector], (fileActionMap, fileActionId) =>\n        fileActionId && fileActionMap[fileActionId] ? fileActionMap[fileActionId] : null\n    );\nconst makeGetOptionValue = (optionId: string, defaultValue: any = undefined) =>\n    createSelector([getOptionMap], optionMap => {\n        const value = optionMap[optionId];\n        if (value === undefined) {\n            return defaultValue;\n        }\n        return value;\n    });\nconst makeGetFiles = (fileIdsSelector: (state: RootState) => Nullable<string>[]) =>\n    createSelector(\n        [getFileMap, fileIdsSelector],\n        (fileMap, fileIds): FileArray => fileIds.map(fileId => (fileId && fileMap[fileId] ? fileMap[fileId] : null))\n    );\nconst getSortedFileIds = createSelector(\n    [\n        getFileIds,\n        getSortOrder,\n        makeGetFiles(getFileIds),\n        makeGetAction(getSortActionId),\n        makeGetOptionValue(OptionIds.ShowFoldersFirst, false),\n    ],\n    (fileIds, sortOrder, files, sortAction, showFolderFirst) => {\n        if (!sortAction) {\n            // We allow users to set the sort action ID to `null` if they want to use their\n            // own sorting mechanisms instead of relying on Chonky built-in sort.\n            return fileIds;\n        }\n\n        const prepareSortKeySelector = (selector: FileSortKeySelector) => (file: Nullable<FileData>) => selector(file);\n\n        const sortFunctions: {\n            asc?: (file: FileData) => any;\n            desc?: (file: FileData) => any;\n        }[] = [];\n\n        if (showFolderFirst) {\n            // If option is undefined (relevant actions is not enabled), we don't show\n            // folders first.\n            sortFunctions.push({\n                desc: prepareSortKeySelector(FileHelper.isDirectory),\n            });\n        }\n        if (sortAction.sortKeySelector) {\n            const configKeyName = sortOrder === SortOrder.ASC ? 'asc' : 'desc';\n            sortFunctions.push({\n                [configKeyName]: prepareSortKeySelector(sortAction.sortKeySelector),\n            });\n        }\n        if (sortFunctions.length === 0) return fileIds;\n\n        // We copy the array because `fast-sort` mutates it\n        const sortedFileIds = sort([...files])\n            .by(sortFunctions as any)\n            .map(file => (file ? file.id : null));\n        return sortedFileIds;\n    }\n);\nconst getSearcher = createSelector(\n    [makeGetFiles(getCleanFileIds)],\n    cleanFiles => new FuzzySearch(cleanFiles as FileData[], ['name'], { caseSensitive: false })\n);\nconst getSearchFilteredFileIds = createSelector(\n    [getCleanFileIds, getSearchString, getSearcher],\n    (cleanFileIds, searchString, searcher) =>\n        searchString ? searcher.search(searchString).map(f => f.id) : cleanFileIds\n);\nconst getHiddenFileIdMap = createSelector(\n    [getSearchFilteredFileIds, makeGetFiles(getCleanFileIds), makeGetOptionValue(OptionIds.ShowHiddenFiles)],\n    (searchFilteredFileIds, cleanFiles, showHiddenFiles) => {\n        const searchFilteredFileIdsSet = new Set(searchFilteredFileIds);\n        const hiddenFileIdMap: any = {};\n        cleanFiles.forEach(file => {\n            if (!file) return;\n            else if (!searchFilteredFileIdsSet.has(file.id)) {\n                // Hidden by seach\n                hiddenFileIdMap[file.id] = true;\n            } else if (!showHiddenFiles && FileHelper.isHidden(file)) {\n                // Hidden by options\n                hiddenFileIdMap[file.id] = true;\n            }\n        });\n        return hiddenFileIdMap;\n    }\n);\nconst getDisplayFileIds = createSelector(\n    [getSortedFileIds, getHiddenFileIdMap],\n    /** Returns files that will actually be shown to the user. */\n    (sortedFileIds, hiddenFileIdMap) => sortedFileIds.filter(id => !id || !hiddenFileIdMap[id])\n);\nconst getLastClickIndex = createSelector(\n    [_getLastClick, getSortedFileIds],\n    /** Returns the last click index after ensuring it is actually still valid. */\n    (lastClick, displayFileIds) => {\n        if (\n            !lastClick ||\n            lastClick.index > displayFileIds.length - 1 ||\n            lastClick.fileId != displayFileIds[lastClick.index]\n        ) {\n            return null;\n        }\n        return lastClick.index;\n    }\n);\n\nexport const selectors = {\n    // Raw selectors\n    getFileActionMap,\n    getOptionMap,\n    getFileMap,\n    getFileIds,\n    getCleanFileIds,\n    getSortActionId,\n    getSortOrder,\n    getSearchString,\n    _getLastClick,\n\n    // Memoized selectors\n    getSortedFileIds,\n    getSearcher,\n    getSearchFilteredFileIds,\n    getHiddenFileIdMap,\n    getDisplayFileIds,\n    getLastClickIndex,\n\n    // Parametrized selectors\n    makeGetAction,\n    makeGetOptionValue,\n    makeGetFiles,\n};\n\n// Selectors meant to be used outside of Redux code\nexport const getFileData = (state: RootState, fileId: Nullable<string>) =>\n    fileId ? selectFileMap(state)[fileId] : null;\nexport const getIsFileSelected = (state: RootState, file: FileData) => {\n    // !!! We deliberately don't use `FileHelper.isSelectable` here as we want to\n    //     reflect the state of Redux store accurately.\n    return !!selectSelectionMap(state)[file.id];\n};\nexport const getSelectedFiles = (state: RootState, ...filters: Nilable<FileFilter>[]) => {\n    const { fileMap, selectionMap } = state;\n\n    const selectedFiles = Object.keys(selectionMap).map(id => fileMap[id]);\n    const filteredSelectedFiles = filters.reduce(\n        (prevFiles, filter) => (filter ? prevFiles.filter(filter) : prevFiles),\n        selectedFiles\n    );\n    return filteredSelectedFiles;\n};\nexport const getSelectedFilesForAction = (state: RootState, fileActionId: string) =>\n    selectSelectedFilesForAction(fileActionId)(state);\n","import { Nilable } from 'tsdef';\n\nimport { ChonkyActions, DefaultFileActions, EssentialFileActions } from '../../action-definitions/index';\nimport { FileActionGroup, FileActionMenuItem } from '../../types/action-menus.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyThunk } from '../../types/redux.types';\nimport { SortOrder } from '../../types/sort.types';\nimport { sanitizeInputArray } from '../files-transforms';\nimport { reduxActions } from '../reducers';\nimport { selectCleanFileIds, selectFileMap, selectHiddenFileIdMap, selectSelectionMap } from '../selectors';\n\n/**\n * Merges multiple file action arrays into one while removing duplicates\n */\nconst mergeFileActionsArrays = (...fileActionArrays: FileAction[][]): FileAction[] => {\n    const seenActionIds = new Set<string>();\n    const addToSeen = (a: FileAction) => !!seenActionIds.add(a.id);\n    const wasNotSeen = (a: FileAction) => !seenActionIds.has(a.id);\n\n    const duplicateFreeArrays = fileActionArrays.map(arr => {\n        const duplicateFreeArray = arr.filter(wasNotSeen);\n        duplicateFreeArray.map(addToSeen);\n        return duplicateFreeArray;\n    });\n    return new Array<FileAction>().concat(...duplicateFreeArrays);\n};\n\nexport const thunkUpdateRawFileActions = (\n    rawFileActions: FileAction[] | any,\n    disableDefaultFileActions: Nilable<boolean | string[]>\n): ChonkyThunk => dispatch => {\n    const { sanitizedArray, errorMessages } = sanitizeInputArray('fileActions', rawFileActions);\n\n    // Add default actions unless user disabled them\n    let defaultActionsToAdd: FileAction[];\n    if (Array.isArray(disableDefaultFileActions)) {\n        const disabledActionIds = new Set(disableDefaultFileActions);\n        defaultActionsToAdd = DefaultFileActions.filter(action => !disabledActionIds.has(action.id));\n    } else if (disableDefaultFileActions) {\n        defaultActionsToAdd = [];\n    } else {\n        defaultActionsToAdd = DefaultFileActions;\n    }\n\n    const fileActions = mergeFileActionsArrays(sanitizedArray, EssentialFileActions, defaultActionsToAdd);\n    const optionDefaults: any = {};\n    fileActions.map(a => (a.option ? (optionDefaults[a.option.id] = a.option.defaultValue) : null));\n\n    dispatch(reduxActions.setRawFileActions(rawFileActions));\n    dispatch(reduxActions.setFileActionsErrorMessages(errorMessages));\n    dispatch(reduxActions.setFileActions(fileActions));\n    dispatch(reduxActions.setOptionDefaults(optionDefaults));\n    dispatch(thunkUpdateToolbarNContextMenuItems(fileActions));\n};\n\nexport const thunkUpdateToolbarNContextMenuItems = (fileActions: FileAction[]): ChonkyThunk => dispatch => {\n    const excludedToolbarFileActionIds = new Set<string>([\n        // TODO: Move decision to exclude actions somewhere else, as users' custom\n        //  components might not give these actions special treatment like Chonky does.\n        ChonkyActions.OpenParentFolder.id,\n    ]);\n\n    type SeenGroupMap = { [groupName: string]: FileActionGroup };\n\n    const toolbarItems: FileActionMenuItem[] = [];\n    const seenToolbarGroups: SeenGroupMap = {};\n\n    const contextMenuItems: FileActionMenuItem[] = [];\n    const seenContextMenuGroups: SeenGroupMap = {};\n\n    const getGroup = (itemArray: FileActionMenuItem[], seenMap: SeenGroupMap, groupName: string): FileActionGroup => {\n        if (seenMap[groupName]) return seenMap[groupName];\n        const group: FileActionGroup = { name: groupName, fileActionIds: [] };\n        itemArray.push(group);\n        seenMap[groupName] = group;\n        return group;\n    };\n\n    for (const action of fileActions) {\n        const button = action.button;\n        if (!button) continue;\n\n        if (button.toolbar && !excludedToolbarFileActionIds.has(action.id)) {\n            if (button.group) {\n                const group = getGroup(toolbarItems, seenToolbarGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                toolbarItems.push(action.id);\n            }\n        }\n\n        if (button.contextMenu) {\n            if (button.group) {\n                const group = getGroup(contextMenuItems, seenContextMenuGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                contextMenuItems.push(action.id);\n            }\n        }\n    }\n\n    dispatch(reduxActions.updateFileActionMenuItems([toolbarItems, contextMenuItems]));\n};\n\nexport const thunkUpdateDefaultFileViewActionId = (fileActionId: Nilable<string>): ChonkyThunk => (\n    dispatch,\n    getState\n) => {\n    const { fileActionMap } = getState();\n    const action = fileActionId ? fileActionMap[fileActionId] : null;\n    if (action && action.fileViewConfig) {\n        dispatch(reduxActions.setFileViewConfig(action.fileViewConfig));\n    }\n};\n\nexport const thunkActivateSortAction = (fileActionId: Nilable<string>): ChonkyThunk => (dispatch, getState) => {\n    if (!fileActionId) return;\n\n    const { sortActionId: oldActionId, sortOrder: oldOrder, fileActionMap } = getState();\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.sortKeySelector) return;\n\n    let order = oldOrder === SortOrder.ASC ? SortOrder.DESC : SortOrder.ASC;\n    if (oldActionId !== fileActionId) {\n        order = SortOrder.ASC;\n    }\n\n    dispatch(reduxActions.setSort({ actionId: fileActionId, order: order }));\n};\n\nexport const thunkApplySelectionTransform = (action: FileAction): ChonkyThunk => (dispatch, getState) => {\n    const selectionTransform = action.selectionTransform;\n    if (!selectionTransform) return;\n\n    const state = getState();\n    const prevSelection = new Set<string>(Object.keys(selectSelectionMap(state)));\n    const hiddenFileIds = new Set<string>(Object.keys(selectHiddenFileIdMap(state)));\n\n    const newSelection = selectionTransform({\n        prevSelection,\n        fileIds: selectCleanFileIds(state),\n        fileMap: selectFileMap(state),\n        hiddenFileIds,\n    });\n    if (!newSelection) return;\n\n    if (newSelection.size === 0) {\n        dispatch(reduxActions.clearSelection());\n    } else {\n        dispatch(reduxActions.selectFiles({ fileIds: Array.from(newSelection), reset: true }));\n    }\n};\n","import { MaybePromise, Undefinable } from 'tsdef';\n\nimport { FileActionData, FileActionState } from '../../types/action-handler.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyDispatch, ChonkyThunk } from '../../types/redux.types';\nimport { Logger } from '../../util/logger';\nimport { reduxActions } from '../reducers';\nimport {\n    selectContextMenuTriggerFile, selectExternalFileActionHandler, selectFileActionMap,\n    selectInstanceId, selectSelectedFiles\n} from '../selectors';\nimport { thunkActivateSortAction, thunkApplySelectionTransform } from './file-actions.thunks';\n\n/**\n * Thunk that dispatches actions to the external (user-provided) action handler.\n */\nexport const thunkDispatchFileAction = (data: FileActionData<FileAction>): ChonkyThunk => (_dispatch, getState) => {\n    Logger.debug(`FILE ACTION DISPATCH: [${data.id}]`, 'data:', data);\n    const state = getState();\n    const action = selectFileActionMap(state)[data.id];\n    const externalFileActionHandler = selectExternalFileActionHandler(state);\n    if (action) {\n        if (externalFileActionHandler) {\n            Promise.resolve(externalFileActionHandler(data)).catch(error =>\n                Logger.error(`User-defined file action handler threw an error: ${error.message}`)\n            );\n        }\n    } else {\n        Logger.warn(\n            `Internal components dispatched the \"${data.id}\" file action, but such ` + `action was not registered.`\n        );\n    }\n};\n\n/**\n * Thunk that is used by internal components (and potentially the user) to \"request\"\n * actions. When action is requested, Chonky \"prepares\" the action data by extracting it\n * from Redux state. Once action data is ready, Chonky executes some side effect and/or\n * dispatches the action to the external action handler.\n */\nexport const thunkRequestFileAction = <Action extends FileAction>(\n    action: Action,\n    payload: Action['__payloadType']\n): ChonkyThunk => (dispatch, getState) => {\n    Logger.debug(`FILE ACTION REQUEST: [${action.id}]`, 'action:', action, 'payload:', payload);\n    const state = getState();\n    const instanceId = selectInstanceId(state);\n\n    if (!selectFileActionMap(state)[action.id]) {\n        Logger.warn(\n            `The action \"${action.id}\" was requested, but it is not registered. The ` +\n                `action will still be dispatched, but this might indicate a bug in ` +\n                `the code. Please register your actions by passing them to ` +\n                `\"fileActions\" prop.`\n        );\n    }\n\n    // Determine files for the action if action requires selection\n    const selectedFiles = selectSelectedFiles(state);\n    const selectedFilesForAction = action.fileFilter ? selectedFiles.filter(action.fileFilter) : selectedFiles;\n    if (action.requiresSelection && selectedFilesForAction.length === 0) {\n        Logger.warn(\n            `Internal components requested the \"${action.id}\" file ` +\n                `action, but the selection for this action was empty. This ` +\n                `might a bug in the code of the presentational components.`\n        );\n        return;\n    }\n\n    const contextMenuTriggerFile = selectContextMenuTriggerFile(state);\n    const actionState: FileActionState<{}> = {\n        instanceId,\n        selectedFiles,\n        selectedFilesForAction,\n        contextMenuTriggerFile,\n    };\n\n    // === Update sort state if necessary\n    const sortKeySelector = action.sortKeySelector;\n    if (sortKeySelector) dispatch(thunkActivateSortAction(action.id));\n\n    // === Update file view state if necessary\n    const fileViewConfig = action.fileViewConfig;\n    if (fileViewConfig) dispatch(reduxActions.setFileViewConfig(fileViewConfig));\n\n    // === Update option state if necessary\n    const option = action.option;\n    if (option) dispatch(reduxActions.toggleOption(option.id));\n\n    // === Apply selection transform if necessary\n    const selectionTransform = action.selectionTransform;\n    if (selectionTransform) dispatch(thunkApplySelectionTransform(action));\n\n    // Apply the effect\n    const effect = action.effect;\n    let maybeEffectPromise: MaybePromise<boolean | undefined> = undefined;\n    if (effect) {\n        try {\n            maybeEffectPromise = effect({\n                action,\n                payload,\n                state: actionState,\n                reduxDispatch: dispatch,\n                getReduxState: getState,\n            }) as MaybePromise<boolean | undefined>;\n        } catch (error) {\n            Logger.error(`User-defined effect function for action ${action.id} threw an ` + `error: ${error.message}`);\n        }\n    }\n\n    // Dispatch the action to user code. Deliberately call it after all other\n    // operations are over.\n    return Promise.resolve(maybeEffectPromise)\n        .then(effectResult => {\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, effectResult);\n        })\n        .catch(error => {\n            Logger.error(\n                `User-defined effect function for action ${action.id} returned a ` +\n                    `promise that was rejected: ${error.message}`\n            );\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, undefined);\n        });\n};\n\nexport const triggerDispatchAfterEffect = <Action extends FileAction>(\n    dispatch: ChonkyDispatch,\n    data: FileActionData<Action>,\n    effectResult: Undefinable<boolean>\n) => {\n    const preventDispatch = effectResult === true;\n    if (!preventDispatch) dispatch(thunkDispatchFileAction(data));\n};\n","import filesize from 'filesize';\nimport { createContext, useContext, useMemo } from 'react';\nimport { IntlShape, useIntl } from 'react-intl';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyFormatters } from '../types/i18n.types';\nimport { FileHelper } from './file-helper';\n\nexport enum I18nNamespace {\n    Toolbar = 'toolbar',\n    FileList = 'fileList',\n    FileEntry = 'fileEntry',\n    FileContextMenu = 'contextMenu',\n\n    FileActions = 'actions',\n    FileActionGroups = 'actionGroups',\n}\n\nexport const getI18nId = (namespace: I18nNamespace, stringId: string): string =>\n    `chonky.${namespace}.${stringId}`;\n\nexport const getActionI18nId = (actionId: string, stringId: string): string =>\n    `chonky.${I18nNamespace.FileActions}.${actionId}.${stringId}`;\n\nexport const useLocalizedFileActionGroup = (groupName: string) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        return intl.formatMessage({\n            id: getI18nId(I18nNamespace.FileActionGroups, groupName),\n            defaultMessage: groupName,\n        });\n    }, [groupName, intl]);\n};\n\nexport const useLocalizedFileActionStrings = (action: Nullable<FileAction>) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        if (!action) {\n            return {\n                buttonName: '',\n                buttonTooltip: undefined,\n            };\n        }\n\n        const buttonName = intl.formatMessage({\n            id: getActionI18nId(action.id, 'button.name'),\n            defaultMessage: action.button?.name,\n        });\n\n        let buttonTooltip: Undefinable<string> = undefined;\n        if (action.button?.tooltip) {\n            // We only translate the tooltip if the original action has a tooltip.\n            buttonTooltip = intl.formatMessage({\n                id: getActionI18nId(action.id, 'button.tooltip'),\n                defaultMessage: action.button?.tooltip,\n            });\n        }\n\n        return {\n            buttonName,\n            buttonTooltip,\n        };\n    }, [action, intl]);\n};\n\nexport const useLocalizedFileEntryStrings = (file: Nullable<FileData>) => {\n    const intl = useIntl();\n    const formatters = useContext(ChonkyFormattersContext);\n    return useMemo(() => {\n        return {\n            fileModDateString: formatters.formatFileModDate(intl, file),\n            fileSizeString: formatters.formatFileSize(intl, file),\n        };\n    }, [file, formatters, intl]);\n};\n\nexport const defaultFormatters: ChonkyFormatters = {\n    formatFileModDate: (\n        intl: IntlShape,\n        file: Nullable<FileData>\n    ): Nullable<string> => {\n        const safeModDate = FileHelper.getModDate(file);\n        if (safeModDate) {\n            return intl.formatDate(safeModDate, {\n                dateStyle: 'medium',\n                timeStyle: 'short',\n            });\n        } else {\n            return null;\n        }\n    },\n    formatFileSize: (_intl: IntlShape, file: Nullable<FileData>): Nullable<string> => {\n        if (!file || typeof file.size !== 'number') return null;\n\n        const size = file.size;\n        const sizeData = filesize(size, { bits: false, output: 'object' }) as any;\n        if (sizeData.symbol === 'B') {\n            return `${Math.round(sizeData.value / 10) / 100.0} KB`;\n        } else if (sizeData.symbol === 'KB') {\n            return `${Math.round(sizeData.value)} ${sizeData.symbol}`;\n        }\n        return `${sizeData.value} ${sizeData.symbol}`;\n    },\n};\n\nexport const ChonkyFormattersContext = createContext(defaultFormatters);\n","// Used in React hooks to indicate empty deps are intentional.\nimport { MaybePromise, Nullable, WritableProps } from 'tsdef';\n\nimport { FileAction, FileActionEffect } from '../types/action.types';\nimport { Logger } from './logger';\n\n// Used in contexts that need to provide some default value for a function.\n// eslint-disable-next-line no-unused-vars,@typescript-eslint/no-unused-vars\nexport const NOOP_FUNCTION = (...args: any[]) => {\n    Logger.warn(\n        `The \"NOOP_FUNCTION\" from the constants module was called. ` +\n            `This can indicate a bug in one of the components. Supplied args:`,\n        args\n    );\n};\n\nexport const isPromise = <T>(value: MaybePromise<T> | any): value is Promise<T> => {\n    if (typeof value !== 'object' || !value) return false;\n    const then = (value as Promise<T>).then;\n    return then && typeof then === 'function';\n};\n\nexport const defineFileAction = <Action extends FileAction>(\n    action: Action,\n    effect?: FileActionEffect<FileAction>\n): WritableProps<Action> => {\n    if (action.__payloadType !== undefined && (action.hotkeys || action.button)) {\n        const errorMessage =\n            `Invalid definition was provided for file action \"${action.id}\". Actions ` +\n            `that specify hotkeys or buttons cannot define a payload type. If ` +\n            `your application requires this functionality, define two actions ` +\n            `and chain them using effects.`;\n        Logger.error(errorMessage);\n        throw new Error(errorMessage);\n    }\n\n    action.effect = effect;\n    return action;\n};\n\n/**\n * Recursively check the current element and the parent elements, going bottom-up.\n * Returns the first element to match the predicate, otherwise returns null if such\n * element is not found.\n */\nexport const findElementAmongAncestors = (\n    maybeElement: HTMLElement | any,\n    predicate: (maybeElement: HTMLElement | any) => boolean\n): Nullable<HTMLElement> => {\n    if (!maybeElement) return maybeElement;\n\n    if (predicate(maybeElement)) return maybeElement;\n\n    if (maybeElement.parentElement) {\n        return findElementAmongAncestors(maybeElement.parentElement, predicate);\n    }\n\n    return null;\n};\n\nexport const elementIsInsideButton = (buttonCandidate: HTMLElement | any): boolean => {\n    return !!findElementAmongAncestors(\n        buttonCandidate,\n        (element: any) => element.tagName && element.tagName.toLowerCase() === 'button'\n    );\n};\n\nexport const getValueOrFallback = <T extends any>(\n    value: T | undefined,\n    fallback: T,\n    desiredType?: 'boolean' | 'string' | 'number'\n): NonNullable<T> => {\n    if (desiredType) {\n        return (typeof value === desiredType ? value : fallback) as NonNullable<T>;\n    }\n    return (value !== undefined ? value : fallback) as NonNullable<T>;\n};\n","import { reduxActions } from '../redux/reducers';\nimport {\n    getFileData, getIsFileSelected, selectDisableSelection, selectors, selectParentFolder,\n    selectSelectionSize\n} from '../redux/selectors';\nimport { reduxThunks } from '../redux/thunks';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport {\n    ChangeSelectionPayload, EndDragNDropPayload, KeyboardClickFilePayload, MouseClickFilePayload,\n    MoveFilesPayload, OpenFileContextMenuPayload, OpenFilesPayload, StartDragNDropPayload\n} from '../types/action-payloads.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { Logger } from '../util/logger';\nimport { ChonkyActions } from './index';\n\nexport const EssentialActions = {\n    /**\n     * Action that is dispatched when the user clicks on a file entry using their mouse.\n     * Both single clicks and double clicks trigger this action.\n     */\n    MouseClickFile: defineFileAction(\n        {\n            id: 'mouse_click_file',\n            __payloadType: {} as MouseClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (payload.clickType === 'double') {\n                if (FileHelper.isOpenable(payload.file)) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n\n                            // To simulate Windows Explorer and Nautilus behaviour,\n                            // a double click on a file only opens that file even if\n                            // there is a selection.\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else {\n                // We're dealing with a single click\n\n                const disableSelection = selectDisableSelection(getReduxState());\n                if (FileHelper.isSelectable(payload.file) && !disableSelection) {\n                    if (payload.ctrlKey) {\n                        // Multiple selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: false,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    } else if (payload.shiftKey) {\n                        // Range selection\n                        const lastClickIndex = selectors.getLastClickIndex(getReduxState());\n                        if (typeof lastClickIndex === 'number') {\n                            // We have the index of the previous click\n                            let rangeStart = lastClickIndex;\n                            let rangeEnd = payload.fileDisplayIndex;\n                            if (rangeStart > rangeEnd) {\n                                [rangeStart, rangeEnd] = [rangeEnd, rangeStart];\n                            }\n\n                            reduxDispatch(reduxThunks.selectRange({ rangeStart, rangeEnd }));\n                        } else {\n                            // Since we can't do a range selection, do a\n                            // multiple selection\n                            reduxDispatch(\n                                reduxActions.toggleSelection({\n                                    fileId: payload.file.id,\n                                    exclusive: false,\n                                })\n                            );\n                            reduxDispatch(\n                                reduxActions.setLastClickIndex({\n                                    index: payload.fileDisplayIndex,\n                                    fileId: payload.file.id,\n                                })\n                            );\n                        }\n                    } else {\n                        // Exclusive selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: true,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    }\n                } else {\n                    if (!payload.ctrlKey && !disableSelection) {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                    reduxDispatch(\n                        reduxActions.setLastClickIndex({\n                            index: payload.fileDisplayIndex,\n                            fileId: payload.file.id,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when the user \"clicks\" on a file using their keyboard.\n     * Using Space and Enter keys counts as clicking.\n     */\n    KeyboardClickFile: defineFileAction(\n        {\n            id: 'keyboard_click_file',\n            __payloadType: {} as KeyboardClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            reduxDispatch(\n                reduxActions.setLastClickIndex({\n                    index: payload.fileDisplayIndex,\n                    fileId: payload.file.id,\n                })\n            );\n            if (payload.enterKey) {\n                // We only dispatch the Open Files action here when the selection is\n                // empty. Otherwise, `Enter` key presses are handled by the\n                // hotkey manager for the Open Files action.\n                if (selectSelectionSize(getReduxState()) === 0) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else if (payload.spaceKey && FileHelper.isSelectable(payload.file)) {\n                reduxDispatch(\n                    reduxActions.toggleSelection({\n                        fileId: payload.file.id,\n                        exclusive: payload.ctrlKey,\n                    })\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user starts dragging some file.\n     */\n    StartDragNDrop: defineFileAction(\n        {\n            id: 'start_drag_n_drop',\n            __payloadType: {} as StartDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            const file = payload.draggedFile;\n            if (!getIsFileSelected(getReduxState(), file)) {\n                if (FileHelper.isSelectable(file)) {\n                    reduxDispatch(\n                        reduxActions.selectFiles({\n                            fileIds: [file.id],\n                            reset: true,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user either cancels the drag & drop interaction,\n     * or drops a file somewhere.\n     */\n    EndDragNDrop: defineFileAction(\n        {\n            id: 'end_drag_n_drop',\n            __payloadType: {} as EndDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (getIsFileSelected(getReduxState(), payload.destination)) {\n                // Can't drop a selection into itself\n                return;\n            }\n\n            const { draggedFile, selectedFiles } = payload as EndDragNDropPayload;\n            const droppedFiles = selectedFiles.length > 0 ? selectedFiles : [draggedFile];\n            reduxDispatch(\n                thunkRequestFileAction(ChonkyActions.MoveFiles, {\n                    ...payload,\n                    files: droppedFiles,\n                })\n            );\n        }\n    ),\n    /**\n     * Action that is dispatched when user moves files from one folder to another,\n     * usually by dragging & dropping some files into the folder.\n     */\n    MoveFiles: defineFileAction({\n        id: 'move_files',\n        __payloadType: {} as MoveFilesPayload,\n    } as const),\n    /**\n     * Action that is dispatched when the selection changes for any reason.\n     */\n    ChangeSelection: defineFileAction({\n        id: 'change_selection',\n        __payloadType: {} as ChangeSelectionPayload,\n    } as const),\n    /**\n     * Action that is dispatched when user wants to open some files. This action is\n     * often triggered by other actions.\n     */\n    OpenFiles: defineFileAction({\n        id: 'open_files',\n        __payloadType: {} as OpenFilesPayload,\n    } as const),\n    /**\n     * Action that is triggered when user wants to go up a directory.\n     */\n    OpenParentFolder: defineFileAction(\n        {\n            id: 'open_parent_folder',\n            hotkeys: ['backspace'],\n            button: {\n                name: 'Go up a directory',\n                toolbar: true,\n                contextMenu: false,\n                icon: ChonkyIconName.openParentFolder,\n                iconOnly: true,\n            },\n        } as const,\n        ({ reduxDispatch, getReduxState }) => {\n            const parentFolder = selectParentFolder(getReduxState());\n            if (FileHelper.isOpenable(parentFolder)) {\n                reduxDispatch(\n                    thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                        targetFile: parentFolder,\n                        files: [parentFolder],\n                    })\n                );\n            } else {\n                Logger.warn(\n                    'Open parent folder effect was triggered  even though the parent folder' +\n                        ' is not openable. This indicates a bug in presentation components.'\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user opens the context menu, either by right click\n     * on something or using the context menu button on their keyboard.\n     */\n    OpenFileContextMenu: defineFileAction(\n        {\n            id: 'open_file_context_menu',\n            __payloadType: {} as OpenFileContextMenuPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            // TODO: Check if the context menu component is actually enabled. There is a\n            //  chance it doesn't matter if it is enabled or not - if it is not mounted,\n            //  the action will simply have no effect. It also allows users to provide\n            //  their own components - however, users could also flip the \"context menu\n            //  component mounted\" switch...\n            const triggerFile = getFileData(getReduxState(), payload.triggerFileId);\n            if (triggerFile) {\n                const fileSelected = getIsFileSelected(getReduxState(), triggerFile);\n                if (!fileSelected) {\n                    // If file is selected, we leave the selection as is. If it is not\n                    // selected, it means user right clicked the file with no selection.\n                    // We simulate the Windows Explorer/Nautilus behaviour of moving\n                    // selection to this file.\n                    if (FileHelper.isSelectable(triggerFile)) {\n                        reduxDispatch(\n                            reduxActions.selectFiles({\n                                fileIds: [payload.triggerFileId],\n                                reset: true,\n                            })\n                        );\n                    } else {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                }\n            }\n\n            reduxDispatch(\n                reduxActions.showContextMenu({\n                    triggerFileId: payload.triggerFileId,\n                    mouseX: payload.clientX - 2,\n                    mouseY: payload.clientY - 4,\n                })\n            );\n        }\n    ),\n};\n","import { ChonkyThunk } from '../../types/redux.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { reduxActions } from '../reducers';\nimport { selectors } from '../selectors';\n\nexport const reduxThunks = {\n    selectRange: (params: {\n        rangeStart: number;\n        rangeEnd: number;\n        reset?: boolean;\n    }): ChonkyThunk => (dispatch, getState) => {\n        const state = getState();\n        if (state.disableSelection) return;\n        const displayFileIds = selectors.getDisplayFileIds(state);\n        const fileIdsToSelect = displayFileIds\n            .slice(params.rangeStart, params.rangeEnd + 1)\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id])) as string[];\n        dispatch(\n            reduxActions.selectFiles({\n                fileIds: fileIdsToSelect,\n                reset: !!params.reset,\n            })\n        );\n    },\n};\n","import { Nullable } from 'tsdef';\n\nimport { selectFocusSearchInput } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileSelectionTransform } from '../types/action.types';\nimport { FileViewMode } from '../types/file-view.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { EssentialActions } from './essential';\nimport { OptionIds } from './option-ids';\n\nexport const DefaultActions = {\n    /**\n     * Action that can be used to open currently selected files.\n     */\n    OpenSelection: defineFileAction(\n        {\n            id: 'open_selection',\n            hotkeys: ['enter'],\n            requiresSelection: true,\n            fileFilter: FileHelper.isOpenable,\n            button: {\n                name: 'Open selection',\n                toolbar: true,\n                contextMenu: true,\n                group: 'Actions',\n                icon: ChonkyIconName.openFiles,\n            },\n        } as const,\n        ({ state, reduxDispatch }) => {\n            reduxDispatch(\n                thunkRequestFileAction(EssentialActions.OpenFiles, {\n                    files: state.selectedFilesForAction!,\n                })\n            );\n            return undefined;\n        }\n    ),\n    /**\n     * Action that selects all files.\n     */\n    SelectAllFiles: defineFileAction({\n        id: 'select_all_files',\n        hotkeys: ['ctrl+a'],\n        button: {\n            name: 'Select all files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.selectAllFiles,\n        },\n        selectionTransform: (({ fileIds, hiddenFileIds }) => {\n            const newSelection = new Set<string>();\n            fileIds.map(fileId => {\n                // We don't need to check if file is selectable because Chonky does\n                // it own checks internally.\n                if (!hiddenFileIds.has(fileId)) newSelection.add(fileId);\n            });\n            return newSelection;\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that clear the file selection.\n     */\n    ClearSelection: defineFileAction({\n        id: 'clear_selection',\n        hotkeys: ['escape'],\n        button: {\n            name: 'Clear selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.clearSelection,\n        },\n        selectionTransform: (({ prevSelection }) => {\n            if (prevSelection.size === 0) return null;\n            return new Set<string>();\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that enables List view.\n     */\n    EnableListView: defineFileAction({\n        id: 'enable_list_view',\n        fileViewConfig: {\n            mode: FileViewMode.List,\n            entryHeight: 30,\n        },\n        button: {\n            name: 'Switch to List view',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Compact view. Note that compact view is still\n     * experimental and should not be used in production.\n     */\n    EnableCompactView: defineFileAction({\n        // TODO: Don't enable until compact view is fully supported\n        id: 'enable_compact_view',\n        fileViewConfig: {\n            mode: FileViewMode.Compact,\n            entryHeight: 40,\n            entryWidth: 220,\n        },\n        button: {\n            name: 'Switch to Compact view',\n            toolbar: true,\n            icon: ChonkyIconName.compact,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Grid view.\n     */\n    EnableGridView: defineFileAction({\n        id: 'enable_grid_view',\n        fileViewConfig: { mode: FileViewMode.Grid, entryWidth: 165, entryHeight: 130 },\n        button: {\n            name: 'Switch to Grid view',\n            toolbar: true,\n            icon: ChonkyIconName.smallThumbnail,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.name`.\n     */\n    SortFilesByName: defineFileAction({\n        id: 'sort_files_by_name',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.name.toLowerCase() : undefined),\n        button: {\n            name: 'Sort by name',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.size`.\n     */\n    SortFilesBySize: defineFileAction({\n        id: 'sort_files_by_size',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.size : undefined),\n        button: {\n            name: 'Sort by size',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.modDate`.\n     */\n    SortFilesByDate: defineFileAction({\n        id: 'sort_files_by_date',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.modDate : undefined),\n        button: {\n            name: 'Sort by date',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether hidden files are shown to the user or not.\n     */\n    ToggleHiddenFiles: defineFileAction({\n        id: 'toggle_hidden_files',\n        hotkeys: ['ctrl+h'],\n        option: {\n            id: OptionIds.ShowHiddenFiles,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show hidden files',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether folders should appear before files regardless of\n     * current sort function.\n     */\n    ToggleShowFoldersFirst: defineFileAction({\n        id: 'toggle_show_folders_first',\n        option: {\n            id: OptionIds.ShowFoldersFirst,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show folders first',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that focuses the search input when it is dispatched.\n     */\n    FocusSearchInput: defineFileAction(\n        {\n            id: 'focus_search_input',\n            hotkeys: ['ctrl+f'],\n        } as const,\n        ({ getReduxState }) => {\n            const focusSearchInput = selectFocusSearchInput(getReduxState());\n            if (focusSearchInput) focusSearchInput();\n        }\n    ),\n    /**\n     * Action that enables List view.\n     */\n    ToggleDarkMode: defineFileAction({\n        id: 'enable_dark_mode',\n        option: {\n            id: OptionIds.DarkMode,\n            defaultValue: false,\n        },\n        button: {\n            name: 'Enable dark mode',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n};\n","import { ChonkyIconName } from '../types/icons.types';\nimport { defineFileAction } from '../util/helpers';\n\nexport const ExtraActions = {\n    /**\n     * Action that adds a button and shortcut to copy files.\n     */\n    CopyFiles: defineFileAction({\n        id: 'copy_files',\n        requiresSelection: true,\n        hotkeys: ['ctrl+c'],\n        button: {\n            name: 'Copy selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.copy,\n        },\n    } as const),\n    /**\n     * Action that adds a button to create a new folder.\n     */\n    CreateFolder: defineFileAction({\n        id: 'create_folder',\n        button: {\n            name: 'Create folder',\n            toolbar: true,\n            tooltip: 'Create a folder',\n            icon: ChonkyIconName.folderCreate,\n        },\n    } as const),\n    /**\n     * Action that adds a button to upload files.\n     */\n    UploadFiles: defineFileAction({\n        id: 'upload_files',\n        button: {\n            name: 'Upload files',\n            toolbar: true,\n            tooltip: 'Upload files',\n            icon: ChonkyIconName.upload,\n        },\n    } as const),\n    /**\n     * Action that adds a button to download files.\n     */\n    DownloadFiles: defineFileAction({\n        id: 'download_files',\n        requiresSelection: true,\n        button: {\n            name: 'Download files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.download,\n        },\n    } as const),\n    /**\n     * Action that adds a button and shortcut to delete files.\n     */\n    DeleteFiles: defineFileAction({\n        id: 'delete_files',\n        requiresSelection: true,\n        hotkeys: ['delete'],\n        button: {\n            name: 'Delete files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.trash,\n        },\n    } as const),\n};\n","import { DefaultActions } from './default';\nimport { EssentialActions } from './essential';\nimport { ExtraActions } from './extra';\n\nexport { OptionIds } from './option-ids';\n\nexport const ChonkyActions = {\n    ...EssentialActions,\n    ...DefaultActions,\n    ...ExtraActions,\n};\n\nexport const EssentialFileActions = [\n    ChonkyActions.MouseClickFile,\n    ChonkyActions.KeyboardClickFile,\n    ChonkyActions.StartDragNDrop,\n    ChonkyActions.EndDragNDrop,\n    ChonkyActions.MoveFiles,\n    ChonkyActions.ChangeSelection,\n    ChonkyActions.OpenFiles,\n    ChonkyActions.OpenParentFolder,\n    ChonkyActions.OpenFileContextMenu,\n];\n\nexport const DefaultFileActions = [\n    ChonkyActions.OpenSelection,\n    ChonkyActions.SelectAllFiles,\n    ChonkyActions.ClearSelection,\n    ChonkyActions.EnableListView,\n    // TODO: Don't enable until compact view is fully supported\n    // ChonkyActions.EnableCompactView,\n    ChonkyActions.EnableGridView,\n    ChonkyActions.SortFilesByName,\n    ChonkyActions.SortFilesBySize,\n    ChonkyActions.SortFilesByDate,\n    ChonkyActions.ToggleHiddenFiles,\n    ChonkyActions.ToggleShowFoldersFirst,\n    ChonkyActions.FocusSearchInput,\n];\n","import { ChonkyActions } from '../action-definitions/index';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\n\nexport const initialRootState: RootState = {\n    instanceId: 'CHONKY_INVALID_ID', // should be overwritten by preloaded state\n\n    externalFileActionHandler: null,\n\n    rawFileActions: [],\n    fileActionsErrorMessages: [],\n    fileActionMap: {},\n    fileActionIds: [],\n    toolbarItems: [],\n    contextMenuItems: [],\n\n    rawFolderChain: null,\n    folderChainErrorMessages: [],\n    folderChain: [],\n\n    rawFiles: [],\n    filesErrorMessages: [],\n    fileMap: {},\n    fileIds: [],\n    cleanFileIds: [],\n\n    sortedFileIds: [],\n    hiddenFileIdMap: {},\n\n    focusSearchInput: null,\n    searchString: '',\n    searchMode: 'currentFolder',\n\n    selectionMap: {},\n    disableSelection: false,\n\n    fileViewConfig: ChonkyActions.EnableGridView.fileViewConfig,\n\n    sortActionId: null,\n    sortOrder: SortOrder.ASC,\n\n    optionMap: {},\n\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableDragAndDrop: false,\n    clearSelectionOnOutsideClick: true,\n\n    lastClick: null,\n\n    contextMenuMounted: false,\n    contextMenuConfig: null,\n};\n","import { Nilable, Nullable } from 'tsdef';\n\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nimport { GenericFileActionHandler } from '../types/action-handler.types';\nimport { FileActionMenuItem } from '../types/action-menus.types';\nimport { FileAction, FileActionMap } from '../types/action.types';\nimport { ContextMenuConfig } from '../types/context-menu.types';\nimport { FileViewConfig } from '../types/file-view.types';\nimport { FileArray, FileIdTrueMap, FileMap } from '../types/file.types';\nimport { OptionMap } from '../types/options.types';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\nimport { ThumbnailGenerator } from '../types/thumbnails.types';\nimport { FileHelper } from '../util/file-helper';\nimport { sanitizeInputArray } from './files-transforms';\nimport { initialRootState } from './state';\n\nconst reducers = {\n    setExternalFileActionHandler(\n        state: RootState,\n        action: PayloadAction<Nilable<GenericFileActionHandler<FileAction>>>\n    ) {\n        state.externalFileActionHandler = action.payload ?? null;\n    },\n    setRawFileActions(state: RootState, action: PayloadAction<FileAction[] | any>) {\n        state.rawFileActions = action.payload;\n    },\n    setFileActionsErrorMessages(state: RootState, action: PayloadAction<string[]>) {\n        state.fileActionsErrorMessages = action.payload;\n    },\n    setFileActions(state: RootState, action: PayloadAction<FileAction[]>) {\n        const fileActionMap: FileActionMap = {};\n        action.payload.map(a => (fileActionMap[a.id] = a));\n        const fileIds = action.payload.map(a => a.id);\n\n        state.fileActionMap = fileActionMap as FileMap;\n        state.fileActionIds = fileIds;\n    },\n    updateFileActionMenuItems(state: RootState, action: PayloadAction<[FileActionMenuItem[], FileActionMenuItem[]]>) {\n        [state.toolbarItems, state.contextMenuItems] = action.payload;\n    },\n    setRawFolderChain(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFolderChain = action.payload;\n        const { sanitizedArray: folderChain, errorMessages } = sanitizeInputArray('folderChain', rawFolderChain);\n        state.rawFolderChain = rawFolderChain;\n        state.folderChain = folderChain;\n        state.folderChainErrorMessages = errorMessages;\n    },\n    setRawFiles(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFiles = action.payload;\n        const { sanitizedArray: files, errorMessages } = sanitizeInputArray('files', rawFiles);\n        state.rawFiles = rawFiles;\n        state.filesErrorMessages = errorMessages;\n\n        const fileMap: FileMap = {};\n        files.forEach(f => {\n            if (f) fileMap[f.id] = f;\n        });\n        const fileIds = files.map(f => (f ? f.id : null));\n        const cleanFileIds = fileIds.filter(f => !!f) as string[];\n\n        state.fileMap = fileMap;\n        state.fileIds = fileIds;\n        state.cleanFileIds = cleanFileIds;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (!fileMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setSortedFileIds(state: RootState, action: PayloadAction<Nullable<string>[]>) {\n        state.sortedFileIds = action.payload;\n    },\n    setHiddenFileIds(state: RootState, action: PayloadAction<FileIdTrueMap>) {\n        state.hiddenFileIdMap = action.payload;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (state.hiddenFileIdMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setFocusSearchInput(state: RootState, action: PayloadAction<Nullable<() => void>>) {\n        state.focusSearchInput = action.payload;\n    },\n    setSearchString(state: RootState, action: PayloadAction<string>) {\n        state.searchString = action.payload;\n    },\n    selectAllFiles(state: RootState) {\n        state.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (id ? (state.selectionMap[id] = true) : null));\n    },\n    selectFiles(state: RootState, action: PayloadAction<{ fileIds: string[]; reset: boolean }>) {\n        if (state.disableSelection) return;\n        if (action.payload.reset) state.selectionMap = {};\n        action.payload.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (state.selectionMap[id] = true));\n    },\n    toggleSelection(state: RootState, action: PayloadAction<{ fileId: string; exclusive: boolean }>) {\n        if (state.disableSelection) return;\n        const oldValue = !!state.selectionMap[action.payload.fileId];\n        if (action.payload.exclusive) state.selectionMap = {};\n        if (oldValue) delete state.selectionMap[action.payload.fileId];\n        else if (FileHelper.isSelectable(state.fileMap[action.payload.fileId])) {\n            state.selectionMap[action.payload.fileId] = true;\n        }\n    },\n    clearSelection(state: RootState) {\n        if (state.disableSelection) return;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setSelectionDisabled(state: RootState, action: PayloadAction<boolean>) {\n        state.disableSelection = action.payload;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setFileViewConfig(state: RootState, action: PayloadAction<FileViewConfig>) {\n        state.fileViewConfig = action.payload;\n    },\n    setSort(state: RootState, action: PayloadAction<{ actionId: string; order: SortOrder }>) {\n        state.sortActionId = action.payload.actionId;\n        state.sortOrder = action.payload.order;\n    },\n    setOptionDefaults(state: RootState, action: PayloadAction<OptionMap>) {\n        for (const optionId of Object.keys(action.payload)) {\n            if (optionId in state.optionMap) continue;\n            state.optionMap[optionId] = action.payload[optionId];\n        }\n    },\n    toggleOption(state: RootState, action: PayloadAction<string>) {\n        state.optionMap[action.payload] = !state.optionMap[action.payload];\n    },\n    setThumbnailGenerator(state: RootState, action: PayloadAction<Nullable<ThumbnailGenerator>>) {\n        state.thumbnailGenerator = action.payload;\n    },\n    setDoubleClickDelay(state: RootState, action: PayloadAction<number>) {\n        state.doubleClickDelay = action.payload;\n    },\n    setDisableDragAndDrop(state: RootState, action: PayloadAction<boolean>) {\n        state.disableDragAndDrop = action.payload;\n    },\n    setClearSelectionOnOutsideClick(state: RootState, action: PayloadAction<boolean>) {\n        state.clearSelectionOnOutsideClick = action.payload;\n    },\n    setLastClickIndex(state: RootState, action: PayloadAction<Nullable<{ index: number; fileId: string }>>) {\n        state.lastClick = action.payload;\n    },\n    setContextMenuMounted(state: RootState, action: PayloadAction<boolean>) {\n        state.contextMenuMounted = action.payload;\n    },\n    showContextMenu(state: RootState, action: PayloadAction<ContextMenuConfig>) {\n        state.contextMenuConfig = action.payload;\n    },\n    hideContextMenu(state: RootState) {\n        if (!state.contextMenuConfig) return;\n        state.contextMenuConfig = null;\n    },\n};\n\nexport const { actions: reduxActions, reducer: rootReducer } = createSlice({\n    name: 'root',\n    initialState: initialRootState,\n    reducers,\n});\n","import { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { configureStore } from '@reduxjs/toolkit';\n\nimport { RootState } from '../types/redux.types';\nimport { useStaticValue } from '../util/hooks-helpers';\nimport { rootReducer } from './reducers';\nimport { initialRootState } from './state';\nimport { useStoreWatchers } from './watchers';\n\nexport const useChonkyStore = (chonkyInstanceId: string) => {\n    const store = useStaticValue(() => {\n        const preloadedState: RootState = {\n            ...initialRootState,\n            instanceId: chonkyInstanceId,\n        };\n\n        return configureStore({\n            preloadedState: preloadedState as any,\n            reducer: rootReducer,\n            middleware: getDefaultMiddleware =>\n                getDefaultMiddleware({\n                    serializableCheck: false,\n                }),\n            devTools: { name: `chonky_${chonkyInstanceId}` },\n        });\n    });\n    useStoreWatchers(store);\n    return store;\n};\n\n/**\n * Hook that can be used with parametrized selectors.\n */\nexport const useParamSelector = <Args extends Array<any>, Value>(\n    parametrizedSelector: (...args: Args) => (state: RootState) => Value,\n    ...selectorParams: Args\n) => {\n    const selector = useCallback(\n        (state: RootState) => parametrizedSelector(...selectorParams)(state),\n        // eslint-disable-next-line\n        [parametrizedSelector, ...selectorParams]\n    );\n    return useSelector(selector);\n};\n\n/**\n * DTE - DispatchThunkEffect. This method is used to decrease code duplication in\n * main Chonky method.\n */\nexport const useDTE = <Args extends Array<any>>(actionCreator: (...args: Args) => any, ...selectorParams: Args) => {\n    const dispatch = useDispatch();\n    useEffect(\n        () => {\n            dispatch(actionCreator(...selectorParams));\n        },\n        // eslint-disable-next-line\n        [dispatch, actionCreator, ...selectorParams]\n    );\n};\n\nexport const usePropReduxUpdate = <Payload extends any>(actionCreator: (payload: Payload) => any, payload: Payload) => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(actionCreator(payload));\n    }, [dispatch, actionCreator, payload]);\n};\n","import { useEffect } from 'react';\nimport watch from 'redux-watch';\n\nimport { Store } from '@reduxjs/toolkit';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { RootState } from '../types/redux.types';\nimport { FileSelection } from '../types/selection.types';\nimport { selectSelectedFileIds, selectSelectionMap } from './selectors';\nimport { thunkRequestFileAction } from './thunks/dispatchers.thunks';\n\nexport const useStoreWatchers = (store: Store<RootState>) => {\n    useEffect(() => {\n        const selectionWatcher = watch(() => selectSelectionMap(store.getState()));\n        const onSelectionChange = (\n            newSelection: FileSelection,\n            oldSelection: FileSelection\n        ) => {\n            // We don't check for deep equality here as we expect the\n            // reducers to prevent all unnecessary updates.\n            if (newSelection === oldSelection) return;\n\n            // Notify users the selection has changed.\n            const selectedFilesIds = selectSelectedFileIds(store.getState());\n            const selection = new Set<string>(selectedFilesIds);\n            store.dispatch(\n                thunkRequestFileAction(ChonkyActions.ChangeSelection, {\n                    selection,\n                }) as any\n            );\n        };\n\n        const unsubscribeCallbacks = [\n            store.subscribe(selectionWatcher(onSelectionChange)),\n        ];\n        return () => {\n            for (const unsubscribe of unsubscribeCallbacks) unsubscribe();\n        };\n    }, [store]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { ChonkyIconProps } from '../../types/icons.types';\n\nexport const ChonkyIconPlaceholder: React.FC<ChonkyIconProps> = () => {\n    // This component should not be rendered unless the user has misconfigured Chonky\n    const title =\n        'No icon component found. Please follow Chonky installation instructions to ' +\n        'provide a pre-made icon component (or a custom icon).';\n    return <span title={title}></span>;\n};\n","import { ChonkyActions } from '../action-definitions/index';\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileBrowserProps } from '../types/file-browser.types';\n\nexport type ChonkyConfig = Pick<\n    FileBrowserProps,\n    | 'fileActions'\n    | 'onFileAction'\n    | 'thumbnailGenerator'\n    | 'doubleClickDelay'\n    | 'disableSelection'\n    | 'disableDefaultFileActions'\n    | 'disableDragAndDrop'\n    | 'disableDragAndDropProvider'\n    | 'defaultSortActionId'\n    | 'defaultFileViewActionId'\n    | 'clearSelectionOnOutsideClick'\n    | 'iconComponent'\n    | 'darkMode'\n    | 'i18n'\n>;\n\nexport const defaultConfig: ChonkyConfig = {\n    fileActions: null,\n    onFileAction: null,\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableSelection: false,\n    disableDefaultFileActions: false,\n    disableDragAndDrop: false,\n    disableDragAndDropProvider: false,\n    defaultSortActionId: ChonkyActions.SortFilesByName.id,\n    defaultFileViewActionId: ChonkyActions.EnableGridView.id,\n    clearSelectionOnOutsideClick: true,\n    iconComponent: ChonkyIconPlaceholder,\n    darkMode: false,\n    i18n: {},\n};\n\nexport const setChonkyDefaults = (config: Partial<ChonkyConfig>) => {\n    for (const key of Object.keys(defaultConfig)) {\n        if (key in config) {\n            defaultConfig[key as keyof ChonkyConfig] = config[\n                key as keyof ChonkyConfig\n            ] as any;\n        }\n    }\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2019\n * @license MIT\n */\n\nimport { createContext, ElementType, useMemo } from 'react';\n\nimport ExactTrie from 'exact-trie';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName, ChonkyIconProps, FileIconData } from '../types/icons.types';\n\nexport const ChonkyIconContext = createContext<ElementType<ChonkyIconProps>>(ChonkyIconPlaceholder);\n\nexport const VideoExtensions: string[] = [\n    '3g2',\n    '3gp',\n    '3gpp',\n    'asf',\n    'asx',\n    'avi',\n    'dvb',\n    'f4v',\n    'fli',\n    'flv',\n    'fvt',\n    'h261',\n    'h263',\n    'h264',\n    'jpgm',\n    'jpgv',\n    'jpm',\n    'm1v',\n    'm2v',\n    'm4u',\n    'm4v',\n    'mj2',\n    'mjp2',\n    'mk3d',\n    'mks',\n    'mkv',\n    'mng',\n    'mov',\n    'movie',\n    'mp4',\n    'mp4v',\n    'mpe',\n    'mpeg',\n    'mpg',\n    'mpg4',\n    'mxu',\n    'ogv',\n    'pyv',\n    'qt',\n    'smv',\n    'ts',\n    'uvh',\n    'uvm',\n    'uvp',\n    'uvs',\n    'uvu',\n    'uvv',\n    'uvvh',\n    'uvvm',\n    'uvvp',\n    'uvvs',\n    'uvvu',\n    'uvvv',\n    'viv',\n    'vob',\n    'webm',\n    'wm',\n    'wmv',\n    'wmx',\n    'wvx',\n];\nexport const ImageExtensions: string[] = [\n    '3ds',\n    'apng',\n    'azv',\n    'bmp',\n    'bmp',\n    'btif',\n    'cgm',\n    'cmx',\n    'djv',\n    'djvu',\n    'drle',\n    'dwg',\n    'dxf',\n    'emf',\n    'exr',\n    'fbs',\n    'fh',\n    'fh4',\n    'fh5',\n    'fh7',\n    'fhc',\n    'fits',\n    'fpx',\n    'fst',\n    'g3',\n    'gif',\n    'heic',\n    'heics',\n    'heif',\n    'heifs',\n    'ico',\n    'ico',\n    'ief',\n    'jls',\n    'jng',\n    'jp2',\n    'jpe',\n    'jpeg',\n    'jpf',\n    'jpg',\n    'jpg2',\n    'jpm',\n    'jpx',\n    'jxr',\n    'ktx',\n    'mdi',\n    'mmr',\n    'npx',\n    'pbm',\n    'pct',\n    'pcx',\n    'pcx',\n    'pgm',\n    'pic',\n    'png',\n    'pnm',\n    'ppm',\n    'psd',\n    'pti',\n    'ras',\n    'rgb',\n    'rlc',\n    'sgi',\n    'sid',\n    'sub',\n    'svg',\n    'svgz',\n    't38',\n    'tap',\n    'tfx',\n    'tga',\n    'tif',\n    'tiff',\n    'uvg',\n    'uvi',\n    'uvvg',\n    'uvvi',\n    'vtf',\n    'wbmp',\n    'wdp',\n    'webp',\n    'wmf',\n    'xbm',\n    'xif',\n    'xpm',\n    'xwd',\n];\nexport const AudioExtensions: string[] = [\n    '3gpp',\n    'aac',\n    'adp',\n    'aif',\n    'aifc',\n    'aiff',\n    'au',\n    'caf',\n    'dra',\n    'dts',\n    'dtshd',\n    'ecelp4800',\n    'ecelp7470',\n    'ecelp9600',\n    'eol',\n    'flac',\n    'kar',\n    'lvp',\n    'm2a',\n    'm3a',\n    'm3u',\n    'm4a',\n    'm4a',\n    'mid',\n    'midi',\n    'mka',\n    'mp2',\n    'mp2a',\n    'mp3',\n    'mp3',\n    'mp4a',\n    'mpga',\n    'oga',\n    'ogg',\n    'pya',\n    'ra',\n    'ra',\n    'ram',\n    'rip',\n    'rmi',\n    'rmp',\n    's3m',\n    'sil',\n    'snd',\n    'spx',\n    'uva',\n    'uvva',\n    'wav',\n    'wav',\n    'wav',\n    'wax',\n    'weba',\n    'wma',\n    'xm',\n];\nexport const ColorsLight: string[] = [\n    '#bbbbbb',\n    '#d65c5c',\n    '#d6665c',\n    '#d6705c',\n    '#d67a5c',\n    '#d6855c',\n    '#d68f5c',\n    '#d6995c',\n    '#d6a35c',\n    '#d6ad5c',\n    '#d6b85c',\n    '#d6c25c',\n    '#d6cc5c',\n    '#d6d65c',\n    '#ccd65c',\n    '#c2d65c',\n    '#b8d65c',\n    '#add65c',\n    '#a3d65c',\n    '#99d65c',\n    '#8fd65c',\n    '#85d65c',\n    '#7ad65c',\n    '#70d65c',\n    '#66d65c',\n    '#5cd65c',\n    '#5cd666',\n    '#5cd670',\n    '#5cd67a',\n    '#5cd685',\n    '#5cd68f',\n    '#5cd699',\n    '#5cd6a3',\n    '#5cd6ad',\n    '#5cd6b8',\n    '#5cd6c2',\n    '#5cd6cc',\n    '#5cd6d6',\n    '#5cccd6',\n    '#5cc2d6',\n    '#5cb8d6',\n    '#5cadd6',\n    '#5ca3d6',\n    '#5c99d6',\n    '#5c8fd6',\n    '#5c85d6',\n    '#5c7ad6',\n    '#5c70d6',\n    '#5c66d6',\n    '#5c5cd6',\n    '#665cd6',\n    '#705cd6',\n    '#7a5cd6',\n    '#855cd6',\n    '#8f5cd6',\n    '#995cd6',\n    '#a35cd6',\n    '#ad5cd6',\n    '#b85cd6',\n    '#c25cd6',\n    '#cc5cd6',\n    '#d65cd6',\n    '#d65ccc',\n    '#d65cc2',\n    '#d65cb8',\n    '#d65cad',\n    '#d65ca3',\n    '#d65c99',\n    '#d65c8f',\n    '#d65c85',\n    '#d65c7a',\n    '#d65c70',\n    '#d65c66',\n];\nexport const ColorsDark: string[] = [\n    '#777',\n    '#8f3d3d',\n    '#8f443d',\n    '#8f4b3d',\n    '#8f523d',\n    '#8f583d',\n    '#8f5f3d',\n    '#8f663d',\n    '#8f6d3d',\n    '#8f743d',\n    '#8f7a3d',\n    '#8f813d',\n    '#8f883d',\n    '#8f8f3d',\n    '#888f3d',\n    '#818f3d',\n    '#7a8f3d',\n    '#748f3d',\n    '#6d8f3d',\n    '#668f3d',\n    '#5f8f3d',\n    '#588f3d',\n    '#528f3d',\n    '#4b8f3d',\n    '#448f3d',\n    '#3d8f3d',\n    '#3d8f44',\n    '#3d8f4b',\n    '#3d8f52',\n    '#3d8f58',\n    '#3d8f5f',\n    '#3d8f66',\n    '#3d8f6d',\n    '#3d8f74',\n    '#3d8f7a',\n    '#3d8f81',\n    '#3d8f88',\n    '#3d8f8f',\n    '#3d888f',\n    '#3d818f',\n    '#3d7a8f',\n    '#3d748f',\n    '#3d6d8f',\n    '#3d668f',\n    '#3d5f8f',\n    '#3d588f',\n    '#3d528f',\n    '#3d4b8f',\n    '#3d448f',\n    '#3d3d8f',\n    '#443d8f',\n    '#4b3d8f',\n    '#523d8f',\n    '#583d8f',\n    '#5f3d8f',\n    '#663d8f',\n    '#6d3d8f',\n    '#743d8f',\n    '#7a3d8f',\n    '#813d8f',\n    '#883d8f',\n    '#8f3d8f',\n    '#8f3d88',\n    '#8f3d81',\n    '#8f3d7a',\n    '#8f3d74',\n    '#8f3d6d',\n    '#8f3d66',\n    '#8f3d5f',\n    '#8f3d58',\n    '#8f3d52',\n    '#8f3d4b',\n    '#8f3d44',\n];\n\nconst getIconTrie = () => {\n    let colourIndex = 0;\n    const step = 5;\n\n    const IconsToExtensions = [\n        // Generic file types\n        [ChonkyIconName.license, ['license']],\n        [ChonkyIconName.config, ['sfk', 'ini', 'yml', 'toml', 'iml']],\n        [ChonkyIconName.model, ['3ds', 'obj', 'ply', 'fbx']],\n        [ChonkyIconName.database, ['csv', 'json', 'sql', 'sqlite', 'sqlite3', 'npy', 'npz', 'rec', 'idx', 'hdf5']],\n        [ChonkyIconName.text, ['txt', 'md', 'mdx']],\n        [ChonkyIconName.archive, ['zip', 'rar', 'tar', 'tar.gz', '7z']],\n        [ChonkyIconName.image, ImageExtensions],\n        [ChonkyIconName.video, VideoExtensions],\n        [ChonkyIconName.code, ['html', 'php', 'css', 'sass', 'scss', 'less', 'cpp', 'h', 'hpp', 'c', 'xml']],\n        [ChonkyIconName.info, ['bib', 'readme', 'nfo']],\n        [ChonkyIconName.key, ['pem', 'pub']],\n        [ChonkyIconName.lock, ['lock', 'lock.json', 'shrinkwrap.json']],\n        [ChonkyIconName.music, AudioExtensions],\n        [ChonkyIconName.terminal, ['run', 'sh']],\n        [ChonkyIconName.trash, ['.Trashes']],\n        [ChonkyIconName.users, ['authors', 'contributors']],\n\n        // OS file types\n        [ChonkyIconName.linux, ['AppImage']],\n        [ChonkyIconName.ubuntu, ['deb']],\n        [ChonkyIconName.windows, ['exe']],\n\n        // Programming language file types\n        [ChonkyIconName.rust, ['rs', 'rlib']],\n        [ChonkyIconName.python, ['py', 'ipynb']],\n        [ChonkyIconName.nodejs, ['js', 'jsx', 'ts', 'tsx', 'd.ts']],\n        [ChonkyIconName.php, ['php']],\n\n        // Development tools file types\n        [ChonkyIconName.git, ['.gitignore']],\n\n        // Brands file types\n        [ChonkyIconName.adobe, ['psd']],\n\n        // Other program file types\n        [ChonkyIconName.pdf, ['pdf']],\n        [ChonkyIconName.excel, ['xls', 'xlsx']],\n        [ChonkyIconName.word, ['doc', 'docx', 'odt']],\n        [ChonkyIconName.flash, ['swf']],\n    ] as const;\n\n    const exactTrie = new ExactTrie({ ignoreCase: true });\n    for (const pair of IconsToExtensions) {\n        const [icon, extensions] = pair;\n\n        for (let i = 0; i < extensions.length; ++i) {\n            colourIndex += step;\n            const colorCode = (colourIndex % (ColorsLight.length - 1)) + 1;\n            const iconData: FileIconData = {\n                icon,\n                colorCode,\n            };\n            exactTrie.put(extensions[i], iconData, true);\n        }\n    }\n\n    return exactTrie;\n};\n\nconst iconTrie = getIconTrie();\n\nexport const useIconData = (file: Nullable<FileData>): FileIconData => {\n    return useMemo(() => {\n        if (!file) return { icon: ChonkyIconName.loading, colorCode: 0 };\n        if (file.isDir === true) return { icon: ChonkyIconName.folder, colorCode: 0 };\n\n        const match = iconTrie.getWithCheckpoints(file.name, '.', true);\n        return match ? match : { icon: ChonkyIconName.file, colorCode: 32 };\n    }, [file]);\n};\n","import { Theme as MuiTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\nimport { createUseStyles } from 'react-jss';\nimport { DeepPartial } from 'tsdef';\n\nexport const lightTheme = {\n    colors: {\n        debugRed: '#fabdbd',\n        debugBlue: '#bdd8fa',\n        debugGreen: '#d2fabd',\n        debugPurple: '#d2bdfa',\n        debugYellow: '#fae9bd',\n\n        textActive: '#09f',\n    },\n\n    fontSizes: {\n        rootPrimary: 15,\n    },\n\n    margins: {\n        rootLayoutMargin: 8,\n    },\n\n    toolbar: {\n        size: 30,\n        lineHeight: '30px', // `px` suffix is required for `line-height` fields to work\n        fontSize: 15,\n        buttonRadius: 4,\n    },\n\n    dnd: {\n        canDropColor: 'green',\n        cannotDropColor: 'red',\n        canDropMask: 'rgba(180, 235, 180, 0.75)',\n        cannotDropMask: 'rgba(235, 180, 180, 0.75)',\n        fileListCanDropMaskOne: 'rgba(180, 235, 180, 0.1)',\n        fileListCanDropMaskTwo: 'rgba(180, 235, 180, 0.2)',\n        fileListCannotDropMaskOne: 'rgba(235, 180, 180, 0.1)',\n        fileListCannotDropMaskTwo: 'rgba(235, 180, 180, 0.2)',\n    },\n\n    dragLayer: {\n        border: 'solid 2px #09f',\n        padding: '7px 10px',\n        borderRadius: 2,\n    },\n\n    fileList: {\n        desktopGridGutter: 8,\n        mobileGridGutter: 5,\n    },\n\n    gridFileEntry: {\n        childrenCountSize: '1.6em',\n        iconColorFocused: '#000',\n        iconSize: '2.4em',\n        iconColor: '#fff',\n        borderRadius: 5,\n        fontSize: 14,\n\n        fileColorTint: 'rgba(255, 255, 255, 0.4)',\n        folderBackColorTint: 'rgba(255, 255, 255, 0.1)',\n        folderFrontColorTint: 'rgba(255, 255, 255, 0.4)',\n    },\n\n    listFileEntry: {\n        propertyFontSize: 14,\n        iconFontSize: '1.1em',\n        iconBorderRadius: 5,\n        fontSize: 14,\n    },\n};\n\nexport type ChonkyTheme = typeof lightTheme;\n\nexport const darkThemeOverride: DeepPartial<ChonkyTheme> = {\n    gridFileEntry: {\n        fileColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderBackColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderFrontColorTint: 'rgba(50, 50, 50, 0.15)',\n    },\n};\n\nexport const mobileThemeOverride: DeepPartial<ChonkyTheme> = {\n    fontSizes: {\n        rootPrimary: 13,\n    },\n    margins: {\n        rootLayoutMargin: 4,\n    },\n    toolbar: {\n        size: 28,\n        lineHeight: '28px',\n        fontSize: 13,\n    },\n    gridFileEntry: {\n        fontSize: 13,\n    },\n    listFileEntry: {\n        propertyFontSize: 12,\n        iconFontSize: '1em',\n        fontSize: 13,\n    },\n};\n\nexport const useIsMobileBreakpoint = () => {\n    return useMediaQuery('(max-width:480px)');\n};\n\nexport const getStripeGradient = (colorOne: string, colorTwo: string) =>\n    'repeating-linear-gradient(' +\n    '45deg,' +\n    `${colorOne},` +\n    `${colorOne} 10px,` +\n    `${colorTwo} 0,` +\n    `${colorTwo} 20px` +\n    ')';\n\nexport const makeLocalChonkyStyles = <C extends string = string>(\n    styles: (theme: ChonkyTheme & MuiTheme) => any\n    // @ts-ignore\n): any => createUseStyles<ChonkyTheme, C>(styles);\n\nexport const makeGlobalChonkyStyles = <C extends string = string>(\n    makeStyles: (theme: ChonkyTheme & MuiTheme) => any\n) => {\n    const selectorMapping = {};\n    const makeGlobalStyles = (theme: ChonkyTheme) => {\n        const localStyles = makeStyles(theme as any);\n        const globalStyles = {};\n        const localSelectors = Object.keys(localStyles);\n        localSelectors.map(localSelector => {\n            const globalSelector = `chonky-${localSelector}`;\n            const jssSelector = `@global .${globalSelector}`;\n            // @ts-ignore\n            globalStyles[jssSelector] = localStyles[localSelector];\n            // @ts-ignore\n            selectorMapping[localSelector] = globalSelector;\n        });\n        return globalStyles;\n    };\n\n    // @ts-ignore\n    const useStyles = createUseStyles<ChonkyTheme, C>(makeGlobalStyles as any);\n    return (...args: any[]): any => {\n        const styles = useStyles(...args);\n        const classes = {};\n        Object.keys(selectorMapping).map(localSelector => {\n            // @ts-ignore\n            classes[localSelector] = selectorMapping[localSelector];\n        });\n        return { ...classes, ...styles };\n    };\n};\n\nexport const important = <T>(value: T) => [value, '!important'];\n\nexport const c = classnames;\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { initialRootState } from '../../redux/state';\nimport { useDTE, usePropReduxUpdate } from '../../redux/store';\nimport {\n    thunkActivateSortAction, thunkUpdateDefaultFileViewActionId, thunkUpdateRawFileActions\n} from '../../redux/thunks/file-actions.thunks';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { useFileBrowserHandle } from '../../util/file-browser-handle';\nimport { getValueOrFallback } from '../../util/helpers';\n\nexport const ChonkyBusinessLogicInner = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        // ==== Update Redux state\n        usePropReduxUpdate(reduxActions.setRawFiles, props.files ?? initialRootState.rawFiles);\n        usePropReduxUpdate(reduxActions.setRawFolderChain, props.folderChain);\n        useDTE(\n            thunkUpdateRawFileActions,\n            getValueOrFallback(props.fileActions, defaultConfig.fileActions),\n            getValueOrFallback(props.disableDefaultFileActions, defaultConfig.disableDefaultFileActions)\n        );\n        useDTE(\n            reduxActions.setExternalFileActionHandler,\n            getValueOrFallback(props.onFileAction, defaultConfig.onFileAction) as any\n        );\n        useDTE(\n            reduxActions.setSelectionDisabled,\n            getValueOrFallback(props.disableSelection, defaultConfig.disableSelection, 'boolean')\n        );\n        useDTE(\n            thunkActivateSortAction,\n            getValueOrFallback(props.defaultSortActionId, defaultConfig.defaultSortActionId)\n        );\n        useDTE(\n            thunkUpdateDefaultFileViewActionId,\n            getValueOrFallback(props.defaultFileViewActionId, defaultConfig.defaultFileViewActionId, 'string')\n        );\n\n        useDTE(\n            reduxActions.setThumbnailGenerator,\n            getValueOrFallback(props.thumbnailGenerator, defaultConfig.thumbnailGenerator)\n        );\n        useDTE(\n            reduxActions.setDoubleClickDelay,\n            getValueOrFallback(props.doubleClickDelay, defaultConfig.doubleClickDelay, 'number')\n        );\n        useDTE(\n            reduxActions.setDisableDragAndDrop,\n            getValueOrFallback(props.disableDragAndDrop, defaultConfig.disableDragAndDrop, 'boolean')\n        );\n        useDTE(\n            reduxActions.setClearSelectionOnOutsideClick,\n            getValueOrFallback(\n                props.clearSelectionOnOutsideClick,\n                defaultConfig.clearSelectionOnOutsideClick,\n                'boolean'\n            )\n        );\n\n        // ==== Setup the imperative handle for external use\n        useFileBrowserHandle(ref);\n\n        return null;\n    })\n);\nChonkyBusinessLogicInner.displayName = 'ChonkyBusinessLogicInner';\n\nexport const ChonkyBusinessLogic = React.memo(ChonkyBusinessLogicInner);\nChonkyBusinessLogic.displayName = 'ChonkyBusinessLogic';\n","import React, { useImperativeHandle } from 'react';\nimport { useDispatch, useStore } from 'react-redux';\n\nimport { reduxActions } from '../redux/reducers';\nimport { selectSelectionMap } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileAction } from '../types/action.types';\nimport { FileBrowserHandle } from '../types/file-browser.types';\nimport { RootState } from '../types/redux.types';\n\nexport const useFileBrowserHandle = (ref: React.Ref<FileBrowserHandle>) => {\n    const store = useStore<RootState>();\n    const dispatch = useDispatch();\n\n    useImperativeHandle(\n        ref,\n        () => ({\n            getFileSelection(): Set<string> {\n                const selectionMap = selectSelectionMap(store.getState());\n                const selectionSet = new Set(Object.keys(selectionMap));\n                return selectionSet;\n            },\n            setFileSelection(selection, reset = true): void {\n                const fileIds = Array.from(selection);\n                dispatch(reduxActions.selectFiles({ fileIds, reset }));\n            },\n            requestFileAction<Action extends FileAction>(\n                action: Action,\n                payload: Action['__payloadType']\n            ): Promise<void> {\n                return Promise.resolve(\n                    dispatch(thunkRequestFileAction(action, payload))\n                ).then();\n            },\n        }),\n        [store, dispatch]\n    );\n};\n","import { useCallback, useContext } from 'react';\nimport { DndContext, useDrag, useDrop } from 'react-dnd';\n\nexport const useDndContextAvailable = () => {\n    const dndContext = useContext(DndContext);\n    const { dragDropManager } = dndContext;\n    return !!dragDropManager;\n};\n\nexport const useDragIfAvailable: typeof useDrag = (...args) => {\n    // This is an ugly hack to make `useDrag` not throw if a `DndContext` is not available.\n    // See: https://github.com/react-dnd/react-dnd/issues/2212\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrag = dndContextAvailable ? useDrag : mockHook;\n    return useHook(...args);\n};\n\nexport const useDropIfAvailable: typeof useDrop = (...args) => {\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrop = dndContextAvailable ? useDrop : mockHook;\n    return useHook(...args);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useDragLayer } from 'react-dnd';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyDndFileEntryItem, ChonkyDndFileEntryType } from '../../types/dnd.types';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileListDragLayerProps {}\n\nconst layerStyles: React.CSSProperties = {\n    position: 'fixed',\n    pointerEvents: 'none',\n    zIndex: 100,\n    left: 0,\n    top: 0,\n    width: '100%',\n    height: '100%',\n};\nconst getItemStyles = (\n    initialCursorOffset: Nullable<{ x: number; y: number }>,\n    initialFileOffset: Nullable<{ x: number; y: number }>,\n    currentFileOffset: Nullable<{ x: number; y: number }>\n) => {\n    if (!initialCursorOffset || !initialFileOffset || !currentFileOffset) {\n        return {\n            display: 'none',\n        };\n    }\n    const x = initialCursorOffset.x + (currentFileOffset.x - initialFileOffset.x);\n    const y = initialCursorOffset.y + (currentFileOffset.y - initialFileOffset.y);\n    const transform = `translate(${x}px, ${y}px)`;\n    return {\n        transform,\n        WebkitTransform: transform,\n    };\n};\n\nexport const DnDFileListDragLayer: React.FC<DnDFileListDragLayerProps> = () => {\n    const classes = useStyles();\n\n    const {\n        itemType,\n        item,\n        initialCursorOffset,\n        initialFileOffset,\n        currentFileOffset,\n        isDragging,\n    } = useDragLayer(monitor => ({\n        item: monitor.getItem() as ChonkyDndFileEntryItem,\n        itemType: monitor.getItemType(),\n        initialCursorOffset: monitor.getInitialClientOffset(),\n        initialFileOffset: monitor.getInitialSourceClientOffset(),\n        currentFileOffset: monitor.getSourceClientOffset(),\n        isDragging: monitor.isDragging(),\n    }));\n    if (!isDragging || itemType !== ChonkyDndFileEntryType || !item.payload) {\n        return null;\n    }\n\n    const selectionSize = item.payload.selectedFiles.length;\n    return (\n        <div style={layerStyles}>\n            <div\n                style={getItemStyles(\n                    initialCursorOffset,\n                    initialFileOffset,\n                    currentFileOffset\n                )}\n            >\n                <div className={classes.fileDragPreview}>\n                    <b>{item.payload.draggedFile.name}</b>\n                    {selectionSize > 1 && (\n                        <>\n                            {' and '}\n                            <strong>\n                                {selectionSize - 1} other file\n                                {selectionSize - 1 !== 1 ? 's' : ''}\n                            </strong>\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileDragPreview: {\n        boxShadow: `2px 2px 5px ${theme.palette.divider}`,\n        backgroundColor: theme.palette.background.default,\n        borderRadius: theme.dragLayer.borderRadius,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        padding: theme.dragLayer.padding,\n        border: theme.dragLayer.border,\n        display: 'inline-block',\n    },\n}));\n","import { DragObjectWithType } from 'react-dnd';\nimport { Nilable } from 'tsdef';\n\nimport { StartDragNDropPayload } from './action-payloads.types';\nimport { FileData } from './file.types';\n\nexport interface ChonkyDndDropResult {\n    dropTarget: Nilable<FileData> | any;\n    dropEffect: 'move' | 'copy';\n}\n\nexport type ChonkyDndFileEntryItem = DragObjectWithType & {\n    payload: StartDragNDropPayload;\n};\nexport const ChonkyDndFileEntryType = 'dnd-chonky-file-entry';\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport hotkeys from 'hotkeys-js';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\n\nexport interface HotkeyListenerProps {\n    fileActionId: string;\n}\n\nexport const HotkeyListener: React.FC<HotkeyListenerProps> = React.memo(props => {\n    const { fileActionId } = props;\n\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n\n    useEffect(() => {\n        if (!fileAction || !fileAction.hotkeys || fileAction.hotkeys.length === 0) {\n            return;\n        }\n\n        const hotkeysStr = fileAction.hotkeys.join(',');\n        const hotkeyCallback = (event: KeyboardEvent) => {\n            event.preventDefault();\n            dispatch(thunkRequestFileAction(fileAction, undefined));\n        };\n        hotkeys(hotkeysStr, hotkeyCallback);\n        return () => hotkeys.unbind(hotkeysStr, hotkeyCallback);\n    }, [dispatch, fileAction]);\n\n    return null;\n});\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { reduxActions } from '../../redux/reducers';\nimport {\n    selectClearSelectionOnOutsideClick,\n    selectFileActionIds,\n    selectIsDnDDisabled,\n} from '../../redux/selectors';\nimport { useDndContextAvailable } from '../../util/dnd-fallback';\nimport { elementIsInsideButton } from '../../util/helpers';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuTrigger } from '../external/FileContextMenu-hooks';\nimport { DnDFileListDragLayer } from '../file-list/DnDFileListDragLayer';\nimport { HotkeyListener } from './HotkeyListener';\n\nexport interface ChonkyPresentationLayerProps {}\n\nexport const ChonkyPresentationLayer: React.FC<ChonkyPresentationLayerProps> = ({\n    children,\n}) => {\n    const dispatch = useDispatch();\n    const fileActionIds = useSelector(selectFileActionIds);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n    const clearSelectionOnOutsideClick = useSelector(\n        selectClearSelectionOnOutsideClick\n    );\n\n    // Deal with clicks outside of Chonky\n    const handleClickAway = useCallback(\n        (event: React.MouseEvent<Document>) => {\n            if (!clearSelectionOnOutsideClick || elementIsInsideButton(event.target)) {\n                // We only clear out the selection on outside click if the click target\n                // was not a button. We don't want to clear out the selection when a\n                // button is clicked because Chonky users might want to trigger some\n                // selection-related action on that button click.\n                return;\n            }\n            dispatch(reduxActions.clearSelection());\n        },\n        [dispatch, clearSelectionOnOutsideClick]\n    );\n\n    // Generate necessary components\n    const hotkeyListenerComponents = useMemo(\n        () =>\n            fileActionIds.map(actionId => (\n                <HotkeyListener\n                    key={`file-action-listener-${actionId}`}\n                    fileActionId={actionId}\n                />\n            )),\n        [fileActionIds]\n    );\n\n    const dndContextAvailable = useDndContextAvailable();\n    const showContextMenu = useContextMenuTrigger();\n\n    const classes = useStyles();\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n            <Box className={classes.chonkyRoot} onContextMenu={showContextMenu}>\n                {!dndDisabled && dndContextAvailable && <DnDFileListDragLayer />}\n                {hotkeyListenerComponents}\n                {children ? children : null}\n            </Box>\n        </ClickAwayListener>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    chonkyRoot: {\n        backgroundColor: theme.palette.background.paper,\n        border: `solid 1px ${theme.palette.divider}`,\n        padding: theme.margins.rootLayoutMargin,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        touchAction: 'manipulation', // Disabling zoom on double tap\n        fontFamily: 'sans-serif',\n        flexDirection: 'column',\n        boxSizing: 'border-box',\n        textAlign: 'left',\n        borderRadius: 4,\n        display: 'flex',\n        height: '100%',\n\n        // Disabling select\n        webkitTouchCallout: 'none',\n        webkitUserSelect: 'none',\n        mozUserSelect: 'none',\n        msUserSelect: 'none',\n        userSelect: 'none',\n    },\n}));\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuMounted } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { findElementAmongAncestors } from '../../util/helpers';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\n\nexport const findClosestChonkyFileId = (\n    element: HTMLElement | any\n): Nullable<string> => {\n    const fileEntryWrapperDiv = findElementAmongAncestors(\n        element,\n        (element: any) =>\n            element.tagName &&\n            element.tagName.toLowerCase() === 'div' &&\n            element.dataset &&\n            element.dataset.chonkyFileId\n    );\n    return fileEntryWrapperDiv ? fileEntryWrapperDiv.dataset.chonkyFileId! : null;\n};\n\nexport const useContextMenuTrigger = () => {\n    const dispatch = useDispatch();\n    const contextMenuMountedRef = useInstanceVariable(\n        useSelector(selectContextMenuMounted)\n    );\n    return useCallback(\n        (event: React.MouseEvent<HTMLDivElement>) => {\n            // Use default browser context menu when Chonky context menu component\n            // is not mounted.\n            if (!contextMenuMountedRef.current) return;\n            // Users can use Alt+Right Click to bring up browser's default\n            // context menu instead of Chonky's context menu.\n            if (event.altKey) return;\n\n            event.preventDefault();\n\n            const triggerFileId = findClosestChonkyFileId(event.target);\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.OpenFileContextMenu, {\n                    clientX: event.clientX,\n                    clientY: event.clientY,\n                    triggerFileId,\n                })\n            );\n        },\n        [contextMenuMountedRef, dispatch]\n    );\n};\n\nexport const useContextMenuDismisser = () => {\n    const dispatch = useDispatch();\n    return useCallback(() => dispatch(reduxActions.hideContextMenu()), [dispatch]);\n};\n","import {\n    createMuiTheme,\n    ThemeProvider as MuiThemeProvider,\n} from '@material-ui/core/styles';\nimport merge from 'deepmerge';\nimport React, { ReactNode, useMemo } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { IntlProvider } from 'react-intl';\nimport { ThemeProvider } from 'react-jss';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport shortid from 'shortid';\n\nimport { useChonkyStore } from '../../redux/store';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { getValueOrFallback } from '../../util/helpers';\nimport { useStaticValue } from '../../util/hooks-helpers';\nimport { ChonkyFormattersContext, defaultFormatters } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    darkThemeOverride,\n    lightTheme,\n    mobileThemeOverride,\n    useIsMobileBreakpoint,\n} from '../../util/styles';\nimport { ChonkyBusinessLogic } from '../internal/ChonkyBusinessLogic';\nimport { ChonkyIconPlaceholder } from '../internal/ChonkyIconPlaceholder';\nimport { ChonkyPresentationLayer } from '../internal/ChonkyPresentationLayer';\n\n// if (process.env.NODE_ENV === 'development') {\n//     const whyDidYouRender = require('@welldone-software/why-did-you-render');\n//     whyDidYouRender(React, {\n//         trackAllPureComponents: true,\n//     });\n// }\n\nexport const FileBrowser = React.forwardRef<\n    FileBrowserHandle,\n    FileBrowserProps & { children?: ReactNode }\n>((props, ref) => {\n    const { instanceId, iconComponent, children } = props;\n    const disableDragAndDrop = getValueOrFallback(\n        props.disableDragAndDrop,\n        defaultConfig.disableDragAndDrop,\n        'boolean'\n    );\n    const disableDragAndDropProvider = getValueOrFallback(\n        props.disableDragAndDropProvider,\n        defaultConfig.disableDragAndDropProvider,\n        'boolean'\n    );\n    const darkMode = getValueOrFallback(\n        props.darkMode,\n        defaultConfig.darkMode,\n        'boolean'\n    );\n    const i18n = getValueOrFallback(props.i18n, defaultConfig.i18n);\n    const formatters = useMemo(() => ({ ...defaultFormatters, ...i18n?.formatters }), [\n        i18n,\n    ]);\n\n    const chonkyInstanceId = useStaticValue(() => instanceId ?? shortid.generate());\n    const store = useChonkyStore(chonkyInstanceId);\n\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n    const theme = useMemo(() => {\n        const muiTheme = createMuiTheme({\n            palette: { type: darkMode ? 'dark' : 'light' },\n        });\n        const combinedTheme = merge(\n            muiTheme,\n            merge(lightTheme, darkMode ? darkThemeOverride : {})\n        );\n        return isMobileBreakpoint\n            ? merge(combinedTheme, mobileThemeOverride)\n            : combinedTheme;\n    }, [darkMode, isMobileBreakpoint]);\n\n    const chonkyComps = (\n        <>\n            <ChonkyBusinessLogic ref={ref} {...props} />\n            <ChonkyPresentationLayer>{children}</ChonkyPresentationLayer>\n        </>\n    );\n\n    return (\n        <IntlProvider locale=\"en\" defaultLocale=\"en\" {...i18n}>\n            <ChonkyFormattersContext.Provider value={formatters}>\n                <ReduxProvider store={store}>\n                    <ThemeProvider theme={theme}>\n                        <MuiThemeProvider theme={theme}>\n                            <ChonkyIconContext.Provider\n                                value={\n                                    iconComponent ??\n                                    defaultConfig.iconComponent ??\n                                    ChonkyIconPlaceholder\n                                }\n                            >\n                                {disableDragAndDrop || disableDragAndDropProvider ? (\n                                    chonkyComps\n                                ) : (\n                                    <DndProvider backend={HTML5Backend}>\n                                        {chonkyComps}\n                                    </DndProvider>\n                                )}\n                            </ChonkyIconContext.Provider>\n                        </MuiThemeProvider>\n                    </ThemeProvider>\n                </ReduxProvider>\n            </ChonkyFormattersContext.Provider>\n        </IntlProvider>\n    );\n});\nFileBrowser.displayName = 'FileBrowser';\n","import { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectFolderChain } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { FileData } from '../../types/file.types';\nimport { FileHelper } from '../../util/file-helper';\n\nexport interface FolderChainItem {\n    file: Nullable<FileData>;\n    disabled: boolean;\n    onClick?: () => void;\n}\n\nexport const useFolderChainItems = (): FolderChainItem[] => {\n    const folderChain = useSelector(selectFolderChain);\n    const dispatch = useDispatch();\n\n    const folderChainItems = useMemo(() => {\n        const items: FolderChainItem[] = [];\n        if (!folderChain) return items;\n\n        for (let i = 0; i < folderChain.length; ++i) {\n            const file = folderChain[i];\n            items.push({\n                file,\n                disabled: !file,\n                onClick:\n                    !FileHelper.isOpenable(file) || i === folderChain.length - 1\n                        ? undefined\n                        : () =>\n                              dispatch(\n                                  thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                                      targetFile: file,\n                                      files: [file],\n                                  })\n                              ),\n            });\n        }\n        return items;\n    }, [dispatch, folderChain]);\n    return folderChainItems;\n};\n","import { MaybePromise, Nullable } from 'tsdef';\n\nimport { FileActionState } from './action-handler.types';\nimport { FileViewConfig } from './file-view.types';\nimport { FileFilter, FileMap } from './file.types';\nimport { ChonkyIconName } from './icons.types';\nimport { ChonkyDispatch, RootState } from './redux.types';\nimport { FileSortKeySelector } from './sort.types';\n\nexport interface FileAction {\n    /**\n     * Unique file action ID. If you set the action ID to one of the built-in Chonky\n     * action action IDs, you custom action definition will override the built-in\n     * definition.\n     */\n    id: string;\n    /**\n     * When set to `true`, the action will only be active (dispatchable) when user\n     * selects one or more files. If `fileFilter` is defined, it will be applied to\n     * selection before checking if its empty.\n     */\n    requiresSelection?: boolean; // Requires selection of 1+ files\n    /**\n     * A predicate that determines whether a file should be included in the selection\n     * for this action.\n     */\n    fileFilter?: FileFilter;\n    /**\n     * List of hotkeys that should trigger this action, defined using `hotkey-js`\n     * notation.\n     * @see https://www.npmjs.com/package/hotkeys-js\n     */\n    hotkeys?: string[] | readonly string[];\n    /**\n     * When button is defined and `toolbar` or `contextMenu` is set to `true`, a\n     * button will be added to the relevant UI component. Clicking on this button\n     * will active this action. The appearance of the button will change based on\n     * the action definition and the current Chonky state.\n     */\n    button?: FileActionButton;\n    /**\n     * When `sortKeySelector` is specified, the action becomes a sorting toggle. When\n     * this action is activated, it will sort files using the key selector, toggling\n     * between Ascending and Descending orders.\n     */\n    sortKeySelector?: FileSortKeySelector;\n    /**\n     * When `fileViewConfig` is specified, triggering this action will apply the\n     * provided config to Chonky's file view.\n     */\n    fileViewConfig?: FileViewConfig;\n    /**\n     * When `option` is specified, the action becomes an option toggle. When the action\n     * is activated, the boolean value of the option will be toggled.\n     */\n    option?: FileActionOption;\n    /**\n     * When selection transform is defined, activating this action will update the file\n     * selection. If the transform function returns `null`, selection will be left\n     * untouched.\n     */\n    selectionTransform?: FileSelectionTransform;\n    /**\n     * When effect is defined, it will be called right before dispatching the action to\n     * the user defined action handler. If the effect function returns a promise, Chonky\n     * will wait for the promise to resolve or fail before dispatching the action to the\n     * handler. If this function returns `true`, the file action will NOT be dispatched\n     * the the handler.\n     */\n    effect?: FileActionEffect;\n    /**\n     * When customVisibility is defined, it will change the display state of the file action\n     * The function must return the visibility as one of the CustomVisibilityState values:\n     *  - Hidden\n     *  - Disabled\n     *  - Default\n     *  - Active\n     */\n    customVisibility?: () => CustomVisibilityState;\n    /**\n     * Field used to infer the type of action payload. It is used solely for Typescript\n     * type inference and action validation.\n     */\n    __payloadType?: any;\n    /**\n     * Field used to infer the type of extra state for this action. It is used solely\n     * for Typescript type inference and action validation.\n     */\n    __extraStateType?: any;\n}\n\nexport interface FileActionButton {\n    name: string; // Button name\n    toolbar?: boolean; // Whether to show the button in the toolbar\n    contextMenu?: boolean; // Whether to show the button in the context menu\n    group?: string; // Button group (dropdown in toolbar or section in context menu)\n    tooltip?: string; // Help tooltip text\n    icon?: ChonkyIconName | string | any; // Icon name\n    iconOnly?: boolean; // Whether to only display the icon\n}\n\nexport interface FileActionOption {\n    id: string; // Unique option ID\n    defaultValue: boolean; // Whether the option is enabled by default (required)\n}\n\nexport type FileSelectionTransform = (data: {\n    prevSelection: Set<string>;\n    fileIds: ReadonlyArray<string>;\n    fileMap: Readonly<FileMap>;\n    hiddenFileIds: Set<string>;\n}) => Nullable<Set<string>>;\n\nexport type FileActionEffect<Action extends FileAction = any> = (data: {\n    action: Action;\n    payload: Action['__payloadType'];\n    state: FileActionState<{}>; // extra state is empty on purpose\n    reduxDispatch: ChonkyDispatch;\n    getReduxState: () => RootState;\n}) => MaybePromise<undefined | boolean | void>;\n\nexport type FileActionMap = { [actonId: string]: FileAction };\n\nexport enum CustomVisibilityState {\n    Hidden, \n    Disabled, \n    Default,\n    Active\n};\n","import { useCallback, useEffect, useMemo } from 'react';\nimport { DragSourceMonitor, DropTargetMonitor } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useDispatch, useSelector, useStore } from 'react-redux';\nimport { ExcludeKeys, Nullable } from 'tsdef';\n\nimport { EssentialActions } from '../action-definitions/essential';\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectCurrentFolder,\n    selectFolderChain,\n    selectInstanceId,\n    selectSelectedFiles,\n} from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { StartDragNDropPayload } from '../types/action-payloads.types';\nimport {\n    ChonkyDndDropResult,\n    ChonkyDndFileEntryItem,\n    ChonkyDndFileEntryType,\n} from '../types/dnd.types';\nimport { DndEntryState } from '../types/file-list.types';\nimport { FileData } from '../types/file.types';\nimport { useDragIfAvailable, useDropIfAvailable } from './dnd-fallback';\nimport { FileHelper } from './file-helper';\nimport { useInstanceVariable } from './hooks-helpers';\n\nexport const useFileDrag = (file: Nullable<FileData>) => {\n    // Prepare the dnd payload\n    const store = useStore();\n    const fileRef = useInstanceVariable(file);\n    const getDndStartPayload = useCallback<() => StartDragNDropPayload>(() => {\n        const reduxState = store.getState();\n        return {\n            sourceInstanceId: selectInstanceId(reduxState),\n            source: selectCurrentFolder(reduxState),\n            // We force non-null type below because by convention, if drag & drop for\n            // this file was possible, it must have been non-null.\n            draggedFile: fileRef.current!,\n            selectedFiles: selectSelectedFiles(reduxState),\n        };\n    }, [store, fileRef]);\n\n    // For drag source\n    const dispatch = useDispatch();\n    const canDrag = useCallback(() => FileHelper.isDraggable(fileRef.current), [\n        fileRef,\n    ]);\n    const onDragStart = useCallback((): ChonkyDndFileEntryItem => {\n        const item: ChonkyDndFileEntryItem = {\n            type: ChonkyDndFileEntryType,\n            payload: getDndStartPayload(),\n        };\n        dispatch(thunkRequestFileAction(ChonkyActions.StartDragNDrop, item.payload));\n        return item;\n    }, [dispatch, getDndStartPayload]);\n    const onDragEnd = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DragSourceMonitor) => {\n            const dropResult = monitor.getDropResult() as ChonkyDndDropResult;\n            if (\n                !FileHelper.isDraggable(item.payload.draggedFile) ||\n                !dropResult ||\n                !dropResult.dropTarget\n            ) {\n                return;\n            }\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.EndDragNDrop, {\n                    ...item.payload,\n                    destination: dropResult.dropTarget,\n                    copy: dropResult.dropEffect === 'copy',\n                })\n            );\n        },\n        [dispatch]\n    );\n\n    // Create refs for react-dnd hooks\n    const item = useMemo<ChonkyDndFileEntryItem>(\n        () => ({\n            type: ChonkyDndFileEntryType,\n            // Payload is actually added in `onDragStart`\n            payload: {} as StartDragNDropPayload,\n        }),\n        []\n    );\n    const collect = useCallback(monitor => ({ isDragging: monitor.isDragging() }), []);\n    const [{ isDragging: dndIsDragging }, drag, preview] = useDragIfAvailable({\n        item,\n        canDrag,\n        begin: onDragStart,\n        // @ts-ignore\n        end: onDragEnd,\n        collect,\n    });\n\n    useEffect(() => {\n        // Set drag preview to an empty image because `DnDFileListDragLayer` will\n        // provide its own preview.\n        preview(getEmptyImage(), { captureDraggingState: true });\n    }, [preview]);\n\n    return { dndIsDragging, drag };\n};\n\ninterface UseFileDropParams {\n    file: Nullable<FileData>;\n    forceDisableDrop?: boolean;\n    includeChildrenDrops?: boolean;\n}\n\nexport const useFileDrop = ({\n    file,\n    forceDisableDrop,\n    includeChildrenDrops,\n}: UseFileDropParams) => {\n    const folderChainRef = useInstanceVariable(useSelector(selectFolderChain));\n    const onDrop = useCallback(\n        (_item: ChonkyDndFileEntryItem, monitor) => {\n            if (!monitor.canDrop()) return;\n            const customDropResult: ExcludeKeys<ChonkyDndDropResult, 'dropEffect'> = {\n                dropTarget: file,\n            };\n            return customDropResult;\n        },\n        [file]\n    );\n    const canDrop = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DropTargetMonitor) => {\n            if (\n                forceDisableDrop ||\n                !FileHelper.isDroppable(file) ||\n                (!monitor.isOver({ shallow: true }) && !includeChildrenDrops)\n            ) {\n                return false;\n            }\n            const { source, draggedFile, selectedFiles } = item.payload;\n\n            // We prevent folders from being dropped into themselves. We also prevent\n            // any folder from current folder chain being moved - we can't move the\n            // folder that we are currently in.\n            const prohibitedFileIds = new Set<string>();\n            prohibitedFileIds.add(file.id);\n            folderChainRef.current.map(folder => {\n                if (folder) prohibitedFileIds.add(folder.id);\n            });\n            const movedFiles: FileData[] = [draggedFile, ...selectedFiles];\n            for (const currFile of movedFiles) {\n                if (prohibitedFileIds.has(currFile.id)) return false;\n            }\n\n            // Finally, prohibit files from being moved into their parent folder\n            // (which is a no-op).\n            return file.id !== source?.id;\n        },\n        [forceDisableDrop, file, includeChildrenDrops, folderChainRef]\n    );\n    const collect = useCallback(\n        monitor => ({\n            isOver: monitor.isOver(),\n            isOverCurrent: monitor.isOver({ shallow: true }),\n            canDrop: monitor.canDrop(),\n        }),\n        []\n    );\n    const [\n        { isOver: dndIsOver, isOverCurrent: dndIsOverCurrent, canDrop: dndCanDrop },\n        drop,\n    ] = useDropIfAvailable({\n        accept: ChonkyDndFileEntryType,\n        drop: onDrop,\n        canDrop,\n        collect,\n    });\n    return { dndIsOver, dndIsOverCurrent, dndCanDrop, drop };\n};\n\nexport const useFileEntryDnD = (file: Nullable<FileData>) => {\n    const { dndIsDragging, drag } = useFileDrag(file);\n    const { dndIsOver, dndCanDrop, drop } = useFileDrop({ file });\n    const dndState = useMemo<DndEntryState>(\n        () => ({\n            dndIsDragging,\n            dndIsOver,\n            dndCanDrop,\n        }),\n        [dndCanDrop, dndIsDragging, dndIsOver]\n    );\n    return {\n        drop,\n        drag,\n        dndState,\n    };\n};\n\nexport const useDndHoverOpen = (file: Nullable<FileData>, dndState: DndEntryState) => {\n    const dispatch = useDispatch();\n    const currentFolderRef = useInstanceVariable(useSelector(selectCurrentFolder));\n    useEffect(() => {\n        let timeout: Nullable<any> = null;\n        if (\n            dndState.dndIsOver &&\n            FileHelper.isDndOpenable(file) &&\n            file.id !== currentFolderRef.current?.id\n        ) {\n            timeout = setTimeout(\n                () =>\n                    dispatch(\n                        thunkRequestFileAction(EssentialActions.OpenFiles, {\n                            targetFile: file,\n                            files: [file],\n                        })\n                    ),\n                // TODO: Make this timeout configurable\n                1500\n            );\n        }\n        return () => {\n            if (timeout) clearTimeout(timeout);\n        };\n    }, [dispatch, file, dndState.dndIsOver, currentFolderRef]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface TextPlaceholderProps {\n    minLength: number;\n    maxLength: number;\n}\n\nconst getRandomInt = (min: number, max: number) => {\n    return min + Math.floor(Math.random() * Math.floor(max - min));\n};\nexport const TextPlaceholder: React.FC<TextPlaceholderProps> = React.memo(props => {\n    const { minLength, maxLength } = props;\n\n    const placeholderLength = getRandomInt(minLength, maxLength);\n    const whitespace = '&nbsp;'.repeat(placeholderLength);\n\n    const classes = useStyles();\n    return (\n        <span\n            className={classes.textPlaceholder}\n            dangerouslySetInnerHTML={{ __html: whitespace }}\n        />\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(() => ({\n    '@keyframes loading-placeholder': {\n        '0%': { opacity: 0.2 },\n        '50%': { opacity: 0.4 },\n        '100%': { opacity: 0.2 },\n    },\n    textPlaceholder: {\n        animationName: '$loading-placeholder',\n        animationIterationCount: 'infinite',\n        animationTimingFunction: 'linear',\n        animationDuration: '1.5s',\n        backgroundColor: '#ccc',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        borderRadius: 4,\n        maxWidth: '40%',\n        minWidth: 20,\n    },\n}));\n","import React, {\n    HTMLProps, useCallback, useContext, useEffect, useMemo, useRef, useState\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectThumbnailGenerator } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { ChonkyIconContext, ColorsDark, ColorsLight, useIconData } from '../../util/icon-helper';\nimport { Logger } from '../../util/logger';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { KeyboardClickEvent, MouseClickEvent } from '../internal/ClickableWrapper';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const useFileEntryHtmlProps = (file: Nullable<FileData>): HTMLProps<HTMLDivElement> => {\n    return useMemo(() => {\n        const dataProps: { [prop: string]: Undefinable<string> } = {\n            'data-test-id': 'file-entry',\n            'data-chonky-file-id': file ? file.id : undefined,\n        };\n\n        return {\n            role: 'listitem',\n            ...dataProps,\n        };\n    }, [file]);\n};\n\nexport const useFileEntryState = (file: Nullable<FileData>, selected: boolean, focused: boolean) => {\n    const iconData = useIconData(file);\n    const { thumbnailUrl, thumbnailLoading } = useThumbnailUrl(file);\n\n    return useMemo<FileEntryState>(() => {\n        const fileColor = thumbnailUrl ? ColorsDark[iconData.colorCode] : ColorsLight[iconData.colorCode];\n        const iconSpin = thumbnailLoading || !file;\n        const icon = thumbnailLoading ? ChonkyIconName.loading : iconData.icon;\n\n        return {\n            childrenCount: FileHelper.getChildrenCount(file),\n            icon: file && file.icon !== undefined ? file.icon : icon,\n            iconSpin: iconSpin,\n            thumbnailUrl: thumbnailUrl,\n            color: file && file.color !== undefined ? file.color : fileColor,\n            selected: selected,\n            focused: !!focused,\n        };\n    }, [file, focused, iconData, selected, thumbnailLoading, thumbnailUrl]);\n};\n\nexport const useDndIcon = (dndState: DndEntryState) => {\n    let dndIconName: Nullable<ChonkyIconName> = null;\n    if (dndState.dndIsOver) {\n        const showDropIcon = dndState.dndCanDrop;\n        dndIconName = showDropIcon ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop;\n    } else if (dndState.dndIsDragging) {\n        dndIconName = ChonkyIconName.dndDragging;\n    }\n\n    return dndIconName;\n};\n\nexport const useModifierIconComponents = (file: Nullable<FileData>) => {\n    const modifierIcons: ChonkyIconName[] = useMemo(() => {\n        const modifierIcons: ChonkyIconName[] = [];\n        if (FileHelper.isHidden(file)) modifierIcons.push(ChonkyIconName.hidden);\n        if (FileHelper.isSymlink(file)) modifierIcons.push(ChonkyIconName.symlink);\n        if (FileHelper.isEncrypted(file)) modifierIcons.push(ChonkyIconName.lock);\n        return modifierIcons;\n    }, [file]);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const modifierIconComponents = useMemo(\n        () => modifierIcons.map((icon, index) => <ChonkyIcon key={`file-modifier-${index}`} icon={icon} />),\n        // For some reason ESLint marks `ChonkyIcon` as an unnecessary dependency,\n        // but we expect it can change at runtime so we disable the check.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [ChonkyIcon, modifierIcons]\n    );\n    return modifierIconComponents;\n};\n\nconst _extname = (fileName: string) => {\n    const parts = fileName.split('.');\n    if (parts.length) {\n        return `.${parts[parts.length - 1]}`;\n    }\n    return '';\n};\n\nexport const useFileNameComponent = (file: Nullable<FileData>) => {\n    return useMemo(() => {\n        if (!file) return <TextPlaceholder minLength={15} maxLength={20} />;\n\n        let name;\n        let extension = null;\n\n        const isDir = FileHelper.isDirectory(file);\n        if (isDir) {\n            name = file.name;\n        } else {\n            extension = file.ext ?? _extname(file.name);\n            name = file.name.substr(0, file.name.length - extension.length);\n        }\n\n        return (\n            <>\n                {name}\n                {extension && <span className=\"chonky-file-entry-description-title-extension\">{extension}</span>}\n            </>\n        );\n    }, [file]);\n};\n\nexport const useThumbnailUrl = (file: Nullable<FileData>) => {\n    const thumbnailGenerator = useSelector(selectThumbnailGenerator);\n    const [thumbnailUrl, setThumbnailUrl] = useState<Nullable<string>>(null);\n    const [thumbnailLoading, setThumbnailLoading] = useState<boolean>(false);\n    const loadingAttempts = useRef(0);\n\n    useEffect(() => {\n        let loadingCancelled = false;\n\n        if (file) {\n            if (thumbnailGenerator) {\n                if (loadingAttempts.current === 0) {\n                    setThumbnailLoading(true);\n                }\n                loadingAttempts.current++;\n                Promise.resolve()\n                    .then(() => thumbnailGenerator(file))\n                    .then((thumbnailUrl: any) => {\n                        if (loadingCancelled) return;\n                        setThumbnailLoading(false);\n\n                        if (thumbnailUrl && typeof thumbnailUrl === 'string') {\n                            setThumbnailUrl(thumbnailUrl);\n                        }\n                    })\n                    .catch(error => {\n                        if (!loadingCancelled) setThumbnailLoading(false);\n                        Logger.error(`User-defined \"thumbnailGenerator\" handler threw an error: ${error.message}`);\n                    });\n            } else if (file.thumbnailUrl) {\n                setThumbnailUrl(file.thumbnailUrl);\n            }\n        }\n\n        return () => {\n            loadingCancelled = true;\n        };\n    }, [file, setThumbnailUrl, setThumbnailLoading, thumbnailGenerator]);\n\n    return { thumbnailUrl, thumbnailLoading };\n};\n\nexport const useFileClickHandlers = (file: Nullable<FileData>, displayIndex: number) => {\n    const dispatch = useDispatch();\n\n    // Prepare base handlers\n    const onMouseClick = useCallback(\n        (event: MouseClickEvent, clickType: 'single' | 'double') => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.MouseClickFile, {\n                    clickType,\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n    const onKeyboardClick = useCallback(\n        (event: KeyboardClickEvent) => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.KeyboardClickFile, {\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    enterKey: event.enterKey,\n                    spaceKey: event.spaceKey,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n\n    // Prepare single/double click handlers\n    const onSingleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'single'), [onMouseClick]);\n    const onDoubleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'double'), [onMouseClick]);\n\n    return {\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n    };\n};\n","import { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectFileActionData,\n    selectFileViewConfig,\n    selectOptionValue,\n    selectParentFolder,\n    selectSelectedFilesForActionCount,\n    selectSortActionId,\n    selectSortOrder,\n} from '../redux/selectors';\nimport { useParamSelector } from '../redux/store';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { CustomVisibilityState } from '../types/action.types';\nimport { SortOrder } from '../types/sort.types';\nimport { FileHelper } from './file-helper';\n\nexport const useFileActionTrigger = (fileActionId: string) => {\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n    return useCallback(() => dispatch(thunkRequestFileAction(fileAction, undefined)), [\n        dispatch,\n        fileAction,\n    ]);\n};\n\nexport const useFileActionProps = (\n    fileActionId: string\n): { icon: Nullable<ChonkyIconName | string>; active: boolean; disabled: boolean } => {\n    const parentFolder = useSelector(selectParentFolder);\n    const fileViewConfig = useSelector(selectFileViewConfig);\n\n    const sortActionId = useSelector(selectSortActionId);\n    const sortOrder = useSelector(selectSortOrder);\n\n    const action = useParamSelector(selectFileActionData, fileActionId);\n    // @ts-ignore\n    const optionValue = useParamSelector(selectOptionValue, action?.option?.id);\n\n    const actionSelectionSize = useParamSelector(\n        selectSelectedFilesForActionCount,\n        fileActionId\n    );\n\n    const actionSelectionEmpty = actionSelectionSize === 0;\n\n    return useMemo(() => {\n        if (!action) return { icon: null, active: false, disabled: true };\n\n        let icon = action.button?.icon ?? null;\n        if (action.sortKeySelector) {\n            if (sortActionId === action.id) {\n                if (sortOrder === SortOrder.ASC) {\n                    icon = ChonkyIconName.sortAsc;\n                } else {\n                    icon = ChonkyIconName.sortDesc;\n                }\n            } else {\n                icon = ChonkyIconName.placeholder;\n            }\n        } else if (action.option) {\n            if (optionValue) {\n                icon = ChonkyIconName.toggleOn;\n            } else {\n                icon = ChonkyIconName.toggleOff;\n            }\n        }\n\n        const isSortButtonAndCurrentSort = action.id === sortActionId;\n        const isFileViewButtonAndCurrentView = action.fileViewConfig === fileViewConfig;\n        const isOptionAndEnabled = action.option ? !!optionValue : false;\n\n        let customDisabled = false;\n        let customActive = false;\n        if (action.customVisibility !== undefined) {\n            customDisabled = action.customVisibility() === CustomVisibilityState.Disabled;\n            customActive = action.customVisibility() === CustomVisibilityState.Active;\n        }\n        const active =\n            isSortButtonAndCurrentSort ||\n            isFileViewButtonAndCurrentView ||\n            isOptionAndEnabled ||\n            customActive;\n        \n        let disabled: boolean = (!!action.requiresSelection && actionSelectionEmpty) || customDisabled;\n\n        if (action.id === ChonkyActions.OpenParentFolder.id) {\n            // We treat `open_parent_folder` file action as a special case as it\n            // requires the parent folder to be present to work...\n            disabled = disabled || !FileHelper.isOpenable(parentFolder);\n        }\n\n        return { icon, active, disabled };\n    }, [\n        parentFolder,\n        fileViewConfig,\n        sortActionId,\n        sortOrder,\n        action,\n        optionValue,\n        actionSelectionEmpty,\n    ]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Button from '@material-ui/core/Button';\nimport React, { useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarButtonProps {\n    className?: string;\n    text: string;\n    tooltip?: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    iconOnly?: boolean;\n    onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n    disabled?: boolean;\n    dropdown?: boolean;\n}\n\nexport const ToolbarButton: React.FC<ToolbarButtonProps> = React.memo(props => {\n    const {\n        className: externalClassName,\n        text,\n        tooltip,\n        active,\n        icon,\n        iconOnly,\n        onClick,\n        disabled,\n        dropdown,\n    } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const iconComponent =\n        icon || iconOnly ? (\n            <div className={iconOnly ? '' : classes.iconWithText}>\n                <ChonkyIcon\n                    icon={icon ? icon : ChonkyIconName.fallbackIcon}\n                    fixedWidth={true}\n                />\n            </div>\n        ) : null;\n\n    const className = c({\n        [externalClassName ?? '']: true,\n        [classes.baseButton]: true,\n        [classes.iconOnlyButton]: iconOnly,\n        [classes.activeButton]: !!active,\n    });\n    return (\n        <Button\n            className={className}\n            onClick={onClick}\n            title={tooltip ? tooltip : text}\n            disabled={disabled || !onClick}\n        >\n            {iconComponent}\n            {text && !iconOnly && <span>{text}</span>}\n            {dropdown && (\n                <div className={classes.iconDropdown}>\n                    <ChonkyIcon\n                        icon={icon ? icon : ChonkyIconName.dropdown}\n                        fixedWidth={true}\n                    />\n                </div>\n            )}\n        </Button>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        textTransform: important('none'),\n        letterSpacing: important(0),\n        minWidth: important('auto'),\n        lineHeight: theme.toolbar.lineHeight,\n        height: theme.toolbar.size,\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    iconWithText: {\n        marginRight: 8,\n    },\n    iconOnlyButton: {\n        width: theme.toolbar.size,\n        textAlign: 'center',\n    },\n    iconDropdown: {\n        fontSize: '0.7em',\n        marginLeft: 2,\n        marginTop: 1,\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarButtonProps {\n    fileActionId: string;\n}\n\nexport const SmartToolbarButton: React.FC<SmartToolbarButtonProps> = React.memo(\n    props => {\n        const { fileActionId } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName, buttonTooltip } = useLocalizedFileActionStrings(action);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarButton\n                text={buttonName}\n                tooltip={buttonTooltip}\n                icon={icon}\n                iconOnly={button.iconOnly}\n                active={active}\n                onClick={triggerAction}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDndHoverOpen, useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from '../file-list/FileEntry-hooks';\nimport { FolderChainItem } from './FileNavbar-hooks';\nimport { ToolbarButton } from './ToolbarButton';\n\nexport interface FolderChainButtonProps {\n    first: boolean;\n    current: boolean;\n    item: FolderChainItem;\n}\n\nexport const FolderChainButton: React.FC<FolderChainButtonProps> = React.memo(\n    ({ first, current, item }) => {\n        const { file, disabled, onClick } = item;\n        const { dndIsOver, dndCanDrop, drop } = useFileDrop({\n            file,\n            forceDisableDrop: !file || current,\n        });\n        const dndState = useMemo<DndEntryState>(\n            () => ({\n                dndIsOver,\n                dndCanDrop,\n                dndIsDragging: false,\n            }),\n            [dndCanDrop, dndIsOver]\n        );\n        useDndHoverOpen(file, dndState);\n        const dndIconName = useDndIcon(dndState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const classes = useStyles(dndState);\n        const className = c({\n            [classes.baseBreadcrumb]: true,\n            [classes.disabledBreadcrumb]: disabled,\n            [classes.currentBreadcrumb]: current,\n        });\n        const text = file ? file.name : 'Loading...';\n        const icon =\n            first && file?.folderChainIcon === undefined\n                ? ChonkyIconName.folder\n                : file?.folderChainIcon;\n\n        return (\n            <div className={classes.buttonContainer} ref={file ? drop : null}>\n                {file && dndIconName && (\n                    <div className={classes.dndIndicator}>\n                        <ChonkyIcon icon={dndIconName} fixedWidth={true} />\n                    </div>\n                )}\n                <ToolbarButton\n                    icon={icon}\n                    className={className}\n                    text={text}\n                    disabled={disabled}\n                    onClick={onClick}\n                />\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    buttonContainer: {\n        position: 'relative',\n    },\n    baseBreadcrumb: {\n        color: (dndState: DndEntryState) => {\n            let color = theme.palette.text.primary;\n            if (dndState.dndIsOver) {\n                color = dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor;\n            }\n            return important(color);\n        },\n    },\n    disabledBreadcrumb: {\n        // Constant function here is on purpose. Without the function, the color here\n        // does not override the `baseBreadcrumb` color from above.\n        color: () => important(theme.palette.text.disabled),\n    },\n    currentBreadcrumb: {\n        textDecoration: important('underline'),\n    },\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor,\n        backgroundColor: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask,\n        lineHeight: `calc(${theme.toolbar.lineHeight} - 6px)`,\n        transform: 'translateX(-50%) translateY(-50%)',\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 6,\n        width: theme.toolbar.size - 6,\n        boxSizing: 'border-box',\n        position: 'absolute',\n        textAlign: 'center',\n        left: '50%',\n        top: '50%',\n        zIndex: 5,\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useFolderChainItems } from './FileNavbar-hooks';\nimport { FolderChainButton } from './FolderChainButton';\nimport { SmartToolbarButton } from './ToolbarButton';\n\nexport interface FileNavbarProps {}\n\nexport const FileNavbar: React.FC<FileNavbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const folderChainItems = useFolderChainItems();\n\n    const folderChainComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < folderChainItems.length; ++i) {\n            const key = `folder-chain-${i}`;\n            const component = (\n                <FolderChainButton\n                    key={key}\n                    first={i === 0}\n                    current={i === folderChainItems.length - 1}\n                    item={folderChainItems[i]}\n                />\n            );\n            components.push(component);\n        }\n        return components;\n    }, [folderChainItems]);\n\n    return (\n        <Box className={classes.navbarWrapper}>\n            <Box className={classes.navbarContainer}>\n                <SmartToolbarButton fileActionId={ChonkyActions.OpenParentFolder.id} />\n                <Breadcrumbs\n                    className={classes.navbarBreadcrumbs}\n                    classes={{ separator: classes.separator }}\n                >\n                    {folderChainComponents}\n                </Breadcrumbs>\n            </Box>\n        </Box>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    navbarWrapper: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n    },\n    navbarContainer: {\n        display: 'flex',\n    },\n    upDirectoryButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        height: theme.toolbar.size,\n        width: theme.toolbar.size,\n        padding: '0px !important',\n    },\n    navbarBreadcrumbs: {\n        fontSize: important(theme.toolbar.fontSize),\n        flexGrow: 100,\n    },\n    separator: {\n        marginRight: important(4),\n        marginLeft: important(4),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport React, { useCallback, useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarDropdownButtonProps {\n    text: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    onClick?: () => void;\n    disabled?: boolean;\n}\n\nexport const ToolbarDropdownButton = React.forwardRef(\n    (props: ToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { text, active, icon, onClick, disabled } = props;\n        const classes = useStyles();\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const className = c({\n            [classes.baseButton]: true,\n            [classes.activeButton]: active,\n        });\n        return (\n            <MenuItem\n                ref={ref}\n                className={className}\n                onClick={onClick}\n                disabled={disabled}\n            >\n                {icon && (\n                    <ListItemIcon className={classes.icon}>\n                        <ChonkyIcon icon={icon} fixedWidth={true} />\n                    </ListItemIcon>\n                )}\n                <ListItemText primaryTypographyProps={{ className: classes.text }}>\n                    {text}\n                </ListItemText>\n            </MenuItem>\n        );\n    }\n);\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        height: important(theme.toolbar.size),\n        minHeight: important('auto'),\n        minWidth: important('auto'),\n        padding: important(20),\n    },\n    icon: {\n        fontSize: important(theme.toolbar.fontSize),\n        minWidth: important('auto'),\n        color: important('inherit'),\n        marginRight: 8,\n    },\n    text: {\n        fontSize: important(theme.toolbar.fontSize),\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarDropdownButtonProps {\n    fileActionId: string;\n    onClickFollowUp?: () => void;\n}\n\nexport const SmartToolbarDropdownButton = React.forwardRef(\n    (props: SmartToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { fileActionId, onClickFollowUp } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName } = useLocalizedFileActionStrings(action);\n\n        // Combine external click handler with internal one\n        const handleClick = useCallback(() => {\n            triggerAction();\n            if (onClickFollowUp) onClickFollowUp();\n        }, [onClickFollowUp, triggerAction]);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarDropdownButton\n                ref={ref}\n                text={buttonName}\n                icon={icon}\n                onClick={handleClick}\n                active={active}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Menu from '@material-ui/core/Menu';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { FileActionGroup } from '../../types/action-menus.types';\nimport { useLocalizedFileActionGroup } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { ToolbarButton } from './ToolbarButton';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport type ToolbarDropdownProps = FileActionGroup;\n\nexport const ToolbarDropdown: React.FC<ToolbarDropdownProps> = React.memo(props => {\n    const { name, fileActionIds } = props;\n    const [anchor, setAnchor] = React.useState<null | HTMLElement>(null);\n\n    const handleClick = useCallback(\n        (event: React.MouseEvent<HTMLButtonElement>) => setAnchor(event.currentTarget),\n        [setAnchor]\n    );\n    const handleClose = useCallback(() => setAnchor(null), [setAnchor]);\n\n    const menuItemComponents = useMemo(\n        () =>\n            fileActionIds.map(id => (\n                <SmartToolbarDropdownButton\n                    key={`menu-item-${id}`}\n                    fileActionId={id}\n                    onClickFollowUp={handleClose}\n                />\n            )),\n        [fileActionIds, handleClose]\n    );\n\n    const localizedName = useLocalizedFileActionGroup(name);\n    const classes = useStyles();\n    return (\n        <>\n            <ToolbarButton text={localizedName} onClick={handleClick} dropdown={true} />\n            <Menu\n                autoFocus\n                keepMounted\n                elevation={2}\n                anchorEl={anchor}\n                onClose={handleClose}\n                open={Boolean(anchor)}\n                transitionDuration={150}\n                classes={{ list: classes.dropdownList }}\n            >\n                {menuItemComponents}\n            </Menu>\n        </>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    dropdownList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport Typography from '@material-ui/core/Typography';\n\nimport { selectHiddenFileCount, selectors, selectSelectionSize } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarInfoProps {}\n\nexport const ToolbarInfo: React.FC<ToolbarInfoProps> = React.memo(() => {\n    const classes = useStyles();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const selectionSize = useSelector(selectSelectionSize);\n    const hiddenCount = useSelector(selectHiddenFileCount);\n\n    const intl = useIntl();\n    const fileCountString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'visibleFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {# items}\n                one {# item}\n                other {# items}\n            }`,\n        },\n        { fileCount: displayFileIds.length }\n    );\n    const selectedString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'selectedFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# selected}\n            }`,\n        },\n        { fileCount: selectionSize }\n    );\n    const hiddenString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'hiddenFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# hidden}\n            }`,\n        },\n        { fileCount: hiddenCount }\n    );\n\n    return (\n        <div className={classes.infoContainer}>\n            <Typography className={classes.infoText} variant=\"body1\">\n                {fileCountString}\n                {(selectedString || hiddenString) && (\n                    <span className={classes.extraInfoSpan}>\n                        (\n                        <span className={classes.selectionSizeText}>\n                            {selectedString}\n                        </span>\n                        {selectedString && hiddenString && ', '}\n                        <span className={classes.hiddenCountText}>{hiddenString}</span>)\n                    </span>\n                )}\n            </Typography>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    infoContainer: {\n        height: theme.toolbar.size,\n        display: 'flex',\n    },\n    infoText: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        fontSize: important(theme.toolbar.fontSize),\n        marginLeft: important(12),\n        height: theme.toolbar.size,\n    },\n    extraInfoSpan: {\n        marginRight: important(8),\n        marginLeft: important(8),\n        opacity: 0.8,\n    },\n    selectionSizeText: {\n        color: theme.colors.textActive,\n    },\n    hiddenCountText: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectSearchString } from '../../redux/selectors';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDebounce } from '../../util/hooks-helpers';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarSearchProps {}\n\nexport const ToolbarSearch: React.FC<ToolbarSearchProps> = React.memo(() => {\n    const intl = useIntl();\n    const searchPlaceholderString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.Toolbar, 'searchPlaceholder'),\n        defaultMessage: 'Search',\n    });\n\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const searchInputRef = useRef<HTMLInputElement>();\n\n    const dispatch = useDispatch();\n    const reduxSearchString = useSelector(selectSearchString);\n\n    const [localSearchString, setLocalSearchString] = useState(reduxSearchString);\n    const [debouncedLocalSearchString] = useDebounce(localSearchString, 300);\n    const [showLoadingIndicator, setShowLoadingIndicator] = useState(false);\n\n    useEffect(() => {\n        dispatch(\n            reduxActions.setFocusSearchInput(() => {\n                if (searchInputRef.current) searchInputRef.current.focus();\n            })\n        );\n        return () => {\n            dispatch(reduxActions.setFocusSearchInput(null));\n        };\n    }, [dispatch]);\n\n    useEffect(() => {\n        setShowLoadingIndicator(false);\n        dispatch(reduxActions.setSearchString(debouncedLocalSearchString));\n    }, [debouncedLocalSearchString, dispatch]);\n\n    const handleChange = useCallback((event: React.FormEvent<HTMLInputElement>) => {\n        setShowLoadingIndicator(true);\n        setLocalSearchString(event.currentTarget.value);\n    }, []);\n    const handleKeyUp = useCallback(\n        (event: React.KeyboardEvent<HTMLInputElement>) => {\n            // Remove focus from the search input field when user presses escape.\n            // Note: We use KeyUp instead of KeyPress because some browser plugins can\n            //       intercept KeyPress events with Escape key.\n            //       @see https://stackoverflow.com/a/37461974\n            if (event.key === 'Escape') {\n                setLocalSearchString('');\n                dispatch(reduxActions.setSearchString(''));\n                if (searchInputRef.current) searchInputRef.current.blur();\n            }\n        },\n        [dispatch]\n    );\n\n    return (\n        <TextField\n            className={classes.searchFieldContainer}\n            size=\"small\"\n            variant=\"outlined\"\n            value={localSearchString}\n            placeholder={searchPlaceholderString}\n            onChange={handleChange as any}\n            inputRef={searchInputRef}\n            InputProps={{\n                onKeyUp: handleKeyUp,\n                startAdornment: (\n                    <InputAdornment className={classes.searchIcon} position=\"start\">\n                        <ChonkyIcon\n                            icon={showLoadingIndicator ? ChonkyIconName.loading : ChonkyIconName.search}\n                            spin={showLoadingIndicator}\n                        />\n                    </InputAdornment>\n                ),\n                className: classes.searchFieldInput,\n            }}\n            inputProps={{ className: classes.searchFieldInputInner }}\n        />\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    searchFieldContainer: {\n        height: theme.toolbar.size,\n        width: 150,\n    },\n    searchIcon: {\n        fontSize: '0.9em',\n        opacity: 0.75,\n    },\n    searchFieldInput: {\n        lineHeight: important(0),\n        padding: important(0),\n        margin: important(0),\n        fontSize: important(theme.toolbar.fontSize),\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 4,\n        paddingLeft: important(8),\n        marginTop: 2,\n    },\n    searchFieldInputInner: {\n        lineHeight: important(`${theme.toolbar.size - 4}px`),\n        fontSize: important(theme.toolbar.fontSize),\n        height: important(theme.toolbar.size - 4),\n        padding: important([0, 8, 0, 0]),\n        margin: important(0),\n        '-webkit-appearance': 'none',\n    },\n}));\n","import React, { ReactElement, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectToolbarItems } from '../../redux/selectors';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { SmartToolbarButton } from './ToolbarButton';\nimport { ToolbarDropdown } from './ToolbarDropdown';\nimport { ToolbarInfo } from './ToolbarInfo';\nimport { ToolbarSearch } from './ToolbarSearch';\n\nexport interface FileToolbarProps {}\n\nexport const FileToolbar: React.FC<FileToolbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const toolbarItems = useSelector(selectToolbarItems);\n\n    const toolbarItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < toolbarItems.length; ++i) {\n            const item = toolbarItems[i];\n\n            const key = `toolbar-item-${typeof item === 'string' ? item : item.name}`;\n            const component =\n                typeof item === 'string' ? (\n                    <SmartToolbarButton key={key} fileActionId={item} />\n                ) : (\n                    <ToolbarDropdown\n                        key={key}\n                        name={item.name}\n                        fileActionIds={item.fileActionIds}\n                    />\n                );\n            components.push(component);\n        }\n        return components;\n    }, [toolbarItems]);\n\n    return (\n        <div className={classes.toolbarWrapper}>\n            <div className={classes.toolbarContainer}>\n                <div className={classes.toolbarLeft}>\n                    <ToolbarSearch />\n                    <ToolbarInfo />\n                </div>\n                <div className={classes.toolbarRight}>{toolbarItemComponents}</div>\n            </div>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    toolbarWrapper: {},\n    toolbarContainer: {\n        flexWrap: 'wrap-reverse',\n        display: 'flex',\n    },\n    toolbarLeft: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        flexGrow: 10000,\n        display: 'flex',\n    },\n    toolbarLeftFiller: {\n        flexGrow: 10000,\n    },\n    toolbarRight: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        display: 'flex',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useContext } from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileListEmptyProps {\n    width: number;\n    height: number;\n}\n\nexport const FileListEmpty: React.FC<FileListEmptyProps> = props => {\n    const { width, height } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const style: CSSProperties = {\n        width,\n        height,\n    };\n\n    const intl = useIntl();\n    const emptyString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.FileList, 'nothingToShow'),\n        defaultMessage: 'Nothing to show',\n    });\n\n    return (\n        <div className={classes.fileListEmpty} style={style}>\n            <div className={classes.fileListEmptyContent}>\n                <ChonkyIcon icon={ChonkyIconName.folderOpen} />\n                &nbsp; {emptyString}\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileListEmpty: {\n        color: theme.palette.text.disabled,\n        position: 'relative',\n        textAlign: 'center',\n        fontSize: '1.2em',\n    },\n    fileListEmptyContent: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        left: '50%',\n        top: '50%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback } from 'react';\nimport { AnyObjectWithStringKeys } from 'tsdef';\n\nimport { useClickHandler, useKeyDownHandler } from './ClickableWrapper-hooks';\n\nexport interface MouseClickEvent {\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type MouseClickEventHandler = (event: MouseClickEvent) => void;\n\nexport interface KeyboardClickEvent {\n    enterKey: boolean;\n    spaceKey: boolean;\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type KeyboardClickEventHandler = (event: KeyboardClickEvent) => void;\n\nexport interface ClickableWrapperProps {\n    wrapperTag: any;\n    passthroughProps?: any;\n\n    onSingleClick?: MouseClickEventHandler;\n    onDoubleClick?: MouseClickEventHandler;\n    onKeyboardClick?: KeyboardClickEventHandler;\n    setFocused?: (focused: boolean) => void;\n}\n\nexport const ClickableWrapper: React.FC<ClickableWrapperProps> = props => {\n    const {\n        children,\n        wrapperTag: WrapperTag,\n        passthroughProps,\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n        setFocused,\n    } = props;\n\n    const handleClick = useClickHandler(onSingleClick, onDoubleClick);\n    const handleKeyDown = useKeyDownHandler(onKeyboardClick);\n\n    const compProps: AnyObjectWithStringKeys = {\n        onFocus: useCallback(() => setFocused && setFocused(true), [setFocused]),\n        onBlur: useCallback(() => setFocused && setFocused(false), [setFocused]),\n    };\n\n    if (onSingleClick || onDoubleClick || onKeyboardClick) {\n        compProps.onClick = handleClick;\n        compProps.onKeyDown = handleKeyDown;\n        compProps.tabIndex = 0;\n    }\n\n    const mergedProps = { ...compProps, ...passthroughProps };\n    return <WrapperTag {...mergedProps}>{children}</WrapperTag>;\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { selectDoubleClickDelay } from '../../redux/selectors';\nimport {\n    KeyboardClickEvent,\n    KeyboardClickEventHandler,\n    MouseClickEvent,\n    MouseClickEventHandler,\n} from './ClickableWrapper';\n\nexport const useClickHandler = (\n    onSingleClick: Nilable<MouseClickEventHandler>,\n    onDoubleClick: Nilable<MouseClickEventHandler>\n) => {\n    const doubleClickDelay = useSelector(selectDoubleClickDelay);\n\n    const counter = useRef({\n        clickCount: 0,\n        clickTimeout: null as Nullable<number>,\n    });\n\n    return useCallback(\n        (event: React.MouseEvent) => {\n            const mouseClickEvent: MouseClickEvent = {\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey || event.metaKey,\n                shiftKey: event.shiftKey,\n\n            };\n\n            counter.current.clickCount++;\n            if (counter.current.clickCount === 1) {\n                if (onSingleClick) {\n                    event.preventDefault();\n                    onSingleClick(mouseClickEvent);\n                }\n                counter.current.clickCount = 1;\n                // @ts-ignore\n                counter.current.clickTimeout = setTimeout(\n                    () => (counter.current.clickCount = 0),\n                    doubleClickDelay\n                );\n            } else if (counter.current.clickCount === 2) {\n                if (onDoubleClick) {\n                    event.preventDefault();\n                    onDoubleClick(mouseClickEvent);\n                }\n                if (typeof counter.current.clickTimeout === 'number') {\n                    clearTimeout(counter.current.clickTimeout);\n                    counter.current.clickTimeout = null;\n                    counter.current.clickCount = 0;\n                }\n            }\n        },\n        [doubleClickDelay, onSingleClick, onDoubleClick, counter]\n    );\n};\n\nexport const useKeyDownHandler = (onKeyboardClick?: KeyboardClickEventHandler) => {\n    return useCallback(\n        (event: React.KeyboardEvent) => {\n            if (!onKeyboardClick) return;\n\n            const keyboardClickEvent: KeyboardClickEvent = {\n                enterKey: event.nativeEvent.code === 'Enter',\n                spaceKey: event.nativeEvent.code === 'Space',\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey,\n                shiftKey: event.shiftKey,\n            };\n\n            if (keyboardClickEvent.spaceKey || keyboardClickEvent.enterKey) {\n                event.preventDefault();\n                event.stopPropagation();\n                onKeyboardClick(keyboardClickEvent);\n            }\n        },\n        [onKeyboardClick]\n    );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { FileData } from '../../types/file.types';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileNameComponent, useModifierIconComponents } from './FileEntry-hooks';\n\nexport interface FileEntryNameProps {\n    file: Nullable<FileData>;\n    className?: string;\n}\n\nexport const FileEntryName: React.FC<FileEntryNameProps> = React.memo(({ file, className }) => {\n    const modifierIconComponents = useModifierIconComponents(file);\n    const fileNameComponent = useFileNameComponent(file);\n\n    const classes = useStyles();\n    return (\n        <span className={className} title={file ? file.name : undefined}>\n            {modifierIconComponents.length > 0 && (\n                <span className={classes.modifierIcons}>{modifierIconComponents}</span>\n            )}\n            {fileNameComponent}\n        </span>\n    );\n});\nFileEntryName.displayName = 'FileEntryName';\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    modifierIcons: {\n        color: theme.palette.text.hint,\n        position: 'relative',\n        fontSize: '0.775em',\n        paddingRight: 5,\n    },\n}));\n","import React, { useContext } from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const CompactEntry: React.FC<FileEntryProps> = React.memo(\n    // @ts-ignore\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n\n        const classes = useStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={entryState.icon}\n                        spin={entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div className={classes.listFileEntryDescription}>\n                    <div\n                        className={classes.listFileEntryName}\n                        title={file ? file.name : undefined}\n                    >\n                        <FileEntryName file={file} />\n                    </div>\n                    <div className={classes.listFileEntryProperties}>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileModDateString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={5} maxLength={15} />\n                            )}\n                        </div>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileSizeString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={10} maxLength={20} />\n                            )}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"chonky-file-entry-outline\"></div>\n                <div className=\"chonky-file-entry-selection\"></div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        fontSize: theme.listFileEntry.fontSize,\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntryIcon: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: 'inset rgba(255, 255, 255, 0.5) 0 0 0 999px',\n        borderRadius: theme.listFileEntry.iconBorderRadius,\n        fontSize: theme.listFileEntry.iconFontSize,\n        color: '#fff',\n        padding: 8,\n    },\n    listFileEntryDescription: {\n        flexDirection: 'column',\n        display: 'flex',\n        flexGrow: 1,\n    },\n    listFileEntryName: {\n        padding: [0, 8, 4, 8],\n    },\n    listFileEntryProperties: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        flexDirection: 'row',\n        display: 'flex',\n    },\n    listFileEntryProperty: {\n        padding: [0, 8],\n        opacity: 0.4,\n    },\n}));\n","import React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { useDndHoverOpen, useFileEntryDnD } from '../../util/dnd';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileEntryProps {\n    file: Nullable<FileData>;\n    children: (dndState: DndEntryState) => React.ReactElement;\n}\n\nexport const DnDFileEntry = React.memo(({ file, children }: DnDFileEntryProps) => {\n    const { drop, drag, dndState } = useFileEntryDnD(file);\n\n    useDndHoverOpen(file, dndState);\n    const classes = useStyles();\n    return (\n        <div ref={drop} className={classes.fillParent}>\n            <div\n                ref={FileHelper.isDraggable(file) ? drag : null}\n                className={classes.fillParent}\n            >\n                {children(dndState)}\n            </div>\n        </div>\n    );\n});\n\nexport const useStyles = makeLocalChonkyStyles(() => ({\n    fillParent: {\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport c from 'classnames';\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileThumbnailProps {\n    className: string;\n    thumbnailUrl: Nullable<string>;\n}\n\nexport const FileThumbnail: React.FC<FileThumbnailProps> = React.memo(props => {\n    const { className, thumbnailUrl } = props;\n\n    const thumbnailStyle: React.CSSProperties = thumbnailUrl ? { backgroundImage: `url('${thumbnailUrl}')` } : {};\n\n    const classes = useStyles();\n    return <div className={c([className, classes.fileThumbnail])} style={thumbnailStyle} />;\n});\nFileThumbnail.displayName = 'FileThumbnail';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileThumbnail: {\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n        backgroundSize: 'contain',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from './FileEntry-hooks';\n\nexport interface DnDIndicatorProps {\n    className: string;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryDndIndicator: React.FC<DnDIndicatorProps> = React.memo(props => {\n    const { className: externalClassName, dndState } = props;\n    const dndIconName = useDndIcon(dndState);\n    const classes = useStyles(dndState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    if (!dndIconName) return null;\n    const className = c({\n        [classes.dndIndicator]: true,\n        [externalClassName]: true,\n    });\n    return (\n        <div className={className}>\n            <ChonkyIcon icon={dndIconName} />\n        </div>\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : '#000',\n        boxSizing: 'border-box',\n        position: 'absolute',\n        fontSize: '1.2em',\n        opacity: 0.6,\n        padding: 6,\n        '&:before': {\n            borderBottom: '50px solid transparent',\n            borderLeft: '50px solid #fff',\n            position: 'absolute',\n            content: '\"\"',\n            zIndex: -1,\n            left: 0,\n            top: 0,\n        },\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useEffect } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { FileThumbnail } from './FileThumbnail';\nimport { GridEntryDndIndicator } from './GridEntryDndIndicator';\n\nexport type FileEntryState = {\n    childrenCount: Nullable<number>;\n    color: string;\n    icon: ChonkyIconName | string;\n    thumbnailUrl: Nullable<string>;\n    iconSpin: boolean;\n    selected: boolean;\n    focused: boolean;\n};\n\nexport interface FileEntryPreviewProps {\n    className?: string;\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryPreviewFolder: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const folderClasses = useFolderStyles(entryState);\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const className = c({\n        [folderClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <div className={folderClasses.folderBackSideMid}>\n                <div className={folderClasses.folderBackSideTop} />\n                <div className={folderClasses.folderFrontSide}>\n                    <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n                    <div className={c([fileClasses.fileIcon, folderClasses.fileIcon])}>{entryState.childrenCount}</div>\n                    <div className={commonClasses.selectionIndicator}></div>\n                    <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n                </div>\n            </div>\n        </div>\n    );\n});\nGridEntryPreviewFolder.displayName = 'GridEntryPreviewFolder';\n\nconst useFolderStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    folderBackSideTop: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopLeftRadius: theme.gridFileEntry.borderRadius,\n        borderTopRightRadius: 10,\n        position: 'absolute',\n        right: '60%',\n        height: 13,\n        top: -10,\n        left: 0,\n        '&:after': {\n            borderRightColor: theme.palette.background.paper,\n            borderTopColor: theme.palette.background.paper,\n            borderBottomColor: 'transparent',\n            borderLeftColor: 'transparent',\n            borderWidth: [0, 15, 10, 0],\n            borderStyle: 'solid',\n            position: 'absolute',\n            display: 'block',\n            content: '\"\"',\n            right: 0,\n            top: 0,\n        },\n    },\n    folderBackSideMid: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopRightRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    folderFrontSide: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            if (state.selected) shadows.push('inset rgba(0, 153, 255, .65) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.folderFrontColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        overflow: 'hidden',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    fileIcon: {\n        fontSize: important(theme.gridFileEntry.childrenCountSize),\n    },\n}));\n\nexport const GridEntryPreviewFile: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const className = c({\n        [fileClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n            <div className={fileClasses.fileIcon}>\n                <ChonkyIcon icon={entryState.icon} spin={entryState.iconSpin} />\n            </div>\n            <div className={commonClasses.selectionIndicator}></div>\n            <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n        </div>\n    );\n});\nGridEntryPreviewFile.displayName = 'GridEntryPreviewFile';\n\nconst useFileStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.selected) shadows.push('inset rgba(0,153,255, .65) 0 0 0 3px');\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.fileColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    dndIndicator: {\n        zIndex: 14,\n    },\n    fileIcon: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        fontSize: theme.gridFileEntry.iconSize,\n        opacity: (state: FileEntryState) => (state.thumbnailUrl && !state.focused ? 0 : 1),\n        color: (state: FileEntryState) =>\n            state.focused ? theme.gridFileEntry.iconColorFocused : theme.gridFileEntry.iconColor,\n        position: 'absolute',\n        left: '50%',\n        zIndex: 12,\n        top: '50%',\n    },\n    thumbnail: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        zIndex: 6,\n        bottom: 5,\n        right: 5,\n        left: 5,\n        top: 5,\n    },\n}));\n\nexport const useCommonEntryStyles = makeLocalChonkyStyles(() => ({\n    selectionIndicator: {\n        display: (state: FileEntryState) => (state.selected ? 'block' : 'none'),\n        background:\n            'repeating-linear-gradient(' +\n            '45deg,' +\n            'rgba(0,153,255,.14),' +\n            'rgba(0,153,255,.14) 10px,' +\n            'rgba(0,153,255,.25) 0,' +\n            'rgba(0,153,255,.25) 20px' +\n            ')',\n        backgroundColor: 'rgba(0, 153, 255, .14)',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 10,\n    },\n    focusIndicator: {\n        display: (state: FileEntryState) => (state.focused ? 'block' : 'none'),\n        boxShadow: 'inset rgba(0, 0, 0, 1) 0 0 0 2px',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 11,\n    },\n}));\n","import React from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, GridEntryPreviewFile, GridEntryPreviewFolder } from './GridEntryPreview';\n\nexport const GridEntry: React.FC<FileEntryProps> = React.memo(({ file, selected, focused, dndState }) => {\n    const isDirectory = FileHelper.isDirectory(file);\n    const entryState = useFileEntryState(file, selected, focused);\n\n    const classes = useFileEntryStyles(entryState);\n    const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n    const entryClassName = c({\n        [classes.gridFileEntry]: true,\n    });\n    return (\n        <div className={entryClassName} {...fileEntryHtmlProps}>\n            {isDirectory ? (\n                <GridEntryPreviewFolder\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            ) : (\n                <GridEntryPreviewFile\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            )}\n            <div className={classes.gridFileEntryNameContainer}>\n                <FileEntryName className={classes.gridFileEntryName} file={file} />\n            </div>\n        </div>\n    );\n});\nGridEntry.displayName = 'GridEntry';\n\nconst useFileEntryStyles = makeLocalChonkyStyles(theme => ({\n    gridFileEntry: {\n        flexDirection: 'column',\n        display: 'flex',\n        height: '100%',\n    },\n    gridFileEntryPreview: {\n        flexGrow: 1,\n    },\n    gridFileEntryNameContainer: {\n        fontSize: theme.gridFileEntry.fontSize,\n        wordBreak: 'break-word',\n        textAlign: 'center',\n        paddingTop: 5,\n    },\n    gridFileEntryName: {\n        backgroundColor: (state: FileEntryState) => (state.selected ? 'rgba(0,153,255, .25)' : 'transparent'),\n        textDecoration: (state: FileEntryState) => (state.focused ? 'underline' : 'none'),\n        borderRadius: 3,\n        padding: [2, 4],\n    },\n}));\n","import React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport {\n    useDndIcon,\n    useFileEntryHtmlProps,\n    useFileEntryState,\n} from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, useCommonEntryStyles } from './GridEntryPreview';\n\ninterface StyleState {\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const ListEntry: React.FC<FileEntryProps> = React.memo(\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n        const dndIconName = useDndIcon(dndState);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n        const styleState = useMemo<StyleState>(\n            () => ({\n                entryState,\n                dndState,\n            }),\n            [dndState, entryState]\n        );\n        const classes = useStyles(styleState);\n        const commonClasses = useCommonEntryStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={commonClasses.focusIndicator}></div>\n                <div\n                    className={c([\n                        commonClasses.selectionIndicator,\n                        classes.listFileEntrySelection,\n                    ])}\n                ></div>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={dndIconName ?? entryState.icon}\n                        spin={dndIconName ? false : entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div\n                    className={classes.listFileEntryName}\n                    title={file ? file.name : undefined}\n                >\n                    <FileEntryName file={file} />\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileModDateString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={5} maxLength={15} />\n                    )}\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileSizeString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={10} maxLength={20} />\n                    )}\n                </div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        boxShadow: `inset ${theme.palette.divider} 0 -1px 0`,\n        fontSize: theme.listFileEntry.fontSize,\n        color: ({ dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : 'inherit',\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntrySelection: {\n        opacity: 0.6,\n    },\n    listFileEntryIcon: {\n        color: ({ entryState, dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : entryState.color,\n        fontSize: theme.listFileEntry.iconFontSize,\n        boxSizing: 'border-box',\n        padding: [2, 4],\n        zIndex: 20,\n    },\n    listFileEntryName: {\n        textOverflow: 'ellipsis',\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '1 1 300px',\n        paddingLeft: 8,\n        zIndex: 20,\n    },\n    listFileEntryProperty: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '0 1 150px',\n        padding: [2, 8],\n        zIndex: 20,\n    },\n}));\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileData, selectIsDnDDisabled, selectIsFileSelected } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { ClickableWrapper, ClickableWrapperProps } from '../internal/ClickableWrapper';\nimport { CompactEntry } from './CompactEntry';\nimport { DnDFileEntry } from './DnDFileEntry';\nimport { useFileClickHandlers } from './FileEntry-hooks';\nimport { GridEntry } from './GridEntry';\nimport { ListEntry } from './ListEntry';\n\nexport interface SmartFileEntryProps {\n    fileId: Nullable<string>;\n    displayIndex: number;\n    fileViewMode: FileViewMode;\n}\n\nconst disabledDndState: DndEntryState = {\n    dndIsDragging: false,\n    dndIsOver: false,\n    dndCanDrop: false,\n};\n\nexport const SmartFileEntry: React.FC<SmartFileEntryProps> = React.memo(({ fileId, displayIndex, fileViewMode }) => {\n    const classes = useStyles();\n\n    // Basic properties\n    const file = useParamSelector(selectFileData, fileId);\n    const selected = useParamSelector(selectIsFileSelected, fileId);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n\n    // Clickable wrapper properties\n    const fileClickHandlers = useFileClickHandlers(file, displayIndex);\n    const [focused, setFocused] = useState(false);\n    const clickableWrapperProps: ClickableWrapperProps = {\n        wrapperTag: 'div',\n        passthroughProps: { className: classes.fileEntryClickableWrapper },\n        ...(FileHelper.isClickable(file) ? fileClickHandlers : undefined),\n        setFocused,\n    };\n\n    // File entry properties\n    const fileEntryProps: Omit<FileEntryProps, 'dndState'> = {\n        file,\n        selected,\n        focused,\n    };\n\n    let EntryComponent: React.FC<FileEntryProps>;\n    if (fileViewMode === FileViewMode.List) EntryComponent = ListEntry;\n    else if (fileViewMode === FileViewMode.Compact) EntryComponent = CompactEntry;\n    else EntryComponent = GridEntry;\n\n    return dndDisabled ? (\n        <ClickableWrapper {...clickableWrapperProps}>\n            <EntryComponent {...fileEntryProps} dndState={disabledDndState} />\n        </ClickableWrapper>\n    ) : (\n        <DnDFileEntry file={file}>\n            {dndState => (\n                <ClickableWrapper {...clickableWrapperProps}>\n                    <EntryComponent {...fileEntryProps} dndState={dndState} />\n                </ClickableWrapper>\n            )}\n        </DnDFileEntry>\n    );\n});\nSmartFileEntry.displayName = 'SmartFileEntry';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileEntryClickableWrapper: {\n        // We disable default browser outline because Chonky provides its own outline\n        // (which doesn't compromise accessibility, hopefully)\n        outline: 'none !important',\n        position: 'relative',\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { VariableSizeGrid } from 'react-window';\n\nimport { ChonkyActions } from '../../action-definitions';\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewConfigGrid } from '../../types/file-view.types';\nimport { RootState } from '../../types/redux.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeGlobalChonkyStyles, useIsMobileBreakpoint } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListGridProps {\n    width: number;\n    height: number;\n}\n\ninterface GridConfig {\n    rowCount: number;\n    columnCount: number;\n    gutter: number;\n    rowHeight: number;\n    columnWidth: number;\n}\n\nexport const isMobileDevice = () => {\n    // noinspection JSDeprecatedSymbols\n    return typeof window.orientation !== 'undefined' || navigator.userAgent.indexOf('IEMobile') !== -1;\n};\n\nexport const getGridConfig = (\n    width: number,\n    fileCount: number,\n    viewConfig: FileViewConfigGrid,\n    isMobileBreakpoint: boolean\n): GridConfig => {\n    const gutter = isMobileBreakpoint ? 5 : 8;\n    const scrollbar = isMobileDevice() ? 0 : 18;\n\n    let columnCount: number;\n    let columnWidth: number;\n    if (isMobileBreakpoint) {\n        columnCount = 2;\n        columnWidth = (width - gutter - scrollbar) / columnCount;\n    } else {\n        columnWidth = viewConfig.entryWidth;\n        columnCount = Math.max(1, Math.floor((width - scrollbar) / (columnWidth + gutter)));\n    }\n\n    const rowCount = Math.ceil(fileCount / columnCount);\n\n    return {\n        rowCount,\n        columnCount,\n        gutter,\n        rowHeight: viewConfig.entryHeight,\n        columnWidth,\n    };\n};\n\nexport const GridContainer: React.FC<FileListGridProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig) as FileViewConfigGrid;\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const fileCount = useMemo(() => displayFileIds.length, [displayFileIds]);\n\n    const gridRef = useRef<VariableSizeGrid>();\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n\n    // Whenever the grid config changes at runtime, we call a method on the\n    // `VariableSizeGrid` handle to reset column width/row height cache.\n    // !!! Note that we deliberately update the `gridRef` firsts and update the React\n    //     state AFTER that. This is needed to avoid file entries jumping up/down.\n    const [gridConfig, setGridConfig] = useState(getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint));\n    const gridConfigRef = useRef(gridConfig);\n    useEffect(() => {\n        const oldConf = gridConfigRef.current;\n        const newConf = getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint);\n\n        gridConfigRef.current = newConf;\n        if (gridRef.current) {\n            if (oldConf.rowCount !== newConf.rowCount) {\n                gridRef.current.resetAfterRowIndex(Math.min(oldConf.rowCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnCount !== newConf.columnCount) {\n                gridRef.current.resetAfterColumnIndex(Math.min(oldConf.columnCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnWidth !== newConf.columnWidth) {\n                gridRef.current.resetAfterIndices({ columnIndex: 0, rowIndex: 0 });\n            }\n        }\n\n        setGridConfig(newConf);\n    }, [setGridConfig, gridConfigRef, isMobileBreakpoint, width, viewConfig, fileCount]);\n\n    const sizers = useMemo(() => {\n        const gc = gridConfigRef;\n        return {\n            getColumnWidth: (index: number) =>\n                gc.current.columnWidth! + (index === gc.current.columnCount - 1 ? 0 : gc.current.gutter),\n            getRowHeight: (index: number) =>\n                gc.current.rowHeight + (index === gc.current.rowCount - 1 ? 0 : gc.current.gutter),\n        };\n    }, [gridConfigRef]);\n\n    const displayFileIdsRef = useInstanceVariable(useSelector(selectors.getDisplayFileIds));\n    const getItemKey = useCallback(\n        (data: { columnIndex: number; rowIndex: number; data: any }) => {\n            const index = data.rowIndex * gridConfigRef.current.columnCount + data.columnIndex;\n\n            return displayFileIdsRef.current[index] ?? `loading-file-${index}`;\n        },\n        [gridConfigRef, displayFileIdsRef]\n    );\n\n    const cellRenderer = useCallback(\n        (data: { rowIndex: number; columnIndex: number; style: CSSProperties }) => {\n            const gc = gridConfigRef;\n            const index = data.rowIndex * gc.current.columnCount + data.columnIndex;\n            const fileId = displayFileIds[index];\n            if (displayFileIds[index] === undefined) return null;\n\n            const styleWithGutter: CSSProperties = {\n                ...data.style,\n                paddingRight: data.columnIndex === gc.current.columnCount - 1 ? 0 : gc.current.gutter,\n                paddingBottom: data.rowIndex === gc.current.rowCount - 1 ? 0 : gc.current.gutter,\n                boxSizing: 'border-box',\n            };\n\n            return (\n                <div style={styleWithGutter}>\n                    <SmartFileEntry fileId={fileId ?? null} displayIndex={index} fileViewMode={viewConfig.mode} />\n                </div>\n            );\n        },\n        [displayFileIds, viewConfig.mode]\n    );\n\n    const classes = useStyles();\n    const gridComponent = useMemo(() => {\n        return (\n            <VariableSizeGrid\n                ref={gridRef as any}\n                className={classes.gridContainer}\n                estimatedRowHeight={gridConfig.rowHeight + gridConfig.gutter}\n                rowHeight={sizers.getRowHeight}\n                estimatedColumnWidth={gridConfig.columnWidth + gridConfig.gutter}\n                columnWidth={sizers.getColumnWidth}\n                columnCount={gridConfig.columnCount}\n                height={height}\n                rowCount={gridConfig.rowCount}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {cellRenderer}\n            </VariableSizeGrid>\n        );\n    }, [\n        classes.gridContainer,\n        gridConfig.rowHeight,\n        gridConfig.gutter,\n        gridConfig.columnWidth,\n        gridConfig.columnCount,\n        gridConfig.rowCount,\n        sizers.getRowHeight,\n        sizers.getColumnWidth,\n        height,\n        width,\n        getItemKey,\n        cellRenderer,\n    ]);\n\n    return gridComponent;\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    gridContainer: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useMemo, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FixedSizeList } from 'react-window';\n\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListListProps {\n    width: number;\n    height: number;\n}\n\nexport const ListContainer: React.FC<FileListListProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const listRef = useRef<FixedSizeList>();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const displayFileIdsRef = useInstanceVariable(displayFileIds);\n    const getItemKey = useCallback(\n        (index: number) => displayFileIdsRef.current[index] ?? `loading-file-${index}`,\n        [displayFileIdsRef]\n    );\n\n    const classes = useStyles();\n    const listComponent = useMemo(() => {\n        // When entry size is null, we use List view\n        const rowRenderer = (data: { index: number; style: CSSProperties }) => {\n            return (\n                <div style={data.style}>\n                    <SmartFileEntry\n                        fileId={displayFileIds[data.index] ?? null}\n                        displayIndex={data.index}\n                        fileViewMode={FileViewMode.List}\n                    />\n                </div>\n            );\n        };\n\n        return (\n            <FixedSizeList\n                ref={listRef as any}\n                className={classes.listContainer}\n                itemSize={viewConfig.entryHeight}\n                height={height}\n                itemCount={displayFileIds.length}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {rowRenderer}\n            </FixedSizeList>\n        );\n    }, [\n        classes.listContainer,\n        viewConfig.entryHeight,\n        height,\n        displayFileIds,\n        width,\n        getItemKey,\n    ]);\n\n    return listComponent;\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listContainer: {\n        borderTop: `solid 1px ${theme.palette.divider}`,\n    },\n}));\n","import React, { UIEvent, useCallback, useContext, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectCurrentFolder, selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    c, getStripeGradient, makeGlobalChonkyStyles, makeLocalChonkyStyles\n} from '../../util/styles';\nimport { FileListEmpty } from './FileListEmpty';\nimport { GridContainer } from './GridContainer';\nimport { ListContainer } from './ListContainer';\n\nexport interface FileListProps {\n    onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n}\n\ninterface StyleState {\n    dndCanDrop: boolean;\n    dndIsOverCurrent: boolean;\n}\n\nexport const FileList: React.FC<FileListProps> = React.memo((props: FileListProps) => {\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const currentFolder = useSelector(selectCurrentFolder);\n    const { drop, dndCanDrop, dndIsOverCurrent } = useFileDrop({ file: currentFolder });\n    const styleState = useMemo<StyleState>(() => ({ dndCanDrop, dndIsOverCurrent }), [dndCanDrop, dndIsOverCurrent]);\n\n    const localClasses = useLocalStyles(styleState);\n    const classes = useStyles(viewConfig);\n    const { onScroll } = props;\n\n    // In Chonky v0.x, this field was user-configurable. In Chonky v1.x+, we hardcode\n    // this to `true` to simplify configuration. Users can just wrap Chonky in their\n    // own `div` if they want to have finer control over the height.\n    const fillParentContainer = true;\n\n    const listRenderer = useCallback(\n        ({ width, height }: { width: number; height: number }) => {\n            if (displayFileIds.length === 0) {\n                return <FileListEmpty width={width} height={viewConfig.entryHeight} />;\n            } else if (viewConfig.mode === FileViewMode.List) {\n                return <ListContainer width={width} height={height} />;\n            } else {\n                return <GridContainer width={width} height={height} />;\n            }\n        },\n        [displayFileIds, viewConfig]\n    );\n\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    return (\n        <div onScroll={onScroll} ref={drop} className={c([classes.fileListWrapper, localClasses.fileListWrapper])} role=\"list\">\n            <div className={localClasses.dndDropZone}>\n                <div className={localClasses.dndDropZoneIcon}>\n                    <ChonkyIcon icon={dndCanDrop ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop} />\n                </div>\n            </div>\n            <AutoSizer disableHeight={!fillParentContainer}>{listRenderer}</AutoSizer>\n        </div>\n    );\n});\nFileList.displayName = 'FileList';\n\nconst useLocalStyles = makeLocalChonkyStyles(theme => ({\n    fileListWrapper: {\n        minHeight: ChonkyActions.EnableGridView.fileViewConfig.entryHeight + 2,\n        background: (state: StyleState) =>\n            state.dndIsOverCurrent && state.dndCanDrop\n                ? state.dndCanDrop\n                    ? getStripeGradient(theme.dnd.fileListCanDropMaskOne, theme.dnd.fileListCanDropMaskTwo)\n                    : getStripeGradient(theme.dnd.fileListCannotDropMaskOne, theme.dnd.fileListCannotDropMaskTwo)\n                : 'none',\n    },\n    dndDropZone: {\n        display: (state: StyleState) =>\n            // When we cannot drop, we don't show an indicator at all\n            state.dndIsOverCurrent && state.dndCanDrop ? 'block' : 'none',\n        borderRadius: theme.gridFileEntry.borderRadius,\n        pointerEvents: 'none',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 2,\n    },\n    dndDropZoneIcon: {\n        backgroundColor: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask),\n        color: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor),\n        borderRadius: theme.gridFileEntry.borderRadius,\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        textAlign: 'center',\n        lineHeight: '60px',\n        fontSize: '2em',\n        left: '50%',\n        height: 60,\n        top: '50%',\n        width: 60,\n    },\n}));\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileListWrapper: {\n        height: '100%',\n        maxHeight: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { ReactElement, useEffect, useMemo } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Menu from '@material-ui/core/Menu';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuConfig, selectContextMenuItems } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuDismisser } from './FileContextMenu-hooks';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport interface FileContextMenuProps {}\n\nexport const FileContextMenu: React.FC<FileContextMenuProps> = React.memo(() => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(reduxActions.setContextMenuMounted(true));\n        return () => {\n            dispatch(reduxActions.setContextMenuMounted(false));\n        };\n    }, [dispatch]);\n\n    const intl = useIntl();\n    const browserMenuShortcutString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.FileContextMenu, 'browserMenuShortcut'),\n            defaultMessage: 'Browser menu: {shortcut}',\n        },\n        { shortcut: <strong>Alt + Right Click</strong> }\n    );\n\n    const contextMenuConfig = useSelector(selectContextMenuConfig);\n    const contextMenuItems = useSelector(selectContextMenuItems);\n\n    const hideContextMenu = useContextMenuDismisser();\n    const contextMenuItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < contextMenuItems.length; ++i) {\n            const item = contextMenuItems[i];\n\n            if (typeof item === 'string') {\n                components.push(\n                    <SmartToolbarDropdownButton\n                        key={`context-menu-item-${item}`}\n                        fileActionId={item}\n                        onClickFollowUp={hideContextMenu}\n                    />\n                );\n            } else {\n                item.fileActionIds.map(id =>\n                    components.push(\n                        <SmartToolbarDropdownButton\n                            key={`context-menu-item-${item.name}-${id}`}\n                            fileActionId={id}\n                            onClickFollowUp={hideContextMenu}\n                        />\n                    )\n                );\n            }\n        }\n        return components;\n    }, [contextMenuItems, hideContextMenu]);\n\n    const anchorPosition = useMemo(\n        () => (contextMenuConfig ? { top: contextMenuConfig.mouseY, left: contextMenuConfig.mouseX } : undefined),\n        [contextMenuConfig]\n    );\n\n    const classes = useStyles();\n    return (\n        <Menu\n            elevation={2}\n            disablePortal\n            onClose={hideContextMenu}\n            transitionDuration={150}\n            open={!!contextMenuConfig}\n            anchorPosition={anchorPosition}\n            anchorReference=\"anchorPosition\"\n            classes={{ list: classes.contextMenuList }}\n        >\n            {contextMenuItemComponents}\n            <ListSubheader component=\"div\" className={classes.browserMenuTooltip}>\n                {browserMenuShortcutString}\n            </ListSubheader>\n        </Menu>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    contextMenuList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    browserMenuTooltip: {\n        lineHeight: important('30px'),\n        fontSize: important('0.7em'),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport { createGenerateClassName, StylesProvider } from '@material-ui/core';\nimport React from 'react';\n\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { FileList } from '../file-list/FileList';\nimport { FileBrowser } from './FileBrowser';\nimport { FileContextMenu } from './FileContextMenu';\nimport { FileNavbar } from './FileNavbar';\nimport { FileToolbar } from './FileToolbar';\n\nconst muiJSSClassNameGenerator = createGenerateClassName({\n    // Seed property is used for prefix jss classes generated by material ui.\n    // Added to prevent style collisions\n    seed: 'chonky-generated',\n  });\n\nexport const FullFileBrowser = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        const { onScroll } = props\n        return (\n            <StylesProvider generateClassName={muiJSSClassNameGenerator}>\n                <FileBrowser ref={ref} {...props}>\n                    <FileNavbar />\n                    <FileToolbar />\n                    <FileList onScroll={onScroll}/>\n                    <FileContextMenu/>\n                </FileBrowser>\n            </StylesProvider>\n        );\n    })\n);\nFullFileBrowser.displayName = 'FullFileBrowser';\n","/**\n *\n */\n\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { FileActionData } from '../types/action-handler.types';\nimport { FileAction } from '../types/action.types';\nimport { FileArray, FileData } from '../types/file.types';\nimport { FileHelper } from '../util/file-helper';\n\nexport interface CustomFileData extends FileData {\n    parentId?: string;\n    childrenIds?: string[];\n}\nexport interface CustomFileMap<FT extends CustomFileData> {\n    [fileId: string]: FT;\n}\nexport interface FileMapParams<FT extends CustomFileData> {\n    baseFileMap: CustomFileMap<FT>;\n    initialFolderId: string;\n}\n\nexport const useFolderChain = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n\n        const folderChain = [currentFolder];\n\n        let parentId = currentFolder.parentId;\n        while (parentId) {\n            const parentFile = fileMap[parentId];\n            if (parentFile) {\n                folderChain.unshift(parentFile);\n                parentId = parentFile.parentId;\n            } else {\n                break;\n            }\n        }\n\n        return folderChain;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFiles = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n        const childrenIds = currentFolder.childrenIds!;\n        const files = childrenIds.map((fileId: string) => fileMap[fileId]);\n        return files;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFileMapMethods = <FT extends CustomFileData>(\n    baseFileMap: CustomFileMap<FT>,\n    initialFolderId: string\n) => {\n    const [fileMap, setFileMap] = useState(baseFileMap);\n    const [currentFolderId, setCurrentFolderId] = useState(initialFolderId);\n    const resetFileMap = useCallback(() => {\n        setFileMap(baseFileMap);\n        setCurrentFolderId(initialFolderId);\n    }, [baseFileMap, initialFolderId]);\n    const moveFiles = useCallback(\n        (files: FT[], source: FT, destination: FT) =>\n            setFileMap(currentFileMap => {\n                const newFileMap = { ...currentFileMap };\n                const moveFileIds = new Set(files.map(f => f.id));\n\n                // Delete files from their source folder.\n                const newSourceChildrenIds = source.childrenIds!.filter(id => !moveFileIds.has(id));\n                newFileMap[source.id] = {\n                    ...source,\n                    childrenIds: newSourceChildrenIds,\n                    childrenCount: newSourceChildrenIds.length,\n                };\n\n                // Add the files to their destination folder.\n                const newDestinationChildrenIds = [...destination.childrenIds!, ...files.map(f => f.id)];\n                newFileMap[destination.id] = {\n                    ...destination,\n                    childrenIds: newDestinationChildrenIds,\n                    childrenCount: newDestinationChildrenIds.length,\n                };\n\n                // Finally, update the parent folder ID on the files from source folder\n                // ID to the destination folder ID.\n                files.forEach(file => {\n                    newFileMap[file.id] = {\n                        ...file,\n                        parentId: destination.id,\n                    };\n                });\n\n                return newFileMap;\n            }),\n        []\n    );\n\n    const methods = useMemo(\n        () => ({\n            setFileMap,\n            setCurrentFolderId,\n            resetFileMap,\n            moveFiles,\n        }),\n        [setFileMap, setCurrentFolderId, resetFileMap, moveFiles]\n    );\n    return {\n        fileMap,\n        currentFolderId,\n        methods,\n    };\n};\nexport type FileMethods = ReturnType<typeof useFileMapMethods>['methods'];\n\nexport const useFileActionHandler = (methods: FileMethods) => {\n    return useCallback(\n        (data: FileActionData<FileAction>) => {\n            if (data.id === ChonkyActions.OpenFiles.id) {\n                const { targetFile, files } = data.payload;\n                const fileToOpen = targetFile ?? files[0];\n                if (fileToOpen && FileHelper.isDirectory(fileToOpen)) {\n                    methods.setCurrentFolderId(fileToOpen.id);\n                }\n            } else if (data.id === ChonkyActions.MoveFiles.id) {\n                methods.moveFiles(data.payload.files, data.payload.source!, data.payload.destination);\n            }\n        },\n        [methods]\n    );\n};\n\nexport const useFileMap = <FT extends CustomFileData = CustomFileData>({\n    baseFileMap,\n    initialFolderId,\n}: FileMapParams<FT>) => {\n    const { fileMap, currentFolderId, methods } = useFileMapMethods(baseFileMap, initialFolderId);\n    const folderChain = useFolderChain(fileMap, currentFolderId);\n    const files = useFiles(fileMap, currentFolderId);\n    const fileActionHandler = useFileActionHandler(methods as FileMethods);\n\n    const data = {\n        fileMap,\n        currentFolderId,\n        folderChain,\n        files,\n    };\n    return { data, methods, fileActionHandler };\n};\n"],"names":["SortOrder","UNINITIALIZED_SENTINEL","useStaticValue","factory","valueRef","useRef","current","useInstanceVariable","value","ref","useEffect","Logger","error","args","console","warn","debug","formatBullets","bullets","join","FileHelper","isDirectory","file","isDir","isHidden","isSymlink","isEncrypted","isClickable","isOpenable","openable","isSelectable","selectable","isDraggable","draggable","isDroppable","droppable","isDndOpenable","dndOpenable","getModDate","modDate","parseDate","maybeDate","Date","message","isNaN","getTime","getChildrenCount","childrenCount","sanitizeInputArray","mode","rawArray","sanitizedFiles","errorMessages","Array","isArray","nonObjectFileCount","missingFieldFileCount","seenIds","Set","duplicateIds","i","length","item","id","name","has","add","push","size","repeatedIdsString","from","arrayString","itemString","errorMessageString","sanitizedArray","OptionIds","ShowHiddenFiles","ShowFoldersFirst","DarkMode","FileViewMode","ChonkyIconName","selectInstanceId","state","instanceId","selectExternalFileActionHandler","externalFileActionHandler","selectFileActionMap","fileActionMap","selectFileActionIds","fileActionIds","selectFileActionData","fileActionId","selectToolbarItems","toolbarItems","selectContextMenuItems","contextMenuItems","selectFolderChain","folderChain","selectCurrentFolder","selectParentFolder","selectFileMap","fileMap","selectCleanFileIds","cleanFileIds","selectFileData","fileId","selectHiddenFileIdMap","hiddenFileIdMap","selectHiddenFileCount","Object","keys","selectFocusSearchInput","focusSearchInput","selectSearchString","searchString","selectSelectionMap","selectionMap","selectSelectedFileIds","selectSelectionSize","selectIsFileSelected","selectSelectedFiles","map","selectSelectedFilesForAction","action","requiresSelection","getSelectedFiles","fileFilter","selectSelectedFilesForActionCount","getSelectedFilesForAction","_getSelectedFilesForA","selectDisableSelection","disableSelection","selectFileViewConfig","fileViewConfig","selectSortActionId","sortActionId","selectSortOrder","sortOrder","selectOptionMap","optionMap","selectOptionValue","optionId","selectThumbnailGenerator","thumbnailGenerator","selectDoubleClickDelay","doubleClickDelay","selectIsDnDDisabled","disableDragAndDrop","selectClearSelectionOnOutsideClick","clearSelectionOnOutsideClick","selectContextMenuMounted","contextMenuMounted","selectContextMenuConfig","contextMenuConfig","selectContextMenuTriggerFile","config","triggerFileId","getFileActionMap","getOptionMap","getFileMap","getFileIds","fileIds","getCleanFileIds","getSortActionId","getSortOrder","getSearchString","_getLastClick","lastClick","makeGetAction","fileActionSelector","createSelector","makeGetOptionValue","defaultValue","undefined","makeGetFiles","fileIdsSelector","getSortedFileIds","files","sortAction","showFolderFirst","prepareSortKeySelector","selector","sortFunctions","desc","sortKeySelector","ASC","sort","by","getSearcher","cleanFiles","FuzzySearch","caseSensitive","getSearchFilteredFileIds","searcher","search","f","getHiddenFileIdMap","searchFilteredFileIds","showHiddenFiles","searchFilteredFileIdsSet","forEach","selectors","getDisplayFileIds","sortedFileIds","filter","getLastClickIndex","displayFileIds","index","getFileData","getIsFileSelected","selectedFiles","filters","filteredSelectedFiles","reduce","prevFiles","thunkUpdateRawFileActions","rawFileActions","disableDefaultFileActions","dispatch","defaultActionsToAdd","disabledActionIds","DefaultFileActions","fileActions","seenActionIds","addToSeen","a","wasNotSeen","fileActionArrays","duplicateFreeArrays","arr","duplicateFreeArray","concat","mergeFileActionsArrays","EssentialFileActions","optionDefaults","option","reduxActions","setRawFileActions","setFileActionsErrorMessages","setFileActions","setOptionDefaults","thunkUpdateToolbarNContextMenuItems","excludedToolbarFileActionIds","ChonkyActions","OpenParentFolder","seenToolbarGroups","seenContextMenuGroups","getGroup","itemArray","seenMap","groupName","group","button","toolbar","contextMenu","updateFileActionMenuItems","thunkUpdateDefaultFileViewActionId","getState","setFileViewConfig","thunkActivateSortAction","order","DESC","setSort","actionId","thunkDispatchFileAction","data","_dispatch","Promise","resolve","thunkRequestFileAction","payload","selectedFilesForAction","actionState","contextMenuTriggerFile","toggleOption","selectionTransform","prevSelection","hiddenFileIds","newSelection","clearSelection","selectFiles","reset","thunkApplySelectionTransform","effect","maybeEffectPromise","reduxDispatch","getReduxState","then","effectResult","triggerDispatchAfterEffect","I18nNamespace","defineFileAction","__payloadType","hotkeys","errorMessage","Error","findElementAmongAncestors","maybeElement","predicate","parentElement","getValueOrFallback","fallback","desiredType","EssentialActions","MouseClickFile","params","clickType","OpenFiles","targetFile","ctrlKey","toggleSelection","exclusive","setLastClickIndex","fileDisplayIndex","shiftKey","lastClickIndex","rangeStart","rangeEnd","fileIdsToSelect","slice","KeyboardClickFile","enterKey","spaceKey","StartDragNDrop","draggedFile","EndDragNDrop","destination","MoveFiles","ChangeSelection","icon","openParentFolder","iconOnly","parentFolder","OpenFileContextMenu","triggerFile","showContextMenu","mouseX","clientX","mouseY","clientY","DefaultActions","OpenSelection","openFiles","SelectAllFiles","selectAllFiles","ClearSelection","EnableListView","List","entryHeight","list","EnableCompactView","Compact","entryWidth","compact","EnableGridView","Grid","smallThumbnail","SortFilesByName","toLowerCase","SortFilesBySize","SortFilesByDate","ToggleHiddenFiles","ToggleShowFoldersFirst","FocusSearchInput","ToggleDarkMode","ExtraActions","CopyFiles","copy","CreateFolder","tooltip","folderCreate","UploadFiles","upload","DownloadFiles","download","DeleteFiles","trash","initialRootState","fileActionsErrorMessages","rawFolderChain","folderChainErrorMessages","rawFiles","filesErrorMessages","searchMode","createSlice","initialState","reducers","setExternalFileActionHandler","setRawFolderChain","setRawFiles","selectedFileId","setSortedFileIds","setHiddenFileIds","setFocusSearchInput","setSearchString","oldValue","setSelectionDisabled","setThumbnailGenerator","setDoubleClickDelay","setDisableDragAndDrop","setClearSelectionOnOutsideClick","setContextMenuMounted","hideContextMenu","actions","rootReducer","reducer","useChonkyStore","chonkyInstanceId","store","preloadedState","configureStore","middleware","getDefaultMiddleware","serializableCheck","devTools","selectionWatcher","watch","unsubscribeCallbacks","subscribe","oldSelection","selectedFilesIds","selection","unsubscribe","useStoreWatchers","useParamSelector","parametrizedSelector","selectorParams","useCallback","useSelector","useDTE","actionCreator","useDispatch","usePropReduxUpdate","ChonkyIconPlaceholder","React","title","defaultConfig","onFileAction","disableDragAndDropProvider","defaultSortActionId","defaultFileViewActionId","iconComponent","darkMode","i18n","getI18nId","namespace","stringId","getActionI18nId","FileActions","useLocalizedFileActionStrings","intl","useIntl","useMemo","buttonName","buttonTooltip","formatMessage","defaultMessage","_action$button","_action$button2","_action$button3","useLocalizedFileEntryStrings","formatters","useContext","ChonkyFormattersContext","fileModDateString","formatFileModDate","fileSizeString","formatFileSize","defaultFormatters","safeModDate","formatDate","dateStyle","timeStyle","_intl","sizeData","filesize","bits","output","symbol","Math","round","createContext","ChonkyIconContext","VideoExtensions","ImageExtensions","AudioExtensions","ColorsLight","ColorsDark","iconTrie","colourIndex","IconsToExtensions","license","model","database","text","archive","image","video","code","info","key","lock","music","terminal","users","linux","ubuntu","windows","rust","python","nodejs","php","git","adobe","pdf","excel","word","flash","exactTrie","ExactTrie","ignoreCase","pair","extensions","put","colorCode","getIconTrie","lightTheme","colors","debugRed","debugBlue","debugGreen","debugPurple","debugYellow","textActive","fontSizes","rootPrimary","margins","rootLayoutMargin","lineHeight","fontSize","buttonRadius","dnd","canDropColor","cannotDropColor","canDropMask","cannotDropMask","fileListCanDropMaskOne","fileListCanDropMaskTwo","fileListCannotDropMaskOne","fileListCannotDropMaskTwo","dragLayer","border","padding","borderRadius","fileList","desktopGridGutter","mobileGridGutter","gridFileEntry","childrenCountSize","iconColorFocused","iconSize","iconColor","fileColorTint","folderBackColorTint","folderFrontColorTint","listFileEntry","propertyFontSize","iconFontSize","iconBorderRadius","darkThemeOverride","mobileThemeOverride","useIsMobileBreakpoint","useMediaQuery","getStripeGradient","colorOne","colorTwo","makeLocalChonkyStyles","styles","createUseStyles","makeGlobalChonkyStyles","makeStyles","selectorMapping","useStyles","theme","localStyles","globalStyles","localSelector","globalSelector","classes","important","c","classnames","ChonkyBusinessLogicInner","memo","forwardRef","props","useStore","useImperativeHandle","getFileSelection","setFileSelection","requestFileAction","useFileBrowserHandle","displayName","ChonkyBusinessLogic","useDndContextAvailable","DndContext","dragDropManager","layerStyles","position","pointerEvents","zIndex","left","top","width","height","getItemStyles","initialCursorOffset","initialFileOffset","currentFileOffset","display","transform","x","y","WebkitTransform","DnDFileListDragLayer","useDragLayer","monitor","getItem","itemType","getItemType","getInitialClientOffset","getInitialSourceClientOffset","getSourceClientOffset","isDragging","selectionSize","style","className","fileDragPreview","boxShadow","palette","divider","backgroundColor","background","color","primary","HotkeyListener","fileAction","hotkeysStr","hotkeyCallback","event","preventDefault","unbind","ChonkyPresentationLayer","children","dndDisabled","handleClickAway","target","element","tagName","hotkeyListenerComponents","dndContextAvailable","contextMenuMountedRef","altKey","fileEntryWrapperDiv","dataset","chonkyFileId","useContextMenuTrigger","ClickAwayListener","onClickAway","Box","chonkyRoot","onContextMenu","paper","touchAction","fontFamily","flexDirection","boxSizing","textAlign","webkitTouchCallout","webkitUserSelect","mozUserSelect","msUserSelect","userSelect","FileBrowser","shortid","generate","isMobileBreakpoint","muiTheme","createMuiTheme","type","combinedTheme","merge","chonkyComps","IntlProvider","locale","defaultLocale","Provider","ReduxProvider","ThemeProvider","MuiThemeProvider","DndProvider","backend","HTML5Backend","CustomVisibilityState","useFileDrop","forceDisableDrop","includeChildrenDrops","folderChainRef","mockHook","useHook","useDrop","useDropIfAvailable","accept","drop","_item","canDrop","dropTarget","isOver","shallow","source","prohibitedFileIds","folder","collect","isOverCurrent","dndIsOver","dndIsOverCurrent","dndCanDrop","useDndHoverOpen","dndState","currentFolderRef","timeout","_currentFolderRef$cur","setTimeout","clearTimeout","TextPlaceholder","min","max","placeholderLength","maxLength","minLength","floor","random","whitespace","repeat","textPlaceholder","dangerouslySetInnerHTML","__html","opacity","animationName","animationIterationCount","animationTimingFunction","animationDuration","whiteSpace","overflow","maxWidth","minWidth","useFileEntryHtmlProps","role","useFileEntryState","selected","focused","iconData","getWithCheckpoints","loading","useIconData","useThumbnailUrl","thumbnailUrl","thumbnailLoading","fileColor","iconSpin","useDndIcon","dndIconName","dndCannotDrop","dndIsDragging","dndDragging","useState","setThumbnailUrl","setThumbnailLoading","loadingAttempts","loadingCancelled","useFileActionTrigger","useFileActionProps","optionValue","_action$option","actionSelectionEmpty","active","disabled","sortAsc","sortDesc","placeholder","toggleOn","toggleOff","isSortButtonAndCurrentSort","isFileViewButtonAndCurrentView","isOptionAndEnabled","customDisabled","customActive","customVisibility","Disabled","Active","ToolbarButton","externalClassName","onClick","dropdown","ChonkyIcon","iconWithText","fallbackIcon","fixedWidth","baseButton","iconOnlyButton","activeButton","Button","iconDropdown","textTransform","letterSpacing","paddingBottom","paddingTop","marginRight","marginLeft","marginTop","SmartToolbarButton","triggerAction","Hidden","FolderChainButton","first","baseBreadcrumb","disabledBreadcrumb","currentBreadcrumb","folderChainIcon","buttonContainer","dndIndicator","textDecoration","FileNavbar","folderChainItems","items","folderChainComponents","components","component","navbarWrapper","navbarContainer","Breadcrumbs","navbarBreadcrumbs","separator","upDirectoryButton","flexGrow","ToolbarDropdownButton","MenuItem","ListItemIcon","ListItemText","primaryTypographyProps","minHeight","SmartToolbarDropdownButton","onClickFollowUp","handleClick","ToolbarDropdown","anchor","setAnchor","currentTarget","handleClose","menuItemComponents","localizedName","FileActionGroups","Menu","autoFocus","keepMounted","elevation","anchorEl","onClose","open","Boolean","transitionDuration","dropdownList","ToolbarInfo","hiddenCount","fileCountString","Toolbar","fileCount","selectedString","hiddenString","infoContainer","Typography","infoText","variant","extraInfoSpan","selectionSizeText","hiddenCountText","ToolbarSearch","searchPlaceholderString","searchInputRef","reduxSearchString","localSearchString","setLocalSearchString","debouncedLocalSearchString","delay","debouncedValue","setDebouncedValue","handler","useDebounce","showLoadingIndicator","setShowLoadingIndicator","focus","handleChange","handleKeyUp","blur","TextField","searchFieldContainer","onChange","inputRef","InputProps","onKeyUp","startAdornment","InputAdornment","searchIcon","spin","searchFieldInput","inputProps","searchFieldInputInner","margin","paddingLeft","FileToolbar","toolbarItemComponents","toolbarWrapper","toolbarContainer","toolbarLeft","toolbarRight","flexWrap","toolbarLeftFiller","FileListEmpty","emptyString","FileList","fileListEmpty","fileListEmptyContent","folderOpen","ClickableWrapper","WrapperTag","wrapperTag","passthroughProps","onSingleClick","onDoubleClick","onKeyboardClick","setFocused","counter","clickCount","clickTimeout","mouseClickEvent","metaKey","useClickHandler","handleKeyDown","keyboardClickEvent","nativeEvent","stopPropagation","useKeyDownHandler","compProps","onFocus","onBlur","onKeyDown","tabIndex","mergedProps","FileEntryName","modifierIconComponents","modifierIcons","hidden","symlink","useModifierIconComponents","fileNameComponent","parts","extension","ext","split","substr","useFileNameComponent","hint","paddingRight","CompactEntry","entryState","fileEntryHtmlProps","listFileEntryIcon","listFileEntryDescription","listFileEntryName","listFileEntryProperties","listFileEntryProperty","alignItems","DnDFileEntry","fileRef","getDndStartPayload","reduxState","sourceInstanceId","canDrag","onDragStart","onDragEnd","dropResult","getDropResult","dropEffect","useDrag","useDragIfAvailable","begin","end","drag","preview","getEmptyImage","captureDraggingState","useFileDrag","useFileEntryDnD","fillParent","FileThumbnail","thumbnailStyle","backgroundImage","fileThumbnail","backgroundRepeat","backgroundPosition","backgroundSize","GridEntryDndIndicator","borderBottom","borderLeft","content","GridEntryPreviewFolder","folderClasses","useFolderStyles","fileClasses","useFileStyles","commonClasses","useCommonEntryStyles","previewFile","folderBackSideMid","folderBackSideTop","folderFrontSide","fileIcon","selectionIndicator","thumbnail","borderTopLeftRadius","borderTopRightRadius","right","borderRightColor","borderTopColor","borderBottomColor","borderLeftColor","borderWidth","borderStyle","bottom","shadows","GridEntryPreviewFile","focusIndicator","GridEntry","useFileEntryStyles","entryClassName","gridFileEntryPreview","gridFileEntryNameContainer","gridFileEntryName","wordBreak","ListEntry","styleState","listFileEntrySelection","textOverflow","flex","disabledDndState","SmartFileEntry","EntryComponent","displayIndex","fileViewMode","fileClickHandlers","onMouseClick","useFileClickHandlers","clickableWrapperProps","fileEntryClickableWrapper","fileEntryProps","outline","getGridConfig","viewConfig","columnCount","columnWidth","gutter","scrollbar","window","orientation","navigator","userAgent","indexOf","rowCount","ceil","rowHeight","GridContainer","gridRef","gridConfig","setGridConfig","gridConfigRef","oldConf","newConf","resetAfterRowIndex","resetAfterColumnIndex","resetAfterIndices","columnIndex","rowIndex","sizers","gc","getColumnWidth","getRowHeight","displayFileIdsRef","getItemKey","cellRenderer","styleWithGutter","VariableSizeGrid","gridContainer","estimatedRowHeight","estimatedColumnWidth","itemKey","ListContainer","listRef","FixedSizeList","listContainer","itemSize","itemCount","borderTop","currentFolder","localClasses","useLocalStyles","onScroll","listRenderer","fileListWrapper","dndDropZone","dndDropZoneIcon","AutoSizer","disableHeight","maxHeight","FileContextMenu","browserMenuShortcutString","shortcut","useContextMenuDismisser","contextMenuItemComponents","anchorPosition","disablePortal","anchorReference","contextMenuList","ListSubheader","browserMenuTooltip","muiJSSClassNameGenerator","createGenerateClassName","seed","FullFileBrowser","StylesProvider","generateClassName","useFolderChain","currentFolderId","parentId","parentFile","unshift","useFiles","childrenIds","useFileMapMethods","baseFileMap","initialFolderId","setFileMap","setCurrentFolderId","resetFileMap","moveFiles","currentFileMap","newFileMap","moveFileIds","newSourceChildrenIds","newDestinationChildrenIds","methods","useFileActionHandler","fileToOpen","fileActionHandler"],"mappings":"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SAIhCf,GAA0BkB,gBAAcb,Ia5FxCc,GAAoBD,gBAA4ChD,IAEhEkD,GAA4B,CACrC,MACA,MACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,OACA,OACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,MACA,MACA,MACA,MACA,QACA,MACA,OACA,MACA,OACA,MACA,OACA,MACA,MACA,MACA,KACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,OACA,OACA,OACA,OACA,MACA,MACA,OACA,KACA,MACA,MACA,OAESC,GAA4B,CACrC,MACA,OACA,MACA,MACA,MACA,OACA,MACA,MACA,MACA,OACA,OACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,KACA,MACA,OACA,QACA,OACA,QACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,OACA,OACA,MACA,OACA,MACA,OACA,MACA,MACA,MACA,MACA,OAESC,GAA4B,CACrC,OACA,MACA,MACA,MACA,OACA,OACA,KACA,MACA,MACA,MACA,QACA,YACA,YACA,YACA,MACA,OACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,OACA,MACA,MACA,OACA,OACA,MACA,MACA,MACA,KACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,MACA,MACA,OACA,MACA,MAESC,GAAwB,CACjC,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAESC,GAAuB,CAChC,OACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAoEEC,GAjEc,mBACZC,EAAc,EAGZC,EAAoB,EAErB1Z,uBAAe2Z,QAAS,CAAC,YAC1B,CAAC3Z,uBAAe2E,OAAQ,CAAC,MAAO,MAAO,MAAO,OAAQ,QACtD,CAAC3E,uBAAe4Z,MAAO,CAAC,MAAO,MAAO,MAAO,QAC7C,CAAC5Z,uBAAe6Z,SAAU,CAAC,MAAO,OAAQ,MAAO,SAAU,UAAW,MAAO,MAAO,MAAO,MAAO,SAClG,CAAC7Z,uBAAe8Z,KAAM,CAAC,MAAO,KAAM,QACpC,CAAC9Z,uBAAe+Z,QAAS,CAAC,MAAO,MAAO,MAAO,SAAU,OACzD,CAAC/Z,uBAAega,MAAOZ,IACvB,CAACpZ,uBAAeia,MAAOd,IACvB,CAACnZ,uBAAeka,KAAM,CAAC,OAAQ,MAAO,MAAO,OAAQ,OAAQ,OAAQ,MAAO,IAAK,MAAO,IAAK,QAC7F,CAACla,uBAAema,KAAM,CAAC,MAAO,SAAU,QACxC,CAACna,uBAAeoa,IAAK,CAAC,MAAO,QAC7B,CAACpa,uBAA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"}
\ No newline at end of file
diff --git a/node_modules/chonky/dist/chonky.esm.js b/node_modules/chonky/dist/chonky.esm.js
index 12e0a0a..9dde5fc 100644
--- a/node_modules/chonky/dist/chonky.esm.js
+++ b/node_modules/chonky/dist/chonky.esm.js
@@ -30,6 +30,7 @@ import TextField from '@material-ui/core/TextField';
 import AutoSizer from 'react-virtualized-auto-sizer';
 import { VariableSizeGrid, FixedSizeList } from 'react-window';
 import ListSubheader from '@material-ui/core/ListSubheader';
+import { StylesProvider, createGenerateClassName } from '@material-ui/core';
 
 function _extends() {
   _extends = Object.assign || function (target) {
@@ -5044,13 +5045,20 @@ var useStyles$m = /*#__PURE__*/makeGlobalChonkyStyles(function () {
  * @copyright 2020
  * @license MIT
  */
+var muiJSSClassNameGenerator = /*#__PURE__*/createGenerateClassName({
+  // Seed property is used for prefix jss classes generated by material ui.
+  // Added to prevent style collisions
+  seed: 'chonky-generated'
+});
 var FullFileBrowser = /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(function (props, ref) {
   var onScroll = props.onScroll;
-  return React.createElement(FileBrowser, Object.assign({
+  return React.createElement(StylesProvider, {
+    generateClassName: muiJSSClassNameGenerator
+  }, React.createElement(FileBrowser, Object.assign({
     ref: ref
   }, props), React.createElement(FileNavbar, null), React.createElement(FileToolbar, null), React.createElement(FileList, {
     onScroll: onScroll
-  }), React.createElement(FileContextMenu, null));
+  }), React.createElement(FileContextMenu, null)));
 }));
 FullFileBrowser.displayName = 'FullFileBrowser';
 
diff --git a/node_modules/chonky/dist/chonky.esm.js.map b/node_modules/chonky/dist/chonky.esm.js.map
index 2839fa6..13f6210 100644
--- a/node_modules/chonky/dist/chonky.esm.js.map
+++ b/node_modules/chonky/dist/chonky.esm.js.map
@@ -1 +1 @@
-{"version":3,"file":"chonky.esm.js","sources":["../src/util/hooks-helpers.ts","../src/util/logger.ts","../src/util/file-helper.ts","../src/redux/files-transforms.ts","../src/action-definitions/option-ids.ts","../src/types/sort.types.ts","../src/redux/selectors.ts","../src/redux/thunks/file-actions.thunks.ts","../src/redux/thunks/dispatchers.thunks.ts","../src/types/file-view.types.ts","../src/types/icons.types.ts","../src/util/helpers.ts","../src/redux/thunks/index.ts","../src/action-definitions/essential.ts","../src/action-definitions/default.ts","../src/action-definitions/extra.ts","../src/action-definitions/index.ts","../src/redux/state.ts","../src/redux/reducers.ts","../src/redux/watchers.ts","../src/redux/store.ts","../src/components/internal/ChonkyIconPlaceholder.tsx","../src/util/default-config.ts","../src/util/i18n.ts","../src/util/icon-helper.ts","../src/util/styles.ts","../src/util/file-browser-handle.ts","../src/components/internal/ChonkyBusinessLogic.tsx","../src/util/dnd-fallback.ts","../src/components/external/FileContextMenu-hooks.ts","../src/types/dnd.types.ts","../src/components/file-list/DnDFileListDragLayer.tsx","../src/components/internal/HotkeyListener.tsx","../src/components/internal/ChonkyPresentationLayer.tsx","../src/components/external/FileBrowser.tsx","../src/components/external/FileNavbar-hooks.ts","../src/util/dnd.ts","../src/components/external/TextPlaceholder.tsx","../src/components/file-list/FileEntry-hooks.tsx","../src/types/action.types.ts","../src/util/file-actions.ts","../src/components/external/ToolbarButton.tsx","../src/components/external/FolderChainButton.tsx","../src/components/external/FileNavbar.tsx","../src/components/external/ToolbarDropdownButton.tsx","../src/components/external/ToolbarDropdown.tsx","../src/components/external/ToolbarInfo.tsx","../src/components/external/ToolbarSearch.tsx","../src/components/external/FileToolbar.tsx","../src/components/file-list/FileListEmpty.tsx","../src/components/internal/ClickableWrapper-hooks.tsx","../src/components/internal/ClickableWrapper.tsx","../src/components/file-list/FileEntryName.tsx","../src/components/file-list/CompactEntry.tsx","../src/components/file-list/DnDFileEntry.tsx","../src/components/file-list/FileThumbnail.tsx","../src/components/file-list/GridEntryDndIndicator.tsx","../src/components/file-list/GridEntryPreview.tsx","../src/components/file-list/GridEntry.tsx","../src/components/file-list/ListEntry.tsx","../src/components/file-list/FileEntry.tsx","../src/components/file-list/GridContainer.tsx","../src/components/file-list/ListContainer.tsx","../src/components/file-list/FileList.tsx","../src/components/external/FileContextMenu.tsx","../src/components/external/FullFileBrowser.tsx","../src/extensions/file-map.ts"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nexport const useDebounce = <T>(\n    value: T,\n    delay: number\n): [T, React.Dispatch<React.SetStateAction<T>>] => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(() => {\n        const handler = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [value, delay]);\n\n    return [debouncedValue, setDebouncedValue];\n};\n\nconst UNINITIALIZED_SENTINEL = {};\nexport const useStaticValue = <T>(factory: () => T): T => {\n    const valueRef = useRef<T>(UNINITIALIZED_SENTINEL as T);\n    if (valueRef.current === UNINITIALIZED_SENTINEL) valueRef.current = factory();\n    return valueRef.current;\n};\n\nexport const useInstanceVariable = <T>(value: T) => {\n    const ref = useRef(value);\n    useEffect(() => {\n        ref.current = value;\n    }, [ref, value]);\n    return ref;\n};\n","export class Logger {\n    public static error(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.error('[Chonky runtime error]', ...args);\n    }\n\n    public static warn(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.warn('[Chonky runtime warning]', ...args);\n    }\n\n    public static debug(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.debug('[Chonky runtime debug]', ...args);\n    }\n\n    public static formatBullets(bullets: string[]): string {\n        return `\\n- ${bullets.join('\\n- ')}`;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from '../types/file.types';\nimport { Logger } from './logger';\n\nexport class FileHelper {\n    public static isDirectory(file: Nullable<FileData>): file is FileData {\n        // Not a directory by default\n        return !!file && file.isDir === true;\n    }\n\n    public static isHidden(file: Nullable<FileData>): file is FileData {\n        // Not hidden by default\n        return !!file && file.isHidden === true;\n    }\n\n    public static isSymlink(file: Nullable<FileData>): file is FileData {\n        // Not a symlink by default\n        return !!file && file.isSymlink === true;\n    }\n\n    public static isEncrypted(file: Nullable<FileData>): file is FileData {\n        // Not encrypted by default\n        return !!file && file.isEncrypted === true;\n    }\n\n    public static isClickable(file: Nullable<FileData>): file is FileData {\n        // Clickable by default\n        return !!file;\n    }\n\n    public static isOpenable(file: Nullable<FileData>): file is FileData {\n        // Openable by default\n        return !!file && file.openable !== false;\n    }\n\n    public static isSelectable(file: Nullable<FileData>): file is FileData {\n        // Selectable by default\n        return !!file && file.selectable !== false;\n    }\n\n    public static isDraggable(file: Nullable<FileData>): file is FileData {\n        // File & folders are draggable by default, `null` is not\n        return !!file && file.draggable !== false;\n    }\n\n    public static isDroppable(file: Nullable<FileData>): file is FileData {\n        // Folders are droppable by default, files are not\n        if (!file) return false;\n        if (file.isDir && file.droppable !== false) return true;\n        return file.droppable === true;\n    }\n\n    public static isDndOpenable(file: Nullable<FileData>): file is FileData {\n        // Folders are DnD openable by default, files are not\n        if (!FileHelper.isOpenable(file)) return false;\n        if (file.isDir && file.dndOpenable !== false) return true;\n        return file.dndOpenable === true;\n    }\n\n    public static getModDate(file: Nullable<FileData>): Nullable<Date> {\n        if (!file || file.modDate === null || file.modDate === undefined) return null;\n        return FileHelper.parseDate(file.modDate);\n    }\n\n    public static parseDate(maybeDate: Date | string | any): Nullable<Date> {\n        if (typeof maybeDate === 'string' || typeof maybeDate === 'number') {\n            // We allow users to provide string and numerical representations of dates.\n            try {\n                return new Date(maybeDate);\n            } catch (error) {\n                Logger.error(\n                    `Could not convert provided string/number into a date: ${error.message} `,\n                    'Invalid value:',\n                    maybeDate\n                );\n            }\n        }\n        if (maybeDate instanceof Date && !isNaN(maybeDate.getTime())) {\n            // We only allow valid dates objects\n            return maybeDate;\n        }\n\n        // If we have an invalid date representation, we just return null.\n        Logger.warn('Unsupported date representation:', maybeDate);\n        return null;\n    }\n\n    public static getChildrenCount(file: Nullable<FileData>): Nullable<number> {\n        if (!file || typeof file.childrenCount !== 'number') return null;\n\n        return file.childrenCount;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileArray } from '../types/file.types';\nimport { Logger } from '../util/logger';\n\ninterface SanitizeFiles {\n    (mode: 'files', rawArray: FileArray | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'folderChain', rawArray: Nullable<FileArray> | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'fileActions', rawArray: FileAction[] | any): {\n        sanitizedArray: FileAction[];\n        errorMessages: string[];\n    };\n}\n\nexport const sanitizeInputArray: SanitizeFiles = (mode: string, rawArray: any[]) => {\n    const sanitizedFiles = [];\n    const errorMessages: string[] = [];\n\n    if ((mode === 'folderChain' || mode === 'fileActions') && !rawArray) {\n        // Do nothing, we allow folder chain to be null.\n    } else if (!Array.isArray(rawArray)) {\n        errorMessages.push(\n            `Expected \"${mode}\" prop to be an array, got \"${typeof rawArray}\" instead.`\n        );\n    } else {\n        let nonObjectFileCount = 0;\n        let missingFieldFileCount = 0;\n        const seenIds = new Set<string>();\n        const duplicateIds = new Set<string>();\n\n        for (let i = 0; i < rawArray.length; ++i) {\n            const item = rawArray[i];\n            if (!item) {\n                if (mode === 'fileActions') nonObjectFileCount++;\n                else sanitizedFiles.push(null);\n            } else if (typeof item !== 'object') {\n                nonObjectFileCount++;\n            } else {\n                if (!item.id || (mode !== 'fileActions' && !item.name)) {\n                    missingFieldFileCount++;\n                } else if (seenIds.has(item.id)) {\n                    duplicateIds.add(item.id);\n                } else {\n                    seenIds.add(item.id);\n                    sanitizedFiles.push(item);\n                }\n            }\n        }\n\n        if (nonObjectFileCount) {\n            errorMessages.push(\n                `Detected ${nonObjectFileCount} file(s) of invalid type. Remember ` +\n                    `that \"files\" array should contain either objects or nulls.`\n            );\n        }\n        if (missingFieldFileCount) {\n            errorMessages.push(\n                `Detected ${missingFieldFileCount} file(s) that are missing the ` +\n                    `required fields. Remember that file object should define an ` +\n                    `\"id\" and a \"name\".`\n            );\n        }\n        if (duplicateIds.size > 0) {\n            const repeatedIdsString = '\"' + Array.from(duplicateIds).join('\", \"') + '\"';\n            errorMessages.push(\n                `Detected ${duplicateIds.size} file IDs that are used multiple ` +\n                    `times. Remember that each file should have a unique IDs. The ` +\n                    `following IDs were seen multiple times: ${repeatedIdsString}`\n            );\n        }\n    }\n\n    if (errorMessages.length > 0) {\n        const errorMessageString = '\\n- ' + errorMessages.join('\\n- ');\n        let arrayString: string;\n        let itemString: string;\n        if (mode === 'folderChain') {\n            arrayString = 'folder chain';\n            itemString = 'files';\n        } else if (mode === 'fileActions') {\n            arrayString = 'file actions';\n            itemString = 'file actions';\n        } else {\n            // mode === 'files'\n            arrayString = 'files';\n            itemString = 'files';\n        }\n\n        Logger.error(\n            `Errors were detected when sanitizing the ${arrayString} array. ` +\n                `Offending ${itemString} were removed from the array. Summary of ` +\n                `validation errors: ${errorMessageString}`\n        );\n    }\n\n    return {\n        sanitizedArray: sanitizedFiles,\n        errorMessages,\n    };\n};\n","/**\n * We have option IDs in a separate file to avoid circular deps...\n */\nexport const OptionIds = {\n    ShowHiddenFiles: 'show_hidden_files',\n    ShowFoldersFirst: 'show_folders_first',\n    DarkMode: 'dark_mode',\n};\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from './file.types';\n\nexport type FileSortKeySelector = (file: Nullable<FileData>) => any;\n\nexport enum SortOrder {\n    ASC = 'asc',\n    DESC = 'desc',\n}\n","import sort from 'fast-sort';\nimport FuzzySearch from 'fuzzy-search';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { createSelector } from '@reduxjs/toolkit';\n\nimport { OptionIds } from '../action-definitions/option-ids';\nimport { FileArray, FileData, FileFilter } from '../types/file.types';\nimport { RootState } from '../types/redux.types';\nimport { FileSortKeySelector, SortOrder } from '../types/sort.types';\nimport { FileHelper } from '../util/file-helper';\n\n// Raw selectors\nexport const selectInstanceId = (state: RootState) => state.instanceId;\nexport const selectExternalFileActionHandler = (state: RootState) => state.externalFileActionHandler;\n\nexport const selectFileActionMap = (state: RootState) => state.fileActionMap;\nexport const selectFileActionIds = (state: RootState) => state.fileActionIds;\nexport const selectFileActionData = (fileActionId: string) => (state: RootState) =>\n    selectFileActionMap(state)[fileActionId];\nexport const selectToolbarItems = (state: RootState) => state.toolbarItems;\nexport const selectContextMenuItems = (state: RootState) => state.contextMenuItems;\n\nexport const selectFolderChain = (state: RootState) => state.folderChain;\nexport const selectCurrentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const currentFolder = folderChain.length > 0 ? folderChain[folderChain.length - 1] : null;\n    return currentFolder;\n};\nexport const selectParentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const parentFolder = folderChain.length > 1 ? folderChain[folderChain.length - 2] : null;\n    return parentFolder;\n};\n\nexport const selectRawFiles = (state: RootState) => state.rawFiles;\nexport const selectFileMap = (state: RootState) => state.fileMap;\nexport const selectCleanFileIds = (state: RootState) => state.cleanFileIds;\nexport const selectFileData = (fileId: Nullable<string>) => (state: RootState) =>\n    fileId ? selectFileMap(state)[fileId] : null;\n\nexport const selectHiddenFileIdMap = (state: RootState) => state.hiddenFileIdMap;\nexport const selectHiddenFileCount = (state: RootState) => Object.keys(selectHiddenFileIdMap(state)).length;\n\nexport const selectFocusSearchInput = (state: RootState) => state.focusSearchInput;\nexport const selectSearchString = (state: RootState) => state.searchString;\n\nexport const selectSelectionMap = (state: RootState) => state.selectionMap;\nexport const selectSelectedFileIds = (state: RootState) => Object.keys(selectSelectionMap(state));\nexport const selectSelectionSize = (state: RootState) => selectSelectedFileIds(state).length;\nexport const selectIsFileSelected = (fileId: Nullable<string>) => (state: RootState) =>\n    !!fileId && !!selectSelectionMap(state)[fileId];\nexport const selectSelectedFiles = (state: RootState) => {\n    const fileMap = selectFileMap(state);\n    return Object.keys(selectSelectionMap(state)).map(id => fileMap[id]);\n};\nexport const selectSelectedFilesForAction = (fileActionId: string) => (state: RootState) => {\n    const { fileActionMap } = state;\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.requiresSelection) return undefined;\n\n    return getSelectedFiles(state, action.fileFilter);\n};\nexport const selectSelectedFilesForActionCount = (fileActionId: string) => (state: RootState) =>\n    getSelectedFilesForAction(state, fileActionId)?.length;\nexport const selectDisableSelection = (state: RootState) => state.disableSelection;\n\nexport const selectFileViewConfig = (state: RootState) => state.fileViewConfig;\n\nexport const selectSortActionId = (state: RootState) => state.sortActionId;\nexport const selectSortOrder = (state: RootState) => state.sortOrder;\n\nexport const selectOptionMap = (state: RootState) => state.optionMap;\nexport const selectOptionValue = (optionId: string) => (state: RootState) => selectOptionMap(state)[optionId];\n\nexport const selectThumbnailGenerator = (state: RootState) => state.thumbnailGenerator;\nexport const selectDoubleClickDelay = (state: RootState) => state.doubleClickDelay;\nexport const selectIsDnDDisabled = (state: RootState) => state.disableDragAndDrop;\nexport const selectClearSelectionOnOutsideClick = (state: RootState) => state.clearSelectionOnOutsideClick;\n\nexport const selectContextMenuMounted = (state: RootState) => state.contextMenuMounted;\nexport const selectContextMenuConfig = (state: RootState) => state.contextMenuConfig;\nexport const selectContextMenuTriggerFile = (state: RootState) => {\n    const config = selectContextMenuConfig(state);\n    if (!config || !config.triggerFileId) return null;\n    const fileMap = selectFileMap(state);\n    return fileMap[config.triggerFileId] ?? null;\n};\n\n// Raw selectors\nconst getFileActionMap = (state: RootState) => state.fileActionMap;\nconst getOptionMap = (state: RootState) => state.optionMap;\nconst getFileMap = (state: RootState) => state.fileMap;\nconst getFileIds = (state: RootState) => state.fileIds;\nconst getCleanFileIds = (state: RootState) => state.cleanFileIds;\nconst getSortActionId = (state: RootState) => state.sortActionId;\nconst getSortOrder = (state: RootState) => state.sortOrder;\nconst getSearchString = (state: RootState) => state.searchString;\nconst _getLastClick = (state: RootState) => state.lastClick;\n\n// Memoized selectors\nconst makeGetAction = (fileActionSelector: (state: RootState) => Nullable<string>) =>\n    createSelector([getFileActionMap, fileActionSelector], (fileActionMap, fileActionId) =>\n        fileActionId && fileActionMap[fileActionId] ? fileActionMap[fileActionId] : null\n    );\nconst makeGetOptionValue = (optionId: string, defaultValue: any = undefined) =>\n    createSelector([getOptionMap], optionMap => {\n        const value = optionMap[optionId];\n        if (value === undefined) {\n            return defaultValue;\n        }\n        return value;\n    });\nconst makeGetFiles = (fileIdsSelector: (state: RootState) => Nullable<string>[]) =>\n    createSelector(\n        [getFileMap, fileIdsSelector],\n        (fileMap, fileIds): FileArray => fileIds.map(fileId => (fileId && fileMap[fileId] ? fileMap[fileId] : null))\n    );\nconst getSortedFileIds = createSelector(\n    [\n        getFileIds,\n        getSortOrder,\n        makeGetFiles(getFileIds),\n        makeGetAction(getSortActionId),\n        makeGetOptionValue(OptionIds.ShowFoldersFirst, false),\n    ],\n    (fileIds, sortOrder, files, sortAction, showFolderFirst) => {\n        if (!sortAction) {\n            // We allow users to set the sort action ID to `null` if they want to use their\n            // own sorting mechanisms instead of relying on Chonky built-in sort.\n            return fileIds;\n        }\n\n        const prepareSortKeySelector = (selector: FileSortKeySelector) => (file: Nullable<FileData>) => selector(file);\n\n        const sortFunctions: {\n            asc?: (file: FileData) => any;\n            desc?: (file: FileData) => any;\n        }[] = [];\n\n        if (showFolderFirst) {\n            // If option is undefined (relevant actions is not enabled), we don't show\n            // folders first.\n            sortFunctions.push({\n                desc: prepareSortKeySelector(FileHelper.isDirectory),\n            });\n        }\n        if (sortAction.sortKeySelector) {\n            const configKeyName = sortOrder === SortOrder.ASC ? 'asc' : 'desc';\n            sortFunctions.push({\n                [configKeyName]: prepareSortKeySelector(sortAction.sortKeySelector),\n            });\n        }\n        if (sortFunctions.length === 0) return fileIds;\n\n        // We copy the array because `fast-sort` mutates it\n        const sortedFileIds = sort([...files])\n            .by(sortFunctions as any)\n            .map(file => (file ? file.id : null));\n        return sortedFileIds;\n    }\n);\nconst getSearcher = createSelector(\n    [makeGetFiles(getCleanFileIds)],\n    cleanFiles => new FuzzySearch(cleanFiles as FileData[], ['name'], { caseSensitive: false })\n);\nconst getSearchFilteredFileIds = createSelector(\n    [getCleanFileIds, getSearchString, getSearcher],\n    (cleanFileIds, searchString, searcher) =>\n        searchString ? searcher.search(searchString).map(f => f.id) : cleanFileIds\n);\nconst getHiddenFileIdMap = createSelector(\n    [getSearchFilteredFileIds, makeGetFiles(getCleanFileIds), makeGetOptionValue(OptionIds.ShowHiddenFiles)],\n    (searchFilteredFileIds, cleanFiles, showHiddenFiles) => {\n        const searchFilteredFileIdsSet = new Set(searchFilteredFileIds);\n        const hiddenFileIdMap: any = {};\n        cleanFiles.forEach(file => {\n            if (!file) return;\n            else if (!searchFilteredFileIdsSet.has(file.id)) {\n                // Hidden by seach\n                hiddenFileIdMap[file.id] = true;\n            } else if (!showHiddenFiles && FileHelper.isHidden(file)) {\n                // Hidden by options\n                hiddenFileIdMap[file.id] = true;\n            }\n        });\n        return hiddenFileIdMap;\n    }\n);\nconst getDisplayFileIds = createSelector(\n    [getSortedFileIds, getHiddenFileIdMap],\n    /** Returns files that will actually be shown to the user. */\n    (sortedFileIds, hiddenFileIdMap) => sortedFileIds.filter(id => !id || !hiddenFileIdMap[id])\n);\nconst getLastClickIndex = createSelector(\n    [_getLastClick, getSortedFileIds],\n    /** Returns the last click index after ensuring it is actually still valid. */\n    (lastClick, displayFileIds) => {\n        if (\n            !lastClick ||\n            lastClick.index > displayFileIds.length - 1 ||\n            lastClick.fileId != displayFileIds[lastClick.index]\n        ) {\n            return null;\n        }\n        return lastClick.index;\n    }\n);\n\nexport const selectors = {\n    // Raw selectors\n    getFileActionMap,\n    getOptionMap,\n    getFileMap,\n    getFileIds,\n    getCleanFileIds,\n    getSortActionId,\n    getSortOrder,\n    getSearchString,\n    _getLastClick,\n\n    // Memoized selectors\n    getSortedFileIds,\n    getSearcher,\n    getSearchFilteredFileIds,\n    getHiddenFileIdMap,\n    getDisplayFileIds,\n    getLastClickIndex,\n\n    // Parametrized selectors\n    makeGetAction,\n    makeGetOptionValue,\n    makeGetFiles,\n};\n\n// Selectors meant to be used outside of Redux code\nexport const getFileData = (state: RootState, fileId: Nullable<string>) =>\n    fileId ? selectFileMap(state)[fileId] : null;\nexport const getIsFileSelected = (state: RootState, file: FileData) => {\n    // !!! We deliberately don't use `FileHelper.isSelectable` here as we want to\n    //     reflect the state of Redux store accurately.\n    return !!selectSelectionMap(state)[file.id];\n};\nexport const getSelectedFiles = (state: RootState, ...filters: Nilable<FileFilter>[]) => {\n    const { fileMap, selectionMap } = state;\n\n    const selectedFiles = Object.keys(selectionMap).map(id => fileMap[id]);\n    const filteredSelectedFiles = filters.reduce(\n        (prevFiles, filter) => (filter ? prevFiles.filter(filter) : prevFiles),\n        selectedFiles\n    );\n    return filteredSelectedFiles;\n};\nexport const getSelectedFilesForAction = (state: RootState, fileActionId: string) =>\n    selectSelectedFilesForAction(fileActionId)(state);\n","import { Nilable } from 'tsdef';\n\nimport { ChonkyActions, DefaultFileActions, EssentialFileActions } from '../../action-definitions/index';\nimport { FileActionGroup, FileActionMenuItem } from '../../types/action-menus.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyThunk } from '../../types/redux.types';\nimport { SortOrder } from '../../types/sort.types';\nimport { sanitizeInputArray } from '../files-transforms';\nimport { reduxActions } from '../reducers';\nimport { selectCleanFileIds, selectFileMap, selectHiddenFileIdMap, selectSelectionMap } from '../selectors';\n\n/**\n * Merges multiple file action arrays into one while removing duplicates\n */\nconst mergeFileActionsArrays = (...fileActionArrays: FileAction[][]): FileAction[] => {\n    const seenActionIds = new Set<string>();\n    const addToSeen = (a: FileAction) => !!seenActionIds.add(a.id);\n    const wasNotSeen = (a: FileAction) => !seenActionIds.has(a.id);\n\n    const duplicateFreeArrays = fileActionArrays.map(arr => {\n        const duplicateFreeArray = arr.filter(wasNotSeen);\n        duplicateFreeArray.map(addToSeen);\n        return duplicateFreeArray;\n    });\n    return new Array<FileAction>().concat(...duplicateFreeArrays);\n};\n\nexport const thunkUpdateRawFileActions = (\n    rawFileActions: FileAction[] | any,\n    disableDefaultFileActions: Nilable<boolean | string[]>\n): ChonkyThunk => dispatch => {\n    const { sanitizedArray, errorMessages } = sanitizeInputArray('fileActions', rawFileActions);\n\n    // Add default actions unless user disabled them\n    let defaultActionsToAdd: FileAction[];\n    if (Array.isArray(disableDefaultFileActions)) {\n        const disabledActionIds = new Set(disableDefaultFileActions);\n        defaultActionsToAdd = DefaultFileActions.filter(action => !disabledActionIds.has(action.id));\n    } else if (disableDefaultFileActions) {\n        defaultActionsToAdd = [];\n    } else {\n        defaultActionsToAdd = DefaultFileActions;\n    }\n\n    const fileActions = mergeFileActionsArrays(sanitizedArray, EssentialFileActions, defaultActionsToAdd);\n    const optionDefaults: any = {};\n    fileActions.map(a => (a.option ? (optionDefaults[a.option.id] = a.option.defaultValue) : null));\n\n    dispatch(reduxActions.setRawFileActions(rawFileActions));\n    dispatch(reduxActions.setFileActionsErrorMessages(errorMessages));\n    dispatch(reduxActions.setFileActions(fileActions));\n    dispatch(reduxActions.setOptionDefaults(optionDefaults));\n    dispatch(thunkUpdateToolbarNContextMenuItems(fileActions));\n};\n\nexport const thunkUpdateToolbarNContextMenuItems = (fileActions: FileAction[]): ChonkyThunk => dispatch => {\n    const excludedToolbarFileActionIds = new Set<string>([\n        // TODO: Move decision to exclude actions somewhere else, as users' custom\n        //  components might not give these actions special treatment like Chonky does.\n        ChonkyActions.OpenParentFolder.id,\n    ]);\n\n    type SeenGroupMap = { [groupName: string]: FileActionGroup };\n\n    const toolbarItems: FileActionMenuItem[] = [];\n    const seenToolbarGroups: SeenGroupMap = {};\n\n    const contextMenuItems: FileActionMenuItem[] = [];\n    const seenContextMenuGroups: SeenGroupMap = {};\n\n    const getGroup = (itemArray: FileActionMenuItem[], seenMap: SeenGroupMap, groupName: string): FileActionGroup => {\n        if (seenMap[groupName]) return seenMap[groupName];\n        const group: FileActionGroup = { name: groupName, fileActionIds: [] };\n        itemArray.push(group);\n        seenMap[groupName] = group;\n        return group;\n    };\n\n    for (const action of fileActions) {\n        const button = action.button;\n        if (!button) continue;\n\n        if (button.toolbar && !excludedToolbarFileActionIds.has(action.id)) {\n            if (button.group) {\n                const group = getGroup(toolbarItems, seenToolbarGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                toolbarItems.push(action.id);\n            }\n        }\n\n        if (button.contextMenu) {\n            if (button.group) {\n                const group = getGroup(contextMenuItems, seenContextMenuGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                contextMenuItems.push(action.id);\n            }\n        }\n    }\n\n    dispatch(reduxActions.updateFileActionMenuItems([toolbarItems, contextMenuItems]));\n};\n\nexport const thunkUpdateDefaultFileViewActionId = (fileActionId: Nilable<string>): ChonkyThunk => (\n    dispatch,\n    getState\n) => {\n    const { fileActionMap } = getState();\n    const action = fileActionId ? fileActionMap[fileActionId] : null;\n    if (action && action.fileViewConfig) {\n        dispatch(reduxActions.setFileViewConfig(action.fileViewConfig));\n    }\n};\n\nexport const thunkActivateSortAction = (fileActionId: Nilable<string>): ChonkyThunk => (dispatch, getState) => {\n    if (!fileActionId) return;\n\n    const { sortActionId: oldActionId, sortOrder: oldOrder, fileActionMap } = getState();\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.sortKeySelector) return;\n\n    let order = oldOrder === SortOrder.ASC ? SortOrder.DESC : SortOrder.ASC;\n    if (oldActionId !== fileActionId) {\n        order = SortOrder.ASC;\n    }\n\n    dispatch(reduxActions.setSort({ actionId: fileActionId, order: order }));\n};\n\nexport const thunkApplySelectionTransform = (action: FileAction): ChonkyThunk => (dispatch, getState) => {\n    const selectionTransform = action.selectionTransform;\n    if (!selectionTransform) return;\n\n    const state = getState();\n    const prevSelection = new Set<string>(Object.keys(selectSelectionMap(state)));\n    const hiddenFileIds = new Set<string>(Object.keys(selectHiddenFileIdMap(state)));\n\n    const newSelection = selectionTransform({\n        prevSelection,\n        fileIds: selectCleanFileIds(state),\n        fileMap: selectFileMap(state),\n        hiddenFileIds,\n    });\n    if (!newSelection) return;\n\n    if (newSelection.size === 0) {\n        dispatch(reduxActions.clearSelection());\n    } else {\n        dispatch(reduxActions.selectFiles({ fileIds: Array.from(newSelection), reset: true }));\n    }\n};\n","import { MaybePromise, Undefinable } from 'tsdef';\n\nimport { FileActionData, FileActionState } from '../../types/action-handler.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyDispatch, ChonkyThunk } from '../../types/redux.types';\nimport { Logger } from '../../util/logger';\nimport { reduxActions } from '../reducers';\nimport {\n    selectContextMenuTriggerFile, selectExternalFileActionHandler, selectFileActionMap,\n    selectInstanceId, selectSelectedFiles\n} from '../selectors';\nimport { thunkActivateSortAction, thunkApplySelectionTransform } from './file-actions.thunks';\n\n/**\n * Thunk that dispatches actions to the external (user-provided) action handler.\n */\nexport const thunkDispatchFileAction = (data: FileActionData<FileAction>): ChonkyThunk => (_dispatch, getState) => {\n    Logger.debug(`FILE ACTION DISPATCH: [${data.id}]`, 'data:', data);\n    const state = getState();\n    const action = selectFileActionMap(state)[data.id];\n    const externalFileActionHandler = selectExternalFileActionHandler(state);\n    if (action) {\n        if (externalFileActionHandler) {\n            Promise.resolve(externalFileActionHandler(data)).catch(error =>\n                Logger.error(`User-defined file action handler threw an error: ${error.message}`)\n            );\n        }\n    } else {\n        Logger.warn(\n            `Internal components dispatched the \"${data.id}\" file action, but such ` + `action was not registered.`\n        );\n    }\n};\n\n/**\n * Thunk that is used by internal components (and potentially the user) to \"request\"\n * actions. When action is requested, Chonky \"prepares\" the action data by extracting it\n * from Redux state. Once action data is ready, Chonky executes some side effect and/or\n * dispatches the action to the external action handler.\n */\nexport const thunkRequestFileAction = <Action extends FileAction>(\n    action: Action,\n    payload: Action['__payloadType']\n): ChonkyThunk => (dispatch, getState) => {\n    Logger.debug(`FILE ACTION REQUEST: [${action.id}]`, 'action:', action, 'payload:', payload);\n    const state = getState();\n    const instanceId = selectInstanceId(state);\n\n    if (!selectFileActionMap(state)[action.id]) {\n        Logger.warn(\n            `The action \"${action.id}\" was requested, but it is not registered. The ` +\n                `action will still be dispatched, but this might indicate a bug in ` +\n                `the code. Please register your actions by passing them to ` +\n                `\"fileActions\" prop.`\n        );\n    }\n\n    // Determine files for the action if action requires selection\n    const selectedFiles = selectSelectedFiles(state);\n    const selectedFilesForAction = action.fileFilter ? selectedFiles.filter(action.fileFilter) : selectedFiles;\n    if (action.requiresSelection && selectedFilesForAction.length === 0) {\n        Logger.warn(\n            `Internal components requested the \"${action.id}\" file ` +\n                `action, but the selection for this action was empty. This ` +\n                `might a bug in the code of the presentational components.`\n        );\n        return;\n    }\n\n    const contextMenuTriggerFile = selectContextMenuTriggerFile(state);\n    const actionState: FileActionState<{}> = {\n        instanceId,\n        selectedFiles,\n        selectedFilesForAction,\n        contextMenuTriggerFile,\n    };\n\n    // === Update sort state if necessary\n    const sortKeySelector = action.sortKeySelector;\n    if (sortKeySelector) dispatch(thunkActivateSortAction(action.id));\n\n    // === Update file view state if necessary\n    const fileViewConfig = action.fileViewConfig;\n    if (fileViewConfig) dispatch(reduxActions.setFileViewConfig(fileViewConfig));\n\n    // === Update option state if necessary\n    const option = action.option;\n    if (option) dispatch(reduxActions.toggleOption(option.id));\n\n    // === Apply selection transform if necessary\n    const selectionTransform = action.selectionTransform;\n    if (selectionTransform) dispatch(thunkApplySelectionTransform(action));\n\n    // Apply the effect\n    const effect = action.effect;\n    let maybeEffectPromise: MaybePromise<boolean | undefined> = undefined;\n    if (effect) {\n        try {\n            maybeEffectPromise = effect({\n                action,\n                payload,\n                state: actionState,\n                reduxDispatch: dispatch,\n                getReduxState: getState,\n            }) as MaybePromise<boolean | undefined>;\n        } catch (error) {\n            Logger.error(`User-defined effect function for action ${action.id} threw an ` + `error: ${error.message}`);\n        }\n    }\n\n    // Dispatch the action to user code. Deliberately call it after all other\n    // operations are over.\n    return Promise.resolve(maybeEffectPromise)\n        .then(effectResult => {\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, effectResult);\n        })\n        .catch(error => {\n            Logger.error(\n                `User-defined effect function for action ${action.id} returned a ` +\n                    `promise that was rejected: ${error.message}`\n            );\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, undefined);\n        });\n};\n\nexport const triggerDispatchAfterEffect = <Action extends FileAction>(\n    dispatch: ChonkyDispatch,\n    data: FileActionData<Action>,\n    effectResult: Undefinable<boolean>\n) => {\n    const preventDispatch = effectResult === true;\n    if (!preventDispatch) dispatch(thunkDispatchFileAction(data));\n};\n","export enum FileViewMode {\n    List = 'list',\n    Compact = 'compact',\n    Grid = 'grid',\n}\n\nexport type FileViewConfigList = {\n    mode: FileViewMode.List;\n    entryHeight: number;\n};\n\nexport type FileViewConfigGrid = {\n    mode: FileViewMode.Compact | FileViewMode.Grid;\n    entryWidth: number;\n    entryHeight: number;\n};\n\nexport type FileViewConfig = FileViewConfigList | FileViewConfigGrid;\n","import React from 'react';\n\nexport enum ChonkyIconName {\n    // Misc\n    loading = 'loading',\n    dropdown = 'dropdown',\n    placeholder = 'placeholder',\n\n    // File Actions: Drag & drop\n    dndDragging = 'dndDragging',\n    dndCanDrop = 'dndCanDrop',\n    dndCannotDrop = 'dndCannotDrop',\n\n    // File Actions: File operations\n    openFiles = 'openFiles',\n    openParentFolder = 'openParentFolder',\n    copy = 'copy',\n    paste = 'paste',\n    share = 'share',\n    search = 'search',\n    selectAllFiles = 'selectAllFiles',\n    clearSelection = 'clearSelection',\n\n    // File Actions: Sorting & options\n    sortAsc = 'sortAsc',\n    sortDesc = 'sortDesc',\n    toggleOn = 'toggleOn',\n    toggleOff = 'toggleOff',\n\n    // File Actions: File Views\n    list = 'list',\n    compact = 'compact',\n    smallThumbnail = 'smallThumbnail',\n    largeThumbnail = 'largeThumbnail',\n\n    // File Actions: Unsorted\n    folder = 'folder',\n    folderCreate = 'folderCreate',\n    folderOpen = 'folderOpen',\n    folderChainSeparator = 'folderChainSeparator',\n    download = 'download',\n    upload = 'upload',\n    trash = 'trash',\n    fallbackIcon = 'fallbackIcon',\n\n    // File modifiers\n    symlink = 'symlink',\n    hidden = 'hidden',\n\n    // Generic file types\n    file = 'file',\n    license = 'license',\n    code = 'code',\n    config = 'config',\n    model = 'model',\n    database = 'database',\n    text = 'text',\n    archive = 'archive',\n    image = 'image',\n    video = 'video',\n    info = 'info',\n    key = 'key',\n    lock = 'lock',\n    music = 'music',\n    terminal = 'terminal',\n    users = 'users',\n\n    // OS file types\n    linux = 'linux',\n    ubuntu = 'ubuntu',\n    windows = 'windows',\n\n    // Programming language file types\n    rust = 'rust',\n    python = 'python',\n    nodejs = 'nodejs',\n    php = 'php',\n\n    // Development tools file types\n    git = 'git',\n\n    // Brands file types\n    adobe = 'adobe',\n\n    // Other program file types\n    pdf = 'pdf',\n    excel = 'excel',\n    word = 'word',\n    flash = 'flash',\n}\n\nexport interface FileIconData {\n    icon: ChonkyIconName | string;\n    colorCode: number;\n}\n\nexport interface ChonkyIconProps {\n    icon: ChonkyIconName | string;\n    spin?: boolean;\n    className?: string;\n    fixedWidth?: boolean;\n    style?: React.CSSProperties;\n}\n","// Used in React hooks to indicate empty deps are intentional.\nimport { MaybePromise, Nullable, WritableProps } from 'tsdef';\n\nimport { FileAction, FileActionEffect } from '../types/action.types';\nimport { Logger } from './logger';\n\n// Used in contexts that need to provide some default value for a function.\n// eslint-disable-next-line no-unused-vars,@typescript-eslint/no-unused-vars\nexport const NOOP_FUNCTION = (...args: any[]) => {\n    Logger.warn(\n        `The \"NOOP_FUNCTION\" from the constants module was called. ` +\n            `This can indicate a bug in one of the components. Supplied args:`,\n        args\n    );\n};\n\nexport const isPromise = <T>(value: MaybePromise<T> | any): value is Promise<T> => {\n    if (typeof value !== 'object' || !value) return false;\n    const then = (value as Promise<T>).then;\n    return then && typeof then === 'function';\n};\n\nexport const defineFileAction = <Action extends FileAction>(\n    action: Action,\n    effect?: FileActionEffect<FileAction>\n): WritableProps<Action> => {\n    if (action.__payloadType !== undefined && (action.hotkeys || action.button)) {\n        const errorMessage =\n            `Invalid definition was provided for file action \"${action.id}\". Actions ` +\n            `that specify hotkeys or buttons cannot define a payload type. If ` +\n            `your application requires this functionality, define two actions ` +\n            `and chain them using effects.`;\n        Logger.error(errorMessage);\n        throw new Error(errorMessage);\n    }\n\n    action.effect = effect;\n    return action;\n};\n\n/**\n * Recursively check the current element and the parent elements, going bottom-up.\n * Returns the first element to match the predicate, otherwise returns null if such\n * element is not found.\n */\nexport const findElementAmongAncestors = (\n    maybeElement: HTMLElement | any,\n    predicate: (maybeElement: HTMLElement | any) => boolean\n): Nullable<HTMLElement> => {\n    if (!maybeElement) return maybeElement;\n\n    if (predicate(maybeElement)) return maybeElement;\n\n    if (maybeElement.parentElement) {\n        return findElementAmongAncestors(maybeElement.parentElement, predicate);\n    }\n\n    return null;\n};\n\nexport const elementIsInsideButton = (buttonCandidate: HTMLElement | any): boolean => {\n    return !!findElementAmongAncestors(\n        buttonCandidate,\n        (element: any) => element.tagName && element.tagName.toLowerCase() === 'button'\n    );\n};\n\nexport const getValueOrFallback = <T extends any>(\n    value: T | undefined,\n    fallback: T,\n    desiredType?: 'boolean' | 'string' | 'number'\n): NonNullable<T> => {\n    if (desiredType) {\n        return (typeof value === desiredType ? value : fallback) as NonNullable<T>;\n    }\n    return (value !== undefined ? value : fallback) as NonNullable<T>;\n};\n","import { ChonkyThunk } from '../../types/redux.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { reduxActions } from '../reducers';\nimport { selectors } from '../selectors';\n\nexport const reduxThunks = {\n    selectRange: (params: {\n        rangeStart: number;\n        rangeEnd: number;\n        reset?: boolean;\n    }): ChonkyThunk => (dispatch, getState) => {\n        const state = getState();\n        if (state.disableSelection) return;\n        const displayFileIds = selectors.getDisplayFileIds(state);\n        const fileIdsToSelect = displayFileIds\n            .slice(params.rangeStart, params.rangeEnd + 1)\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id])) as string[];\n        dispatch(\n            reduxActions.selectFiles({\n                fileIds: fileIdsToSelect,\n                reset: !!params.reset,\n            })\n        );\n    },\n};\n","import { reduxActions } from '../redux/reducers';\nimport {\n    getFileData, getIsFileSelected, selectDisableSelection, selectors, selectParentFolder,\n    selectSelectionSize\n} from '../redux/selectors';\nimport { reduxThunks } from '../redux/thunks';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport {\n    ChangeSelectionPayload, EndDragNDropPayload, KeyboardClickFilePayload, MouseClickFilePayload,\n    MoveFilesPayload, OpenFileContextMenuPayload, OpenFilesPayload, StartDragNDropPayload\n} from '../types/action-payloads.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { Logger } from '../util/logger';\nimport { ChonkyActions } from './index';\n\nexport const EssentialActions = {\n    /**\n     * Action that is dispatched when the user clicks on a file entry using their mouse.\n     * Both single clicks and double clicks trigger this action.\n     */\n    MouseClickFile: defineFileAction(\n        {\n            id: 'mouse_click_file',\n            __payloadType: {} as MouseClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (payload.clickType === 'double') {\n                if (FileHelper.isOpenable(payload.file)) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n\n                            // To simulate Windows Explorer and Nautilus behaviour,\n                            // a double click on a file only opens that file even if\n                            // there is a selection.\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else {\n                // We're dealing with a single click\n\n                const disableSelection = selectDisableSelection(getReduxState());\n                if (FileHelper.isSelectable(payload.file) && !disableSelection) {\n                    if (payload.ctrlKey) {\n                        // Multiple selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: false,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    } else if (payload.shiftKey) {\n                        // Range selection\n                        const lastClickIndex = selectors.getLastClickIndex(getReduxState());\n                        if (typeof lastClickIndex === 'number') {\n                            // We have the index of the previous click\n                            let rangeStart = lastClickIndex;\n                            let rangeEnd = payload.fileDisplayIndex;\n                            if (rangeStart > rangeEnd) {\n                                [rangeStart, rangeEnd] = [rangeEnd, rangeStart];\n                            }\n\n                            reduxDispatch(reduxThunks.selectRange({ rangeStart, rangeEnd }));\n                        } else {\n                            // Since we can't do a range selection, do a\n                            // multiple selection\n                            reduxDispatch(\n                                reduxActions.toggleSelection({\n                                    fileId: payload.file.id,\n                                    exclusive: false,\n                                })\n                            );\n                            reduxDispatch(\n                                reduxActions.setLastClickIndex({\n                                    index: payload.fileDisplayIndex,\n                                    fileId: payload.file.id,\n                                })\n                            );\n                        }\n                    } else {\n                        // Exclusive selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: true,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    }\n                } else {\n                    if (!payload.ctrlKey && !disableSelection) {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                    reduxDispatch(\n                        reduxActions.setLastClickIndex({\n                            index: payload.fileDisplayIndex,\n                            fileId: payload.file.id,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when the user \"clicks\" on a file using their keyboard.\n     * Using Space and Enter keys counts as clicking.\n     */\n    KeyboardClickFile: defineFileAction(\n        {\n            id: 'keyboard_click_file',\n            __payloadType: {} as KeyboardClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            reduxDispatch(\n                reduxActions.setLastClickIndex({\n                    index: payload.fileDisplayIndex,\n                    fileId: payload.file.id,\n                })\n            );\n            if (payload.enterKey) {\n                // We only dispatch the Open Files action here when the selection is\n                // empty. Otherwise, `Enter` key presses are handled by the\n                // hotkey manager for the Open Files action.\n                if (selectSelectionSize(getReduxState()) === 0) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else if (payload.spaceKey && FileHelper.isSelectable(payload.file)) {\n                reduxDispatch(\n                    reduxActions.toggleSelection({\n                        fileId: payload.file.id,\n                        exclusive: payload.ctrlKey,\n                    })\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user starts dragging some file.\n     */\n    StartDragNDrop: defineFileAction(\n        {\n            id: 'start_drag_n_drop',\n            __payloadType: {} as StartDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            const file = payload.draggedFile;\n            if (!getIsFileSelected(getReduxState(), file)) {\n                if (FileHelper.isSelectable(file)) {\n                    reduxDispatch(\n                        reduxActions.selectFiles({\n                            fileIds: [file.id],\n                            reset: true,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user either cancels the drag & drop interaction,\n     * or drops a file somewhere.\n     */\n    EndDragNDrop: defineFileAction(\n        {\n            id: 'end_drag_n_drop',\n            __payloadType: {} as EndDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (getIsFileSelected(getReduxState(), payload.destination)) {\n                // Can't drop a selection into itself\n                return;\n            }\n\n            const { draggedFile, selectedFiles } = payload as EndDragNDropPayload;\n            const droppedFiles = selectedFiles.length > 0 ? selectedFiles : [draggedFile];\n            reduxDispatch(\n                thunkRequestFileAction(ChonkyActions.MoveFiles, {\n                    ...payload,\n                    files: droppedFiles,\n                })\n            );\n        }\n    ),\n    /**\n     * Action that is dispatched when user moves files from one folder to another,\n     * usually by dragging & dropping some files into the folder.\n     */\n    MoveFiles: defineFileAction({\n        id: 'move_files',\n        __payloadType: {} as MoveFilesPayload,\n    } as const),\n    /**\n     * Action that is dispatched when the selection changes for any reason.\n     */\n    ChangeSelection: defineFileAction({\n        id: 'change_selection',\n        __payloadType: {} as ChangeSelectionPayload,\n    } as const),\n    /**\n     * Action that is dispatched when user wants to open some files. This action is\n     * often triggered by other actions.\n     */\n    OpenFiles: defineFileAction({\n        id: 'open_files',\n        __payloadType: {} as OpenFilesPayload,\n    } as const),\n    /**\n     * Action that is triggered when user wants to go up a directory.\n     */\n    OpenParentFolder: defineFileAction(\n        {\n            id: 'open_parent_folder',\n            hotkeys: ['backspace'],\n            button: {\n                name: 'Go up a directory',\n                toolbar: true,\n                contextMenu: false,\n                icon: ChonkyIconName.openParentFolder,\n                iconOnly: true,\n            },\n        } as const,\n        ({ reduxDispatch, getReduxState }) => {\n            const parentFolder = selectParentFolder(getReduxState());\n            if (FileHelper.isOpenable(parentFolder)) {\n                reduxDispatch(\n                    thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                        targetFile: parentFolder,\n                        files: [parentFolder],\n                    })\n                );\n            } else {\n                Logger.warn(\n                    'Open parent folder effect was triggered  even though the parent folder' +\n                        ' is not openable. This indicates a bug in presentation components.'\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user opens the context menu, either by right click\n     * on something or using the context menu button on their keyboard.\n     */\n    OpenFileContextMenu: defineFileAction(\n        {\n            id: 'open_file_context_menu',\n            __payloadType: {} as OpenFileContextMenuPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            // TODO: Check if the context menu component is actually enabled. There is a\n            //  chance it doesn't matter if it is enabled or not - if it is not mounted,\n            //  the action will simply have no effect. It also allows users to provide\n            //  their own components - however, users could also flip the \"context menu\n            //  component mounted\" switch...\n            const triggerFile = getFileData(getReduxState(), payload.triggerFileId);\n            if (triggerFile) {\n                const fileSelected = getIsFileSelected(getReduxState(), triggerFile);\n                if (!fileSelected) {\n                    // If file is selected, we leave the selection as is. If it is not\n                    // selected, it means user right clicked the file with no selection.\n                    // We simulate the Windows Explorer/Nautilus behaviour of moving\n                    // selection to this file.\n                    if (FileHelper.isSelectable(triggerFile)) {\n                        reduxDispatch(\n                            reduxActions.selectFiles({\n                                fileIds: [payload.triggerFileId],\n                                reset: true,\n                            })\n                        );\n                    } else {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                }\n            }\n\n            reduxDispatch(\n                reduxActions.showContextMenu({\n                    triggerFileId: payload.triggerFileId,\n                    mouseX: payload.clientX - 2,\n                    mouseY: payload.clientY - 4,\n                })\n            );\n        }\n    ),\n};\n","import { Nullable } from 'tsdef';\n\nimport { selectFocusSearchInput } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileSelectionTransform } from '../types/action.types';\nimport { FileViewMode } from '../types/file-view.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { EssentialActions } from './essential';\nimport { OptionIds } from './option-ids';\n\nexport const DefaultActions = {\n    /**\n     * Action that can be used to open currently selected files.\n     */\n    OpenSelection: defineFileAction(\n        {\n            id: 'open_selection',\n            hotkeys: ['enter'],\n            requiresSelection: true,\n            fileFilter: FileHelper.isOpenable,\n            button: {\n                name: 'Open selection',\n                toolbar: true,\n                contextMenu: true,\n                group: 'Actions',\n                icon: ChonkyIconName.openFiles,\n            },\n        } as const,\n        ({ state, reduxDispatch }) => {\n            reduxDispatch(\n                thunkRequestFileAction(EssentialActions.OpenFiles, {\n                    files: state.selectedFilesForAction!,\n                })\n            );\n            return undefined;\n        }\n    ),\n    /**\n     * Action that selects all files.\n     */\n    SelectAllFiles: defineFileAction({\n        id: 'select_all_files',\n        hotkeys: ['ctrl+a'],\n        button: {\n            name: 'Select all files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.selectAllFiles,\n        },\n        selectionTransform: (({ fileIds, hiddenFileIds }) => {\n            const newSelection = new Set<string>();\n            fileIds.map(fileId => {\n                // We don't need to check if file is selectable because Chonky does\n                // it own checks internally.\n                if (!hiddenFileIds.has(fileId)) newSelection.add(fileId);\n            });\n            return newSelection;\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that clear the file selection.\n     */\n    ClearSelection: defineFileAction({\n        id: 'clear_selection',\n        hotkeys: ['escape'],\n        button: {\n            name: 'Clear selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.clearSelection,\n        },\n        selectionTransform: (({ prevSelection }) => {\n            if (prevSelection.size === 0) return null;\n            return new Set<string>();\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that enables List view.\n     */\n    EnableListView: defineFileAction({\n        id: 'enable_list_view',\n        fileViewConfig: {\n            mode: FileViewMode.List,\n            entryHeight: 30,\n        },\n        button: {\n            name: 'Switch to List view',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Compact view. Note that compact view is still\n     * experimental and should not be used in production.\n     */\n    EnableCompactView: defineFileAction({\n        // TODO: Don't enable until compact view is fully supported\n        id: 'enable_compact_view',\n        fileViewConfig: {\n            mode: FileViewMode.Compact,\n            entryHeight: 40,\n            entryWidth: 220,\n        },\n        button: {\n            name: 'Switch to Compact view',\n            toolbar: true,\n            icon: ChonkyIconName.compact,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Grid view.\n     */\n    EnableGridView: defineFileAction({\n        id: 'enable_grid_view',\n        fileViewConfig: { mode: FileViewMode.Grid, entryWidth: 165, entryHeight: 130 },\n        button: {\n            name: 'Switch to Grid view',\n            toolbar: true,\n            icon: ChonkyIconName.smallThumbnail,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.name`.\n     */\n    SortFilesByName: defineFileAction({\n        id: 'sort_files_by_name',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.name.toLowerCase() : undefined),\n        button: {\n            name: 'Sort by name',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.size`.\n     */\n    SortFilesBySize: defineFileAction({\n        id: 'sort_files_by_size',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.size : undefined),\n        button: {\n            name: 'Sort by size',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.modDate`.\n     */\n    SortFilesByDate: defineFileAction({\n        id: 'sort_files_by_date',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.modDate : undefined),\n        button: {\n            name: 'Sort by date',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether hidden files are shown to the user or not.\n     */\n    ToggleHiddenFiles: defineFileAction({\n        id: 'toggle_hidden_files',\n        hotkeys: ['ctrl+h'],\n        option: {\n            id: OptionIds.ShowHiddenFiles,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show hidden files',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether folders should appear before files regardless of\n     * current sort function.\n     */\n    ToggleShowFoldersFirst: defineFileAction({\n        id: 'toggle_show_folders_first',\n        option: {\n            id: OptionIds.ShowFoldersFirst,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show folders first',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that focuses the search input when it is dispatched.\n     */\n    FocusSearchInput: defineFileAction(\n        {\n            id: 'focus_search_input',\n            hotkeys: ['ctrl+f'],\n        } as const,\n        ({ getReduxState }) => {\n            const focusSearchInput = selectFocusSearchInput(getReduxState());\n            if (focusSearchInput) focusSearchInput();\n        }\n    ),\n    /**\n     * Action that enables List view.\n     */\n    ToggleDarkMode: defineFileAction({\n        id: 'enable_dark_mode',\n        option: {\n            id: OptionIds.DarkMode,\n            defaultValue: false,\n        },\n        button: {\n            name: 'Enable dark mode',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n};\n","import { ChonkyIconName } from '../types/icons.types';\nimport { defineFileAction } from '../util/helpers';\n\nexport const ExtraActions = {\n    /**\n     * Action that adds a button and shortcut to copy files.\n     */\n    CopyFiles: defineFileAction({\n        id: 'copy_files',\n        requiresSelection: true,\n        hotkeys: ['ctrl+c'],\n        button: {\n            name: 'Copy selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.copy,\n        },\n    } as const),\n    /**\n     * Action that adds a button to create a new folder.\n     */\n    CreateFolder: defineFileAction({\n        id: 'create_folder',\n        button: {\n            name: 'Create folder',\n            toolbar: true,\n            tooltip: 'Create a folder',\n            icon: ChonkyIconName.folderCreate,\n        },\n    } as const),\n    /**\n     * Action that adds a button to upload files.\n     */\n    UploadFiles: defineFileAction({\n        id: 'upload_files',\n        button: {\n            name: 'Upload files',\n            toolbar: true,\n            tooltip: 'Upload files',\n            icon: ChonkyIconName.upload,\n        },\n    } as const),\n    /**\n     * Action that adds a button to download files.\n     */\n    DownloadFiles: defineFileAction({\n        id: 'download_files',\n        requiresSelection: true,\n        button: {\n            name: 'Download files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.download,\n        },\n    } as const),\n    /**\n     * Action that adds a button and shortcut to delete files.\n     */\n    DeleteFiles: defineFileAction({\n        id: 'delete_files',\n        requiresSelection: true,\n        hotkeys: ['delete'],\n        button: {\n            name: 'Delete files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.trash,\n        },\n    } as const),\n};\n","import { DefaultActions } from './default';\nimport { EssentialActions } from './essential';\nimport { ExtraActions } from './extra';\n\nexport { OptionIds } from './option-ids';\n\nexport const ChonkyActions = {\n    ...EssentialActions,\n    ...DefaultActions,\n    ...ExtraActions,\n};\n\nexport const EssentialFileActions = [\n    ChonkyActions.MouseClickFile,\n    ChonkyActions.KeyboardClickFile,\n    ChonkyActions.StartDragNDrop,\n    ChonkyActions.EndDragNDrop,\n    ChonkyActions.MoveFiles,\n    ChonkyActions.ChangeSelection,\n    ChonkyActions.OpenFiles,\n    ChonkyActions.OpenParentFolder,\n    ChonkyActions.OpenFileContextMenu,\n];\n\nexport const DefaultFileActions = [\n    ChonkyActions.OpenSelection,\n    ChonkyActions.SelectAllFiles,\n    ChonkyActions.ClearSelection,\n    ChonkyActions.EnableListView,\n    // TODO: Don't enable until compact view is fully supported\n    // ChonkyActions.EnableCompactView,\n    ChonkyActions.EnableGridView,\n    ChonkyActions.SortFilesByName,\n    ChonkyActions.SortFilesBySize,\n    ChonkyActions.SortFilesByDate,\n    ChonkyActions.ToggleHiddenFiles,\n    ChonkyActions.ToggleShowFoldersFirst,\n    ChonkyActions.FocusSearchInput,\n];\n","import { ChonkyActions } from '../action-definitions/index';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\n\nexport const initialRootState: RootState = {\n    instanceId: 'CHONKY_INVALID_ID', // should be overwritten by preloaded state\n\n    externalFileActionHandler: null,\n\n    rawFileActions: [],\n    fileActionsErrorMessages: [],\n    fileActionMap: {},\n    fileActionIds: [],\n    toolbarItems: [],\n    contextMenuItems: [],\n\n    rawFolderChain: null,\n    folderChainErrorMessages: [],\n    folderChain: [],\n\n    rawFiles: [],\n    filesErrorMessages: [],\n    fileMap: {},\n    fileIds: [],\n    cleanFileIds: [],\n\n    sortedFileIds: [],\n    hiddenFileIdMap: {},\n\n    focusSearchInput: null,\n    searchString: '',\n    searchMode: 'currentFolder',\n\n    selectionMap: {},\n    disableSelection: false,\n\n    fileViewConfig: ChonkyActions.EnableGridView.fileViewConfig,\n\n    sortActionId: null,\n    sortOrder: SortOrder.ASC,\n\n    optionMap: {},\n\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableDragAndDrop: false,\n    clearSelectionOnOutsideClick: true,\n\n    lastClick: null,\n\n    contextMenuMounted: false,\n    contextMenuConfig: null,\n};\n","import { Nilable, Nullable } from 'tsdef';\n\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nimport { GenericFileActionHandler } from '../types/action-handler.types';\nimport { FileActionMenuItem } from '../types/action-menus.types';\nimport { FileAction, FileActionMap } from '../types/action.types';\nimport { ContextMenuConfig } from '../types/context-menu.types';\nimport { FileViewConfig } from '../types/file-view.types';\nimport { FileArray, FileIdTrueMap, FileMap } from '../types/file.types';\nimport { OptionMap } from '../types/options.types';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\nimport { ThumbnailGenerator } from '../types/thumbnails.types';\nimport { FileHelper } from '../util/file-helper';\nimport { sanitizeInputArray } from './files-transforms';\nimport { initialRootState } from './state';\n\nconst reducers = {\n    setExternalFileActionHandler(\n        state: RootState,\n        action: PayloadAction<Nilable<GenericFileActionHandler<FileAction>>>\n    ) {\n        state.externalFileActionHandler = action.payload ?? null;\n    },\n    setRawFileActions(state: RootState, action: PayloadAction<FileAction[] | any>) {\n        state.rawFileActions = action.payload;\n    },\n    setFileActionsErrorMessages(state: RootState, action: PayloadAction<string[]>) {\n        state.fileActionsErrorMessages = action.payload;\n    },\n    setFileActions(state: RootState, action: PayloadAction<FileAction[]>) {\n        const fileActionMap: FileActionMap = {};\n        action.payload.map(a => (fileActionMap[a.id] = a));\n        const fileIds = action.payload.map(a => a.id);\n\n        state.fileActionMap = fileActionMap as FileMap;\n        state.fileActionIds = fileIds;\n    },\n    updateFileActionMenuItems(state: RootState, action: PayloadAction<[FileActionMenuItem[], FileActionMenuItem[]]>) {\n        [state.toolbarItems, state.contextMenuItems] = action.payload;\n    },\n    setRawFolderChain(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFolderChain = action.payload;\n        const { sanitizedArray: folderChain, errorMessages } = sanitizeInputArray('folderChain', rawFolderChain);\n        state.rawFolderChain = rawFolderChain;\n        state.folderChain = folderChain;\n        state.folderChainErrorMessages = errorMessages;\n    },\n    setRawFiles(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFiles = action.payload;\n        const { sanitizedArray: files, errorMessages } = sanitizeInputArray('files', rawFiles);\n        state.rawFiles = rawFiles;\n        state.filesErrorMessages = errorMessages;\n\n        const fileMap: FileMap = {};\n        files.forEach(f => {\n            if (f) fileMap[f.id] = f;\n        });\n        const fileIds = files.map(f => (f ? f.id : null));\n        const cleanFileIds = fileIds.filter(f => !!f) as string[];\n\n        state.fileMap = fileMap;\n        state.fileIds = fileIds;\n        state.cleanFileIds = cleanFileIds;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (!fileMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setSortedFileIds(state: RootState, action: PayloadAction<Nullable<string>[]>) {\n        state.sortedFileIds = action.payload;\n    },\n    setHiddenFileIds(state: RootState, action: PayloadAction<FileIdTrueMap>) {\n        state.hiddenFileIdMap = action.payload;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (state.hiddenFileIdMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setFocusSearchInput(state: RootState, action: PayloadAction<Nullable<() => void>>) {\n        state.focusSearchInput = action.payload;\n    },\n    setSearchString(state: RootState, action: PayloadAction<string>) {\n        state.searchString = action.payload;\n    },\n    selectAllFiles(state: RootState) {\n        state.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (id ? (state.selectionMap[id] = true) : null));\n    },\n    selectFiles(state: RootState, action: PayloadAction<{ fileIds: string[]; reset: boolean }>) {\n        if (state.disableSelection) return;\n        if (action.payload.reset) state.selectionMap = {};\n        action.payload.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (state.selectionMap[id] = true));\n    },\n    toggleSelection(state: RootState, action: PayloadAction<{ fileId: string; exclusive: boolean }>) {\n        if (state.disableSelection) return;\n        const oldValue = !!state.selectionMap[action.payload.fileId];\n        if (action.payload.exclusive) state.selectionMap = {};\n        if (oldValue) delete state.selectionMap[action.payload.fileId];\n        else if (FileHelper.isSelectable(state.fileMap[action.payload.fileId])) {\n            state.selectionMap[action.payload.fileId] = true;\n        }\n    },\n    clearSelection(state: RootState) {\n        if (state.disableSelection) return;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setSelectionDisabled(state: RootState, action: PayloadAction<boolean>) {\n        state.disableSelection = action.payload;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setFileViewConfig(state: RootState, action: PayloadAction<FileViewConfig>) {\n        state.fileViewConfig = action.payload;\n    },\n    setSort(state: RootState, action: PayloadAction<{ actionId: string; order: SortOrder }>) {\n        state.sortActionId = action.payload.actionId;\n        state.sortOrder = action.payload.order;\n    },\n    setOptionDefaults(state: RootState, action: PayloadAction<OptionMap>) {\n        for (const optionId of Object.keys(action.payload)) {\n            if (optionId in state.optionMap) continue;\n            state.optionMap[optionId] = action.payload[optionId];\n        }\n    },\n    toggleOption(state: RootState, action: PayloadAction<string>) {\n        state.optionMap[action.payload] = !state.optionMap[action.payload];\n    },\n    setThumbnailGenerator(state: RootState, action: PayloadAction<Nullable<ThumbnailGenerator>>) {\n        state.thumbnailGenerator = action.payload;\n    },\n    setDoubleClickDelay(state: RootState, action: PayloadAction<number>) {\n        state.doubleClickDelay = action.payload;\n    },\n    setDisableDragAndDrop(state: RootState, action: PayloadAction<boolean>) {\n        state.disableDragAndDrop = action.payload;\n    },\n    setClearSelectionOnOutsideClick(state: RootState, action: PayloadAction<boolean>) {\n        state.clearSelectionOnOutsideClick = action.payload;\n    },\n    setLastClickIndex(state: RootState, action: PayloadAction<Nullable<{ index: number; fileId: string }>>) {\n        state.lastClick = action.payload;\n    },\n    setContextMenuMounted(state: RootState, action: PayloadAction<boolean>) {\n        state.contextMenuMounted = action.payload;\n    },\n    showContextMenu(state: RootState, action: PayloadAction<ContextMenuConfig>) {\n        state.contextMenuConfig = action.payload;\n    },\n    hideContextMenu(state: RootState) {\n        if (!state.contextMenuConfig) return;\n        state.contextMenuConfig = null;\n    },\n};\n\nexport const { actions: reduxActions, reducer: rootReducer } = createSlice({\n    name: 'root',\n    initialState: initialRootState,\n    reducers,\n});\n","import { useEffect } from 'react';\nimport watch from 'redux-watch';\n\nimport { Store } from '@reduxjs/toolkit';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { RootState } from '../types/redux.types';\nimport { FileSelection } from '../types/selection.types';\nimport { selectSelectedFileIds, selectSelectionMap } from './selectors';\nimport { thunkRequestFileAction } from './thunks/dispatchers.thunks';\n\nexport const useStoreWatchers = (store: Store<RootState>) => {\n    useEffect(() => {\n        const selectionWatcher = watch(() => selectSelectionMap(store.getState()));\n        const onSelectionChange = (\n            newSelection: FileSelection,\n            oldSelection: FileSelection\n        ) => {\n            // We don't check for deep equality here as we expect the\n            // reducers to prevent all unnecessary updates.\n            if (newSelection === oldSelection) return;\n\n            // Notify users the selection has changed.\n            const selectedFilesIds = selectSelectedFileIds(store.getState());\n            const selection = new Set<string>(selectedFilesIds);\n            store.dispatch(\n                thunkRequestFileAction(ChonkyActions.ChangeSelection, {\n                    selection,\n                }) as any\n            );\n        };\n\n        const unsubscribeCallbacks = [\n            store.subscribe(selectionWatcher(onSelectionChange)),\n        ];\n        return () => {\n            for (const unsubscribe of unsubscribeCallbacks) unsubscribe();\n        };\n    }, [store]);\n};\n","import { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { configureStore } from '@reduxjs/toolkit';\n\nimport { RootState } from '../types/redux.types';\nimport { useStaticValue } from '../util/hooks-helpers';\nimport { rootReducer } from './reducers';\nimport { initialRootState } from './state';\nimport { useStoreWatchers } from './watchers';\n\nexport const useChonkyStore = (chonkyInstanceId: string) => {\n    const store = useStaticValue(() => {\n        const preloadedState: RootState = {\n            ...initialRootState,\n            instanceId: chonkyInstanceId,\n        };\n\n        return configureStore({\n            preloadedState: preloadedState as any,\n            reducer: rootReducer,\n            middleware: getDefaultMiddleware =>\n                getDefaultMiddleware({\n                    serializableCheck: false,\n                }),\n            devTools: { name: `chonky_${chonkyInstanceId}` },\n        });\n    });\n    useStoreWatchers(store);\n    return store;\n};\n\n/**\n * Hook that can be used with parametrized selectors.\n */\nexport const useParamSelector = <Args extends Array<any>, Value>(\n    parametrizedSelector: (...args: Args) => (state: RootState) => Value,\n    ...selectorParams: Args\n) => {\n    const selector = useCallback(\n        (state: RootState) => parametrizedSelector(...selectorParams)(state),\n        // eslint-disable-next-line\n        [parametrizedSelector, ...selectorParams]\n    );\n    return useSelector(selector);\n};\n\n/**\n * DTE - DispatchThunkEffect. This method is used to decrease code duplication in\n * main Chonky method.\n */\nexport const useDTE = <Args extends Array<any>>(actionCreator: (...args: Args) => any, ...selectorParams: Args) => {\n    const dispatch = useDispatch();\n    useEffect(\n        () => {\n            dispatch(actionCreator(...selectorParams));\n        },\n        // eslint-disable-next-line\n        [dispatch, actionCreator, ...selectorParams]\n    );\n};\n\nexport const usePropReduxUpdate = <Payload extends any>(actionCreator: (payload: Payload) => any, payload: Payload) => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(actionCreator(payload));\n    }, [dispatch, actionCreator, payload]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { ChonkyIconProps } from '../../types/icons.types';\n\nexport const ChonkyIconPlaceholder: React.FC<ChonkyIconProps> = () => {\n    // This component should not be rendered unless the user has misconfigured Chonky\n    const title =\n        'No icon component found. Please follow Chonky installation instructions to ' +\n        'provide a pre-made icon component (or a custom icon).';\n    return <span title={title}></span>;\n};\n","import { ChonkyActions } from '../action-definitions/index';\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileBrowserProps } from '../types/file-browser.types';\n\nexport type ChonkyConfig = Pick<\n    FileBrowserProps,\n    | 'fileActions'\n    | 'onFileAction'\n    | 'thumbnailGenerator'\n    | 'doubleClickDelay'\n    | 'disableSelection'\n    | 'disableDefaultFileActions'\n    | 'disableDragAndDrop'\n    | 'disableDragAndDropProvider'\n    | 'defaultSortActionId'\n    | 'defaultFileViewActionId'\n    | 'clearSelectionOnOutsideClick'\n    | 'iconComponent'\n    | 'darkMode'\n    | 'i18n'\n>;\n\nexport const defaultConfig: ChonkyConfig = {\n    fileActions: null,\n    onFileAction: null,\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableSelection: false,\n    disableDefaultFileActions: false,\n    disableDragAndDrop: false,\n    disableDragAndDropProvider: false,\n    defaultSortActionId: ChonkyActions.SortFilesByName.id,\n    defaultFileViewActionId: ChonkyActions.EnableGridView.id,\n    clearSelectionOnOutsideClick: true,\n    iconComponent: ChonkyIconPlaceholder,\n    darkMode: false,\n    i18n: {},\n};\n\nexport const setChonkyDefaults = (config: Partial<ChonkyConfig>) => {\n    for (const key of Object.keys(defaultConfig)) {\n        if (key in config) {\n            defaultConfig[key as keyof ChonkyConfig] = config[\n                key as keyof ChonkyConfig\n            ] as any;\n        }\n    }\n};\n","import filesize from 'filesize';\nimport { createContext, useContext, useMemo } from 'react';\nimport { IntlShape, useIntl } from 'react-intl';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyFormatters } from '../types/i18n.types';\nimport { FileHelper } from './file-helper';\n\nexport enum I18nNamespace {\n    Toolbar = 'toolbar',\n    FileList = 'fileList',\n    FileEntry = 'fileEntry',\n    FileContextMenu = 'contextMenu',\n\n    FileActions = 'actions',\n    FileActionGroups = 'actionGroups',\n}\n\nexport const getI18nId = (namespace: I18nNamespace, stringId: string): string =>\n    `chonky.${namespace}.${stringId}`;\n\nexport const getActionI18nId = (actionId: string, stringId: string): string =>\n    `chonky.${I18nNamespace.FileActions}.${actionId}.${stringId}`;\n\nexport const useLocalizedFileActionGroup = (groupName: string) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        return intl.formatMessage({\n            id: getI18nId(I18nNamespace.FileActionGroups, groupName),\n            defaultMessage: groupName,\n        });\n    }, [groupName, intl]);\n};\n\nexport const useLocalizedFileActionStrings = (action: Nullable<FileAction>) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        if (!action) {\n            return {\n                buttonName: '',\n                buttonTooltip: undefined,\n            };\n        }\n\n        const buttonName = intl.formatMessage({\n            id: getActionI18nId(action.id, 'button.name'),\n            defaultMessage: action.button?.name,\n        });\n\n        let buttonTooltip: Undefinable<string> = undefined;\n        if (action.button?.tooltip) {\n            // We only translate the tooltip if the original action has a tooltip.\n            buttonTooltip = intl.formatMessage({\n                id: getActionI18nId(action.id, 'button.tooltip'),\n                defaultMessage: action.button?.tooltip,\n            });\n        }\n\n        return {\n            buttonName,\n            buttonTooltip,\n        };\n    }, [action, intl]);\n};\n\nexport const useLocalizedFileEntryStrings = (file: Nullable<FileData>) => {\n    const intl = useIntl();\n    const formatters = useContext(ChonkyFormattersContext);\n    return useMemo(() => {\n        return {\n            fileModDateString: formatters.formatFileModDate(intl, file),\n            fileSizeString: formatters.formatFileSize(intl, file),\n        };\n    }, [file, formatters, intl]);\n};\n\nexport const defaultFormatters: ChonkyFormatters = {\n    formatFileModDate: (\n        intl: IntlShape,\n        file: Nullable<FileData>\n    ): Nullable<string> => {\n        const safeModDate = FileHelper.getModDate(file);\n        if (safeModDate) {\n            return intl.formatDate(safeModDate, {\n                dateStyle: 'medium',\n                timeStyle: 'short',\n            });\n        } else {\n            return null;\n        }\n    },\n    formatFileSize: (_intl: IntlShape, file: Nullable<FileData>): Nullable<string> => {\n        if (!file || typeof file.size !== 'number') return null;\n\n        const size = file.size;\n        const sizeData = filesize(size, { bits: false, output: 'object' }) as any;\n        if (sizeData.symbol === 'B') {\n            return `${Math.round(sizeData.value / 10) / 100.0} KB`;\n        } else if (sizeData.symbol === 'KB') {\n            return `${Math.round(sizeData.value)} ${sizeData.symbol}`;\n        }\n        return `${sizeData.value} ${sizeData.symbol}`;\n    },\n};\n\nexport const ChonkyFormattersContext = createContext(defaultFormatters);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2019\n * @license MIT\n */\n\nimport { createContext, ElementType, useMemo } from 'react';\n\nimport ExactTrie from 'exact-trie';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName, ChonkyIconProps, FileIconData } from '../types/icons.types';\n\nexport const ChonkyIconContext = createContext<ElementType<ChonkyIconProps>>(ChonkyIconPlaceholder);\n\nexport const VideoExtensions: string[] = [\n    '3g2',\n    '3gp',\n    '3gpp',\n    'asf',\n    'asx',\n    'avi',\n    'dvb',\n    'f4v',\n    'fli',\n    'flv',\n    'fvt',\n    'h261',\n    'h263',\n    'h264',\n    'jpgm',\n    'jpgv',\n    'jpm',\n    'm1v',\n    'm2v',\n    'm4u',\n    'm4v',\n    'mj2',\n    'mjp2',\n    'mk3d',\n    'mks',\n    'mkv',\n    'mng',\n    'mov',\n    'movie',\n    'mp4',\n    'mp4v',\n    'mpe',\n    'mpeg',\n    'mpg',\n    'mpg4',\n    'mxu',\n    'ogv',\n    'pyv',\n    'qt',\n    'smv',\n    'ts',\n    'uvh',\n    'uvm',\n    'uvp',\n    'uvs',\n    'uvu',\n    'uvv',\n    'uvvh',\n    'uvvm',\n    'uvvp',\n    'uvvs',\n    'uvvu',\n    'uvvv',\n    'viv',\n    'vob',\n    'webm',\n    'wm',\n    'wmv',\n    'wmx',\n    'wvx',\n];\nexport const ImageExtensions: string[] = [\n    '3ds',\n    'apng',\n    'azv',\n    'bmp',\n    'bmp',\n    'btif',\n    'cgm',\n    'cmx',\n    'djv',\n    'djvu',\n    'drle',\n    'dwg',\n    'dxf',\n    'emf',\n    'exr',\n    'fbs',\n    'fh',\n    'fh4',\n    'fh5',\n    'fh7',\n    'fhc',\n    'fits',\n    'fpx',\n    'fst',\n    'g3',\n    'gif',\n    'heic',\n    'heics',\n    'heif',\n    'heifs',\n    'ico',\n    'ico',\n    'ief',\n    'jls',\n    'jng',\n    'jp2',\n    'jpe',\n    'jpeg',\n    'jpf',\n    'jpg',\n    'jpg2',\n    'jpm',\n    'jpx',\n    'jxr',\n    'ktx',\n    'mdi',\n    'mmr',\n    'npx',\n    'pbm',\n    'pct',\n    'pcx',\n    'pcx',\n    'pgm',\n    'pic',\n    'png',\n    'pnm',\n    'ppm',\n    'psd',\n    'pti',\n    'ras',\n    'rgb',\n    'rlc',\n    'sgi',\n    'sid',\n    'sub',\n    'svg',\n    'svgz',\n    't38',\n    'tap',\n    'tfx',\n    'tga',\n    'tif',\n    'tiff',\n    'uvg',\n    'uvi',\n    'uvvg',\n    'uvvi',\n    'vtf',\n    'wbmp',\n    'wdp',\n    'webp',\n    'wmf',\n    'xbm',\n    'xif',\n    'xpm',\n    'xwd',\n];\nexport const AudioExtensions: string[] = [\n    '3gpp',\n    'aac',\n    'adp',\n    'aif',\n    'aifc',\n    'aiff',\n    'au',\n    'caf',\n    'dra',\n    'dts',\n    'dtshd',\n    'ecelp4800',\n    'ecelp7470',\n    'ecelp9600',\n    'eol',\n    'flac',\n    'kar',\n    'lvp',\n    'm2a',\n    'm3a',\n    'm3u',\n    'm4a',\n    'm4a',\n    'mid',\n    'midi',\n    'mka',\n    'mp2',\n    'mp2a',\n    'mp3',\n    'mp3',\n    'mp4a',\n    'mpga',\n    'oga',\n    'ogg',\n    'pya',\n    'ra',\n    'ra',\n    'ram',\n    'rip',\n    'rmi',\n    'rmp',\n    's3m',\n    'sil',\n    'snd',\n    'spx',\n    'uva',\n    'uvva',\n    'wav',\n    'wav',\n    'wav',\n    'wax',\n    'weba',\n    'wma',\n    'xm',\n];\nexport const ColorsLight: string[] = [\n    '#bbbbbb',\n    '#d65c5c',\n    '#d6665c',\n    '#d6705c',\n    '#d67a5c',\n    '#d6855c',\n    '#d68f5c',\n    '#d6995c',\n    '#d6a35c',\n    '#d6ad5c',\n    '#d6b85c',\n    '#d6c25c',\n    '#d6cc5c',\n    '#d6d65c',\n    '#ccd65c',\n    '#c2d65c',\n    '#b8d65c',\n    '#add65c',\n    '#a3d65c',\n    '#99d65c',\n    '#8fd65c',\n    '#85d65c',\n    '#7ad65c',\n    '#70d65c',\n    '#66d65c',\n    '#5cd65c',\n    '#5cd666',\n    '#5cd670',\n    '#5cd67a',\n    '#5cd685',\n    '#5cd68f',\n    '#5cd699',\n    '#5cd6a3',\n    '#5cd6ad',\n    '#5cd6b8',\n    '#5cd6c2',\n    '#5cd6cc',\n    '#5cd6d6',\n    '#5cccd6',\n    '#5cc2d6',\n    '#5cb8d6',\n    '#5cadd6',\n    '#5ca3d6',\n    '#5c99d6',\n    '#5c8fd6',\n    '#5c85d6',\n    '#5c7ad6',\n    '#5c70d6',\n    '#5c66d6',\n    '#5c5cd6',\n    '#665cd6',\n    '#705cd6',\n    '#7a5cd6',\n    '#855cd6',\n    '#8f5cd6',\n    '#995cd6',\n    '#a35cd6',\n    '#ad5cd6',\n    '#b85cd6',\n    '#c25cd6',\n    '#cc5cd6',\n    '#d65cd6',\n    '#d65ccc',\n    '#d65cc2',\n    '#d65cb8',\n    '#d65cad',\n    '#d65ca3',\n    '#d65c99',\n    '#d65c8f',\n    '#d65c85',\n    '#d65c7a',\n    '#d65c70',\n    '#d65c66',\n];\nexport const ColorsDark: string[] = [\n    '#777',\n    '#8f3d3d',\n    '#8f443d',\n    '#8f4b3d',\n    '#8f523d',\n    '#8f583d',\n    '#8f5f3d',\n    '#8f663d',\n    '#8f6d3d',\n    '#8f743d',\n    '#8f7a3d',\n    '#8f813d',\n    '#8f883d',\n    '#8f8f3d',\n    '#888f3d',\n    '#818f3d',\n    '#7a8f3d',\n    '#748f3d',\n    '#6d8f3d',\n    '#668f3d',\n    '#5f8f3d',\n    '#588f3d',\n    '#528f3d',\n    '#4b8f3d',\n    '#448f3d',\n    '#3d8f3d',\n    '#3d8f44',\n    '#3d8f4b',\n    '#3d8f52',\n    '#3d8f58',\n    '#3d8f5f',\n    '#3d8f66',\n    '#3d8f6d',\n    '#3d8f74',\n    '#3d8f7a',\n    '#3d8f81',\n    '#3d8f88',\n    '#3d8f8f',\n    '#3d888f',\n    '#3d818f',\n    '#3d7a8f',\n    '#3d748f',\n    '#3d6d8f',\n    '#3d668f',\n    '#3d5f8f',\n    '#3d588f',\n    '#3d528f',\n    '#3d4b8f',\n    '#3d448f',\n    '#3d3d8f',\n    '#443d8f',\n    '#4b3d8f',\n    '#523d8f',\n    '#583d8f',\n    '#5f3d8f',\n    '#663d8f',\n    '#6d3d8f',\n    '#743d8f',\n    '#7a3d8f',\n    '#813d8f',\n    '#883d8f',\n    '#8f3d8f',\n    '#8f3d88',\n    '#8f3d81',\n    '#8f3d7a',\n    '#8f3d74',\n    '#8f3d6d',\n    '#8f3d66',\n    '#8f3d5f',\n    '#8f3d58',\n    '#8f3d52',\n    '#8f3d4b',\n    '#8f3d44',\n];\n\nconst getIconTrie = () => {\n    let colourIndex = 0;\n    const step = 5;\n\n    const IconsToExtensions = [\n        // Generic file types\n        [ChonkyIconName.license, ['license']],\n        [ChonkyIconName.config, ['sfk', 'ini', 'yml', 'toml', 'iml']],\n        [ChonkyIconName.model, ['3ds', 'obj', 'ply', 'fbx']],\n        [ChonkyIconName.database, ['csv', 'json', 'sql', 'sqlite', 'sqlite3', 'npy', 'npz', 'rec', 'idx', 'hdf5']],\n        [ChonkyIconName.text, ['txt', 'md', 'mdx']],\n        [ChonkyIconName.archive, ['zip', 'rar', 'tar', 'tar.gz', '7z']],\n        [ChonkyIconName.image, ImageExtensions],\n        [ChonkyIconName.video, VideoExtensions],\n        [ChonkyIconName.code, ['html', 'php', 'css', 'sass', 'scss', 'less', 'cpp', 'h', 'hpp', 'c', 'xml']],\n        [ChonkyIconName.info, ['bib', 'readme', 'nfo']],\n        [ChonkyIconName.key, ['pem', 'pub']],\n        [ChonkyIconName.lock, ['lock', 'lock.json', 'shrinkwrap.json']],\n        [ChonkyIconName.music, AudioExtensions],\n        [ChonkyIconName.terminal, ['run', 'sh']],\n        [ChonkyIconName.trash, ['.Trashes']],\n        [ChonkyIconName.users, ['authors', 'contributors']],\n\n        // OS file types\n        [ChonkyIconName.linux, ['AppImage']],\n        [ChonkyIconName.ubuntu, ['deb']],\n        [ChonkyIconName.windows, ['exe']],\n\n        // Programming language file types\n        [ChonkyIconName.rust, ['rs', 'rlib']],\n        [ChonkyIconName.python, ['py', 'ipynb']],\n        [ChonkyIconName.nodejs, ['js', 'jsx', 'ts', 'tsx', 'd.ts']],\n        [ChonkyIconName.php, ['php']],\n\n        // Development tools file types\n        [ChonkyIconName.git, ['.gitignore']],\n\n        // Brands file types\n        [ChonkyIconName.adobe, ['psd']],\n\n        // Other program file types\n        [ChonkyIconName.pdf, ['pdf']],\n        [ChonkyIconName.excel, ['xls', 'xlsx']],\n        [ChonkyIconName.word, ['doc', 'docx', 'odt']],\n        [ChonkyIconName.flash, ['swf']],\n    ] as const;\n\n    const exactTrie = new ExactTrie({ ignoreCase: true });\n    for (const pair of IconsToExtensions) {\n        const [icon, extensions] = pair;\n\n        for (let i = 0; i < extensions.length; ++i) {\n            colourIndex += step;\n            const colorCode = (colourIndex % (ColorsLight.length - 1)) + 1;\n            const iconData: FileIconData = {\n                icon,\n                colorCode,\n            };\n            exactTrie.put(extensions[i], iconData, true);\n        }\n    }\n\n    return exactTrie;\n};\n\nconst iconTrie = getIconTrie();\n\nexport const useIconData = (file: Nullable<FileData>): FileIconData => {\n    return useMemo(() => {\n        if (!file) return { icon: ChonkyIconName.loading, colorCode: 0 };\n        if (file.isDir === true) return { icon: ChonkyIconName.folder, colorCode: 0 };\n\n        const match = iconTrie.getWithCheckpoints(file.name, '.', true);\n        return match ? match : { icon: ChonkyIconName.file, colorCode: 32 };\n    }, [file]);\n};\n","import { Theme as MuiTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\nimport { createUseStyles } from 'react-jss';\nimport { DeepPartial } from 'tsdef';\n\nexport const lightTheme = {\n    colors: {\n        debugRed: '#fabdbd',\n        debugBlue: '#bdd8fa',\n        debugGreen: '#d2fabd',\n        debugPurple: '#d2bdfa',\n        debugYellow: '#fae9bd',\n\n        textActive: '#09f',\n    },\n\n    fontSizes: {\n        rootPrimary: 15,\n    },\n\n    margins: {\n        rootLayoutMargin: 8,\n    },\n\n    toolbar: {\n        size: 30,\n        lineHeight: '30px', // `px` suffix is required for `line-height` fields to work\n        fontSize: 15,\n        buttonRadius: 4,\n    },\n\n    dnd: {\n        canDropColor: 'green',\n        cannotDropColor: 'red',\n        canDropMask: 'rgba(180, 235, 180, 0.75)',\n        cannotDropMask: 'rgba(235, 180, 180, 0.75)',\n        fileListCanDropMaskOne: 'rgba(180, 235, 180, 0.1)',\n        fileListCanDropMaskTwo: 'rgba(180, 235, 180, 0.2)',\n        fileListCannotDropMaskOne: 'rgba(235, 180, 180, 0.1)',\n        fileListCannotDropMaskTwo: 'rgba(235, 180, 180, 0.2)',\n    },\n\n    dragLayer: {\n        border: 'solid 2px #09f',\n        padding: '7px 10px',\n        borderRadius: 2,\n    },\n\n    fileList: {\n        desktopGridGutter: 8,\n        mobileGridGutter: 5,\n    },\n\n    gridFileEntry: {\n        childrenCountSize: '1.6em',\n        iconColorFocused: '#000',\n        iconSize: '2.4em',\n        iconColor: '#fff',\n        borderRadius: 5,\n        fontSize: 14,\n\n        fileColorTint: 'rgba(255, 255, 255, 0.4)',\n        folderBackColorTint: 'rgba(255, 255, 255, 0.1)',\n        folderFrontColorTint: 'rgba(255, 255, 255, 0.4)',\n    },\n\n    listFileEntry: {\n        propertyFontSize: 14,\n        iconFontSize: '1.1em',\n        iconBorderRadius: 5,\n        fontSize: 14,\n    },\n};\n\nexport type ChonkyTheme = typeof lightTheme;\n\nexport const darkThemeOverride: DeepPartial<ChonkyTheme> = {\n    gridFileEntry: {\n        fileColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderBackColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderFrontColorTint: 'rgba(50, 50, 50, 0.15)',\n    },\n};\n\nexport const mobileThemeOverride: DeepPartial<ChonkyTheme> = {\n    fontSizes: {\n        rootPrimary: 13,\n    },\n    margins: {\n        rootLayoutMargin: 4,\n    },\n    toolbar: {\n        size: 28,\n        lineHeight: '28px',\n        fontSize: 13,\n    },\n    gridFileEntry: {\n        fontSize: 13,\n    },\n    listFileEntry: {\n        propertyFontSize: 12,\n        iconFontSize: '1em',\n        fontSize: 13,\n    },\n};\n\nexport const useIsMobileBreakpoint = () => {\n    return useMediaQuery('(max-width:480px)');\n};\n\nexport const getStripeGradient = (colorOne: string, colorTwo: string) =>\n    'repeating-linear-gradient(' +\n    '45deg,' +\n    `${colorOne},` +\n    `${colorOne} 10px,` +\n    `${colorTwo} 0,` +\n    `${colorTwo} 20px` +\n    ')';\n\nexport const makeLocalChonkyStyles = <C extends string = string>(\n    styles: (theme: ChonkyTheme & MuiTheme) => any\n    // @ts-ignore\n): any => createUseStyles<ChonkyTheme, C>(styles);\n\nexport const makeGlobalChonkyStyles = <C extends string = string>(\n    makeStyles: (theme: ChonkyTheme & MuiTheme) => any\n) => {\n    const selectorMapping = {};\n    const makeGlobalStyles = (theme: ChonkyTheme) => {\n        const localStyles = makeStyles(theme as any);\n        const globalStyles = {};\n        const localSelectors = Object.keys(localStyles);\n        localSelectors.map(localSelector => {\n            const globalSelector = `chonky-${localSelector}`;\n            const jssSelector = `@global .${globalSelector}`;\n            // @ts-ignore\n            globalStyles[jssSelector] = localStyles[localSelector];\n            // @ts-ignore\n            selectorMapping[localSelector] = globalSelector;\n        });\n        return globalStyles;\n    };\n\n    // @ts-ignore\n    const useStyles = createUseStyles<ChonkyTheme, C>(makeGlobalStyles as any);\n    return (...args: any[]): any => {\n        const styles = useStyles(...args);\n        const classes = {};\n        Object.keys(selectorMapping).map(localSelector => {\n            // @ts-ignore\n            classes[localSelector] = selectorMapping[localSelector];\n        });\n        return { ...classes, ...styles };\n    };\n};\n\nexport const important = <T>(value: T) => [value, '!important'];\n\nexport const c = classnames;\n","import React, { useImperativeHandle } from 'react';\nimport { useDispatch, useStore } from 'react-redux';\n\nimport { reduxActions } from '../redux/reducers';\nimport { selectSelectionMap } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileAction } from '../types/action.types';\nimport { FileBrowserHandle } from '../types/file-browser.types';\nimport { RootState } from '../types/redux.types';\n\nexport const useFileBrowserHandle = (ref: React.Ref<FileBrowserHandle>) => {\n    const store = useStore<RootState>();\n    const dispatch = useDispatch();\n\n    useImperativeHandle(\n        ref,\n        () => ({\n            getFileSelection(): Set<string> {\n                const selectionMap = selectSelectionMap(store.getState());\n                const selectionSet = new Set(Object.keys(selectionMap));\n                return selectionSet;\n            },\n            setFileSelection(selection, reset = true): void {\n                const fileIds = Array.from(selection);\n                dispatch(reduxActions.selectFiles({ fileIds, reset }));\n            },\n            requestFileAction<Action extends FileAction>(\n                action: Action,\n                payload: Action['__payloadType']\n            ): Promise<void> {\n                return Promise.resolve(\n                    dispatch(thunkRequestFileAction(action, payload))\n                ).then();\n            },\n        }),\n        [store, dispatch]\n    );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { initialRootState } from '../../redux/state';\nimport { useDTE, usePropReduxUpdate } from '../../redux/store';\nimport {\n    thunkActivateSortAction, thunkUpdateDefaultFileViewActionId, thunkUpdateRawFileActions\n} from '../../redux/thunks/file-actions.thunks';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { useFileBrowserHandle } from '../../util/file-browser-handle';\nimport { getValueOrFallback } from '../../util/helpers';\n\nexport const ChonkyBusinessLogicInner = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        // ==== Update Redux state\n        usePropReduxUpdate(reduxActions.setRawFiles, props.files ?? initialRootState.rawFiles);\n        usePropReduxUpdate(reduxActions.setRawFolderChain, props.folderChain);\n        useDTE(\n            thunkUpdateRawFileActions,\n            getValueOrFallback(props.fileActions, defaultConfig.fileActions),\n            getValueOrFallback(props.disableDefaultFileActions, defaultConfig.disableDefaultFileActions)\n        );\n        useDTE(\n            reduxActions.setExternalFileActionHandler,\n            getValueOrFallback(props.onFileAction, defaultConfig.onFileAction) as any\n        );\n        useDTE(\n            reduxActions.setSelectionDisabled,\n            getValueOrFallback(props.disableSelection, defaultConfig.disableSelection, 'boolean')\n        );\n        useDTE(\n            thunkActivateSortAction,\n            getValueOrFallback(props.defaultSortActionId, defaultConfig.defaultSortActionId)\n        );\n        useDTE(\n            thunkUpdateDefaultFileViewActionId,\n            getValueOrFallback(props.defaultFileViewActionId, defaultConfig.defaultFileViewActionId, 'string')\n        );\n\n        useDTE(\n            reduxActions.setThumbnailGenerator,\n            getValueOrFallback(props.thumbnailGenerator, defaultConfig.thumbnailGenerator)\n        );\n        useDTE(\n            reduxActions.setDoubleClickDelay,\n            getValueOrFallback(props.doubleClickDelay, defaultConfig.doubleClickDelay, 'number')\n        );\n        useDTE(\n            reduxActions.setDisableDragAndDrop,\n            getValueOrFallback(props.disableDragAndDrop, defaultConfig.disableDragAndDrop, 'boolean')\n        );\n        useDTE(\n            reduxActions.setClearSelectionOnOutsideClick,\n            getValueOrFallback(\n                props.clearSelectionOnOutsideClick,\n                defaultConfig.clearSelectionOnOutsideClick,\n                'boolean'\n            )\n        );\n\n        // ==== Setup the imperative handle for external use\n        useFileBrowserHandle(ref);\n\n        return null;\n    })\n);\nChonkyBusinessLogicInner.displayName = 'ChonkyBusinessLogicInner';\n\nexport const ChonkyBusinessLogic = React.memo(ChonkyBusinessLogicInner);\nChonkyBusinessLogic.displayName = 'ChonkyBusinessLogic';\n","import { useCallback, useContext } from 'react';\nimport { DndContext, useDrag, useDrop } from 'react-dnd';\n\nexport const useDndContextAvailable = () => {\n    const dndContext = useContext(DndContext);\n    const { dragDropManager } = dndContext;\n    return !!dragDropManager;\n};\n\nexport const useDragIfAvailable: typeof useDrag = (...args) => {\n    // This is an ugly hack to make `useDrag` not throw if a `DndContext` is not available.\n    // See: https://github.com/react-dnd/react-dnd/issues/2212\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrag = dndContextAvailable ? useDrag : mockHook;\n    return useHook(...args);\n};\n\nexport const useDropIfAvailable: typeof useDrop = (...args) => {\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrop = dndContextAvailable ? useDrop : mockHook;\n    return useHook(...args);\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuMounted } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { findElementAmongAncestors } from '../../util/helpers';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\n\nexport const findClosestChonkyFileId = (\n    element: HTMLElement | any\n): Nullable<string> => {\n    const fileEntryWrapperDiv = findElementAmongAncestors(\n        element,\n        (element: any) =>\n            element.tagName &&\n            element.tagName.toLowerCase() === 'div' &&\n            element.dataset &&\n            element.dataset.chonkyFileId\n    );\n    return fileEntryWrapperDiv ? fileEntryWrapperDiv.dataset.chonkyFileId! : null;\n};\n\nexport const useContextMenuTrigger = () => {\n    const dispatch = useDispatch();\n    const contextMenuMountedRef = useInstanceVariable(\n        useSelector(selectContextMenuMounted)\n    );\n    return useCallback(\n        (event: React.MouseEvent<HTMLDivElement>) => {\n            // Use default browser context menu when Chonky context menu component\n            // is not mounted.\n            if (!contextMenuMountedRef.current) return;\n            // Users can use Alt+Right Click to bring up browser's default\n            // context menu instead of Chonky's context menu.\n            if (event.altKey) return;\n\n            event.preventDefault();\n\n            const triggerFileId = findClosestChonkyFileId(event.target);\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.OpenFileContextMenu, {\n                    clientX: event.clientX,\n                    clientY: event.clientY,\n                    triggerFileId,\n                })\n            );\n        },\n        [contextMenuMountedRef, dispatch]\n    );\n};\n\nexport const useContextMenuDismisser = () => {\n    const dispatch = useDispatch();\n    return useCallback(() => dispatch(reduxActions.hideContextMenu()), [dispatch]);\n};\n","import { DragObjectWithType } from 'react-dnd';\nimport { Nilable } from 'tsdef';\n\nimport { StartDragNDropPayload } from './action-payloads.types';\nimport { FileData } from './file.types';\n\nexport interface ChonkyDndDropResult {\n    dropTarget: Nilable<FileData> | any;\n    dropEffect: 'move' | 'copy';\n}\n\nexport type ChonkyDndFileEntryItem = DragObjectWithType & {\n    payload: StartDragNDropPayload;\n};\nexport const ChonkyDndFileEntryType = 'dnd-chonky-file-entry';\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useDragLayer } from 'react-dnd';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyDndFileEntryItem, ChonkyDndFileEntryType } from '../../types/dnd.types';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileListDragLayerProps {}\n\nconst layerStyles: React.CSSProperties = {\n    position: 'fixed',\n    pointerEvents: 'none',\n    zIndex: 100,\n    left: 0,\n    top: 0,\n    width: '100%',\n    height: '100%',\n};\nconst getItemStyles = (\n    initialCursorOffset: Nullable<{ x: number; y: number }>,\n    initialFileOffset: Nullable<{ x: number; y: number }>,\n    currentFileOffset: Nullable<{ x: number; y: number }>\n) => {\n    if (!initialCursorOffset || !initialFileOffset || !currentFileOffset) {\n        return {\n            display: 'none',\n        };\n    }\n    const x = initialCursorOffset.x + (currentFileOffset.x - initialFileOffset.x);\n    const y = initialCursorOffset.y + (currentFileOffset.y - initialFileOffset.y);\n    const transform = `translate(${x}px, ${y}px)`;\n    return {\n        transform,\n        WebkitTransform: transform,\n    };\n};\n\nexport const DnDFileListDragLayer: React.FC<DnDFileListDragLayerProps> = () => {\n    const classes = useStyles();\n\n    const {\n        itemType,\n        item,\n        initialCursorOffset,\n        initialFileOffset,\n        currentFileOffset,\n        isDragging,\n    } = useDragLayer(monitor => ({\n        item: monitor.getItem() as ChonkyDndFileEntryItem,\n        itemType: monitor.getItemType(),\n        initialCursorOffset: monitor.getInitialClientOffset(),\n        initialFileOffset: monitor.getInitialSourceClientOffset(),\n        currentFileOffset: monitor.getSourceClientOffset(),\n        isDragging: monitor.isDragging(),\n    }));\n    if (!isDragging || itemType !== ChonkyDndFileEntryType || !item.payload) {\n        return null;\n    }\n\n    const selectionSize = item.payload.selectedFiles.length;\n    return (\n        <div style={layerStyles}>\n            <div\n                style={getItemStyles(\n                    initialCursorOffset,\n                    initialFileOffset,\n                    currentFileOffset\n                )}\n            >\n                <div className={classes.fileDragPreview}>\n                    <b>{item.payload.draggedFile.name}</b>\n                    {selectionSize > 1 && (\n                        <>\n                            {' and '}\n                            <strong>\n                                {selectionSize - 1} other file\n                                {selectionSize - 1 !== 1 ? 's' : ''}\n                            </strong>\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileDragPreview: {\n        boxShadow: `2px 2px 5px ${theme.palette.divider}`,\n        backgroundColor: theme.palette.background.default,\n        borderRadius: theme.dragLayer.borderRadius,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        padding: theme.dragLayer.padding,\n        border: theme.dragLayer.border,\n        display: 'inline-block',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport hotkeys from 'hotkeys-js';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\n\nexport interface HotkeyListenerProps {\n    fileActionId: string;\n}\n\nexport const HotkeyListener: React.FC<HotkeyListenerProps> = React.memo(props => {\n    const { fileActionId } = props;\n\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n\n    useEffect(() => {\n        if (!fileAction || !fileAction.hotkeys || fileAction.hotkeys.length === 0) {\n            return;\n        }\n\n        const hotkeysStr = fileAction.hotkeys.join(',');\n        const hotkeyCallback = (event: KeyboardEvent) => {\n            event.preventDefault();\n            dispatch(thunkRequestFileAction(fileAction, undefined));\n        };\n        hotkeys(hotkeysStr, hotkeyCallback);\n        return () => hotkeys.unbind(hotkeysStr, hotkeyCallback);\n    }, [dispatch, fileAction]);\n\n    return null;\n});\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { reduxActions } from '../../redux/reducers';\nimport {\n    selectClearSelectionOnOutsideClick,\n    selectFileActionIds,\n    selectIsDnDDisabled,\n} from '../../redux/selectors';\nimport { useDndContextAvailable } from '../../util/dnd-fallback';\nimport { elementIsInsideButton } from '../../util/helpers';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuTrigger } from '../external/FileContextMenu-hooks';\nimport { DnDFileListDragLayer } from '../file-list/DnDFileListDragLayer';\nimport { HotkeyListener } from './HotkeyListener';\n\nexport interface ChonkyPresentationLayerProps {}\n\nexport const ChonkyPresentationLayer: React.FC<ChonkyPresentationLayerProps> = ({\n    children,\n}) => {\n    const dispatch = useDispatch();\n    const fileActionIds = useSelector(selectFileActionIds);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n    const clearSelectionOnOutsideClick = useSelector(\n        selectClearSelectionOnOutsideClick\n    );\n\n    // Deal with clicks outside of Chonky\n    const handleClickAway = useCallback(\n        (event: React.MouseEvent<Document>) => {\n            if (!clearSelectionOnOutsideClick || elementIsInsideButton(event.target)) {\n                // We only clear out the selection on outside click if the click target\n                // was not a button. We don't want to clear out the selection when a\n                // button is clicked because Chonky users might want to trigger some\n                // selection-related action on that button click.\n                return;\n            }\n            dispatch(reduxActions.clearSelection());\n        },\n        [dispatch, clearSelectionOnOutsideClick]\n    );\n\n    // Generate necessary components\n    const hotkeyListenerComponents = useMemo(\n        () =>\n            fileActionIds.map(actionId => (\n                <HotkeyListener\n                    key={`file-action-listener-${actionId}`}\n                    fileActionId={actionId}\n                />\n            )),\n        [fileActionIds]\n    );\n\n    const dndContextAvailable = useDndContextAvailable();\n    const showContextMenu = useContextMenuTrigger();\n\n    const classes = useStyles();\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n            <Box className={classes.chonkyRoot} onContextMenu={showContextMenu}>\n                {!dndDisabled && dndContextAvailable && <DnDFileListDragLayer />}\n                {hotkeyListenerComponents}\n                {children ? children : null}\n            </Box>\n        </ClickAwayListener>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    chonkyRoot: {\n        backgroundColor: theme.palette.background.paper,\n        border: `solid 1px ${theme.palette.divider}`,\n        padding: theme.margins.rootLayoutMargin,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        touchAction: 'manipulation', // Disabling zoom on double tap\n        fontFamily: 'sans-serif',\n        flexDirection: 'column',\n        boxSizing: 'border-box',\n        textAlign: 'left',\n        borderRadius: 4,\n        display: 'flex',\n        height: '100%',\n\n        // Disabling select\n        webkitTouchCallout: 'none',\n        webkitUserSelect: 'none',\n        mozUserSelect: 'none',\n        msUserSelect: 'none',\n        userSelect: 'none',\n    },\n}));\n","import {\n    createMuiTheme,\n    ThemeProvider as MuiThemeProvider,\n} from '@material-ui/core/styles';\nimport merge from 'deepmerge';\nimport React, { ReactNode, useMemo } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { IntlProvider } from 'react-intl';\nimport { ThemeProvider } from 'react-jss';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport shortid from 'shortid';\n\nimport { useChonkyStore } from '../../redux/store';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { getValueOrFallback } from '../../util/helpers';\nimport { useStaticValue } from '../../util/hooks-helpers';\nimport { ChonkyFormattersContext, defaultFormatters } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    darkThemeOverride,\n    lightTheme,\n    mobileThemeOverride,\n    useIsMobileBreakpoint,\n} from '../../util/styles';\nimport { ChonkyBusinessLogic } from '../internal/ChonkyBusinessLogic';\nimport { ChonkyIconPlaceholder } from '../internal/ChonkyIconPlaceholder';\nimport { ChonkyPresentationLayer } from '../internal/ChonkyPresentationLayer';\n\n// if (process.env.NODE_ENV === 'development') {\n//     const whyDidYouRender = require('@welldone-software/why-did-you-render');\n//     whyDidYouRender(React, {\n//         trackAllPureComponents: true,\n//     });\n// }\n\nexport const FileBrowser = React.forwardRef<\n    FileBrowserHandle,\n    FileBrowserProps & { children?: ReactNode }\n>((props, ref) => {\n    const { instanceId, iconComponent, children } = props;\n    const disableDragAndDrop = getValueOrFallback(\n        props.disableDragAndDrop,\n        defaultConfig.disableDragAndDrop,\n        'boolean'\n    );\n    const disableDragAndDropProvider = getValueOrFallback(\n        props.disableDragAndDropProvider,\n        defaultConfig.disableDragAndDropProvider,\n        'boolean'\n    );\n    const darkMode = getValueOrFallback(\n        props.darkMode,\n        defaultConfig.darkMode,\n        'boolean'\n    );\n    const i18n = getValueOrFallback(props.i18n, defaultConfig.i18n);\n    const formatters = useMemo(() => ({ ...defaultFormatters, ...i18n?.formatters }), [\n        i18n,\n    ]);\n\n    const chonkyInstanceId = useStaticValue(() => instanceId ?? shortid.generate());\n    const store = useChonkyStore(chonkyInstanceId);\n\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n    const theme = useMemo(() => {\n        const muiTheme = createMuiTheme({\n            palette: { type: darkMode ? 'dark' : 'light' },\n        });\n        const combinedTheme = merge(\n            muiTheme,\n            merge(lightTheme, darkMode ? darkThemeOverride : {})\n        );\n        return isMobileBreakpoint\n            ? merge(combinedTheme, mobileThemeOverride)\n            : combinedTheme;\n    }, [darkMode, isMobileBreakpoint]);\n\n    const chonkyComps = (\n        <>\n            <ChonkyBusinessLogic ref={ref} {...props} />\n            <ChonkyPresentationLayer>{children}</ChonkyPresentationLayer>\n        </>\n    );\n\n    return (\n        <IntlProvider locale=\"en\" defaultLocale=\"en\" {...i18n}>\n            <ChonkyFormattersContext.Provider value={formatters}>\n                <ReduxProvider store={store}>\n                    <ThemeProvider theme={theme}>\n                        <MuiThemeProvider theme={theme}>\n                            <ChonkyIconContext.Provider\n                                value={\n                                    iconComponent ??\n                                    defaultConfig.iconComponent ??\n                                    ChonkyIconPlaceholder\n                                }\n                            >\n                                {disableDragAndDrop || disableDragAndDropProvider ? (\n                                    chonkyComps\n                                ) : (\n                                    <DndProvider backend={HTML5Backend}>\n                                        {chonkyComps}\n                                    </DndProvider>\n                                )}\n                            </ChonkyIconContext.Provider>\n                        </MuiThemeProvider>\n                    </ThemeProvider>\n                </ReduxProvider>\n            </ChonkyFormattersContext.Provider>\n        </IntlProvider>\n    );\n});\nFileBrowser.displayName = 'FileBrowser';\n","import { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectFolderChain } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { FileData } from '../../types/file.types';\nimport { FileHelper } from '../../util/file-helper';\n\nexport interface FolderChainItem {\n    file: Nullable<FileData>;\n    disabled: boolean;\n    onClick?: () => void;\n}\n\nexport const useFolderChainItems = (): FolderChainItem[] => {\n    const folderChain = useSelector(selectFolderChain);\n    const dispatch = useDispatch();\n\n    const folderChainItems = useMemo(() => {\n        const items: FolderChainItem[] = [];\n        if (!folderChain) return items;\n\n        for (let i = 0; i < folderChain.length; ++i) {\n            const file = folderChain[i];\n            items.push({\n                file,\n                disabled: !file,\n                onClick:\n                    !FileHelper.isOpenable(file) || i === folderChain.length - 1\n                        ? undefined\n                        : () =>\n                              dispatch(\n                                  thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                                      targetFile: file,\n                                      files: [file],\n                                  })\n                              ),\n            });\n        }\n        return items;\n    }, [dispatch, folderChain]);\n    return folderChainItems;\n};\n","import { useCallback, useEffect, useMemo } from 'react';\nimport { DragSourceMonitor, DropTargetMonitor } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useDispatch, useSelector, useStore } from 'react-redux';\nimport { ExcludeKeys, Nullable } from 'tsdef';\n\nimport { EssentialActions } from '../action-definitions/essential';\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectCurrentFolder,\n    selectFolderChain,\n    selectInstanceId,\n    selectSelectedFiles,\n} from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { StartDragNDropPayload } from '../types/action-payloads.types';\nimport {\n    ChonkyDndDropResult,\n    ChonkyDndFileEntryItem,\n    ChonkyDndFileEntryType,\n} from '../types/dnd.types';\nimport { DndEntryState } from '../types/file-list.types';\nimport { FileData } from '../types/file.types';\nimport { useDragIfAvailable, useDropIfAvailable } from './dnd-fallback';\nimport { FileHelper } from './file-helper';\nimport { useInstanceVariable } from './hooks-helpers';\n\nexport const useFileDrag = (file: Nullable<FileData>) => {\n    // Prepare the dnd payload\n    const store = useStore();\n    const fileRef = useInstanceVariable(file);\n    const getDndStartPayload = useCallback<() => StartDragNDropPayload>(() => {\n        const reduxState = store.getState();\n        return {\n            sourceInstanceId: selectInstanceId(reduxState),\n            source: selectCurrentFolder(reduxState),\n            // We force non-null type below because by convention, if drag & drop for\n            // this file was possible, it must have been non-null.\n            draggedFile: fileRef.current!,\n            selectedFiles: selectSelectedFiles(reduxState),\n        };\n    }, [store, fileRef]);\n\n    // For drag source\n    const dispatch = useDispatch();\n    const canDrag = useCallback(() => FileHelper.isDraggable(fileRef.current), [\n        fileRef,\n    ]);\n    const onDragStart = useCallback((): ChonkyDndFileEntryItem => {\n        const item: ChonkyDndFileEntryItem = {\n            type: ChonkyDndFileEntryType,\n            payload: getDndStartPayload(),\n        };\n        dispatch(thunkRequestFileAction(ChonkyActions.StartDragNDrop, item.payload));\n        return item;\n    }, [dispatch, getDndStartPayload]);\n    const onDragEnd = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DragSourceMonitor) => {\n            const dropResult = monitor.getDropResult() as ChonkyDndDropResult;\n            if (\n                !FileHelper.isDraggable(item.payload.draggedFile) ||\n                !dropResult ||\n                !dropResult.dropTarget\n            ) {\n                return;\n            }\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.EndDragNDrop, {\n                    ...item.payload,\n                    destination: dropResult.dropTarget,\n                    copy: dropResult.dropEffect === 'copy',\n                })\n            );\n        },\n        [dispatch]\n    );\n\n    // Create refs for react-dnd hooks\n    const item = useMemo<ChonkyDndFileEntryItem>(\n        () => ({\n            type: ChonkyDndFileEntryType,\n            // Payload is actually added in `onDragStart`\n            payload: {} as StartDragNDropPayload,\n        }),\n        []\n    );\n    const collect = useCallback(monitor => ({ isDragging: monitor.isDragging() }), []);\n    const [{ isDragging: dndIsDragging }, drag, preview] = useDragIfAvailable({\n        item,\n        canDrag,\n        begin: onDragStart,\n        // @ts-ignore\n        end: onDragEnd,\n        collect,\n    });\n\n    useEffect(() => {\n        // Set drag preview to an empty image because `DnDFileListDragLayer` will\n        // provide its own preview.\n        preview(getEmptyImage(), { captureDraggingState: true });\n    }, [preview]);\n\n    return { dndIsDragging, drag };\n};\n\ninterface UseFileDropParams {\n    file: Nullable<FileData>;\n    forceDisableDrop?: boolean;\n    includeChildrenDrops?: boolean;\n}\n\nexport const useFileDrop = ({\n    file,\n    forceDisableDrop,\n    includeChildrenDrops,\n}: UseFileDropParams) => {\n    const folderChainRef = useInstanceVariable(useSelector(selectFolderChain));\n    const onDrop = useCallback(\n        (_item: ChonkyDndFileEntryItem, monitor) => {\n            if (!monitor.canDrop()) return;\n            const customDropResult: ExcludeKeys<ChonkyDndDropResult, 'dropEffect'> = {\n                dropTarget: file,\n            };\n            return customDropResult;\n        },\n        [file]\n    );\n    const canDrop = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DropTargetMonitor) => {\n            if (\n                forceDisableDrop ||\n                !FileHelper.isDroppable(file) ||\n                (!monitor.isOver({ shallow: true }) && !includeChildrenDrops)\n            ) {\n                return false;\n            }\n            const { source, draggedFile, selectedFiles } = item.payload;\n\n            // We prevent folders from being dropped into themselves. We also prevent\n            // any folder from current folder chain being moved - we can't move the\n            // folder that we are currently in.\n            const prohibitedFileIds = new Set<string>();\n            prohibitedFileIds.add(file.id);\n            folderChainRef.current.map(folder => {\n                if (folder) prohibitedFileIds.add(folder.id);\n            });\n            const movedFiles: FileData[] = [draggedFile, ...selectedFiles];\n            for (const currFile of movedFiles) {\n                if (prohibitedFileIds.has(currFile.id)) return false;\n            }\n\n            // Finally, prohibit files from being moved into their parent folder\n            // (which is a no-op).\n            return file.id !== source?.id;\n        },\n        [forceDisableDrop, file, includeChildrenDrops, folderChainRef]\n    );\n    const collect = useCallback(\n        monitor => ({\n            isOver: monitor.isOver(),\n            isOverCurrent: monitor.isOver({ shallow: true }),\n            canDrop: monitor.canDrop(),\n        }),\n        []\n    );\n    const [\n        { isOver: dndIsOver, isOverCurrent: dndIsOverCurrent, canDrop: dndCanDrop },\n        drop,\n    ] = useDropIfAvailable({\n        accept: ChonkyDndFileEntryType,\n        drop: onDrop,\n        canDrop,\n        collect,\n    });\n    return { dndIsOver, dndIsOverCurrent, dndCanDrop, drop };\n};\n\nexport const useFileEntryDnD = (file: Nullable<FileData>) => {\n    const { dndIsDragging, drag } = useFileDrag(file);\n    const { dndIsOver, dndCanDrop, drop } = useFileDrop({ file });\n    const dndState = useMemo<DndEntryState>(\n        () => ({\n            dndIsDragging,\n            dndIsOver,\n            dndCanDrop,\n        }),\n        [dndCanDrop, dndIsDragging, dndIsOver]\n    );\n    return {\n        drop,\n        drag,\n        dndState,\n    };\n};\n\nexport const useDndHoverOpen = (file: Nullable<FileData>, dndState: DndEntryState) => {\n    const dispatch = useDispatch();\n    const currentFolderRef = useInstanceVariable(useSelector(selectCurrentFolder));\n    useEffect(() => {\n        let timeout: Nullable<any> = null;\n        if (\n            dndState.dndIsOver &&\n            FileHelper.isDndOpenable(file) &&\n            file.id !== currentFolderRef.current?.id\n        ) {\n            timeout = setTimeout(\n                () =>\n                    dispatch(\n                        thunkRequestFileAction(EssentialActions.OpenFiles, {\n                            targetFile: file,\n                            files: [file],\n                        })\n                    ),\n                // TODO: Make this timeout configurable\n                1500\n            );\n        }\n        return () => {\n            if (timeout) clearTimeout(timeout);\n        };\n    }, [dispatch, file, dndState.dndIsOver, currentFolderRef]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface TextPlaceholderProps {\n    minLength: number;\n    maxLength: number;\n}\n\nconst getRandomInt = (min: number, max: number) => {\n    return min + Math.floor(Math.random() * Math.floor(max - min));\n};\nexport const TextPlaceholder: React.FC<TextPlaceholderProps> = React.memo(props => {\n    const { minLength, maxLength } = props;\n\n    const placeholderLength = getRandomInt(minLength, maxLength);\n    const whitespace = '&nbsp;'.repeat(placeholderLength);\n\n    const classes = useStyles();\n    return (\n        <span\n            className={classes.textPlaceholder}\n            dangerouslySetInnerHTML={{ __html: whitespace }}\n        />\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(() => ({\n    '@keyframes loading-placeholder': {\n        '0%': { opacity: 0.2 },\n        '50%': { opacity: 0.4 },\n        '100%': { opacity: 0.2 },\n    },\n    textPlaceholder: {\n        animationName: '$loading-placeholder',\n        animationIterationCount: 'infinite',\n        animationTimingFunction: 'linear',\n        animationDuration: '1.5s',\n        backgroundColor: '#ccc',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        borderRadius: 4,\n        maxWidth: '40%',\n        minWidth: 20,\n    },\n}));\n","import React, {\n    HTMLProps, useCallback, useContext, useEffect, useMemo, useRef, useState\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectThumbnailGenerator } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { ChonkyIconContext, ColorsDark, ColorsLight, useIconData } from '../../util/icon-helper';\nimport { Logger } from '../../util/logger';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { KeyboardClickEvent, MouseClickEvent } from '../internal/ClickableWrapper';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const useFileEntryHtmlProps = (file: Nullable<FileData>): HTMLProps<HTMLDivElement> => {\n    return useMemo(() => {\n        const dataProps: { [prop: string]: Undefinable<string> } = {\n            'data-test-id': 'file-entry',\n            'data-chonky-file-id': file ? file.id : undefined,\n        };\n\n        return {\n            role: 'listitem',\n            ...dataProps,\n        };\n    }, [file]);\n};\n\nexport const useFileEntryState = (file: Nullable<FileData>, selected: boolean, focused: boolean) => {\n    const iconData = useIconData(file);\n    const { thumbnailUrl, thumbnailLoading } = useThumbnailUrl(file);\n\n    return useMemo<FileEntryState>(() => {\n        const fileColor = thumbnailUrl ? ColorsDark[iconData.colorCode] : ColorsLight[iconData.colorCode];\n        const iconSpin = thumbnailLoading || !file;\n        const icon = thumbnailLoading ? ChonkyIconName.loading : iconData.icon;\n\n        return {\n            childrenCount: FileHelper.getChildrenCount(file),\n            icon: file && file.icon !== undefined ? file.icon : icon,\n            iconSpin: iconSpin,\n            thumbnailUrl: thumbnailUrl,\n            color: file && file.color !== undefined ? file.color : fileColor,\n            selected: selected,\n            focused: !!focused,\n        };\n    }, [file, focused, iconData, selected, thumbnailLoading, thumbnailUrl]);\n};\n\nexport const useDndIcon = (dndState: DndEntryState) => {\n    let dndIconName: Nullable<ChonkyIconName> = null;\n    if (dndState.dndIsOver) {\n        const showDropIcon = dndState.dndCanDrop;\n        dndIconName = showDropIcon ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop;\n    } else if (dndState.dndIsDragging) {\n        dndIconName = ChonkyIconName.dndDragging;\n    }\n\n    return dndIconName;\n};\n\nexport const useModifierIconComponents = (file: Nullable<FileData>) => {\n    const modifierIcons: ChonkyIconName[] = useMemo(() => {\n        const modifierIcons: ChonkyIconName[] = [];\n        if (FileHelper.isHidden(file)) modifierIcons.push(ChonkyIconName.hidden);\n        if (FileHelper.isSymlink(file)) modifierIcons.push(ChonkyIconName.symlink);\n        if (FileHelper.isEncrypted(file)) modifierIcons.push(ChonkyIconName.lock);\n        return modifierIcons;\n    }, [file]);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const modifierIconComponents = useMemo(\n        () => modifierIcons.map((icon, index) => <ChonkyIcon key={`file-modifier-${index}`} icon={icon} />),\n        // For some reason ESLint marks `ChonkyIcon` as an unnecessary dependency,\n        // but we expect it can change at runtime so we disable the check.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [ChonkyIcon, modifierIcons]\n    );\n    return modifierIconComponents;\n};\n\nconst _extname = (fileName: string) => {\n    const parts = fileName.split('.');\n    if (parts.length) {\n        return `.${parts[parts.length - 1]}`;\n    }\n    return '';\n};\n\nexport const useFileNameComponent = (file: Nullable<FileData>) => {\n    return useMemo(() => {\n        if (!file) return <TextPlaceholder minLength={15} maxLength={20} />;\n\n        let name;\n        let extension = null;\n\n        const isDir = FileHelper.isDirectory(file);\n        if (isDir) {\n            name = file.name;\n        } else {\n            extension = file.ext ?? _extname(file.name);\n            name = file.name.substr(0, file.name.length - extension.length);\n        }\n\n        return (\n            <>\n                {name}\n                {extension && <span className=\"chonky-file-entry-description-title-extension\">{extension}</span>}\n            </>\n        );\n    }, [file]);\n};\n\nexport const useThumbnailUrl = (file: Nullable<FileData>) => {\n    const thumbnailGenerator = useSelector(selectThumbnailGenerator);\n    const [thumbnailUrl, setThumbnailUrl] = useState<Nullable<string>>(null);\n    const [thumbnailLoading, setThumbnailLoading] = useState<boolean>(false);\n    const loadingAttempts = useRef(0);\n\n    useEffect(() => {\n        let loadingCancelled = false;\n\n        if (file) {\n            if (thumbnailGenerator) {\n                if (loadingAttempts.current === 0) {\n                    setThumbnailLoading(true);\n                }\n                loadingAttempts.current++;\n                Promise.resolve()\n                    .then(() => thumbnailGenerator(file))\n                    .then((thumbnailUrl: any) => {\n                        if (loadingCancelled) return;\n                        setThumbnailLoading(false);\n\n                        if (thumbnailUrl && typeof thumbnailUrl === 'string') {\n                            setThumbnailUrl(thumbnailUrl);\n                        }\n                    })\n                    .catch(error => {\n                        if (!loadingCancelled) setThumbnailLoading(false);\n                        Logger.error(`User-defined \"thumbnailGenerator\" handler threw an error: ${error.message}`);\n                    });\n            } else if (file.thumbnailUrl) {\n                setThumbnailUrl(file.thumbnailUrl);\n            }\n        }\n\n        return () => {\n            loadingCancelled = true;\n        };\n    }, [file, setThumbnailUrl, setThumbnailLoading, thumbnailGenerator]);\n\n    return { thumbnailUrl, thumbnailLoading };\n};\n\nexport const useFileClickHandlers = (file: Nullable<FileData>, displayIndex: number) => {\n    const dispatch = useDispatch();\n\n    // Prepare base handlers\n    const onMouseClick = useCallback(\n        (event: MouseClickEvent, clickType: 'single' | 'double') => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.MouseClickFile, {\n                    clickType,\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n    const onKeyboardClick = useCallback(\n        (event: KeyboardClickEvent) => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.KeyboardClickFile, {\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    enterKey: event.enterKey,\n                    spaceKey: event.spaceKey,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n\n    // Prepare single/double click handlers\n    const onSingleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'single'), [onMouseClick]);\n    const onDoubleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'double'), [onMouseClick]);\n\n    return {\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n    };\n};\n","import { MaybePromise, Nullable } from 'tsdef';\n\nimport { FileActionState } from './action-handler.types';\nimport { FileViewConfig } from './file-view.types';\nimport { FileFilter, FileMap } from './file.types';\nimport { ChonkyIconName } from './icons.types';\nimport { ChonkyDispatch, RootState } from './redux.types';\nimport { FileSortKeySelector } from './sort.types';\n\nexport interface FileAction {\n    /**\n     * Unique file action ID. If you set the action ID to one of the built-in Chonky\n     * action action IDs, you custom action definition will override the built-in\n     * definition.\n     */\n    id: string;\n    /**\n     * When set to `true`, the action will only be active (dispatchable) when user\n     * selects one or more files. If `fileFilter` is defined, it will be applied to\n     * selection before checking if its empty.\n     */\n    requiresSelection?: boolean; // Requires selection of 1+ files\n    /**\n     * A predicate that determines whether a file should be included in the selection\n     * for this action.\n     */\n    fileFilter?: FileFilter;\n    /**\n     * List of hotkeys that should trigger this action, defined using `hotkey-js`\n     * notation.\n     * @see https://www.npmjs.com/package/hotkeys-js\n     */\n    hotkeys?: string[] | readonly string[];\n    /**\n     * When button is defined and `toolbar` or `contextMenu` is set to `true`, a\n     * button will be added to the relevant UI component. Clicking on this button\n     * will active this action. The appearance of the button will change based on\n     * the action definition and the current Chonky state.\n     */\n    button?: FileActionButton;\n    /**\n     * When `sortKeySelector` is specified, the action becomes a sorting toggle. When\n     * this action is activated, it will sort files using the key selector, toggling\n     * between Ascending and Descending orders.\n     */\n    sortKeySelector?: FileSortKeySelector;\n    /**\n     * When `fileViewConfig` is specified, triggering this action will apply the\n     * provided config to Chonky's file view.\n     */\n    fileViewConfig?: FileViewConfig;\n    /**\n     * When `option` is specified, the action becomes an option toggle. When the action\n     * is activated, the boolean value of the option will be toggled.\n     */\n    option?: FileActionOption;\n    /**\n     * When selection transform is defined, activating this action will update the file\n     * selection. If the transform function returns `null`, selection will be left\n     * untouched.\n     */\n    selectionTransform?: FileSelectionTransform;\n    /**\n     * When effect is defined, it will be called right before dispatching the action to\n     * the user defined action handler. If the effect function returns a promise, Chonky\n     * will wait for the promise to resolve or fail before dispatching the action to the\n     * handler. If this function returns `true`, the file action will NOT be dispatched\n     * the the handler.\n     */\n    effect?: FileActionEffect;\n    /**\n     * When customVisibility is defined, it will change the display state of the file action\n     * The function must return the visibility as one of the CustomVisibilityState values:\n     *  - Hidden\n     *  - Disabled\n     *  - Default\n     *  - Active\n     */\n    customVisibility?: () => CustomVisibilityState;\n    /**\n     * Field used to infer the type of action payload. It is used solely for Typescript\n     * type inference and action validation.\n     */\n    __payloadType?: any;\n    /**\n     * Field used to infer the type of extra state for this action. It is used solely\n     * for Typescript type inference and action validation.\n     */\n    __extraStateType?: any;\n}\n\nexport interface FileActionButton {\n    name: string; // Button name\n    toolbar?: boolean; // Whether to show the button in the toolbar\n    contextMenu?: boolean; // Whether to show the button in the context menu\n    group?: string; // Button group (dropdown in toolbar or section in context menu)\n    tooltip?: string; // Help tooltip text\n    icon?: ChonkyIconName | string | any; // Icon name\n    iconOnly?: boolean; // Whether to only display the icon\n}\n\nexport interface FileActionOption {\n    id: string; // Unique option ID\n    defaultValue: boolean; // Whether the option is enabled by default (required)\n}\n\nexport type FileSelectionTransform = (data: {\n    prevSelection: Set<string>;\n    fileIds: ReadonlyArray<string>;\n    fileMap: Readonly<FileMap>;\n    hiddenFileIds: Set<string>;\n}) => Nullable<Set<string>>;\n\nexport type FileActionEffect<Action extends FileAction = any> = (data: {\n    action: Action;\n    payload: Action['__payloadType'];\n    state: FileActionState<{}>; // extra state is empty on purpose\n    reduxDispatch: ChonkyDispatch;\n    getReduxState: () => RootState;\n}) => MaybePromise<undefined | boolean | void>;\n\nexport type FileActionMap = { [actonId: string]: FileAction };\n\nexport enum CustomVisibilityState {\n    Hidden, \n    Disabled, \n    Default,\n    Active\n};\n","import { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectFileActionData,\n    selectFileViewConfig,\n    selectOptionValue,\n    selectParentFolder,\n    selectSelectedFilesForActionCount,\n    selectSortActionId,\n    selectSortOrder,\n} from '../redux/selectors';\nimport { useParamSelector } from '../redux/store';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { CustomVisibilityState } from '../types/action.types';\nimport { SortOrder } from '../types/sort.types';\nimport { FileHelper } from './file-helper';\n\nexport const useFileActionTrigger = (fileActionId: string) => {\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n    return useCallback(() => dispatch(thunkRequestFileAction(fileAction, undefined)), [\n        dispatch,\n        fileAction,\n    ]);\n};\n\nexport const useFileActionProps = (\n    fileActionId: string\n): { icon: Nullable<ChonkyIconName | string>; active: boolean; disabled: boolean } => {\n    const parentFolder = useSelector(selectParentFolder);\n    const fileViewConfig = useSelector(selectFileViewConfig);\n\n    const sortActionId = useSelector(selectSortActionId);\n    const sortOrder = useSelector(selectSortOrder);\n\n    const action = useParamSelector(selectFileActionData, fileActionId);\n    // @ts-ignore\n    const optionValue = useParamSelector(selectOptionValue, action?.option?.id);\n\n    const actionSelectionSize = useParamSelector(\n        selectSelectedFilesForActionCount,\n        fileActionId\n    );\n\n    const actionSelectionEmpty = actionSelectionSize === 0;\n\n    return useMemo(() => {\n        if (!action) return { icon: null, active: false, disabled: true };\n\n        let icon = action.button?.icon ?? null;\n        if (action.sortKeySelector) {\n            if (sortActionId === action.id) {\n                if (sortOrder === SortOrder.ASC) {\n                    icon = ChonkyIconName.sortAsc;\n                } else {\n                    icon = ChonkyIconName.sortDesc;\n                }\n            } else {\n                icon = ChonkyIconName.placeholder;\n            }\n        } else if (action.option) {\n            if (optionValue) {\n                icon = ChonkyIconName.toggleOn;\n            } else {\n                icon = ChonkyIconName.toggleOff;\n            }\n        }\n\n        const isSortButtonAndCurrentSort = action.id === sortActionId;\n        const isFileViewButtonAndCurrentView = action.fileViewConfig === fileViewConfig;\n        const isOptionAndEnabled = action.option ? !!optionValue : false;\n\n        let customDisabled = false;\n        let customActive = false;\n        if (action.customVisibility !== undefined) {\n            customDisabled = action.customVisibility() === CustomVisibilityState.Disabled;\n            customActive = action.customVisibility() === CustomVisibilityState.Active;\n        }\n        const active =\n            isSortButtonAndCurrentSort ||\n            isFileViewButtonAndCurrentView ||\n            isOptionAndEnabled ||\n            customActive;\n        \n        let disabled: boolean = (!!action.requiresSelection && actionSelectionEmpty) || customDisabled;\n\n        if (action.id === ChonkyActions.OpenParentFolder.id) {\n            // We treat `open_parent_folder` file action as a special case as it\n            // requires the parent folder to be present to work...\n            disabled = disabled || !FileHelper.isOpenable(parentFolder);\n        }\n\n        return { icon, active, disabled };\n    }, [\n        parentFolder,\n        fileViewConfig,\n        sortActionId,\n        sortOrder,\n        action,\n        optionValue,\n        actionSelectionEmpty,\n    ]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Button from '@material-ui/core/Button';\nimport React, { useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarButtonProps {\n    className?: string;\n    text: string;\n    tooltip?: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    iconOnly?: boolean;\n    onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n    disabled?: boolean;\n    dropdown?: boolean;\n}\n\nexport const ToolbarButton: React.FC<ToolbarButtonProps> = React.memo(props => {\n    const {\n        className: externalClassName,\n        text,\n        tooltip,\n        active,\n        icon,\n        iconOnly,\n        onClick,\n        disabled,\n        dropdown,\n    } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const iconComponent =\n        icon || iconOnly ? (\n            <div className={iconOnly ? '' : classes.iconWithText}>\n                <ChonkyIcon\n                    icon={icon ? icon : ChonkyIconName.fallbackIcon}\n                    fixedWidth={true}\n                />\n            </div>\n        ) : null;\n\n    const className = c({\n        [externalClassName ?? '']: true,\n        [classes.baseButton]: true,\n        [classes.iconOnlyButton]: iconOnly,\n        [classes.activeButton]: !!active,\n    });\n    return (\n        <Button\n            className={className}\n            onClick={onClick}\n            title={tooltip ? tooltip : text}\n            disabled={disabled || !onClick}\n        >\n            {iconComponent}\n            {text && !iconOnly && <span>{text}</span>}\n            {dropdown && (\n                <div className={classes.iconDropdown}>\n                    <ChonkyIcon\n                        icon={icon ? icon : ChonkyIconName.dropdown}\n                        fixedWidth={true}\n                    />\n                </div>\n            )}\n        </Button>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        textTransform: important('none'),\n        letterSpacing: important(0),\n        minWidth: important('auto'),\n        lineHeight: theme.toolbar.lineHeight,\n        height: theme.toolbar.size,\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    iconWithText: {\n        marginRight: 8,\n    },\n    iconOnlyButton: {\n        width: theme.toolbar.size,\n        textAlign: 'center',\n    },\n    iconDropdown: {\n        fontSize: '0.7em',\n        marginLeft: 2,\n        marginTop: 1,\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarButtonProps {\n    fileActionId: string;\n}\n\nexport const SmartToolbarButton: React.FC<SmartToolbarButtonProps> = React.memo(\n    props => {\n        const { fileActionId } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName, buttonTooltip } = useLocalizedFileActionStrings(action);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarButton\n                text={buttonName}\n                tooltip={buttonTooltip}\n                icon={icon}\n                iconOnly={button.iconOnly}\n                active={active}\n                onClick={triggerAction}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDndHoverOpen, useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from '../file-list/FileEntry-hooks';\nimport { FolderChainItem } from './FileNavbar-hooks';\nimport { ToolbarButton } from './ToolbarButton';\n\nexport interface FolderChainButtonProps {\n    first: boolean;\n    current: boolean;\n    item: FolderChainItem;\n}\n\nexport const FolderChainButton: React.FC<FolderChainButtonProps> = React.memo(\n    ({ first, current, item }) => {\n        const { file, disabled, onClick } = item;\n        const { dndIsOver, dndCanDrop, drop } = useFileDrop({\n            file,\n            forceDisableDrop: !file || current,\n        });\n        const dndState = useMemo<DndEntryState>(\n            () => ({\n                dndIsOver,\n                dndCanDrop,\n                dndIsDragging: false,\n            }),\n            [dndCanDrop, dndIsOver]\n        );\n        useDndHoverOpen(file, dndState);\n        const dndIconName = useDndIcon(dndState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const classes = useStyles(dndState);\n        const className = c({\n            [classes.baseBreadcrumb]: true,\n            [classes.disabledBreadcrumb]: disabled,\n            [classes.currentBreadcrumb]: current,\n        });\n        const text = file ? file.name : 'Loading...';\n        const icon =\n            first && file?.folderChainIcon === undefined\n                ? ChonkyIconName.folder\n                : file?.folderChainIcon;\n\n        return (\n            <div className={classes.buttonContainer} ref={file ? drop : null}>\n                {file && dndIconName && (\n                    <div className={classes.dndIndicator}>\n                        <ChonkyIcon icon={dndIconName} fixedWidth={true} />\n                    </div>\n                )}\n                <ToolbarButton\n                    icon={icon}\n                    className={className}\n                    text={text}\n                    disabled={disabled}\n                    onClick={onClick}\n                />\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    buttonContainer: {\n        position: 'relative',\n    },\n    baseBreadcrumb: {\n        color: (dndState: DndEntryState) => {\n            let color = theme.palette.text.primary;\n            if (dndState.dndIsOver) {\n                color = dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor;\n            }\n            return important(color);\n        },\n    },\n    disabledBreadcrumb: {\n        // Constant function here is on purpose. Without the function, the color here\n        // does not override the `baseBreadcrumb` color from above.\n        color: () => important(theme.palette.text.disabled),\n    },\n    currentBreadcrumb: {\n        textDecoration: important('underline'),\n    },\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor,\n        backgroundColor: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask,\n        lineHeight: `calc(${theme.toolbar.lineHeight} - 6px)`,\n        transform: 'translateX(-50%) translateY(-50%)',\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 6,\n        width: theme.toolbar.size - 6,\n        boxSizing: 'border-box',\n        position: 'absolute',\n        textAlign: 'center',\n        left: '50%',\n        top: '50%',\n        zIndex: 5,\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useFolderChainItems } from './FileNavbar-hooks';\nimport { FolderChainButton } from './FolderChainButton';\nimport { SmartToolbarButton } from './ToolbarButton';\n\nexport interface FileNavbarProps {}\n\nexport const FileNavbar: React.FC<FileNavbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const folderChainItems = useFolderChainItems();\n\n    const folderChainComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < folderChainItems.length; ++i) {\n            const key = `folder-chain-${i}`;\n            const component = (\n                <FolderChainButton\n                    key={key}\n                    first={i === 0}\n                    current={i === folderChainItems.length - 1}\n                    item={folderChainItems[i]}\n                />\n            );\n            components.push(component);\n        }\n        return components;\n    }, [folderChainItems]);\n\n    return (\n        <Box className={classes.navbarWrapper}>\n            <Box className={classes.navbarContainer}>\n                <SmartToolbarButton fileActionId={ChonkyActions.OpenParentFolder.id} />\n                <Breadcrumbs\n                    className={classes.navbarBreadcrumbs}\n                    classes={{ separator: classes.separator }}\n                >\n                    {folderChainComponents}\n                </Breadcrumbs>\n            </Box>\n        </Box>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    navbarWrapper: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n    },\n    navbarContainer: {\n        display: 'flex',\n    },\n    upDirectoryButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        height: theme.toolbar.size,\n        width: theme.toolbar.size,\n        padding: '0px !important',\n    },\n    navbarBreadcrumbs: {\n        fontSize: important(theme.toolbar.fontSize),\n        flexGrow: 100,\n    },\n    separator: {\n        marginRight: important(4),\n        marginLeft: important(4),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport React, { useCallback, useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarDropdownButtonProps {\n    text: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    onClick?: () => void;\n    disabled?: boolean;\n}\n\nexport const ToolbarDropdownButton = React.forwardRef(\n    (props: ToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { text, active, icon, onClick, disabled } = props;\n        const classes = useStyles();\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const className = c({\n            [classes.baseButton]: true,\n            [classes.activeButton]: active,\n        });\n        return (\n            <MenuItem\n                ref={ref}\n                className={className}\n                onClick={onClick}\n                disabled={disabled}\n            >\n                {icon && (\n                    <ListItemIcon className={classes.icon}>\n                        <ChonkyIcon icon={icon} fixedWidth={true} />\n                    </ListItemIcon>\n                )}\n                <ListItemText primaryTypographyProps={{ className: classes.text }}>\n                    {text}\n                </ListItemText>\n            </MenuItem>\n        );\n    }\n);\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        height: important(theme.toolbar.size),\n        minHeight: important('auto'),\n        minWidth: important('auto'),\n        padding: important(20),\n    },\n    icon: {\n        fontSize: important(theme.toolbar.fontSize),\n        minWidth: important('auto'),\n        color: important('inherit'),\n        marginRight: 8,\n    },\n    text: {\n        fontSize: important(theme.toolbar.fontSize),\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarDropdownButtonProps {\n    fileActionId: string;\n    onClickFollowUp?: () => void;\n}\n\nexport const SmartToolbarDropdownButton = React.forwardRef(\n    (props: SmartToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { fileActionId, onClickFollowUp } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName } = useLocalizedFileActionStrings(action);\n\n        // Combine external click handler with internal one\n        const handleClick = useCallback(() => {\n            triggerAction();\n            if (onClickFollowUp) onClickFollowUp();\n        }, [onClickFollowUp, triggerAction]);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarDropdownButton\n                ref={ref}\n                text={buttonName}\n                icon={icon}\n                onClick={handleClick}\n                active={active}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Menu from '@material-ui/core/Menu';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { FileActionGroup } from '../../types/action-menus.types';\nimport { useLocalizedFileActionGroup } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { ToolbarButton } from './ToolbarButton';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport type ToolbarDropdownProps = FileActionGroup;\n\nexport const ToolbarDropdown: React.FC<ToolbarDropdownProps> = React.memo(props => {\n    const { name, fileActionIds } = props;\n    const [anchor, setAnchor] = React.useState<null | HTMLElement>(null);\n\n    const handleClick = useCallback(\n        (event: React.MouseEvent<HTMLButtonElement>) => setAnchor(event.currentTarget),\n        [setAnchor]\n    );\n    const handleClose = useCallback(() => setAnchor(null), [setAnchor]);\n\n    const menuItemComponents = useMemo(\n        () =>\n            fileActionIds.map(id => (\n                <SmartToolbarDropdownButton\n                    key={`menu-item-${id}`}\n                    fileActionId={id}\n                    onClickFollowUp={handleClose}\n                />\n            )),\n        [fileActionIds, handleClose]\n    );\n\n    const localizedName = useLocalizedFileActionGroup(name);\n    const classes = useStyles();\n    return (\n        <>\n            <ToolbarButton text={localizedName} onClick={handleClick} dropdown={true} />\n            <Menu\n                autoFocus\n                keepMounted\n                elevation={2}\n                anchorEl={anchor}\n                onClose={handleClose}\n                open={Boolean(anchor)}\n                transitionDuration={150}\n                classes={{ list: classes.dropdownList }}\n            >\n                {menuItemComponents}\n            </Menu>\n        </>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    dropdownList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport Typography from '@material-ui/core/Typography';\n\nimport { selectHiddenFileCount, selectors, selectSelectionSize } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarInfoProps {}\n\nexport const ToolbarInfo: React.FC<ToolbarInfoProps> = React.memo(() => {\n    const classes = useStyles();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const selectionSize = useSelector(selectSelectionSize);\n    const hiddenCount = useSelector(selectHiddenFileCount);\n\n    const intl = useIntl();\n    const fileCountString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'visibleFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {# items}\n                one {# item}\n                other {# items}\n            }`,\n        },\n        { fileCount: displayFileIds.length }\n    );\n    const selectedString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'selectedFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# selected}\n            }`,\n        },\n        { fileCount: selectionSize }\n    );\n    const hiddenString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'hiddenFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# hidden}\n            }`,\n        },\n        { fileCount: hiddenCount }\n    );\n\n    return (\n        <div className={classes.infoContainer}>\n            <Typography className={classes.infoText} variant=\"body1\">\n                {fileCountString}\n                {(selectedString || hiddenString) && (\n                    <span className={classes.extraInfoSpan}>\n                        (\n                        <span className={classes.selectionSizeText}>\n                            {selectedString}\n                        </span>\n                        {selectedString && hiddenString && ', '}\n                        <span className={classes.hiddenCountText}>{hiddenString}</span>)\n                    </span>\n                )}\n            </Typography>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    infoContainer: {\n        height: theme.toolbar.size,\n        display: 'flex',\n    },\n    infoText: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        fontSize: important(theme.toolbar.fontSize),\n        marginLeft: important(12),\n        height: theme.toolbar.size,\n    },\n    extraInfoSpan: {\n        marginRight: important(8),\n        marginLeft: important(8),\n        opacity: 0.8,\n    },\n    selectionSizeText: {\n        color: theme.colors.textActive,\n    },\n    hiddenCountText: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectSearchString } from '../../redux/selectors';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDebounce } from '../../util/hooks-helpers';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarSearchProps {}\n\nexport const ToolbarSearch: React.FC<ToolbarSearchProps> = React.memo(() => {\n    const intl = useIntl();\n    const searchPlaceholderString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.Toolbar, 'searchPlaceholder'),\n        defaultMessage: 'Search',\n    });\n\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const searchInputRef = useRef<HTMLInputElement>();\n\n    const dispatch = useDispatch();\n    const reduxSearchString = useSelector(selectSearchString);\n\n    const [localSearchString, setLocalSearchString] = useState(reduxSearchString);\n    const [debouncedLocalSearchString] = useDebounce(localSearchString, 300);\n    const [showLoadingIndicator, setShowLoadingIndicator] = useState(false);\n\n    useEffect(() => {\n        dispatch(\n            reduxActions.setFocusSearchInput(() => {\n                if (searchInputRef.current) searchInputRef.current.focus();\n            })\n        );\n        return () => {\n            dispatch(reduxActions.setFocusSearchInput(null));\n        };\n    }, [dispatch]);\n\n    useEffect(() => {\n        setShowLoadingIndicator(false);\n        dispatch(reduxActions.setSearchString(debouncedLocalSearchString));\n    }, [debouncedLocalSearchString, dispatch]);\n\n    const handleChange = useCallback((event: React.FormEvent<HTMLInputElement>) => {\n        setShowLoadingIndicator(true);\n        setLocalSearchString(event.currentTarget.value);\n    }, []);\n    const handleKeyUp = useCallback(\n        (event: React.KeyboardEvent<HTMLInputElement>) => {\n            // Remove focus from the search input field when user presses escape.\n            // Note: We use KeyUp instead of KeyPress because some browser plugins can\n            //       intercept KeyPress events with Escape key.\n            //       @see https://stackoverflow.com/a/37461974\n            if (event.key === 'Escape') {\n                setLocalSearchString('');\n                dispatch(reduxActions.setSearchString(''));\n                if (searchInputRef.current) searchInputRef.current.blur();\n            }\n        },\n        [dispatch]\n    );\n\n    return (\n        <TextField\n            className={classes.searchFieldContainer}\n            size=\"small\"\n            variant=\"outlined\"\n            value={localSearchString}\n            placeholder={searchPlaceholderString}\n            onChange={handleChange as any}\n            inputRef={searchInputRef}\n            InputProps={{\n                onKeyUp: handleKeyUp,\n                startAdornment: (\n                    <InputAdornment className={classes.searchIcon} position=\"start\">\n                        <ChonkyIcon\n                            icon={showLoadingIndicator ? ChonkyIconName.loading : ChonkyIconName.search}\n                            spin={showLoadingIndicator}\n                        />\n                    </InputAdornment>\n                ),\n                className: classes.searchFieldInput,\n            }}\n            inputProps={{ className: classes.searchFieldInputInner }}\n        />\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    searchFieldContainer: {\n        height: theme.toolbar.size,\n        width: 150,\n    },\n    searchIcon: {\n        fontSize: '0.9em',\n        opacity: 0.75,\n    },\n    searchFieldInput: {\n        lineHeight: important(0),\n        padding: important(0),\n        margin: important(0),\n        fontSize: important(theme.toolbar.fontSize),\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 4,\n        paddingLeft: important(8),\n        marginTop: 2,\n    },\n    searchFieldInputInner: {\n        lineHeight: important(`${theme.toolbar.size - 4}px`),\n        fontSize: important(theme.toolbar.fontSize),\n        height: important(theme.toolbar.size - 4),\n        padding: important([0, 8, 0, 0]),\n        margin: important(0),\n        '-webkit-appearance': 'none',\n    },\n}));\n","import React, { ReactElement, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectToolbarItems } from '../../redux/selectors';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { SmartToolbarButton } from './ToolbarButton';\nimport { ToolbarDropdown } from './ToolbarDropdown';\nimport { ToolbarInfo } from './ToolbarInfo';\nimport { ToolbarSearch } from './ToolbarSearch';\n\nexport interface FileToolbarProps {}\n\nexport const FileToolbar: React.FC<FileToolbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const toolbarItems = useSelector(selectToolbarItems);\n\n    const toolbarItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < toolbarItems.length; ++i) {\n            const item = toolbarItems[i];\n\n            const key = `toolbar-item-${typeof item === 'string' ? item : item.name}`;\n            const component =\n                typeof item === 'string' ? (\n                    <SmartToolbarButton key={key} fileActionId={item} />\n                ) : (\n                    <ToolbarDropdown\n                        key={key}\n                        name={item.name}\n                        fileActionIds={item.fileActionIds}\n                    />\n                );\n            components.push(component);\n        }\n        return components;\n    }, [toolbarItems]);\n\n    return (\n        <div className={classes.toolbarWrapper}>\n            <div className={classes.toolbarContainer}>\n                <div className={classes.toolbarLeft}>\n                    <ToolbarSearch />\n                    <ToolbarInfo />\n                </div>\n                <div className={classes.toolbarRight}>{toolbarItemComponents}</div>\n            </div>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    toolbarWrapper: {},\n    toolbarContainer: {\n        flexWrap: 'wrap-reverse',\n        display: 'flex',\n    },\n    toolbarLeft: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        flexGrow: 10000,\n        display: 'flex',\n    },\n    toolbarLeftFiller: {\n        flexGrow: 10000,\n    },\n    toolbarRight: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        display: 'flex',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useContext } from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileListEmptyProps {\n    width: number;\n    height: number;\n}\n\nexport const FileListEmpty: React.FC<FileListEmptyProps> = props => {\n    const { width, height } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const style: CSSProperties = {\n        width,\n        height,\n    };\n\n    const intl = useIntl();\n    const emptyString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.FileList, 'nothingToShow'),\n        defaultMessage: 'Nothing to show',\n    });\n\n    return (\n        <div className={classes.fileListEmpty} style={style}>\n            <div className={classes.fileListEmptyContent}>\n                <ChonkyIcon icon={ChonkyIconName.folderOpen} />\n                &nbsp; {emptyString}\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileListEmpty: {\n        color: theme.palette.text.disabled,\n        position: 'relative',\n        textAlign: 'center',\n        fontSize: '1.2em',\n    },\n    fileListEmptyContent: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        left: '50%',\n        top: '50%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { selectDoubleClickDelay } from '../../redux/selectors';\nimport {\n    KeyboardClickEvent,\n    KeyboardClickEventHandler,\n    MouseClickEvent,\n    MouseClickEventHandler,\n} from './ClickableWrapper';\n\nexport const useClickHandler = (\n    onSingleClick: Nilable<MouseClickEventHandler>,\n    onDoubleClick: Nilable<MouseClickEventHandler>\n) => {\n    const doubleClickDelay = useSelector(selectDoubleClickDelay);\n\n    const counter = useRef({\n        clickCount: 0,\n        clickTimeout: null as Nullable<number>,\n    });\n\n    return useCallback(\n        (event: React.MouseEvent) => {\n            const mouseClickEvent: MouseClickEvent = {\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey || event.metaKey,\n                shiftKey: event.shiftKey,\n\n            };\n\n            counter.current.clickCount++;\n            if (counter.current.clickCount === 1) {\n                if (onSingleClick) {\n                    event.preventDefault();\n                    onSingleClick(mouseClickEvent);\n                }\n                counter.current.clickCount = 1;\n                // @ts-ignore\n                counter.current.clickTimeout = setTimeout(\n                    () => (counter.current.clickCount = 0),\n                    doubleClickDelay\n                );\n            } else if (counter.current.clickCount === 2) {\n                if (onDoubleClick) {\n                    event.preventDefault();\n                    onDoubleClick(mouseClickEvent);\n                }\n                if (typeof counter.current.clickTimeout === 'number') {\n                    clearTimeout(counter.current.clickTimeout);\n                    counter.current.clickTimeout = null;\n                    counter.current.clickCount = 0;\n                }\n            }\n        },\n        [doubleClickDelay, onSingleClick, onDoubleClick, counter]\n    );\n};\n\nexport const useKeyDownHandler = (onKeyboardClick?: KeyboardClickEventHandler) => {\n    return useCallback(\n        (event: React.KeyboardEvent) => {\n            if (!onKeyboardClick) return;\n\n            const keyboardClickEvent: KeyboardClickEvent = {\n                enterKey: event.nativeEvent.code === 'Enter',\n                spaceKey: event.nativeEvent.code === 'Space',\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey,\n                shiftKey: event.shiftKey,\n            };\n\n            if (keyboardClickEvent.spaceKey || keyboardClickEvent.enterKey) {\n                event.preventDefault();\n                event.stopPropagation();\n                onKeyboardClick(keyboardClickEvent);\n            }\n        },\n        [onKeyboardClick]\n    );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback } from 'react';\nimport { AnyObjectWithStringKeys } from 'tsdef';\n\nimport { useClickHandler, useKeyDownHandler } from './ClickableWrapper-hooks';\n\nexport interface MouseClickEvent {\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type MouseClickEventHandler = (event: MouseClickEvent) => void;\n\nexport interface KeyboardClickEvent {\n    enterKey: boolean;\n    spaceKey: boolean;\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type KeyboardClickEventHandler = (event: KeyboardClickEvent) => void;\n\nexport interface ClickableWrapperProps {\n    wrapperTag: any;\n    passthroughProps?: any;\n\n    onSingleClick?: MouseClickEventHandler;\n    onDoubleClick?: MouseClickEventHandler;\n    onKeyboardClick?: KeyboardClickEventHandler;\n    setFocused?: (focused: boolean) => void;\n}\n\nexport const ClickableWrapper: React.FC<ClickableWrapperProps> = props => {\n    const {\n        children,\n        wrapperTag: WrapperTag,\n        passthroughProps,\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n        setFocused,\n    } = props;\n\n    const handleClick = useClickHandler(onSingleClick, onDoubleClick);\n    const handleKeyDown = useKeyDownHandler(onKeyboardClick);\n\n    const compProps: AnyObjectWithStringKeys = {\n        onFocus: useCallback(() => setFocused && setFocused(true), [setFocused]),\n        onBlur: useCallback(() => setFocused && setFocused(false), [setFocused]),\n    };\n\n    if (onSingleClick || onDoubleClick || onKeyboardClick) {\n        compProps.onClick = handleClick;\n        compProps.onKeyDown = handleKeyDown;\n        compProps.tabIndex = 0;\n    }\n\n    const mergedProps = { ...compProps, ...passthroughProps };\n    return <WrapperTag {...mergedProps}>{children}</WrapperTag>;\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { FileData } from '../../types/file.types';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileNameComponent, useModifierIconComponents } from './FileEntry-hooks';\n\nexport interface FileEntryNameProps {\n    file: Nullable<FileData>;\n    className?: string;\n}\n\nexport const FileEntryName: React.FC<FileEntryNameProps> = React.memo(({ file, className }) => {\n    const modifierIconComponents = useModifierIconComponents(file);\n    const fileNameComponent = useFileNameComponent(file);\n\n    const classes = useStyles();\n    return (\n        <span className={className} title={file ? file.name : undefined}>\n            {modifierIconComponents.length > 0 && (\n                <span className={classes.modifierIcons}>{modifierIconComponents}</span>\n            )}\n            {fileNameComponent}\n        </span>\n    );\n});\nFileEntryName.displayName = 'FileEntryName';\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    modifierIcons: {\n        color: theme.palette.text.hint,\n        position: 'relative',\n        fontSize: '0.775em',\n        paddingRight: 5,\n    },\n}));\n","import React, { useContext } from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const CompactEntry: React.FC<FileEntryProps> = React.memo(\n    // @ts-ignore\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n\n        const classes = useStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={entryState.icon}\n                        spin={entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div className={classes.listFileEntryDescription}>\n                    <div\n                        className={classes.listFileEntryName}\n                        title={file ? file.name : undefined}\n                    >\n                        <FileEntryName file={file} />\n                    </div>\n                    <div className={classes.listFileEntryProperties}>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileModDateString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={5} maxLength={15} />\n                            )}\n                        </div>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileSizeString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={10} maxLength={20} />\n                            )}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"chonky-file-entry-outline\"></div>\n                <div className=\"chonky-file-entry-selection\"></div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        fontSize: theme.listFileEntry.fontSize,\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntryIcon: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: 'inset rgba(255, 255, 255, 0.5) 0 0 0 999px',\n        borderRadius: theme.listFileEntry.iconBorderRadius,\n        fontSize: theme.listFileEntry.iconFontSize,\n        color: '#fff',\n        padding: 8,\n    },\n    listFileEntryDescription: {\n        flexDirection: 'column',\n        display: 'flex',\n        flexGrow: 1,\n    },\n    listFileEntryName: {\n        padding: [0, 8, 4, 8],\n    },\n    listFileEntryProperties: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        flexDirection: 'row',\n        display: 'flex',\n    },\n    listFileEntryProperty: {\n        padding: [0, 8],\n        opacity: 0.4,\n    },\n}));\n","import React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { useDndHoverOpen, useFileEntryDnD } from '../../util/dnd';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileEntryProps {\n    file: Nullable<FileData>;\n    children: (dndState: DndEntryState) => React.ReactElement;\n}\n\nexport const DnDFileEntry = React.memo(({ file, children }: DnDFileEntryProps) => {\n    const { drop, drag, dndState } = useFileEntryDnD(file);\n\n    useDndHoverOpen(file, dndState);\n    const classes = useStyles();\n    return (\n        <div ref={drop} className={classes.fillParent}>\n            <div\n                ref={FileHelper.isDraggable(file) ? drag : null}\n                className={classes.fillParent}\n            >\n                {children(dndState)}\n            </div>\n        </div>\n    );\n});\n\nexport const useStyles = makeLocalChonkyStyles(() => ({\n    fillParent: {\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport c from 'classnames';\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileThumbnailProps {\n    className: string;\n    thumbnailUrl: Nullable<string>;\n}\n\nexport const FileThumbnail: React.FC<FileThumbnailProps> = React.memo(props => {\n    const { className, thumbnailUrl } = props;\n\n    const thumbnailStyle: React.CSSProperties = thumbnailUrl ? { backgroundImage: `url('${thumbnailUrl}')` } : {};\n\n    const classes = useStyles();\n    return <div className={c([className, classes.fileThumbnail])} style={thumbnailStyle} />;\n});\nFileThumbnail.displayName = 'FileThumbnail';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileThumbnail: {\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n        backgroundSize: 'contain',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from './FileEntry-hooks';\n\nexport interface DnDIndicatorProps {\n    className: string;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryDndIndicator: React.FC<DnDIndicatorProps> = React.memo(props => {\n    const { className: externalClassName, dndState } = props;\n    const dndIconName = useDndIcon(dndState);\n    const classes = useStyles(dndState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    if (!dndIconName) return null;\n    const className = c({\n        [classes.dndIndicator]: true,\n        [externalClassName]: true,\n    });\n    return (\n        <div className={className}>\n            <ChonkyIcon icon={dndIconName} />\n        </div>\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : '#000',\n        boxSizing: 'border-box',\n        position: 'absolute',\n        fontSize: '1.2em',\n        opacity: 0.6,\n        padding: 6,\n        '&:before': {\n            borderBottom: '50px solid transparent',\n            borderLeft: '50px solid #fff',\n            position: 'absolute',\n            content: '\"\"',\n            zIndex: -1,\n            left: 0,\n            top: 0,\n        },\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useEffect } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { FileThumbnail } from './FileThumbnail';\nimport { GridEntryDndIndicator } from './GridEntryDndIndicator';\n\nexport type FileEntryState = {\n    childrenCount: Nullable<number>;\n    color: string;\n    icon: ChonkyIconName | string;\n    thumbnailUrl: Nullable<string>;\n    iconSpin: boolean;\n    selected: boolean;\n    focused: boolean;\n};\n\nexport interface FileEntryPreviewProps {\n    className?: string;\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryPreviewFolder: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const folderClasses = useFolderStyles(entryState);\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const className = c({\n        [folderClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <div className={folderClasses.folderBackSideMid}>\n                <div className={folderClasses.folderBackSideTop} />\n                <div className={folderClasses.folderFrontSide}>\n                    <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n                    <div className={c([fileClasses.fileIcon, folderClasses.fileIcon])}>{entryState.childrenCount}</div>\n                    <div className={commonClasses.selectionIndicator}></div>\n                    <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n                </div>\n            </div>\n        </div>\n    );\n});\nGridEntryPreviewFolder.displayName = 'GridEntryPreviewFolder';\n\nconst useFolderStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    folderBackSideTop: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopLeftRadius: theme.gridFileEntry.borderRadius,\n        borderTopRightRadius: 10,\n        position: 'absolute',\n        right: '60%',\n        height: 13,\n        top: -10,\n        left: 0,\n        '&:after': {\n            borderRightColor: theme.palette.background.paper,\n            borderTopColor: theme.palette.background.paper,\n            borderBottomColor: 'transparent',\n            borderLeftColor: 'transparent',\n            borderWidth: [0, 15, 10, 0],\n            borderStyle: 'solid',\n            position: 'absolute',\n            display: 'block',\n            content: '\"\"',\n            right: 0,\n            top: 0,\n        },\n    },\n    folderBackSideMid: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopRightRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    folderFrontSide: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            if (state.selected) shadows.push('inset rgba(0, 153, 255, .65) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.folderFrontColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        overflow: 'hidden',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    fileIcon: {\n        fontSize: important(theme.gridFileEntry.childrenCountSize),\n    },\n}));\n\nexport const GridEntryPreviewFile: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const className = c({\n        [fileClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n            <div className={fileClasses.fileIcon}>\n                <ChonkyIcon icon={entryState.icon} spin={entryState.iconSpin} />\n            </div>\n            <div className={commonClasses.selectionIndicator}></div>\n            <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n        </div>\n    );\n});\nGridEntryPreviewFile.displayName = 'GridEntryPreviewFile';\n\nconst useFileStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.selected) shadows.push('inset rgba(0,153,255, .65) 0 0 0 3px');\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.fileColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    dndIndicator: {\n        zIndex: 14,\n    },\n    fileIcon: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        fontSize: theme.gridFileEntry.iconSize,\n        opacity: (state: FileEntryState) => (state.thumbnailUrl && !state.focused ? 0 : 1),\n        color: (state: FileEntryState) =>\n            state.focused ? theme.gridFileEntry.iconColorFocused : theme.gridFileEntry.iconColor,\n        position: 'absolute',\n        left: '50%',\n        zIndex: 12,\n        top: '50%',\n    },\n    thumbnail: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        zIndex: 6,\n        bottom: 5,\n        right: 5,\n        left: 5,\n        top: 5,\n    },\n}));\n\nexport const useCommonEntryStyles = makeLocalChonkyStyles(() => ({\n    selectionIndicator: {\n        display: (state: FileEntryState) => (state.selected ? 'block' : 'none'),\n        background:\n            'repeating-linear-gradient(' +\n            '45deg,' +\n            'rgba(0,153,255,.14),' +\n            'rgba(0,153,255,.14) 10px,' +\n            'rgba(0,153,255,.25) 0,' +\n            'rgba(0,153,255,.25) 20px' +\n            ')',\n        backgroundColor: 'rgba(0, 153, 255, .14)',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 10,\n    },\n    focusIndicator: {\n        display: (state: FileEntryState) => (state.focused ? 'block' : 'none'),\n        boxShadow: 'inset rgba(0, 0, 0, 1) 0 0 0 2px',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 11,\n    },\n}));\n","import React from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, GridEntryPreviewFile, GridEntryPreviewFolder } from './GridEntryPreview';\n\nexport const GridEntry: React.FC<FileEntryProps> = React.memo(({ file, selected, focused, dndState }) => {\n    const isDirectory = FileHelper.isDirectory(file);\n    const entryState = useFileEntryState(file, selected, focused);\n\n    const classes = useFileEntryStyles(entryState);\n    const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n    const entryClassName = c({\n        [classes.gridFileEntry]: true,\n    });\n    return (\n        <div className={entryClassName} {...fileEntryHtmlProps}>\n            {isDirectory ? (\n                <GridEntryPreviewFolder\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            ) : (\n                <GridEntryPreviewFile\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            )}\n            <div className={classes.gridFileEntryNameContainer}>\n                <FileEntryName className={classes.gridFileEntryName} file={file} />\n            </div>\n        </div>\n    );\n});\nGridEntry.displayName = 'GridEntry';\n\nconst useFileEntryStyles = makeLocalChonkyStyles(theme => ({\n    gridFileEntry: {\n        flexDirection: 'column',\n        display: 'flex',\n        height: '100%',\n    },\n    gridFileEntryPreview: {\n        flexGrow: 1,\n    },\n    gridFileEntryNameContainer: {\n        fontSize: theme.gridFileEntry.fontSize,\n        wordBreak: 'break-word',\n        textAlign: 'center',\n        paddingTop: 5,\n    },\n    gridFileEntryName: {\n        backgroundColor: (state: FileEntryState) => (state.selected ? 'rgba(0,153,255, .25)' : 'transparent'),\n        textDecoration: (state: FileEntryState) => (state.focused ? 'underline' : 'none'),\n        borderRadius: 3,\n        padding: [2, 4],\n    },\n}));\n","import React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport {\n    useDndIcon,\n    useFileEntryHtmlProps,\n    useFileEntryState,\n} from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, useCommonEntryStyles } from './GridEntryPreview';\n\ninterface StyleState {\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const ListEntry: React.FC<FileEntryProps> = React.memo(\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n        const dndIconName = useDndIcon(dndState);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n        const styleState = useMemo<StyleState>(\n            () => ({\n                entryState,\n                dndState,\n            }),\n            [dndState, entryState]\n        );\n        const classes = useStyles(styleState);\n        const commonClasses = useCommonEntryStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={commonClasses.focusIndicator}></div>\n                <div\n                    className={c([\n                        commonClasses.selectionIndicator,\n                        classes.listFileEntrySelection,\n                    ])}\n                ></div>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={dndIconName ?? entryState.icon}\n                        spin={dndIconName ? false : entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div\n                    className={classes.listFileEntryName}\n                    title={file ? file.name : undefined}\n                >\n                    <FileEntryName file={file} />\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileModDateString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={5} maxLength={15} />\n                    )}\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileSizeString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={10} maxLength={20} />\n                    )}\n                </div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        boxShadow: `inset ${theme.palette.divider} 0 -1px 0`,\n        fontSize: theme.listFileEntry.fontSize,\n        color: ({ dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : 'inherit',\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntrySelection: {\n        opacity: 0.6,\n    },\n    listFileEntryIcon: {\n        color: ({ entryState, dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : entryState.color,\n        fontSize: theme.listFileEntry.iconFontSize,\n        boxSizing: 'border-box',\n        padding: [2, 4],\n        zIndex: 20,\n    },\n    listFileEntryName: {\n        textOverflow: 'ellipsis',\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '1 1 300px',\n        paddingLeft: 8,\n        zIndex: 20,\n    },\n    listFileEntryProperty: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '0 1 150px',\n        padding: [2, 8],\n        zIndex: 20,\n    },\n}));\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileData, selectIsDnDDisabled, selectIsFileSelected } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { ClickableWrapper, ClickableWrapperProps } from '../internal/ClickableWrapper';\nimport { CompactEntry } from './CompactEntry';\nimport { DnDFileEntry } from './DnDFileEntry';\nimport { useFileClickHandlers } from './FileEntry-hooks';\nimport { GridEntry } from './GridEntry';\nimport { ListEntry } from './ListEntry';\n\nexport interface SmartFileEntryProps {\n    fileId: Nullable<string>;\n    displayIndex: number;\n    fileViewMode: FileViewMode;\n}\n\nconst disabledDndState: DndEntryState = {\n    dndIsDragging: false,\n    dndIsOver: false,\n    dndCanDrop: false,\n};\n\nexport const SmartFileEntry: React.FC<SmartFileEntryProps> = React.memo(({ fileId, displayIndex, fileViewMode }) => {\n    const classes = useStyles();\n\n    // Basic properties\n    const file = useParamSelector(selectFileData, fileId);\n    const selected = useParamSelector(selectIsFileSelected, fileId);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n\n    // Clickable wrapper properties\n    const fileClickHandlers = useFileClickHandlers(file, displayIndex);\n    const [focused, setFocused] = useState(false);\n    const clickableWrapperProps: ClickableWrapperProps = {\n        wrapperTag: 'div',\n        passthroughProps: { className: classes.fileEntryClickableWrapper },\n        ...(FileHelper.isClickable(file) ? fileClickHandlers : undefined),\n        setFocused,\n    };\n\n    // File entry properties\n    const fileEntryProps: Omit<FileEntryProps, 'dndState'> = {\n        file,\n        selected,\n        focused,\n    };\n\n    let EntryComponent: React.FC<FileEntryProps>;\n    if (fileViewMode === FileViewMode.List) EntryComponent = ListEntry;\n    else if (fileViewMode === FileViewMode.Compact) EntryComponent = CompactEntry;\n    else EntryComponent = GridEntry;\n\n    return dndDisabled ? (\n        <ClickableWrapper {...clickableWrapperProps}>\n            <EntryComponent {...fileEntryProps} dndState={disabledDndState} />\n        </ClickableWrapper>\n    ) : (\n        <DnDFileEntry file={file}>\n            {dndState => (\n                <ClickableWrapper {...clickableWrapperProps}>\n                    <EntryComponent {...fileEntryProps} dndState={dndState} />\n                </ClickableWrapper>\n            )}\n        </DnDFileEntry>\n    );\n});\nSmartFileEntry.displayName = 'SmartFileEntry';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileEntryClickableWrapper: {\n        // We disable default browser outline because Chonky provides its own outline\n        // (which doesn't compromise accessibility, hopefully)\n        outline: 'none !important',\n        position: 'relative',\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { VariableSizeGrid } from 'react-window';\n\nimport { ChonkyActions } from '../../action-definitions';\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewConfigGrid } from '../../types/file-view.types';\nimport { RootState } from '../../types/redux.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeGlobalChonkyStyles, useIsMobileBreakpoint } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListGridProps {\n    width: number;\n    height: number;\n}\n\ninterface GridConfig {\n    rowCount: number;\n    columnCount: number;\n    gutter: number;\n    rowHeight: number;\n    columnWidth: number;\n}\n\nexport const isMobileDevice = () => {\n    // noinspection JSDeprecatedSymbols\n    return typeof window.orientation !== 'undefined' || navigator.userAgent.indexOf('IEMobile') !== -1;\n};\n\nexport const getGridConfig = (\n    width: number,\n    fileCount: number,\n    viewConfig: FileViewConfigGrid,\n    isMobileBreakpoint: boolean\n): GridConfig => {\n    const gutter = isMobileBreakpoint ? 5 : 8;\n    const scrollbar = isMobileDevice() ? 0 : 18;\n\n    let columnCount: number;\n    let columnWidth: number;\n    if (isMobileBreakpoint) {\n        columnCount = 2;\n        columnWidth = (width - gutter - scrollbar) / columnCount;\n    } else {\n        columnWidth = viewConfig.entryWidth;\n        columnCount = Math.max(1, Math.floor((width - scrollbar) / (columnWidth + gutter)));\n    }\n\n    const rowCount = Math.ceil(fileCount / columnCount);\n\n    return {\n        rowCount,\n        columnCount,\n        gutter,\n        rowHeight: viewConfig.entryHeight,\n        columnWidth,\n    };\n};\n\nexport const GridContainer: React.FC<FileListGridProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig) as FileViewConfigGrid;\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const fileCount = useMemo(() => displayFileIds.length, [displayFileIds]);\n\n    const gridRef = useRef<VariableSizeGrid>();\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n\n    // Whenever the grid config changes at runtime, we call a method on the\n    // `VariableSizeGrid` handle to reset column width/row height cache.\n    // !!! Note that we deliberately update the `gridRef` firsts and update the React\n    //     state AFTER that. This is needed to avoid file entries jumping up/down.\n    const [gridConfig, setGridConfig] = useState(getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint));\n    const gridConfigRef = useRef(gridConfig);\n    useEffect(() => {\n        const oldConf = gridConfigRef.current;\n        const newConf = getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint);\n\n        gridConfigRef.current = newConf;\n        if (gridRef.current) {\n            if (oldConf.rowCount !== newConf.rowCount) {\n                gridRef.current.resetAfterRowIndex(Math.min(oldConf.rowCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnCount !== newConf.columnCount) {\n                gridRef.current.resetAfterColumnIndex(Math.min(oldConf.columnCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnWidth !== newConf.columnWidth) {\n                gridRef.current.resetAfterIndices({ columnIndex: 0, rowIndex: 0 });\n            }\n        }\n\n        setGridConfig(newConf);\n    }, [setGridConfig, gridConfigRef, isMobileBreakpoint, width, viewConfig, fileCount]);\n\n    const sizers = useMemo(() => {\n        const gc = gridConfigRef;\n        return {\n            getColumnWidth: (index: number) =>\n                gc.current.columnWidth! + (index === gc.current.columnCount - 1 ? 0 : gc.current.gutter),\n            getRowHeight: (index: number) =>\n                gc.current.rowHeight + (index === gc.current.rowCount - 1 ? 0 : gc.current.gutter),\n        };\n    }, [gridConfigRef]);\n\n    const displayFileIdsRef = useInstanceVariable(useSelector(selectors.getDisplayFileIds));\n    const getItemKey = useCallback(\n        (data: { columnIndex: number; rowIndex: number; data: any }) => {\n            const index = data.rowIndex * gridConfigRef.current.columnCount + data.columnIndex;\n\n            return displayFileIdsRef.current[index] ?? `loading-file-${index}`;\n        },\n        [gridConfigRef, displayFileIdsRef]\n    );\n\n    const cellRenderer = useCallback(\n        (data: { rowIndex: number; columnIndex: number; style: CSSProperties }) => {\n            const gc = gridConfigRef;\n            const index = data.rowIndex * gc.current.columnCount + data.columnIndex;\n            const fileId = displayFileIds[index];\n            if (displayFileIds[index] === undefined) return null;\n\n            const styleWithGutter: CSSProperties = {\n                ...data.style,\n                paddingRight: data.columnIndex === gc.current.columnCount - 1 ? 0 : gc.current.gutter,\n                paddingBottom: data.rowIndex === gc.current.rowCount - 1 ? 0 : gc.current.gutter,\n                boxSizing: 'border-box',\n            };\n\n            return (\n                <div style={styleWithGutter}>\n                    <SmartFileEntry fileId={fileId ?? null} displayIndex={index} fileViewMode={viewConfig.mode} />\n                </div>\n            );\n        },\n        [displayFileIds, viewConfig.mode]\n    );\n\n    const classes = useStyles();\n    const gridComponent = useMemo(() => {\n        return (\n            <VariableSizeGrid\n                ref={gridRef as any}\n                className={classes.gridContainer}\n                estimatedRowHeight={gridConfig.rowHeight + gridConfig.gutter}\n                rowHeight={sizers.getRowHeight}\n                estimatedColumnWidth={gridConfig.columnWidth + gridConfig.gutter}\n                columnWidth={sizers.getColumnWidth}\n                columnCount={gridConfig.columnCount}\n                height={height}\n                rowCount={gridConfig.rowCount}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {cellRenderer}\n            </VariableSizeGrid>\n        );\n    }, [\n        classes.gridContainer,\n        gridConfig.rowHeight,\n        gridConfig.gutter,\n        gridConfig.columnWidth,\n        gridConfig.columnCount,\n        gridConfig.rowCount,\n        sizers.getRowHeight,\n        sizers.getColumnWidth,\n        height,\n        width,\n        getItemKey,\n        cellRenderer,\n    ]);\n\n    return gridComponent;\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    gridContainer: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useMemo, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FixedSizeList } from 'react-window';\n\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListListProps {\n    width: number;\n    height: number;\n}\n\nexport const ListContainer: React.FC<FileListListProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const listRef = useRef<FixedSizeList>();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const displayFileIdsRef = useInstanceVariable(displayFileIds);\n    const getItemKey = useCallback(\n        (index: number) => displayFileIdsRef.current[index] ?? `loading-file-${index}`,\n        [displayFileIdsRef]\n    );\n\n    const classes = useStyles();\n    const listComponent = useMemo(() => {\n        // When entry size is null, we use List view\n        const rowRenderer = (data: { index: number; style: CSSProperties }) => {\n            return (\n                <div style={data.style}>\n                    <SmartFileEntry\n                        fileId={displayFileIds[data.index] ?? null}\n                        displayIndex={data.index}\n                        fileViewMode={FileViewMode.List}\n                    />\n                </div>\n            );\n        };\n\n        return (\n            <FixedSizeList\n                ref={listRef as any}\n                className={classes.listContainer}\n                itemSize={viewConfig.entryHeight}\n                height={height}\n                itemCount={displayFileIds.length}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {rowRenderer}\n            </FixedSizeList>\n        );\n    }, [\n        classes.listContainer,\n        viewConfig.entryHeight,\n        height,\n        displayFileIds,\n        width,\n        getItemKey,\n    ]);\n\n    return listComponent;\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listContainer: {\n        borderTop: `solid 1px ${theme.palette.divider}`,\n    },\n}));\n","import React, { UIEvent, useCallback, useContext, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectCurrentFolder, selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    c, getStripeGradient, makeGlobalChonkyStyles, makeLocalChonkyStyles\n} from '../../util/styles';\nimport { FileListEmpty } from './FileListEmpty';\nimport { GridContainer } from './GridContainer';\nimport { ListContainer } from './ListContainer';\n\nexport interface FileListProps {\n    onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n}\n\ninterface StyleState {\n    dndCanDrop: boolean;\n    dndIsOverCurrent: boolean;\n}\n\nexport const FileList: React.FC<FileListProps> = React.memo((props: FileListProps) => {\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const currentFolder = useSelector(selectCurrentFolder);\n    const { drop, dndCanDrop, dndIsOverCurrent } = useFileDrop({ file: currentFolder });\n    const styleState = useMemo<StyleState>(() => ({ dndCanDrop, dndIsOverCurrent }), [dndCanDrop, dndIsOverCurrent]);\n\n    const localClasses = useLocalStyles(styleState);\n    const classes = useStyles(viewConfig);\n    const { onScroll } = props;\n\n    // In Chonky v0.x, this field was user-configurable. In Chonky v1.x+, we hardcode\n    // this to `true` to simplify configuration. Users can just wrap Chonky in their\n    // own `div` if they want to have finer control over the height.\n    const fillParentContainer = true;\n\n    const listRenderer = useCallback(\n        ({ width, height }: { width: number; height: number }) => {\n            if (displayFileIds.length === 0) {\n                return <FileListEmpty width={width} height={viewConfig.entryHeight} />;\n            } else if (viewConfig.mode === FileViewMode.List) {\n                return <ListContainer width={width} height={height} />;\n            } else {\n                return <GridContainer width={width} height={height} />;\n            }\n        },\n        [displayFileIds, viewConfig]\n    );\n\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    return (\n        <div onScroll={onScroll} ref={drop} className={c([classes.fileListWrapper, localClasses.fileListWrapper])} role=\"list\">\n            <div className={localClasses.dndDropZone}>\n                <div className={localClasses.dndDropZoneIcon}>\n                    <ChonkyIcon icon={dndCanDrop ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop} />\n                </div>\n            </div>\n            <AutoSizer disableHeight={!fillParentContainer}>{listRenderer}</AutoSizer>\n        </div>\n    );\n});\nFileList.displayName = 'FileList';\n\nconst useLocalStyles = makeLocalChonkyStyles(theme => ({\n    fileListWrapper: {\n        minHeight: ChonkyActions.EnableGridView.fileViewConfig.entryHeight + 2,\n        background: (state: StyleState) =>\n            state.dndIsOverCurrent && state.dndCanDrop\n                ? state.dndCanDrop\n                    ? getStripeGradient(theme.dnd.fileListCanDropMaskOne, theme.dnd.fileListCanDropMaskTwo)\n                    : getStripeGradient(theme.dnd.fileListCannotDropMaskOne, theme.dnd.fileListCannotDropMaskTwo)\n                : 'none',\n    },\n    dndDropZone: {\n        display: (state: StyleState) =>\n            // When we cannot drop, we don't show an indicator at all\n            state.dndIsOverCurrent && state.dndCanDrop ? 'block' : 'none',\n        borderRadius: theme.gridFileEntry.borderRadius,\n        pointerEvents: 'none',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 2,\n    },\n    dndDropZoneIcon: {\n        backgroundColor: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask),\n        color: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor),\n        borderRadius: theme.gridFileEntry.borderRadius,\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        textAlign: 'center',\n        lineHeight: '60px',\n        fontSize: '2em',\n        left: '50%',\n        height: 60,\n        top: '50%',\n        width: 60,\n    },\n}));\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileListWrapper: {\n        height: '100%',\n        maxHeight: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { ReactElement, useEffect, useMemo } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Menu from '@material-ui/core/Menu';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuConfig, selectContextMenuItems } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuDismisser } from './FileContextMenu-hooks';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport interface FileContextMenuProps {}\n\nexport const FileContextMenu: React.FC<FileContextMenuProps> = React.memo(() => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(reduxActions.setContextMenuMounted(true));\n        return () => {\n            dispatch(reduxActions.setContextMenuMounted(false));\n        };\n    }, [dispatch]);\n\n    const intl = useIntl();\n    const browserMenuShortcutString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.FileContextMenu, 'browserMenuShortcut'),\n            defaultMessage: 'Browser menu: {shortcut}',\n        },\n        { shortcut: <strong>Alt + Right Click</strong> }\n    );\n\n    const contextMenuConfig = useSelector(selectContextMenuConfig);\n    const contextMenuItems = useSelector(selectContextMenuItems);\n\n    const hideContextMenu = useContextMenuDismisser();\n    const contextMenuItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < contextMenuItems.length; ++i) {\n            const item = contextMenuItems[i];\n\n            if (typeof item === 'string') {\n                components.push(\n                    <SmartToolbarDropdownButton\n                        key={`context-menu-item-${item}`}\n                        fileActionId={item}\n                        onClickFollowUp={hideContextMenu}\n                    />\n                );\n            } else {\n                item.fileActionIds.map(id =>\n                    components.push(\n                        <SmartToolbarDropdownButton\n                            key={`context-menu-item-${item.name}-${id}`}\n                            fileActionId={id}\n                            onClickFollowUp={hideContextMenu}\n                        />\n                    )\n                );\n            }\n        }\n        return components;\n    }, [contextMenuItems, hideContextMenu]);\n\n    const anchorPosition = useMemo(\n        () => (contextMenuConfig ? { top: contextMenuConfig.mouseY, left: contextMenuConfig.mouseX } : undefined),\n        [contextMenuConfig]\n    );\n\n    const classes = useStyles();\n    return (\n        <Menu\n            elevation={2}\n            disablePortal\n            onClose={hideContextMenu}\n            transitionDuration={150}\n            open={!!contextMenuConfig}\n            anchorPosition={anchorPosition}\n            anchorReference=\"anchorPosition\"\n            classes={{ list: classes.contextMenuList }}\n        >\n            {contextMenuItemComponents}\n            <ListSubheader component=\"div\" className={classes.browserMenuTooltip}>\n                {browserMenuShortcutString}\n            </ListSubheader>\n        </Menu>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    contextMenuList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    browserMenuTooltip: {\n        lineHeight: important('30px'),\n        fontSize: important('0.7em'),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { FileList } from '../file-list/FileList';\nimport { FileBrowser } from './FileBrowser';\nimport { FileContextMenu } from './FileContextMenu';\nimport { FileNavbar } from './FileNavbar';\nimport { FileToolbar } from './FileToolbar';\n\nexport const FullFileBrowser = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        const { onScroll } = props\n        return (\n            <FileBrowser ref={ref} {...props}>\n                <FileNavbar />\n                <FileToolbar />\n                <FileList onScroll={onScroll}/>\n                <FileContextMenu/>\n            </FileBrowser>\n        );\n    })\n);\nFullFileBrowser.displayName = 'FullFileBrowser';\n","/**\n *\n */\n\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { FileActionData } from '../types/action-handler.types';\nimport { FileAction } from '../types/action.types';\nimport { FileArray, FileData } from '../types/file.types';\nimport { FileHelper } from '../util/file-helper';\n\nexport interface CustomFileData extends FileData {\n    parentId?: string;\n    childrenIds?: string[];\n}\nexport interface CustomFileMap<FT extends CustomFileData> {\n    [fileId: string]: FT;\n}\nexport interface FileMapParams<FT extends CustomFileData> {\n    baseFileMap: CustomFileMap<FT>;\n    initialFolderId: string;\n}\n\nexport const useFolderChain = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n\n        const folderChain = [currentFolder];\n\n        let parentId = currentFolder.parentId;\n        while (parentId) {\n            const parentFile = fileMap[parentId];\n            if (parentFile) {\n                folderChain.unshift(parentFile);\n                parentId = parentFile.parentId;\n            } else {\n                break;\n            }\n        }\n\n        return folderChain;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFiles = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n        const childrenIds = currentFolder.childrenIds!;\n        const files = childrenIds.map((fileId: string) => fileMap[fileId]);\n        return files;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFileMapMethods = <FT extends CustomFileData>(\n    baseFileMap: CustomFileMap<FT>,\n    initialFolderId: string\n) => {\n    const [fileMap, setFileMap] = useState(baseFileMap);\n    const [currentFolderId, setCurrentFolderId] = useState(initialFolderId);\n    const resetFileMap = useCallback(() => {\n        setFileMap(baseFileMap);\n        setCurrentFolderId(initialFolderId);\n    }, [baseFileMap, initialFolderId]);\n    const moveFiles = useCallback(\n        (files: FT[], source: FT, destination: FT) =>\n            setFileMap(currentFileMap => {\n                const newFileMap = { ...currentFileMap };\n                const moveFileIds = new Set(files.map(f => f.id));\n\n                // Delete files from their source folder.\n                const newSourceChildrenIds = source.childrenIds!.filter(id => !moveFileIds.has(id));\n                newFileMap[source.id] = {\n                    ...source,\n                    childrenIds: newSourceChildrenIds,\n                    childrenCount: newSourceChildrenIds.length,\n                };\n\n                // Add the files to their destination folder.\n                const newDestinationChildrenIds = [...destination.childrenIds!, ...files.map(f => f.id)];\n                newFileMap[destination.id] = {\n                    ...destination,\n                    childrenIds: newDestinationChildrenIds,\n                    childrenCount: newDestinationChildrenIds.length,\n                };\n\n                // Finally, update the parent folder ID on the files from source folder\n                // ID to the destination folder ID.\n                files.forEach(file => {\n                    newFileMap[file.id] = {\n                        ...file,\n                        parentId: destination.id,\n                    };\n                });\n\n                return newFileMap;\n            }),\n        []\n    );\n\n    const methods = useMemo(\n        () => ({\n            setFileMap,\n            setCurrentFolderId,\n            resetFileMap,\n            moveFiles,\n        }),\n        [setFileMap, setCurrentFolderId, resetFileMap, moveFiles]\n    );\n    return {\n        fileMap,\n        currentFolderId,\n        methods,\n    };\n};\nexport type FileMethods = ReturnType<typeof useFileMapMethods>['methods'];\n\nexport const useFileActionHandler = (methods: FileMethods) => {\n    return useCallback(\n        (data: FileActionData<FileAction>) => {\n            if (data.id === ChonkyActions.OpenFiles.id) {\n                const { targetFile, files } = data.payload;\n                const fileToOpen = targetFile ?? files[0];\n                if (fileToOpen && FileHelper.isDirectory(fileToOpen)) {\n                    methods.setCurrentFolderId(fileToOpen.id);\n                }\n            } else if (data.id === ChonkyActions.MoveFiles.id) {\n                methods.moveFiles(data.payload.files, data.payload.source!, data.payload.destination);\n            }\n        },\n        [methods]\n    );\n};\n\nexport const useFileMap = <FT extends CustomFileData = CustomFileData>({\n    baseFileMap,\n    initialFolderId,\n}: FileMapParams<FT>) => {\n    const { fileMap, currentFolderId, methods } = useFileMapMethods(baseFileMap, initialFolderId);\n    const folderChain = useFolderChain(fileMap, currentFolderId);\n    const files = useFiles(fileMap, currentFolderId);\n    const fileActionHandler = useFileActionHandler(methods as FileMethods);\n\n    const data = {\n        fileMap,\n        currentFolderId,\n        folderChain,\n        files,\n    };\n    return { data, methods, fileActionHandler };\n};\n"],"names":["useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","UNINITIALIZED_SENTINEL","useStaticValue","factory","valueRef","useRef","current","useInstanceVariable","ref","Logger","error","args","console","warn","debug","formatBullets","bullets","join","FileHelper","isDirectory","file","isDir","isHidden","isSymlink","isEncrypted","isClickable","isOpenable","openable","isSelectable","selectable","isDraggable","draggable","isDroppable","droppable","isDndOpenable","dndOpenable","getModDate","modDate","undefined","parseDate","maybeDate","Date","message","isNaN","getTime","getChildrenCount","childrenCount","sanitizeInputArray","mode","rawArray","sanitizedFiles","errorMessages","Array","isArray","push","nonObjectFileCount","missingFieldFileCount","seenIds","Set","duplicateIds","i","length","item","id","name","has","add","size","repeatedIdsString","from","errorMessageString","arrayString","itemString","sanitizedArray","OptionIds","ShowHiddenFiles","ShowFoldersFirst","DarkMode","SortOrder","selectInstanceId","state","instanceId","selectExternalFileActionHandler","externalFileActionHandler","selectFileActionMap","fileActionMap","selectFileActionIds","fileActionIds","selectFileActionData","fileActionId","selectToolbarItems","toolbarItems","selectContextMenuItems","contextMenuItems","selectFolderChain","folderChain","selectCurrentFolder","currentFolder","selectParentFolder","parentFolder","selectRawFiles","rawFiles","selectFileMap","fileMap","selectCleanFileIds","cleanFileIds","selectFileData","fileId","selectHiddenFileIdMap","hiddenFileIdMap","selectHiddenFileCount","Object","keys","selectFocusSearchInput","focusSearchInput","selectSearchString","searchString","selectSelectionMap","selectionMap","selectSelectedFileIds","selectSelectionSize","selectIsFileSelected","selectSelectedFiles","map","selectSelectedFilesForAction","action","requiresSelection","getSelectedFiles","fileFilter","selectSelectedFilesForActionCount","getSelectedFilesForAction","selectDisableSelection","disableSelection","selectFileViewConfig","fileViewConfig","selectSortActionId","sortActionId","selectSortOrder","sortOrder","selectOptionMap","optionMap","selectOptionValue","optionId","selectThumbnailGenerator","thumbnailGenerator","selectDoubleClickDelay","doubleClickDelay","selectIsDnDDisabled","disableDragAndDrop","selectClearSelectionOnOutsideClick","clearSelectionOnOutsideClick","selectContextMenuMounted","contextMenuMounted","selectContextMenuConfig","contextMenuConfig","selectContextMenuTriggerFile","config","triggerFileId","getFileActionMap","getOptionMap","getFileMap","getFileIds","fileIds","getCleanFileIds","getSortActionId","getSortOrder","getSearchString","_getLastClick","lastClick","makeGetAction","fileActionSelector","createSelector","makeGetOptionValue","defaultValue","makeGetFiles","fileIdsSelector","getSortedFileIds","files","sortAction","showFolderFirst","prepareSortKeySelector","selector","sortFunctions","desc","sortKeySelector","configKeyName","ASC","sortedFileIds","sort","by","getSearcher","cleanFiles","FuzzySearch","caseSensitive","getSearchFilteredFileIds","searcher","search","f","getHiddenFileIdMap","searchFilteredFileIds","showHiddenFiles","searchFilteredFileIdsSet","forEach","getDisplayFileIds","filter","getLastClickIndex","displayFileIds","index","selectors","getFileData","getIsFileSelected","selectedFiles","filters","filteredSelectedFiles","reduce","prevFiles","mergeFileActionsArrays","seenActionIds","addToSeen","a","wasNotSeen","fileActionArrays","duplicateFreeArrays","arr","duplicateFreeArray","concat","thunkUpdateRawFileActions","rawFileActions","disableDefaultFileActions","dispatch","defaultActionsToAdd","disabledActionIds","DefaultFileActions","fileActions","EssentialFileActions","optionDefaults","option","reduxActions","setRawFileActions","setFileActionsErrorMessages","setFileActions","setOptionDefaults","thunkUpdateToolbarNContextMenuItems","excludedToolbarFileActionIds","ChonkyActions","OpenParentFolder","seenToolbarGroups","seenContextMenuGroups","getGroup","itemArray","seenMap","groupName","group","button","toolbar","contextMenu","updateFileActionMenuItems","thunkUpdateDefaultFileViewActionId","getState","setFileViewConfig","thunkActivateSortAction","oldActionId","oldOrder","order","DESC","setSort","actionId","thunkApplySelectionTransform","selectionTransform","prevSelection","hiddenFileIds","newSelection","clearSelection","selectFiles","reset","thunkDispatchFileAction","data","_dispatch","Promise","resolve","thunkRequestFileAction","payload","selectedFilesForAction","contextMenuTriggerFile","actionState","toggleOption","effect","maybeEffectPromise","reduxDispatch","getReduxState","then","effectResult","triggerDispatchAfterEffect","preventDispatch","FileViewMode","ChonkyIconName","defineFileAction","__payloadType","hotkeys","errorMessage","Error","findElementAmongAncestors","maybeElement","predicate","parentElement","elementIsInsideButton","buttonCandidate","element","tagName","toLowerCase","getValueOrFallback","fallback","desiredType","reduxThunks","selectRange","params","fileIdsToSelect","slice","rangeStart","rangeEnd","EssentialActions","MouseClickFile","clickType","OpenFiles","targetFile","ctrlKey","toggleSelection","exclusive","setLastClickIndex","fileDisplayIndex","shiftKey","lastClickIndex","KeyboardClickFile","enterKey","spaceKey","StartDragNDrop","draggedFile","EndDragNDrop","destination","droppedFiles","MoveFiles","ChangeSelection","icon","openParentFolder","iconOnly","OpenFileContextMenu","triggerFile","fileSelected","showContextMenu","mouseX","clientX","mouseY","clientY","DefaultActions","OpenSelection","openFiles","SelectAllFiles","selectAllFiles","ClearSelection","EnableListView","List","entryHeight","list","EnableCompactView","Compact","entryWidth","compact","EnableGridView","Grid","smallThumbnail","SortFilesByName","SortFilesBySize","SortFilesByDate","ToggleHiddenFiles","ToggleShowFoldersFirst","FocusSearchInput","ToggleDarkMode","ExtraActions","CopyFiles","copy","CreateFolder","tooltip","folderCreate","UploadFiles","upload","DownloadFiles","download","DeleteFiles","trash","initialRootState","fileActionsErrorMessages","rawFolderChain","folderChainErrorMessages","filesErrorMessages","searchMode","reducers","setExternalFileActionHandler","setRawFolderChain","setRawFiles","selectedFileId","setSortedFileIds","setHiddenFileIds","setFocusSearchInput","setSearchString","oldValue","setSelectionDisabled","setThumbnailGenerator","setDoubleClickDelay","setDisableDragAndDrop","setClearSelectionOnOutsideClick","setContextMenuMounted","hideContextMenu","createSlice","initialState","actions","rootReducer","reducer","useStoreWatchers","store","selectionWatcher","watch","onSelectionChange","oldSelection","selectedFilesIds","selection","unsubscribeCallbacks","subscribe","unsubscribe","useChonkyStore","chonkyInstanceId","preloadedState","configureStore","middleware","getDefaultMiddleware","serializableCheck","devTools","useParamSelector","parametrizedSelector","selectorParams","useCallback","useSelector","useDTE","actionCreator","useDispatch","usePropReduxUpdate","ChonkyIconPlaceholder","title","React","defaultConfig","onFileAction","disableDragAndDropProvider","defaultSortActionId","defaultFileViewActionId","iconComponent","darkMode","i18n","setChonkyDefaults","key","I18nNamespace","getI18nId","namespace","stringId","getActionI18nId","FileActions","useLocalizedFileActionGroup","intl","useIntl","useMemo","formatMessage","FileActionGroups","defaultMessage","useLocalizedFileActionStrings","buttonName","buttonTooltip","useLocalizedFileEntryStrings","formatters","useContext","ChonkyFormattersContext","fileModDateString","formatFileModDate","fileSizeString","formatFileSize","defaultFormatters","safeModDate","formatDate","dateStyle","timeStyle","_intl","sizeData","filesize","bits","output","symbol","Math","round","createContext","ChonkyIconContext","VideoExtensions","ImageExtensions","AudioExtensions","ColorsLight","ColorsDark","getIconTrie","colourIndex","step","IconsToExtensions","license","model","database","text","archive","image","video","code","info","lock","music","terminal","users","linux","ubuntu","windows","rust","python","nodejs","php","git","adobe","pdf","excel","word","flash","exactTrie","ExactTrie","ignoreCase","pair","extensions","colorCode","iconData","put","iconTrie","useIconData","loading","folder","match","getWithCheckpoints","lightTheme","colors","debugRed","debugBlue","debugGreen","debugPurple","debugYellow","textActive","fontSizes","rootPrimary","margins","rootLayoutMargin","lineHeight","fontSize","buttonRadius","dnd","canDropColor","cannotDropColor","canDropMask","cannotDropMask","fileListCanDropMaskOne","fileListCanDropMaskTwo","fileListCannotDropMaskOne","fileListCannotDropMaskTwo","dragLayer","border","padding","borderRadius","fileList","desktopGridGutter","mobileGridGutter","gridFileEntry","childrenCountSize","iconColorFocused","iconSize","iconColor","fileColorTint","folderBackColorTint","folderFrontColorTint","listFileEntry","propertyFontSize","iconFontSize","iconBorderRadius","darkThemeOverride","mobileThemeOverride","useIsMobileBreakpoint","useMediaQuery","getStripeGradient","colorOne","colorTwo","makeLocalChonkyStyles","styles","createUseStyles","makeGlobalChonkyStyles","makeStyles","selectorMapping","makeGlobalStyles","theme","localStyles","globalStyles","localSelectors","localSelector","globalSelector","jssSelector","useStyles","classes","important","c","classnames","useFileBrowserHandle","useStore","useImperativeHandle","getFileSelection","selectionSet","setFileSelection","requestFileAction","ChonkyBusinessLogicInner","memo","forwardRef","props","displayName","ChonkyBusinessLogic","useDndContextAvailable","dndContext","DndContext","dragDropManager","useDragIfAvailable","dndContextAvailable","mockHook","useHook","useDrag","useDropIfAvailable","useDrop","findClosestChonkyFileId","fileEntryWrapperDiv","dataset","chonkyFileId","useContextMenuTrigger","contextMenuMountedRef","event","altKey","preventDefault","target","useContextMenuDismisser","ChonkyDndFileEntryType","layerStyles","position","pointerEvents","zIndex","left","top","width","height","getItemStyles","initialCursorOffset","initialFileOffset","currentFileOffset","display","x","y","transform","WebkitTransform","DnDFileListDragLayer","useDragLayer","monitor","getItem","itemType","getItemType","getInitialClientOffset","getInitialSourceClientOffset","getSourceClientOffset","isDragging","selectionSize","style","className","fileDragPreview","boxShadow","palette","divider","backgroundColor","background","color","primary","HotkeyListener","fileAction","hotkeysStr","hotkeyCallback","unbind","ChonkyPresentationLayer","children","dndDisabled","handleClickAway","hotkeyListenerComponents","ClickAwayListener","onClickAway","Box","chonkyRoot","onContextMenu","paper","touchAction","fontFamily","flexDirection","boxSizing","textAlign","webkitTouchCallout","webkitUserSelect","mozUserSelect","msUserSelect","userSelect","FileBrowser","shortid","generate","isMobileBreakpoint","muiTheme","createMuiTheme","type","combinedTheme","merge","chonkyComps","IntlProvider","locale","defaultLocale","Provider","ReduxProvider","ThemeProvider","MuiThemeProvider","DndProvider","backend","HTML5Backend","useFolderChainItems","folderChainItems","items","disabled","onClick","useFileDrag","fileRef","getDndStartPayload","reduxState","sourceInstanceId","source","canDrag","onDragStart","onDragEnd","dropResult","getDropResult","dropTarget","dropEffect","collect","begin","end","dndIsDragging","drag","preview","getEmptyImage","captureDraggingState","useFileDrop","forceDisableDrop","includeChildrenDrops","folderChainRef","onDrop","_item","canDrop","customDropResult","isOver","shallow","prohibitedFileIds","movedFiles","currFile","isOverCurrent","accept","drop","dndIsOver","dndIsOverCurrent","dndCanDrop","useFileEntryDnD","dndState","useDndHoverOpen","currentFolderRef","timeout","getRandomInt","min","max","floor","random","TextPlaceholder","minLength","maxLength","placeholderLength","whitespace","repeat","textPlaceholder","dangerouslySetInnerHTML","__html","opacity","animationName","animationIterationCount","animationTimingFunction","animationDuration","whiteSpace","overflow","maxWidth","minWidth","useFileEntryHtmlProps","dataProps","role","useFileEntryState","selected","focused","useThumbnailUrl","thumbnailUrl","thumbnailLoading","fileColor","iconSpin","useDndIcon","dndIconName","showDropIcon","dndCannotDrop","dndDragging","useModifierIconComponents","modifierIcons","hidden","symlink","ChonkyIcon","modifierIconComponents","_extname","fileName","parts","split","useFileNameComponent","extension","ext","substr","setThumbnailUrl","setThumbnailLoading","loadingAttempts","loadingCancelled","useFileClickHandlers","displayIndex","onMouseClick","onKeyboardClick","onSingleClick","onDoubleClick","CustomVisibilityState","useFileActionTrigger","useFileActionProps","optionValue","actionSelectionSize","actionSelectionEmpty","active","sortAsc","sortDesc","placeholder","toggleOn","toggleOff","isSortButtonAndCurrentSort","isFileViewButtonAndCurrentView","isOptionAndEnabled","customDisabled","customActive","customVisibility","Disabled","Active","ToolbarButton","externalClassName","dropdown","iconWithText","fallbackIcon","fixedWidth","baseButton","iconOnlyButton","activeButton","Button","iconDropdown","textTransform","letterSpacing","paddingBottom","paddingTop","marginRight","marginLeft","marginTop","SmartToolbarButton","triggerAction","Hidden","FolderChainButton","first","baseBreadcrumb","disabledBreadcrumb","currentBreadcrumb","folderChainIcon","buttonContainer","dndIndicator","textDecoration","FileNavbar","folderChainComponents","components","component","navbarWrapper","navbarContainer","Breadcrumbs","navbarBreadcrumbs","separator","upDirectoryButton","flexGrow","ToolbarDropdownButton","MenuItem","ListItemIcon","ListItemText","primaryTypographyProps","minHeight","SmartToolbarDropdownButton","onClickFollowUp","handleClick","ToolbarDropdown","anchor","setAnchor","currentTarget","handleClose","menuItemComponents","localizedName","Menu","autoFocus","keepMounted","elevation","anchorEl","onClose","open","Boolean","transitionDuration","dropdownList","ToolbarInfo","hiddenCount","fileCountString","Toolbar","fileCount","selectedString","hiddenString","infoContainer","Typography","infoText","variant","extraInfoSpan","selectionSizeText","hiddenCountText","ToolbarSearch","searchPlaceholderString","searchInputRef","reduxSearchString","localSearchString","setLocalSearchString","debouncedLocalSearchString","showLoadingIndicator","setShowLoadingIndicator","focus","handleChange","handleKeyUp","blur","TextField","searchFieldContainer","onChange","inputRef","InputProps","onKeyUp","startAdornment","InputAdornment","searchIcon","spin","searchFieldInput","inputProps","searchFieldInputInner","margin","paddingLeft","FileToolbar","toolbarItemComponents","toolbarWrapper","toolbarContainer","toolbarLeft","toolbarRight","flexWrap","toolbarLeftFiller","FileListEmpty","emptyString","FileList","fileListEmpty","fileListEmptyContent","folderOpen","useClickHandler","counter","clickCount","clickTimeout","mouseClickEvent","metaKey","useKeyDownHandler","keyboardClickEvent","nativeEvent","stopPropagation","ClickableWrapper","WrapperTag","wrapperTag","passthroughProps","setFocused","handleKeyDown","compProps","onFocus","onBlur","onKeyDown","tabIndex","mergedProps","FileEntryName","fileNameComponent","hint","paddingRight","CompactEntry","entryState","fileEntryHtmlProps","listFileEntryIcon","listFileEntryDescription","listFileEntryName","listFileEntryProperties","listFileEntryProperty","alignItems","DnDFileEntry","fillParent","FileThumbnail","thumbnailStyle","backgroundImage","fileThumbnail","backgroundRepeat","backgroundPosition","backgroundSize","GridEntryDndIndicator","borderBottom","borderLeft","content","GridEntryPreviewFolder","folderClasses","useFolderStyles","fileClasses","useFileStyles","commonClasses","useCommonEntryStyles","previewFile","folderBackSideMid","folderBackSideTop","folderFrontSide","fileIcon","selectionIndicator","thumbnail","borderTopLeftRadius","borderTopRightRadius","right","borderRightColor","borderTopColor","borderBottomColor","borderLeftColor","borderWidth","borderStyle","bottom","shadows","GridEntryPreviewFile","focusIndicator","GridEntry","useFileEntryStyles","entryClassName","gridFileEntryPreview","gridFileEntryNameContainer","gridFileEntryName","wordBreak","ListEntry","styleState","listFileEntrySelection","textOverflow","flex","disabledDndState","SmartFileEntry","fileViewMode","fileClickHandlers","clickableWrapperProps","fileEntryClickableWrapper","fileEntryProps","EntryComponent","outline","isMobileDevice","window","orientation","navigator","userAgent","indexOf","getGridConfig","viewConfig","gutter","scrollbar","columnCount","columnWidth","rowCount","ceil","rowHeight","GridContainer","gridRef","gridConfig","setGridConfig","gridConfigRef","oldConf","newConf","resetAfterRowIndex","resetAfterColumnIndex","resetAfterIndices","columnIndex","rowIndex","sizers","gc","getColumnWidth","getRowHeight","displayFileIdsRef","getItemKey","cellRenderer","styleWithGutter","gridComponent","VariableSizeGrid","gridContainer","estimatedRowHeight","estimatedColumnWidth","itemKey","ListContainer","listRef","listComponent","rowRenderer","FixedSizeList","listContainer","itemSize","itemCount","borderTop","localClasses","useLocalStyles","onScroll","fillParentContainer","listRenderer","fileListWrapper","dndDropZone","dndDropZoneIcon","AutoSizer","disableHeight","maxHeight","FileContextMenu","browserMenuShortcutString","shortcut","contextMenuItemComponents","anchorPosition","disablePortal","anchorReference","contextMenuList","ListSubheader","browserMenuTooltip","FullFileBrowser","useFolderChain","currentFolderId","parentId","parentFile","unshift","useFiles","childrenIds","useFileMapMethods","baseFileMap","initialFolderId","setFileMap","setCurrentFolderId","resetFileMap","moveFiles","currentFileMap","newFileMap","moveFileIds","newSourceChildrenIds","newDestinationChildrenIds","methods","useFileActionHandler","fileToOpen","useFileMap","fileActionHandler"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"chonky.esm.js","sources":["../src/util/hooks-helpers.ts","../src/util/logger.ts","../src/util/file-helper.ts","../src/redux/files-transforms.ts","../src/action-definitions/option-ids.ts","../src/types/sort.types.ts","../src/redux/selectors.ts","../src/redux/thunks/file-actions.thunks.ts","../src/redux/thunks/dispatchers.thunks.ts","../src/types/file-view.types.ts","../src/types/icons.types.ts","../src/util/helpers.ts","../src/redux/thunks/index.ts","../src/action-definitions/essential.ts","../src/action-definitions/default.ts","../src/action-definitions/extra.ts","../src/action-definitions/index.ts","../src/redux/state.ts","../src/redux/reducers.ts","../src/redux/watchers.ts","../src/redux/store.ts","../src/components/internal/ChonkyIconPlaceholder.tsx","../src/util/default-config.ts","../src/util/i18n.ts","../src/util/icon-helper.ts","../src/util/styles.ts","../src/util/file-browser-handle.ts","../src/components/internal/ChonkyBusinessLogic.tsx","../src/util/dnd-fallback.ts","../src/components/external/FileContextMenu-hooks.ts","../src/types/dnd.types.ts","../src/components/file-list/DnDFileListDragLayer.tsx","../src/components/internal/HotkeyListener.tsx","../src/components/internal/ChonkyPresentationLayer.tsx","../src/components/external/FileBrowser.tsx","../src/components/external/FileNavbar-hooks.ts","../src/util/dnd.ts","../src/components/external/TextPlaceholder.tsx","../src/components/file-list/FileEntry-hooks.tsx","../src/types/action.types.ts","../src/util/file-actions.ts","../src/components/external/ToolbarButton.tsx","../src/components/external/FolderChainButton.tsx","../src/components/external/FileNavbar.tsx","../src/components/external/ToolbarDropdownButton.tsx","../src/components/external/ToolbarDropdown.tsx","../src/components/external/ToolbarInfo.tsx","../src/components/external/ToolbarSearch.tsx","../src/components/external/FileToolbar.tsx","../src/components/file-list/FileListEmpty.tsx","../src/components/internal/ClickableWrapper-hooks.tsx","../src/components/internal/ClickableWrapper.tsx","../src/components/file-list/FileEntryName.tsx","../src/components/file-list/CompactEntry.tsx","../src/components/file-list/DnDFileEntry.tsx","../src/components/file-list/FileThumbnail.tsx","../src/components/file-list/GridEntryDndIndicator.tsx","../src/components/file-list/GridEntryPreview.tsx","../src/components/file-list/GridEntry.tsx","../src/components/file-list/ListEntry.tsx","../src/components/file-list/FileEntry.tsx","../src/components/file-list/GridContainer.tsx","../src/components/file-list/ListContainer.tsx","../src/components/file-list/FileList.tsx","../src/components/external/FileContextMenu.tsx","../src/components/external/FullFileBrowser.tsx","../src/extensions/file-map.ts"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nexport const useDebounce = <T>(\n    value: T,\n    delay: number\n): [T, React.Dispatch<React.SetStateAction<T>>] => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(() => {\n        const handler = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [value, delay]);\n\n    return [debouncedValue, setDebouncedValue];\n};\n\nconst UNINITIALIZED_SENTINEL = {};\nexport const useStaticValue = <T>(factory: () => T): T => {\n    const valueRef = useRef<T>(UNINITIALIZED_SENTINEL as T);\n    if (valueRef.current === UNINITIALIZED_SENTINEL) valueRef.current = factory();\n    return valueRef.current;\n};\n\nexport const useInstanceVariable = <T>(value: T) => {\n    const ref = useRef(value);\n    useEffect(() => {\n        ref.current = value;\n    }, [ref, value]);\n    return ref;\n};\n","export class Logger {\n    public static error(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.error('[Chonky runtime error]', ...args);\n    }\n\n    public static warn(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.warn('[Chonky runtime warning]', ...args);\n    }\n\n    public static debug(...args: any[]): void {\n        // eslint-disable-next-line no-console\n        console.debug('[Chonky runtime debug]', ...args);\n    }\n\n    public static formatBullets(bullets: string[]): string {\n        return `\\n- ${bullets.join('\\n- ')}`;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from '../types/file.types';\nimport { Logger } from './logger';\n\nexport class FileHelper {\n    public static isDirectory(file: Nullable<FileData>): file is FileData {\n        // Not a directory by default\n        return !!file && file.isDir === true;\n    }\n\n    public static isHidden(file: Nullable<FileData>): file is FileData {\n        // Not hidden by default\n        return !!file && file.isHidden === true;\n    }\n\n    public static isSymlink(file: Nullable<FileData>): file is FileData {\n        // Not a symlink by default\n        return !!file && file.isSymlink === true;\n    }\n\n    public static isEncrypted(file: Nullable<FileData>): file is FileData {\n        // Not encrypted by default\n        return !!file && file.isEncrypted === true;\n    }\n\n    public static isClickable(file: Nullable<FileData>): file is FileData {\n        // Clickable by default\n        return !!file;\n    }\n\n    public static isOpenable(file: Nullable<FileData>): file is FileData {\n        // Openable by default\n        return !!file && file.openable !== false;\n    }\n\n    public static isSelectable(file: Nullable<FileData>): file is FileData {\n        // Selectable by default\n        return !!file && file.selectable !== false;\n    }\n\n    public static isDraggable(file: Nullable<FileData>): file is FileData {\n        // File & folders are draggable by default, `null` is not\n        return !!file && file.draggable !== false;\n    }\n\n    public static isDroppable(file: Nullable<FileData>): file is FileData {\n        // Folders are droppable by default, files are not\n        if (!file) return false;\n        if (file.isDir && file.droppable !== false) return true;\n        return file.droppable === true;\n    }\n\n    public static isDndOpenable(file: Nullable<FileData>): file is FileData {\n        // Folders are DnD openable by default, files are not\n        if (!FileHelper.isOpenable(file)) return false;\n        if (file.isDir && file.dndOpenable !== false) return true;\n        return file.dndOpenable === true;\n    }\n\n    public static getModDate(file: Nullable<FileData>): Nullable<Date> {\n        if (!file || file.modDate === null || file.modDate === undefined) return null;\n        return FileHelper.parseDate(file.modDate);\n    }\n\n    public static parseDate(maybeDate: Date | string | any): Nullable<Date> {\n        if (typeof maybeDate === 'string' || typeof maybeDate === 'number') {\n            // We allow users to provide string and numerical representations of dates.\n            try {\n                return new Date(maybeDate);\n            } catch (error) {\n                Logger.error(\n                    `Could not convert provided string/number into a date: ${error.message} `,\n                    'Invalid value:',\n                    maybeDate\n                );\n            }\n        }\n        if (maybeDate instanceof Date && !isNaN(maybeDate.getTime())) {\n            // We only allow valid dates objects\n            return maybeDate;\n        }\n\n        // If we have an invalid date representation, we just return null.\n        Logger.warn('Unsupported date representation:', maybeDate);\n        return null;\n    }\n\n    public static getChildrenCount(file: Nullable<FileData>): Nullable<number> {\n        if (!file || typeof file.childrenCount !== 'number') return null;\n\n        return file.childrenCount;\n    }\n}\n","import { Nullable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileArray } from '../types/file.types';\nimport { Logger } from '../util/logger';\n\ninterface SanitizeFiles {\n    (mode: 'files', rawArray: FileArray | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'folderChain', rawArray: Nullable<FileArray> | any): {\n        sanitizedArray: FileArray;\n        errorMessages: string[];\n    };\n    (mode: 'fileActions', rawArray: FileAction[] | any): {\n        sanitizedArray: FileAction[];\n        errorMessages: string[];\n    };\n}\n\nexport const sanitizeInputArray: SanitizeFiles = (mode: string, rawArray: any[]) => {\n    const sanitizedFiles = [];\n    const errorMessages: string[] = [];\n\n    if ((mode === 'folderChain' || mode === 'fileActions') && !rawArray) {\n        // Do nothing, we allow folder chain to be null.\n    } else if (!Array.isArray(rawArray)) {\n        errorMessages.push(\n            `Expected \"${mode}\" prop to be an array, got \"${typeof rawArray}\" instead.`\n        );\n    } else {\n        let nonObjectFileCount = 0;\n        let missingFieldFileCount = 0;\n        const seenIds = new Set<string>();\n        const duplicateIds = new Set<string>();\n\n        for (let i = 0; i < rawArray.length; ++i) {\n            const item = rawArray[i];\n            if (!item) {\n                if (mode === 'fileActions') nonObjectFileCount++;\n                else sanitizedFiles.push(null);\n            } else if (typeof item !== 'object') {\n                nonObjectFileCount++;\n            } else {\n                if (!item.id || (mode !== 'fileActions' && !item.name)) {\n                    missingFieldFileCount++;\n                } else if (seenIds.has(item.id)) {\n                    duplicateIds.add(item.id);\n                } else {\n                    seenIds.add(item.id);\n                    sanitizedFiles.push(item);\n                }\n            }\n        }\n\n        if (nonObjectFileCount) {\n            errorMessages.push(\n                `Detected ${nonObjectFileCount} file(s) of invalid type. Remember ` +\n                    `that \"files\" array should contain either objects or nulls.`\n            );\n        }\n        if (missingFieldFileCount) {\n            errorMessages.push(\n                `Detected ${missingFieldFileCount} file(s) that are missing the ` +\n                    `required fields. Remember that file object should define an ` +\n                    `\"id\" and a \"name\".`\n            );\n        }\n        if (duplicateIds.size > 0) {\n            const repeatedIdsString = '\"' + Array.from(duplicateIds).join('\", \"') + '\"';\n            errorMessages.push(\n                `Detected ${duplicateIds.size} file IDs that are used multiple ` +\n                    `times. Remember that each file should have a unique IDs. The ` +\n                    `following IDs were seen multiple times: ${repeatedIdsString}`\n            );\n        }\n    }\n\n    if (errorMessages.length > 0) {\n        const errorMessageString = '\\n- ' + errorMessages.join('\\n- ');\n        let arrayString: string;\n        let itemString: string;\n        if (mode === 'folderChain') {\n            arrayString = 'folder chain';\n            itemString = 'files';\n        } else if (mode === 'fileActions') {\n            arrayString = 'file actions';\n            itemString = 'file actions';\n        } else {\n            // mode === 'files'\n            arrayString = 'files';\n            itemString = 'files';\n        }\n\n        Logger.error(\n            `Errors were detected when sanitizing the ${arrayString} array. ` +\n                `Offending ${itemString} were removed from the array. Summary of ` +\n                `validation errors: ${errorMessageString}`\n        );\n    }\n\n    return {\n        sanitizedArray: sanitizedFiles,\n        errorMessages,\n    };\n};\n","/**\n * We have option IDs in a separate file to avoid circular deps...\n */\nexport const OptionIds = {\n    ShowHiddenFiles: 'show_hidden_files',\n    ShowFoldersFirst: 'show_folders_first',\n    DarkMode: 'dark_mode',\n};\n","import { Nullable } from 'tsdef';\n\nimport { FileData } from './file.types';\n\nexport type FileSortKeySelector = (file: Nullable<FileData>) => any;\n\nexport enum SortOrder {\n    ASC = 'asc',\n    DESC = 'desc',\n}\n","import sort from 'fast-sort';\nimport FuzzySearch from 'fuzzy-search';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { createSelector } from '@reduxjs/toolkit';\n\nimport { OptionIds } from '../action-definitions/option-ids';\nimport { FileArray, FileData, FileFilter } from '../types/file.types';\nimport { RootState } from '../types/redux.types';\nimport { FileSortKeySelector, SortOrder } from '../types/sort.types';\nimport { FileHelper } from '../util/file-helper';\n\n// Raw selectors\nexport const selectInstanceId = (state: RootState) => state.instanceId;\nexport const selectExternalFileActionHandler = (state: RootState) => state.externalFileActionHandler;\n\nexport const selectFileActionMap = (state: RootState) => state.fileActionMap;\nexport const selectFileActionIds = (state: RootState) => state.fileActionIds;\nexport const selectFileActionData = (fileActionId: string) => (state: RootState) =>\n    selectFileActionMap(state)[fileActionId];\nexport const selectToolbarItems = (state: RootState) => state.toolbarItems;\nexport const selectContextMenuItems = (state: RootState) => state.contextMenuItems;\n\nexport const selectFolderChain = (state: RootState) => state.folderChain;\nexport const selectCurrentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const currentFolder = folderChain.length > 0 ? folderChain[folderChain.length - 1] : null;\n    return currentFolder;\n};\nexport const selectParentFolder = (state: RootState) => {\n    const folderChain = selectFolderChain(state);\n    const parentFolder = folderChain.length > 1 ? folderChain[folderChain.length - 2] : null;\n    return parentFolder;\n};\n\nexport const selectRawFiles = (state: RootState) => state.rawFiles;\nexport const selectFileMap = (state: RootState) => state.fileMap;\nexport const selectCleanFileIds = (state: RootState) => state.cleanFileIds;\nexport const selectFileData = (fileId: Nullable<string>) => (state: RootState) =>\n    fileId ? selectFileMap(state)[fileId] : null;\n\nexport const selectHiddenFileIdMap = (state: RootState) => state.hiddenFileIdMap;\nexport const selectHiddenFileCount = (state: RootState) => Object.keys(selectHiddenFileIdMap(state)).length;\n\nexport const selectFocusSearchInput = (state: RootState) => state.focusSearchInput;\nexport const selectSearchString = (state: RootState) => state.searchString;\n\nexport const selectSelectionMap = (state: RootState) => state.selectionMap;\nexport const selectSelectedFileIds = (state: RootState) => Object.keys(selectSelectionMap(state));\nexport const selectSelectionSize = (state: RootState) => selectSelectedFileIds(state).length;\nexport const selectIsFileSelected = (fileId: Nullable<string>) => (state: RootState) =>\n    !!fileId && !!selectSelectionMap(state)[fileId];\nexport const selectSelectedFiles = (state: RootState) => {\n    const fileMap = selectFileMap(state);\n    return Object.keys(selectSelectionMap(state)).map(id => fileMap[id]);\n};\nexport const selectSelectedFilesForAction = (fileActionId: string) => (state: RootState) => {\n    const { fileActionMap } = state;\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.requiresSelection) return undefined;\n\n    return getSelectedFiles(state, action.fileFilter);\n};\nexport const selectSelectedFilesForActionCount = (fileActionId: string) => (state: RootState) =>\n    getSelectedFilesForAction(state, fileActionId)?.length;\nexport const selectDisableSelection = (state: RootState) => state.disableSelection;\n\nexport const selectFileViewConfig = (state: RootState) => state.fileViewConfig;\n\nexport const selectSortActionId = (state: RootState) => state.sortActionId;\nexport const selectSortOrder = (state: RootState) => state.sortOrder;\n\nexport const selectOptionMap = (state: RootState) => state.optionMap;\nexport const selectOptionValue = (optionId: string) => (state: RootState) => selectOptionMap(state)[optionId];\n\nexport const selectThumbnailGenerator = (state: RootState) => state.thumbnailGenerator;\nexport const selectDoubleClickDelay = (state: RootState) => state.doubleClickDelay;\nexport const selectIsDnDDisabled = (state: RootState) => state.disableDragAndDrop;\nexport const selectClearSelectionOnOutsideClick = (state: RootState) => state.clearSelectionOnOutsideClick;\n\nexport const selectContextMenuMounted = (state: RootState) => state.contextMenuMounted;\nexport const selectContextMenuConfig = (state: RootState) => state.contextMenuConfig;\nexport const selectContextMenuTriggerFile = (state: RootState) => {\n    const config = selectContextMenuConfig(state);\n    if (!config || !config.triggerFileId) return null;\n    const fileMap = selectFileMap(state);\n    return fileMap[config.triggerFileId] ?? null;\n};\n\n// Raw selectors\nconst getFileActionMap = (state: RootState) => state.fileActionMap;\nconst getOptionMap = (state: RootState) => state.optionMap;\nconst getFileMap = (state: RootState) => state.fileMap;\nconst getFileIds = (state: RootState) => state.fileIds;\nconst getCleanFileIds = (state: RootState) => state.cleanFileIds;\nconst getSortActionId = (state: RootState) => state.sortActionId;\nconst getSortOrder = (state: RootState) => state.sortOrder;\nconst getSearchString = (state: RootState) => state.searchString;\nconst _getLastClick = (state: RootState) => state.lastClick;\n\n// Memoized selectors\nconst makeGetAction = (fileActionSelector: (state: RootState) => Nullable<string>) =>\n    createSelector([getFileActionMap, fileActionSelector], (fileActionMap, fileActionId) =>\n        fileActionId && fileActionMap[fileActionId] ? fileActionMap[fileActionId] : null\n    );\nconst makeGetOptionValue = (optionId: string, defaultValue: any = undefined) =>\n    createSelector([getOptionMap], optionMap => {\n        const value = optionMap[optionId];\n        if (value === undefined) {\n            return defaultValue;\n        }\n        return value;\n    });\nconst makeGetFiles = (fileIdsSelector: (state: RootState) => Nullable<string>[]) =>\n    createSelector(\n        [getFileMap, fileIdsSelector],\n        (fileMap, fileIds): FileArray => fileIds.map(fileId => (fileId && fileMap[fileId] ? fileMap[fileId] : null))\n    );\nconst getSortedFileIds = createSelector(\n    [\n        getFileIds,\n        getSortOrder,\n        makeGetFiles(getFileIds),\n        makeGetAction(getSortActionId),\n        makeGetOptionValue(OptionIds.ShowFoldersFirst, false),\n    ],\n    (fileIds, sortOrder, files, sortAction, showFolderFirst) => {\n        if (!sortAction) {\n            // We allow users to set the sort action ID to `null` if they want to use their\n            // own sorting mechanisms instead of relying on Chonky built-in sort.\n            return fileIds;\n        }\n\n        const prepareSortKeySelector = (selector: FileSortKeySelector) => (file: Nullable<FileData>) => selector(file);\n\n        const sortFunctions: {\n            asc?: (file: FileData) => any;\n            desc?: (file: FileData) => any;\n        }[] = [];\n\n        if (showFolderFirst) {\n            // If option is undefined (relevant actions is not enabled), we don't show\n            // folders first.\n            sortFunctions.push({\n                desc: prepareSortKeySelector(FileHelper.isDirectory),\n            });\n        }\n        if (sortAction.sortKeySelector) {\n            const configKeyName = sortOrder === SortOrder.ASC ? 'asc' : 'desc';\n            sortFunctions.push({\n                [configKeyName]: prepareSortKeySelector(sortAction.sortKeySelector),\n            });\n        }\n        if (sortFunctions.length === 0) return fileIds;\n\n        // We copy the array because `fast-sort` mutates it\n        const sortedFileIds = sort([...files])\n            .by(sortFunctions as any)\n            .map(file => (file ? file.id : null));\n        return sortedFileIds;\n    }\n);\nconst getSearcher = createSelector(\n    [makeGetFiles(getCleanFileIds)],\n    cleanFiles => new FuzzySearch(cleanFiles as FileData[], ['name'], { caseSensitive: false })\n);\nconst getSearchFilteredFileIds = createSelector(\n    [getCleanFileIds, getSearchString, getSearcher],\n    (cleanFileIds, searchString, searcher) =>\n        searchString ? searcher.search(searchString).map(f => f.id) : cleanFileIds\n);\nconst getHiddenFileIdMap = createSelector(\n    [getSearchFilteredFileIds, makeGetFiles(getCleanFileIds), makeGetOptionValue(OptionIds.ShowHiddenFiles)],\n    (searchFilteredFileIds, cleanFiles, showHiddenFiles) => {\n        const searchFilteredFileIdsSet = new Set(searchFilteredFileIds);\n        const hiddenFileIdMap: any = {};\n        cleanFiles.forEach(file => {\n            if (!file) return;\n            else if (!searchFilteredFileIdsSet.has(file.id)) {\n                // Hidden by seach\n                hiddenFileIdMap[file.id] = true;\n            } else if (!showHiddenFiles && FileHelper.isHidden(file)) {\n                // Hidden by options\n                hiddenFileIdMap[file.id] = true;\n            }\n        });\n        return hiddenFileIdMap;\n    }\n);\nconst getDisplayFileIds = createSelector(\n    [getSortedFileIds, getHiddenFileIdMap],\n    /** Returns files that will actually be shown to the user. */\n    (sortedFileIds, hiddenFileIdMap) => sortedFileIds.filter(id => !id || !hiddenFileIdMap[id])\n);\nconst getLastClickIndex = createSelector(\n    [_getLastClick, getSortedFileIds],\n    /** Returns the last click index after ensuring it is actually still valid. */\n    (lastClick, displayFileIds) => {\n        if (\n            !lastClick ||\n            lastClick.index > displayFileIds.length - 1 ||\n            lastClick.fileId != displayFileIds[lastClick.index]\n        ) {\n            return null;\n        }\n        return lastClick.index;\n    }\n);\n\nexport const selectors = {\n    // Raw selectors\n    getFileActionMap,\n    getOptionMap,\n    getFileMap,\n    getFileIds,\n    getCleanFileIds,\n    getSortActionId,\n    getSortOrder,\n    getSearchString,\n    _getLastClick,\n\n    // Memoized selectors\n    getSortedFileIds,\n    getSearcher,\n    getSearchFilteredFileIds,\n    getHiddenFileIdMap,\n    getDisplayFileIds,\n    getLastClickIndex,\n\n    // Parametrized selectors\n    makeGetAction,\n    makeGetOptionValue,\n    makeGetFiles,\n};\n\n// Selectors meant to be used outside of Redux code\nexport const getFileData = (state: RootState, fileId: Nullable<string>) =>\n    fileId ? selectFileMap(state)[fileId] : null;\nexport const getIsFileSelected = (state: RootState, file: FileData) => {\n    // !!! We deliberately don't use `FileHelper.isSelectable` here as we want to\n    //     reflect the state of Redux store accurately.\n    return !!selectSelectionMap(state)[file.id];\n};\nexport const getSelectedFiles = (state: RootState, ...filters: Nilable<FileFilter>[]) => {\n    const { fileMap, selectionMap } = state;\n\n    const selectedFiles = Object.keys(selectionMap).map(id => fileMap[id]);\n    const filteredSelectedFiles = filters.reduce(\n        (prevFiles, filter) => (filter ? prevFiles.filter(filter) : prevFiles),\n        selectedFiles\n    );\n    return filteredSelectedFiles;\n};\nexport const getSelectedFilesForAction = (state: RootState, fileActionId: string) =>\n    selectSelectedFilesForAction(fileActionId)(state);\n","import { Nilable } from 'tsdef';\n\nimport { ChonkyActions, DefaultFileActions, EssentialFileActions } from '../../action-definitions/index';\nimport { FileActionGroup, FileActionMenuItem } from '../../types/action-menus.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyThunk } from '../../types/redux.types';\nimport { SortOrder } from '../../types/sort.types';\nimport { sanitizeInputArray } from '../files-transforms';\nimport { reduxActions } from '../reducers';\nimport { selectCleanFileIds, selectFileMap, selectHiddenFileIdMap, selectSelectionMap } from '../selectors';\n\n/**\n * Merges multiple file action arrays into one while removing duplicates\n */\nconst mergeFileActionsArrays = (...fileActionArrays: FileAction[][]): FileAction[] => {\n    const seenActionIds = new Set<string>();\n    const addToSeen = (a: FileAction) => !!seenActionIds.add(a.id);\n    const wasNotSeen = (a: FileAction) => !seenActionIds.has(a.id);\n\n    const duplicateFreeArrays = fileActionArrays.map(arr => {\n        const duplicateFreeArray = arr.filter(wasNotSeen);\n        duplicateFreeArray.map(addToSeen);\n        return duplicateFreeArray;\n    });\n    return new Array<FileAction>().concat(...duplicateFreeArrays);\n};\n\nexport const thunkUpdateRawFileActions = (\n    rawFileActions: FileAction[] | any,\n    disableDefaultFileActions: Nilable<boolean | string[]>\n): ChonkyThunk => dispatch => {\n    const { sanitizedArray, errorMessages } = sanitizeInputArray('fileActions', rawFileActions);\n\n    // Add default actions unless user disabled them\n    let defaultActionsToAdd: FileAction[];\n    if (Array.isArray(disableDefaultFileActions)) {\n        const disabledActionIds = new Set(disableDefaultFileActions);\n        defaultActionsToAdd = DefaultFileActions.filter(action => !disabledActionIds.has(action.id));\n    } else if (disableDefaultFileActions) {\n        defaultActionsToAdd = [];\n    } else {\n        defaultActionsToAdd = DefaultFileActions;\n    }\n\n    const fileActions = mergeFileActionsArrays(sanitizedArray, EssentialFileActions, defaultActionsToAdd);\n    const optionDefaults: any = {};\n    fileActions.map(a => (a.option ? (optionDefaults[a.option.id] = a.option.defaultValue) : null));\n\n    dispatch(reduxActions.setRawFileActions(rawFileActions));\n    dispatch(reduxActions.setFileActionsErrorMessages(errorMessages));\n    dispatch(reduxActions.setFileActions(fileActions));\n    dispatch(reduxActions.setOptionDefaults(optionDefaults));\n    dispatch(thunkUpdateToolbarNContextMenuItems(fileActions));\n};\n\nexport const thunkUpdateToolbarNContextMenuItems = (fileActions: FileAction[]): ChonkyThunk => dispatch => {\n    const excludedToolbarFileActionIds = new Set<string>([\n        // TODO: Move decision to exclude actions somewhere else, as users' custom\n        //  components might not give these actions special treatment like Chonky does.\n        ChonkyActions.OpenParentFolder.id,\n    ]);\n\n    type SeenGroupMap = { [groupName: string]: FileActionGroup };\n\n    const toolbarItems: FileActionMenuItem[] = [];\n    const seenToolbarGroups: SeenGroupMap = {};\n\n    const contextMenuItems: FileActionMenuItem[] = [];\n    const seenContextMenuGroups: SeenGroupMap = {};\n\n    const getGroup = (itemArray: FileActionMenuItem[], seenMap: SeenGroupMap, groupName: string): FileActionGroup => {\n        if (seenMap[groupName]) return seenMap[groupName];\n        const group: FileActionGroup = { name: groupName, fileActionIds: [] };\n        itemArray.push(group);\n        seenMap[groupName] = group;\n        return group;\n    };\n\n    for (const action of fileActions) {\n        const button = action.button;\n        if (!button) continue;\n\n        if (button.toolbar && !excludedToolbarFileActionIds.has(action.id)) {\n            if (button.group) {\n                const group = getGroup(toolbarItems, seenToolbarGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                toolbarItems.push(action.id);\n            }\n        }\n\n        if (button.contextMenu) {\n            if (button.group) {\n                const group = getGroup(contextMenuItems, seenContextMenuGroups, button.group);\n                group.fileActionIds.push(action.id);\n            } else {\n                contextMenuItems.push(action.id);\n            }\n        }\n    }\n\n    dispatch(reduxActions.updateFileActionMenuItems([toolbarItems, contextMenuItems]));\n};\n\nexport const thunkUpdateDefaultFileViewActionId = (fileActionId: Nilable<string>): ChonkyThunk => (\n    dispatch,\n    getState\n) => {\n    const { fileActionMap } = getState();\n    const action = fileActionId ? fileActionMap[fileActionId] : null;\n    if (action && action.fileViewConfig) {\n        dispatch(reduxActions.setFileViewConfig(action.fileViewConfig));\n    }\n};\n\nexport const thunkActivateSortAction = (fileActionId: Nilable<string>): ChonkyThunk => (dispatch, getState) => {\n    if (!fileActionId) return;\n\n    const { sortActionId: oldActionId, sortOrder: oldOrder, fileActionMap } = getState();\n    const action = fileActionMap[fileActionId];\n    if (!action || !action.sortKeySelector) return;\n\n    let order = oldOrder === SortOrder.ASC ? SortOrder.DESC : SortOrder.ASC;\n    if (oldActionId !== fileActionId) {\n        order = SortOrder.ASC;\n    }\n\n    dispatch(reduxActions.setSort({ actionId: fileActionId, order: order }));\n};\n\nexport const thunkApplySelectionTransform = (action: FileAction): ChonkyThunk => (dispatch, getState) => {\n    const selectionTransform = action.selectionTransform;\n    if (!selectionTransform) return;\n\n    const state = getState();\n    const prevSelection = new Set<string>(Object.keys(selectSelectionMap(state)));\n    const hiddenFileIds = new Set<string>(Object.keys(selectHiddenFileIdMap(state)));\n\n    const newSelection = selectionTransform({\n        prevSelection,\n        fileIds: selectCleanFileIds(state),\n        fileMap: selectFileMap(state),\n        hiddenFileIds,\n    });\n    if (!newSelection) return;\n\n    if (newSelection.size === 0) {\n        dispatch(reduxActions.clearSelection());\n    } else {\n        dispatch(reduxActions.selectFiles({ fileIds: Array.from(newSelection), reset: true }));\n    }\n};\n","import { MaybePromise, Undefinable } from 'tsdef';\n\nimport { FileActionData, FileActionState } from '../../types/action-handler.types';\nimport { FileAction } from '../../types/action.types';\nimport { ChonkyDispatch, ChonkyThunk } from '../../types/redux.types';\nimport { Logger } from '../../util/logger';\nimport { reduxActions } from '../reducers';\nimport {\n    selectContextMenuTriggerFile, selectExternalFileActionHandler, selectFileActionMap,\n    selectInstanceId, selectSelectedFiles\n} from '../selectors';\nimport { thunkActivateSortAction, thunkApplySelectionTransform } from './file-actions.thunks';\n\n/**\n * Thunk that dispatches actions to the external (user-provided) action handler.\n */\nexport const thunkDispatchFileAction = (data: FileActionData<FileAction>): ChonkyThunk => (_dispatch, getState) => {\n    Logger.debug(`FILE ACTION DISPATCH: [${data.id}]`, 'data:', data);\n    const state = getState();\n    const action = selectFileActionMap(state)[data.id];\n    const externalFileActionHandler = selectExternalFileActionHandler(state);\n    if (action) {\n        if (externalFileActionHandler) {\n            Promise.resolve(externalFileActionHandler(data)).catch(error =>\n                Logger.error(`User-defined file action handler threw an error: ${error.message}`)\n            );\n        }\n    } else {\n        Logger.warn(\n            `Internal components dispatched the \"${data.id}\" file action, but such ` + `action was not registered.`\n        );\n    }\n};\n\n/**\n * Thunk that is used by internal components (and potentially the user) to \"request\"\n * actions. When action is requested, Chonky \"prepares\" the action data by extracting it\n * from Redux state. Once action data is ready, Chonky executes some side effect and/or\n * dispatches the action to the external action handler.\n */\nexport const thunkRequestFileAction = <Action extends FileAction>(\n    action: Action,\n    payload: Action['__payloadType']\n): ChonkyThunk => (dispatch, getState) => {\n    Logger.debug(`FILE ACTION REQUEST: [${action.id}]`, 'action:', action, 'payload:', payload);\n    const state = getState();\n    const instanceId = selectInstanceId(state);\n\n    if (!selectFileActionMap(state)[action.id]) {\n        Logger.warn(\n            `The action \"${action.id}\" was requested, but it is not registered. The ` +\n                `action will still be dispatched, but this might indicate a bug in ` +\n                `the code. Please register your actions by passing them to ` +\n                `\"fileActions\" prop.`\n        );\n    }\n\n    // Determine files for the action if action requires selection\n    const selectedFiles = selectSelectedFiles(state);\n    const selectedFilesForAction = action.fileFilter ? selectedFiles.filter(action.fileFilter) : selectedFiles;\n    if (action.requiresSelection && selectedFilesForAction.length === 0) {\n        Logger.warn(\n            `Internal components requested the \"${action.id}\" file ` +\n                `action, but the selection for this action was empty. This ` +\n                `might a bug in the code of the presentational components.`\n        );\n        return;\n    }\n\n    const contextMenuTriggerFile = selectContextMenuTriggerFile(state);\n    const actionState: FileActionState<{}> = {\n        instanceId,\n        selectedFiles,\n        selectedFilesForAction,\n        contextMenuTriggerFile,\n    };\n\n    // === Update sort state if necessary\n    const sortKeySelector = action.sortKeySelector;\n    if (sortKeySelector) dispatch(thunkActivateSortAction(action.id));\n\n    // === Update file view state if necessary\n    const fileViewConfig = action.fileViewConfig;\n    if (fileViewConfig) dispatch(reduxActions.setFileViewConfig(fileViewConfig));\n\n    // === Update option state if necessary\n    const option = action.option;\n    if (option) dispatch(reduxActions.toggleOption(option.id));\n\n    // === Apply selection transform if necessary\n    const selectionTransform = action.selectionTransform;\n    if (selectionTransform) dispatch(thunkApplySelectionTransform(action));\n\n    // Apply the effect\n    const effect = action.effect;\n    let maybeEffectPromise: MaybePromise<boolean | undefined> = undefined;\n    if (effect) {\n        try {\n            maybeEffectPromise = effect({\n                action,\n                payload,\n                state: actionState,\n                reduxDispatch: dispatch,\n                getReduxState: getState,\n            }) as MaybePromise<boolean | undefined>;\n        } catch (error) {\n            Logger.error(`User-defined effect function for action ${action.id} threw an ` + `error: ${error.message}`);\n        }\n    }\n\n    // Dispatch the action to user code. Deliberately call it after all other\n    // operations are over.\n    return Promise.resolve(maybeEffectPromise)\n        .then(effectResult => {\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, effectResult);\n        })\n        .catch(error => {\n            Logger.error(\n                `User-defined effect function for action ${action.id} returned a ` +\n                    `promise that was rejected: ${error.message}`\n            );\n            const data: FileActionData<Action> = {\n                id: action.id,\n                action,\n                payload,\n                state: actionState,\n            };\n            triggerDispatchAfterEffect(dispatch, data, undefined);\n        });\n};\n\nexport const triggerDispatchAfterEffect = <Action extends FileAction>(\n    dispatch: ChonkyDispatch,\n    data: FileActionData<Action>,\n    effectResult: Undefinable<boolean>\n) => {\n    const preventDispatch = effectResult === true;\n    if (!preventDispatch) dispatch(thunkDispatchFileAction(data));\n};\n","export enum FileViewMode {\n    List = 'list',\n    Compact = 'compact',\n    Grid = 'grid',\n}\n\nexport type FileViewConfigList = {\n    mode: FileViewMode.List;\n    entryHeight: number;\n};\n\nexport type FileViewConfigGrid = {\n    mode: FileViewMode.Compact | FileViewMode.Grid;\n    entryWidth: number;\n    entryHeight: number;\n};\n\nexport type FileViewConfig = FileViewConfigList | FileViewConfigGrid;\n","import React from 'react';\n\nexport enum ChonkyIconName {\n    // Misc\n    loading = 'loading',\n    dropdown = 'dropdown',\n    placeholder = 'placeholder',\n\n    // File Actions: Drag & drop\n    dndDragging = 'dndDragging',\n    dndCanDrop = 'dndCanDrop',\n    dndCannotDrop = 'dndCannotDrop',\n\n    // File Actions: File operations\n    openFiles = 'openFiles',\n    openParentFolder = 'openParentFolder',\n    copy = 'copy',\n    paste = 'paste',\n    share = 'share',\n    search = 'search',\n    selectAllFiles = 'selectAllFiles',\n    clearSelection = 'clearSelection',\n\n    // File Actions: Sorting & options\n    sortAsc = 'sortAsc',\n    sortDesc = 'sortDesc',\n    toggleOn = 'toggleOn',\n    toggleOff = 'toggleOff',\n\n    // File Actions: File Views\n    list = 'list',\n    compact = 'compact',\n    smallThumbnail = 'smallThumbnail',\n    largeThumbnail = 'largeThumbnail',\n\n    // File Actions: Unsorted\n    folder = 'folder',\n    folderCreate = 'folderCreate',\n    folderOpen = 'folderOpen',\n    folderChainSeparator = 'folderChainSeparator',\n    download = 'download',\n    upload = 'upload',\n    trash = 'trash',\n    fallbackIcon = 'fallbackIcon',\n\n    // File modifiers\n    symlink = 'symlink',\n    hidden = 'hidden',\n\n    // Generic file types\n    file = 'file',\n    license = 'license',\n    code = 'code',\n    config = 'config',\n    model = 'model',\n    database = 'database',\n    text = 'text',\n    archive = 'archive',\n    image = 'image',\n    video = 'video',\n    info = 'info',\n    key = 'key',\n    lock = 'lock',\n    music = 'music',\n    terminal = 'terminal',\n    users = 'users',\n\n    // OS file types\n    linux = 'linux',\n    ubuntu = 'ubuntu',\n    windows = 'windows',\n\n    // Programming language file types\n    rust = 'rust',\n    python = 'python',\n    nodejs = 'nodejs',\n    php = 'php',\n\n    // Development tools file types\n    git = 'git',\n\n    // Brands file types\n    adobe = 'adobe',\n\n    // Other program file types\n    pdf = 'pdf',\n    excel = 'excel',\n    word = 'word',\n    flash = 'flash',\n}\n\nexport interface FileIconData {\n    icon: ChonkyIconName | string;\n    colorCode: number;\n}\n\nexport interface ChonkyIconProps {\n    icon: ChonkyIconName | string;\n    spin?: boolean;\n    className?: string;\n    fixedWidth?: boolean;\n    style?: React.CSSProperties;\n}\n","// Used in React hooks to indicate empty deps are intentional.\nimport { MaybePromise, Nullable, WritableProps } from 'tsdef';\n\nimport { FileAction, FileActionEffect } from '../types/action.types';\nimport { Logger } from './logger';\n\n// Used in contexts that need to provide some default value for a function.\n// eslint-disable-next-line no-unused-vars,@typescript-eslint/no-unused-vars\nexport const NOOP_FUNCTION = (...args: any[]) => {\n    Logger.warn(\n        `The \"NOOP_FUNCTION\" from the constants module was called. ` +\n            `This can indicate a bug in one of the components. Supplied args:`,\n        args\n    );\n};\n\nexport const isPromise = <T>(value: MaybePromise<T> | any): value is Promise<T> => {\n    if (typeof value !== 'object' || !value) return false;\n    const then = (value as Promise<T>).then;\n    return then && typeof then === 'function';\n};\n\nexport const defineFileAction = <Action extends FileAction>(\n    action: Action,\n    effect?: FileActionEffect<FileAction>\n): WritableProps<Action> => {\n    if (action.__payloadType !== undefined && (action.hotkeys || action.button)) {\n        const errorMessage =\n            `Invalid definition was provided for file action \"${action.id}\". Actions ` +\n            `that specify hotkeys or buttons cannot define a payload type. If ` +\n            `your application requires this functionality, define two actions ` +\n            `and chain them using effects.`;\n        Logger.error(errorMessage);\n        throw new Error(errorMessage);\n    }\n\n    action.effect = effect;\n    return action;\n};\n\n/**\n * Recursively check the current element and the parent elements, going bottom-up.\n * Returns the first element to match the predicate, otherwise returns null if such\n * element is not found.\n */\nexport const findElementAmongAncestors = (\n    maybeElement: HTMLElement | any,\n    predicate: (maybeElement: HTMLElement | any) => boolean\n): Nullable<HTMLElement> => {\n    if (!maybeElement) return maybeElement;\n\n    if (predicate(maybeElement)) return maybeElement;\n\n    if (maybeElement.parentElement) {\n        return findElementAmongAncestors(maybeElement.parentElement, predicate);\n    }\n\n    return null;\n};\n\nexport const elementIsInsideButton = (buttonCandidate: HTMLElement | any): boolean => {\n    return !!findElementAmongAncestors(\n        buttonCandidate,\n        (element: any) => element.tagName && element.tagName.toLowerCase() === 'button'\n    );\n};\n\nexport const getValueOrFallback = <T extends any>(\n    value: T | undefined,\n    fallback: T,\n    desiredType?: 'boolean' | 'string' | 'number'\n): NonNullable<T> => {\n    if (desiredType) {\n        return (typeof value === desiredType ? value : fallback) as NonNullable<T>;\n    }\n    return (value !== undefined ? value : fallback) as NonNullable<T>;\n};\n","import { ChonkyThunk } from '../../types/redux.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { reduxActions } from '../reducers';\nimport { selectors } from '../selectors';\n\nexport const reduxThunks = {\n    selectRange: (params: {\n        rangeStart: number;\n        rangeEnd: number;\n        reset?: boolean;\n    }): ChonkyThunk => (dispatch, getState) => {\n        const state = getState();\n        if (state.disableSelection) return;\n        const displayFileIds = selectors.getDisplayFileIds(state);\n        const fileIdsToSelect = displayFileIds\n            .slice(params.rangeStart, params.rangeEnd + 1)\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id])) as string[];\n        dispatch(\n            reduxActions.selectFiles({\n                fileIds: fileIdsToSelect,\n                reset: !!params.reset,\n            })\n        );\n    },\n};\n","import { reduxActions } from '../redux/reducers';\nimport {\n    getFileData, getIsFileSelected, selectDisableSelection, selectors, selectParentFolder,\n    selectSelectionSize\n} from '../redux/selectors';\nimport { reduxThunks } from '../redux/thunks';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport {\n    ChangeSelectionPayload, EndDragNDropPayload, KeyboardClickFilePayload, MouseClickFilePayload,\n    MoveFilesPayload, OpenFileContextMenuPayload, OpenFilesPayload, StartDragNDropPayload\n} from '../types/action-payloads.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { Logger } from '../util/logger';\nimport { ChonkyActions } from './index';\n\nexport const EssentialActions = {\n    /**\n     * Action that is dispatched when the user clicks on a file entry using their mouse.\n     * Both single clicks and double clicks trigger this action.\n     */\n    MouseClickFile: defineFileAction(\n        {\n            id: 'mouse_click_file',\n            __payloadType: {} as MouseClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (payload.clickType === 'double') {\n                if (FileHelper.isOpenable(payload.file)) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n\n                            // To simulate Windows Explorer and Nautilus behaviour,\n                            // a double click on a file only opens that file even if\n                            // there is a selection.\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else {\n                // We're dealing with a single click\n\n                const disableSelection = selectDisableSelection(getReduxState());\n                if (FileHelper.isSelectable(payload.file) && !disableSelection) {\n                    if (payload.ctrlKey) {\n                        // Multiple selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: false,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    } else if (payload.shiftKey) {\n                        // Range selection\n                        const lastClickIndex = selectors.getLastClickIndex(getReduxState());\n                        if (typeof lastClickIndex === 'number') {\n                            // We have the index of the previous click\n                            let rangeStart = lastClickIndex;\n                            let rangeEnd = payload.fileDisplayIndex;\n                            if (rangeStart > rangeEnd) {\n                                [rangeStart, rangeEnd] = [rangeEnd, rangeStart];\n                            }\n\n                            reduxDispatch(reduxThunks.selectRange({ rangeStart, rangeEnd }));\n                        } else {\n                            // Since we can't do a range selection, do a\n                            // multiple selection\n                            reduxDispatch(\n                                reduxActions.toggleSelection({\n                                    fileId: payload.file.id,\n                                    exclusive: false,\n                                })\n                            );\n                            reduxDispatch(\n                                reduxActions.setLastClickIndex({\n                                    index: payload.fileDisplayIndex,\n                                    fileId: payload.file.id,\n                                })\n                            );\n                        }\n                    } else {\n                        // Exclusive selection\n                        reduxDispatch(\n                            reduxActions.toggleSelection({\n                                fileId: payload.file.id,\n                                exclusive: true,\n                            })\n                        );\n                        reduxDispatch(\n                            reduxActions.setLastClickIndex({\n                                index: payload.fileDisplayIndex,\n                                fileId: payload.file.id,\n                            })\n                        );\n                    }\n                } else {\n                    if (!payload.ctrlKey && !disableSelection) {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                    reduxDispatch(\n                        reduxActions.setLastClickIndex({\n                            index: payload.fileDisplayIndex,\n                            fileId: payload.file.id,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when the user \"clicks\" on a file using their keyboard.\n     * Using Space and Enter keys counts as clicking.\n     */\n    KeyboardClickFile: defineFileAction(\n        {\n            id: 'keyboard_click_file',\n            __payloadType: {} as KeyboardClickFilePayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            reduxDispatch(\n                reduxActions.setLastClickIndex({\n                    index: payload.fileDisplayIndex,\n                    fileId: payload.file.id,\n                })\n            );\n            if (payload.enterKey) {\n                // We only dispatch the Open Files action here when the selection is\n                // empty. Otherwise, `Enter` key presses are handled by the\n                // hotkey manager for the Open Files action.\n                if (selectSelectionSize(getReduxState()) === 0) {\n                    reduxDispatch(\n                        thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                            targetFile: payload.file,\n                            files: [payload.file],\n                        })\n                    );\n                }\n            } else if (payload.spaceKey && FileHelper.isSelectable(payload.file)) {\n                reduxDispatch(\n                    reduxActions.toggleSelection({\n                        fileId: payload.file.id,\n                        exclusive: payload.ctrlKey,\n                    })\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user starts dragging some file.\n     */\n    StartDragNDrop: defineFileAction(\n        {\n            id: 'start_drag_n_drop',\n            __payloadType: {} as StartDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            const file = payload.draggedFile;\n            if (!getIsFileSelected(getReduxState(), file)) {\n                if (FileHelper.isSelectable(file)) {\n                    reduxDispatch(\n                        reduxActions.selectFiles({\n                            fileIds: [file.id],\n                            reset: true,\n                        })\n                    );\n                }\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user either cancels the drag & drop interaction,\n     * or drops a file somewhere.\n     */\n    EndDragNDrop: defineFileAction(\n        {\n            id: 'end_drag_n_drop',\n            __payloadType: {} as EndDragNDropPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            if (getIsFileSelected(getReduxState(), payload.destination)) {\n                // Can't drop a selection into itself\n                return;\n            }\n\n            const { draggedFile, selectedFiles } = payload as EndDragNDropPayload;\n            const droppedFiles = selectedFiles.length > 0 ? selectedFiles : [draggedFile];\n            reduxDispatch(\n                thunkRequestFileAction(ChonkyActions.MoveFiles, {\n                    ...payload,\n                    files: droppedFiles,\n                })\n            );\n        }\n    ),\n    /**\n     * Action that is dispatched when user moves files from one folder to another,\n     * usually by dragging & dropping some files into the folder.\n     */\n    MoveFiles: defineFileAction({\n        id: 'move_files',\n        __payloadType: {} as MoveFilesPayload,\n    } as const),\n    /**\n     * Action that is dispatched when the selection changes for any reason.\n     */\n    ChangeSelection: defineFileAction({\n        id: 'change_selection',\n        __payloadType: {} as ChangeSelectionPayload,\n    } as const),\n    /**\n     * Action that is dispatched when user wants to open some files. This action is\n     * often triggered by other actions.\n     */\n    OpenFiles: defineFileAction({\n        id: 'open_files',\n        __payloadType: {} as OpenFilesPayload,\n    } as const),\n    /**\n     * Action that is triggered when user wants to go up a directory.\n     */\n    OpenParentFolder: defineFileAction(\n        {\n            id: 'open_parent_folder',\n            hotkeys: ['backspace'],\n            button: {\n                name: 'Go up a directory',\n                toolbar: true,\n                contextMenu: false,\n                icon: ChonkyIconName.openParentFolder,\n                iconOnly: true,\n            },\n        } as const,\n        ({ reduxDispatch, getReduxState }) => {\n            const parentFolder = selectParentFolder(getReduxState());\n            if (FileHelper.isOpenable(parentFolder)) {\n                reduxDispatch(\n                    thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                        targetFile: parentFolder,\n                        files: [parentFolder],\n                    })\n                );\n            } else {\n                Logger.warn(\n                    'Open parent folder effect was triggered  even though the parent folder' +\n                        ' is not openable. This indicates a bug in presentation components.'\n                );\n            }\n        }\n    ),\n    /**\n     * Action that is dispatched when user opens the context menu, either by right click\n     * on something or using the context menu button on their keyboard.\n     */\n    OpenFileContextMenu: defineFileAction(\n        {\n            id: 'open_file_context_menu',\n            __payloadType: {} as OpenFileContextMenuPayload,\n        } as const,\n        ({ payload, reduxDispatch, getReduxState }) => {\n            // TODO: Check if the context menu component is actually enabled. There is a\n            //  chance it doesn't matter if it is enabled or not - if it is not mounted,\n            //  the action will simply have no effect. It also allows users to provide\n            //  their own components - however, users could also flip the \"context menu\n            //  component mounted\" switch...\n            const triggerFile = getFileData(getReduxState(), payload.triggerFileId);\n            if (triggerFile) {\n                const fileSelected = getIsFileSelected(getReduxState(), triggerFile);\n                if (!fileSelected) {\n                    // If file is selected, we leave the selection as is. If it is not\n                    // selected, it means user right clicked the file with no selection.\n                    // We simulate the Windows Explorer/Nautilus behaviour of moving\n                    // selection to this file.\n                    if (FileHelper.isSelectable(triggerFile)) {\n                        reduxDispatch(\n                            reduxActions.selectFiles({\n                                fileIds: [payload.triggerFileId],\n                                reset: true,\n                            })\n                        );\n                    } else {\n                        reduxDispatch(reduxActions.clearSelection());\n                    }\n                }\n            }\n\n            reduxDispatch(\n                reduxActions.showContextMenu({\n                    triggerFileId: payload.triggerFileId,\n                    mouseX: payload.clientX - 2,\n                    mouseY: payload.clientY - 4,\n                })\n            );\n        }\n    ),\n};\n","import { Nullable } from 'tsdef';\n\nimport { selectFocusSearchInput } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileSelectionTransform } from '../types/action.types';\nimport { FileViewMode } from '../types/file-view.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { FileHelper } from '../util/file-helper';\nimport { defineFileAction } from '../util/helpers';\nimport { EssentialActions } from './essential';\nimport { OptionIds } from './option-ids';\n\nexport const DefaultActions = {\n    /**\n     * Action that can be used to open currently selected files.\n     */\n    OpenSelection: defineFileAction(\n        {\n            id: 'open_selection',\n            hotkeys: ['enter'],\n            requiresSelection: true,\n            fileFilter: FileHelper.isOpenable,\n            button: {\n                name: 'Open selection',\n                toolbar: true,\n                contextMenu: true,\n                group: 'Actions',\n                icon: ChonkyIconName.openFiles,\n            },\n        } as const,\n        ({ state, reduxDispatch }) => {\n            reduxDispatch(\n                thunkRequestFileAction(EssentialActions.OpenFiles, {\n                    files: state.selectedFilesForAction!,\n                })\n            );\n            return undefined;\n        }\n    ),\n    /**\n     * Action that selects all files.\n     */\n    SelectAllFiles: defineFileAction({\n        id: 'select_all_files',\n        hotkeys: ['ctrl+a'],\n        button: {\n            name: 'Select all files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.selectAllFiles,\n        },\n        selectionTransform: (({ fileIds, hiddenFileIds }) => {\n            const newSelection = new Set<string>();\n            fileIds.map(fileId => {\n                // We don't need to check if file is selectable because Chonky does\n                // it own checks internally.\n                if (!hiddenFileIds.has(fileId)) newSelection.add(fileId);\n            });\n            return newSelection;\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that clear the file selection.\n     */\n    ClearSelection: defineFileAction({\n        id: 'clear_selection',\n        hotkeys: ['escape'],\n        button: {\n            name: 'Clear selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.clearSelection,\n        },\n        selectionTransform: (({ prevSelection }) => {\n            if (prevSelection.size === 0) return null;\n            return new Set<string>();\n        }) as FileSelectionTransform,\n    } as const),\n    /**\n     * Action that enables List view.\n     */\n    EnableListView: defineFileAction({\n        id: 'enable_list_view',\n        fileViewConfig: {\n            mode: FileViewMode.List,\n            entryHeight: 30,\n        },\n        button: {\n            name: 'Switch to List view',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Compact view. Note that compact view is still\n     * experimental and should not be used in production.\n     */\n    EnableCompactView: defineFileAction({\n        // TODO: Don't enable until compact view is fully supported\n        id: 'enable_compact_view',\n        fileViewConfig: {\n            mode: FileViewMode.Compact,\n            entryHeight: 40,\n            entryWidth: 220,\n        },\n        button: {\n            name: 'Switch to Compact view',\n            toolbar: true,\n            icon: ChonkyIconName.compact,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that enables Grid view.\n     */\n    EnableGridView: defineFileAction({\n        id: 'enable_grid_view',\n        fileViewConfig: { mode: FileViewMode.Grid, entryWidth: 165, entryHeight: 130 },\n        button: {\n            name: 'Switch to Grid view',\n            toolbar: true,\n            icon: ChonkyIconName.smallThumbnail,\n            iconOnly: true,\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.name`.\n     */\n    SortFilesByName: defineFileAction({\n        id: 'sort_files_by_name',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.name.toLowerCase() : undefined),\n        button: {\n            name: 'Sort by name',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.size`.\n     */\n    SortFilesBySize: defineFileAction({\n        id: 'sort_files_by_size',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.size : undefined),\n        button: {\n            name: 'Sort by size',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that sorts files by `file.modDate`.\n     */\n    SortFilesByDate: defineFileAction({\n        id: 'sort_files_by_date',\n        sortKeySelector: (file: Nullable<FileData>) => (file ? file.modDate : undefined),\n        button: {\n            name: 'Sort by date',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether hidden files are shown to the user or not.\n     */\n    ToggleHiddenFiles: defineFileAction({\n        id: 'toggle_hidden_files',\n        hotkeys: ['ctrl+h'],\n        option: {\n            id: OptionIds.ShowHiddenFiles,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show hidden files',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that toggles whether folders should appear before files regardless of\n     * current sort function.\n     */\n    ToggleShowFoldersFirst: defineFileAction({\n        id: 'toggle_show_folders_first',\n        option: {\n            id: OptionIds.ShowFoldersFirst,\n            defaultValue: true,\n        },\n        button: {\n            name: 'Show folders first',\n            toolbar: true,\n            group: 'Options',\n        },\n    } as const),\n    /**\n     * Action that focuses the search input when it is dispatched.\n     */\n    FocusSearchInput: defineFileAction(\n        {\n            id: 'focus_search_input',\n            hotkeys: ['ctrl+f'],\n        } as const,\n        ({ getReduxState }) => {\n            const focusSearchInput = selectFocusSearchInput(getReduxState());\n            if (focusSearchInput) focusSearchInput();\n        }\n    ),\n    /**\n     * Action that enables List view.\n     */\n    ToggleDarkMode: defineFileAction({\n        id: 'enable_dark_mode',\n        option: {\n            id: OptionIds.DarkMode,\n            defaultValue: false,\n        },\n        button: {\n            name: 'Enable dark mode',\n            toolbar: true,\n            icon: ChonkyIconName.list,\n            iconOnly: true,\n        },\n    } as const),\n};\n","import { ChonkyIconName } from '../types/icons.types';\nimport { defineFileAction } from '../util/helpers';\n\nexport const ExtraActions = {\n    /**\n     * Action that adds a button and shortcut to copy files.\n     */\n    CopyFiles: defineFileAction({\n        id: 'copy_files',\n        requiresSelection: true,\n        hotkeys: ['ctrl+c'],\n        button: {\n            name: 'Copy selection',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.copy,\n        },\n    } as const),\n    /**\n     * Action that adds a button to create a new folder.\n     */\n    CreateFolder: defineFileAction({\n        id: 'create_folder',\n        button: {\n            name: 'Create folder',\n            toolbar: true,\n            tooltip: 'Create a folder',\n            icon: ChonkyIconName.folderCreate,\n        },\n    } as const),\n    /**\n     * Action that adds a button to upload files.\n     */\n    UploadFiles: defineFileAction({\n        id: 'upload_files',\n        button: {\n            name: 'Upload files',\n            toolbar: true,\n            tooltip: 'Upload files',\n            icon: ChonkyIconName.upload,\n        },\n    } as const),\n    /**\n     * Action that adds a button to download files.\n     */\n    DownloadFiles: defineFileAction({\n        id: 'download_files',\n        requiresSelection: true,\n        button: {\n            name: 'Download files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.download,\n        },\n    } as const),\n    /**\n     * Action that adds a button and shortcut to delete files.\n     */\n    DeleteFiles: defineFileAction({\n        id: 'delete_files',\n        requiresSelection: true,\n        hotkeys: ['delete'],\n        button: {\n            name: 'Delete files',\n            toolbar: true,\n            contextMenu: true,\n            group: 'Actions',\n            icon: ChonkyIconName.trash,\n        },\n    } as const),\n};\n","import { DefaultActions } from './default';\nimport { EssentialActions } from './essential';\nimport { ExtraActions } from './extra';\n\nexport { OptionIds } from './option-ids';\n\nexport const ChonkyActions = {\n    ...EssentialActions,\n    ...DefaultActions,\n    ...ExtraActions,\n};\n\nexport const EssentialFileActions = [\n    ChonkyActions.MouseClickFile,\n    ChonkyActions.KeyboardClickFile,\n    ChonkyActions.StartDragNDrop,\n    ChonkyActions.EndDragNDrop,\n    ChonkyActions.MoveFiles,\n    ChonkyActions.ChangeSelection,\n    ChonkyActions.OpenFiles,\n    ChonkyActions.OpenParentFolder,\n    ChonkyActions.OpenFileContextMenu,\n];\n\nexport const DefaultFileActions = [\n    ChonkyActions.OpenSelection,\n    ChonkyActions.SelectAllFiles,\n    ChonkyActions.ClearSelection,\n    ChonkyActions.EnableListView,\n    // TODO: Don't enable until compact view is fully supported\n    // ChonkyActions.EnableCompactView,\n    ChonkyActions.EnableGridView,\n    ChonkyActions.SortFilesByName,\n    ChonkyActions.SortFilesBySize,\n    ChonkyActions.SortFilesByDate,\n    ChonkyActions.ToggleHiddenFiles,\n    ChonkyActions.ToggleShowFoldersFirst,\n    ChonkyActions.FocusSearchInput,\n];\n","import { ChonkyActions } from '../action-definitions/index';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\n\nexport const initialRootState: RootState = {\n    instanceId: 'CHONKY_INVALID_ID', // should be overwritten by preloaded state\n\n    externalFileActionHandler: null,\n\n    rawFileActions: [],\n    fileActionsErrorMessages: [],\n    fileActionMap: {},\n    fileActionIds: [],\n    toolbarItems: [],\n    contextMenuItems: [],\n\n    rawFolderChain: null,\n    folderChainErrorMessages: [],\n    folderChain: [],\n\n    rawFiles: [],\n    filesErrorMessages: [],\n    fileMap: {},\n    fileIds: [],\n    cleanFileIds: [],\n\n    sortedFileIds: [],\n    hiddenFileIdMap: {},\n\n    focusSearchInput: null,\n    searchString: '',\n    searchMode: 'currentFolder',\n\n    selectionMap: {},\n    disableSelection: false,\n\n    fileViewConfig: ChonkyActions.EnableGridView.fileViewConfig,\n\n    sortActionId: null,\n    sortOrder: SortOrder.ASC,\n\n    optionMap: {},\n\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableDragAndDrop: false,\n    clearSelectionOnOutsideClick: true,\n\n    lastClick: null,\n\n    contextMenuMounted: false,\n    contextMenuConfig: null,\n};\n","import { Nilable, Nullable } from 'tsdef';\n\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nimport { GenericFileActionHandler } from '../types/action-handler.types';\nimport { FileActionMenuItem } from '../types/action-menus.types';\nimport { FileAction, FileActionMap } from '../types/action.types';\nimport { ContextMenuConfig } from '../types/context-menu.types';\nimport { FileViewConfig } from '../types/file-view.types';\nimport { FileArray, FileIdTrueMap, FileMap } from '../types/file.types';\nimport { OptionMap } from '../types/options.types';\nimport { RootState } from '../types/redux.types';\nimport { SortOrder } from '../types/sort.types';\nimport { ThumbnailGenerator } from '../types/thumbnails.types';\nimport { FileHelper } from '../util/file-helper';\nimport { sanitizeInputArray } from './files-transforms';\nimport { initialRootState } from './state';\n\nconst reducers = {\n    setExternalFileActionHandler(\n        state: RootState,\n        action: PayloadAction<Nilable<GenericFileActionHandler<FileAction>>>\n    ) {\n        state.externalFileActionHandler = action.payload ?? null;\n    },\n    setRawFileActions(state: RootState, action: PayloadAction<FileAction[] | any>) {\n        state.rawFileActions = action.payload;\n    },\n    setFileActionsErrorMessages(state: RootState, action: PayloadAction<string[]>) {\n        state.fileActionsErrorMessages = action.payload;\n    },\n    setFileActions(state: RootState, action: PayloadAction<FileAction[]>) {\n        const fileActionMap: FileActionMap = {};\n        action.payload.map(a => (fileActionMap[a.id] = a));\n        const fileIds = action.payload.map(a => a.id);\n\n        state.fileActionMap = fileActionMap as FileMap;\n        state.fileActionIds = fileIds;\n    },\n    updateFileActionMenuItems(state: RootState, action: PayloadAction<[FileActionMenuItem[], FileActionMenuItem[]]>) {\n        [state.toolbarItems, state.contextMenuItems] = action.payload;\n    },\n    setRawFolderChain(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFolderChain = action.payload;\n        const { sanitizedArray: folderChain, errorMessages } = sanitizeInputArray('folderChain', rawFolderChain);\n        state.rawFolderChain = rawFolderChain;\n        state.folderChain = folderChain;\n        state.folderChainErrorMessages = errorMessages;\n    },\n    setRawFiles(state: RootState, action: PayloadAction<FileArray | any>) {\n        const rawFiles = action.payload;\n        const { sanitizedArray: files, errorMessages } = sanitizeInputArray('files', rawFiles);\n        state.rawFiles = rawFiles;\n        state.filesErrorMessages = errorMessages;\n\n        const fileMap: FileMap = {};\n        files.forEach(f => {\n            if (f) fileMap[f.id] = f;\n        });\n        const fileIds = files.map(f => (f ? f.id : null));\n        const cleanFileIds = fileIds.filter(f => !!f) as string[];\n\n        state.fileMap = fileMap;\n        state.fileIds = fileIds;\n        state.cleanFileIds = cleanFileIds;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (!fileMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setSortedFileIds(state: RootState, action: PayloadAction<Nullable<string>[]>) {\n        state.sortedFileIds = action.payload;\n    },\n    setHiddenFileIds(state: RootState, action: PayloadAction<FileIdTrueMap>) {\n        state.hiddenFileIdMap = action.payload;\n\n        // Cleanup selection\n        for (const selectedFileId of Object.keys(state.selectionMap)) {\n            if (state.hiddenFileIdMap[selectedFileId]) {\n                delete state.selectionMap[selectedFileId];\n            }\n        }\n    },\n    setFocusSearchInput(state: RootState, action: PayloadAction<Nullable<() => void>>) {\n        state.focusSearchInput = action.payload;\n    },\n    setSearchString(state: RootState, action: PayloadAction<string>) {\n        state.searchString = action.payload;\n    },\n    selectAllFiles(state: RootState) {\n        state.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (id ? (state.selectionMap[id] = true) : null));\n    },\n    selectFiles(state: RootState, action: PayloadAction<{ fileIds: string[]; reset: boolean }>) {\n        if (state.disableSelection) return;\n        if (action.payload.reset) state.selectionMap = {};\n        action.payload.fileIds\n            .filter(id => id && FileHelper.isSelectable(state.fileMap[id]))\n            .map(id => (state.selectionMap[id] = true));\n    },\n    toggleSelection(state: RootState, action: PayloadAction<{ fileId: string; exclusive: boolean }>) {\n        if (state.disableSelection) return;\n        const oldValue = !!state.selectionMap[action.payload.fileId];\n        if (action.payload.exclusive) state.selectionMap = {};\n        if (oldValue) delete state.selectionMap[action.payload.fileId];\n        else if (FileHelper.isSelectable(state.fileMap[action.payload.fileId])) {\n            state.selectionMap[action.payload.fileId] = true;\n        }\n    },\n    clearSelection(state: RootState) {\n        if (state.disableSelection) return;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setSelectionDisabled(state: RootState, action: PayloadAction<boolean>) {\n        state.disableSelection = action.payload;\n        if (Object.keys(state.selectionMap).length !== 0) state.selectionMap = {};\n    },\n    setFileViewConfig(state: RootState, action: PayloadAction<FileViewConfig>) {\n        state.fileViewConfig = action.payload;\n    },\n    setSort(state: RootState, action: PayloadAction<{ actionId: string; order: SortOrder }>) {\n        state.sortActionId = action.payload.actionId;\n        state.sortOrder = action.payload.order;\n    },\n    setOptionDefaults(state: RootState, action: PayloadAction<OptionMap>) {\n        for (const optionId of Object.keys(action.payload)) {\n            if (optionId in state.optionMap) continue;\n            state.optionMap[optionId] = action.payload[optionId];\n        }\n    },\n    toggleOption(state: RootState, action: PayloadAction<string>) {\n        state.optionMap[action.payload] = !state.optionMap[action.payload];\n    },\n    setThumbnailGenerator(state: RootState, action: PayloadAction<Nullable<ThumbnailGenerator>>) {\n        state.thumbnailGenerator = action.payload;\n    },\n    setDoubleClickDelay(state: RootState, action: PayloadAction<number>) {\n        state.doubleClickDelay = action.payload;\n    },\n    setDisableDragAndDrop(state: RootState, action: PayloadAction<boolean>) {\n        state.disableDragAndDrop = action.payload;\n    },\n    setClearSelectionOnOutsideClick(state: RootState, action: PayloadAction<boolean>) {\n        state.clearSelectionOnOutsideClick = action.payload;\n    },\n    setLastClickIndex(state: RootState, action: PayloadAction<Nullable<{ index: number; fileId: string }>>) {\n        state.lastClick = action.payload;\n    },\n    setContextMenuMounted(state: RootState, action: PayloadAction<boolean>) {\n        state.contextMenuMounted = action.payload;\n    },\n    showContextMenu(state: RootState, action: PayloadAction<ContextMenuConfig>) {\n        state.contextMenuConfig = action.payload;\n    },\n    hideContextMenu(state: RootState) {\n        if (!state.contextMenuConfig) return;\n        state.contextMenuConfig = null;\n    },\n};\n\nexport const { actions: reduxActions, reducer: rootReducer } = createSlice({\n    name: 'root',\n    initialState: initialRootState,\n    reducers,\n});\n","import { useEffect } from 'react';\nimport watch from 'redux-watch';\n\nimport { Store } from '@reduxjs/toolkit';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { RootState } from '../types/redux.types';\nimport { FileSelection } from '../types/selection.types';\nimport { selectSelectedFileIds, selectSelectionMap } from './selectors';\nimport { thunkRequestFileAction } from './thunks/dispatchers.thunks';\n\nexport const useStoreWatchers = (store: Store<RootState>) => {\n    useEffect(() => {\n        const selectionWatcher = watch(() => selectSelectionMap(store.getState()));\n        const onSelectionChange = (\n            newSelection: FileSelection,\n            oldSelection: FileSelection\n        ) => {\n            // We don't check for deep equality here as we expect the\n            // reducers to prevent all unnecessary updates.\n            if (newSelection === oldSelection) return;\n\n            // Notify users the selection has changed.\n            const selectedFilesIds = selectSelectedFileIds(store.getState());\n            const selection = new Set<string>(selectedFilesIds);\n            store.dispatch(\n                thunkRequestFileAction(ChonkyActions.ChangeSelection, {\n                    selection,\n                }) as any\n            );\n        };\n\n        const unsubscribeCallbacks = [\n            store.subscribe(selectionWatcher(onSelectionChange)),\n        ];\n        return () => {\n            for (const unsubscribe of unsubscribeCallbacks) unsubscribe();\n        };\n    }, [store]);\n};\n","import { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { configureStore } from '@reduxjs/toolkit';\n\nimport { RootState } from '../types/redux.types';\nimport { useStaticValue } from '../util/hooks-helpers';\nimport { rootReducer } from './reducers';\nimport { initialRootState } from './state';\nimport { useStoreWatchers } from './watchers';\n\nexport const useChonkyStore = (chonkyInstanceId: string) => {\n    const store = useStaticValue(() => {\n        const preloadedState: RootState = {\n            ...initialRootState,\n            instanceId: chonkyInstanceId,\n        };\n\n        return configureStore({\n            preloadedState: preloadedState as any,\n            reducer: rootReducer,\n            middleware: getDefaultMiddleware =>\n                getDefaultMiddleware({\n                    serializableCheck: false,\n                }),\n            devTools: { name: `chonky_${chonkyInstanceId}` },\n        });\n    });\n    useStoreWatchers(store);\n    return store;\n};\n\n/**\n * Hook that can be used with parametrized selectors.\n */\nexport const useParamSelector = <Args extends Array<any>, Value>(\n    parametrizedSelector: (...args: Args) => (state: RootState) => Value,\n    ...selectorParams: Args\n) => {\n    const selector = useCallback(\n        (state: RootState) => parametrizedSelector(...selectorParams)(state),\n        // eslint-disable-next-line\n        [parametrizedSelector, ...selectorParams]\n    );\n    return useSelector(selector);\n};\n\n/**\n * DTE - DispatchThunkEffect. This method is used to decrease code duplication in\n * main Chonky method.\n */\nexport const useDTE = <Args extends Array<any>>(actionCreator: (...args: Args) => any, ...selectorParams: Args) => {\n    const dispatch = useDispatch();\n    useEffect(\n        () => {\n            dispatch(actionCreator(...selectorParams));\n        },\n        // eslint-disable-next-line\n        [dispatch, actionCreator, ...selectorParams]\n    );\n};\n\nexport const usePropReduxUpdate = <Payload extends any>(actionCreator: (payload: Payload) => any, payload: Payload) => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(actionCreator(payload));\n    }, [dispatch, actionCreator, payload]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { ChonkyIconProps } from '../../types/icons.types';\n\nexport const ChonkyIconPlaceholder: React.FC<ChonkyIconProps> = () => {\n    // This component should not be rendered unless the user has misconfigured Chonky\n    const title =\n        'No icon component found. Please follow Chonky installation instructions to ' +\n        'provide a pre-made icon component (or a custom icon).';\n    return <span title={title}></span>;\n};\n","import { ChonkyActions } from '../action-definitions/index';\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileBrowserProps } from '../types/file-browser.types';\n\nexport type ChonkyConfig = Pick<\n    FileBrowserProps,\n    | 'fileActions'\n    | 'onFileAction'\n    | 'thumbnailGenerator'\n    | 'doubleClickDelay'\n    | 'disableSelection'\n    | 'disableDefaultFileActions'\n    | 'disableDragAndDrop'\n    | 'disableDragAndDropProvider'\n    | 'defaultSortActionId'\n    | 'defaultFileViewActionId'\n    | 'clearSelectionOnOutsideClick'\n    | 'iconComponent'\n    | 'darkMode'\n    | 'i18n'\n>;\n\nexport const defaultConfig: ChonkyConfig = {\n    fileActions: null,\n    onFileAction: null,\n    thumbnailGenerator: null,\n    doubleClickDelay: 300,\n    disableSelection: false,\n    disableDefaultFileActions: false,\n    disableDragAndDrop: false,\n    disableDragAndDropProvider: false,\n    defaultSortActionId: ChonkyActions.SortFilesByName.id,\n    defaultFileViewActionId: ChonkyActions.EnableGridView.id,\n    clearSelectionOnOutsideClick: true,\n    iconComponent: ChonkyIconPlaceholder,\n    darkMode: false,\n    i18n: {},\n};\n\nexport const setChonkyDefaults = (config: Partial<ChonkyConfig>) => {\n    for (const key of Object.keys(defaultConfig)) {\n        if (key in config) {\n            defaultConfig[key as keyof ChonkyConfig] = config[\n                key as keyof ChonkyConfig\n            ] as any;\n        }\n    }\n};\n","import filesize from 'filesize';\nimport { createContext, useContext, useMemo } from 'react';\nimport { IntlShape, useIntl } from 'react-intl';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { FileAction } from '../types/action.types';\nimport { FileData } from '../types/file.types';\nimport { ChonkyFormatters } from '../types/i18n.types';\nimport { FileHelper } from './file-helper';\n\nexport enum I18nNamespace {\n    Toolbar = 'toolbar',\n    FileList = 'fileList',\n    FileEntry = 'fileEntry',\n    FileContextMenu = 'contextMenu',\n\n    FileActions = 'actions',\n    FileActionGroups = 'actionGroups',\n}\n\nexport const getI18nId = (namespace: I18nNamespace, stringId: string): string =>\n    `chonky.${namespace}.${stringId}`;\n\nexport const getActionI18nId = (actionId: string, stringId: string): string =>\n    `chonky.${I18nNamespace.FileActions}.${actionId}.${stringId}`;\n\nexport const useLocalizedFileActionGroup = (groupName: string) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        return intl.formatMessage({\n            id: getI18nId(I18nNamespace.FileActionGroups, groupName),\n            defaultMessage: groupName,\n        });\n    }, [groupName, intl]);\n};\n\nexport const useLocalizedFileActionStrings = (action: Nullable<FileAction>) => {\n    const intl = useIntl();\n    return useMemo(() => {\n        if (!action) {\n            return {\n                buttonName: '',\n                buttonTooltip: undefined,\n            };\n        }\n\n        const buttonName = intl.formatMessage({\n            id: getActionI18nId(action.id, 'button.name'),\n            defaultMessage: action.button?.name,\n        });\n\n        let buttonTooltip: Undefinable<string> = undefined;\n        if (action.button?.tooltip) {\n            // We only translate the tooltip if the original action has a tooltip.\n            buttonTooltip = intl.formatMessage({\n                id: getActionI18nId(action.id, 'button.tooltip'),\n                defaultMessage: action.button?.tooltip,\n            });\n        }\n\n        return {\n            buttonName,\n            buttonTooltip,\n        };\n    }, [action, intl]);\n};\n\nexport const useLocalizedFileEntryStrings = (file: Nullable<FileData>) => {\n    const intl = useIntl();\n    const formatters = useContext(ChonkyFormattersContext);\n    return useMemo(() => {\n        return {\n            fileModDateString: formatters.formatFileModDate(intl, file),\n            fileSizeString: formatters.formatFileSize(intl, file),\n        };\n    }, [file, formatters, intl]);\n};\n\nexport const defaultFormatters: ChonkyFormatters = {\n    formatFileModDate: (\n        intl: IntlShape,\n        file: Nullable<FileData>\n    ): Nullable<string> => {\n        const safeModDate = FileHelper.getModDate(file);\n        if (safeModDate) {\n            return intl.formatDate(safeModDate, {\n                dateStyle: 'medium',\n                timeStyle: 'short',\n            });\n        } else {\n            return null;\n        }\n    },\n    formatFileSize: (_intl: IntlShape, file: Nullable<FileData>): Nullable<string> => {\n        if (!file || typeof file.size !== 'number') return null;\n\n        const size = file.size;\n        const sizeData = filesize(size, { bits: false, output: 'object' }) as any;\n        if (sizeData.symbol === 'B') {\n            return `${Math.round(sizeData.value / 10) / 100.0} KB`;\n        } else if (sizeData.symbol === 'KB') {\n            return `${Math.round(sizeData.value)} ${sizeData.symbol}`;\n        }\n        return `${sizeData.value} ${sizeData.symbol}`;\n    },\n};\n\nexport const ChonkyFormattersContext = createContext(defaultFormatters);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2019\n * @license MIT\n */\n\nimport { createContext, ElementType, useMemo } from 'react';\n\nimport ExactTrie from 'exact-trie';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyIconPlaceholder } from '../components/internal/ChonkyIconPlaceholder';\nimport { FileData } from '../types/file.types';\nimport { ChonkyIconName, ChonkyIconProps, FileIconData } from '../types/icons.types';\n\nexport const ChonkyIconContext = createContext<ElementType<ChonkyIconProps>>(ChonkyIconPlaceholder);\n\nexport const VideoExtensions: string[] = [\n    '3g2',\n    '3gp',\n    '3gpp',\n    'asf',\n    'asx',\n    'avi',\n    'dvb',\n    'f4v',\n    'fli',\n    'flv',\n    'fvt',\n    'h261',\n    'h263',\n    'h264',\n    'jpgm',\n    'jpgv',\n    'jpm',\n    'm1v',\n    'm2v',\n    'm4u',\n    'm4v',\n    'mj2',\n    'mjp2',\n    'mk3d',\n    'mks',\n    'mkv',\n    'mng',\n    'mov',\n    'movie',\n    'mp4',\n    'mp4v',\n    'mpe',\n    'mpeg',\n    'mpg',\n    'mpg4',\n    'mxu',\n    'ogv',\n    'pyv',\n    'qt',\n    'smv',\n    'ts',\n    'uvh',\n    'uvm',\n    'uvp',\n    'uvs',\n    'uvu',\n    'uvv',\n    'uvvh',\n    'uvvm',\n    'uvvp',\n    'uvvs',\n    'uvvu',\n    'uvvv',\n    'viv',\n    'vob',\n    'webm',\n    'wm',\n    'wmv',\n    'wmx',\n    'wvx',\n];\nexport const ImageExtensions: string[] = [\n    '3ds',\n    'apng',\n    'azv',\n    'bmp',\n    'bmp',\n    'btif',\n    'cgm',\n    'cmx',\n    'djv',\n    'djvu',\n    'drle',\n    'dwg',\n    'dxf',\n    'emf',\n    'exr',\n    'fbs',\n    'fh',\n    'fh4',\n    'fh5',\n    'fh7',\n    'fhc',\n    'fits',\n    'fpx',\n    'fst',\n    'g3',\n    'gif',\n    'heic',\n    'heics',\n    'heif',\n    'heifs',\n    'ico',\n    'ico',\n    'ief',\n    'jls',\n    'jng',\n    'jp2',\n    'jpe',\n    'jpeg',\n    'jpf',\n    'jpg',\n    'jpg2',\n    'jpm',\n    'jpx',\n    'jxr',\n    'ktx',\n    'mdi',\n    'mmr',\n    'npx',\n    'pbm',\n    'pct',\n    'pcx',\n    'pcx',\n    'pgm',\n    'pic',\n    'png',\n    'pnm',\n    'ppm',\n    'psd',\n    'pti',\n    'ras',\n    'rgb',\n    'rlc',\n    'sgi',\n    'sid',\n    'sub',\n    'svg',\n    'svgz',\n    't38',\n    'tap',\n    'tfx',\n    'tga',\n    'tif',\n    'tiff',\n    'uvg',\n    'uvi',\n    'uvvg',\n    'uvvi',\n    'vtf',\n    'wbmp',\n    'wdp',\n    'webp',\n    'wmf',\n    'xbm',\n    'xif',\n    'xpm',\n    'xwd',\n];\nexport const AudioExtensions: string[] = [\n    '3gpp',\n    'aac',\n    'adp',\n    'aif',\n    'aifc',\n    'aiff',\n    'au',\n    'caf',\n    'dra',\n    'dts',\n    'dtshd',\n    'ecelp4800',\n    'ecelp7470',\n    'ecelp9600',\n    'eol',\n    'flac',\n    'kar',\n    'lvp',\n    'm2a',\n    'm3a',\n    'm3u',\n    'm4a',\n    'm4a',\n    'mid',\n    'midi',\n    'mka',\n    'mp2',\n    'mp2a',\n    'mp3',\n    'mp3',\n    'mp4a',\n    'mpga',\n    'oga',\n    'ogg',\n    'pya',\n    'ra',\n    'ra',\n    'ram',\n    'rip',\n    'rmi',\n    'rmp',\n    's3m',\n    'sil',\n    'snd',\n    'spx',\n    'uva',\n    'uvva',\n    'wav',\n    'wav',\n    'wav',\n    'wax',\n    'weba',\n    'wma',\n    'xm',\n];\nexport const ColorsLight: string[] = [\n    '#bbbbbb',\n    '#d65c5c',\n    '#d6665c',\n    '#d6705c',\n    '#d67a5c',\n    '#d6855c',\n    '#d68f5c',\n    '#d6995c',\n    '#d6a35c',\n    '#d6ad5c',\n    '#d6b85c',\n    '#d6c25c',\n    '#d6cc5c',\n    '#d6d65c',\n    '#ccd65c',\n    '#c2d65c',\n    '#b8d65c',\n    '#add65c',\n    '#a3d65c',\n    '#99d65c',\n    '#8fd65c',\n    '#85d65c',\n    '#7ad65c',\n    '#70d65c',\n    '#66d65c',\n    '#5cd65c',\n    '#5cd666',\n    '#5cd670',\n    '#5cd67a',\n    '#5cd685',\n    '#5cd68f',\n    '#5cd699',\n    '#5cd6a3',\n    '#5cd6ad',\n    '#5cd6b8',\n    '#5cd6c2',\n    '#5cd6cc',\n    '#5cd6d6',\n    '#5cccd6',\n    '#5cc2d6',\n    '#5cb8d6',\n    '#5cadd6',\n    '#5ca3d6',\n    '#5c99d6',\n    '#5c8fd6',\n    '#5c85d6',\n    '#5c7ad6',\n    '#5c70d6',\n    '#5c66d6',\n    '#5c5cd6',\n    '#665cd6',\n    '#705cd6',\n    '#7a5cd6',\n    '#855cd6',\n    '#8f5cd6',\n    '#995cd6',\n    '#a35cd6',\n    '#ad5cd6',\n    '#b85cd6',\n    '#c25cd6',\n    '#cc5cd6',\n    '#d65cd6',\n    '#d65ccc',\n    '#d65cc2',\n    '#d65cb8',\n    '#d65cad',\n    '#d65ca3',\n    '#d65c99',\n    '#d65c8f',\n    '#d65c85',\n    '#d65c7a',\n    '#d65c70',\n    '#d65c66',\n];\nexport const ColorsDark: string[] = [\n    '#777',\n    '#8f3d3d',\n    '#8f443d',\n    '#8f4b3d',\n    '#8f523d',\n    '#8f583d',\n    '#8f5f3d',\n    '#8f663d',\n    '#8f6d3d',\n    '#8f743d',\n    '#8f7a3d',\n    '#8f813d',\n    '#8f883d',\n    '#8f8f3d',\n    '#888f3d',\n    '#818f3d',\n    '#7a8f3d',\n    '#748f3d',\n    '#6d8f3d',\n    '#668f3d',\n    '#5f8f3d',\n    '#588f3d',\n    '#528f3d',\n    '#4b8f3d',\n    '#448f3d',\n    '#3d8f3d',\n    '#3d8f44',\n    '#3d8f4b',\n    '#3d8f52',\n    '#3d8f58',\n    '#3d8f5f',\n    '#3d8f66',\n    '#3d8f6d',\n    '#3d8f74',\n    '#3d8f7a',\n    '#3d8f81',\n    '#3d8f88',\n    '#3d8f8f',\n    '#3d888f',\n    '#3d818f',\n    '#3d7a8f',\n    '#3d748f',\n    '#3d6d8f',\n    '#3d668f',\n    '#3d5f8f',\n    '#3d588f',\n    '#3d528f',\n    '#3d4b8f',\n    '#3d448f',\n    '#3d3d8f',\n    '#443d8f',\n    '#4b3d8f',\n    '#523d8f',\n    '#583d8f',\n    '#5f3d8f',\n    '#663d8f',\n    '#6d3d8f',\n    '#743d8f',\n    '#7a3d8f',\n    '#813d8f',\n    '#883d8f',\n    '#8f3d8f',\n    '#8f3d88',\n    '#8f3d81',\n    '#8f3d7a',\n    '#8f3d74',\n    '#8f3d6d',\n    '#8f3d66',\n    '#8f3d5f',\n    '#8f3d58',\n    '#8f3d52',\n    '#8f3d4b',\n    '#8f3d44',\n];\n\nconst getIconTrie = () => {\n    let colourIndex = 0;\n    const step = 5;\n\n    const IconsToExtensions = [\n        // Generic file types\n        [ChonkyIconName.license, ['license']],\n        [ChonkyIconName.config, ['sfk', 'ini', 'yml', 'toml', 'iml']],\n        [ChonkyIconName.model, ['3ds', 'obj', 'ply', 'fbx']],\n        [ChonkyIconName.database, ['csv', 'json', 'sql', 'sqlite', 'sqlite3', 'npy', 'npz', 'rec', 'idx', 'hdf5']],\n        [ChonkyIconName.text, ['txt', 'md', 'mdx']],\n        [ChonkyIconName.archive, ['zip', 'rar', 'tar', 'tar.gz', '7z']],\n        [ChonkyIconName.image, ImageExtensions],\n        [ChonkyIconName.video, VideoExtensions],\n        [ChonkyIconName.code, ['html', 'php', 'css', 'sass', 'scss', 'less', 'cpp', 'h', 'hpp', 'c', 'xml']],\n        [ChonkyIconName.info, ['bib', 'readme', 'nfo']],\n        [ChonkyIconName.key, ['pem', 'pub']],\n        [ChonkyIconName.lock, ['lock', 'lock.json', 'shrinkwrap.json']],\n        [ChonkyIconName.music, AudioExtensions],\n        [ChonkyIconName.terminal, ['run', 'sh']],\n        [ChonkyIconName.trash, ['.Trashes']],\n        [ChonkyIconName.users, ['authors', 'contributors']],\n\n        // OS file types\n        [ChonkyIconName.linux, ['AppImage']],\n        [ChonkyIconName.ubuntu, ['deb']],\n        [ChonkyIconName.windows, ['exe']],\n\n        // Programming language file types\n        [ChonkyIconName.rust, ['rs', 'rlib']],\n        [ChonkyIconName.python, ['py', 'ipynb']],\n        [ChonkyIconName.nodejs, ['js', 'jsx', 'ts', 'tsx', 'd.ts']],\n        [ChonkyIconName.php, ['php']],\n\n        // Development tools file types\n        [ChonkyIconName.git, ['.gitignore']],\n\n        // Brands file types\n        [ChonkyIconName.adobe, ['psd']],\n\n        // Other program file types\n        [ChonkyIconName.pdf, ['pdf']],\n        [ChonkyIconName.excel, ['xls', 'xlsx']],\n        [ChonkyIconName.word, ['doc', 'docx', 'odt']],\n        [ChonkyIconName.flash, ['swf']],\n    ] as const;\n\n    const exactTrie = new ExactTrie({ ignoreCase: true });\n    for (const pair of IconsToExtensions) {\n        const [icon, extensions] = pair;\n\n        for (let i = 0; i < extensions.length; ++i) {\n            colourIndex += step;\n            const colorCode = (colourIndex % (ColorsLight.length - 1)) + 1;\n            const iconData: FileIconData = {\n                icon,\n                colorCode,\n            };\n            exactTrie.put(extensions[i], iconData, true);\n        }\n    }\n\n    return exactTrie;\n};\n\nconst iconTrie = getIconTrie();\n\nexport const useIconData = (file: Nullable<FileData>): FileIconData => {\n    return useMemo(() => {\n        if (!file) return { icon: ChonkyIconName.loading, colorCode: 0 };\n        if (file.isDir === true) return { icon: ChonkyIconName.folder, colorCode: 0 };\n\n        const match = iconTrie.getWithCheckpoints(file.name, '.', true);\n        return match ? match : { icon: ChonkyIconName.file, colorCode: 32 };\n    }, [file]);\n};\n","import { Theme as MuiTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\nimport { createUseStyles } from 'react-jss';\nimport { DeepPartial } from 'tsdef';\n\nexport const lightTheme = {\n    colors: {\n        debugRed: '#fabdbd',\n        debugBlue: '#bdd8fa',\n        debugGreen: '#d2fabd',\n        debugPurple: '#d2bdfa',\n        debugYellow: '#fae9bd',\n\n        textActive: '#09f',\n    },\n\n    fontSizes: {\n        rootPrimary: 15,\n    },\n\n    margins: {\n        rootLayoutMargin: 8,\n    },\n\n    toolbar: {\n        size: 30,\n        lineHeight: '30px', // `px` suffix is required for `line-height` fields to work\n        fontSize: 15,\n        buttonRadius: 4,\n    },\n\n    dnd: {\n        canDropColor: 'green',\n        cannotDropColor: 'red',\n        canDropMask: 'rgba(180, 235, 180, 0.75)',\n        cannotDropMask: 'rgba(235, 180, 180, 0.75)',\n        fileListCanDropMaskOne: 'rgba(180, 235, 180, 0.1)',\n        fileListCanDropMaskTwo: 'rgba(180, 235, 180, 0.2)',\n        fileListCannotDropMaskOne: 'rgba(235, 180, 180, 0.1)',\n        fileListCannotDropMaskTwo: 'rgba(235, 180, 180, 0.2)',\n    },\n\n    dragLayer: {\n        border: 'solid 2px #09f',\n        padding: '7px 10px',\n        borderRadius: 2,\n    },\n\n    fileList: {\n        desktopGridGutter: 8,\n        mobileGridGutter: 5,\n    },\n\n    gridFileEntry: {\n        childrenCountSize: '1.6em',\n        iconColorFocused: '#000',\n        iconSize: '2.4em',\n        iconColor: '#fff',\n        borderRadius: 5,\n        fontSize: 14,\n\n        fileColorTint: 'rgba(255, 255, 255, 0.4)',\n        folderBackColorTint: 'rgba(255, 255, 255, 0.1)',\n        folderFrontColorTint: 'rgba(255, 255, 255, 0.4)',\n    },\n\n    listFileEntry: {\n        propertyFontSize: 14,\n        iconFontSize: '1.1em',\n        iconBorderRadius: 5,\n        fontSize: 14,\n    },\n};\n\nexport type ChonkyTheme = typeof lightTheme;\n\nexport const darkThemeOverride: DeepPartial<ChonkyTheme> = {\n    gridFileEntry: {\n        fileColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderBackColorTint: 'rgba(50, 50, 50, 0.4)',\n        folderFrontColorTint: 'rgba(50, 50, 50, 0.15)',\n    },\n};\n\nexport const mobileThemeOverride: DeepPartial<ChonkyTheme> = {\n    fontSizes: {\n        rootPrimary: 13,\n    },\n    margins: {\n        rootLayoutMargin: 4,\n    },\n    toolbar: {\n        size: 28,\n        lineHeight: '28px',\n        fontSize: 13,\n    },\n    gridFileEntry: {\n        fontSize: 13,\n    },\n    listFileEntry: {\n        propertyFontSize: 12,\n        iconFontSize: '1em',\n        fontSize: 13,\n    },\n};\n\nexport const useIsMobileBreakpoint = () => {\n    return useMediaQuery('(max-width:480px)');\n};\n\nexport const getStripeGradient = (colorOne: string, colorTwo: string) =>\n    'repeating-linear-gradient(' +\n    '45deg,' +\n    `${colorOne},` +\n    `${colorOne} 10px,` +\n    `${colorTwo} 0,` +\n    `${colorTwo} 20px` +\n    ')';\n\nexport const makeLocalChonkyStyles = <C extends string = string>(\n    styles: (theme: ChonkyTheme & MuiTheme) => any\n    // @ts-ignore\n): any => createUseStyles<ChonkyTheme, C>(styles);\n\nexport const makeGlobalChonkyStyles = <C extends string = string>(\n    makeStyles: (theme: ChonkyTheme & MuiTheme) => any\n) => {\n    const selectorMapping = {};\n    const makeGlobalStyles = (theme: ChonkyTheme) => {\n        const localStyles = makeStyles(theme as any);\n        const globalStyles = {};\n        const localSelectors = Object.keys(localStyles);\n        localSelectors.map(localSelector => {\n            const globalSelector = `chonky-${localSelector}`;\n            const jssSelector = `@global .${globalSelector}`;\n            // @ts-ignore\n            globalStyles[jssSelector] = localStyles[localSelector];\n            // @ts-ignore\n            selectorMapping[localSelector] = globalSelector;\n        });\n        return globalStyles;\n    };\n\n    // @ts-ignore\n    const useStyles = createUseStyles<ChonkyTheme, C>(makeGlobalStyles as any);\n    return (...args: any[]): any => {\n        const styles = useStyles(...args);\n        const classes = {};\n        Object.keys(selectorMapping).map(localSelector => {\n            // @ts-ignore\n            classes[localSelector] = selectorMapping[localSelector];\n        });\n        return { ...classes, ...styles };\n    };\n};\n\nexport const important = <T>(value: T) => [value, '!important'];\n\nexport const c = classnames;\n","import React, { useImperativeHandle } from 'react';\nimport { useDispatch, useStore } from 'react-redux';\n\nimport { reduxActions } from '../redux/reducers';\nimport { selectSelectionMap } from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { FileAction } from '../types/action.types';\nimport { FileBrowserHandle } from '../types/file-browser.types';\nimport { RootState } from '../types/redux.types';\n\nexport const useFileBrowserHandle = (ref: React.Ref<FileBrowserHandle>) => {\n    const store = useStore<RootState>();\n    const dispatch = useDispatch();\n\n    useImperativeHandle(\n        ref,\n        () => ({\n            getFileSelection(): Set<string> {\n                const selectionMap = selectSelectionMap(store.getState());\n                const selectionSet = new Set(Object.keys(selectionMap));\n                return selectionSet;\n            },\n            setFileSelection(selection, reset = true): void {\n                const fileIds = Array.from(selection);\n                dispatch(reduxActions.selectFiles({ fileIds, reset }));\n            },\n            requestFileAction<Action extends FileAction>(\n                action: Action,\n                payload: Action['__payloadType']\n            ): Promise<void> {\n                return Promise.resolve(\n                    dispatch(thunkRequestFileAction(action, payload))\n                ).then();\n            },\n        }),\n        [store, dispatch]\n    );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { initialRootState } from '../../redux/state';\nimport { useDTE, usePropReduxUpdate } from '../../redux/store';\nimport {\n    thunkActivateSortAction, thunkUpdateDefaultFileViewActionId, thunkUpdateRawFileActions\n} from '../../redux/thunks/file-actions.thunks';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { useFileBrowserHandle } from '../../util/file-browser-handle';\nimport { getValueOrFallback } from '../../util/helpers';\n\nexport const ChonkyBusinessLogicInner = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        // ==== Update Redux state\n        usePropReduxUpdate(reduxActions.setRawFiles, props.files ?? initialRootState.rawFiles);\n        usePropReduxUpdate(reduxActions.setRawFolderChain, props.folderChain);\n        useDTE(\n            thunkUpdateRawFileActions,\n            getValueOrFallback(props.fileActions, defaultConfig.fileActions),\n            getValueOrFallback(props.disableDefaultFileActions, defaultConfig.disableDefaultFileActions)\n        );\n        useDTE(\n            reduxActions.setExternalFileActionHandler,\n            getValueOrFallback(props.onFileAction, defaultConfig.onFileAction) as any\n        );\n        useDTE(\n            reduxActions.setSelectionDisabled,\n            getValueOrFallback(props.disableSelection, defaultConfig.disableSelection, 'boolean')\n        );\n        useDTE(\n            thunkActivateSortAction,\n            getValueOrFallback(props.defaultSortActionId, defaultConfig.defaultSortActionId)\n        );\n        useDTE(\n            thunkUpdateDefaultFileViewActionId,\n            getValueOrFallback(props.defaultFileViewActionId, defaultConfig.defaultFileViewActionId, 'string')\n        );\n\n        useDTE(\n            reduxActions.setThumbnailGenerator,\n            getValueOrFallback(props.thumbnailGenerator, defaultConfig.thumbnailGenerator)\n        );\n        useDTE(\n            reduxActions.setDoubleClickDelay,\n            getValueOrFallback(props.doubleClickDelay, defaultConfig.doubleClickDelay, 'number')\n        );\n        useDTE(\n            reduxActions.setDisableDragAndDrop,\n            getValueOrFallback(props.disableDragAndDrop, defaultConfig.disableDragAndDrop, 'boolean')\n        );\n        useDTE(\n            reduxActions.setClearSelectionOnOutsideClick,\n            getValueOrFallback(\n                props.clearSelectionOnOutsideClick,\n                defaultConfig.clearSelectionOnOutsideClick,\n                'boolean'\n            )\n        );\n\n        // ==== Setup the imperative handle for external use\n        useFileBrowserHandle(ref);\n\n        return null;\n    })\n);\nChonkyBusinessLogicInner.displayName = 'ChonkyBusinessLogicInner';\n\nexport const ChonkyBusinessLogic = React.memo(ChonkyBusinessLogicInner);\nChonkyBusinessLogic.displayName = 'ChonkyBusinessLogic';\n","import { useCallback, useContext } from 'react';\nimport { DndContext, useDrag, useDrop } from 'react-dnd';\n\nexport const useDndContextAvailable = () => {\n    const dndContext = useContext(DndContext);\n    const { dragDropManager } = dndContext;\n    return !!dragDropManager;\n};\n\nexport const useDragIfAvailable: typeof useDrag = (...args) => {\n    // This is an ugly hack to make `useDrag` not throw if a `DndContext` is not available.\n    // See: https://github.com/react-dnd/react-dnd/issues/2212\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrag = dndContextAvailable ? useDrag : mockHook;\n    return useHook(...args);\n};\n\nexport const useDropIfAvailable: typeof useDrop = (...args) => {\n    const dndContextAvailable = useDndContextAvailable();\n    const mockHook = useCallback(() => [{} as any, () => null], []);\n    // @ts-ignore\n    const useHook: typeof useDrop = dndContextAvailable ? useDrop : mockHook;\n    return useHook(...args);\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuMounted } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { findElementAmongAncestors } from '../../util/helpers';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\n\nexport const findClosestChonkyFileId = (\n    element: HTMLElement | any\n): Nullable<string> => {\n    const fileEntryWrapperDiv = findElementAmongAncestors(\n        element,\n        (element: any) =>\n            element.tagName &&\n            element.tagName.toLowerCase() === 'div' &&\n            element.dataset &&\n            element.dataset.chonkyFileId\n    );\n    return fileEntryWrapperDiv ? fileEntryWrapperDiv.dataset.chonkyFileId! : null;\n};\n\nexport const useContextMenuTrigger = () => {\n    const dispatch = useDispatch();\n    const contextMenuMountedRef = useInstanceVariable(\n        useSelector(selectContextMenuMounted)\n    );\n    return useCallback(\n        (event: React.MouseEvent<HTMLDivElement>) => {\n            // Use default browser context menu when Chonky context menu component\n            // is not mounted.\n            if (!contextMenuMountedRef.current) return;\n            // Users can use Alt+Right Click to bring up browser's default\n            // context menu instead of Chonky's context menu.\n            if (event.altKey) return;\n\n            event.preventDefault();\n\n            const triggerFileId = findClosestChonkyFileId(event.target);\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.OpenFileContextMenu, {\n                    clientX: event.clientX,\n                    clientY: event.clientY,\n                    triggerFileId,\n                })\n            );\n        },\n        [contextMenuMountedRef, dispatch]\n    );\n};\n\nexport const useContextMenuDismisser = () => {\n    const dispatch = useDispatch();\n    return useCallback(() => dispatch(reduxActions.hideContextMenu()), [dispatch]);\n};\n","import { DragObjectWithType } from 'react-dnd';\nimport { Nilable } from 'tsdef';\n\nimport { StartDragNDropPayload } from './action-payloads.types';\nimport { FileData } from './file.types';\n\nexport interface ChonkyDndDropResult {\n    dropTarget: Nilable<FileData> | any;\n    dropEffect: 'move' | 'copy';\n}\n\nexport type ChonkyDndFileEntryItem = DragObjectWithType & {\n    payload: StartDragNDropPayload;\n};\nexport const ChonkyDndFileEntryType = 'dnd-chonky-file-entry';\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useDragLayer } from 'react-dnd';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyDndFileEntryItem, ChonkyDndFileEntryType } from '../../types/dnd.types';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileListDragLayerProps {}\n\nconst layerStyles: React.CSSProperties = {\n    position: 'fixed',\n    pointerEvents: 'none',\n    zIndex: 100,\n    left: 0,\n    top: 0,\n    width: '100%',\n    height: '100%',\n};\nconst getItemStyles = (\n    initialCursorOffset: Nullable<{ x: number; y: number }>,\n    initialFileOffset: Nullable<{ x: number; y: number }>,\n    currentFileOffset: Nullable<{ x: number; y: number }>\n) => {\n    if (!initialCursorOffset || !initialFileOffset || !currentFileOffset) {\n        return {\n            display: 'none',\n        };\n    }\n    const x = initialCursorOffset.x + (currentFileOffset.x - initialFileOffset.x);\n    const y = initialCursorOffset.y + (currentFileOffset.y - initialFileOffset.y);\n    const transform = `translate(${x}px, ${y}px)`;\n    return {\n        transform,\n        WebkitTransform: transform,\n    };\n};\n\nexport const DnDFileListDragLayer: React.FC<DnDFileListDragLayerProps> = () => {\n    const classes = useStyles();\n\n    const {\n        itemType,\n        item,\n        initialCursorOffset,\n        initialFileOffset,\n        currentFileOffset,\n        isDragging,\n    } = useDragLayer(monitor => ({\n        item: monitor.getItem() as ChonkyDndFileEntryItem,\n        itemType: monitor.getItemType(),\n        initialCursorOffset: monitor.getInitialClientOffset(),\n        initialFileOffset: monitor.getInitialSourceClientOffset(),\n        currentFileOffset: monitor.getSourceClientOffset(),\n        isDragging: monitor.isDragging(),\n    }));\n    if (!isDragging || itemType !== ChonkyDndFileEntryType || !item.payload) {\n        return null;\n    }\n\n    const selectionSize = item.payload.selectedFiles.length;\n    return (\n        <div style={layerStyles}>\n            <div\n                style={getItemStyles(\n                    initialCursorOffset,\n                    initialFileOffset,\n                    currentFileOffset\n                )}\n            >\n                <div className={classes.fileDragPreview}>\n                    <b>{item.payload.draggedFile.name}</b>\n                    {selectionSize > 1 && (\n                        <>\n                            {' and '}\n                            <strong>\n                                {selectionSize - 1} other file\n                                {selectionSize - 1 !== 1 ? 's' : ''}\n                            </strong>\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileDragPreview: {\n        boxShadow: `2px 2px 5px ${theme.palette.divider}`,\n        backgroundColor: theme.palette.background.default,\n        borderRadius: theme.dragLayer.borderRadius,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        padding: theme.dragLayer.padding,\n        border: theme.dragLayer.border,\n        display: 'inline-block',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport hotkeys from 'hotkeys-js';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\n\nexport interface HotkeyListenerProps {\n    fileActionId: string;\n}\n\nexport const HotkeyListener: React.FC<HotkeyListenerProps> = React.memo(props => {\n    const { fileActionId } = props;\n\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n\n    useEffect(() => {\n        if (!fileAction || !fileAction.hotkeys || fileAction.hotkeys.length === 0) {\n            return;\n        }\n\n        const hotkeysStr = fileAction.hotkeys.join(',');\n        const hotkeyCallback = (event: KeyboardEvent) => {\n            event.preventDefault();\n            dispatch(thunkRequestFileAction(fileAction, undefined));\n        };\n        hotkeys(hotkeysStr, hotkeyCallback);\n        return () => hotkeys.unbind(hotkeysStr, hotkeyCallback);\n    }, [dispatch, fileAction]);\n\n    return null;\n});\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { reduxActions } from '../../redux/reducers';\nimport {\n    selectClearSelectionOnOutsideClick,\n    selectFileActionIds,\n    selectIsDnDDisabled,\n} from '../../redux/selectors';\nimport { useDndContextAvailable } from '../../util/dnd-fallback';\nimport { elementIsInsideButton } from '../../util/helpers';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuTrigger } from '../external/FileContextMenu-hooks';\nimport { DnDFileListDragLayer } from '../file-list/DnDFileListDragLayer';\nimport { HotkeyListener } from './HotkeyListener';\n\nexport interface ChonkyPresentationLayerProps {}\n\nexport const ChonkyPresentationLayer: React.FC<ChonkyPresentationLayerProps> = ({\n    children,\n}) => {\n    const dispatch = useDispatch();\n    const fileActionIds = useSelector(selectFileActionIds);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n    const clearSelectionOnOutsideClick = useSelector(\n        selectClearSelectionOnOutsideClick\n    );\n\n    // Deal with clicks outside of Chonky\n    const handleClickAway = useCallback(\n        (event: React.MouseEvent<Document>) => {\n            if (!clearSelectionOnOutsideClick || elementIsInsideButton(event.target)) {\n                // We only clear out the selection on outside click if the click target\n                // was not a button. We don't want to clear out the selection when a\n                // button is clicked because Chonky users might want to trigger some\n                // selection-related action on that button click.\n                return;\n            }\n            dispatch(reduxActions.clearSelection());\n        },\n        [dispatch, clearSelectionOnOutsideClick]\n    );\n\n    // Generate necessary components\n    const hotkeyListenerComponents = useMemo(\n        () =>\n            fileActionIds.map(actionId => (\n                <HotkeyListener\n                    key={`file-action-listener-${actionId}`}\n                    fileActionId={actionId}\n                />\n            )),\n        [fileActionIds]\n    );\n\n    const dndContextAvailable = useDndContextAvailable();\n    const showContextMenu = useContextMenuTrigger();\n\n    const classes = useStyles();\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n            <Box className={classes.chonkyRoot} onContextMenu={showContextMenu}>\n                {!dndDisabled && dndContextAvailable && <DnDFileListDragLayer />}\n                {hotkeyListenerComponents}\n                {children ? children : null}\n            </Box>\n        </ClickAwayListener>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    chonkyRoot: {\n        backgroundColor: theme.palette.background.paper,\n        border: `solid 1px ${theme.palette.divider}`,\n        padding: theme.margins.rootLayoutMargin,\n        fontSize: theme.fontSizes.rootPrimary,\n        color: theme.palette.text.primary,\n        touchAction: 'manipulation', // Disabling zoom on double tap\n        fontFamily: 'sans-serif',\n        flexDirection: 'column',\n        boxSizing: 'border-box',\n        textAlign: 'left',\n        borderRadius: 4,\n        display: 'flex',\n        height: '100%',\n\n        // Disabling select\n        webkitTouchCallout: 'none',\n        webkitUserSelect: 'none',\n        mozUserSelect: 'none',\n        msUserSelect: 'none',\n        userSelect: 'none',\n    },\n}));\n","import {\n    createMuiTheme,\n    ThemeProvider as MuiThemeProvider,\n} from '@material-ui/core/styles';\nimport merge from 'deepmerge';\nimport React, { ReactNode, useMemo } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { IntlProvider } from 'react-intl';\nimport { ThemeProvider } from 'react-jss';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport shortid from 'shortid';\n\nimport { useChonkyStore } from '../../redux/store';\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { defaultConfig } from '../../util/default-config';\nimport { getValueOrFallback } from '../../util/helpers';\nimport { useStaticValue } from '../../util/hooks-helpers';\nimport { ChonkyFormattersContext, defaultFormatters } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    darkThemeOverride,\n    lightTheme,\n    mobileThemeOverride,\n    useIsMobileBreakpoint,\n} from '../../util/styles';\nimport { ChonkyBusinessLogic } from '../internal/ChonkyBusinessLogic';\nimport { ChonkyIconPlaceholder } from '../internal/ChonkyIconPlaceholder';\nimport { ChonkyPresentationLayer } from '../internal/ChonkyPresentationLayer';\n\n// if (process.env.NODE_ENV === 'development') {\n//     const whyDidYouRender = require('@welldone-software/why-did-you-render');\n//     whyDidYouRender(React, {\n//         trackAllPureComponents: true,\n//     });\n// }\n\nexport const FileBrowser = React.forwardRef<\n    FileBrowserHandle,\n    FileBrowserProps & { children?: ReactNode }\n>((props, ref) => {\n    const { instanceId, iconComponent, children } = props;\n    const disableDragAndDrop = getValueOrFallback(\n        props.disableDragAndDrop,\n        defaultConfig.disableDragAndDrop,\n        'boolean'\n    );\n    const disableDragAndDropProvider = getValueOrFallback(\n        props.disableDragAndDropProvider,\n        defaultConfig.disableDragAndDropProvider,\n        'boolean'\n    );\n    const darkMode = getValueOrFallback(\n        props.darkMode,\n        defaultConfig.darkMode,\n        'boolean'\n    );\n    const i18n = getValueOrFallback(props.i18n, defaultConfig.i18n);\n    const formatters = useMemo(() => ({ ...defaultFormatters, ...i18n?.formatters }), [\n        i18n,\n    ]);\n\n    const chonkyInstanceId = useStaticValue(() => instanceId ?? shortid.generate());\n    const store = useChonkyStore(chonkyInstanceId);\n\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n    const theme = useMemo(() => {\n        const muiTheme = createMuiTheme({\n            palette: { type: darkMode ? 'dark' : 'light' },\n        });\n        const combinedTheme = merge(\n            muiTheme,\n            merge(lightTheme, darkMode ? darkThemeOverride : {})\n        );\n        return isMobileBreakpoint\n            ? merge(combinedTheme, mobileThemeOverride)\n            : combinedTheme;\n    }, [darkMode, isMobileBreakpoint]);\n\n    const chonkyComps = (\n        <>\n            <ChonkyBusinessLogic ref={ref} {...props} />\n            <ChonkyPresentationLayer>{children}</ChonkyPresentationLayer>\n        </>\n    );\n\n    return (\n        <IntlProvider locale=\"en\" defaultLocale=\"en\" {...i18n}>\n            <ChonkyFormattersContext.Provider value={formatters}>\n                <ReduxProvider store={store}>\n                    <ThemeProvider theme={theme}>\n                        <MuiThemeProvider theme={theme}>\n                            <ChonkyIconContext.Provider\n                                value={\n                                    iconComponent ??\n                                    defaultConfig.iconComponent ??\n                                    ChonkyIconPlaceholder\n                                }\n                            >\n                                {disableDragAndDrop || disableDragAndDropProvider ? (\n                                    chonkyComps\n                                ) : (\n                                    <DndProvider backend={HTML5Backend}>\n                                        {chonkyComps}\n                                    </DndProvider>\n                                )}\n                            </ChonkyIconContext.Provider>\n                        </MuiThemeProvider>\n                    </ThemeProvider>\n                </ReduxProvider>\n            </ChonkyFormattersContext.Provider>\n        </IntlProvider>\n    );\n});\nFileBrowser.displayName = 'FileBrowser';\n","import { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectFolderChain } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { FileData } from '../../types/file.types';\nimport { FileHelper } from '../../util/file-helper';\n\nexport interface FolderChainItem {\n    file: Nullable<FileData>;\n    disabled: boolean;\n    onClick?: () => void;\n}\n\nexport const useFolderChainItems = (): FolderChainItem[] => {\n    const folderChain = useSelector(selectFolderChain);\n    const dispatch = useDispatch();\n\n    const folderChainItems = useMemo(() => {\n        const items: FolderChainItem[] = [];\n        if (!folderChain) return items;\n\n        for (let i = 0; i < folderChain.length; ++i) {\n            const file = folderChain[i];\n            items.push({\n                file,\n                disabled: !file,\n                onClick:\n                    !FileHelper.isOpenable(file) || i === folderChain.length - 1\n                        ? undefined\n                        : () =>\n                              dispatch(\n                                  thunkRequestFileAction(ChonkyActions.OpenFiles, {\n                                      targetFile: file,\n                                      files: [file],\n                                  })\n                              ),\n            });\n        }\n        return items;\n    }, [dispatch, folderChain]);\n    return folderChainItems;\n};\n","import { useCallback, useEffect, useMemo } from 'react';\nimport { DragSourceMonitor, DropTargetMonitor } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useDispatch, useSelector, useStore } from 'react-redux';\nimport { ExcludeKeys, Nullable } from 'tsdef';\n\nimport { EssentialActions } from '../action-definitions/essential';\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectCurrentFolder,\n    selectFolderChain,\n    selectInstanceId,\n    selectSelectedFiles,\n} from '../redux/selectors';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { StartDragNDropPayload } from '../types/action-payloads.types';\nimport {\n    ChonkyDndDropResult,\n    ChonkyDndFileEntryItem,\n    ChonkyDndFileEntryType,\n} from '../types/dnd.types';\nimport { DndEntryState } from '../types/file-list.types';\nimport { FileData } from '../types/file.types';\nimport { useDragIfAvailable, useDropIfAvailable } from './dnd-fallback';\nimport { FileHelper } from './file-helper';\nimport { useInstanceVariable } from './hooks-helpers';\n\nexport const useFileDrag = (file: Nullable<FileData>) => {\n    // Prepare the dnd payload\n    const store = useStore();\n    const fileRef = useInstanceVariable(file);\n    const getDndStartPayload = useCallback<() => StartDragNDropPayload>(() => {\n        const reduxState = store.getState();\n        return {\n            sourceInstanceId: selectInstanceId(reduxState),\n            source: selectCurrentFolder(reduxState),\n            // We force non-null type below because by convention, if drag & drop for\n            // this file was possible, it must have been non-null.\n            draggedFile: fileRef.current!,\n            selectedFiles: selectSelectedFiles(reduxState),\n        };\n    }, [store, fileRef]);\n\n    // For drag source\n    const dispatch = useDispatch();\n    const canDrag = useCallback(() => FileHelper.isDraggable(fileRef.current), [\n        fileRef,\n    ]);\n    const onDragStart = useCallback((): ChonkyDndFileEntryItem => {\n        const item: ChonkyDndFileEntryItem = {\n            type: ChonkyDndFileEntryType,\n            payload: getDndStartPayload(),\n        };\n        dispatch(thunkRequestFileAction(ChonkyActions.StartDragNDrop, item.payload));\n        return item;\n    }, [dispatch, getDndStartPayload]);\n    const onDragEnd = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DragSourceMonitor) => {\n            const dropResult = monitor.getDropResult() as ChonkyDndDropResult;\n            if (\n                !FileHelper.isDraggable(item.payload.draggedFile) ||\n                !dropResult ||\n                !dropResult.dropTarget\n            ) {\n                return;\n            }\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.EndDragNDrop, {\n                    ...item.payload,\n                    destination: dropResult.dropTarget,\n                    copy: dropResult.dropEffect === 'copy',\n                })\n            );\n        },\n        [dispatch]\n    );\n\n    // Create refs for react-dnd hooks\n    const item = useMemo<ChonkyDndFileEntryItem>(\n        () => ({\n            type: ChonkyDndFileEntryType,\n            // Payload is actually added in `onDragStart`\n            payload: {} as StartDragNDropPayload,\n        }),\n        []\n    );\n    const collect = useCallback(monitor => ({ isDragging: monitor.isDragging() }), []);\n    const [{ isDragging: dndIsDragging }, drag, preview] = useDragIfAvailable({\n        item,\n        canDrag,\n        begin: onDragStart,\n        // @ts-ignore\n        end: onDragEnd,\n        collect,\n    });\n\n    useEffect(() => {\n        // Set drag preview to an empty image because `DnDFileListDragLayer` will\n        // provide its own preview.\n        preview(getEmptyImage(), { captureDraggingState: true });\n    }, [preview]);\n\n    return { dndIsDragging, drag };\n};\n\ninterface UseFileDropParams {\n    file: Nullable<FileData>;\n    forceDisableDrop?: boolean;\n    includeChildrenDrops?: boolean;\n}\n\nexport const useFileDrop = ({\n    file,\n    forceDisableDrop,\n    includeChildrenDrops,\n}: UseFileDropParams) => {\n    const folderChainRef = useInstanceVariable(useSelector(selectFolderChain));\n    const onDrop = useCallback(\n        (_item: ChonkyDndFileEntryItem, monitor) => {\n            if (!monitor.canDrop()) return;\n            const customDropResult: ExcludeKeys<ChonkyDndDropResult, 'dropEffect'> = {\n                dropTarget: file,\n            };\n            return customDropResult;\n        },\n        [file]\n    );\n    const canDrop = useCallback(\n        (item: ChonkyDndFileEntryItem, monitor: DropTargetMonitor) => {\n            if (\n                forceDisableDrop ||\n                !FileHelper.isDroppable(file) ||\n                (!monitor.isOver({ shallow: true }) && !includeChildrenDrops)\n            ) {\n                return false;\n            }\n            const { source, draggedFile, selectedFiles } = item.payload;\n\n            // We prevent folders from being dropped into themselves. We also prevent\n            // any folder from current folder chain being moved - we can't move the\n            // folder that we are currently in.\n            const prohibitedFileIds = new Set<string>();\n            prohibitedFileIds.add(file.id);\n            folderChainRef.current.map(folder => {\n                if (folder) prohibitedFileIds.add(folder.id);\n            });\n            const movedFiles: FileData[] = [draggedFile, ...selectedFiles];\n            for (const currFile of movedFiles) {\n                if (prohibitedFileIds.has(currFile.id)) return false;\n            }\n\n            // Finally, prohibit files from being moved into their parent folder\n            // (which is a no-op).\n            return file.id !== source?.id;\n        },\n        [forceDisableDrop, file, includeChildrenDrops, folderChainRef]\n    );\n    const collect = useCallback(\n        monitor => ({\n            isOver: monitor.isOver(),\n            isOverCurrent: monitor.isOver({ shallow: true }),\n            canDrop: monitor.canDrop(),\n        }),\n        []\n    );\n    const [\n        { isOver: dndIsOver, isOverCurrent: dndIsOverCurrent, canDrop: dndCanDrop },\n        drop,\n    ] = useDropIfAvailable({\n        accept: ChonkyDndFileEntryType,\n        drop: onDrop,\n        canDrop,\n        collect,\n    });\n    return { dndIsOver, dndIsOverCurrent, dndCanDrop, drop };\n};\n\nexport const useFileEntryDnD = (file: Nullable<FileData>) => {\n    const { dndIsDragging, drag } = useFileDrag(file);\n    const { dndIsOver, dndCanDrop, drop } = useFileDrop({ file });\n    const dndState = useMemo<DndEntryState>(\n        () => ({\n            dndIsDragging,\n            dndIsOver,\n            dndCanDrop,\n        }),\n        [dndCanDrop, dndIsDragging, dndIsOver]\n    );\n    return {\n        drop,\n        drag,\n        dndState,\n    };\n};\n\nexport const useDndHoverOpen = (file: Nullable<FileData>, dndState: DndEntryState) => {\n    const dispatch = useDispatch();\n    const currentFolderRef = useInstanceVariable(useSelector(selectCurrentFolder));\n    useEffect(() => {\n        let timeout: Nullable<any> = null;\n        if (\n            dndState.dndIsOver &&\n            FileHelper.isDndOpenable(file) &&\n            file.id !== currentFolderRef.current?.id\n        ) {\n            timeout = setTimeout(\n                () =>\n                    dispatch(\n                        thunkRequestFileAction(EssentialActions.OpenFiles, {\n                            targetFile: file,\n                            files: [file],\n                        })\n                    ),\n                // TODO: Make this timeout configurable\n                1500\n            );\n        }\n        return () => {\n            if (timeout) clearTimeout(timeout);\n        };\n    }, [dispatch, file, dndState.dndIsOver, currentFolderRef]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\n\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface TextPlaceholderProps {\n    minLength: number;\n    maxLength: number;\n}\n\nconst getRandomInt = (min: number, max: number) => {\n    return min + Math.floor(Math.random() * Math.floor(max - min));\n};\nexport const TextPlaceholder: React.FC<TextPlaceholderProps> = React.memo(props => {\n    const { minLength, maxLength } = props;\n\n    const placeholderLength = getRandomInt(minLength, maxLength);\n    const whitespace = '&nbsp;'.repeat(placeholderLength);\n\n    const classes = useStyles();\n    return (\n        <span\n            className={classes.textPlaceholder}\n            dangerouslySetInnerHTML={{ __html: whitespace }}\n        />\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(() => ({\n    '@keyframes loading-placeholder': {\n        '0%': { opacity: 0.2 },\n        '50%': { opacity: 0.4 },\n        '100%': { opacity: 0.2 },\n    },\n    textPlaceholder: {\n        animationName: '$loading-placeholder',\n        animationIterationCount: 'infinite',\n        animationTimingFunction: 'linear',\n        animationDuration: '1.5s',\n        backgroundColor: '#ccc',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        borderRadius: 4,\n        maxWidth: '40%',\n        minWidth: 20,\n    },\n}));\n","import React, {\n    HTMLProps, useCallback, useContext, useEffect, useMemo, useRef, useState\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable, Undefinable } from 'tsdef';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectThumbnailGenerator } from '../../redux/selectors';\nimport { thunkRequestFileAction } from '../../redux/thunks/dispatchers.thunks';\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { ChonkyIconContext, ColorsDark, ColorsLight, useIconData } from '../../util/icon-helper';\nimport { Logger } from '../../util/logger';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { KeyboardClickEvent, MouseClickEvent } from '../internal/ClickableWrapper';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const useFileEntryHtmlProps = (file: Nullable<FileData>): HTMLProps<HTMLDivElement> => {\n    return useMemo(() => {\n        const dataProps: { [prop: string]: Undefinable<string> } = {\n            'data-test-id': 'file-entry',\n            'data-chonky-file-id': file ? file.id : undefined,\n        };\n\n        return {\n            role: 'listitem',\n            ...dataProps,\n        };\n    }, [file]);\n};\n\nexport const useFileEntryState = (file: Nullable<FileData>, selected: boolean, focused: boolean) => {\n    const iconData = useIconData(file);\n    const { thumbnailUrl, thumbnailLoading } = useThumbnailUrl(file);\n\n    return useMemo<FileEntryState>(() => {\n        const fileColor = thumbnailUrl ? ColorsDark[iconData.colorCode] : ColorsLight[iconData.colorCode];\n        const iconSpin = thumbnailLoading || !file;\n        const icon = thumbnailLoading ? ChonkyIconName.loading : iconData.icon;\n\n        return {\n            childrenCount: FileHelper.getChildrenCount(file),\n            icon: file && file.icon !== undefined ? file.icon : icon,\n            iconSpin: iconSpin,\n            thumbnailUrl: thumbnailUrl,\n            color: file && file.color !== undefined ? file.color : fileColor,\n            selected: selected,\n            focused: !!focused,\n        };\n    }, [file, focused, iconData, selected, thumbnailLoading, thumbnailUrl]);\n};\n\nexport const useDndIcon = (dndState: DndEntryState) => {\n    let dndIconName: Nullable<ChonkyIconName> = null;\n    if (dndState.dndIsOver) {\n        const showDropIcon = dndState.dndCanDrop;\n        dndIconName = showDropIcon ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop;\n    } else if (dndState.dndIsDragging) {\n        dndIconName = ChonkyIconName.dndDragging;\n    }\n\n    return dndIconName;\n};\n\nexport const useModifierIconComponents = (file: Nullable<FileData>) => {\n    const modifierIcons: ChonkyIconName[] = useMemo(() => {\n        const modifierIcons: ChonkyIconName[] = [];\n        if (FileHelper.isHidden(file)) modifierIcons.push(ChonkyIconName.hidden);\n        if (FileHelper.isSymlink(file)) modifierIcons.push(ChonkyIconName.symlink);\n        if (FileHelper.isEncrypted(file)) modifierIcons.push(ChonkyIconName.lock);\n        return modifierIcons;\n    }, [file]);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const modifierIconComponents = useMemo(\n        () => modifierIcons.map((icon, index) => <ChonkyIcon key={`file-modifier-${index}`} icon={icon} />),\n        // For some reason ESLint marks `ChonkyIcon` as an unnecessary dependency,\n        // but we expect it can change at runtime so we disable the check.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [ChonkyIcon, modifierIcons]\n    );\n    return modifierIconComponents;\n};\n\nconst _extname = (fileName: string) => {\n    const parts = fileName.split('.');\n    if (parts.length) {\n        return `.${parts[parts.length - 1]}`;\n    }\n    return '';\n};\n\nexport const useFileNameComponent = (file: Nullable<FileData>) => {\n    return useMemo(() => {\n        if (!file) return <TextPlaceholder minLength={15} maxLength={20} />;\n\n        let name;\n        let extension = null;\n\n        const isDir = FileHelper.isDirectory(file);\n        if (isDir) {\n            name = file.name;\n        } else {\n            extension = file.ext ?? _extname(file.name);\n            name = file.name.substr(0, file.name.length - extension.length);\n        }\n\n        return (\n            <>\n                {name}\n                {extension && <span className=\"chonky-file-entry-description-title-extension\">{extension}</span>}\n            </>\n        );\n    }, [file]);\n};\n\nexport const useThumbnailUrl = (file: Nullable<FileData>) => {\n    const thumbnailGenerator = useSelector(selectThumbnailGenerator);\n    const [thumbnailUrl, setThumbnailUrl] = useState<Nullable<string>>(null);\n    const [thumbnailLoading, setThumbnailLoading] = useState<boolean>(false);\n    const loadingAttempts = useRef(0);\n\n    useEffect(() => {\n        let loadingCancelled = false;\n\n        if (file) {\n            if (thumbnailGenerator) {\n                if (loadingAttempts.current === 0) {\n                    setThumbnailLoading(true);\n                }\n                loadingAttempts.current++;\n                Promise.resolve()\n                    .then(() => thumbnailGenerator(file))\n                    .then((thumbnailUrl: any) => {\n                        if (loadingCancelled) return;\n                        setThumbnailLoading(false);\n\n                        if (thumbnailUrl && typeof thumbnailUrl === 'string') {\n                            setThumbnailUrl(thumbnailUrl);\n                        }\n                    })\n                    .catch(error => {\n                        if (!loadingCancelled) setThumbnailLoading(false);\n                        Logger.error(`User-defined \"thumbnailGenerator\" handler threw an error: ${error.message}`);\n                    });\n            } else if (file.thumbnailUrl) {\n                setThumbnailUrl(file.thumbnailUrl);\n            }\n        }\n\n        return () => {\n            loadingCancelled = true;\n        };\n    }, [file, setThumbnailUrl, setThumbnailLoading, thumbnailGenerator]);\n\n    return { thumbnailUrl, thumbnailLoading };\n};\n\nexport const useFileClickHandlers = (file: Nullable<FileData>, displayIndex: number) => {\n    const dispatch = useDispatch();\n\n    // Prepare base handlers\n    const onMouseClick = useCallback(\n        (event: MouseClickEvent, clickType: 'single' | 'double') => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.MouseClickFile, {\n                    clickType,\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n    const onKeyboardClick = useCallback(\n        (event: KeyboardClickEvent) => {\n            if (!file) return;\n\n            dispatch(\n                thunkRequestFileAction(ChonkyActions.KeyboardClickFile, {\n                    file,\n                    fileDisplayIndex: displayIndex,\n                    enterKey: event.enterKey,\n                    spaceKey: event.spaceKey,\n                    altKey: event.altKey,\n                    ctrlKey: event.ctrlKey,\n                    shiftKey: event.shiftKey,\n                })\n            );\n        },\n        [dispatch, file, displayIndex]\n    );\n\n    // Prepare single/double click handlers\n    const onSingleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'single'), [onMouseClick]);\n    const onDoubleClick = useCallback((event: MouseClickEvent) => onMouseClick(event, 'double'), [onMouseClick]);\n\n    return {\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n    };\n};\n","import { MaybePromise, Nullable } from 'tsdef';\n\nimport { FileActionState } from './action-handler.types';\nimport { FileViewConfig } from './file-view.types';\nimport { FileFilter, FileMap } from './file.types';\nimport { ChonkyIconName } from './icons.types';\nimport { ChonkyDispatch, RootState } from './redux.types';\nimport { FileSortKeySelector } from './sort.types';\n\nexport interface FileAction {\n    /**\n     * Unique file action ID. If you set the action ID to one of the built-in Chonky\n     * action action IDs, you custom action definition will override the built-in\n     * definition.\n     */\n    id: string;\n    /**\n     * When set to `true`, the action will only be active (dispatchable) when user\n     * selects one or more files. If `fileFilter` is defined, it will be applied to\n     * selection before checking if its empty.\n     */\n    requiresSelection?: boolean; // Requires selection of 1+ files\n    /**\n     * A predicate that determines whether a file should be included in the selection\n     * for this action.\n     */\n    fileFilter?: FileFilter;\n    /**\n     * List of hotkeys that should trigger this action, defined using `hotkey-js`\n     * notation.\n     * @see https://www.npmjs.com/package/hotkeys-js\n     */\n    hotkeys?: string[] | readonly string[];\n    /**\n     * When button is defined and `toolbar` or `contextMenu` is set to `true`, a\n     * button will be added to the relevant UI component. Clicking on this button\n     * will active this action. The appearance of the button will change based on\n     * the action definition and the current Chonky state.\n     */\n    button?: FileActionButton;\n    /**\n     * When `sortKeySelector` is specified, the action becomes a sorting toggle. When\n     * this action is activated, it will sort files using the key selector, toggling\n     * between Ascending and Descending orders.\n     */\n    sortKeySelector?: FileSortKeySelector;\n    /**\n     * When `fileViewConfig` is specified, triggering this action will apply the\n     * provided config to Chonky's file view.\n     */\n    fileViewConfig?: FileViewConfig;\n    /**\n     * When `option` is specified, the action becomes an option toggle. When the action\n     * is activated, the boolean value of the option will be toggled.\n     */\n    option?: FileActionOption;\n    /**\n     * When selection transform is defined, activating this action will update the file\n     * selection. If the transform function returns `null`, selection will be left\n     * untouched.\n     */\n    selectionTransform?: FileSelectionTransform;\n    /**\n     * When effect is defined, it will be called right before dispatching the action to\n     * the user defined action handler. If the effect function returns a promise, Chonky\n     * will wait for the promise to resolve or fail before dispatching the action to the\n     * handler. If this function returns `true`, the file action will NOT be dispatched\n     * the the handler.\n     */\n    effect?: FileActionEffect;\n    /**\n     * When customVisibility is defined, it will change the display state of the file action\n     * The function must return the visibility as one of the CustomVisibilityState values:\n     *  - Hidden\n     *  - Disabled\n     *  - Default\n     *  - Active\n     */\n    customVisibility?: () => CustomVisibilityState;\n    /**\n     * Field used to infer the type of action payload. It is used solely for Typescript\n     * type inference and action validation.\n     */\n    __payloadType?: any;\n    /**\n     * Field used to infer the type of extra state for this action. It is used solely\n     * for Typescript type inference and action validation.\n     */\n    __extraStateType?: any;\n}\n\nexport interface FileActionButton {\n    name: string; // Button name\n    toolbar?: boolean; // Whether to show the button in the toolbar\n    contextMenu?: boolean; // Whether to show the button in the context menu\n    group?: string; // Button group (dropdown in toolbar or section in context menu)\n    tooltip?: string; // Help tooltip text\n    icon?: ChonkyIconName | string | any; // Icon name\n    iconOnly?: boolean; // Whether to only display the icon\n}\n\nexport interface FileActionOption {\n    id: string; // Unique option ID\n    defaultValue: boolean; // Whether the option is enabled by default (required)\n}\n\nexport type FileSelectionTransform = (data: {\n    prevSelection: Set<string>;\n    fileIds: ReadonlyArray<string>;\n    fileMap: Readonly<FileMap>;\n    hiddenFileIds: Set<string>;\n}) => Nullable<Set<string>>;\n\nexport type FileActionEffect<Action extends FileAction = any> = (data: {\n    action: Action;\n    payload: Action['__payloadType'];\n    state: FileActionState<{}>; // extra state is empty on purpose\n    reduxDispatch: ChonkyDispatch;\n    getReduxState: () => RootState;\n}) => MaybePromise<undefined | boolean | void>;\n\nexport type FileActionMap = { [actonId: string]: FileAction };\n\nexport enum CustomVisibilityState {\n    Hidden, \n    Disabled, \n    Default,\n    Active\n};\n","import { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { ChonkyActions } from '../action-definitions/index';\nimport {\n    selectFileActionData,\n    selectFileViewConfig,\n    selectOptionValue,\n    selectParentFolder,\n    selectSelectedFilesForActionCount,\n    selectSortActionId,\n    selectSortOrder,\n} from '../redux/selectors';\nimport { useParamSelector } from '../redux/store';\nimport { thunkRequestFileAction } from '../redux/thunks/dispatchers.thunks';\nimport { ChonkyIconName } from '../types/icons.types';\nimport { CustomVisibilityState } from '../types/action.types';\nimport { SortOrder } from '../types/sort.types';\nimport { FileHelper } from './file-helper';\n\nexport const useFileActionTrigger = (fileActionId: string) => {\n    const dispatch = useDispatch();\n    const fileAction = useParamSelector(selectFileActionData, fileActionId);\n    return useCallback(() => dispatch(thunkRequestFileAction(fileAction, undefined)), [\n        dispatch,\n        fileAction,\n    ]);\n};\n\nexport const useFileActionProps = (\n    fileActionId: string\n): { icon: Nullable<ChonkyIconName | string>; active: boolean; disabled: boolean } => {\n    const parentFolder = useSelector(selectParentFolder);\n    const fileViewConfig = useSelector(selectFileViewConfig);\n\n    const sortActionId = useSelector(selectSortActionId);\n    const sortOrder = useSelector(selectSortOrder);\n\n    const action = useParamSelector(selectFileActionData, fileActionId);\n    // @ts-ignore\n    const optionValue = useParamSelector(selectOptionValue, action?.option?.id);\n\n    const actionSelectionSize = useParamSelector(\n        selectSelectedFilesForActionCount,\n        fileActionId\n    );\n\n    const actionSelectionEmpty = actionSelectionSize === 0;\n\n    return useMemo(() => {\n        if (!action) return { icon: null, active: false, disabled: true };\n\n        let icon = action.button?.icon ?? null;\n        if (action.sortKeySelector) {\n            if (sortActionId === action.id) {\n                if (sortOrder === SortOrder.ASC) {\n                    icon = ChonkyIconName.sortAsc;\n                } else {\n                    icon = ChonkyIconName.sortDesc;\n                }\n            } else {\n                icon = ChonkyIconName.placeholder;\n            }\n        } else if (action.option) {\n            if (optionValue) {\n                icon = ChonkyIconName.toggleOn;\n            } else {\n                icon = ChonkyIconName.toggleOff;\n            }\n        }\n\n        const isSortButtonAndCurrentSort = action.id === sortActionId;\n        const isFileViewButtonAndCurrentView = action.fileViewConfig === fileViewConfig;\n        const isOptionAndEnabled = action.option ? !!optionValue : false;\n\n        let customDisabled = false;\n        let customActive = false;\n        if (action.customVisibility !== undefined) {\n            customDisabled = action.customVisibility() === CustomVisibilityState.Disabled;\n            customActive = action.customVisibility() === CustomVisibilityState.Active;\n        }\n        const active =\n            isSortButtonAndCurrentSort ||\n            isFileViewButtonAndCurrentView ||\n            isOptionAndEnabled ||\n            customActive;\n        \n        let disabled: boolean = (!!action.requiresSelection && actionSelectionEmpty) || customDisabled;\n\n        if (action.id === ChonkyActions.OpenParentFolder.id) {\n            // We treat `open_parent_folder` file action as a special case as it\n            // requires the parent folder to be present to work...\n            disabled = disabled || !FileHelper.isOpenable(parentFolder);\n        }\n\n        return { icon, active, disabled };\n    }, [\n        parentFolder,\n        fileViewConfig,\n        sortActionId,\n        sortOrder,\n        action,\n        optionValue,\n        actionSelectionEmpty,\n    ]);\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Button from '@material-ui/core/Button';\nimport React, { useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarButtonProps {\n    className?: string;\n    text: string;\n    tooltip?: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    iconOnly?: boolean;\n    onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n    disabled?: boolean;\n    dropdown?: boolean;\n}\n\nexport const ToolbarButton: React.FC<ToolbarButtonProps> = React.memo(props => {\n    const {\n        className: externalClassName,\n        text,\n        tooltip,\n        active,\n        icon,\n        iconOnly,\n        onClick,\n        disabled,\n        dropdown,\n    } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const iconComponent =\n        icon || iconOnly ? (\n            <div className={iconOnly ? '' : classes.iconWithText}>\n                <ChonkyIcon\n                    icon={icon ? icon : ChonkyIconName.fallbackIcon}\n                    fixedWidth={true}\n                />\n            </div>\n        ) : null;\n\n    const className = c({\n        [externalClassName ?? '']: true,\n        [classes.baseButton]: true,\n        [classes.iconOnlyButton]: iconOnly,\n        [classes.activeButton]: !!active,\n    });\n    return (\n        <Button\n            className={className}\n            onClick={onClick}\n            title={tooltip ? tooltip : text}\n            disabled={disabled || !onClick}\n        >\n            {iconComponent}\n            {text && !iconOnly && <span>{text}</span>}\n            {dropdown && (\n                <div className={classes.iconDropdown}>\n                    <ChonkyIcon\n                        icon={icon ? icon : ChonkyIconName.dropdown}\n                        fixedWidth={true}\n                    />\n                </div>\n            )}\n        </Button>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        textTransform: important('none'),\n        letterSpacing: important(0),\n        minWidth: important('auto'),\n        lineHeight: theme.toolbar.lineHeight,\n        height: theme.toolbar.size,\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    iconWithText: {\n        marginRight: 8,\n    },\n    iconOnlyButton: {\n        width: theme.toolbar.size,\n        textAlign: 'center',\n    },\n    iconDropdown: {\n        fontSize: '0.7em',\n        marginLeft: 2,\n        marginTop: 1,\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarButtonProps {\n    fileActionId: string;\n}\n\nexport const SmartToolbarButton: React.FC<SmartToolbarButtonProps> = React.memo(\n    props => {\n        const { fileActionId } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName, buttonTooltip } = useLocalizedFileActionStrings(action);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarButton\n                text={buttonName}\n                tooltip={buttonTooltip}\n                icon={icon}\n                iconOnly={button.iconOnly}\n                active={active}\n                onClick={triggerAction}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDndHoverOpen, useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from '../file-list/FileEntry-hooks';\nimport { FolderChainItem } from './FileNavbar-hooks';\nimport { ToolbarButton } from './ToolbarButton';\n\nexport interface FolderChainButtonProps {\n    first: boolean;\n    current: boolean;\n    item: FolderChainItem;\n}\n\nexport const FolderChainButton: React.FC<FolderChainButtonProps> = React.memo(\n    ({ first, current, item }) => {\n        const { file, disabled, onClick } = item;\n        const { dndIsOver, dndCanDrop, drop } = useFileDrop({\n            file,\n            forceDisableDrop: !file || current,\n        });\n        const dndState = useMemo<DndEntryState>(\n            () => ({\n                dndIsOver,\n                dndCanDrop,\n                dndIsDragging: false,\n            }),\n            [dndCanDrop, dndIsOver]\n        );\n        useDndHoverOpen(file, dndState);\n        const dndIconName = useDndIcon(dndState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const classes = useStyles(dndState);\n        const className = c({\n            [classes.baseBreadcrumb]: true,\n            [classes.disabledBreadcrumb]: disabled,\n            [classes.currentBreadcrumb]: current,\n        });\n        const text = file ? file.name : 'Loading...';\n        const icon =\n            first && file?.folderChainIcon === undefined\n                ? ChonkyIconName.folder\n                : file?.folderChainIcon;\n\n        return (\n            <div className={classes.buttonContainer} ref={file ? drop : null}>\n                {file && dndIconName && (\n                    <div className={classes.dndIndicator}>\n                        <ChonkyIcon icon={dndIconName} fixedWidth={true} />\n                    </div>\n                )}\n                <ToolbarButton\n                    icon={icon}\n                    className={className}\n                    text={text}\n                    disabled={disabled}\n                    onClick={onClick}\n                />\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    buttonContainer: {\n        position: 'relative',\n    },\n    baseBreadcrumb: {\n        color: (dndState: DndEntryState) => {\n            let color = theme.palette.text.primary;\n            if (dndState.dndIsOver) {\n                color = dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor;\n            }\n            return important(color);\n        },\n    },\n    disabledBreadcrumb: {\n        // Constant function here is on purpose. Without the function, the color here\n        // does not override the `baseBreadcrumb` color from above.\n        color: () => important(theme.palette.text.disabled),\n    },\n    currentBreadcrumb: {\n        textDecoration: important('underline'),\n    },\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor,\n        backgroundColor: (dndState: DndEntryState) =>\n            dndState.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask,\n        lineHeight: `calc(${theme.toolbar.lineHeight} - 6px)`,\n        transform: 'translateX(-50%) translateY(-50%)',\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 6,\n        width: theme.toolbar.size - 6,\n        boxSizing: 'border-box',\n        position: 'absolute',\n        textAlign: 'center',\n        left: '50%',\n        top: '50%',\n        zIndex: 5,\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Box from '@material-ui/core/Box';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useFolderChainItems } from './FileNavbar-hooks';\nimport { FolderChainButton } from './FolderChainButton';\nimport { SmartToolbarButton } from './ToolbarButton';\n\nexport interface FileNavbarProps {}\n\nexport const FileNavbar: React.FC<FileNavbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const folderChainItems = useFolderChainItems();\n\n    const folderChainComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < folderChainItems.length; ++i) {\n            const key = `folder-chain-${i}`;\n            const component = (\n                <FolderChainButton\n                    key={key}\n                    first={i === 0}\n                    current={i === folderChainItems.length - 1}\n                    item={folderChainItems[i]}\n                />\n            );\n            components.push(component);\n        }\n        return components;\n    }, [folderChainItems]);\n\n    return (\n        <Box className={classes.navbarWrapper}>\n            <Box className={classes.navbarContainer}>\n                <SmartToolbarButton fileActionId={ChonkyActions.OpenParentFolder.id} />\n                <Breadcrumbs\n                    className={classes.navbarBreadcrumbs}\n                    classes={{ separator: classes.separator }}\n                >\n                    {folderChainComponents}\n                </Breadcrumbs>\n            </Box>\n        </Box>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    navbarWrapper: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n    },\n    navbarContainer: {\n        display: 'flex',\n    },\n    upDirectoryButton: {\n        fontSize: important(theme.toolbar.fontSize),\n        height: theme.toolbar.size,\n        width: theme.toolbar.size,\n        padding: '0px !important',\n    },\n    navbarBreadcrumbs: {\n        fontSize: important(theme.toolbar.fontSize),\n        flexGrow: 100,\n    },\n    separator: {\n        marginRight: important(4),\n        marginLeft: important(4),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport React, { useCallback, useContext } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileActionData } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { CustomVisibilityState } from '../../types/action.types';\nimport { useFileActionProps, useFileActionTrigger } from '../../util/file-actions';\nimport { useLocalizedFileActionStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarDropdownButtonProps {\n    text: string;\n    active?: boolean;\n    icon?: Nullable<ChonkyIconName | string>;\n    onClick?: () => void;\n    disabled?: boolean;\n}\n\nexport const ToolbarDropdownButton = React.forwardRef(\n    (props: ToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { text, active, icon, onClick, disabled } = props;\n        const classes = useStyles();\n        const ChonkyIcon = useContext(ChonkyIconContext);\n\n        const className = c({\n            [classes.baseButton]: true,\n            [classes.activeButton]: active,\n        });\n        return (\n            <MenuItem\n                ref={ref}\n                className={className}\n                onClick={onClick}\n                disabled={disabled}\n            >\n                {icon && (\n                    <ListItemIcon className={classes.icon}>\n                        <ChonkyIcon icon={icon} fixedWidth={true} />\n                    </ListItemIcon>\n                )}\n                <ListItemText primaryTypographyProps={{ className: classes.text }}>\n                    {text}\n                </ListItemText>\n            </MenuItem>\n        );\n    }\n);\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    baseButton: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        height: important(theme.toolbar.size),\n        minHeight: important('auto'),\n        minWidth: important('auto'),\n        padding: important(20),\n    },\n    icon: {\n        fontSize: important(theme.toolbar.fontSize),\n        minWidth: important('auto'),\n        color: important('inherit'),\n        marginRight: 8,\n    },\n    text: {\n        fontSize: important(theme.toolbar.fontSize),\n    },\n    activeButton: {\n        color: important(theme.colors.textActive),\n    },\n}));\n\nexport interface SmartToolbarDropdownButtonProps {\n    fileActionId: string;\n    onClickFollowUp?: () => void;\n}\n\nexport const SmartToolbarDropdownButton = React.forwardRef(\n    (props: SmartToolbarDropdownButtonProps, ref: React.Ref<HTMLLIElement>) => {\n        const { fileActionId, onClickFollowUp } = props;\n\n        const action = useParamSelector(selectFileActionData, fileActionId);\n        const triggerAction = useFileActionTrigger(fileActionId);\n        const { icon, active, disabled } = useFileActionProps(fileActionId);\n        const { buttonName } = useLocalizedFileActionStrings(action);\n\n        // Combine external click handler with internal one\n        const handleClick = useCallback(() => {\n            triggerAction();\n            if (onClickFollowUp) onClickFollowUp();\n        }, [onClickFollowUp, triggerAction]);\n\n        if (!action) return null;\n        const { button } = action;\n        if (!button) return null;\n        if (action.customVisibility !== undefined && action.customVisibility() === CustomVisibilityState.Hidden) return null;\n\n        return (\n            <ToolbarDropdownButton\n                ref={ref}\n                text={buttonName}\n                icon={icon}\n                onClick={handleClick}\n                active={active}\n                disabled={disabled}\n            />\n        );\n    }\n);\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport Menu from '@material-ui/core/Menu';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { FileActionGroup } from '../../types/action-menus.types';\nimport { useLocalizedFileActionGroup } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { ToolbarButton } from './ToolbarButton';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport type ToolbarDropdownProps = FileActionGroup;\n\nexport const ToolbarDropdown: React.FC<ToolbarDropdownProps> = React.memo(props => {\n    const { name, fileActionIds } = props;\n    const [anchor, setAnchor] = React.useState<null | HTMLElement>(null);\n\n    const handleClick = useCallback(\n        (event: React.MouseEvent<HTMLButtonElement>) => setAnchor(event.currentTarget),\n        [setAnchor]\n    );\n    const handleClose = useCallback(() => setAnchor(null), [setAnchor]);\n\n    const menuItemComponents = useMemo(\n        () =>\n            fileActionIds.map(id => (\n                <SmartToolbarDropdownButton\n                    key={`menu-item-${id}`}\n                    fileActionId={id}\n                    onClickFollowUp={handleClose}\n                />\n            )),\n        [fileActionIds, handleClose]\n    );\n\n    const localizedName = useLocalizedFileActionGroup(name);\n    const classes = useStyles();\n    return (\n        <>\n            <ToolbarButton text={localizedName} onClick={handleClick} dropdown={true} />\n            <Menu\n                autoFocus\n                keepMounted\n                elevation={2}\n                anchorEl={anchor}\n                onClose={handleClose}\n                open={Boolean(anchor)}\n                transitionDuration={150}\n                classes={{ list: classes.dropdownList }}\n            >\n                {menuItemComponents}\n            </Menu>\n        </>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    dropdownList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport Typography from '@material-ui/core/Typography';\n\nimport { selectHiddenFileCount, selectors, selectSelectionSize } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarInfoProps {}\n\nexport const ToolbarInfo: React.FC<ToolbarInfoProps> = React.memo(() => {\n    const classes = useStyles();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const selectionSize = useSelector(selectSelectionSize);\n    const hiddenCount = useSelector(selectHiddenFileCount);\n\n    const intl = useIntl();\n    const fileCountString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'visibleFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {# items}\n                one {# item}\n                other {# items}\n            }`,\n        },\n        { fileCount: displayFileIds.length }\n    );\n    const selectedString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'selectedFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# selected}\n            }`,\n        },\n        { fileCount: selectionSize }\n    );\n    const hiddenString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.Toolbar, 'hiddenFileCount'),\n            defaultMessage: `{fileCount, plural,\n                =0 {}\n                other {# hidden}\n            }`,\n        },\n        { fileCount: hiddenCount }\n    );\n\n    return (\n        <div className={classes.infoContainer}>\n            <Typography className={classes.infoText} variant=\"body1\">\n                {fileCountString}\n                {(selectedString || hiddenString) && (\n                    <span className={classes.extraInfoSpan}>\n                        (\n                        <span className={classes.selectionSizeText}>\n                            {selectedString}\n                        </span>\n                        {selectedString && hiddenString && ', '}\n                        <span className={classes.hiddenCountText}>{hiddenString}</span>)\n                    </span>\n                )}\n            </Typography>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    infoContainer: {\n        height: theme.toolbar.size,\n        display: 'flex',\n    },\n    infoText: {\n        lineHeight: important(theme.toolbar.lineHeight),\n        fontSize: important(theme.toolbar.fontSize),\n        marginLeft: important(12),\n        height: theme.toolbar.size,\n    },\n    extraInfoSpan: {\n        marginRight: important(8),\n        marginLeft: important(8),\n        opacity: 0.8,\n    },\n    selectionSizeText: {\n        color: theme.colors.textActive,\n    },\n    hiddenCountText: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectSearchString } from '../../redux/selectors';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useDebounce } from '../../util/hooks-helpers';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface ToolbarSearchProps {}\n\nexport const ToolbarSearch: React.FC<ToolbarSearchProps> = React.memo(() => {\n    const intl = useIntl();\n    const searchPlaceholderString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.Toolbar, 'searchPlaceholder'),\n        defaultMessage: 'Search',\n    });\n\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n\n    const searchInputRef = useRef<HTMLInputElement>();\n\n    const dispatch = useDispatch();\n    const reduxSearchString = useSelector(selectSearchString);\n\n    const [localSearchString, setLocalSearchString] = useState(reduxSearchString);\n    const [debouncedLocalSearchString] = useDebounce(localSearchString, 300);\n    const [showLoadingIndicator, setShowLoadingIndicator] = useState(false);\n\n    useEffect(() => {\n        dispatch(\n            reduxActions.setFocusSearchInput(() => {\n                if (searchInputRef.current) searchInputRef.current.focus();\n            })\n        );\n        return () => {\n            dispatch(reduxActions.setFocusSearchInput(null));\n        };\n    }, [dispatch]);\n\n    useEffect(() => {\n        setShowLoadingIndicator(false);\n        dispatch(reduxActions.setSearchString(debouncedLocalSearchString));\n    }, [debouncedLocalSearchString, dispatch]);\n\n    const handleChange = useCallback((event: React.FormEvent<HTMLInputElement>) => {\n        setShowLoadingIndicator(true);\n        setLocalSearchString(event.currentTarget.value);\n    }, []);\n    const handleKeyUp = useCallback(\n        (event: React.KeyboardEvent<HTMLInputElement>) => {\n            // Remove focus from the search input field when user presses escape.\n            // Note: We use KeyUp instead of KeyPress because some browser plugins can\n            //       intercept KeyPress events with Escape key.\n            //       @see https://stackoverflow.com/a/37461974\n            if (event.key === 'Escape') {\n                setLocalSearchString('');\n                dispatch(reduxActions.setSearchString(''));\n                if (searchInputRef.current) searchInputRef.current.blur();\n            }\n        },\n        [dispatch]\n    );\n\n    return (\n        <TextField\n            className={classes.searchFieldContainer}\n            size=\"small\"\n            variant=\"outlined\"\n            value={localSearchString}\n            placeholder={searchPlaceholderString}\n            onChange={handleChange as any}\n            inputRef={searchInputRef}\n            InputProps={{\n                onKeyUp: handleKeyUp,\n                startAdornment: (\n                    <InputAdornment className={classes.searchIcon} position=\"start\">\n                        <ChonkyIcon\n                            icon={showLoadingIndicator ? ChonkyIconName.loading : ChonkyIconName.search}\n                            spin={showLoadingIndicator}\n                        />\n                    </InputAdornment>\n                ),\n                className: classes.searchFieldInput,\n            }}\n            inputProps={{ className: classes.searchFieldInputInner }}\n        />\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    searchFieldContainer: {\n        height: theme.toolbar.size,\n        width: 150,\n    },\n    searchIcon: {\n        fontSize: '0.9em',\n        opacity: 0.75,\n    },\n    searchFieldInput: {\n        lineHeight: important(0),\n        padding: important(0),\n        margin: important(0),\n        fontSize: important(theme.toolbar.fontSize),\n        borderRadius: theme.toolbar.buttonRadius,\n        height: theme.toolbar.size - 4,\n        paddingLeft: important(8),\n        marginTop: 2,\n    },\n    searchFieldInputInner: {\n        lineHeight: important(`${theme.toolbar.size - 4}px`),\n        fontSize: important(theme.toolbar.fontSize),\n        height: important(theme.toolbar.size - 4),\n        padding: important([0, 8, 0, 0]),\n        margin: important(0),\n        '-webkit-appearance': 'none',\n    },\n}));\n","import React, { ReactElement, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectToolbarItems } from '../../redux/selectors';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { SmartToolbarButton } from './ToolbarButton';\nimport { ToolbarDropdown } from './ToolbarDropdown';\nimport { ToolbarInfo } from './ToolbarInfo';\nimport { ToolbarSearch } from './ToolbarSearch';\n\nexport interface FileToolbarProps {}\n\nexport const FileToolbar: React.FC<FileToolbarProps> = React.memo(() => {\n    const classes = useStyles();\n    const toolbarItems = useSelector(selectToolbarItems);\n\n    const toolbarItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < toolbarItems.length; ++i) {\n            const item = toolbarItems[i];\n\n            const key = `toolbar-item-${typeof item === 'string' ? item : item.name}`;\n            const component =\n                typeof item === 'string' ? (\n                    <SmartToolbarButton key={key} fileActionId={item} />\n                ) : (\n                    <ToolbarDropdown\n                        key={key}\n                        name={item.name}\n                        fileActionIds={item.fileActionIds}\n                    />\n                );\n            components.push(component);\n        }\n        return components;\n    }, [toolbarItems]);\n\n    return (\n        <div className={classes.toolbarWrapper}>\n            <div className={classes.toolbarContainer}>\n                <div className={classes.toolbarLeft}>\n                    <ToolbarSearch />\n                    <ToolbarInfo />\n                </div>\n                <div className={classes.toolbarRight}>{toolbarItemComponents}</div>\n            </div>\n        </div>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    toolbarWrapper: {},\n    toolbarContainer: {\n        flexWrap: 'wrap-reverse',\n        display: 'flex',\n    },\n    toolbarLeft: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        flexGrow: 10000,\n        display: 'flex',\n    },\n    toolbarLeftFiller: {\n        flexGrow: 10000,\n    },\n    toolbarRight: {\n        paddingBottom: theme.margins.rootLayoutMargin,\n        flexWrap: 'nowrap',\n        display: 'flex',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useContext } from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileListEmptyProps {\n    width: number;\n    height: number;\n}\n\nexport const FileListEmpty: React.FC<FileListEmptyProps> = props => {\n    const { width, height } = props;\n    const classes = useStyles();\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const style: CSSProperties = {\n        width,\n        height,\n    };\n\n    const intl = useIntl();\n    const emptyString = intl.formatMessage({\n        id: getI18nId(I18nNamespace.FileList, 'nothingToShow'),\n        defaultMessage: 'Nothing to show',\n    });\n\n    return (\n        <div className={classes.fileListEmpty} style={style}>\n            <div className={classes.fileListEmptyContent}>\n                <ChonkyIcon icon={ChonkyIconName.folderOpen} />\n                &nbsp; {emptyString}\n            </div>\n        </div>\n    );\n};\n\nconst useStyles = makeGlobalChonkyStyles(theme => ({\n    fileListEmpty: {\n        color: theme.palette.text.disabled,\n        position: 'relative',\n        textAlign: 'center',\n        fontSize: '1.2em',\n    },\n    fileListEmptyContent: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        left: '50%',\n        top: '50%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nilable, Nullable } from 'tsdef';\n\nimport { selectDoubleClickDelay } from '../../redux/selectors';\nimport {\n    KeyboardClickEvent,\n    KeyboardClickEventHandler,\n    MouseClickEvent,\n    MouseClickEventHandler,\n} from './ClickableWrapper';\n\nexport const useClickHandler = (\n    onSingleClick: Nilable<MouseClickEventHandler>,\n    onDoubleClick: Nilable<MouseClickEventHandler>\n) => {\n    const doubleClickDelay = useSelector(selectDoubleClickDelay);\n\n    const counter = useRef({\n        clickCount: 0,\n        clickTimeout: null as Nullable<number>,\n    });\n\n    return useCallback(\n        (event: React.MouseEvent) => {\n            const mouseClickEvent: MouseClickEvent = {\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey || event.metaKey,\n                shiftKey: event.shiftKey,\n\n            };\n\n            counter.current.clickCount++;\n            if (counter.current.clickCount === 1) {\n                if (onSingleClick) {\n                    event.preventDefault();\n                    onSingleClick(mouseClickEvent);\n                }\n                counter.current.clickCount = 1;\n                // @ts-ignore\n                counter.current.clickTimeout = setTimeout(\n                    () => (counter.current.clickCount = 0),\n                    doubleClickDelay\n                );\n            } else if (counter.current.clickCount === 2) {\n                if (onDoubleClick) {\n                    event.preventDefault();\n                    onDoubleClick(mouseClickEvent);\n                }\n                if (typeof counter.current.clickTimeout === 'number') {\n                    clearTimeout(counter.current.clickTimeout);\n                    counter.current.clickTimeout = null;\n                    counter.current.clickCount = 0;\n                }\n            }\n        },\n        [doubleClickDelay, onSingleClick, onDoubleClick, counter]\n    );\n};\n\nexport const useKeyDownHandler = (onKeyboardClick?: KeyboardClickEventHandler) => {\n    return useCallback(\n        (event: React.KeyboardEvent) => {\n            if (!onKeyboardClick) return;\n\n            const keyboardClickEvent: KeyboardClickEvent = {\n                enterKey: event.nativeEvent.code === 'Enter',\n                spaceKey: event.nativeEvent.code === 'Space',\n                altKey: event.altKey,\n                ctrlKey: event.ctrlKey,\n                shiftKey: event.shiftKey,\n            };\n\n            if (keyboardClickEvent.spaceKey || keyboardClickEvent.enterKey) {\n                event.preventDefault();\n                event.stopPropagation();\n                onKeyboardClick(keyboardClickEvent);\n            }\n        },\n        [onKeyboardClick]\n    );\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useCallback } from 'react';\nimport { AnyObjectWithStringKeys } from 'tsdef';\n\nimport { useClickHandler, useKeyDownHandler } from './ClickableWrapper-hooks';\n\nexport interface MouseClickEvent {\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type MouseClickEventHandler = (event: MouseClickEvent) => void;\n\nexport interface KeyboardClickEvent {\n    enterKey: boolean;\n    spaceKey: boolean;\n    altKey: boolean;\n    ctrlKey: boolean;\n    shiftKey: boolean;\n}\nexport type KeyboardClickEventHandler = (event: KeyboardClickEvent) => void;\n\nexport interface ClickableWrapperProps {\n    wrapperTag: any;\n    passthroughProps?: any;\n\n    onSingleClick?: MouseClickEventHandler;\n    onDoubleClick?: MouseClickEventHandler;\n    onKeyboardClick?: KeyboardClickEventHandler;\n    setFocused?: (focused: boolean) => void;\n}\n\nexport const ClickableWrapper: React.FC<ClickableWrapperProps> = props => {\n    const {\n        children,\n        wrapperTag: WrapperTag,\n        passthroughProps,\n        onSingleClick,\n        onDoubleClick,\n        onKeyboardClick,\n        setFocused,\n    } = props;\n\n    const handleClick = useClickHandler(onSingleClick, onDoubleClick);\n    const handleKeyDown = useKeyDownHandler(onKeyboardClick);\n\n    const compProps: AnyObjectWithStringKeys = {\n        onFocus: useCallback(() => setFocused && setFocused(true), [setFocused]),\n        onBlur: useCallback(() => setFocused && setFocused(false), [setFocused]),\n    };\n\n    if (onSingleClick || onDoubleClick || onKeyboardClick) {\n        compProps.onClick = handleClick;\n        compProps.onKeyDown = handleKeyDown;\n        compProps.tabIndex = 0;\n    }\n\n    const mergedProps = { ...compProps, ...passthroughProps };\n    return <WrapperTag {...mergedProps}>{children}</WrapperTag>;\n};\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { FileData } from '../../types/file.types';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileNameComponent, useModifierIconComponents } from './FileEntry-hooks';\n\nexport interface FileEntryNameProps {\n    file: Nullable<FileData>;\n    className?: string;\n}\n\nexport const FileEntryName: React.FC<FileEntryNameProps> = React.memo(({ file, className }) => {\n    const modifierIconComponents = useModifierIconComponents(file);\n    const fileNameComponent = useFileNameComponent(file);\n\n    const classes = useStyles();\n    return (\n        <span className={className} title={file ? file.name : undefined}>\n            {modifierIconComponents.length > 0 && (\n                <span className={classes.modifierIcons}>{modifierIconComponents}</span>\n            )}\n            {fileNameComponent}\n        </span>\n    );\n});\nFileEntryName.displayName = 'FileEntryName';\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    modifierIcons: {\n        color: theme.palette.text.hint,\n        position: 'relative',\n        fontSize: '0.775em',\n        paddingRight: 5,\n    },\n}));\n","import React, { useContext } from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState } from './GridEntryPreview';\n\nexport const CompactEntry: React.FC<FileEntryProps> = React.memo(\n    // @ts-ignore\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n\n        const classes = useStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={entryState.icon}\n                        spin={entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div className={classes.listFileEntryDescription}>\n                    <div\n                        className={classes.listFileEntryName}\n                        title={file ? file.name : undefined}\n                    >\n                        <FileEntryName file={file} />\n                    </div>\n                    <div className={classes.listFileEntryProperties}>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileModDateString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={5} maxLength={15} />\n                            )}\n                        </div>\n                        <div className={classes.listFileEntryProperty}>\n                            {file ? (\n                                fileSizeString ?? <span></span>\n                            ) : (\n                                <TextPlaceholder minLength={10} maxLength={20} />\n                            )}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"chonky-file-entry-outline\"></div>\n                <div className=\"chonky-file-entry-selection\"></div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        fontSize: theme.listFileEntry.fontSize,\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntryIcon: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: 'inset rgba(255, 255, 255, 0.5) 0 0 0 999px',\n        borderRadius: theme.listFileEntry.iconBorderRadius,\n        fontSize: theme.listFileEntry.iconFontSize,\n        color: '#fff',\n        padding: 8,\n    },\n    listFileEntryDescription: {\n        flexDirection: 'column',\n        display: 'flex',\n        flexGrow: 1,\n    },\n    listFileEntryName: {\n        padding: [0, 8, 4, 8],\n    },\n    listFileEntryProperties: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        flexDirection: 'row',\n        display: 'flex',\n    },\n    listFileEntryProperty: {\n        padding: [0, 8],\n        opacity: 0.4,\n    },\n}));\n","import React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { FileData } from '../../types/file.types';\nimport { useDndHoverOpen, useFileEntryDnD } from '../../util/dnd';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeLocalChonkyStyles } from '../../util/styles';\n\nexport interface DnDFileEntryProps {\n    file: Nullable<FileData>;\n    children: (dndState: DndEntryState) => React.ReactElement;\n}\n\nexport const DnDFileEntry = React.memo(({ file, children }: DnDFileEntryProps) => {\n    const { drop, drag, dndState } = useFileEntryDnD(file);\n\n    useDndHoverOpen(file, dndState);\n    const classes = useStyles();\n    return (\n        <div ref={drop} className={classes.fillParent}>\n            <div\n                ref={FileHelper.isDraggable(file) ? drag : null}\n                className={classes.fillParent}\n            >\n                {children(dndState)}\n            </div>\n        </div>\n    );\n});\n\nexport const useStyles = makeLocalChonkyStyles(() => ({\n    fillParent: {\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport c from 'classnames';\nimport React from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { makeGlobalChonkyStyles } from '../../util/styles';\n\nexport interface FileThumbnailProps {\n    className: string;\n    thumbnailUrl: Nullable<string>;\n}\n\nexport const FileThumbnail: React.FC<FileThumbnailProps> = React.memo(props => {\n    const { className, thumbnailUrl } = props;\n\n    const thumbnailStyle: React.CSSProperties = thumbnailUrl ? { backgroundImage: `url('${thumbnailUrl}')` } : {};\n\n    const classes = useStyles();\n    return <div className={c([className, classes.fileThumbnail])} style={thumbnailStyle} />;\n});\nFileThumbnail.displayName = 'FileThumbnail';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileThumbnail: {\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n        backgroundSize: 'contain',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext } from 'react';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useDndIcon } from './FileEntry-hooks';\n\nexport interface DnDIndicatorProps {\n    className: string;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryDndIndicator: React.FC<DnDIndicatorProps> = React.memo(props => {\n    const { className: externalClassName, dndState } = props;\n    const dndIconName = useDndIcon(dndState);\n    const classes = useStyles(dndState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    if (!dndIconName) return null;\n    const className = c({\n        [classes.dndIndicator]: true,\n        [externalClassName]: true,\n    });\n    return (\n        <div className={className}>\n            <ChonkyIcon icon={dndIconName} />\n        </div>\n    );\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    dndIndicator: {\n        color: (dndState: DndEntryState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : '#000',\n        boxSizing: 'border-box',\n        position: 'absolute',\n        fontSize: '1.2em',\n        opacity: 0.6,\n        padding: 6,\n        '&:before': {\n            borderBottom: '50px solid transparent',\n            borderLeft: '50px solid #fff',\n            position: 'absolute',\n            content: '\"\"',\n            zIndex: -1,\n            left: 0,\n            top: 0,\n        },\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { useContext, useEffect } from 'react';\nimport { Nullable } from 'tsdef';\n\nimport { DndEntryState } from '../../types/file-list.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, important, makeLocalChonkyStyles } from '../../util/styles';\nimport { FileThumbnail } from './FileThumbnail';\nimport { GridEntryDndIndicator } from './GridEntryDndIndicator';\n\nexport type FileEntryState = {\n    childrenCount: Nullable<number>;\n    color: string;\n    icon: ChonkyIconName | string;\n    thumbnailUrl: Nullable<string>;\n    iconSpin: boolean;\n    selected: boolean;\n    focused: boolean;\n};\n\nexport interface FileEntryPreviewProps {\n    className?: string;\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const GridEntryPreviewFolder: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const folderClasses = useFolderStyles(entryState);\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const className = c({\n        [folderClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <div className={folderClasses.folderBackSideMid}>\n                <div className={folderClasses.folderBackSideTop} />\n                <div className={folderClasses.folderFrontSide}>\n                    <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n                    <div className={c([fileClasses.fileIcon, folderClasses.fileIcon])}>{entryState.childrenCount}</div>\n                    <div className={commonClasses.selectionIndicator}></div>\n                    <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n                </div>\n            </div>\n        </div>\n    );\n});\nGridEntryPreviewFolder.displayName = 'GridEntryPreviewFolder';\n\nconst useFolderStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    folderBackSideTop: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopLeftRadius: theme.gridFileEntry.borderRadius,\n        borderTopRightRadius: 10,\n        position: 'absolute',\n        right: '60%',\n        height: 13,\n        top: -10,\n        left: 0,\n        '&:after': {\n            borderRightColor: theme.palette.background.paper,\n            borderTopColor: theme.palette.background.paper,\n            borderBottomColor: 'transparent',\n            borderLeftColor: 'transparent',\n            borderWidth: [0, 15, 10, 0],\n            borderStyle: 'solid',\n            position: 'absolute',\n            display: 'block',\n            content: '\"\"',\n            right: 0,\n            top: 0,\n        },\n    },\n    folderBackSideMid: {\n        backgroundColor: (state: FileEntryState) => state.color,\n        boxShadow: (state: FileEntryState) => {\n            let color = theme.gridFileEntry.folderBackColorTint;\n            if (state.focused) color = 'rgba(0, 0, 0, 0.3)';\n            else if (state.selected) color = 'rgba(0, 153, 255, .4)';\n            return `inset ${color} 0 0 0 999px`;\n        },\n        borderTopRightRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    folderFrontSide: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            if (state.selected) shadows.push('inset rgba(0, 153, 255, .65) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.folderFrontColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        overflow: 'hidden',\n        bottom: 0,\n        right: 0,\n        left: 0,\n        top: 10,\n    },\n    fileIcon: {\n        fontSize: important(theme.gridFileEntry.childrenCountSize),\n    },\n}));\n\nexport const GridEntryPreviewFile: React.FC<FileEntryPreviewProps> = React.memo(props => {\n    const { className: externalClassName, entryState, dndState } = props;\n\n    const fileClasses = useFileStyles(entryState);\n    const commonClasses = useCommonEntryStyles(entryState);\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    const className = c({\n        [fileClasses.previewFile]: true,\n        [externalClassName || '']: !!externalClassName,\n    });\n    return (\n        <div className={className}>\n            <GridEntryDndIndicator className={fileClasses.dndIndicator} dndState={dndState} />\n            <div className={fileClasses.fileIcon}>\n                <ChonkyIcon icon={entryState.icon} spin={entryState.iconSpin} />\n            </div>\n            <div className={commonClasses.selectionIndicator}></div>\n            <FileThumbnail className={fileClasses.thumbnail} thumbnailUrl={entryState.thumbnailUrl} />\n        </div>\n    );\n});\nGridEntryPreviewFile.displayName = 'GridEntryPreviewFile';\n\nconst useFileStyles = makeLocalChonkyStyles(theme => ({\n    previewFile: {\n        boxShadow: (state: FileEntryState) => {\n            const shadows: string[] = [];\n            if (state.selected) shadows.push('inset rgba(0,153,255, .65) 0 0 0 3px');\n            if (state.focused) shadows.push('inset rgba(0, 0, 0, 1) 0 0 0 3px');\n            shadows.push(`inset ${theme.gridFileEntry.fileColorTint} 0 0 0 999px`);\n            return shadows.join(', ');\n        },\n        backgroundColor: (state: FileEntryState) => state.color,\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    dndIndicator: {\n        zIndex: 14,\n    },\n    fileIcon: {\n        transform: 'translateX(-50%) translateY(-50%)',\n        fontSize: theme.gridFileEntry.iconSize,\n        opacity: (state: FileEntryState) => (state.thumbnailUrl && !state.focused ? 0 : 1),\n        color: (state: FileEntryState) =>\n            state.focused ? theme.gridFileEntry.iconColorFocused : theme.gridFileEntry.iconColor,\n        position: 'absolute',\n        left: '50%',\n        zIndex: 12,\n        top: '50%',\n    },\n    thumbnail: {\n        borderRadius: theme.gridFileEntry.borderRadius,\n        position: 'absolute',\n        zIndex: 6,\n        bottom: 5,\n        right: 5,\n        left: 5,\n        top: 5,\n    },\n}));\n\nexport const useCommonEntryStyles = makeLocalChonkyStyles(() => ({\n    selectionIndicator: {\n        display: (state: FileEntryState) => (state.selected ? 'block' : 'none'),\n        background:\n            'repeating-linear-gradient(' +\n            '45deg,' +\n            'rgba(0,153,255,.14),' +\n            'rgba(0,153,255,.14) 10px,' +\n            'rgba(0,153,255,.25) 0,' +\n            'rgba(0,153,255,.25) 20px' +\n            ')',\n        backgroundColor: 'rgba(0, 153, 255, .14)',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 10,\n    },\n    focusIndicator: {\n        display: (state: FileEntryState) => (state.focused ? 'block' : 'none'),\n        boxShadow: 'inset rgba(0, 0, 0, 1) 0 0 0 2px',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 11,\n    },\n}));\n","import React from 'react';\n\nimport { FileEntryProps } from '../../types/file-list.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { useFileEntryHtmlProps, useFileEntryState } from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, GridEntryPreviewFile, GridEntryPreviewFolder } from './GridEntryPreview';\n\nexport const GridEntry: React.FC<FileEntryProps> = React.memo(({ file, selected, focused, dndState }) => {\n    const isDirectory = FileHelper.isDirectory(file);\n    const entryState = useFileEntryState(file, selected, focused);\n\n    const classes = useFileEntryStyles(entryState);\n    const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n    const entryClassName = c({\n        [classes.gridFileEntry]: true,\n    });\n    return (\n        <div className={entryClassName} {...fileEntryHtmlProps}>\n            {isDirectory ? (\n                <GridEntryPreviewFolder\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            ) : (\n                <GridEntryPreviewFile\n                    className={classes.gridFileEntryPreview}\n                    entryState={entryState}\n                    dndState={dndState}\n                />\n            )}\n            <div className={classes.gridFileEntryNameContainer}>\n                <FileEntryName className={classes.gridFileEntryName} file={file} />\n            </div>\n        </div>\n    );\n});\nGridEntry.displayName = 'GridEntry';\n\nconst useFileEntryStyles = makeLocalChonkyStyles(theme => ({\n    gridFileEntry: {\n        flexDirection: 'column',\n        display: 'flex',\n        height: '100%',\n    },\n    gridFileEntryPreview: {\n        flexGrow: 1,\n    },\n    gridFileEntryNameContainer: {\n        fontSize: theme.gridFileEntry.fontSize,\n        wordBreak: 'break-word',\n        textAlign: 'center',\n        paddingTop: 5,\n    },\n    gridFileEntryName: {\n        backgroundColor: (state: FileEntryState) => (state.selected ? 'rgba(0,153,255, .25)' : 'transparent'),\n        textDecoration: (state: FileEntryState) => (state.focused ? 'underline' : 'none'),\n        borderRadius: 3,\n        padding: [2, 4],\n    },\n}));\n","import React, { useContext, useMemo } from 'react';\n\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { useLocalizedFileEntryStrings } from '../../util/i18n';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport { c, makeLocalChonkyStyles } from '../../util/styles';\nimport { TextPlaceholder } from '../external/TextPlaceholder';\nimport {\n    useDndIcon,\n    useFileEntryHtmlProps,\n    useFileEntryState,\n} from './FileEntry-hooks';\nimport { FileEntryName } from './FileEntryName';\nimport { FileEntryState, useCommonEntryStyles } from './GridEntryPreview';\n\ninterface StyleState {\n    entryState: FileEntryState;\n    dndState: DndEntryState;\n}\n\nexport const ListEntry: React.FC<FileEntryProps> = React.memo(\n    ({ file, selected, focused, dndState }) => {\n        const entryState: FileEntryState = useFileEntryState(file, selected, focused);\n        const dndIconName = useDndIcon(dndState);\n\n        const { fileModDateString, fileSizeString } = useLocalizedFileEntryStrings(\n            file\n        );\n        const styleState = useMemo<StyleState>(\n            () => ({\n                entryState,\n                dndState,\n            }),\n            [dndState, entryState]\n        );\n        const classes = useStyles(styleState);\n        const commonClasses = useCommonEntryStyles(entryState);\n        const ChonkyIcon = useContext(ChonkyIconContext);\n        const fileEntryHtmlProps = useFileEntryHtmlProps(file);\n        return (\n            <div className={classes.listFileEntry} {...fileEntryHtmlProps}>\n                <div className={commonClasses.focusIndicator}></div>\n                <div\n                    className={c([\n                        commonClasses.selectionIndicator,\n                        classes.listFileEntrySelection,\n                    ])}\n                ></div>\n                <div className={classes.listFileEntryIcon}>\n                    <ChonkyIcon\n                        icon={dndIconName ?? entryState.icon}\n                        spin={dndIconName ? false : entryState.iconSpin}\n                        fixedWidth={true}\n                    />\n                </div>\n                <div\n                    className={classes.listFileEntryName}\n                    title={file ? file.name : undefined}\n                >\n                    <FileEntryName file={file} />\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileModDateString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={5} maxLength={15} />\n                    )}\n                </div>\n                <div className={classes.listFileEntryProperty}>\n                    {file ? (\n                        fileSizeString ?? <span></span>\n                    ) : (\n                        <TextPlaceholder minLength={10} maxLength={20} />\n                    )}\n                </div>\n            </div>\n        );\n    }\n);\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listFileEntry: {\n        boxShadow: `inset ${theme.palette.divider} 0 -1px 0`,\n        fontSize: theme.listFileEntry.fontSize,\n        color: ({ dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : 'inherit',\n        alignItems: 'center',\n        position: 'relative',\n        display: 'flex',\n        height: '100%',\n    },\n    listFileEntrySelection: {\n        opacity: 0.6,\n    },\n    listFileEntryIcon: {\n        color: ({ entryState, dndState }: StyleState) =>\n            dndState.dndIsOver\n                ? dndState.dndCanDrop\n                    ? theme.dnd.canDropColor\n                    : theme.dnd.cannotDropColor\n                : entryState.color,\n        fontSize: theme.listFileEntry.iconFontSize,\n        boxSizing: 'border-box',\n        padding: [2, 4],\n        zIndex: 20,\n    },\n    listFileEntryName: {\n        textOverflow: 'ellipsis',\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '1 1 300px',\n        paddingLeft: 8,\n        zIndex: 20,\n    },\n    listFileEntryProperty: {\n        fontSize: theme.listFileEntry.propertyFontSize,\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        flex: '0 1 150px',\n        padding: [2, 8],\n        zIndex: 20,\n    },\n}));\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Nullable } from 'tsdef';\n\nimport { selectFileData, selectIsDnDDisabled, selectIsFileSelected } from '../../redux/selectors';\nimport { useParamSelector } from '../../redux/store';\nimport { DndEntryState, FileEntryProps } from '../../types/file-list.types';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { FileHelper } from '../../util/file-helper';\nimport { makeGlobalChonkyStyles } from '../../util/styles';\nimport { ClickableWrapper, ClickableWrapperProps } from '../internal/ClickableWrapper';\nimport { CompactEntry } from './CompactEntry';\nimport { DnDFileEntry } from './DnDFileEntry';\nimport { useFileClickHandlers } from './FileEntry-hooks';\nimport { GridEntry } from './GridEntry';\nimport { ListEntry } from './ListEntry';\n\nexport interface SmartFileEntryProps {\n    fileId: Nullable<string>;\n    displayIndex: number;\n    fileViewMode: FileViewMode;\n}\n\nconst disabledDndState: DndEntryState = {\n    dndIsDragging: false,\n    dndIsOver: false,\n    dndCanDrop: false,\n};\n\nexport const SmartFileEntry: React.FC<SmartFileEntryProps> = React.memo(({ fileId, displayIndex, fileViewMode }) => {\n    const classes = useStyles();\n\n    // Basic properties\n    const file = useParamSelector(selectFileData, fileId);\n    const selected = useParamSelector(selectIsFileSelected, fileId);\n    const dndDisabled = useSelector(selectIsDnDDisabled);\n\n    // Clickable wrapper properties\n    const fileClickHandlers = useFileClickHandlers(file, displayIndex);\n    const [focused, setFocused] = useState(false);\n    const clickableWrapperProps: ClickableWrapperProps = {\n        wrapperTag: 'div',\n        passthroughProps: { className: classes.fileEntryClickableWrapper },\n        ...(FileHelper.isClickable(file) ? fileClickHandlers : undefined),\n        setFocused,\n    };\n\n    // File entry properties\n    const fileEntryProps: Omit<FileEntryProps, 'dndState'> = {\n        file,\n        selected,\n        focused,\n    };\n\n    let EntryComponent: React.FC<FileEntryProps>;\n    if (fileViewMode === FileViewMode.List) EntryComponent = ListEntry;\n    else if (fileViewMode === FileViewMode.Compact) EntryComponent = CompactEntry;\n    else EntryComponent = GridEntry;\n\n    return dndDisabled ? (\n        <ClickableWrapper {...clickableWrapperProps}>\n            <EntryComponent {...fileEntryProps} dndState={disabledDndState} />\n        </ClickableWrapper>\n    ) : (\n        <DnDFileEntry file={file}>\n            {dndState => (\n                <ClickableWrapper {...clickableWrapperProps}>\n                    <EntryComponent {...fileEntryProps} dndState={dndState} />\n                </ClickableWrapper>\n            )}\n        </DnDFileEntry>\n    );\n});\nSmartFileEntry.displayName = 'SmartFileEntry';\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileEntryClickableWrapper: {\n        // We disable default browser outline because Chonky provides its own outline\n        // (which doesn't compromise accessibility, hopefully)\n        outline: 'none !important',\n        position: 'relative',\n        height: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { VariableSizeGrid } from 'react-window';\n\nimport { ChonkyActions } from '../../action-definitions';\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewConfigGrid } from '../../types/file-view.types';\nimport { RootState } from '../../types/redux.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeGlobalChonkyStyles, useIsMobileBreakpoint } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListGridProps {\n    width: number;\n    height: number;\n}\n\ninterface GridConfig {\n    rowCount: number;\n    columnCount: number;\n    gutter: number;\n    rowHeight: number;\n    columnWidth: number;\n}\n\nexport const isMobileDevice = () => {\n    // noinspection JSDeprecatedSymbols\n    return typeof window.orientation !== 'undefined' || navigator.userAgent.indexOf('IEMobile') !== -1;\n};\n\nexport const getGridConfig = (\n    width: number,\n    fileCount: number,\n    viewConfig: FileViewConfigGrid,\n    isMobileBreakpoint: boolean\n): GridConfig => {\n    const gutter = isMobileBreakpoint ? 5 : 8;\n    const scrollbar = isMobileDevice() ? 0 : 18;\n\n    let columnCount: number;\n    let columnWidth: number;\n    if (isMobileBreakpoint) {\n        columnCount = 2;\n        columnWidth = (width - gutter - scrollbar) / columnCount;\n    } else {\n        columnWidth = viewConfig.entryWidth;\n        columnCount = Math.max(1, Math.floor((width - scrollbar) / (columnWidth + gutter)));\n    }\n\n    const rowCount = Math.ceil(fileCount / columnCount);\n\n    return {\n        rowCount,\n        columnCount,\n        gutter,\n        rowHeight: viewConfig.entryHeight,\n        columnWidth,\n    };\n};\n\nexport const GridContainer: React.FC<FileListGridProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig) as FileViewConfigGrid;\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const fileCount = useMemo(() => displayFileIds.length, [displayFileIds]);\n\n    const gridRef = useRef<VariableSizeGrid>();\n    const isMobileBreakpoint = useIsMobileBreakpoint();\n\n    // Whenever the grid config changes at runtime, we call a method on the\n    // `VariableSizeGrid` handle to reset column width/row height cache.\n    // !!! Note that we deliberately update the `gridRef` firsts and update the React\n    //     state AFTER that. This is needed to avoid file entries jumping up/down.\n    const [gridConfig, setGridConfig] = useState(getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint));\n    const gridConfigRef = useRef(gridConfig);\n    useEffect(() => {\n        const oldConf = gridConfigRef.current;\n        const newConf = getGridConfig(width, fileCount, viewConfig, isMobileBreakpoint);\n\n        gridConfigRef.current = newConf;\n        if (gridRef.current) {\n            if (oldConf.rowCount !== newConf.rowCount) {\n                gridRef.current.resetAfterRowIndex(Math.min(oldConf.rowCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnCount !== newConf.columnCount) {\n                gridRef.current.resetAfterColumnIndex(Math.min(oldConf.columnCount, newConf.rowCount) - 1);\n            }\n            if (oldConf.columnWidth !== newConf.columnWidth) {\n                gridRef.current.resetAfterIndices({ columnIndex: 0, rowIndex: 0 });\n            }\n        }\n\n        setGridConfig(newConf);\n    }, [setGridConfig, gridConfigRef, isMobileBreakpoint, width, viewConfig, fileCount]);\n\n    const sizers = useMemo(() => {\n        const gc = gridConfigRef;\n        return {\n            getColumnWidth: (index: number) =>\n                gc.current.columnWidth! + (index === gc.current.columnCount - 1 ? 0 : gc.current.gutter),\n            getRowHeight: (index: number) =>\n                gc.current.rowHeight + (index === gc.current.rowCount - 1 ? 0 : gc.current.gutter),\n        };\n    }, [gridConfigRef]);\n\n    const displayFileIdsRef = useInstanceVariable(useSelector(selectors.getDisplayFileIds));\n    const getItemKey = useCallback(\n        (data: { columnIndex: number; rowIndex: number; data: any }) => {\n            const index = data.rowIndex * gridConfigRef.current.columnCount + data.columnIndex;\n\n            return displayFileIdsRef.current[index] ?? `loading-file-${index}`;\n        },\n        [gridConfigRef, displayFileIdsRef]\n    );\n\n    const cellRenderer = useCallback(\n        (data: { rowIndex: number; columnIndex: number; style: CSSProperties }) => {\n            const gc = gridConfigRef;\n            const index = data.rowIndex * gc.current.columnCount + data.columnIndex;\n            const fileId = displayFileIds[index];\n            if (displayFileIds[index] === undefined) return null;\n\n            const styleWithGutter: CSSProperties = {\n                ...data.style,\n                paddingRight: data.columnIndex === gc.current.columnCount - 1 ? 0 : gc.current.gutter,\n                paddingBottom: data.rowIndex === gc.current.rowCount - 1 ? 0 : gc.current.gutter,\n                boxSizing: 'border-box',\n            };\n\n            return (\n                <div style={styleWithGutter}>\n                    <SmartFileEntry fileId={fileId ?? null} displayIndex={index} fileViewMode={viewConfig.mode} />\n                </div>\n            );\n        },\n        [displayFileIds, viewConfig.mode]\n    );\n\n    const classes = useStyles();\n    const gridComponent = useMemo(() => {\n        return (\n            <VariableSizeGrid\n                ref={gridRef as any}\n                className={classes.gridContainer}\n                estimatedRowHeight={gridConfig.rowHeight + gridConfig.gutter}\n                rowHeight={sizers.getRowHeight}\n                estimatedColumnWidth={gridConfig.columnWidth + gridConfig.gutter}\n                columnWidth={sizers.getColumnWidth}\n                columnCount={gridConfig.columnCount}\n                height={height}\n                rowCount={gridConfig.rowCount}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {cellRenderer}\n            </VariableSizeGrid>\n        );\n    }, [\n        classes.gridContainer,\n        gridConfig.rowHeight,\n        gridConfig.gutter,\n        gridConfig.columnWidth,\n        gridConfig.columnCount,\n        gridConfig.rowCount,\n        sizers.getRowHeight,\n        sizers.getColumnWidth,\n        height,\n        width,\n        getItemKey,\n        cellRenderer,\n    ]);\n\n    return gridComponent;\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    gridContainer: {},\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { CSSProperties, useCallback, useMemo, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FixedSizeList } from 'react-window';\n\nimport { selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { useInstanceVariable } from '../../util/hooks-helpers';\nimport { makeLocalChonkyStyles } from '../../util/styles';\nimport { SmartFileEntry } from './FileEntry';\n\nexport interface FileListListProps {\n    width: number;\n    height: number;\n}\n\nexport const ListContainer: React.FC<FileListListProps> = React.memo(props => {\n    const { width, height } = props;\n\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const listRef = useRef<FixedSizeList>();\n\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const displayFileIdsRef = useInstanceVariable(displayFileIds);\n    const getItemKey = useCallback(\n        (index: number) => displayFileIdsRef.current[index] ?? `loading-file-${index}`,\n        [displayFileIdsRef]\n    );\n\n    const classes = useStyles();\n    const listComponent = useMemo(() => {\n        // When entry size is null, we use List view\n        const rowRenderer = (data: { index: number; style: CSSProperties }) => {\n            return (\n                <div style={data.style}>\n                    <SmartFileEntry\n                        fileId={displayFileIds[data.index] ?? null}\n                        displayIndex={data.index}\n                        fileViewMode={FileViewMode.List}\n                    />\n                </div>\n            );\n        };\n\n        return (\n            <FixedSizeList\n                ref={listRef as any}\n                className={classes.listContainer}\n                itemSize={viewConfig.entryHeight}\n                height={height}\n                itemCount={displayFileIds.length}\n                width={width}\n                itemKey={getItemKey}\n            >\n                {rowRenderer}\n            </FixedSizeList>\n        );\n    }, [\n        classes.listContainer,\n        viewConfig.entryHeight,\n        height,\n        displayFileIds,\n        width,\n        getItemKey,\n    ]);\n\n    return listComponent;\n});\n\nconst useStyles = makeLocalChonkyStyles(theme => ({\n    listContainer: {\n        borderTop: `solid 1px ${theme.palette.divider}`,\n    },\n}));\n","import React, { UIEvent, useCallback, useContext, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { ChonkyActions } from '../../action-definitions/index';\nimport { selectCurrentFolder, selectFileViewConfig, selectors } from '../../redux/selectors';\nimport { FileViewMode } from '../../types/file-view.types';\nimport { ChonkyIconName } from '../../types/icons.types';\nimport { useFileDrop } from '../../util/dnd';\nimport { ChonkyIconContext } from '../../util/icon-helper';\nimport {\n    c, getStripeGradient, makeGlobalChonkyStyles, makeLocalChonkyStyles\n} from '../../util/styles';\nimport { FileListEmpty } from './FileListEmpty';\nimport { GridContainer } from './GridContainer';\nimport { ListContainer } from './ListContainer';\n\nexport interface FileListProps {\n    onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n}\n\ninterface StyleState {\n    dndCanDrop: boolean;\n    dndIsOverCurrent: boolean;\n}\n\nexport const FileList: React.FC<FileListProps> = React.memo((props: FileListProps) => {\n    const displayFileIds = useSelector(selectors.getDisplayFileIds);\n    const viewConfig = useSelector(selectFileViewConfig);\n\n    const currentFolder = useSelector(selectCurrentFolder);\n    const { drop, dndCanDrop, dndIsOverCurrent } = useFileDrop({ file: currentFolder });\n    const styleState = useMemo<StyleState>(() => ({ dndCanDrop, dndIsOverCurrent }), [dndCanDrop, dndIsOverCurrent]);\n\n    const localClasses = useLocalStyles(styleState);\n    const classes = useStyles(viewConfig);\n    const { onScroll } = props;\n\n    // In Chonky v0.x, this field was user-configurable. In Chonky v1.x+, we hardcode\n    // this to `true` to simplify configuration. Users can just wrap Chonky in their\n    // own `div` if they want to have finer control over the height.\n    const fillParentContainer = true;\n\n    const listRenderer = useCallback(\n        ({ width, height }: { width: number; height: number }) => {\n            if (displayFileIds.length === 0) {\n                return <FileListEmpty width={width} height={viewConfig.entryHeight} />;\n            } else if (viewConfig.mode === FileViewMode.List) {\n                return <ListContainer width={width} height={height} />;\n            } else {\n                return <GridContainer width={width} height={height} />;\n            }\n        },\n        [displayFileIds, viewConfig]\n    );\n\n    const ChonkyIcon = useContext(ChonkyIconContext);\n    return (\n        <div onScroll={onScroll} ref={drop} className={c([classes.fileListWrapper, localClasses.fileListWrapper])} role=\"list\">\n            <div className={localClasses.dndDropZone}>\n                <div className={localClasses.dndDropZoneIcon}>\n                    <ChonkyIcon icon={dndCanDrop ? ChonkyIconName.dndCanDrop : ChonkyIconName.dndCannotDrop} />\n                </div>\n            </div>\n            <AutoSizer disableHeight={!fillParentContainer}>{listRenderer}</AutoSizer>\n        </div>\n    );\n});\nFileList.displayName = 'FileList';\n\nconst useLocalStyles = makeLocalChonkyStyles(theme => ({\n    fileListWrapper: {\n        minHeight: ChonkyActions.EnableGridView.fileViewConfig.entryHeight + 2,\n        background: (state: StyleState) =>\n            state.dndIsOverCurrent && state.dndCanDrop\n                ? state.dndCanDrop\n                    ? getStripeGradient(theme.dnd.fileListCanDropMaskOne, theme.dnd.fileListCanDropMaskTwo)\n                    : getStripeGradient(theme.dnd.fileListCannotDropMaskOne, theme.dnd.fileListCannotDropMaskTwo)\n                : 'none',\n    },\n    dndDropZone: {\n        display: (state: StyleState) =>\n            // When we cannot drop, we don't show an indicator at all\n            state.dndIsOverCurrent && state.dndCanDrop ? 'block' : 'none',\n        borderRadius: theme.gridFileEntry.borderRadius,\n        pointerEvents: 'none',\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: 2,\n    },\n    dndDropZoneIcon: {\n        backgroundColor: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropMask : theme.dnd.cannotDropMask),\n        color: (state: StyleState) => (state.dndCanDrop ? theme.dnd.canDropColor : theme.dnd.cannotDropColor),\n        borderRadius: theme.gridFileEntry.borderRadius,\n        transform: 'translateX(-50%) translateY(-50%)',\n        position: 'absolute',\n        textAlign: 'center',\n        lineHeight: '60px',\n        fontSize: '2em',\n        left: '50%',\n        height: 60,\n        top: '50%',\n        width: 60,\n    },\n}));\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    fileListWrapper: {\n        height: '100%',\n        maxHeight: '100%',\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport React, { ReactElement, useEffect, useMemo } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Menu from '@material-ui/core/Menu';\n\nimport { reduxActions } from '../../redux/reducers';\nimport { selectContextMenuConfig, selectContextMenuItems } from '../../redux/selectors';\nimport { getI18nId, I18nNamespace } from '../../util/i18n';\nimport { important, makeGlobalChonkyStyles } from '../../util/styles';\nimport { useContextMenuDismisser } from './FileContextMenu-hooks';\nimport { SmartToolbarDropdownButton } from './ToolbarDropdownButton';\n\nexport interface FileContextMenuProps {}\n\nexport const FileContextMenu: React.FC<FileContextMenuProps> = React.memo(() => {\n    const dispatch = useDispatch();\n    useEffect(() => {\n        dispatch(reduxActions.setContextMenuMounted(true));\n        return () => {\n            dispatch(reduxActions.setContextMenuMounted(false));\n        };\n    }, [dispatch]);\n\n    const intl = useIntl();\n    const browserMenuShortcutString = intl.formatMessage(\n        {\n            id: getI18nId(I18nNamespace.FileContextMenu, 'browserMenuShortcut'),\n            defaultMessage: 'Browser menu: {shortcut}',\n        },\n        { shortcut: <strong>Alt + Right Click</strong> }\n    );\n\n    const contextMenuConfig = useSelector(selectContextMenuConfig);\n    const contextMenuItems = useSelector(selectContextMenuItems);\n\n    const hideContextMenu = useContextMenuDismisser();\n    const contextMenuItemComponents = useMemo(() => {\n        const components: ReactElement[] = [];\n        for (let i = 0; i < contextMenuItems.length; ++i) {\n            const item = contextMenuItems[i];\n\n            if (typeof item === 'string') {\n                components.push(\n                    <SmartToolbarDropdownButton\n                        key={`context-menu-item-${item}`}\n                        fileActionId={item}\n                        onClickFollowUp={hideContextMenu}\n                    />\n                );\n            } else {\n                item.fileActionIds.map(id =>\n                    components.push(\n                        <SmartToolbarDropdownButton\n                            key={`context-menu-item-${item.name}-${id}`}\n                            fileActionId={id}\n                            onClickFollowUp={hideContextMenu}\n                        />\n                    )\n                );\n            }\n        }\n        return components;\n    }, [contextMenuItems, hideContextMenu]);\n\n    const anchorPosition = useMemo(\n        () => (contextMenuConfig ? { top: contextMenuConfig.mouseY, left: contextMenuConfig.mouseX } : undefined),\n        [contextMenuConfig]\n    );\n\n    const classes = useStyles();\n    return (\n        <Menu\n            elevation={2}\n            disablePortal\n            onClose={hideContextMenu}\n            transitionDuration={150}\n            open={!!contextMenuConfig}\n            anchorPosition={anchorPosition}\n            anchorReference=\"anchorPosition\"\n            classes={{ list: classes.contextMenuList }}\n        >\n            {contextMenuItemComponents}\n            <ListSubheader component=\"div\" className={classes.browserMenuTooltip}>\n                {browserMenuShortcutString}\n            </ListSubheader>\n        </Menu>\n    );\n});\n\nconst useStyles = makeGlobalChonkyStyles(() => ({\n    contextMenuList: {\n        paddingBottom: important(0),\n        paddingTop: important(0),\n    },\n    browserMenuTooltip: {\n        lineHeight: important('30px'),\n        fontSize: important('0.7em'),\n    },\n}));\n","/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nimport { createGenerateClassName, StylesProvider } from '@material-ui/core';\nimport React from 'react';\n\nimport { FileBrowserHandle, FileBrowserProps } from '../../types/file-browser.types';\nimport { FileList } from '../file-list/FileList';\nimport { FileBrowser } from './FileBrowser';\nimport { FileContextMenu } from './FileContextMenu';\nimport { FileNavbar } from './FileNavbar';\nimport { FileToolbar } from './FileToolbar';\n\nconst muiJSSClassNameGenerator = createGenerateClassName({\n    // Seed property is used for prefix jss classes generated by material ui.\n    // Added to prevent style collisions\n    seed: 'chonky-generated',\n  });\n\nexport const FullFileBrowser = React.memo(\n    React.forwardRef<FileBrowserHandle, FileBrowserProps>((props, ref) => {\n        const { onScroll } = props\n        return (\n            <StylesProvider generateClassName={muiJSSClassNameGenerator}>\n                <FileBrowser ref={ref} {...props}>\n                    <FileNavbar />\n                    <FileToolbar />\n                    <FileList onScroll={onScroll}/>\n                    <FileContextMenu/>\n                </FileBrowser>\n            </StylesProvider>\n        );\n    })\n);\nFullFileBrowser.displayName = 'FullFileBrowser';\n","/**\n *\n */\n\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { ChonkyActions } from '../action-definitions';\nimport { FileActionData } from '../types/action-handler.types';\nimport { FileAction } from '../types/action.types';\nimport { FileArray, FileData } from '../types/file.types';\nimport { FileHelper } from '../util/file-helper';\n\nexport interface CustomFileData extends FileData {\n    parentId?: string;\n    childrenIds?: string[];\n}\nexport interface CustomFileMap<FT extends CustomFileData> {\n    [fileId: string]: FT;\n}\nexport interface FileMapParams<FT extends CustomFileData> {\n    baseFileMap: CustomFileMap<FT>;\n    initialFolderId: string;\n}\n\nexport const useFolderChain = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n\n        const folderChain = [currentFolder];\n\n        let parentId = currentFolder.parentId;\n        while (parentId) {\n            const parentFile = fileMap[parentId];\n            if (parentFile) {\n                folderChain.unshift(parentFile);\n                parentId = parentFile.parentId;\n            } else {\n                break;\n            }\n        }\n\n        return folderChain;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFiles = <FT extends CustomFileData>(\n    fileMap: CustomFileMap<FT>,\n    currentFolderId: string\n): FileArray<FT> => {\n    return useMemo(() => {\n        const currentFolder = fileMap[currentFolderId];\n        const childrenIds = currentFolder.childrenIds!;\n        const files = childrenIds.map((fileId: string) => fileMap[fileId]);\n        return files;\n    }, [currentFolderId, fileMap]);\n};\n\nexport const useFileMapMethods = <FT extends CustomFileData>(\n    baseFileMap: CustomFileMap<FT>,\n    initialFolderId: string\n) => {\n    const [fileMap, setFileMap] = useState(baseFileMap);\n    const [currentFolderId, setCurrentFolderId] = useState(initialFolderId);\n    const resetFileMap = useCallback(() => {\n        setFileMap(baseFileMap);\n        setCurrentFolderId(initialFolderId);\n    }, [baseFileMap, initialFolderId]);\n    const moveFiles = useCallback(\n        (files: FT[], source: FT, destination: FT) =>\n            setFileMap(currentFileMap => {\n                const newFileMap = { ...currentFileMap };\n                const moveFileIds = new Set(files.map(f => f.id));\n\n                // Delete files from their source folder.\n                const newSourceChildrenIds = source.childrenIds!.filter(id => !moveFileIds.has(id));\n                newFileMap[source.id] = {\n                    ...source,\n                    childrenIds: newSourceChildrenIds,\n                    childrenCount: newSourceChildrenIds.length,\n                };\n\n                // Add the files to their destination folder.\n                const newDestinationChildrenIds = [...destination.childrenIds!, ...files.map(f => f.id)];\n                newFileMap[destination.id] = {\n                    ...destination,\n                    childrenIds: newDestinationChildrenIds,\n                    childrenCount: newDestinationChildrenIds.length,\n                };\n\n                // Finally, update the parent folder ID on the files from source folder\n                // ID to the destination folder ID.\n                files.forEach(file => {\n                    newFileMap[file.id] = {\n                        ...file,\n                        parentId: destination.id,\n                    };\n                });\n\n                return newFileMap;\n            }),\n        []\n    );\n\n    const methods = useMemo(\n        () => ({\n            setFileMap,\n            setCurrentFolderId,\n            resetFileMap,\n            moveFiles,\n        }),\n        [setFileMap, setCurrentFolderId, resetFileMap, moveFiles]\n    );\n    return {\n        fileMap,\n        currentFolderId,\n        methods,\n    };\n};\nexport type FileMethods = ReturnType<typeof useFileMapMethods>['methods'];\n\nexport const useFileActionHandler = (methods: FileMethods) => {\n    return useCallback(\n        (data: FileActionData<FileAction>) => {\n            if (data.id === ChonkyActions.OpenFiles.id) {\n                const { targetFile, files } = data.payload;\n                const fileToOpen = targetFile ?? files[0];\n                if (fileToOpen && FileHelper.isDirectory(fileToOpen)) {\n                    methods.setCurrentFolderId(fileToOpen.id);\n                }\n            } else if (data.id === ChonkyActions.MoveFiles.id) {\n                methods.moveFiles(data.payload.files, data.payload.source!, data.payload.destination);\n            }\n        },\n        [methods]\n    );\n};\n\nexport const useFileMap = <FT extends CustomFileData = CustomFileData>({\n    baseFileMap,\n    initialFolderId,\n}: FileMapParams<FT>) => {\n    const { fileMap, currentFolderId, methods } = useFileMapMethods(baseFileMap, initialFolderId);\n    const folderChain = useFolderChain(fileMap, currentFolderId);\n    const files = useFiles(fileMap, currentFolderId);\n    const fileActionHandler = useFileActionHandler(methods as FileMethods);\n\n    const data = {\n        fileMap,\n        currentFolderId,\n        folderChain,\n        files,\n    };\n    return { data, methods, fileActionHandler };\n};\n"],"names":["useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","UNINITIALIZED_SENTINEL","useStaticValue","factory","valueRef","useRef","current","useInstanceVariable","ref","Logger","error","args","console","warn","debug","formatBullets","bullets","join","FileHelper","isDirectory","file","isDir","isHidden","isSymlink","isEncrypted","isClickable","isOpenable","openable","isSelectable","selectable","isDraggable","draggable","isDroppable","droppable","isDndOpenable","dndOpenable","getModDate","modDate","undefined","parseDate","maybeDate","Date","message","isNaN","getTime","getChildrenCount","childrenCount","sanitizeInputArray","mode","rawArray","sanitizedFiles","errorMessages","Array","isArray","push","nonObjectFileCount","missingFieldFileCount","seenIds","Set","duplicateIds","i","length","item","id","name","has","add","size","repeatedIdsString","from","errorMessageString","arrayString","itemString","sanitizedArray","OptionIds","ShowHiddenFiles","ShowFoldersFirst","DarkMode","SortOrder","selectInstanceId","state","instanceId","selectExternalFileActionHandler","externalFileActionHandler","selectFileActionMap","fileActionMap","selectFileActionIds","fileActionIds","selectFileActionData","fileActionId","selectToolbarItems","toolbarItems","selectContextMenuItems","contextMenuItems","selectFolderChain","folderChain","selectCurrentFolder","currentFolder","selectParentFolder","parentFolder","selectRawFiles","rawFiles","selectFileMap","fileMap","selectCleanFileIds","cleanFileIds","selectFileData","fileId","selectHiddenFileIdMap","hiddenFileIdMap","selectHiddenFileCount","Object","keys","selectFocusSearchInput","focusSearchInput","selectSearchString","searchString","selectSelectionMap","selectionMap","selectSelectedFileIds","selectSelectionSize","selectIsFileSelected","selectSelectedFiles","map","selectSelectedFilesForAction","action","requiresSelection","getSelectedFiles","fileFilter","selectSelectedFilesForActionCount","getSelectedFilesForAction","selectDisableSelection","disableSelection","selectFileViewConfig","fileViewConfig","selectSortActionId","sortActionId","selectSortOrder","sortOrder","selectOptionMap","optionMap","selectOptionValue","optionId","selectThumbnailGenerator","thumbnailGenerator","selectDoubleClickDelay","doubleClickDelay","selectIsDnDDisabled","disableDragAndDrop","selectClearSelectionOnOutsideClick","clearSelectionOnOutsideClick","selectContextMenuMounted","contextMenuMounted","selectContextMenuConfig","contextMenuConfig","selectContextMenuTriggerFile","config","triggerFileId","getFileActionMap","getOptionMap","getFileMap","getFileIds","fileIds","getCleanFileIds","getSortActionId","getSortOrder","getSearchString","_getLastClick","lastClick","makeGetAction","fileActionSelector","createSelector","makeGetOptionValue","defaultValue","makeGetFiles","fileIdsSelector","getSortedFileIds","files","sortAction","showFolderFirst","prepareSortKeySelector","selector","sortFunctions","desc","sortKeySelector","configKeyName","ASC","sortedFileIds","sort","by","getSearcher","cleanFiles","FuzzySearch","caseSensitive","getSearchFilteredFileIds","searcher","search","f","getHiddenFileIdMap","searchFilteredFileIds","showHiddenFiles","searchFilteredFileIdsSet","forEach","getDisplayFileIds","filter","getLastClickIndex","displayFileIds","index","selectors","getFileData","getIsFileSelected","selectedFiles","filters","filteredSelectedFiles","reduce","prevFiles","mergeFileActionsArrays","seenActionIds","addToSeen","a","wasNotSeen","fileActionArrays","duplicateFreeArrays","arr","duplicateFreeArray","concat","thunkUpdateRawFileActions","rawFileActions","disableDefaultFileActions","dispatch","defaultActionsToAdd","disabledActionIds","DefaultFileActions","fileActions","EssentialFileActions","optionDefaults","option","reduxActions","setRawFileActions","setFileActionsErrorMessages","setFileActions","setOptionDefaults","thunkUpdateToolbarNContextMenuItems","excludedToolbarFileActionIds","ChonkyActions","OpenParentFolder","seenToolbarGroups","seenContextMenuGroups","getGroup","itemArray","seenMap","groupName","group","button","toolbar","contextMenu","updateFileActionMenuItems","thunkUpdateDefaultFileViewActionId","getState","setFileViewConfig","thunkActivateSortAction","oldActionId","oldOrder","order","DESC","setSort","actionId","thunkApplySelectionTransform","selectionTransform","prevSelection","hiddenFileIds","newSelection","clearSelection","selectFiles","reset","thunkDispatchFileAction","data","_dispatch","Promise","resolve","thunkRequestFileAction","payload","selectedFilesForAction","contextMenuTriggerFile","actionState","toggleOption","effect","maybeEffectPromise","reduxDispatch","getReduxState","then","effectResult","triggerDispatchAfterEffect","preventDispatch","FileViewMode","ChonkyIconName","defineFileAction","__payloadType","hotkeys","errorMessage","Error","findElementAmongAncestors","maybeElement","predicate","parentElement","elementIsInsideButton","buttonCandidate","element","tagName","toLowerCase","getValueOrFallback","fallback","desiredType","reduxThunks","selectRange","params","fileIdsToSelect","slice","rangeStart","rangeEnd","EssentialActions","MouseClickFile","clickType","OpenFiles","targetFile","ctrlKey","toggleSelection","exclusive","setLastClickIndex","fileDisplayIndex","shiftKey","lastClickIndex","KeyboardClickFile","enterKey","spaceKey","StartDragNDrop","draggedFile","EndDragNDrop","destination","droppedFiles","MoveFiles","ChangeSelection","icon","openParentFolder","iconOnly","OpenFileContextMenu","triggerFile","fileSelected","showContextMenu","mouseX","clientX","mouseY","clientY","DefaultActions","OpenSelection","openFiles","SelectAllFiles","selectAllFiles","ClearSelection","EnableListView","List","entryHeight","list","EnableCompactView","Compact","entryWidth","compact","EnableGridView","Grid","smallThumbnail","SortFilesByName","SortFilesBySize","SortFilesByDate","ToggleHiddenFiles","ToggleShowFoldersFirst","FocusSearchInput","ToggleDarkMode","ExtraActions","CopyFiles","copy","CreateFolder","tooltip","folderCreate","UploadFiles","upload","DownloadFiles","download","DeleteFiles","trash","initialRootState","fileActionsErrorMessages","rawFolderChain","folderChainErrorMessages","filesErrorMessages","searchMode","reducers","setExternalFileActionHandler","setRawFolderChain","setRawFiles","selectedFileId","setSortedFileIds","setHiddenFileIds","setFocusSearchInput","setSearchString","oldValue","setSelectionDisabled","setThumbnailGenerator","setDoubleClickDelay","setDisableDragAndDrop","setClearSelectionOnOutsideClick","setContextMenuMounted","hideContextMenu","createSlice","initialState","actions","rootReducer","reducer","useStoreWatchers","store","selectionWatcher","watch","onSelectionChange","oldSelection","selectedFilesIds","selection","unsubscribeCallbacks","subscribe","unsubscribe","useChonkyStore","chonkyInstanceId","preloadedState","configureStore","middleware","getDefaultMiddleware","serializableCheck","devTools","useParamSelector","parametrizedSelector","selectorParams","useCallback","useSelector","useDTE","actionCreator","useDispatch","usePropReduxUpdate","ChonkyIconPlaceholder","title","React","defaultConfig","onFileAction","disableDragAndDropProvider","defaultSortActionId","defaultFileViewActionId","iconComponent","darkMode","i18n","setChonkyDefaults","key","I18nNamespace","getI18nId","namespace","stringId","getActionI18nId","FileActions","useLocalizedFileActionGroup","intl","useIntl","useMemo","formatMessage","FileActionGroups","defaultMessage","useLocalizedFileActionStrings","buttonName","buttonTooltip","useLocalizedFileEntryStrings","formatters","useContext","ChonkyFormattersContext","fileModDateString","formatFileModDate","fileSizeString","formatFileSize","defaultFormatters","safeModDate","formatDate","dateStyle","timeStyle","_intl","sizeData","filesize","bits","output","symbol","Math","round","createContext","ChonkyIconContext","VideoExtensions","ImageExtensions","AudioExtensions","ColorsLight","ColorsDark","getIconTrie","colourIndex","step","IconsToExtensions","license","model","database","text","archive","image","video","code","info","lock","music","terminal","users","linux","ubuntu","windows","rust","python","nodejs","php","git","adobe","pdf","excel","word","flash","exactTrie","ExactTrie","ignoreCase","pair","extensions","colorCode","iconData","put","iconTrie","useIconData","loading","folder","match","getWithCheckpoints","lightTheme","colors","debugRed","debugBlue","debugGreen","debugPurple","debugYellow","textActive","fontSizes","rootPrimary","margins","rootLayoutMargin","lineHeight","fontSize","buttonRadius","dnd","canDropColor","cannotDropColor","canDropMask","cannotDropMask","fileListCanDropMaskOne","fileListCanDropMaskTwo","fileListCannotDropMaskOne","fileListCannotDropMaskTwo","dragLayer","border","padding","borderRadius","fileList","desktopGridGutter","mobileGridGutter","gridFileEntry","childrenCountSize","iconColorFocused","iconSize","iconColor","fileColorTint","folderBackColorTint","folderFrontColorTint","listFileEntry","propertyFontSize","iconFontSize","iconBorderRadius","darkThemeOverride","mobileThemeOverride","useIsMobileBreakpoint","useMediaQuery","getStripeGradient","colorOne","colorTwo","makeLocalChonkyStyles","styles","createUseStyles","makeGlobalChonkyStyles","makeStyles","selectorMapping","makeGlobalStyles","theme","localStyles","globalStyles","localSelectors","localSelector","globalSelector","jssSelector","useStyles","classes","important","c","classnames","useFileBrowserHandle","useStore","useImperativeHandle","getFileSelection","selectionSet","setFileSelection","requestFileAction","ChonkyBusinessLogicInner","memo","forwardRef","props","displayName","ChonkyBusinessLogic","useDndContextAvailable","dndContext","DndContext","dragDropManager","useDragIfAvailable","dndContextAvailable","mockHook","useHook","useDrag","useDropIfAvailable","useDrop","findClosestChonkyFileId","fileEntryWrapperDiv","dataset","chonkyFileId","useContextMenuTrigger","contextMenuMountedRef","event","altKey","preventDefault","target","useContextMenuDismisser","ChonkyDndFileEntryType","layerStyles","position","pointerEvents","zIndex","left","top","width","height","getItemStyles","initialCursorOffset","initialFileOffset","currentFileOffset","display","x","y","transform","WebkitTransform","DnDFileListDragLayer","useDragLayer","monitor","getItem","itemType","getItemType","getInitialClientOffset","getInitialSourceClientOffset","getSourceClientOffset","isDragging","selectionSize","style","className","fileDragPreview","boxShadow","palette","divider","backgroundColor","background","color","primary","HotkeyListener","fileAction","hotkeysStr","hotkeyCallback","unbind","ChonkyPresentationLayer","children","dndDisabled","handleClickAway","hotkeyListenerComponents","ClickAwayListener","onClickAway","Box","chonkyRoot","onContextMenu","paper","touchAction","fontFamily","flexDirection","boxSizing","textAlign","webkitTouchCallout","webkitUserSelect","mozUserSelect","msUserSelect","userSelect","FileBrowser","shortid","generate","isMobileBreakpoint","muiTheme","createMuiTheme","type","combinedTheme","merge","chonkyComps","IntlProvider","locale","defaultLocale","Provider","ReduxProvider","ThemeProvider","MuiThemeProvider","DndProvider","backend","HTML5Backend","useFolderChainItems","folderChainItems","items","disabled","onClick","useFileDrag","fileRef","getDndStartPayload","reduxState","sourceInstanceId","source","canDrag","onDragStart","onDragEnd","dropResult","getDropResult","dropTarget","dropEffect","collect","begin","end","dndIsDragging","drag","preview","getEmptyImage","captureDraggingState","useFileDrop","forceDisableDrop","includeChildrenDrops","folderChainRef","onDrop","_item","canDrop","customDropResult","isOver","shallow","prohibitedFileIds","movedFiles","currFile","isOverCurrent","accept","drop","dndIsOver","dndIsOverCurrent","dndCanDrop","useFileEntryDnD","dndState","useDndHoverOpen","currentFolderRef","timeout","getRandomInt","min","max","floor","random","TextPlaceholder","minLength","maxLength","placeholderLength","whitespace","repeat","textPlaceholder","dangerouslySetInnerHTML","__html","opacity","animationName","animationIterationCount","animationTimingFunction","animationDuration","whiteSpace","overflow","maxWidth","minWidth","useFileEntryHtmlProps","dataProps","role","useFileEntryState","selected","focused","useThumbnailUrl","thumbnailUrl","thumbnailLoading","fileColor","iconSpin","useDndIcon","dndIconName","showDropIcon","dndCannotDrop","dndDragging","useModifierIconComponents","modifierIcons","hidden","symlink","ChonkyIcon","modifierIconComponents","_extname","fileName","parts","split","useFileNameComponent","extension","ext","substr","setThumbnailUrl","setThumbnailLoading","loadingAttempts","loadingCancelled","useFileClickHandlers","displayIndex","onMouseClick","onKeyboardClick","onSingleClick","onDoubleClick","CustomVisibilityState","useFileActionTrigger","useFileActionProps","optionValue","actionSelectionSize","actionSelectionEmpty","active","sortAsc","sortDesc","placeholder","toggleOn","toggleOff","isSortButtonAndCurrentSort","isFileViewButtonAndCurrentView","isOptionAndEnabled","customDisabled","customActive","customVisibility","Disabled","Active","ToolbarButton","externalClassName","dropdown","iconWithText","fallbackIcon","fixedWidth","baseButton","iconOnlyButton","activeButton","Button","iconDropdown","textTransform","letterSpacing","paddingBottom","paddingTop","marginRight","marginLeft","marginTop","SmartToolbarButton","triggerAction","Hidden","FolderChainButton","first","baseBreadcrumb","disabledBreadcrumb","currentBreadcrumb","folderChainIcon","buttonContainer","dndIndicator","textDecoration","FileNavbar","folderChainComponents","components","component","navbarWrapper","navbarContainer","Breadcrumbs","navbarBreadcrumbs","separator","upDirectoryButton","flexGrow","ToolbarDropdownButton","MenuItem","ListItemIcon","ListItemText","primaryTypographyProps","minHeight","SmartToolbarDropdownButton","onClickFollowUp","handleClick","ToolbarDropdown","anchor","setAnchor","currentTarget","handleClose","menuItemComponents","localizedName","Menu","autoFocus","keepMounted","elevation","anchorEl","onClose","open","Boolean","transitionDuration","dropdownList","ToolbarInfo","hiddenCount","fileCountString","Toolbar","fileCount","selectedString","hiddenString","infoContainer","Typography","infoText","variant","extraInfoSpan","selectionSizeText","hiddenCountText","ToolbarSearch","searchPlaceholderString","searchInputRef","reduxSearchString","localSearchString","setLocalSearchString","debouncedLocalSearchString","showLoadingIndicator","setShowLoadingIndicator","focus","handleChange","handleKeyUp","blur","TextField","searchFieldContainer","onChange","inputRef","InputProps","onKeyUp","startAdornment","InputAdornment","searchIcon","spin","searchFieldInput","inputProps","searchFieldInputInner","margin","paddingLeft","FileToolbar","toolbarItemComponents","toolbarWrapper","toolbarContainer","toolbarLeft","toolbarRight","flexWrap","toolbarLeftFiller","FileListEmpty","emptyString","FileList","fileListEmpty","fileListEmptyContent","folderOpen","useClickHandler","counter","clickCount","clickTimeout","mouseClickEvent","metaKey","useKeyDownHandler","keyboardClickEvent","nativeEvent","stopPropagation","ClickableWrapper","WrapperTag","wrapperTag","passthroughProps","setFocused","handleKeyDown","compProps","onFocus","onBlur","onKeyDown","tabIndex","mergedProps","FileEntryName","fileNameComponent","hint","paddingRight","CompactEntry","entryState","fileEntryHtmlProps","listFileEntryIcon","listFileEntryDescription","listFileEntryName","listFileEntryProperties","listFileEntryProperty","alignItems","DnDFileEntry","fillParent","FileThumbnail","thumbnailStyle","backgroundImage","fileThumbnail","backgroundRepeat","backgroundPosition","backgroundSize","GridEntryDndIndicator","borderBottom","borderLeft","content","GridEntryPreviewFolder","folderClasses","useFolderStyles","fileClasses","useFileStyles","commonClasses","useCommonEntryStyles","previewFile","folderBackSideMid","folderBackSideTop","folderFrontSide","fileIcon","selectionIndicator","thumbnail","borderTopLeftRadius","borderTopRightRadius","right","borderRightColor","borderTopColor","borderBottomColor","borderLeftColor","borderWidth","borderStyle","bottom","shadows","GridEntryPreviewFile","focusIndicator","GridEntry","useFileEntryStyles","entryClassName","gridFileEntryPreview","gridFileEntryNameContainer","gridFileEntryName","wordBreak","ListEntry","styleState","listFileEntrySelection","textOverflow","flex","disabledDndState","SmartFileEntry","fileViewMode","fileClickHandlers","clickableWrapperProps","fileEntryClickableWrapper","fileEntryProps","EntryComponent","outline","isMobileDevice","window","orientation","navigator","userAgent","indexOf","getGridConfig","viewConfig","gutter","scrollbar","columnCount","columnWidth","rowCount","ceil","rowHeight","GridContainer","gridRef","gridConfig","setGridConfig","gridConfigRef","oldConf","newConf","resetAfterRowIndex","resetAfterColumnIndex","resetAfterIndices","columnIndex","rowIndex","sizers","gc","getColumnWidth","getRowHeight","displayFileIdsRef","getItemKey","cellRenderer","styleWithGutter","gridComponent","VariableSizeGrid","gridContainer","estimatedRowHeight","estimatedColumnWidth","itemKey","ListContainer","listRef","listComponent","rowRenderer","FixedSizeList","listContainer","itemSize","itemCount","borderTop","localClasses","useLocalStyles","onScroll","fillParentContainer","listRenderer","fileListWrapper","dndDropZone","dndDropZoneIcon","AutoSizer","disableHeight","maxHeight","FileContextMenu","browserMenuShortcutString","shortcut","contextMenuItemComponents","anchorPosition","disablePortal","anchorReference","contextMenuList","ListSubheader","browserMenuTooltip","muiJSSClassNameGenerator","createGenerateClassName","seed","FullFileBrowser","StylesProvider","generateClassName","useFolderChain","currentFolderId","parentId","parentFile","unshift","useFiles","childrenIds","useFileMapMethods","baseFileMap","initialFolderId","setFileMap","setCurrentFolderId","resetFileMap","moveFiles","currentFileMap","newFileMap","moveFileIds","newSourceChildrenIds","newDestinationChildrenIds","methods","useFileActionHandler","fileToOpen","useFileMap","fileActionHandler"],"mappings":"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"}
\ No newline at end of file
